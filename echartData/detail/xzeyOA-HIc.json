{"status":0,"data":{"cid":"xzeyOA-HIc","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"广东省新生生源地","description":"","latestVersion":9,"alwaysLatest":1,"createTime":"2020-10-12T09:20:36.000Z","lastUpdateTime":"2020-10-12T09:20:36.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-27T07:19:22.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1602465184603-MDCI9F57V.json\";\r\nvar data = [];\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('广东', geoJson);\r\n    data = geoJson.features.map((item) => {\r\n        return {\r\n            value: (Math.random() * 1000).toFixed(0),\r\n            name: item.properties.name\r\n        }\r\n    });\r\n    var gdGeoCoordMap = {\r\n        '广州市': [113.507649675, 23.3200491021],\r\n        '东莞市': [113.863433991, 22.9430238154],\r\n        \"中山市\": [113.422060021, 22.5451775145],\r\n        '云浮市': [111.750945959, 22.9379756855],\r\n        \"佛山市\": [113.034025635, 23.0350948405],\r\n        \"惠州市\": [114.41065808, 23.1135398524],\r\n        \"揭阳市\": [116.079500855, 23.3479994669],\r\n        \"梅州市\": [116.126403098, 24.304570606],\r\n        \"汕头市\": [116.588650288, 23.2839084533],\r\n        \"汕尾市\": [115.572924289, 22.9787305002],\r\n        \"江门市\": [112.678125341, 22.2751167835],\r\n        \"河源市\": [114.913721476, 23.9572508505],\r\n        \"深圳市\": [114.025973657, 22.5960535462],\r\n        \"清远市\": [113.040773349, 23.9984685504],\r\n        \"湛江市\": [110.165067263, 21.2574631038],\r\n        \"潮州市\": [116.830075991, 23.7618116765],\r\n        \"珠海市\": [113.362447026, 22.1369146461],\r\n        \"肇庆市\": [112.37965337, 23.5786632829],\r\n        \"茂名市\": [110.931245331, 21.9682257188],\r\n        \"阳江市\": [111.777009756, 21.9715173045],\r\n        \"韶关市\": [113.594461107, 24.8029603119]\r\n    };\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = gdGeoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    var gzname = [\"广州市\"];\r\n    var gzvalue = [300];\r\n    var gzs = [];\r\n    for (var i = 0; i < gzname.length; i++) {\r\n        gzs.push({\r\n            name: gzname[i],\r\n            value: gzvalue[i]\r\n        })\r\n    }\r\n    var gdGeoCoordMap2 = {\r\n        '广州市': [113.507649675, 23.5300491021],\r\n    };\r\n    var convertData2 = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = gdGeoCoordMap2[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    option = {\r\n        backgroundColor: '#131C38',\r\n        tooltip: {\r\n            backgroundColor: 'rgba(0,0,0,0)',\r\n            trigger: 'axis',\r\n        },\r\n        legend: {\r\n            show: false,\r\n        },\r\n        geo: [{\r\n                map: '广东',\r\n                aspectScale: 1,\r\n                zoom: 0.65,\r\n                layoutCenter: ['50%', '50%'],\r\n                layoutSize: '180%',\r\n                show: true,\r\n                roam: false,\r\n                label: {\r\n                    emphasis: {\r\n                        show: false\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(192,245,249,.8)',\r\n                        borderWidth: 3,\r\n                        shadowColor: '#6FFDFF',\r\n                        shadowOffsetY: 0,\r\n                        shadowBlur: 10,\r\n                        areaColor: 'rgba(29,85,139,.6)',\r\n                    },\r\n\r\n                },\r\n                emphasis: {\r\n                    areaColor: 'rgba(29,85,139,.6)',\r\n                }\r\n            }, {\r\n                map: '广东',\r\n                aspectScale: 1,\r\n                zoom: 0.65,\r\n                layoutCenter: ['50%', '50%'],\r\n                layoutSize: '180%',\r\n                show: true,\r\n                roam: false,\r\n                label: {\r\n                    emphasis: {\r\n                        show: false\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(192,245,249,.8)',\r\n                        borderWidth: 3,\r\n                        shadowColor: '#2C99F6',\r\n                        shadowOffsetY: 0,\r\n                        shadowBlur: 120,\r\n                        areaColor: 'rgba(29,85,139,.6)',\r\n                    },\r\n\r\n                },\r\n                emphasis: {\r\n                    areaColor: 'rgba(29,85,139,.6)',\r\n                }\r\n            },\r\n            //重影\r\n            {\r\n                type: 'map',\r\n                map: '广东',\r\n                zlevel: -1,\r\n                aspectScale: 1,\r\n                zoom: 0.65,\r\n                layoutCenter: ['50%', '50.7%'],\r\n                layoutSize: '180%',\r\n                roam: false,\r\n                silent: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(172, 122, 255,0.5)',\r\n                        shadowColor: 'rgba(172, 122, 255,0.5)',\r\n                        shadowOffsetY: 5,\r\n                        shadowBlur: 15,\r\n                        areaColor: 'rgba(5,21,35,0.1)'\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                type: 'map',\r\n                map: '广东',\r\n                zlevel: -2,\r\n                aspectScale: 1,\r\n                zoom: 0.65,\r\n                layoutCenter: ['50%', '51.4%'],\r\n                layoutSize: '180%',\r\n                roam: false,\r\n                silent: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(172, 122, 255,0.4)',\r\n                        shadowColor: 'rgba(172, 122, 255,0.6)',\r\n                        shadowOffsetY: 5,\r\n                        shadowBlur: 15,\r\n                        areaColor: 'rgba(5,21,35,0.1)'\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                type: 'map',\r\n                map: '广东',\r\n                zlevel: -3,\r\n                aspectScale: 1,\r\n                zoom: 0.65,\r\n                layoutCenter: ['50%', '52.1%'],\r\n                layoutSize: '180%',\r\n                roam: false,\r\n                silent: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(172, 122, 255,0.3)',\r\n                        shadowColor: 'rgba(172, 122, 255,0.8)',\r\n                        shadowOffsetY: 15,\r\n                        shadowBlur: 8,\r\n                        areaColor: 'rgba(5,21,35,0.1)'\r\n                    }\r\n                }\r\n            }\r\n        ],\r\n        series: [{\r\n            tooltip: {\r\n                trigger: 'item',\r\n                position: 'inside',\r\n                formatter: function(item) {\r\n                    var tipHtml = '';\r\n                    tipHtml = '<div style=\"font-size: 16px;height: 28px;line-height: 30px;background:#000259;opacity: 0.75;border-radius: 3px;color:#fff\">' + '&nbsp;&nbsp;' + item.data.name + '&nbsp;&nbsp;&nbsp;' + item.data.value + '人&nbsp;&nbsp;' + '</span>' +\r\n                        '</div>';\r\n                    return tipHtml;\r\n                }\r\n            },\r\n            name: '广东省数据',\r\n            type: 'map',\r\n            map: '广东', // 自定义扩展图表类型\r\n            aspectScale: 1,\r\n            zoom: 0.65, //缩放\r\n            showLegendSymbol: false,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: {\r\n                        type: 'linear-gradient',\r\n                        x: 0,\r\n                        y: 300,\r\n                        x2: 0,\r\n                        y2: 0,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: 'RGBA(37,108,190,1)' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'RGBA(15,169,195,1)' // 50% 处的颜色\r\n                        }],\r\n                        global: true // 缺省为 false\r\n                    },\r\n                    borderColor: '#4ECEE6',\r\n                    borderWidth: 1,\r\n                },\r\n                emphasis: {\r\n                    areaColor: {\r\n                        type: 'linear-gradient',\r\n                        x: 0,\r\n                        y: 300,\r\n                        x2: 0,\r\n                        y2: 0,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: 'RGBA(37,108,190,1)' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'RGBA(15,169,195,1)' // 50% 处的颜色\r\n                        }],\r\n                        global: true // 缺省为 false\r\n                    },\r\n                }\r\n            },\r\n            layoutCenter: ['50%', '50%'],\r\n            layoutSize: '180%',\r\n            markPoint: {\r\n                symbol: 'none'\r\n            },\r\n            data: data,\r\n        }, {\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            rippleEffect: {\r\n                brushType: 'stroke',\r\n            },\r\n            showEffectOn: 'render',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: {\r\n                        type: 'radial',\r\n                        x: 0.5,\r\n                        y: 0.5,\r\n                        r: 0.5,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: 'rgba(0,255,246,0.1)'\r\n                        }, {\r\n                            offset: 0.6,\r\n                            color: 'rgba(0,255,246,0.4)'\r\n                        }, {\r\n                            offset: 0.85,\r\n                            color: 'transparent'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#FFF'\r\n                        }],\r\n                        global: false // 缺省为 false\r\n                    },\r\n                }\r\n\r\n            },\r\n            label: {\r\n                normal: {\r\n                    color: '#fff',\r\n                },\r\n            },\r\n            symbol: 'circle',\r\n            symbolSize: 18,\r\n            data: convertData(data),\r\n            zlevel: 1,\r\n        }, {\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: function(params) {\r\n                        return '{fline|' + params.name + '}{tline|' + gzvalue[params.dataIndex] + '人}';\r\n                    },\r\n                    position: [1, 0, 0, 0],\r\n                    backgroundColor: 'rgba(0,2,89,.75)',\r\n                    padding: [0, 0],\r\n                    borderRadius: [0, 3, 3, 0],\r\n                    lineHeight: 28,\r\n                    color: '#ffffff',\r\n                    rich: {\r\n                        fline: {\r\n                            padding: [0, 5, 0, 10],\r\n                            color: '#ffffff',\r\n                            fontSize: 16,\r\n                        },\r\n                        tline: {\r\n                            padding: [0, 10, 0, 5],\r\n                            color: '#ffffff',\r\n                            fontSize: 16,\r\n                        },\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                color: '#00FFF6',\r\n\r\n            },\r\n            symbol: 'rect',\r\n            symbolSize: [1, 50],\r\n            z: 999,\r\n            data: convertData2(gzs),\r\n\r\n\r\n        }],\r\n    }\r\n    myChart.setOption(option);\r\n    //showTips('广州市');\r\n})\r\n/*\r\n// 默认鼠标移出canvas后显示广州的tooltip信息\r\nmyChart.on(\"globalout\", () => {\r\n    setTimeout(() => {\r\n        showTips('广州市')\r\n    }, 500)\r\n})\r\n\r\nfunction showTips(name) {\r\n    data.forEach((item, i) => {\r\n        if (item.name.includes(name)) {\r\n            myChart.dispatchAction({\r\n                type: 'showTip',\r\n                seriesIndex: 0,\r\n                dataIndex: i\r\n            });\r\n            myChart.dispatchAction({\r\n                type: 'mapSelect',\r\n                seriesIndex: 0,\r\n                dataIndex: i\r\n            });\r\n        }\r\n    })\r\n}*/","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":5572,"userName":"衰***命","commentCount":0,"starCount":39,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xzeyOA-HIc.png?v=1606461562822","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","markPoint","series-effectScatter","series-map","series-scatter","tooltip"],"customTags":[],"updaterUserName":"衰***命"}}