{"status":0,"data":{"cid":"xSJxQoIxS-","authorUid":"bd-1479745787","authorUserName":"喂V你温柔点","title":"百度地图迁徙图","description":"通过官方实例修改的","latestVersion":1,"alwaysLatest":1,"createTime":"2017-07-10T01:40:40.000Z","lastUpdateTime":"2017-07-10T01:40:40.000Z","auth":2,"uid":"bd-1479745787","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.6.2","versionCreateTime":"2017-07-10T01:40:40.000Z","code":"var startPoint = {\r\n    x: 108.943807,\r\n    y: 34.280969\r\n};\r\n// 地图自定义样式\r\nvar bmap = {\r\n    center: [startPoint.x, startPoint.y],\r\n    zoom: 12,\r\n    roam: true,\r\n\r\n}\r\n\r\nvar geoCoordMap = {\r\n    '西安市雁塔区': [108.951122, 34.220618],\r\n    '西安市灞桥区': [109.070932, 34.279159],\r\n    '西安市长安区': [108.913375, 34.163297],\r\n    '西安市未央区': [108.953105, 34.29917],\r\n    '西安市莲湖区': [108.950678, 34.270978],\r\n    '西安市临潼区': [109.220655, 34.372783]\r\n};\r\n\r\nvar BJData = [\r\n    [{\r\n        name: '西安市雁塔区'\r\n    }, {\r\n        name: '西安市灞桥区',\r\n        value: 39\r\n    }],\r\n    [{\r\n        name: '西安市雁塔区'\r\n    }, {\r\n        name: '西安市长安区',\r\n        value: 39\r\n    }],\r\n    [{\r\n        name: '西安市雁塔区'\r\n    }, {\r\n        name: '西安市未央区',\r\n        value: 38\r\n    }],\r\n    [{\r\n        name: '西安市雁塔区'\r\n    }, {\r\n        name: '西安市莲湖区',\r\n        value: 38\r\n    }],\r\n    [{\r\n        name: '西安市雁塔区'\r\n    }, {\r\n        name: '西安市临潼区',\r\n        value: 38\r\n    }]\r\n];\r\n\r\nvar planePath = 'path://M128 724.224c0 42.432 19.2 80.192 48 103.744l0 84.864C176 941.12 195.2 960 224 960l48 0C300.8 960 320 941.12 320 912.832l0-47.168 384 0 0 47.168C704 941.12 723.2 960 752 960l48 0c28.8 0 48-18.88 48-47.168l0-84.864C876.8 804.352 896 766.656 896 724.224L896 252.608C896 87.552 723.2 64 512 64 300.8 64 128 87.552 128 252.608L128 724.224zM296 771.392c-38.4 0-72-33.024-72-70.72 0-37.696 33.6-70.72 72-70.72 38.4 0 72 33.024 72 70.72C368 738.368 334.4 771.392 296 771.392zM728 771.392c-38.4 0-72-33.024-72-70.72 0-37.696 33.6-70.72 72-70.72s72 33.024 72 70.72C800 738.368 766.4 771.392 728 771.392zM800 488.448l-576 0L224 252.608l576 0L800 488.448z';\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = geoCoordMap[dataItem[0].name];\r\n        var toCoord = geoCoordMap[dataItem[1].name];\r\n        if (fromCoord && toCoord) {\r\n            res.push({\r\n                fromName: dataItem[0].name,\r\n                toName: dataItem[1].name,\r\n                coords: [fromCoord, toCoord]\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar color = ['red'];\r\nvar series = [];\r\n[\r\n    ['西安市雁塔区', BJData]\r\n].forEach(function(item, i) {\r\n    series.push({\r\n        name: item[0] + ' 公交',\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'bmap',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                formatter: '{b}'\r\n            }\r\n        },\r\n        symbolSize: function(val) {\r\n            return val[2] / 4;\r\n        },\r\n        showEffectOn: 'render',\r\n        itemStyle: {\r\n            normal: {\r\n                color: color[i]\r\n            }\r\n        },\r\n        data: [{\r\n            name: item[0],\r\n            value: geoCoordMap[item[0]].concat([100])\r\n        }]\r\n    }, {\r\n        name: item[0] + ' 公交',\r\n        type: 'lines',\r\n        coordinateSystem: 'bmap',\r\n        zlevel: 1,\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0.7,\r\n            color: '#fff',\r\n            symbolSize: 3\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 0,\r\n                curveness: 0.2\r\n            }\r\n        },\r\n        data: convertData(item[1])\r\n    }, {\r\n        name: item[0] + ' 公交',\r\n        type: 'lines',\r\n        coordinateSystem: 'bmap',\r\n        zlevel: 2,\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 1,\r\n                opacity: 0.4,\r\n                curveness: 0.2\r\n            }\r\n        },\r\n        data: convertData(item[1])\r\n    }, {\r\n        name: item[0] + ' 公交',\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'bmap',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                formatter: '{b}'\r\n            }\r\n        },\r\n        symbolSize: function(val) {\r\n            return val[2] / 4;\r\n        },\r\n        showEffectOn: 'render',\r\n        itemStyle: {\r\n            normal: {\r\n                color: color[i]\r\n            }\r\n        },\r\n        data: item[1].map(function(dataItem) {\r\n            return {\r\n                name: dataItem[1].name,\r\n                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n            };\r\n        })\r\n    });\r\n});\r\n\r\noption = {\r\n    bmap: bmap,\r\n    color: ['gold', 'aqua', 'lime'],\r\n    backgroundColor: '#404a59',\r\n    title: {\r\n        text: '西安市雁塔区公交线路运行图',\r\n        subtext: 'data-visual.cn',\r\n        sublink: 'http://data-visual.cn',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: 'red'\r\n        }\r\n    },\r\n    tooltip: {\r\n        trigger: 'item'\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: 'bottom',\r\n        left: 'right',\r\n        data: ['西安市雁塔区 公交'],\r\n        textStyle: {\r\n            color: 'red'\r\n        },\r\n        selectedMode: 'single'\r\n    },\r\n    geo: {\r\n        map: 'bmap',\r\n        polyline: true,\r\n        progressiveThreshold: 500,\r\n        progressive: 200,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#404a59'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,/dep/echarts/map/js/china.js,http://api.map.baidu.com/api?v=2.0&ak=oq75GF57Gc2a5ZUlQ4FtWcCx","updaterUID":"bd-1479745787","theme":"","layout":"","viewCount":699,"userName":"喂V你温柔点","commentCount":1,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSJxQoIxS-.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"喂V你温柔点"}}