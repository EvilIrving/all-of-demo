{"status":0,"data":{"cid":"xfpl8-EYlG","authorUid":"obd-o2ETbOYTvQ5DyIMOTHqpUrUIOzA_n6I","authorUserName":"173*****298","title":"带有内部百分比圆环的圆头饼图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-15T15:52:38.000Z","lastUpdateTime":"2020-12-15T15:52:38.000Z","auth":2,"uid":"obd-o2ETbOYTvQ5DyIMOTHqpUrUIOzA_n6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-19T07:02:11.000Z","code":"let sum = 100\nlet width = 200\nvar data = [{\n    value: 70,\n    name: '70%',\n    label: {\n        color: '#fff'\n    },\n    itemStyle: {\n\n    },\n    emphasis: {\n        itemStyle: {\n\n        }\n    }\n}, {\n    value: 30,\n    name: '30%',\n    label: {\n        color: '#fff'\n    },\n    itemStyle: {\n\n    },\n    emphasis: {\n        itemStyle: {\n\n        }\n    }\n}, ]\n\n\nlet preAngle = 0\n //每个元素的角度\nlet everyAngle = 360 / sum\n\n// 计算圆环角度\nfunction angleText(i, value) {\n    //文字现在所在的角度\n    var currentAngle =preAngle +( everyAngle*value / 2);\n\n    preAngle += everyAngle*value\n\n    if (currentAngle <= 90) {\n        return -currentAngle;\n    } else if (currentAngle <= 180 && currentAngle > 90) {\n        return 180 - currentAngle;\n    } else if (currentAngle < 270 && currentAngle > 180) {\n        return 180 - currentAngle;\n    } else if (currentAngle < 360 && currentAngle >= 270) {\n        return 360 - currentAngle;\n    }\n}\n\ndata1 = JSON.parse(JSON.stringify(data));\nvar data2 = [];\nvar color = ['#00ffff', '#00cfff', '#006ced', '#ffe000', '#ffa800', '#ff5b00', '#ff3000']\nfor (var i = 0; i < data1.length; i++) {\n    data1[i].name = (100 * (data1[i].value / sum)).toFixed(0) + '%'\n    // data1[i].value = 1\n    data1[i]['label']['rotate'] = angleText(i,  data1[i].value);\n    //   data1[i]['label'].normal.position ='inside';\n    //  data1[i].itemStyle.color = color[i]\n    \n    data2.push({\n        value: data[i].value,\n        name: data[i].name,\n        itemStyle: {\n            normal: {\n                borderWidth: width * 0.04,\n                //   borderWidth: 10,\n                shadowBlur: 4,\n                borderColor: color[i],\n                shadowColor: color[i]\n            }\n        }\n    }, {\n        value: 2,\n        name: '',\n        itemStyle: {\n            normal: {\n                label: {\n                    show: false\n                },\n                labelLine: {\n                    show: false\n                },\n                color: 'rgba(0, 0, 0, 0)',\n                borderColor: 'rgba(0, 0, 0, 0)',\n                borderWidth: 0\n            }\n        }\n    });\n\n}\n\n\n\n\n\noption = {\n    title: {\n        text: 'Awesome Chart'\n    },\n\n    series: [{\n            type: 'pie',\n            radius: [width * 0.36,  width * 0.46],\n            hoverAnimation: false,\n            // itemStyle: {\n            //     color: 'red'\n            // },\n            // labelLine: {\n            //     normal: {\n            //         show: false,\n            //         length: 30,\n            //         length2: 55\n            //     },\n            // },\n            label: {\n                normal: {\n                    position: 'inside',\n                    // align: 'center',\n                    fontWeight:'bold',\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: width * 0.06,\n                    }\n                    \n                }\n            },\n            name: \"\",\n            data: data1\n        },\n            {\n            name: '',\n            type: 'pie',\n            clockWise: true,\n            radius: [ width * 0.5, width * 0.54],\n            hoverAnimation: false,\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false,\n                    },\n                    labelLine: {\n                      show: false,\n                    }\n                }\n            },\n            data: data2\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"obd-o2ETbOYTvQ5DyIMOTHqpUrUIOzA_n6I","theme":"","layout":"","viewCount":34,"userName":"173*****298","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfpl8-EYlG.png?v=1608361331918","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title"],"customTags":[],"updaterUserName":"173*****298"}}