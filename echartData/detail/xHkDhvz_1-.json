{"status":0,"data":{"cid":"xHkDhvz_1-","authorUid":"bd-1530657551","authorUserName":"谢***Q","title":"2017/5/4 业务预测点击事件","description":"当前月份之前已生成数据，预测当前月份之后的数据。点击选择需要查看的月份。。","latestVersion":2,"alwaysLatest":1,"createTime":"2017-05-04T02:53:35.000Z","lastUpdateTime":"2017-05-04T02:53:35.000Z","auth":2,"uid":"bd-1530657551","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2019-02-27T07:10:06.000Z","code":"\r\nvar seriesData = [20, 30, 15, 23, 30, 15, 23, 30, 15, 23.2, 15, 23];\r\nvar colorList = [];\r\nvar date = new Date();\r\nvar month=date.getMonth()+1;\r\nfor(var i = 1 ; i <= 12 ; i++){\r\n    if(i < month){\r\n        colorList.push('#5490CB');\r\n    }else if(i == month){\r\n        colorList.push('#0059B2');\r\n    }else{\r\n        colorList.push('#ccc');\r\n    }\r\n}\r\noption = {\r\n    color: ['#5490CB','#CCCCCC'],\r\n    tooltip : {\r\n        trigger: 'item',\r\n       formatter: '数量:{c0}',\r\n        backgroundColor: 'rgba(255,255,255,0.7)',\r\n        borderColor:'#458CDC',\r\n        borderWidth: 1,\r\n        borderRadius:0,\r\n        textStyle:{\r\n            color:'#333',\r\n        },\r\n        triggerOn:'mousemove',\r\n        enterable :true,\r\n         position: function(point, params, dom, rect, size){\r\n        //其中point为当前鼠标的位置，size中有两个属性：viewSize和contentSize，分别为外层div和tooltip提示框的大小\r\n        var x = point[0];//\r\n        var y = point[1];\r\n        var viewWidth = size.viewSize[0];\r\n        var viewHeight = size.viewSize[1];\r\n        var boxWidth = size.contentSize[0];\r\n        var boxHeight = size.contentSize[1];\r\n        var posX = 0;//x坐标位置\r\n        var posY = 0;//y坐标位置\r\n        \r\n        if(x<boxWidth){//左边放不开\r\n            posX = 5;    \r\n        }else{//左边放的下\r\n            posX = x-boxWidth; \r\n        }\r\n        \r\n        if(y<boxHeight){//上边放不开\r\n            posY = 5; \r\n        }else{//上边放得下\r\n            posY = y-boxHeight;\r\n        }\r\n        \r\n        return [posX,posY];\r\n \r\n }\r\n\r\n\r\n\r\n  \r\n    },\r\n    grid: {\r\n        left: '3%',\r\n        right: '4%',\r\n        bottom: '3%',\r\n        containLabel: true\r\n    },\r\n    xAxis : [\r\n        {\r\n            type : 'category',\r\n            data : ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n            axisTick: {\r\n                alignWithLabel: true\r\n            }\r\n        }\r\n    ],\r\n    yAxis : [\r\n        {\r\n            name: '数量',\r\n            type : 'value',\r\n            splitLine: {\r\n            }\r\n        }\r\n    ],\r\n    series: [{\r\n        type: 'bar',\r\n        data: [20, 30, 15, 23, 30, 15, 23, 30, 15, 23.2, 15, 23],\r\n        barWidth: '20%',\r\n        barGap:'200%',\r\n        itemStyle: {\r\n            normal: {\r\n                color: function(params) {\r\n                    return colorList[params.dataIndex]\r\n                }\r\n            }\r\n        },\r\n        barMaxWidth: '40px',\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top',\r\n                formatter: '{c}'\r\n            }\r\n        }\r\n    }],\r\n};\r\n\r\nmyChart.on('click',function(params){\r\n    var index = params.dataIndex;\r\n\r\n    for(var i = 0 ; i < seriesData.length ; i++){\r\n        if(seriesData[i].value){\r\n                seriesData[i] = seriesData[i].value;\r\n            }\r\n        if(index == i){\r\n            seriesData[i] = {\r\n                value : seriesData[i],\r\n                itemStyle:{\r\n                    normal:{\r\n                        color : '#0059B2'\r\n                    }\r\n                }\r\n            }\r\n        }else{\r\n            var date = new Date();\r\n            var month=date.getMonth();\r\n            if(i <= month){\r\n                seriesData[i] = {\r\n                    value : seriesData[i],\r\n                    itemStyle:{\r\n                        normal:{\r\n                            color : '#5490CB'\r\n                        }\r\n                    }\r\n                }\r\n            }else{\r\n                seriesData[i] = {\r\n                    value : seriesData[i],\r\n                    itemStyle:{\r\n                        normal:{\r\n                            color : '#CCC'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    option.series[0].data=seriesData\r\n    myChart.setOption(option,true);\r\n\r\n})","html":"","externalScripts":"","updaterUID":"bd-1530657551","theme":"","layout":"","viewCount":1887,"userName":"谢***Q","commentCount":1,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHkDhvz_1-.png?v=1551251406457","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"谢***Q"}}