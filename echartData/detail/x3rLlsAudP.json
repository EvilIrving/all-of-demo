{"status":0,"data":{"cid":"x3rLlsAudP","authorUid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","authorUserName":"l***y","title":"随时间变换折线图-24小时","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-10-23T07:25:38.000Z","lastUpdateTime":"2020-10-23T07:25:38.000Z","auth":2,"uid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-28T07:37:21.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1603420390106-AcgDIhAvF.json\";\r\n\r\n// 横坐标，一天内，一小时为间隔或者15min为间隔\r\nvar timeAxis = (type) => {\r\n    let time = [];\r\n    let start = new Date(\"2020-1-1 00:00:00\");\r\n    start = start.getTime();\r\n    if (type === \"小时\") {\r\n        let split = 60 * 60 * 1000;\r\n        for (let i = 0; i < 24; i++) {\r\n            time.push(moment(Number(start)).format(\"HH\"));\r\n            start += split;\r\n        }\r\n    } else {\r\n        let split = 15 * 60 * 1000;\r\n        for (let i = 0; i < 24 * 4; i++) {\r\n            time.push(moment(Number(start)).format(\"HH:mm:ss\"));\r\n            start += split;\r\n        }\r\n    }\r\n    return time;\r\n}\r\n\r\nvar COLOR = [{\r\n        areaColor: [\"#505736\", \"#262c44\"],\r\n        color: \"rgb(137,189,27)\",\r\n        borderColor: \"rgba(137,189,2,0.27)\"\r\n    },\r\n    {\r\n        areaColor: [\"#3F8BCA\", \"#262c44\"],\r\n        color: \"rgb(63,139,202)\",\r\n        borderColor: \"rgba(63,139,202,0.27)\"\r\n    },\r\n    {\r\n        areaColor: [\"#3F8BCA\", \"#262c44\"],\r\n        color: \"rgb(230,162,60)\",\r\n        borderColor: \"rgba(230,162,60,0.27)\"\r\n    },\r\n    {\r\n        areaColor: [\"#3F8BCA\", \"#262c44\"],\r\n        color: \"rgb(245,108,108)\",\r\n        borderColor: \"rgba(245,108,108,0.27)\"\r\n    }\r\n]\r\n\r\n$.getJSON(uploadedDataURL, (json) => {\r\n    let legendD = [\"A\", \"B\", \"C\", \"D\"]\r\n    let timeAxisD = timeAxis(\"小时\")\r\n    let series = []\r\n\r\n    for (let i = 0; i < legendD.length; i++) {\r\n        let data = []\r\n        for (let j = 0; j < json.length; j++) {\r\n            if (json[j].userType === legendD[i]) {\r\n                data.push({\r\n                    name: '',\r\n                    value:json[j].num\r\n                })\r\n            }\r\n        }\r\n        // console.log(data)\r\n        series.push({\r\n            name: legendD[i],\r\n            type: \"line\",\r\n            smooth: true,\r\n            symbol: \"circle\",\r\n            symbolSize: 5,\r\n            showSymbol: false,\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 1\r\n                }\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(\r\n                        0,\r\n                        0,\r\n                        0,\r\n                        1,\r\n                        [{\r\n                                offset: 0,\r\n                                color: COLOR[i].areaColor[0]\r\n                            },\r\n                            {\r\n                                offset: 0.8,\r\n                                color: COLOR[i].areaColor[1]\r\n                            }\r\n                        ],\r\n                        false\r\n                    ),\r\n                    shadowColor: \"rgba(0, 0, 0, 0.1)\",\r\n                    shadowBlur: 10\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: COLOR[i].color,\r\n                    borderColor: COLOR[i].borderColor,\r\n                    borderWidth: 12\r\n                }\r\n            },\r\n            data: data\r\n        })\r\n    }\r\n    let option = {\r\n        backgroundColor: '#012248',\r\n        tooltip: {\r\n            trigger: \"axis\",\r\n            axisPointer: {\r\n                lineStyle: {\r\n                    color: \"#57617B\"\r\n                }\r\n            }\r\n        },\r\n        legend: {\r\n            show: true,\r\n            icon: \"circle\",\r\n            itemWidth: 10,\r\n            itemHeight: 10,\r\n            itemGap: 9,\r\n            data: legendD,\r\n            left: \"1%\",\r\n            top: \"1%\",\r\n            textStyle: {\r\n                fontSize: 14,\r\n                color: \"#F1F1F3\"\r\n            }\r\n        },\r\n        grid: {\r\n            top: \"6%\",\r\n            left: \"3%\",\r\n            right: \"3%\",\r\n            bottom: \"3%\",\r\n            containLabel: true\r\n        },\r\n        xAxis: [{\r\n            type: \"category\",\r\n            boundaryGap: true,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: \"#ffffff\"\r\n                }\r\n            },\r\n            axisLabel: {\r\n                color: '#fff',\r\n                textStyle: {\r\n                    fontSize: 14,\r\n                }\r\n            },\r\n            data: timeAxisD\r\n        }],\r\n        yAxis: [{\r\n            type: \"value\",\r\n            // name: '单位：Erl',\r\n            // nameTextStyle: {\r\n            //   color: '#ffffff',\r\n            //   fontSize: 12,\r\n            //   align: 'right'\r\n            // },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: \"#ffffff\"\r\n                }\r\n            },\r\n            axisLabel: {\r\n                color: '#fff',\r\n                margin: 10,\r\n                textStyle: {\r\n                    fontSize: 14\r\n                },\r\n                formatter: (val) => {\r\n                    return val / 10000 + '万'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        }],\r\n        series: series\r\n    }\r\n    myChart.setOption(option)\r\n})","html":"","externalScripts":"https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js","updaterUID":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","theme":"","layout":"","viewCount":99,"userName":"l***y","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3rLlsAudP.png?v=1603870641664","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","tooltip"],"customTags":[],"updaterUserName":"l***y"}}