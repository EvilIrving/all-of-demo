{"status":0,"data":{"cid":"xHJosXOoeX","authorUid":"bd-372118036","authorUserName":"hantw80","title":"山东迁徙","description":"数据可更换，去掉头尾注释可直接应用到本地","latestVersion":5,"alwaysLatest":1,"createTime":"2018-06-11T03:59:30.000Z","lastUpdateTime":"2018-06-11T03:59:30.000Z","auth":2,"uid":"bd-372118036","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.1.0","versionCreateTime":"2018-06-11T07:52:09.000Z","code":"var tianjin = \"/asset/get/s/data-1482909892121-BJ3auk-Se.json\";\n\n// $(function() {\n// var myChart = echarts.init(document.getElementById('echar'));\n$.get(tianjin, function(tjJson) {\n    echarts.registerMap('shandong', tjJson);\n    myChart.setOption({\n        series: [{\n            type: 'map',\n            map: 'shandong'\n        }]\n    });\n\nvar geoCoordMap = {\n    '济南市':[117.121225,36.66466],\n    '潍坊市':[119.1,36.62],\n    '青岛市':[120.3,36.62],\n    '烟台市':[120.9,37.32]\n\n};\n\nvar goData = [\n    [{name: '济南市'}, {id: 1,name: '潍坊市',value: 99}],\n    [{name: '济南市'},{id: 1,name: '青岛市',value: 160}],\n    [{name: '济南市'},{id: 1,name: '烟台市',value:300}]\n    //  [{name:'蓟县'}, {name:'宁河',value:95}],\n];\n//值控制圆点大小\nvar backData = [\n    [{name: '潍坊市'}, {id: 2,name: '济南市',value: 200}],\n    [{name: '青岛市'}, { id: 2,name: '济南市',value: 200}],\n    //[{name: '烟台市'}, { id: 2,name: '济南市',value: 100}]\n];\n\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\nvar arcAngle = function(data) {\n    var j, k;\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        if (dataItem[1].id == 1) {\n            j = 0.2;\n            return j;\n        } else if (dataItem[1].id == 2) {\n            k = -0.2;\n            return k;\n        }\n    }\n}\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (dataItem[1].id == 1) {\n            if (fromCoord && toCoord) {\n                res.push([{\n                    coord: fromCoord,\n                }, {\n                    coord: toCoord,\n                    value: dataItem[1].value //线条颜色\n\n                }]);\n            }\n        } else if (dataItem[1].id == 2) {\n            if (fromCoord && toCoord) {\n                res.push([{\n                    coord: fromCoord,\n                }, {\n                    coord: toCoord\n                }]);\n            }\n        }\n    }\n    return res;\n};\n\nvar color = ['#fff', '#FF1493', '#0000FF'];\nvar series = [];\n[\n    ['1', goData],\n    ['2', backData]\n].forEach(function(item, i) {\n    series.push({\n        name: item[0],\n        type: 'lines',\n        zlevel: 2,\n        //线特效配置\n        effect: {\n            show: true,\n            period: 6,\n            trailLength: 0.1,\n            symbol: planePath, //标记类型\n            symbolSize: 10\n        },\n        lineStyle: {\n            normal: {\n                width: 1,\n                opacity: 0.4,\n                curveness: arcAngle(item[1]), //弧线角度\n                color: '#fff'\n            }\n        },\n        data: convertData(item[1])\n    }, {\n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        zlevel: 2,\n        //波纹效果\n        rippleEffect: {\n            period: 2,\n            brushType: 'stroke',\n            scale: 3\n        },\n        label: {\n            normal: {\n                show: true,\n                color: '#fff',\n                position: 'right',\n                formatter: '{b}'\n            }\n        },\n        //终点形象\n        symbol: 'circle',\n        //圆点大小\n        symbolSize: function(val) {\n            return val[2] / 8;\n        },\n        itemStyle: {\n            normal: {\n                show: true\n            }\n        },\n        data: item[1].map(function(dataItem) {\n            return {\n                name: dataItem[1].name,\n                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n            };\n        })\n\n    });\n\n});\n\noption = {\n    backgroundColor: '#404a59',//#154e90\n    \n        title: {\n        text: '迁徙',\n        subtext: '路线',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n            \n        },\n        x: 'center'\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{b}\"\n    },\n    //线颜色及飞行轨道颜色\n    visualMap: {\n        show: false,\n        min: 0,\n        max:300,\n        color: ['#02e817', '#e80202', '#0233e8']\n    },\n    //地图相关设置\n    geo: {\n        map: 'shandong',\n        //视角缩放比例\n        zoom: 1,\n        //显示文本样式\n        label: {\n            normal: {\n                show: false,\n                textStyle: {\n                    color: '#fff'\n                }\n            },\n            emphasis: {\n                textStyle: {\n                    color: '#fff'\n                }\n            }\n        },\n        //鼠标缩放和平移\n        roam: true,\n        itemStyle: {\n            normal: {\n                //         \tcolor: '#ddd',\n                borderColor: 'rgba(147, 235, 248, 1)',\n                borderWidth: 1,\n                areaColor: {\n                    type: 'radial',\n                    x: 0.5,\n                    y: 0.5,\n                    r: 0.8,\n                    colorStops: [{\n                        offset: 0,\n                        color: 'rgba(175,238,238, 0)' // 0% 处的颜色\n                    }, {\n                        offset: 1,\n                        color: 'rgba(\t47,79,79, .2)' // 100% 处的颜色\n                    }],\n                    globalCoord: false // 缺省为 false\n                },\n                shadowColor: 'rgba(128, 217, 248, 1)',\n                // shadowColor: 'rgba(255, 255, 255, 1)',\n                shadowOffsetX: -2,\n                shadowOffsetY: 2,\n                shadowBlur: 10\n            },\n            emphasis: {\n                areaColor: '#389BB7',\n                borderWidth: 0\n            }\n        }\n    },\n    series: series\n};\n myChart.setOption(option);\n})\n// })","html":"","externalScripts":"","updaterUID":"bd-372118036","theme":"","layout":"","viewCount":3412,"userName":"hantw80","commentCount":1,"starCount":13,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJosXOoeX.png?v=1528703530221","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"hantw80"}}