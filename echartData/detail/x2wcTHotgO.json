{"status":0,"data":{"cid":"x2wcTHotgO","authorUid":"obd-oP6AIpqmTdhf1d_mmbFx-zEcp-xsr9l","authorUserName":"范***飞","title":"立体柱图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-09-22T08:18:47.000Z","lastUpdateTime":"2021-09-22T08:18:47.000Z","auth":1,"uid":"obd-oP6AIpqmTdhf1d_mmbFx-zEcp-xsr9l","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-22T08:18:47.000Z","code":"// 最大值\r\nconst max = 100;\r\n// 绘制左侧面\r\nconst CubeLeft = echarts.graphic.extendShape({\r\n    shape: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    buildPath: function (ctx, shape) {\r\n        // 会canvas的应该都能看得懂，shape是从custom传入的\r\n        const xAxisPoint = shape.xAxisPoint\r\n        const c0 = [shape.x, shape.y]\r\n        const c1 = [shape.x - 8, shape.y - 8]\r\n        const c2 = [xAxisPoint[0] - 8, xAxisPoint[1] - 8]\r\n        const c3 = [xAxisPoint[0], xAxisPoint[1]]\r\n        ctx.moveTo(c0[0], c0[1]).lineTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).closePath()\r\n    }\r\n})\r\n// 绘制右侧面\r\nconst CubeRight = echarts.graphic.extendShape({\r\n    shape: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    buildPath: function (ctx, shape) {\r\n        const xAxisPoint = shape.xAxisPoint\r\n        const c1 = [shape.x, shape.y]\r\n        const c2 = [xAxisPoint[0], xAxisPoint[1]]\r\n        const c3 = [xAxisPoint[0] + 7, xAxisPoint[1] - 7]\r\n        const c4 = [shape.x + 9, shape.y - 9]\r\n        ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\r\n    }\r\n})\r\n// 绘制顶面\r\nconst CubeTop = echarts.graphic.extendShape({\r\n    shape: {\r\n        x: 0,\r\n        y: 0\r\n    },\r\n    buildPath: function (ctx, shape) {\r\n        const c1 = [shape.x, shape.y]\r\n        const c2 = [shape.x + 9, shape.y - 9]\r\n        const c3 = [shape.x - 1, shape.y - 16]\r\n        const c4 = [shape.x - 8, shape.y - 8]\r\n        ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\r\n    }\r\n})\r\n// 注册三个面图形\r\necharts.graphic.registerShape('CubeLeft', CubeLeft)\r\necharts.graphic.registerShape('CubeRight', CubeRight)\r\necharts.graphic.registerShape('CubeTop', CubeTop)\r\n\r\n// 处理数据\r\nlet dateArr = ['05/22','05/23','05/24','05/25','05/26','05/27','05/28'];\r\nlet maxBarDataArr = new Array(dateArr.length).fill(max);\r\nlet barData = [20,30,20,10,40,90,10];\r\n// 生成图表option\r\noption = {\r\n    backgroundColor: '#313131',\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'shadow'\r\n        },\r\n        formatter: function (params, ticket, callback) {\r\n            const item = params[1]\r\n            return item.name + ' : ' + item.value;\r\n        }\r\n    },\r\n    grid: {\r\n        left: 5,\r\n        right: 30,\r\n        bottom: 30,\r\n        top: 50,\r\n        containLabel: true\r\n    },\r\n\r\n    xAxis: {\r\n        type: 'category',\r\n        data: dateArr,\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#4E4E4E'\r\n            }\r\n        },\r\n        offset: 25,\r\n        axisTick: {\r\n            show: false,\r\n            length: 9,\r\n            alignWithLabel: true,\r\n            lineStyle: {\r\n                color: '#7DFFFD'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            fontSize: 12,\r\n            color: 'rgba(189,189,189,0.5)',\r\n            margin: -10,\r\n            fontFamily: \"customFont\"\r\n        },\r\n    },\r\n    yAxis: [{\r\n            type: 'value',\r\n            axisLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: 'white'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: true,\r\n                lineStyle: {\r\n                    color: \"rgba(255,255,255,0.2)\",\r\n                    type: 'dotted'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: true,\r\n                fontSize: 12,\r\n                color: 'rgba(189,189,189,0.5)',\r\n                fontFamily: \"customFont\"\r\n            }\r\n        },\r\n        {\r\n            type: 'value',\r\n            axisLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: 'white'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: \"rgba(255,255,255,0.2)\",\r\n                    type: 'dotted'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            max: 100,\r\n            axisLabel: {\r\n                show: true,\r\n                fontSize: 12,\r\n                formatter: '{value}',\r\n                color: 'rgba(189,189,189,0.5)',\r\n            }\r\n        },\r\n        {\r\n            type: 'value',\r\n            axisLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: 'white'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: \"rgba(255,255,255,0.2)\",\r\n                    type: 'dotted'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n                fontSize: 12,\r\n                formatter: '{value}',\r\n                color: 'rgba(189,189,189,0.5)',\r\n                fontFamily: \"customFont\"\r\n            }\r\n        }\r\n\r\n    ],\r\n    series: [\r\n        {\r\n            type: 'custom',\r\n            renderItem: function (params, api) {\r\n                const location = api.coord([api.value(0), api.value(1)])\r\n                return {\r\n                    type: 'group',\r\n                    children: [{\r\n                        type: 'CubeLeft',\r\n                        shape: {\r\n                            api,\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(12,50,32,1)'\r\n                        }\r\n                    }, {\r\n                        type: 'CubeRight',\r\n                        shape: {\r\n                            api,\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(10,41,26,1)'\r\n                        }\r\n                    }, {\r\n                        type: 'CubeTop',\r\n                        shape: {\r\n                            api,\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: 'rgba(8,35,22,1)'\r\n                        }\r\n                    }]\r\n                }\r\n            },\r\n            data: maxBarDataArr\r\n        }, {\r\n            type: 'custom',\r\n            renderItem: (params, api) => {\r\n                const location = api.coord([api.value(0), api.value(1)])\r\n                var color = 'rgb(28,177,108)'\r\n                return {\r\n                    type: 'group',\r\n                    children: [{\r\n                        type: 'CubeLeft',\r\n                        shape: {\r\n                            api,\r\n                            xValue: api.value(0),\r\n                            yValue: api.value(1),\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: color\r\n                        }\r\n                    }, {\r\n                        type: 'CubeRight',\r\n                        shape: {\r\n                            api,\r\n                            xValue: api.value(0),\r\n                            yValue: api.value(1),\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: color\r\n                        }\r\n                    }, {\r\n                        type: 'CubeTop',\r\n                        shape: {\r\n                            api,\r\n                            xValue: api.value(0),\r\n                            yValue: api.value(1),\r\n                            x: location[0],\r\n                            y: location[1],\r\n                            xAxisPoint: api.coord([api.value(0), 0])\r\n                        },\r\n                        style: {\r\n                            fill: color\r\n                        }\r\n                    }]\r\n                }\r\n            },\r\n            data: barData\r\n        }, {\r\n            type: 'bar',\r\n            itemStyle: {\r\n                color: 'transparent'\r\n            },\r\n            tooltip: {\r\n\r\n            },\r\n            data: maxBarDataArr\r\n        }\r\n    ]\r\n}","html":"","externalScripts":"","updaterUID":"obd-oP6AIpqmTdhf1d_mmbFx-zEcp-xsr9l","theme":"","layout":"","viewCount":0,"userName":"范***飞","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x2wcTHotgO.png?v=1632298727480","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-custom","tooltip"],"customTags":[],"updaterUserName":"范***飞"}}