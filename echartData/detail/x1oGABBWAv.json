{"status":0,"data":{"cid":"x1oGABBWAv","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"双轴同刻度","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-12-16T10:05:44.000Z","lastUpdateTime":"2020-12-16T10:05:44.000Z","auth":2,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-22T07:42:44.000Z","code":"let xData = ['2016', '2017', '2018', '2019', '2020']\r\nlet yData = [25, 100, 50, 45, 75]\r\nlet barData = [25, 60, 50, 45, 75]\r\n\r\nfunction calMax(arr) {\r\n    let max = 0;\r\n    arr.forEach((el) => {\r\n        el.forEach((el1) => {\r\n            if (!(el1 === undefined || el1 === '')) {\r\n                if (Number(max) < Number(el1)) {\r\n                    max = Number(el1);\r\n                }\r\n            }\r\n        })\r\n    })\r\n    let maxint = Math.ceil(max / 9.5);\r\n    //不让最高的值超过最上面的刻度    \r\n    let maxval = maxint * 10;\r\n    //让显示的刻度是整数    \r\n    return maxval;\r\n}\r\n\r\n\r\nvar max = Math.ceil(calMax([yData])/50)*50 ;\r\nvar max1 = Math.ceil(calMax([barData])/50)*50 ;\r\n\r\nvar option = {\r\n    legend:{\r\n        left:'1%'\r\n    },\r\n    grid: {\r\n        left: '1%',\r\n        top: 60,\r\n        right: 0,\r\n        bottom: 0,\r\n        containLabel: true\r\n    },\r\n    tooltip: {\r\n        trigger: 'axis'\r\n    },\r\n    xAxis: {\r\n        data: xData,\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            color: 'rgba(204, 234, 255, 1)'\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: 'rgba(18, 255, 255, 0.5)'\r\n            }\r\n        }\r\n    },\r\n    yAxis: [{\r\n        max:max1,\r\n        name: '数量（个）',\r\n        nameTextStyle: {\r\n            align: 'left',\r\n            color: 'rgba(204, 234, 255, 1)'\r\n        },\r\n        axisLabel: {\r\n            color: 'rgba(204, 234, 255, 1)'\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                type: 'dashed',\r\n                color: 'rgba(18, 255, 255, 0.5)'\r\n            }\r\n        }\r\n    }, {\r\n        max:max,\r\n        name: '金额（万元）',\r\n        position: 'right',\r\n        nameTextStyle: {\r\n            align: 'right',\r\n            color: 'rgba(204, 234, 255, 1)'\r\n        },\r\n        axisLabel: {\r\n            color: 'rgba(204, 234, 255, 1)'\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                type: 'dashed',\r\n                color: 'rgba(18, 255, 255, 0.5)'\r\n            }\r\n        }\r\n    }],\r\n    series: [\r\n        {\r\n        name:'数量',\r\n        type: 'bar',\r\n        data: barData,\r\n        barWidth: 15,\r\n        yAxisIndex: 0,\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#1D82FF'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#00FFF6'\r\n                }]),\r\n                barBorderRadius: [4, 4, 0, 0]\r\n            }\r\n        }\r\n    },{\r\n        name:'金额',\r\n        type: 'line',\r\n        data: yData,\r\n        yAxisIndex: 1,\r\n        smooth: true,\r\n        symbol: 'none',\r\n        itemStyle: {\r\n            normal: {\r\n                lineStyle: {\r\n                    color:{\r\n                        type:'linear',\r\n                        // 两端添加透明度,模拟两端线收缩\r\n                        colorStops:[{\r\n                            offset: 0,\r\n                            color: 'rgba(255, 227, 168, 0)' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 0.2,\r\n                            color: 'rgba(255, 227, 168, 1)' // 100% 处的颜色\r\n                        },{\r\n                            offset: 0.8,\r\n                            color: 'rgba(255, 227, 168, 1)' // 100% 处的颜色\r\n                        },{\r\n                            offset:1,\r\n                            color:  'rgba(255, 227, 168, 0)'\r\n                        }]\r\n                    },\r\n                    shadowColor: 'rgba(255, 120, 0, 1)',\r\n                    shadowBlur: 8\r\n                },\r\n                areaStyle: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: 'rgba(197, 106, 255, 0.6)'\r\n                    }, {\r\n                        offset: 0.6,\r\n                        color: 'rgba(255, 120, 0, 0)'\r\n                    }]),\r\n                }\r\n            }\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":98,"userName":"m***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1oGABBWAv.png?v=1608622964975","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"m***h"}}