{"status":0,"data":{"cid":"xmqhL970lh","authorUid":"bd-1895925720","authorUserName":"心***阔","title":"时间轴","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-10-30T03:18:23.000Z","lastUpdateTime":"2018-10-30T03:18:23.000Z","auth":2,"uid":"bd-1895925720","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.0","versionCreateTime":"2018-10-30T03:42:58.000Z","code":"\nvar colorArray = [\n    {\n        top: 'rgba(173,39,49)',//红shen\n        bottom: 'rgba(173,39,49, 0.3)'\n    },\n    {\n        top: 'rgba(195,175,49)',//黄\n        bottom: 'rgba(195,175,49, 0.3)'\n    },{\n        top: 'rgba(56,215,48)',//绿\n        bottom: 'rgba(56,215,48, 0.3)'\n    },\n    {\n        top: 'rgba(40,203,195)',//蓝\n        bottom: 'rgba(40,203,195, 0.3)'\n    },{\n        top: 'rgba(42,45,221)',//深蓝\n        bottom: 'rgba(42,45,221, 0.3)'\n    },\n    {\n        top: 'rgba(215,47,215)',//粉\n        bottom: 'rgba(215,47,215, 0.3)'\n    }\n    ];\n    \n//每次变化的数组值\nvar dataSource = [];    \nvar arrayIndex = [];\t//下标索引数组，用于记录y轴索引的变化    \nvar YIndex=['楼宇一','楼宇二','楼宇三','楼宇四','楼宇五','楼宇六'];\nvar resultYIndex=[];\n//快速排序\nfunction quickSort(array) {\n\tif (array.length > 0) {\n\t\t//记录初始数据下标\n\t\tfor (var j = 0; j < dataSource.length; j++) {\n\t\t\tarrayIndex.push(j);\n\t\t}\n\t\tdoQuickSort(array, arrayIndex, 0, array.length - 1);\n\t}\n\treturn array;\n}\nfunction doQuickSort(array, indexArray, left, right) {\n\tif (left < right) {\n\t\tvar middle = getMiddle2(array, indexArray, left, right);//实际的排序流程\n\t\t//运用分治法的思想对数组进行递归。\n\t\tdoQuickSort(array, indexArray, left, middle - 1);\n\t\tdoQuickSort(array, indexArray,  middle + 1, right);\n\t}\n}\n//获取中间下标\nfunction getMiddle(array, indexArray, left, right) {\t//升序排列\n\tvar baseIdexArray = indexArray[left];\n\tvar baseIndex = left;\n\tvar base = array[left];//以左侧为基数\n\tvar index = left;//记录基数的下标\n\twhile (left < right) {\n\t\twhile (left < right && array[right] >= base) {\n\t\t\tright--;\n\t\t}\n\t\tindexArray[index] = indexArray[left];\n\t\tbaseIndex = left;\n\t\tindexArray[left] = baseIdexArray;\n\t\tarray[index] = array[right];//将基数所在下标对应的值改为找到的比基数小的值\n\t\tindex = right;//修改基数所在的下标位置\n\t\tarray[right] = base;//将找到的比基数小的位置的值改为基数的值\n\t\twhile (left < right && array[left] <= base) {\n\t\t\tleft++;\n\t\t}\n\t\tindexArray[index] = indexArray[right];\n\t\tbaseIndex = right;\n\t\tindexArray[right] = baseIdexArray;\n\t\tarray[index] = array[left];\n\t\tindex = left;\n\t\tarray[left] = base;\n\t}\n\treturn index;\n}\nfunction getMiddle2(array, indexArray, left, right) {\t//降序排列\n\tvar baseIdexArray = indexArray[left];\n\tvar baseIndex = left;\n\tvar base = array[left];//以左侧为基数\n\tvar index = left;//记录基数的下标\n\twhile (left < right) {\n\t\twhile (left < right && array[right] <= base) {\n\t\t\tright--;\n\t\t}\n\t\tindexArray[index] = indexArray[left];\n\t\tbaseIndex = left;\n\t\tindexArray[left] = baseIdexArray;\n\t\tarray[index] = array[left];//将基数所在下标对应的值改为找到的比基数大的值\n\t\tindex = left;//修改基数所在的下标位置\n\t\tarray[left] = base;//将找到的比基数大的位置的值改为基数的值\n\t\twhile (left < right && array[left] >= base) {\n\t\t\tleft++;\n\t\t}\n\t\tindexArray[index] = indexArray[right];\n\t\tbaseIndex = right;\n\t\tindexArray[right] = baseIdexArray;\n\t\tarray[index] = array[right];\n\t\tindex = right;\n\t\tarray[right] = base;\n\t}\n\treturn index;\n}\n    \n    \noption = {\n    baseOption: {\n            timeline: {\n                axisType: 'category',\n                orient: 'vertical',\n                autoPlay: true,\n                inverse: true,\n                playInterval: 1000,\n                left: null,\n                right: 0,\n                top: 20,\n                bottom: 20,\n                width: 55,\n                height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#999'\n                        }\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbol: 'none',\n                lineStyle: {\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    color: '#bbb',\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: false,\n                    showPrevBtn: false,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n                data: []\n            },\n            title: [{\n                text: '1900',\n                textAlign: 'center',\n                left: '63%',\n                top: '55%',\n                textStyle: {\n                    fontSize: 100,\n                    color: 'rgba(255, 255, 255, 0.7)'\n                }\n            }, {\n                text: '条形七彩渐变柱状图',\n                left: 'center',\n                top: 10,\n                textStyle: {\n                    color: '#ffd285',\n                    fontWeight: 'normal',\n                    fontSize: 20\n                }\n            }],\n            backgroundColor: '#0E2A43',\n            grid: {\n                top: 100,\n                containLabel: true,\n                left: 30,\n                right: '110'\n            },\n            xAxis:  {\n                type: 'value',\n                 position:'top',\n                axisTick : {show: false},\n                axisLine: {\n                    show: false,\n                    lineStyle:{\n                        color:'#fff',\n                    }\n                },\n                splitLine: {\n                    show: false,\n                },\n            },\n            yAxis: [\n            {\n                type: 'category',\n                axisTick : {\n                    show: true,\n                    alignWithLabel: true,\n                    length:5,\n                   \n                },\n                inverse:'true', //排序\n                axisLine: {\n                    show: true,\n                    lineStyle:{\n                        color:'#fff',\n                    }\n                },\n                data: ['楼宇一','楼宇二','楼宇三','楼宇四','楼宇五','楼宇六']\n            }\n            \n    ],\n    series: [\n        {\n            name: '能耗值',\n            type: 'bar',\n            itemStyle:{\n                normal: {\n                    show: true,\n                   color: function (params) {\n                        let num = colorArray.length;\n                        return{\n                            type: 'linear',\n                            colorStops: [{\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }],\n                            //globalCoord: false\n                        }\n                    },\n                    barBorderRadius:88,\n                    borderWidth:0,\n                    borderColor:'#333',\n                }\n            },\n            barGap:'0%',\n            barCategoryGap:'50%',\n            data: [60, 132, 101, 134,230,180]\n        }\n       \n    ]\n    },\n    options: []\n};\n\n    for (var n = 1900; n <= 2018; n++) {\n        dataSource = [];\n        resultYIndex=[];\n        arrayIndex = [];\n        dataSource=[60+Math.round(Math.random() * 1000)+n, \n                   132+Math.round(Math.random() * 1000)+n, \n                   101+Math.round(Math.random() * 1000)+n, \n                   134+Math.round(Math.random() * 1000)+n,\n                   230+Math.round(Math.random() * 1000)+n,\n                   10+Math.round(Math.random() * 1000)+n];\n        var array=[];   //过程结果存放数组\n        option.baseOption.timeline.data.push(n);\n        array = quickSort(dataSource);\t//快速排序\n        for(var ii=0;ii<arrayIndex.length;ii++){\n            resultYIndex.push(YIndex[arrayIndex[ii]]);\n        }\n        option.options.push({\n            title: {\n                show: true,\n                'text': n + ''\n            },\n            yAxis: [\n            {\n                type: 'category',\n                axisTick : {\n                    show: true,\n                    alignWithLabel: true,\n                    length:5,\n                   \n                },\n                inverse:'true', //排序\n                axisLine: {\n                    show: true,\n                    lineStyle:{\n                        color:'#fff',\n                    }\n                },\n                data: resultYIndex\n            }\n            \n    ],\n    series: [\n        {\n            name: '能耗值',\n            type: 'bar',\n            itemStyle:{\n                normal: {\n                    show: true,\n                   color: function (params) {\n                        let num = colorArray.length;\n                        return{\n                            type: 'linear',\n                            colorStops: [{\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }, {\n                                offset: 0, color: colorArray[params.dataIndex%num].bottom\n                            }, {\n                                offset: 1, color: colorArray[params.dataIndex%num].top\n                            }],\n                            //globalCoord: false\n                        }\n                    },\n                    barBorderRadius:88,\n                    borderWidth:0,\n                    borderColor:'#333',\n                }\n            },\n            barGap:'0%',\n            barCategoryGap:'50%',\n            data: array\n        }\n       \n    ]\n        });\n    }\n\n    myChart.setOption(option);","html":"","externalScripts":"","updaterUID":"bd-1895925720","theme":"","layout":"","viewCount":572,"userName":"心***阔","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xmqhL970lh.png?v=1540870978870","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","timeline","title"],"customTags":[],"updaterUserName":"心***阔"}}