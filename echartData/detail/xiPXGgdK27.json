{"status":0,"data":{"cid":"xiPXGgdK27","authorUid":"bd-2838399778","authorUserName":"z***6","title":"echart饼图向下钻取 ","description":"官方例子改造的 向下钻取饼图","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-18T03:20:59.000Z","lastUpdateTime":"2021-01-18T03:20:59.000Z","auth":2,"uid":"bd-2838399778","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-18T03:20:59.000Z","code":"$('<div class=\"back\">返回</div>').appendTo(\n    $('#chart-panel')\n);\n$('.back').css({\n    'position': 'absolute',\n    'left': '17px',\n    'top': '25px',\n    'color': 'black',\n    'font-size': '15px',\n    'cursor': 'pointer',\n    'z-index': '100'\n})\n$('.back').click(function() {\n    if (parentInfo.length === 1) {\n        return;\n    }\n    parentInfo.pop()\n    getRealData(parentInfo[parentInfo.length - 1].code)\n})\n\n\nvar parentJson = null\nvar parentInfo = [{\n    code: 1\n}]\nfunction echartsMapClick(params) {\n    //如果当前是最后一级，那就直接return\n    if (parentInfo.slice(-1)[0].code == params.data.code) {\n        return\n    }\n    let data = params.data\n    parentInfo.push({\n        code: data.code\n    })\n    getRealData(data.code)\n}\n//code写死 具体业务可自己拼入\nfunction getRealData(code){\n    let mockData = []\n    if(code === 1){\n        mockData = [\n            {value: 1048, name: '搜索引擎',code:2},\n            {value: 735, name: '直接访问',code:2},\n            {value: 580, name: '邮件营销',code:2},\n            {value: 484, name: '联盟广告',code:2},\n            {value: 300, name: '视频广告',code:2}\n        ]\n    }\n    if(code === 2){\n        mockData = [\n            {value: 33, name: '泰罗',code: 3},\n            {value: 2222, name: '杰克',code: 3},\n            {value: 122, name: '赛文',code: 3},\n            {value: 1133, name: '迪迦',code: 3},\n            {value: 800, name: '艾迪',code: 3}\n        ]\n    }\n    if(code === 3){\n        mockData = [\n            {value: 367, name: '大力一号',code: 3},\n            {value: 333, name: '葫芦娃',code: 3},\n            {value: 389, name: '悟空',code: 3},\n            {value: 368, name: '猪八戒',code: 3},\n            {value: 359, name: '金刚',code: 3}\n        ]\n    }\n    initEcharts(mockData);\n}\n//第一次渲染数据\ngetRealData(parentInfo[0].code);\nfunction initEcharts(newData){\n    myChart.setOption({\n    tooltip: {\n        trigger: 'item',\n        formatter: '{a} <br/>{b}: {c} ({d}%)'\n    },\n    legend: {\n        top: '5%',\n        left: 'center',\n    },\n    series: [\n            {\n                name: '访问来源',\n                type: 'pie',\n                radius: ['40%', '70%'],\n                avoidLabelOverlap: false,\n                label: {\n                    show: false,\n                    position: 'center'\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        fontSize: '40',\n                        fontWeight: 'bold'\n                    }\n                },\n                labelLine: {\n                    show: false\n                },\n                data: newData\n            }\n        ]\n    },true)\n    //点击前解绑，防止点击事件触发多次\n    myChart.off('click');\n    myChart.on('click', echartsMapClick);\n}\n","html":"","externalScripts":"","updaterUID":"bd-2838399778","theme":"","layout":"","viewCount":57,"userName":"z***6","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xiPXGgdK27.png?v=1610940059367","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"z***6"}}