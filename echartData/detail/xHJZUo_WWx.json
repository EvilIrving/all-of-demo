{"status":0,"data":{"cid":"xHJZUo_WWx","authorUid":"bd-1998844990","authorUserName":"萧***星","title":"跨体系就诊","description":"测试数据","latestVersion":2,"alwaysLatest":1,"createTime":"2016-11-10T04:44:56.000Z","lastUpdateTime":"2016-11-10T04:50:38.000Z","auth":2,"uid":"bd-1998844990","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.3.0","versionCreateTime":"2016-11-10T04:52:30.000Z","code":"\r\n\r\n  var geoCoordMap = {\r\n      '上海': [121.4648, 31.2891],\r\n      '东莞': [113.8953, 22.901],\r\n      '东营': [118.7073, 37.5513],\r\n      '中山': [113.4229, 22.478],\r\n      '临汾': [111.4783, 36.1615],\r\n      '临沂': [118.3118, 35.2936],\r\n      '丹东': [124.541, 40.4242],\r\n      '丽水': [119.5642, 28.1854],\r\n      '乌鲁木齐': [87.9236, 43.5883],\r\n      '佛山': [112.8955, 23.1097],\r\n      '保定': [115.0488, 39.0948],\r\n      '兰州': [103.5901, 36.3043],\r\n      '包头': [110.3467, 41.4899],\r\n      '北京': [116.4551, 40.2539],\r\n      '北海': [109.314, 21.6211],\r\n      '南京': [118.8062, 31.9208],\r\n      '南宁': [108.479, 23.1152],\r\n      '南昌': [116.0046, 28.6633],\r\n      '南通': [121.1023, 32.1625],\r\n      '厦门': [118.1689, 24.6478],\r\n      '台州': [121.1353, 28.6688],\r\n      '合肥': [117.29, 32.0581],\r\n      '呼和浩特': [111.4124, 40.4901],\r\n      '咸阳': [108.4131, 34.8706],\r\n      '哈尔滨': [127.9688, 45.368],\r\n      '唐山': [118.4766, 39.6826],\r\n      '嘉兴': [120.9155, 30.6354],\r\n      '大同': [113.7854, 39.8035],\r\n      '大连': [122.2229, 39.4409],\r\n      '天津': [117.4219, 39.4189],\r\n      '太原': [112.3352, 37.9413],\r\n      '威海': [121.9482, 37.1393],\r\n      '宁波': [121.5967, 29.6466],\r\n      '宝鸡': [107.1826, 34.3433],\r\n      '宿迁': [118.5535, 33.7775],\r\n      '常州': [119.4543, 31.5582],\r\n      '广州': [113.5107, 23.2196],\r\n      '廊坊': [116.521, 39.0509],\r\n      '延安': [109.1052, 36.4252],\r\n      '张家口': [115.1477, 40.8527],\r\n      '徐州': [117.5208, 34.3268],\r\n      '德州': [116.6858, 37.2107],\r\n      '惠州': [114.6204, 23.1647],\r\n      '成都': [103.9526, 30.7617],\r\n      '扬州': [119.4653, 32.8162],\r\n      '承德': [117.5757, 41.4075],\r\n      '拉萨': [91.1865, 30.1465],\r\n      '无锡': [120.3442, 31.5527],\r\n      '日照': [119.2786, 35.5023],\r\n      '昆明': [102.9199, 25.4663],\r\n      '杭州': [119.5313, 29.8773],\r\n      '枣庄': [117.323, 34.8926],\r\n      '柳州': [109.3799, 24.9774],\r\n      '株洲': [113.5327, 27.0319],\r\n      '武汉': [114.3896, 30.6628],\r\n      '汕头': [117.1692, 23.3405],\r\n      '江门': [112.6318, 22.1484],\r\n      '沈阳': [123.1238, 42.1216],\r\n      '沧州': [116.8286, 38.2104],\r\n      '河源': [114.917, 23.9722],\r\n      '泉州': [118.3228, 25.1147],\r\n      '泰安': [117.0264, 36.0516],\r\n      '泰州': [120.0586, 32.5525],\r\n      '济南': [117.1582, 36.8701],\r\n      '济宁': [116.8286, 35.3375],\r\n      '海口': [110.3893, 19.8516],\r\n      '淄博': [118.0371, 36.6064],\r\n      '淮安': [118.927, 33.4039],\r\n      '深圳': [114.5435, 22.5439],\r\n      '清远': [112.9175, 24.3292],\r\n      '温州': [120.498, 27.8119],\r\n      '渭南': [109.7864, 35.0299],\r\n      '湖州': [119.8608, 30.7782],\r\n      '湘潭': [112.5439, 27.7075],\r\n      '滨州': [117.8174, 37.4963],\r\n      '潍坊': [119.0918, 36.524],\r\n      '烟台': [120.7397, 37.5128],\r\n      '玉溪': [101.9312, 23.8898],\r\n      '珠海': [113.7305, 22.1155],\r\n      '盐城': [120.2234, 33.5577],\r\n      '盘锦': [121.9482, 41.0449],\r\n      '石家庄': [114.4995, 38.1006],\r\n      '福州': [119.4543, 25.9222],\r\n      '秦皇岛': [119.2126, 40.0232],\r\n      '绍兴': [120.564, 29.7565],\r\n      '聊城': [115.9167, 36.4032],\r\n      '肇庆': [112.1265, 23.5822],\r\n      '舟山': [122.2559, 30.2234],\r\n      '苏州': [120.6519, 31.3989],\r\n      '莱芜': [117.6526, 36.2714],\r\n      '菏泽': [115.6201, 35.2057],\r\n      '营口': [122.4316, 40.4297],\r\n      '葫芦岛': [120.1575, 40.578],\r\n      '衡水': [115.8838, 37.7161],\r\n      '衢州': [118.6853, 28.8666],\r\n      '西宁': [101.4038, 36.8207],\r\n      '西安': [109.1162, 34.2004],\r\n      '贵阳': [106.6992, 26.7682],\r\n      '连云港': [119.1248, 34.552],\r\n      '邢台': [114.8071, 37.2821],\r\n      '邯郸': [114.4775, 36.535],\r\n      '郑州': [113.4668, 34.6234],\r\n      '鄂尔多斯': [108.9734, 39.2487],\r\n      '重庆': [107.7539, 30.1904],\r\n      '金华': [120.0037, 29.1028],\r\n      '铜川': [109.0393, 35.1947],\r\n      '银川': [106.3586, 38.1775],\r\n      '镇江': [119.4763, 31.9702],\r\n      '长春': [125.8154, 44.2584],\r\n      '长沙': [113.0823, 28.2568],\r\n      '长治': [112.8625, 36.4746],\r\n      '阳泉': [113.4778, 38.0951],\r\n      '青岛': [120.4651, 36.3373],\r\n      '韶关': [113.7964, 24.7028]\r\n  };\r\n\r\n  var BJData = [\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '上海',\r\n          value: 95\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '广州',\r\n          value: 90\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '大连',\r\n          value: 80\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '南宁',\r\n          value: 70\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '南昌',\r\n          value: 60\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '拉萨',\r\n          value: 50\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '长春',\r\n          value: 40\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '包头',\r\n          value: 30\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '重庆',\r\n          value: 20\r\n      }],\r\n      [{\r\n          name: '北京'\r\n      }, {\r\n          name: '常州',\r\n          value: 10\r\n      }]\r\n  ];\r\n\r\n  var SHData = [\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '包头',\r\n          value: 95\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '昆明',\r\n          value: 90\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '广州',\r\n          value: 80\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '郑州',\r\n          value: 70\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '长春',\r\n          value: 60\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '重庆',\r\n          value: 50\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '长沙',\r\n          value: 40\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '北京',\r\n          value: 30\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '丹东',\r\n          value: 20\r\n      }],\r\n      [{\r\n          name: '上海'\r\n      }, {\r\n          name: '大连',\r\n          value: 10\r\n      }]\r\n  ];\r\n\r\n  var GZData = [\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '福州',\r\n          value: 95\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '太原',\r\n          value: 90\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '长春',\r\n          value: 80\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '重庆',\r\n          value: 70\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '西安',\r\n          value: 60\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '成都',\r\n          value: 50\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '常州',\r\n          value: 40\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '北京',\r\n          value: 30\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '北海',\r\n          value: 20\r\n      }],\r\n      [{\r\n          name: '广州'\r\n      }, {\r\n          name: '海口',\r\n          value: 10\r\n      }]\r\n  ];\r\n  \r\n  var planePath = \"path://M917.965523 917.331585c0 22.469758-17.891486 40.699957-39.913035 40.699957-22.058388 0-39.913035-18.2302-39.913035-40.699957l-0.075725-0.490164-1.087774 0c-18.945491-157.665903-148.177807-280.296871-306.821991-285.4748-3.412726 0.151449-6.751774 0.562818-10.240225 0.562818-3.450589 0-6.789637-0.410346-10.202363-0.524956-158.606321 5.139044-287.839661 127.806851-306.784128 285.436938l-1.014096 0 0.075725 0.490164c0 22.469758-17.854647 40.699957-39.913035 40.699957s-39.915082-18.2302-39.915082-40.699957l-0.373507-3.789303c0-6.751774 2.026146-12.903891 4.91494-18.531052 21.082154-140.712789 111.075795-258.241552 235.432057-312.784796C288.420387 530.831904 239.989351 444.515003 239.989351 346.604042c0-157.591201 125.33352-285.361213 279.924387-285.361213 154.62873 0 279.960203 127.770012 279.960203 285.361213 0 97.873098-48.391127 184.15316-122.103966 235.545644 124.843356 54.732555 215.099986 172.863023 235.808634 314.211285 2.437515 5.290493 4.01443 10.992355 4.01443 17.181311L917.965523 917.331585zM719.822744 346.679767c0-112.576985-89.544409-203.808826-199.983707-203.808826-110.402459 0-199.944821 91.232864-199.944821 203.808826s89.542362 203.808826 199.944821 203.808826C630.278335 550.488593 719.822744 459.256752 719.822744 346.679767z\";\r\n  var convertData = function(data) {\r\n      var res = [];\r\n      for (var i = 0; i < data.length; i++) {\r\n          var dataItem = data[i];\r\n          var fromCoord = geoCoordMap[dataItem[0].name];\r\n          var toCoord = geoCoordMap[dataItem[1].name];\r\n          if (fromCoord && toCoord) {\r\n              res.push({\r\n                  fromName: dataItem[0].name,\r\n                  toName: dataItem[1].name,\r\n                  coords: [fromCoord, toCoord]\r\n              });\r\n          }\r\n      }\r\n      return res;\r\n  };\r\n\r\n  var color = ['#a6c84c', '#ffa022', '#46bee9'];\r\n  var series = [];\r\n  [\r\n      ['北京', BJData],\r\n      ['上海', SHData],\r\n      ['广州', GZData]\r\n  ].forEach(function(item, i) {\r\n      series.push({ //线\r\n          name: item[0],\r\n          //                    name: item[0] + ' Top10',\r\n          type: 'lines',\r\n          zlevel: 1,\r\n          effect: {\r\n              show: true,\r\n              period: 6,\r\n              trailLength: 0.7,\r\n              color: '#fff',\r\n              symbolSize: 3\r\n          },\r\n          lineStyle: {\r\n              normal: {\r\n                  color: color[i],\r\n                  width: 0,\r\n                  curveness: 0.2\r\n              }\r\n          },\r\n          data: convertData(item[1])\r\n      }, { //移动 点\r\n          name: item[0],\r\n          type: 'lines',\r\n          zlevel: 2,\r\n          effect: {\r\n              show: true,\r\n              period: 6,\r\n              trailLength: 0,\r\n              symbol: planePath,\r\n              symbolSize: 15\r\n          },\r\n          lineStyle: {\r\n              normal: {\r\n                  color: color[i],\r\n                  width: 1,\r\n                  opacity: 0.4,\r\n                  curveness: 0.2\r\n              }\r\n          },\r\n          data: convertData(item[1])\r\n      }, { //省份圆点\r\n          name: item[0],\r\n          type: 'effectScatter',\r\n          coordinateSystem: 'geo',\r\n          zlevel: 2,\r\n          rippleEffect: {\r\n              brushType: 'stroke'\r\n          },\r\n          label: {\r\n              normal: {\r\n                  show: true,\r\n                  position: 'right',\r\n                  formatter: '{b}'\r\n              }\r\n          },\r\n          symbolSize: function(val) {\r\n              return val[2] / 4;\r\n          },\r\n          itemStyle: {\r\n              normal: {\r\n                  color: color[i]\r\n              }\r\n          },\r\n          data: item[1].map(function(dataItem) {\r\n              return {\r\n                  name: dataItem[1].name,\r\n                  value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n              };\r\n          })\r\n      });\r\n  });\r\n\r\n  option = {\r\n      backgroundColor: '#404a59',\r\n      title: {\r\n          text: '病人就诊',\r\n          subtext: '测试数据',\r\n          left: 'center',\r\n          textStyle: {\r\n              color: '#fff'\r\n          }\r\n      },\r\n      tooltip: {\r\n          trigger: 'item',\r\n          formatter: function(params) {\r\n              if (params.seriesIndex == 2 || params.seriesIndex == 5 || params.seriesIndex == 8) {\r\n                  return params.name + '<br>' + params.seriesName + ':' + params.data.value[2] + ' 人次';\r\n              } else if (params.seriesIndex == 1 || params.seriesIndex == 4 || params.seriesIndex == 7) {\r\n                  return params.data.fromName + '→' + params.data.toName;\r\n              }\r\n          }\r\n      },\r\n      legend: {\r\n          orient: 'vertical',\r\n          top: 'bottom',\r\n          left: 'right',\r\n          data: ['北京', '上海', '广州'],\r\n          textStyle: {\r\n              color: '#fff'\r\n          },\r\n          selectedMode: 'single'\r\n      },\r\n      geo: {\r\n          map: 'china',\r\n          label: {\r\n              emphasis: {\r\n                  show: false\r\n              }\r\n          },\r\n          roam: true,\r\n          itemStyle: {\r\n              normal: {\r\n                  areaColor: '#323c48',\r\n                  borderColor: '#404a59'\r\n              },\r\n              emphasis: {\r\n                  areaColor: '#2a333d'\r\n              }\r\n          }\r\n      },\r\n      series: series\r\n  };\r\n  if (option && typeof option === \"object\") {\r\n      myChart.setOption(option, true);\r\n  };","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-1998844990","theme":"macarons","layout":"","viewCount":10200,"userName":"萧***星","commentCount":7,"starCount":21,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJZUo_WWx.png?v=1478753550783","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"萧***星"}}