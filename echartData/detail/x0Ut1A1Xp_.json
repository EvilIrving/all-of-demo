{"status":0,"data":{"cid":"x0Ut1A1Xp_","authorUid":"bd-1338241561","authorUserName":"H***骨","title":"武汉迁徙图","description":"代码直接复制就可以用了，记得要下载武汉的json文件","latestVersion":1,"alwaysLatest":1,"createTime":"2018-12-28T02:09:34.000Z","lastUpdateTime":"2018-12-28T02:09:34.000Z","auth":2,"uid":"bd-1338241561","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-28T02:09:34.000Z","code":"  var tianjin =+\"../json/wh.json\";\r\n   \r\n\r\n\r\n    $.getJSON(tianjin, function(tjJson) {\r\n        echarts.registerMap('wh', tjJson);\r\n        myChart.setOption({\r\n            series: [{\r\n                type: 'map',\r\n                map: 'wh'\r\n            }]\r\n        });\r\n\r\n\r\n        var geoCoordMap = {\r\n            '洪山区':[114.341517,30.507558],\r\n            '东西湖区':[114.137997,30.624974],\r\n            '新洲区':[114.79915,30.849455],\r\n            '黄陂区':[114.385211,30.890123]\r\n\r\n        };\r\n        var goData = [\r\n            [{name: '洪山区'}, {id: 1,name: '东西湖区',value: 99}],\r\n            [{name: '洪山区'},{id: 1,name: '新洲区',value: 160}],\r\n            [{name: '洪山区'},{id: 1,name: '黄陂区',value:300}]\r\n            //  [{name:'蓟县'}, {name:'宁河',value:95}],\r\n        ];\r\n        var backData = [\r\n            [{name: '东西湖区'}, {id: 2,name: '洪山区',value: 200}],\r\n            [{name: '新洲区'}, { id: 2,name: '洪山区',value: 200}],\r\n            //[{name: '烟台市'}, { id: 2,name: '济南市',value: 100}]\r\n        ];\r\n        var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\n        var arcAngle = function(data) {\r\n            var j, k;\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                if (dataItem[1].id == 1) {\r\n                    j = 0.2;\r\n                    return j;\r\n                } else if (dataItem[1].id == 2) {\r\n                    k = -0.2;\r\n                    return k;\r\n                }\r\n            }\r\n        };\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var fromCoord = geoCoordMap[dataItem[0].name];\r\n                var toCoord = geoCoordMap[dataItem[1].name];\r\n                if (dataItem[1].id == 1) {\r\n                    if (fromCoord && toCoord) {\r\n                        res.push([{\r\n                            coord: fromCoord,\r\n                        }, {\r\n                            coord: toCoord,\r\n                            value: dataItem[1].value //线条颜色\r\n\r\n                        }]);\r\n                    }\r\n                } else if (dataItem[1].id == 2) {\r\n                    if (fromCoord && toCoord) {\r\n                        res.push([{\r\n                            coord: fromCoord,\r\n                        }, {\r\n                            coord: toCoord\r\n                        }]);\r\n                    }\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        var color = ['#fff', '#FF1493', '#0000FF'];\r\n        var series = [];\r\n        [\r\n            ['1', goData],\r\n            ['2', backData]\r\n        ].forEach(function(item, i) {\r\n            series.push({\r\n                name: item[0],\r\n                type: 'lines',\r\n                zlevel: 2,\r\n                //线特效配置\r\n                effect: {\r\n                    show: true,\r\n                    period: 6,\r\n                    trailLength: 0.1,\r\n                    symbol: planePath, //标记类型\r\n                    symbolSize: 10\r\n                },\r\n                lineStyle: {\r\n                    normal: {\r\n                        width: 1,\r\n                        opacity: 0.4,\r\n                        curveness: arcAngle(item[1]), //弧线角度\r\n                        color: '#fff'\r\n                    }\r\n                },\r\n                data: convertData(item[1])\r\n            }, {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                //波纹效果\r\n                rippleEffect: {\r\n                    period: 2,\r\n                    brushType: 'stroke',\r\n                    scale: 3\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        color: '#fff',\r\n                        position: 'right',\r\n                        formatter: '{b}'\r\n                    }\r\n                },\r\n                //终点形象\r\n                symbol: 'circle',\r\n                //圆点大小\r\n                symbolSize: function(val) {\r\n                    return val[2] / 8;\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        show: true\r\n                    }\r\n                },\r\n                data: item[1].map(function(dataItem) {\r\n                    return {\r\n                        name: dataItem[1].name,\r\n                        value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n                    };\r\n                })\r\n\r\n            });\r\n\r\n        });\r\n\r\n        var option = {\r\n            backgroundColor: '#404a59',//#154e90\r\n\r\n            title: {\r\n                text: '迁徙',\r\n                subtext: '路线',\r\n                left: 'center',\r\n                textStyle: {\r\n                    color: '#fff'\r\n\r\n                },\r\n                x: 'center'\r\n            },\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: \"{b}\"\r\n            },\r\n            //线颜色及飞行轨道颜色\r\n            visualMap: {\r\n                show: false,\r\n                min: 0,\r\n                max:300,\r\n                color: ['#02e817', '#e80202', '#0233e8']\r\n            },\r\n            //地图相关设置\r\n            geo: {\r\n                map: 'wh',\r\n                //视角缩放比例\r\n                zoom: 1,\r\n                //显示文本样式\r\n                label: {\r\n                    normal: {\r\n                        show: false,\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                //鼠标缩放和平移\r\n                roam: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        //         \tcolor: '#ddd',\r\n                        borderColor: 'rgba(147, 235, 248, 1)',\r\n                        borderWidth: 1,\r\n                        areaColor: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.8,\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: 'rgba(175,238,238, 0)' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: 'rgba(\t47,79,79, .2)' // 100% 处的颜色\r\n                            }],\r\n                            globalCoord: false // 缺省为 false\r\n                        },\r\n                        shadowColor: 'rgba(128, 217, 248, 1)',\r\n                        // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                        shadowOffsetX: -2,\r\n                        shadowOffsetY: 2,\r\n                        shadowBlur: 10\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#389BB7',\r\n                        borderWidth: 0\r\n                    }\r\n                }\r\n            },\r\n            series: series\r\n        };\r\n      \r\n\r\n    })","html":"","externalScripts":"","updaterUID":"bd-1338241561","theme":"","layout":"","viewCount":940,"userName":"H***骨","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0Ut1A1Xp_.png?v=1545962976043","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"H***骨"}}