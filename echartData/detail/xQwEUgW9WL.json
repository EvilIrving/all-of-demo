{"status":0,"data":{"cid":"xQwEUgW9WL","authorUid":"obd-oMubyz7OLBQRQnUkAoo4JCDiWZBL-2N","authorUserName":"181*****283","title":"横向双柱状图","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-12-21T03:36:28.000Z","lastUpdateTime":"2021-12-27T03:31:33.000Z","auth":2,"uid":"obd-oMubyz7OLBQRQnUkAoo4JCDiWZBL-2N","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-27T03:31:33.000Z","code":"var img = \"/asset/get/s/data-1640056188040-4obBXEDpw.png\";\nvar datas = [\n    '国投集团',\n    '城投集团',\n    '大佛投集团',\n    '机场投集团',\n    '苏新投集团',\n    '娥率投集团',\n    '乐山国有资本运用有限公司',\n];\nvar dataheng = [43, 43, 43, 43, 43, 43, 43];\nvar legendData = [\n    {\n        name: '实用数量',\n        data: [32, 42, 4, 5, 6, 6, 6],\n        barBorderRadius: [0, 20, 20, 0],\n    },\n    {\n        name: '空缺编制',\n        data: [0, 0, 0, 0, 0, 4, 4],\n        barBorderRadius: [20, 20, 20, 20],\n    },{\n        name:'超编制或(未经市国资委核定编制)',\n        data: [3, 0, 0, 6, 0, 0, 0],\n        barBorderRadius: [0, 20, 20, 0],\n    }\n];\nlet legendData1 = [3, 0, 0, 6, 0, 0, 0];\nvar dataMax = [];\nvar xMax = 0;\nvar colorList = ['#ffc001', '#96cb03', '#fe5959'];\nvar seriesList = [];\n\n// 取x轴最大值\nfor (let i = 0; i < legendData[0].data.length; i++) {\n    dataMax.push(legendData[0].data[i] + legendData[1].data[i]);\n}\nxMax = Math.max(...dataMax);\n\nfor (var i = 0; i < legendData.length-1; i++) {\n    seriesList.push(\n        //左边的柱状图\n        {\n            type: 'bar',\n            name: legendData[i].name,\n            stack: '2',\n            barWidth: 30,\n            // barGap:i==1?'-100%':'0',\n            itemStyle: {\n                color: colorList[i],\n                //  shadowBlur: [0, 0, 0, 10],\n                //     shadowColor: '#ebe806',\n                //     barBorderRadius: [20, 20, 20, 20],\n                //     shadowOffsetX: -20,\n                barBorderRadius: legendData[i].barBorderRadius,\n                emphasis: {\n                    color: colorList[i],\n                },\n            },\n            // 数字\n            label: {\n                show: true,\n                position: 'inside',\n                right: 0,\n                color: '#fff',\n                formatter: function (params) {\n                    if (params.value == 0) {\n                        return '';\n                    } else {\n                        return params.value;\n                    }\n                },\n            },\n            data: legendData[i].data,\n        },\n        // 实用数量半圆\n        // {\n        //     name: '',\n        //     type: 'pictorialBar',\n        //     symbolSize: [30, 30],\n        //     symbolOffset: [15, 0],\n        //     symbolPosition: 'end',\n        //     // \"barWidth\": \"20\",\n        //     z: 12,\n        //     color: '#ffc001',\n        //     itemStyle: {\n        //         emphasis: {\n        //             color: '#ffc001',\n        //         },\n        //     },\n        //     data: legendData[0].data,\n        //     tooltip: {\n        //         show: false,\n        //     },\n        // },\n        // 核定编制数\n        {\n            name: '',\n            type: 'pictorialBar',\n            symbolSize: [2, 30],\n            symbolOffset: [15, 10],\n            symbol: 'back',\n            color: '#fff',\n            label: {\n                show: true,\n                position: 'lef',\n                color: '#999',\n                fontSize: 14,\n                formatter: function (params) {\n                    console.log(params);\n                    return '核定编制数：' + params.value + '辆';\n                },\n            },\n            itemStyle: {\n                emphasis: {\n                    color: '#ffc001',\n                },\n            },\n            data: dataMax,\n            tooltip: {\n                show: false,\n            },\n        },\n        //虚线\n        {\n            name: '',\n            type: 'pictorialBar',\n            symbolSize: [7, 30],\n            symbolOffset: [15, 0],\n            symbol: 'image://' +img,\n            symbolPosition: 'end',\n            // \"barWidth\": \"20\",\n            z: 12,\n            color: '#fe5959',\n            data: dataheng,\n            tooltip: {\n                show: false,\n            },\n        },\n\n    );\n}\n\noption = {\n    backgroundColor: '#fff',\n    tooltip: {\n        show: false,\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow',\n            shadowStyle: {\n                color: 'rgba(210,219,238,0.2)',\n            },\n        },\n    },\n    legend: [\n        {\n            left: '10%',\n            top: '7%',\n            icon: 'circle',\n            itemWidth: 6,\n            itemHeight: 6,\n            selectedMode: false,\n            textStyle: {\n                fontSize:16,\n                color: '#000',\n            },\n            data: ['实用数量', '空缺编制'],\n        },\n        {\n            x: '25%',\n            top: '7%',\n            icon: 'circle',\n            itemWidth: 6,\n            itemHeight: 6,\n            selectedMode: false,\n            textStyle: {\n                 fontSize:16,\n                color: '#000',\n            },\n            data: ['超编制或(未经市国资委核定编制)'],\n        },\n    ],\n    grid: [\n        {\n            containLabel: true,\n            top: '20%',\n            left: '0%',\n            bottom: '0%',\n            width: '70%',\n        },\n        {\n            gridIndex: 1,\n            left: '74%',\n            right:'0%',\n            top: '20%',\n            bottom: '0%',\n            containLabel: true,\n        },\n    ],\n    xAxis: [\n        {\n            show: false,\n            max: xMax,\n        },\n        {\n            gridIndex: 1,\n            show: false,\n            max: xMax,\n        },\n    ],\n    yAxis: [\n        {\n            inverse: true,\n            data: datas,\n            // max:10,\n            axisLabel: {\n                // margin: 80,\n                fontSize: 12,\n                align: 'right',\n                color: '#000',\n                nterval: 0, //强制显示文字\n                formatter: function (params) {\n                    if (params.length > 7) {\n                        return params.replace(params.substr(6, 1), '\\n' + params.substr(6, 1));\n                    } else {\n                        return params;\n                    }\n                },\n            },\n            axisLine: {\n                show: true,\n            },\n            axisTick: {\n                show: true,\n            },\n            axisPointer: {\n                label: {\n                    show: false,\n                    margin: 30,\n                },\n            },\n        },\n        {\n            gridIndex: 1,\n            inverse: true,\n            data: datas,\n            //   max:10,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel:{\n             show: false,\n            },\n            axisPointer: {\n                label: {\n                    show: false,\n                    margin: 30,\n                },\n            },\n        },\n    ],\n    series: [\n       {\n            type: 'bar',\n            name: '实用数量',\n            stack: '2',\n            // barWidth: 20,\n            z:10,\n            barCategoryGap:55,\n            // barGap:i==1?'-100%':'0',\n            itemStyle: {\n                color: '#ffc001',\n                \n                    barBorderRadius: [0, 10, 10, 0],\n                    \n                // barBorderRadius: legendData[i].barBorderRadius,\n                emphasis: {\n                    color: '#ffc001',\n                },\n            },\n            // 数字\n            label: {\n                show: true,\n                position: 'inside',\n                right: 0,\n                color: '#fff',\n                formatter: function (params) {\n                    if (params.value == 0) {\n                        return '';\n                    } else {\n                        return params.value;\n                    }\n                },\n            },\n            data: [32, 42, 4, 5, 6, 6, 6],\n        },\n        {\n            type: 'bar',\n            name: '空缺编制',\n            stack: '2',\n            // barWidth: 20,\n            // barGap:i==1?'-100%':'0',\n            itemStyle: {\n                color: '#96cb03',\n                \n                    // barBorderRadius: [0, 20, 20, 0],\n                    // shadowBlur: [0, 0, 0, 20],\n                    shadowColor: '#96cb03',\n                    barBorderRadius: [10,10, 10, 10],\n                    shadowOffsetX: -20,\n                // barBorderRadius: legendData[i].barBorderRadius,\n                emphasis: {\n                    color: '#96cb03',\n                },\n            },\n            // 数字\n            label: {\n                show: true,\n                position: 'inside',\n                right: 0,\n                color: '#fff',\n                formatter: function (params) {\n                    if (params.value == 0) {\n                        return '';\n                    } else {\n                        return params.value;\n                    }\n                },\n            },\n            data:[0, 0, 0, 0, 0, 4, 4],\n        },\n          // 核定编制数\n        {\n            name: '',\n            type: 'pictorialBar',\n            symbolSize: [2, 10],\n            symbolOffset: [10, -20],\n            symbol: 'back',\n            color: '#fff',\n            label: {\n                show: true,\n                position: [6,-2],\n                color: '#999',\n                fontSize: 14,\n                // margin:[20],\n                formatter: function (params) {\n                    console.log(params);\n                    return '核定编制数：' + params.value + '辆';\n                },\n            },\n            itemStyle: {\n                emphasis: {\n                    color: '#ffc001',\n                },\n            },\n            data: dataMax,\n            tooltip: {\n                show: false,\n            },\n        },\n        //虚线\n        {\n            name: '',\n            type: 'pictorialBar',\n            symbolSize: [7, 30],\n            symbolOffset: [15, 0],\n            symbol: 'image://' +img,\n            symbolPosition: 'end',\n            // \"barWidth\": \"20\",\n            z: 12,\n            color: '#fe5959',\n            data: dataheng,\n            tooltip: {\n                show: false,\n            },\n        },\n        //右边的柱状图\n        {\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            type: 'bar',\n            name: '超编制或(未经市国资委核定编制)',\n            stack: '3',\n            // barWidth: 30,\n             barCategoryGap:55,\n            // barGap:i==1?'-100%':'0',\n            itemStyle: {\n                color: '#fe5959',\n                barBorderRadius: [0, 20, 20, 0],\n                emphasis: {\n                    color: '#fe5959',\n                },\n            },\n            // 数字\n            label: {\n                show: true,\n                position: 'inside',\n                right: 0,\n                color: '#fff',\n                formatter: function (params) {\n                    if (params.value == 0) {\n                        return '';\n                    } else {\n                        return params.value;\n                    }\n                },\n            },\n            data: legendData1,\n        },\n    ],\n};\n// 3.配置项和数据给实例化对象\nmyChart.setOption(option);\n","html":"","externalScripts":"","updaterUID":"obd-oMubyz7OLBQRQnUkAoo4JCDiWZBL-2N","theme":"","layout":"","viewCount":0,"userName":"181*****283","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xQwEUgW9WL.png?v=1640575893529","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"181*****283"}}