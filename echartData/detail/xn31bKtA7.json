{"status":0,"data":{"cid":"xn31bKtA7","authorUid":"bd-4230294754","authorUserName":"无***K","title":"ChinaMap","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2019-12-25T09:36:15.000Z","lastUpdateTime":"2019-12-25T09:36:15.000Z","auth":2,"uid":"bd-4230294754","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.7.0","versionCreateTime":"2020-03-26T09:31:57.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\nvar geoGpsMap = {\n    '1': [127.9688, 45.368],\n    '2': [116.4551, 40.2539],\n    '3': [109.1162, 34.2004],\n    '4': [113.12244, 23.009505],\n    '5': [87.9236, 43.5883],\n    '6': [91.11, 29.97],\n};\nvar geoCoordMap = {\n    '台湾': [121.5135, 25.0308],\n    '黑龙江': [127.9688, 45.368],\n    '内蒙古': [110.3467, 41.4899],\n    \"吉林\": [125.8154, 44.2584],\n    '北京市': [116.4551, 40.2539],\n    \"辽宁\": [123.1238, 42.1216],\n    \"河北\": [114.4995, 38.1006],\n    \"天津\": [117.4219, 39.4189],\n    \"山西\": [112.3352, 37.9413],\n    \"陕西\": [109.1162, 34.2004],\n    \"甘肃\": [103.5901, 36.3043],\n    \"宁夏\": [106.3586, 38.1775],\n    \"青海\": [101.4038, 36.8207],\n    \"新疆\": [87.9236, 43.5883],\n    \"西藏\": [91.11, 29.97],\n    \"四川\": [103.9526, 30.7617],\n    \"重庆\": [108.384366, 30.439702],\n    \"山东\": [117.1582, 36.8701],\n    // \"河南\": [113.4668, 34.6234],\n    // \"江苏\": [118.8062, 31.9208],\n    // \"安徽\": [117.29, 32.0581],\n    // \"湖北\": [114.3896, 30.6628],\n    // \"浙江\": [119.5313, 29.8773],\n    // \"福建\": [119.4543, 25.9222],\n    // \"江西\": [116.0046, 28.6633],\n    // \"湖南\": [113.0823, 28.2568],\n    // \"贵州\": [106.6992, 26.7682],\n    // \"云南\": [102.9199, 25.4663],\n    // \"广东\": [113.12244, 23.009505],\n    // \"广西\": [108.479, 23.1152],\n    // \"海南\": [110.3893, 19.8516],\n    // '上海': [121.4648, 31.2891],\n\n};\nvar colors = [\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\n];\nvar colorIndex = 0;\n var years = ['2016', '2017', '2018'];\n var jdData = [\n     ['香港同胞1', '澳门同胞1', '马来西亚1', '菲律宾1', '新加坡1', '泰  国1', '印  度1', '越  南1', '缅  甸1', '朝  鲜1', '巴基斯坦1', '其  它1'], //12\n     ['香港同胞12', '澳门同胞12', '马来西亚12', '菲律宾12', '新加坡12', '泰  国12', '印  度12', '越  南12'], //8\n     ['香港同胞13', '澳门同胞13', '马来西亚13', '菲律宾13', '新加坡13', '泰  国13', '印  度13', '越  南13', '缅  甸13', '朝  鲜13']\n ] //10\n //   [ '香港同胞','澳门同胞','台湾同胞','马来西亚','菲律宾','新加坡','泰  国','印  度','越  南','缅  甸','朝  鲜','巴基斯坦','其  它']]\n var data = [\n     [13.2, 1.11, 13.6, 9284, 64138, 2237, 4779, 48877, 2371, 36224, 12956, 2499],\n     [15.26, 1.31, 16.68, 10331, 91580, 1909, 40469, 67490],\n     [14.23, 1.31, 21.13, 10873, 94964, 2966, 129748, 59827, 8519, 38344],\n ];\n$(function() {\n    var year = [\"2014\", \"2015\", \"2016\", \"2017\", \"2018\"];\n    var mapData = [\n        [],\n        [],\n        [],\n        [],\n        [],\n        []\n    ];\n\n    /*柱子Y名称*/\n    var categoryData = [];\n    var barData = [];\n    for (var key in geoCoordMap) {\n        categoryData.push(key);\n        mapData[0].push({\n            \"year\": '2014',\n            \"name\": key,\n            \"value\": randomNum(100, 300)\n        });\n        mapData[1].push({\n            \"year\": '2015',\n            \"name\": key,\n            \"value\": randomNum(100, 300)\n        });\n        mapData[2].push({\n            \"year\": '2016',\n            \"name\": key,\n            \"value\": randomNum(100, 300)\n        });\n        mapData[3].push({\n            \"year\": '2017',\n            \"name\": key,\n            \"value\": randomNum(100, 300)\n        });\n        mapData[4].push({\n            \"year\": '2018',\n            \"name\": key,\n            \"value\": randomNum(100, 300)\n        });\n\n    }\n    for (var i = 0; i < mapData.length; i++) {\n        barData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            barData[i].push(mapData[i][j].value)\n        }\n    }\n    $.getJSON(uploadedDataURL, function(geoJson) {\n\n        echarts.registerMap('china', geoJson);\n        var convertData = function(data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value)\n                    });\n                }\n            }\n            return res;\n        };\n\n        // var convertToLineData = function(data, gps) {\n        //     var res = [];\n        //     for (var i = 0; i < data.length; i++) {\n        //         var dataItem = data[i];\n        //         var fromCoord = geoCoordMap[dataItem.name];\n        //         var toCoord = gps; //郑州\n        //         //  var toCoord = geoGps[Math.random()*3]; \n        //         if (fromCoord && toCoord) {\n        //             res.push([{\n        //                 coord: fromCoord,\n        //                 value: dataItem.value\n        //             }, {\n        //                 coord: toCoord,\n        //             }]);\n        //         }\n        //     }\n        //     return res;\n        // };\n\n        optionXyMap01 = {\n            timeline: {\n                data: year,\n                axisType: 'category',\n                show: true,\n                autoPlay: true,\n                playInterval: 3000,\n                left: '10%',\n                right: '10%',\n                bottom: '3%',\n                width: '80%',\n                //  height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            fontSize: 28,\n                            color: '#ddd'\n                        }\n                    },\n                    position: -200,\n                    emphasis: {\n                        textStyle: {\n                fontSize: 28,\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbol: 'none',\n                // symbolSize: 0,\n                // symbolOffset: [0, 5],\n                lineStyle: {\n                    show: false,\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n\n            },\n            baseOption: {\n                title: {\n                    text: '大数据asdasd',\n                    left: '75%',\n                    top: '8%',\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 30\n                    }\n                },\n                backgroundColor: '#051b4a',\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '1%',\n                    top: '15%',\n                    bottom: '10%',\n                    width: '20%'\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\n                        }\n                    }\n                },\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false\n                    },\n                    axisLine: {\n                        show: false\n                    },\n                    axisTick: {\n                        show: false\n                    },\n                    axisLabel: {\n                        margin: 2,\n                        textStyle: {\n                            color: '#aaa'\n                        }\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    nameGap: 16,\n                    axisLine: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    // data: categoryData\n                },\n                series: [\n                    //地图？\n                    {\n                        type: 'map',\n                        map: 'china',\n                        tooltip: {\n                            trigger: 'item',\n                            formatter: '{b}:{c}'\n                            // formatter: function (params) {\n                            //     console.log()\n                            // }\n                        },\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: false, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: false\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff'\n                                }\n                            }\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7'\n                            }\n                        },\n                        animation: false,\n                        // data: mapData\n                    },\n                    //地图点的动画效果\n                    {\n                        //  name: 'Top 5',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        symbolSize: function(val) {\n                            return val[2] / 10;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke'\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                                shadowBlur: 10,\n                                shadowColor: colors[colorIndex][n]\n                            }\n                        },\n                        zlevel: 1,\n                        // data: convertData(mapData[n].sort(function(a, b) {\n                        //     return b.value - a.value;\n                        // }).slice(0, 20)),\n                    },\n                    //柱状图\n                    {\n                        zlevel: 1.5,\n                        type: 'bar',\n                        symbol: 'none',\n                        // barWidth: barData[n].length > 10 ?'':50,\n                        // barMaxWidth: barData[n].length > 5 ?'':'70%',\n                        itemStyle: {\n                            // normal: {\n                            //     color: colors[colorIndex][n]\n                            // }\n                            normal: {\n                                color: function(params) {\n                                    // build a color map as your need.\n                                    var colorList = [\n                                        '#bcd3bb', '#e88f70', '#9dc5c8', '#e1e8c8',\n                                        '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8',\n                                        '#bda29a', '#376956', '#c3bed4', '#495a80',\n                                        '#9966cc', '#bdb76a', '#eee8ab', '#a35015',\n                                        '#04dd98', '#d9b3e6', '#b6c3fc','#315dbc',\n                                    ];\n                                    return colorList[params.dataIndex]\n                                },\n    \n                            }\n                        },\n                        // data: barData[n]\n                    }\n                ],\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887],\n                    label: {\n                        emphasis: {\n                            show: false\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [{\n                                    offset: 0,\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\n                                }, {\n                                    offset: 1,\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\n                                }],\n                                globalCoord: false // 缺省为 false\n                            },\n                            shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0\n                        }\n                    }\n                },\n            },\n            options: []\n\n        };\n        for (var n = 0; n < year.length; n++) {\n            optionXyMap01.options.push({\n                title: \n                    {\n                        // id: 'statistic',\n                        text: year[n] + \"年数据统计情况\",\n                        // left: '75%',\n                        // top: '8%',\n                        // textStyle: {\n                        //     color: '#fff',\n                        //     fontSize: 30\n                        // }\n                    },\n                yAxis: [{\n                    data:  categoryData\n                }],\n                series: [\n                    {data: mapData},\n                    {data: convertData(mapData[n].sort(function(a, b) {\n                            return b.value - a.value;\n                        }).slice(0, 20))},\n                    {data: barData[n]}\n                ]\n            })\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});\n\n\nfunction randomNum(minNum, maxNum) {\n    switch (arguments.length) {\n        case 1:\n            return parseInt(Math.random() * minNum + 1, 10);\n            break;\n        case 2:\n            return parseInt(Math.random() * (maxNum - minNum + 1) + minNum, 10);\n            break;\n        default:\n            return 0;\n            break;\n    }\n}\nmyChart.on('mouseover', {componentType: 'series'}, function(params){\n    myChart.dispatchAction({\n        type: 'timelinePlayChange',\n        playState: false\n    })\n})\nmyChart.on('mouseout', {componentType: 'series'}, function(params){\n    myChart.dispatchAction({\n        type: 'timelinePlayChange',\n        playState: true\n    })\n})\n","html":"","externalScripts":"","updaterUID":"bd-4230294754","theme":"","layout":"","viewCount":1261,"userName":"无***K","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xn31bKtA7.png?v=1585215117823","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"无***K"}}