{"status":0,"data":{"cid":"xqUrRX3br","authorUid":"bd-3244135873","authorUserName":"金***1","title":"温度类型统计-三联动","description":"采用饼图、柱状图、曲线图三联动，柱状图、曲线图颜色区分","latestVersion":4,"alwaysLatest":1,"createTime":"2019-10-31T01:33:57.000Z","lastUpdateTime":"2019-10-31T01:33:57.000Z","auth":2,"uid":"bd-3244135873","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-31T01:41:02.000Z","code":" var t1 = rankData(\"温度\", 16),\n     t2 = rankData(\"冷通道温度\", 13),\n     t3 = rankData(\"热通道温度\", 18);\n var obj = {\n     \"温度\": {\n         name: '温度',\n         visualMap: false,\n         value: 16,\n         soName: t1.name,\n         soValue: t1.value,\n         lineData: lineData(t1.name)\n     },\n     \"冷通道温度\": {\n         name: '冷通道温度',\n         visualMap: false,\n         value: 13,\n         soName: t2.name,\n         soValue: t2.value,\n         lineData: lineData(t2.name)\n     },\n     \"热通道温度\": {\n         name: '热通道温度',\n         visualMap: false,\n         value: 18,\n         soName: t3.name,\n         soValue: t3.value,\n         lineData: lineData(t3.name)\n     }\n }\n\n\n /**\n  * 设备数据对象\n  **/\n function rankData(soName, count) {\n     var nameBar = [],\n         valueBar = [];\n     var max = 38;\n     var min = 15;\n     for (var i = 1; i < count + 1; i++) {\n         var value = Math.floor(Math.random() * (max - min + 1) + min);\n         var color = \"#85f585\";\n         if (value <= -10 || value >= 35) {\n             color = '#ffff00';\n         } else if (value >= 30 && value < 35) {\n             color = '#648afa';\n         } else if (value > -10 && value < 30) {\n             color = '#85f585';\n         }\n         valueBar.push({\n             value: value,\n             name: soName + i,\n             visualMap: false,\n             itemStyle: {\n                 color: color,\n             },\n         })\n     }\n     valueBar.sort(function(a, b) {\n         return b.value - a.value\n     })\n     var values = valueBar.slice(0, 10)\n     $.each(values, function(key, value) {\n         nameBar.push(value.name)\n     })\n     return {\n         name: nameBar.reverse(),\n         value: values.reverse()\n     }\n }\n\n /**\n  * 曲线图数据对象\n  **/\n function lineData(names) {\n     var lines = new Object();\n     for (var i = 0; i < names.length; i++) {\n         lines[names[i]] = new Object();\n         lines[names[i]][\"seriesData\"] = randomData();\n     }\n     return lines;\n }\n\n /**\n  * 曲线图数据源\n  **/\n function randomData() {\n     var data = [];\n     var max = 40;\n     var min = -20;\n     for (var i = 0; i < 24; i++) {\n         data.push(Math.floor(Math.random() * (max - min + 1) + min))\n     }\n     return data;\n }\n\n function setCurOption(barName, lineName) {\n     return {\n         title: [{\n             text: \"温度类型数量统计\",\n             x: '25%',\n             y: '3%',\n             textAlign: 'center',\n             textBaseline: 'middle',\n             textStyle: {\n                 fontSize: 20\n             }\n         }, {\n             text: barName + \"Top10\",\n             x: '75%',\n             y: '2%',\n             textAlign: 'center',\n             textBaseline: 'middle',\n             textStyle: {\n                 fontSize: 20\n             }\n         }, {\n             text: lineName,\n             x: '45%',\n             y: '43%',\n             textAlign: 'center',\n             textBaseline: 'middle',\n             textStyle: {\n                 fontSize: 20\n             }\n         }],\n         tooltip: {\n             trigger: 'axis',\n             axisPointer: {\n                 type: 'shadow'\n             }\n         },\n         legend: [{\n             data: ['温度', '冷通道温度', '热通道温度'],\n             x: 'left',\n             orient: 'vertical'\n         }],\n         grid: [{\n                 left: '48%',\n                 right: '5%',\n                 top: '5%',\n                 bottom: '65%',\n                 containLabel: true\n             },\n             {\n                 gridindex: 1,\n                 left: '0%',\n                 right: '5%',\n                 top: '50%',\n                 bottom: '5%',\n                 containLabel: true\n             }\n         ],\n         visualMap: {\n             show: false,\n             pieces: [{\n                 lte: -10,\n                 color: '#ffff00'\n             }, {\n                 gt: -10,\n                 lt: 30,\n                 color: '#85f585'\n             }, {\n                 gte: 30,\n                 lt: 35,\n                 color: '#648afa'\n             }, {\n                 gte: 35,\n                 color: '#ffff00'\n             }]\n         },\n         xAxis: [{\n                 type: 'value',\n                 boundaryGap: [0, 0.01]\n             },\n             {\n                 gridIndex: 1,\n                 type: 'category',\n                 boundaryGap: false,\n                 data: ['0时', '1时', '2时', '3时', '4时', '5时', '6时', '7时', '8时', '9时', '10时', '11时', '12时', '13时', '14时', '15时', '16时', '17时', '18时', '19时', '20时', '21时', '22时', '23时']\n             }\n         ],\n         yAxis: [{\n                 type: 'category',\n                 data: obj[barName].soName,\n                 axisLabel: {\n                     interval: 0\n                 }\n             },\n             {\n                 gridIndex: 1,\n                 type: 'value',\n             }\n         ],\n         series: [{\n             name: '数量',\n             type: 'pie',\n             center: ['25%', '18%'],\n             radius: ['15%', '20%'],\n             label: {\n                 normal: {\n                     formatter: '{b} :{c} ({d}%)'\n                 }\n             },\n             data: [obj['温度'], obj['冷通道温度'], obj['热通道温度']]\n         }, {\n             name: 'top10',\n             type: 'bar',\n             label: {\n                 normal: {\n                     show: true,\n                     position: 'right',\n                     color: \"#00cfff\"\n                 }\n             },\n             data: obj[barName].soValue\n         }, {\n             xAxisIndex: 1,\n             yAxisIndex: 1,\n             name: lineName,\n             type: 'line',\n             data: obj[barName][\"lineData\"][lineName].seriesData,\n             markPoint: {\n                 data: [{\n                         type: 'max',\n                         name: '最大值',\n                         symbolSize: 55\n                     },\n                     {\n                         type: 'min',\n                         name: '最小值',\n                         symbolSize: 50\n                     }\n                 ],\n             },\n             markLine: {\n                 data: [{\n                     type: 'average',\n                     name: '平均值'\n                 }]\n             }\n         }]\n     }\n }\n var selName = \"冷通道温度\";\n option = setCurOption(selName, obj[selName].soName[9])\n\n myChart.on('click', function(params) {\n     console.log(params)\n     if (params.seriesType === \"pie\") {\n         selName = params.name;\n         myChart.clear();\n         var option = setCurOption(params.name, obj[params.name].soName[9]);\n         myChart.setOption(option);\n     }\n\n     if (params.seriesType === \"bar\") {\n         myChart.setOption(setCurOption(selName, params.name));\n     }\n })","html":"","externalScripts":"","updaterUID":"bd-3244135873","theme":"","layout":"","viewCount":1002,"userName":"金***1","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqUrRX3br.png?v=1572486062235","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markLine","markPoint","series-bar","series-line","series-pie","title","tooltip","visualMap"],"customTags":["bar","line","pie","visualMap"],"updaterUserName":"金***1"}}