{"status":0,"data":{"cid":"xHkFcXODVx","authorUid":"bd-4017584725","authorUserName":"b***1","title":"柱状对比图","description":"柱状对比图，针对两种不同类别，同一时间的数据做对比，能够根据数据的大小做出不同的等分，并且x轴上的负数和数值以正数显示","latestVersion":1,"alwaysLatest":1,"createTime":"2016-12-21T03:14:25.000Z","lastUpdateTime":"2016-12-21T03:14:25.000Z","auth":2,"uid":"bd-4017584725","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.3.2","versionCreateTime":"2016-12-21T03:14:25.000Z","code":"/**\r\n * author: bingo\r\n * email: guobin@ebigdata.org\r\n * date: 2016-12-21\r\n * version: V1.0\r\n * description: 柱状对比图，针对两种不同类别，同一时间的数据做对比，能够根据数据的大小做出不同的等分，并且x轴上的负数和数值以正数显示\r\n */\r\nvar temMax = 0;\r\ntemInterval = 100;\r\nvar distributeRadarData = [{\r\n    \"types\": [\"重工业\", \"轻工业\"]\r\n}, {\r\n    \"time\": \"2012Q1\",\r\n    \"values\": [407.6, 289.4]\r\n}, {\r\n    \"time\": \"2014Q1\",\r\n    \"values\": [619.7, 233.8]\r\n}, {\r\n    \"time\": \"2016Q1\",\r\n    \"values\": [343.1, 136.1]\r\n}];\r\n\r\nfunction setMax() {\r\n    for (var x = 1; x < 4; x++) {\r\n        for (var y = 0; y < 2; y++) {\r\n            if (Math.abs(distributeRadarData[x].values[y]) > temMax) {\r\n                temMax = Math.abs(distributeRadarData[x].values[y]);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction switchMax(value) {\r\n    if (value <= 500) {\r\n        temInterval = 100;\r\n    } else if (value <= 1000) {\r\n        temInterval = 200;\r\n    } else {\r\n        temInterval = 500;\r\n    }\r\n    temMax = Math.ceil(value / temInterval) * temInterval;\r\n}\r\nsetMax();\r\nswitchMax(temMax);\r\noption = {\r\n    title: [{\r\n        text: \"柱状对比图\",\r\n        left: 'center',\r\n        textStyle: {\r\n            color: \"#454545\",\r\n            fontSize: 16,\r\n            fontWeight: 'bold'\r\n        }\r\n    }, {\r\n        text: distributeRadarData[0].types[0],\r\n        right: \"28%\",\r\n        bottom: 30,\r\n        textStyle: {\r\n            color: \"#00f6ff\",\r\n            fontSize: 12,\r\n            fontWeight: 'normal'\r\n        }\r\n    }, {\r\n        text: distributeRadarData[0].types[1],\r\n        left: \"28%\",\r\n        bottom: 30,\r\n        textStyle: {\r\n            color: \"#00f6ff\",\r\n            fontSize: 12,\r\n            fontWeight: 'normal'\r\n        }\r\n    }, {\r\n        text: '单位：亿元',\r\n        right: 10,\r\n        textStyle: {\r\n            color: \"#006486\",\r\n            fontSize: 12,\r\n            fontWeight: 'normal'\r\n        }\r\n    }],\r\n    tooltip: {\r\n        formatter: function(params) {\r\n            if (params.seriesIndex % 2 === 0) {\r\n                return params.seriesName + '<br/>' + distributeRadarData[0].types[0] + ': ' + params.value\r\n            } else {\r\n                return params.seriesName + '<br/>' + distributeRadarData[0].types[1] + ': ' + -params.value\r\n            }\r\n        }\r\n    },\r\n    legend: {\r\n        data: [distributeRadarData[1].time, distributeRadarData[2].time, distributeRadarData[3].time],\r\n        selectedMode: true,\r\n        bottom: 'bottom'\r\n    },\r\n    xAxis: [{\r\n        type: 'value',\r\n        position: 'top',\r\n        silent: true,\r\n        axisLine: {\r\n            onZero: true\r\n        },\r\n        splitArea: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#006486',\r\n                width: 1,\r\n                type: 'dashed'\r\n            }\r\n        },\r\n        min: -temMax,\r\n        max: temMax,\r\n        interval: temInterval,\r\n        axisLabel: {\r\n            formatter: function(param) {\r\n                if (param > 0) {\r\n                    return param\r\n                } else {\r\n                    return -param\r\n                }\r\n            }\r\n        }\r\n    }],\r\n    yAxis: [{\r\n        axisTick: {\r\n            show: true\r\n        },\r\n        data: []\r\n    }],\r\n    series: [{\r\n        name: distributeRadarData[1].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[1].time,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right'\r\n            }\r\n        },\r\n        data: [distributeRadarData[1].values[0]]\r\n    }, {\r\n        name: distributeRadarData[1].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[1].time,\r\n        label: {\r\n            normal: {\r\n                formatter: function(param) {\r\n                    return -param.value\r\n                },\r\n                show: true,\r\n                position: 'left'\r\n            }\r\n        },\r\n        data: [-distributeRadarData[1].values[1]]\r\n    }, {\r\n        name: distributeRadarData[2].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[2].time,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right'\r\n            }\r\n        },\r\n        data: [distributeRadarData[2].values[0]]\r\n    }, {\r\n        name: distributeRadarData[2].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[2].time,\r\n        label: {\r\n            normal: {\r\n                formatter: function(param) {\r\n                    return -param.value\r\n                },\r\n                show: true,\r\n                position: 'left'\r\n            }\r\n        },\r\n        data: [-distributeRadarData[2].values[1]]\r\n    }, {\r\n        name: distributeRadarData[3].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[3].time,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right'\r\n            }\r\n        },\r\n        data: [distributeRadarData[3].values[0]]\r\n    }, {\r\n        name: distributeRadarData[3].time,\r\n        type: 'bar',\r\n        stack: distributeRadarData[3].time,\r\n        label: {\r\n            normal: {\r\n                formatter: function(param) {\r\n                    return -param.value\r\n                },\r\n                show: true,\r\n                position: 'left'\r\n            }\r\n        },\r\n        data: [-distributeRadarData[3].values[1]]\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-4017584725","theme":"","layout":"","viewCount":1079,"userName":"b***1","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHkFcXODVx.png?v=1482290065355","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":["BarChart","tooltip","xAxis"],"updaterUserName":"b***1"}}