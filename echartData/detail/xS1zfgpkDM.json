{"status":0,"data":{"cid":"xS1zfgpkDM","authorUid":"bd-302938643","authorUserName":"mingtao0827","title":"客户分析指数","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-02-13T01:31:54.000Z","lastUpdateTime":"2018-02-13T01:31:54.000Z","auth":2,"uid":"bd-302938643","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2018-02-13T01:33:06.000Z","code":"var keyValue = 60;\r\nvar name = \"中\";\r\nif (keyValue < 50) {\r\n    name = \"低\";\r\n} else if (keyValue > 80) {\r\n    name = \"高\";\r\n}\r\nvar serie = [600, -200, 300, 500];\r\nvar tital = '贡献度指数: ' + serie[0];\r\nvar serie1 = [6, 2, 8];\r\nvar serie2 = [0.3, 0.5, 0.2];\r\nvar colors = ['#5793f3', '#d48265', '#91c7ae'];\r\n//var colors = ['orange', '#d14a61', '#1E90FF'];\r\nvar legend = ['分值', '权重'];\r\n// 基于准备好的dom，初始化echarts实例\r\noption = null;\r\noption = {\r\n    backgroundColor: '#ffffff',\r\n    title: [{\r\n        text: tital,\r\n        left: '50%',\r\n        top: '5%',\r\n        textAlign: 'center'\r\n    }, {\r\n        left: '28%',\r\n        top: '51%',\r\n        textAlign: 'center'\r\n    }, {\r\n        text: '',\r\n        left: '78%',\r\n        top: '51%',\r\n        textAlign: 'center'\r\n    }],\r\n    toolbox: {\r\n        feature: {\r\n            dataView: {\r\n                show: true,\r\n                optionToContent: function(opt) {\r\n                    var table = '';\r\n                    table += '<table style=\"width:100%;text-align:center\"><tbody>';\r\n                    table += '<tr><td>贡献度指数</td><td>存款效益</td><td>贷款效益</td><td>贷款效益</td></tr>';\r\n                    table += '<tr>' + '<td>' + serie[0] + '</td>' + '<td>' + serie[1] + '</td>' + '<td>' + serie[2] + '</td>' + '<td>' + serie[3] + '</td>' + '</tr>';\r\n                    table += '</tbody></table>';\r\n                    table += '<hr/>';\r\n                    table += '<table style=\"width:100%;text-align:center\"><tbody>';\r\n                    table += '<tr><td style=\"text-align:left;\">忠诚度指数:' + keyValue + '</td></tr>';\r\n                    table += '</tbody></table>';\r\n                    table += '<hr/>';\r\n                    table += '<table style=\"width:100%;text-align:center\"><tbody>';\r\n                    table += '<tr><td>忠诚度指数明细</td><td>存款</td><td>理财</td><td>基金</td></tr>';\r\n                    table += '<tr>' + '<td>分值</td>' + '<td>' + serie1[0] + '</td>' + '<td>' + serie1[1] + '</td>' + '<td>' + serie1[2] + '</td>' + '</tr>';\r\n                    table += '<tr>' + '<td>权重</td>' + '<td>' + serie2[1] + '</td>' + '<td>' + serie2[1] + '</td>' + '<td>' + serie2[2] + '</td>' + '</tr>';\r\n                    table += '</tbody></table>';\r\n                    return table;\r\n                },\r\n                readOnly: true\r\n            },\r\n            restore: {\r\n                show: true\r\n            },\r\n            saveAsImage: {\r\n                show: true\r\n            }\r\n        }\r\n    },\r\n    /* tooltip: {\r\n    trigger: 'axis'\r\n    } ,*/\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n        },\r\n        fomatter: function(obj) {\r\n            return '<div style=\"border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px\">' + tital + '</div>' +\r\n                '<span>' + '存款效益' + '</span>' +\r\n                ' : ' + serie[1] + '<br/>' +\r\n                '<span>' + '中间业务效益' + '</span>' + ' : ' + serie[2] + '<span>' +\r\n                '贷款效益' + '</span>' + ' : ' + serie[3]\r\n        }\r\n    },\r\n    legend: {\r\n        type: 'plain',\r\n        top: '35%',\r\n        pageButtonGap: 10,\r\n        pageButtonPosition: 'end',\r\n        data: ['存款效益', '中间业务效益', '贷款效益']\r\n    },\r\n    grid: [{\r\n        show: false,\r\n        left: '0%',\r\n        top: '5%',\r\n        containLabel: true,\r\n        width: '95%',\r\n        height: '30%'\r\n    }, {\r\n        show: false,\r\n        left: '3%',\r\n        top: '48%',\r\n        containLabel: true,\r\n        width: '45%',\r\n        height: '50%'\r\n    }, {\r\n        show: false,\r\n        left: '53%',\r\n        top: '48%',\r\n        containLabel: true,\r\n        width: '42%',\r\n        height: '45%'\r\n    }],\r\n    /* legend : [ {\r\n    type : 'plain',\r\n    top : '35%',\r\n    data : [ '存款效益', '中间业务效益', '贷款效益' ]\r\n    }, {\r\n    }, {\r\n    type : 'scroll',\r\n    top : '5%',\r\n    pageButtonGap : 10,\r\n    pageButtonPosition : 'end',\r\n    data : [ '暂降频次3', '暂降频次4' ],\r\n    x : 'right',\r\n    } ], */\r\n    xAxis: [{\r\n        gridIndex: 0,\r\n        type: 'value',\r\n        offset: -85,\r\n        splitLine: {\r\n            show: false, //让X轴数据不显示\r\n        }\r\n    }, {\r\n        gridIndex: 1,\r\n        show: false\r\n    }, {\r\n        gridIndex: 2,\r\n        type: 'category',\r\n        axisLabel: {\r\n            // interval:0,//横轴信息全部显示\r\n            rotate: -30 //-30度角倾斜显示\r\n        },\r\n        name: '忠诚度指数明细',\r\n        nameLocation: 'center',\r\n        nameGap: '30',\r\n        nameTextStyle: {\r\n            fontSize: 12\r\n        },\r\n        axisTick: {\r\n            // alignWithLabel: true\r\n        },\r\n        // boundaryGap: false,\r\n        data: ['存款', '理财', '基金']\r\n    }],\r\n    yAxis: [{\r\n        gridIndex: 0,\r\n        type: 'category',\r\n        splitNumber: 0,\r\n        boundaryGap: [0, 0],\r\n        axisLabel: {\r\n            show: false, //让Y轴数据不显示\r\n        },\r\n        itemStyle: {},\r\n        axisTick: {\r\n            show: false, //隐藏Y轴刻度\r\n        },\r\n        axisLine: {\r\n            show: false, //隐藏Y轴线段\r\n        },\r\n        data: [tital]\r\n    }, {\r\n        gridIndex: 1,\r\n        position: 'left',\r\n        show: false\r\n    }, {\r\n        gridIndex: 2,\r\n        type: 'value',\r\n        name: '分值',\r\n        position: 'left',\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: colors[1]\r\n            }\r\n        },\r\n        axisLabel: {\r\n            formatter: '{value} '\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: true\r\n        }\r\n    }, {\r\n        gridIndex: 2,\r\n        type: 'value',\r\n        name: '权重',\r\n        position: 'right',\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: colors[2]\r\n            }\r\n        },\r\n        axisLabel: {\r\n            formatter: '{value} '\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: true\r\n        }\r\n    }],\r\n    series: [{\r\n        name: '存款效益',\r\n        type: 'bar',\r\n        xAxisIndex: 0,\r\n        yAxisIndex: 0,\r\n        stack: '效益',\r\n        barCategoryGap: 0,\r\n        barGap: 0,\r\n        barWidth: 50,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'insideRight'\r\n            }\r\n        },\r\n        data: [serie[1]]\r\n    }, {\r\n        name: '中间业务效益',\r\n        type: 'bar',\r\n        xAxisIndex: 0,\r\n        yAxisIndex: 0,\r\n        stack: '效益',\r\n        barCategoryGap: 0,\r\n        barGap: 0,\r\n        barWidth: 50,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'insideRight'\r\n            }\r\n        },\r\n        data: [serie[2]]\r\n    }, {\r\n        name: '贷款效益',\r\n        type: 'bar',\r\n        xAxisIndex: 0,\r\n        yAxisIndex: 0,\r\n        stack: '效益',\r\n        barCategoryGap: 0,\r\n        barGap: 0,\r\n        barWidth: 50,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'insideRight'\r\n            }\r\n        },\r\n        data: [serie[3]]\r\n    }, {\r\n        name: '忠诚度指数',\r\n        xAxisIndex: 1,\r\n        yAxisIndex: 1,\r\n        type: 'gauge',\r\n        radius: '50%',\r\n        center: ['27%', '73%'],\r\n        min: 0,\r\n        max: 100,\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                width: 30,\r\n                shadowBlur: 0,\r\n                color: [\r\n                    [0.3, '#C23531'],\r\n                    [0.6, '#63869e'],\r\n                    [0.8, '#bda29a'],\r\n                    [0.9, '#d48265'],\r\n                    [1, '#91c7ae']\r\n                ]\r\n            }\r\n        },\r\n        axisLabel: {\r\n            formatter: function(e) {\r\n                switch (e + \"\") {\r\n                    case \"10\":\r\n                        return \"低\";\r\n                    case \"50\":\r\n                        return \"一般\";\r\n                    case \"70\":\r\n                        return \"良好\";\r\n                    case \"90\":\r\n                        return \"高\";\r\n                    case \"100\":\r\n                        return \"极好\";\r\n                    default:\r\n                        return e;\r\n                }\r\n            },\r\n            textStyle: {\r\n                fontSize: 12,\r\n                fontWeight: \"\"\r\n            }\r\n        },\r\n        detail: {\r\n            formatter: '{value}'\r\n        },\r\n        title: {\r\n            fontSize: 12\r\n        },\r\n        data: [{\r\n            value: keyValue,\r\n            name: '忠诚度指数'\r\n        }]\r\n    }, {\r\n        name: '分值',\r\n        type: 'bar',\r\n        smooth: true,\r\n        barWidth: 25,\r\n        xAxisIndex: 2,\r\n        yAxisIndex: 2,\r\n        symbolSize: 8, //拐点大小\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top',\r\n                color: colors[1],\r\n            }\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                width: 4,\r\n                color: colors[1]\r\n            }\r\n        },\r\n        data: serie1\r\n    }, {\r\n        name: '权重',\r\n        type: 'bar',\r\n        smooth: true,\r\n        barWidth: 25,\r\n        xAxisIndex: 2,\r\n        yAxisIndex: 3,\r\n        symbolSize: 8, //拐点大小\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top',\r\n                color: colors[2],\r\n            }\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                width: 4,\r\n                color: colors[2]\r\n            }\r\n        },\r\n        data: serie2\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-302938643","theme":"","layout":"","viewCount":2186,"userName":"mingtao0827","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xS1zfgpkDM.png?v=1518485586911","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-gauge","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"mingtao0827"}}