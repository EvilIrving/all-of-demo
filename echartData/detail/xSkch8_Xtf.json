{"status":0,"data":{"cid":"xSkch8_Xtf","authorUid":"bd-3493513353","authorUserName":"兔子林_Grace","title":"堆叠柱状图","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2018-03-12T03:40:34.000Z","lastUpdateTime":"2018-03-12T03:40:34.000Z","auth":2,"uid":"bd-3493513353","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.0.4","versionCreateTime":"2018-03-12T07:53:03.000Z","code":"var nationalImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFMAAAAxCAMAAACRUGVjAAABDlBMVEXLHSPOKCPOLCPdbSXaYCXsrifPLiTMHyPQMyT33Sn33incaSXMIiPQNCTaXiXLHiPmkyfzzSj0zynfcybSOyTfdCbonCfMISPNJSPNJyPnmSftsij11inTQSTPMSTYVyXdbCXljyfWTSXjhSbqpCfURyTRNyTLHyPzzinnmifutCjRNiTOKiPZXCXyxyjsrijRNSTcaCXjhibebybURCTSPiTwwCj00inYVCXqpSfzyyj22Sn33Cn11SnVSSTNJiPyyCjVSiTjhybWTiXpoSfOKyPxxCjtsyjvuyjjiCbbZCXXUiXPMCTYViXVRyTqpyfZWiXNKCPQMiTrqCf23CncZyX11ynTQCTrqifROSSHKO95AAAA80lEQVR4Ae3BZUJiYRiA0YeGl+7uBnuYtlux2/0vxJb4ey/Ndw7TzmBkwExmi5WBsPHN7hCniwFwe/ji9fkDwRADEI7wJRqLJxiIZMpFhxVI4/WiS8YhWfokc3k0sxfeFEVKhUI5XeFT1VwTM5rF69LRaPJpYdGytLyCdqsp+bQWpeNHC11+/pI3v//Qw4BOf+XNvyoDFP8v6xsim/SwbaGLWbZ3Kg3ZpceeGV0i+wcQLR7SYS0eHZ800c57yof2GR2tdTlnwC4u61cM0rWLjJcbBsdTuXUxYJtyl60yWPfysPvIQNnazScG7xlFURRFUZSOV1ZEFjz5VOjqAAAAAElFTkSuQmCC'\r\nlet bgSvg = 'data:image/svg+xml;base64,PHN2ZyBpZD0i5p+x54q2IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNSIgaGVpZ2h0PSIyMzYiIHZpZXdCb3g9IjAgMCAzNSAyMzYiPgogIDxtZXRhZGF0YT48P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+PC9tZXRhZGF0YT4KPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAyMDEwNTsKICAgICAgICBzdHJva2U6ICMyNjQ5Nzg7CiAgICAgICAgc3Ryb2tlLXdpZHRoOiAycHg7CiAgICAgICAgb3BhY2l0eTogMC44OwogICAgICB9CgogICAgICAuY2xzLTIgewogICAgICAgIGZpbGw6ICMxNjJjMzI7CiAgICAgICAgb3BhY2l0eTogMC43OwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cmVjdCBpZD0i55+p5b2iXzE1MDlf5ou36LSdXzMiIGRhdGEtbmFtZT0i55+p5b2iIDE1MDkg5ou36LSdIDMiIGNsYXNzPSJjbHMtMSIgeD0iMSIgeT0iMSIgd2lkdGg9IjMzIiBoZWlnaHQ9IjIzNCIgcng9IjEyIiByeT0iMTIiLz4KICA8cmVjdCBpZD0i55+p5b2iXzE1MDlf5ou36LSdXzMtMiIgZGF0YS1uYW1lPSLnn6nlvaIgMTUwOSDmi7fotJ0gMyIgY2xhc3M9ImNscy0yIiB4PSI3IiB5PSI3IiB3aWR0aD0iMjEiIGhlaWdodD0iMjI0IiByeD0iOCIgcnk9IjgiLz4KPC9zdmc+Cg=='\r\nvar category = [\r\n    \"东北\",\r\n    \"华东\",\r\n    \"华中\",\r\n    \"西南\",\r\n    \"华北\"\r\n];\r\nvar barData = [{\r\n        \"name\": \"低危\",\r\n        \"color\": \"#3ca418\",\r\n        \"value\": [\r\n            10,\r\n            41,\r\n            22,\r\n            92,\r\n            72\r\n        ]\r\n    },\r\n    {\r\n        \"name\": \"中危\",\r\n        \"color\": \"#31d0e9\",\r\n        \"value\": [\r\n            64,\r\n            40,\r\n            24,\r\n            97,\r\n            39\r\n        ]\r\n    },\r\n    {\r\n        \"name\": \"高危\",\r\n        \"color\": \"#ed902c\",\r\n        \"value\": [\r\n            69,\r\n            36,\r\n            58,\r\n            49,\r\n            90\r\n        ]\r\n    },\r\n    {\r\n        \"name\": \"危急\",\r\n        \"color\": \"#d8436b\",\r\n        \"value\": [\r\n            94,\r\n            7,\r\n            67,\r\n            33,\r\n            20\r\n        ]\r\n    }\r\n]\r\nlet seriesData = barData.map((d, i) => {\r\n    let arr = []\r\n    if (i > 0) {\r\n        let before = barData[i - 1]\r\n        arr = d.value.map((v, j) => {\r\n            let res = v\r\n            res += before.value[j]\r\n            d.value[j] = res\r\n            return res\r\n        })\r\n    } else {\r\n        arr = d.value\r\n    }\r\n    console.log(arr)\r\n    return {\r\n        name: d.name,\r\n        data: arr,\r\n        type: 'pictorialBar',\r\n        symbol: 'rect',\r\n        symbolSize: [40, 8],\r\n        barWidth: 10,\r\n        itemStyle: {\r\n            normal: {\r\n                barBorderRadius: 52,\r\n                color: d.color\r\n            }\r\n        },\r\n        stack: 'all',\r\n        symbolRepeat: true,\r\n        animationEasing: 'elasticOut',\r\n        animationDelay: function(dataIndex, params) {\r\n            return params.index * 30 * 1.1;\r\n        },\r\n        z: -i\r\n    }\r\n})\r\nlet backgroundData = [280, 280, 280, 280, 280]\r\noption = {\r\n    backgroundColor: '#000',\r\n    legend: {\r\n        data: barData.map((d) => d.name),\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    grid: {\r\n      top: 30,\r\n      left: 30,\r\n      right: 30,\r\n      bottom: 90\r\n    },\r\n    xAxis: {\r\n        data: category,\r\n        show: true,\r\n        axisLabel: {\r\n            color: '#fff',\r\n            formatter: (value, index) => {\r\n                return [\r\n                    '{national|}',\r\n                    '{title|'+ value + '}'\r\n                ].join('\\n')\r\n            },\r\n            rich: {\r\n                title: {\r\n                    color: '#eee',\r\n                    align: 'center',\r\n                    lineHeight: 10\r\n                },\r\n                national: {\r\n                    height: 30,\r\n                    backgroundColor: {\r\n                        image: nationalImg\r\n                    },\r\n                    lineHeight: 40\r\n                    \r\n                },\r\n            }\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n\r\n    },\r\n    yAxis: {\r\n        show: false,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    series: [].concat(\r\n    //     {\r\n    //     name: '背景',\r\n    //     type: 'bar',\r\n    //     barWidth: '50%',\r\n    //     data: backgroundData,\r\n    //     itemStyle: {\r\n    //         normal: {\r\n    //             color: 'rgba(255,255,255,0.1)',\r\n    //             borderColor: '#45A0CF'\r\n    //         }\r\n    //     },\r\n    //     zlevel: 9\r\n    // },\r\n    {\r\n        data: backgroundData,\r\n        type: 'pictorialBar',\r\n        symbol: 'image://' + bgSvg,\r\n        symbolOffset: ['-45%', 10],\r\n        z: -100\r\n    },\r\n    seriesData),\r\n    animation: true\r\n};","html":"","externalScripts":"","updaterUID":"bd-3493513353","theme":"","layout":"","viewCount":10074,"userName":"兔子林_Grace","commentCount":0,"starCount":49,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkch8_Xtf.png?v=1520841183386","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-pictorialBar"],"customTags":[],"updaterUserName":"兔子林_Grace"}}