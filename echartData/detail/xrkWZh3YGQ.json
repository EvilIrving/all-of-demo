{"status":0,"data":{"cid":"xrkWZh3YGQ","authorUid":"bd-2603984046","authorUserName":"手扶拖拉机life","title":"数据流动","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-07-04T03:16:08.000Z","lastUpdateTime":"2018-07-04T03:16:08.000Z","auth":2,"uid":"bd-2603984046","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-04T03:16:08.000Z","code":"const targetCoord = [90, 200]\r\nconst curveness = 0.25\r\nconst linesData = []\r\nconst oplinks=[]\r\n//中间圆形\r\nconst item = {\r\n    name: \"CMHK\",\r\n    value: targetCoord,\r\n    active:true,\r\n    symbol:'image://http://39.108.86.242:8080/cmhk.png',\r\n    portin:'40',  //转入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    portout:'30', //流出\r\n    symbolSize: 100,\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#8FC319'\r\n        }\r\n    },\r\n    \r\n    label: {\r\n        normal: {\r\n            show:true,\r\n            formatter:'+100',\r\n            fontSize: '14', \r\n            color:'black',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n}\r\n\r\n\r\n\r\n//周边圆形\r\nconst items = [{\r\n    name: \"其他\",\r\n    category: 0,//分组流入中\r\n    active: true,\r\n    symbol:'image://http://39.108.86.242:8080/hkt.png',\r\n    symbolSize: 80,\r\n    portin: '60',\r\n    portout:'30', //流出，相对于CMHK来说，是流入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#BC186E'\r\n        }\r\n    },\r\n    label: {\r\n        \r\n        normal: {\r\n            formatter:'+123',\r\n            fontSize: '14', \r\n            color:'#000',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n    \r\n    value: [135, 220]//座标\r\n}, {\r\n    name: \"数码通\",\r\n    category: 0,\r\n     symbolSize: 80,\r\n    active: true,\r\n    portin: '50', //对香港移动来说，是流出\r\n    portout:'30', //流出，相对于CMHK来说，是流入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    symbol:'image://http://39.108.86.242:8080/smt.png',\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#0087D2'\r\n        }\r\n    },\r\n    label: {\r\n        \r\n        normal: {\r\n            formatter:'-123',\r\n            fontSize: '14', \r\n            color:'#000',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n    value: [120, 135]\r\n}, {\r\n    name: \"PCCW\",\r\n    category: 1,//分组暂无流入\r\n    active: true,\r\n    symbolSize: 80,\r\n    portin: '50',\r\n    portout:'30', //流出，相对于CMHK来说，是流入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    symbol:'image://http://39.108.86.242:8080/pccw.png',\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#9DDAA2'\r\n        }\r\n    },\r\n     label: {\r\n        \r\n        normal: {\r\n            formatter:'-123',\r\n            fontSize: '14', \r\n            color:'#000',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n    value: [50, 170]\r\n},{\r\n    name: \"中国联通\",\r\n    category: 1,\r\n    active: true,\r\n    symbolSize: 80,\r\n    portin: '50',\r\n    portout:'30', //流出，相对于CMHK来说，是流入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    symbol:'image://http://39.108.86.242:8080/union.png',\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#E69F9D'\r\n        }\r\n    },\r\n     label: {\r\n        \r\n        normal: {\r\n            formatter:'-123',\r\n            fontSize: '14', \r\n            color:'#000',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n    value: [55, 280]\r\n}, {\r\n    name: \"3HK\",\r\n    active: true,\r\n    symbolSize: 80,\r\n    portin: '50',\r\n    portout:'30', //流出，相对于CMHK来说，是流入\r\n    yoy:'5',  //year on year 同比\r\n    mom:'-3', //month on month 环比\r\n    symbol:'image://http://39.108.86.242:8080/3hk.png',\r\n    category: 1,\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#D78F1C'\r\n        }\r\n    },\r\n    label: {\r\n        \r\n        normal: {\r\n            formatter:'-123',\r\n            fontSize: '14', \r\n            color:'#000',\r\n            position: ['28%','82%']\r\n        }\r\n    },\r\n    value: [110, 280]\r\n}]\r\n\r\nconst data = items.concat([item])\r\n\r\nitems.forEach(function(el) {\r\n    if (el.active) {\r\n        linesData.push([{\r\n            coord: el.value\r\n        }, {\r\n            coord: targetCoord\r\n        }]),\r\n         linesData.push([{\r\n           coord: targetCoord \r\n        }, {\r\n            coord: el.value\r\n        }])\r\n        oplinks.push(\r\n         {\r\n            target:el.name,\r\n            source:item.name,\r\n            portin:el.portin,  //相对CMHK来说，流出\r\n            yoy:el.yoy,\r\n            mom:el.mom,\r\n            lineStyle: {\r\n            normal: {\r\n                //color: '#000' ,\r\n                curveness: curveness,\r\n            }\r\n        }\r\n             \r\n         }),\r\n         oplinks.push(\r\n         {\r\n            target:item.name,\r\n            source:el.name,\r\n            portin:el.portout,  //相对CMHK来说，流入\r\n            yoy:el.yoy,\r\n            mom:el.mom,\r\n            lineStyle: {\r\n            normal: {\r\n                //color: '#000' ,\r\n                curveness: curveness,\r\n            }\r\n        }\r\n             \r\n         })\r\n        \r\n    }\r\n}),\r\n\r\nconsole.log(oplinks)\r\n\r\n\r\n\r\noption = {\r\n    backgroundColor:'#fff',\r\n    xAxis: {\r\n        show: false,\r\n        type: 'value'\r\n    },\r\n    yAxis: {\r\n        show: false,\r\n        type: 'value'\r\n    },\r\n    series: [\r\n        //圆圈动画\r\n        {\r\n        type:\"effectScatter\",\r\n        data:[{value:targetCoord,symbolSize:48}],\r\n        showEffectOn: 'render',\r\n        rippleEffect: {\r\n            period:9,\r\n            brushType: 'stroke',\r\n            scale:2.3\r\n        },\r\n        label: {\r\n            normal: {  \r\n                show: true,\r\n                formatter:\"{b}\",\r\n                fontSize:12,\r\n                color:\"white\",\r\n                offset:[0,0]\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: {\r\n                    type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0, color: 'rgba(143,195,31,0)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 0.4, color: 'rgba(143,195,31,0.1)' // 100% 处的颜色\r\n                    }, {\r\n                        offset: 0.9, color: 'rgba(143,195,31,0.3)' // 100% 处的颜色\r\n                    }, {\r\n                        offset: 1, color:'rgba(143,195,31,0.8)' // 100% 处的颜色\r\n                    }],\r\n                    globalCoord: true // 缺省为 false\r\n                },\r\n                shadowBlur: 0,\r\n                shadowColor: '#25fffb'\r\n            }\r\n        }\r\n    },\r\n        \r\n        {\r\n        type: 'graph',//graph,effectScatter\r\n        layout: 'none',\r\n        coordinateSystem: 'cartesian2d',\r\n        hoverAnimation: true,\r\n        //symbolSize: 100,//周边圆形大小\r\n        z: 3,\r\n        edgeLabel: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    fontSize: 9,\r\n                    fontFamily:'宋体',\r\n                    color:'#000'  //线上字的颜色\r\n                },\r\n                formatter: function(params) {\r\n                    console.log(params)\r\n                    let txt = ''\r\n                    if (params.data.portin !== undefined) {\r\n                        txt = params.data.portin\r\n                    }\r\n                    return txt\r\n                },\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'bottom',//['20%', '40%'],\r\n                color: '#C7C7C7'//#5e5e5e //字体颜色\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                shadowBlur: 0,\r\n                shadowColor: '#333'\r\n            },\r\n            emphasis: {\r\n\r\n            }\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                width: 1,\r\n            },\r\n        },\r\n        edgeSymbol: ['none', 'none'],\r\n        edgeSymbolSize: 1,//箭头大小\r\n        data: data,\r\n        links:oplinks\r\n        //categories: categories\r\n    }, {\r\n        name: 'A',\r\n        type: 'lines',\r\n        coordinateSystem: 'cartesian2d',\r\n        polyline: false,\r\n        z: 1,\r\n        effect: {\r\n            show: true,\r\n            smooth: false,\r\n            constantSpeed: 70,\r\n            trailLength: 0.005,\r\n            symbol: \"circle\",\r\n            color: 'rgba(55,155,255,0.5)',\r\n            symbolSize: 5\r\n        },\r\n        \r\n        lineStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0, color: '#000'\r\n                    }, {\r\n                        offset: 1, color: '#000'\r\n                    }], true),\r\n                width: 1,//线宽\r\n                //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。默认0.5\r\n                opacity: 0.05,\r\n                //线条的曲线程度，从0到1\r\n                curveness: 0.25\r\n            }\r\n        },\r\n        data: linesData\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"bd-2603984046","theme":"","layout":"","viewCount":76,"userName":"手扶拖拉机life","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrkWZh3YGQ.png?v=1530674169046","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title"],"customTags":[],"updaterUserName":"手扶拖拉机life"}}