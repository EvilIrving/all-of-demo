{"status":0,"data":{"cid":"xC7SqOQst","authorUid":"bd-101897118","authorUserName":"q***e","title":"溶解氧浓度及饱和率变化","description":"","latestVersion":18,"alwaysLatest":1,"createTime":"2019-11-11T07:01:49.000Z","lastUpdateTime":"2019-11-11T07:01:49.000Z","auth":2,"uid":"bd-101897118","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":18,"parentVersion":17,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-15T06:24:40.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1573457276101-gT-1NqnW.png';\rvar data = {\r    //x轴 时间\r    xAxis: ['2016年1月', '2016年2月', '2016年3月', '2016年4月', '2016年5月', '2016年1月', '2016年2月', '2016年3月', '2016年4月', '2016年5月', '2016年1月', '2016年2月', '2016年3月', '2016年4月', '2016年5月', '2016年6月', '2016年7月', '2016年8月', '2016年9月', '2016年10月', '2016年11月', '2016年12月', '2017年1月', '2017年2月', '2017年3月', '2017年4月', '2017年5月', '2017年6月', '2017年7月', '2017年8月', '2017年9月', '2017年10月', '2017年11月', '2017年12月'],\r    //折线图数值\r    lineData: [98, 108, 88, 82, 92, 96, 101, 104, 112, 100, 100, 101, 90, 90, 84, 89, 93, 100, 95, 101, 101, 103, 89, 103, 111, 110, 93, 87, 98, 103, 105, 100, 97, 103, 98, 110, 99, 90, 92, 93, 91, 94, 110, 108, 96, 99, 103, 102, 103, 100, 81, 82, 91, 99, 103, 105, 104, 114, 113, 106, 105, 96, 96, 91, 99, 96, 111, 92, 110, 122, 118, 102, 111, 90],\r    //柱状图数值\r    barData: [7.2, 8.2, 7.3, 7.4, 7.5, 8.1, 7.9, 7.1, 7.1, 6.9, 6.9, 6.9, 6.9, 7.5, 7.5, 7.5, 7.8, 8.1, 7.7, 6.9, 6.9, 6.7, 6.5, 7.1, 7.4, 7.3, 7.3, 6.9, 7.8, 7.8, 7.8, 7.9, 6.8, 6.9, 6.9, 7.5, 7.1, 7.3, 7.2, 7.8, 7.4, 7.4, 8.1, 7.6, 7.2, 6.9, 6.9, 7, 7.3, 7.4, 6.6, 6.4, 7.6, 8, 7.4, 7.4, 7, 7.1, 7.1, 7.1, 7.1, 7.1, 7.6, 7.3, 7.7, 8, 8.2, 7.3, 7.3, 7.4, 7.2, 7.6, 8, 6.9],\r    //折线标准线\r    lineMark: 90,\r    //柱状图标准线\r    barMark: 7.5\r};\r\r//柱状图颜色分区\r/*var area = [ //var color = ['#40E3F6', '#31B1E6', '#6888EF', '#9B68EF', '#E660F6']\r    {max: 7.5, color: '#31B1E6', lineMin: 90},//5及5以下\r    {max: 7.5, color: '#31B1E6', line},// 7.5及 7.5以下\r    {max: 10, color: '#6888EF'},//10及10以下\r    { color: '#9B68EF'} // 10以上\r];*/\r\r//根据数值匹配对应颜色\rfunction getBarColor(v1, v2) {\r    if (isNaN(v1) || isNaN(v2)) {\r        return '#ddd';\r    }\r    if (v1 < 7.5 && v2 >= 90) {\r        return '#31B1E6';\r    } else if (v1 >= 7.5 && v2 < 90) {\r        return '#6888EF';\r    } else if (v1 < 7.5 && v2 < 90) {\r        return '#9B68EF';\r    } else if (v1 >= 7.5 && v2 >= 90) {\r        return '#40E3F6';\r    }\r\r    /* for(var i = 0; i < area.length; i++){\r         var item = area[i];\r         if(v < item.max || !item.max ){\r             return item.color\r         }\r     }*/\r}\r//处理柱状图数据，添加颜色\rlet barData = [];\rdata.barData.forEach((v, i) => {\r    barData.push({\r        value: v,\r        itemStyle: {\r            normal: {\r                barBorderRadius: 8,\r                color: getBarColor(v, data.lineData[i])\r            }\r        }\r    });\r});\r\roption = {\r    backgroundColor: '#FFF',\r    grid: {\r        top: 80,\r        left: 50,\r        right: 120,\r        bottom: 100\r    },\r    toolbox: {\r        feature: {\r            saveAsImage: {}\r        }\r    },\r    color: ['#31B1E6', '#78b4ff'],\r    tooltip: {\r        trigger: 'axis'\r    },\r    legend: {//图例\r        top: 20,\r        itemWidth: 26,//图形宽度\r        itemHeight: 16,//图形高度\r        textStyle: {\r            fontSize: 18//文字大小\r        }\r    },\r   /* title: {\r        left: 'center',\r        text: '溶解氧浓度及饱和率变化'\r    },*/\r    xAxis: {\r        data: data.xAxis,\r        axisLabel: {\r            textStyle: {\r                fontSize: 16,\r                color: '#000'\r            },\r            rotate: '90',\r            interval: 5//中间间隔       \r        },\r    },\r    yAxis: [{\r            name: 'mg/l',\r            // min: 5,\r            max: 15,\r            splitLine: {\r                show: true,\r                lineStyle: {\r                    type: 'dashed',\r                    color: 'rgba(33,148,246,0.2)'\r                }\r            },\r            axisTick: {\r                show: false\r            },\r            splitArea: {\r                show: true,\r                areaStyle: {\r                    color: 'rgb(245,250,254)'\r                }\r            },\r            axisLabel: {\r                 textStyle: {\r                    fontSize: 16,\r                    color: '#000'\r                }\r            },\r            nameTextStyle: {\r                fontSize: 16,\r                color: '#000'\r            }\r\r        },\r        {\r            name: '%',\r            min: 25,\r            max: 125,\r            axisLabel: {\r                formatter: function(v){\r                    if(v === 120){\r                        return ''\r                    }\r                    return v;\r                },\r                 textStyle: {\r                    fontSize: 16,\r                    color: '#000'\r                }\r            },\r            nameTextStyle: {\r                fontSize: 16,\r                color: '#000'\r            }\r           \r        }\r    ],\r    series: [{\r        name: '溶解氧浓度',\r        type: 'bar',\r        yAxisIndex: 0,\r        barWidth: 6,\r        data: barData,\r        markLine: {\r            label: {\r                show: true,\r                formatter: '{b}：{c}'\r            },\r            lineStyle: {\r                type: 'solid',\r                width: 2\r            },\r            data: [{\r                name: '浓度Ⅰ类标准',\r                yAxis: data.barMark,\r                itemStyle: {\r                    normal: {\r                        color: '#ff6d9d'\r                    }\r                }\r            }]\r        }\r    }, {\r        name: '溶解氧饱和率',\r        type: 'line',\r        yAxisIndex: 1,\r        data: data.lineData,\r        symbol: 'circle',\r        symbolSize: 1,\r        lineStyle: {\r            width: 4,//折线宽度\r            color: 'rgb(222, 118, 223)',//颜色\r            shadowBlur: 12,\r            shadowColor: 'rgb(222, 118, 223,0.9)',\r            shadowOffsetX: 1,\r            shadowOffsetY: 1\r        },\r        itemStyle: {\r            color: 'rgb(222, 118, 223)',\r            borderWidth: 1,\r            borderColor: '#FFF'\r        },\r        label: {\r            show: true,\r            distance: 1,\r            normal: {\r                show: true,\r                //offset: [17, 5],\r                offset: [25, -2],\r                backgroundColor: {\r                    image: uploadedDataURL\r                },\r                color: '#FFF',\r                padding: [8, 20, 8, 6],\r                //width:60,\r                height: 36,\r                formatter: function(params) {\r                    var idx = params.dataIndex;\r                    var pre = data.lineData[idx - 1];\r                    var next = data.lineData[idx + 1];\r                    if (pre && next &&\r                        (\r                            (params.data > pre && params.data > next) ||\r                            (params.data < pre && params.data < next)\r                        )\r                    ) {\r                        var name = params.name;\r                        var value = params.data;\r                        //var str = value;\r                        var str = name + '\\n饱和率：' + value;\r                        return str;\r                    }\r                    return '';\r\r                },\r                rich: {\r                    bg: {\r                        backgroundColor: {\r                            image: uploadedDataURL\r                        },\r                        width: 78,\r                        //height:42,\r                        color: '#FFF',\r                        padding: [20, 0, 20, 10]\r                    },\r                    br: {\r                        width: '100%',\r                        height: '100%'\r                    }\r\r                }\r            }\r        },\r        markLine: {\r            label: {\r                show: true,\r                formatter: '{b}：{c}'\r            },\r            lineStyle: {\r                type: 'solid',\r                width: 2\r            },\r            data: [{\r                name: '饱和率Ⅰ类标准',\r                yAxis: data.lineMark,\r                itemStyle: {\r                    normal: {\r                        color: '#79E73C'\r                    }\r                }\r            }]\r        }\r    }]\r};","html":"","externalScripts":"","updaterUID":"bd-101897118","theme":"","layout":"","viewCount":759,"userName":"q***e","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xC7SqOQst.png?v=1573799081048","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markLine","series-bar","series-line","toolbox","tooltip"],"customTags":[],"updaterUserName":"q***e"}}