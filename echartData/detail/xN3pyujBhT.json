{"status":0,"data":{"cid":"xN3pyujBhT","authorUid":"obd-oj1my7-HsRKGCl-ncA96nmk3uA3FhDb","authorUserName":"y***g","title":"条形图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-03-18T05:45:24.000Z","lastUpdateTime":"2021-03-18T05:45:24.000Z","auth":2,"uid":"obd-oj1my7-HsRKGCl-ncA96nmk3uA3FhDb","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-18T05:45:24.000Z","code":"\r\n//var getname=<#=GRID60.A1$#>;\r\n//var getseries = ['学院(部)转出比率', '学院(部)转入比率'];\r\n//var getvalue=[<#=GRID60.B1$#>,<#=GRID60.C1$#>];\r\n\r\n//源数据\r\nvar getname = [\"教育\", \"心理\", \"政法\", \"经管\", \"商学院\", \"建筑工程\", '艺术设计', '士官']\r\nvar getseries = ['学院(部)转出比率', '学院(部)转入比率']\r\nvar getvalue = [\r\n   [11, 22, 33, 44, 55, 66, 77, 88],\r\n    [55, 44, 66, 25, 44, 13, 22,80]\r\n]\r\n\r\n//转换为map操作\r\nvar data = getseries.map((item, index) => {\r\n    return {\r\n        name: getseries[index],\r\n        value: getvalue[index]\r\n    }\r\n})\r\n\r\nvar barWidth = 20\r\n//var imgurl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAADHQAAAAyCAYAAACHgW2RAAAQvklEQVR4Xu3dXYildR0H8N//HBZ39zzncV1Y2W62bhavlroS9qrIq8L1pTLNSCo2DERoQ0HIXoRCaS8KjEXI0kAt03wPQfBCEIRCEKTwIhFKpHYl95znmR3X5swvRjA0X3Z25syZc858nqth5v//vXyeuf3ylNhCz2AwuLDT6TwSER/bQmtblQABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIzILAG6WUK6qqenoWhl3vjGW9BWblftM0V0TEbyJix6zMbE4CBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQILDFBP6TmdfVdf3Led977gMdmVnatr05Im6JiLnfd97/Ye1HgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAvMvkJk/6/f7N5ZSRvO67VwHHDJze9u2d0bEV+f1BdqLAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMo0Ap5YnFxcWr9+zZ08zlfvO41MpOTdOcHxGPRMTBed3RXgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYM4FXux2uxfv3Lnz7/O251x+oaNt2wMR8VhmfmLeXph9CBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAFhP4V2ZeXtf1c/O099wFOhYWFj63vLx8f0T05+lF2YUAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECGxhgTdLKd+squq382IwV4GOtm2PZObRiOjOywuyBwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPC2QEbEj6uq+mEpZeXnmX7mItCRmdvatr09Iq6d6bdheAIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQOBMAvdXVfWNUsrimQ5O899nPtBx8uTJ87rd7gMRcdE0Q5uNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQGI9AKeVPEXFpVVX/HE/FyVeZ6UDHYDDY3+l0Ho+ICyZPpyMBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwiQL/KKVcUlXVC5s4w5pbz2ygo2maT0fEQxGxe83bu0iAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMskCbmVfXdb3ysYiZemYy0DEcDg+XUo5FxLaZ0jYsAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMG6B5cy8qa7ro+MuvJH1ZirQkZndhYWFWzPzxo1EUZsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYOYE7q6q6rpTy1ixMPjOBjuPHj1c7d+68LzMPzQKsGQkQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIGJCzyzvLz8hXPPPfffE+98lg1nItBx6tSpfaPR6NGI+NRZ7uc4AQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsLUE/rbyMYm6rl+a5rWnPtAxGAwu7HQ6K2GOvdMMaTYCBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgagTeKKVcUVXV01Mz0f8NMtWBjqZproqIX0fEjmkFNBcBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlQJLEXF9v9+/Yxqnm8pAR2aWtm1vjohbImIqZ5zGl2kmAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBA4H0CP6+q6oZSymiabKYuLJGZ29u2vSsiVr7O4SFAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIrEsgM588ffr0lXv27GnWVWiMl6cq0NG27d7MfCgiDo5xR6UIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAi+ORqNLd+3a9co0UExNoKNt2wOZ+URE7JsGGDMQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECcydwPDMvq+v6uc3ebCoCHcPh8FAp5d6I6G82iP4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAXAu8WUr5VlVV92zmlpse6Gjb9khmHo2I7mZC6E2AAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsGYGMiJ9UVfWDUsrKzxN/Ni3QkZnb2rY9FhGHJ761hgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBiAerqrqmlLI4aYxNCXQMBoPdnU7n9xFx0aQX1o8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg8I5AZv652+1e1uv1XpukysQDHYPBYH+n0/ljROyf5KJ6ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQ+RODVUsqhqqpemJTQRAMdTdN8NiIeiIjdk1pQHwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAKgTazLymruuHV3F23UcmFugYDoeHSynHImLbuqdWgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwfoHlzLypruuj4y/93oobHujIzG7TND8tpXx3o5dRnwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwXoFSyt29Xu/aUspb6631Yfc3NNBx4sSJ/o4dO+7NzEMbtYC6BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIENEHgmM79U1/XrG1A7NizQcerUqX2j0eiJiDiwEYOrSYAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBDYYIGXM/Piuq5fGnefDQl0DIfDg6WUhyJi77gHVo8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMEGBk6WUK6uqemqcPcce6Gia5qqIuCsito9zULUIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABApsksBQR1/f7/TvG1X9sgY7MLG3b/igivh8RY6s7rkXVIUCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAisU+AXVVV9p5QyWmed8QQvMnN727YrX+VY+TqHhwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlwKZ+eTS0tJXdu/ePVjPguv+kkbbtnsj4tHMvHA9g7hLgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEJgRgb+MRqNDu3btemWt864r0NG27Scz87GI2LfWAdwjQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECMygwPHM/GJd18+uZfY1BzqGw+GhUsp9EVGtpbE7BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEZFzhdSjlcVdU9Z7vHmgIdbdvekJm3RUT3bBs6T4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYI4EspdzW6/W+V0rJ1e51VoGOzNzWtu2xiDi82gbOESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgS2gMCDCwsLX9+7d+/CanZddaBjMBjs7nQ6f4iIz6ymsDMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0m8Hyn07mk1+u9dqa9VxXoGA6HF5RSHo+I/Wcq6O8ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0s8Gqn07ms1+s9/1EGZwx0tG17UWY+EBHnbWFMqxMgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIEViVQSllYXl7+Wl3XD3/YhY8MdDRNc21E3B4R21bV0SECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEVgeXMvLmu61s/iOMDAx2Z2W2a5mgp5QhDAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBtQmUUu7u9XrfLqWcfneF9wU6Tpw40T/nnHN+V0r5/NpauUWAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPAugWcz8/K6rl9/53fvCXQsLi5+fGlp6fGIOICNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgbAIvR8Ql/X7/rysV/xfoGA6HB0spj0TE+WNrpRABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMA7AoNSyperqnrq7UBH27ZXZ+avImI7IwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgQ0TWIqII/8FUR7Qhy+AhvIAAAAASUVORK5CYII='\r\nvar imgurl = 'data:image/png;base64,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'\r\n\r\nvar imgwidth = myChart.getWidth()*0.96\r\n\r\n//柱图body颜色\r\nvar colorsBottom = {\r\n    '学院(部)转出比率': new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n        {\r\n            offset: 0,\r\n            color: \"#61E9C1\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            //color: \"rgba(122, 240, 205, 1)\"\r\n            color:\"#0BC991\"\r\n        }\r\n        ]),\r\n\r\n    '学院(部)转入比率': new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n        {\r\n            offset: 0,\r\n            color: \"#4EA4F3\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            //color: \"rgba(128, 195, 255, 1)\"\r\n            color: \"#0A79DF\"     \r\n        }\r\n\r\n        ])\r\n}\r\n\r\n//柱图顶  淡色圆圈\r\nvar colorsTop = {\r\n    '学院(部)转出比率': 'rgba(122, 240, 205, 1)',\r\n    '学院(部)转入比率': 'rgba(128, 195, 255, 1)',\r\n/*    '学院(部)转出比率': 'rgba(97, 233, 193, 1)',\r\n    '学院(部)转入比率': 'rgba(10, 121, 223, 1)',*/\r\n}\r\nvar colorsTip = {\r\n    '学院(部)转出比率': 'rgba(122, 240, 205, .2)',\r\n    '学院(部)转入比率': 'rgba(128, 195, 255, .2)',\r\n/*    '学院(部)转出比率': 'rgba(97, 233, 193, 1)',\r\n    '学院(部)转入比率': 'rgba(10, 121, 223, 1)',*/\r\n}\r\n//线图颜色变量\r\nvar colorsTopLine = {\r\n    '学院(部)转出比率': 'orange',\r\n    '学院(部)转入比率': '#db4040',\r\n}\r\nvar colorsLineColor = {\r\n    '学院(部)转出比率': 'orange',\r\n    '学院(部)转入比率': '#db4040',\r\n}\r\n//获取legend：对map中的每一个元素，设定一个legend，并衍生出其它的legend\r\nfunction getLegend(){\r\n\r\n    let legendData = []\r\n    \r\n    getseries.map(item=>{\r\n\r\n        legendData.push({\r\n\r\n            name:item,\r\n            icon:'roundRect',\r\n\r\n        })\r\n\r\n        legendData.push({\r\n\r\n            name:item.replace('学院(部)','')+'均值',\r\n            icon:'line',\r\n\r\n        })\r\n\r\n    })\r\n\r\n    return legendData\r\n}\r\n\r\n//未知用途数组\r\nvar colors = [\r\n\r\n    new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n\r\n            offset: 0,\r\n            color: \"rgba(10, 121, 223, 1)\"\r\n\r\n        },\r\n        {\r\n\r\n            offset: 1,\r\n            color: \"rgba(78, 164, 243, 1)\"\r\n\r\n        }\r\n\r\n    ]), new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n\r\n            offset: 0,\r\n            color: \"rgba(97, 233, 193, 1)\"\r\n        },\r\n        {\r\n\r\n            offset: 1,\r\n            color: \"rgba(11, 201, 145, 1)\"\r\n        }\r\n\r\n    ]), new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n\r\n            offset: 0,\r\n            color: \"rgba(255, 189, 111, 1)\"\r\n        },\r\n\r\n        {\r\n\r\n            offset: 1,\r\n            color: \"rgba(255, 161, 38, 1)\"\r\n        }\r\n\r\n    ])\r\n\r\n]\r\n\r\nvar option = chuliData(data, barWidth)\r\n\r\nfunction chuliData(data, barWidth) {\r\n\r\n    let baseWidth = data.length == 3 ? 0 : 1.5 / data.length\r\n    console.log(data)\r\n\r\n    var seriesData = []\r\n\r\n    //柱图详细设计\r\n    data.forEach((item, i) => {\r\n\r\n        var item = {\r\n\r\n            name: data[i].name,\r\n            \r\n            type: 'bar',\r\n\r\n            barWidth: barWidth,\r\n\r\n            barGap: '50%',\r\n\r\n            data: data[i].value,\r\n\r\n            itemStyle:{\r\n\r\n                normal:{\r\n\r\n                    barBorderRadius: [0, 0, 9, 9],\r\n                    color: colorsBottom[data[i].name],\r\n                    \r\n                    //柱图顶显示数据\r\n                    label: {\r\n                    show: true,\r\n                    position: 'top',\r\n                    align: 'center',\r\n                    lineHeight: 28,\r\n                    textStyle: { //数值样式\r\n                        fontSize: 16,\r\n                    },\r\n                    formatter: item => {\r\n                        return `{circle|${item.data}}`\r\n                    },\r\n                    rich: {\r\n                        circle: {\r\n                            width: 28,\r\n                            //柱图顶数字颜色控制\r\n                            backgroundColor: colorsTip[data[i].name],\r\n                            color: '#FFFFFF',\r\n                           // backgroundColor: colorssumbac[data[i].name],\r\n                            color:colorsTop[data[i].name],\r\n                            borderRadius: 3,\r\n                            fontSize: 14,\r\n                            padding: [0, 0, 2, 0]\r\n                        }\r\n                    }\r\n\r\n                },\r\n                    \r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //柱底圆片\r\n        var itemBottom = { \r\n\r\n            name: data[i].name,\r\n\r\n            type: \"pictorialBar\",\r\n\r\n            symbolSize: [barWidth, barWidth * 0.5],\r\n\r\n            symbolOffset: [baseWidth * barWidth + (i - 1) * barWidth * 1.5, barWidth * 0.25],\r\n\r\n            z: 12,\r\n\r\n            silent: true,\r\n\r\n            barWidth:20,\r\n\r\n            itemStyle: {\r\n\r\n                \"normal\": {\r\n\r\n                    color: colorsBottom[item.name]\r\n\r\n                }\r\n\r\n            },\r\n\r\n            data: data[i].value\r\n\r\n        }\r\n\r\n        //柱顶圆片\r\n        var itemTop = {\r\n\r\n            name: data[i].name,\r\n\r\n            type: \"pictorialBar\",\r\n\r\n            symbolSize: [barWidth, barWidth * 0.75],\r\n\r\n            symbolOffset: [baseWidth * barWidth + (i - 1) * barWidth * 1.5, -barWidth * 0.45],\r\n\r\n            z: 12,\r\n\r\n            symbolPosition: \"end\",\r\n\r\n            silent: true,\r\n\r\n            itemStyle: {\r\n\r\n                \"normal\": {\r\n\r\n                    color: colorsTop[item.name]\r\n                }\r\n\r\n            },\r\n\r\n            data: data[i].value\r\n\r\n        }\r\n\r\n        //下面顺序会影响标题的颜色\r\n        seriesData.push(item)\r\n        seriesData.push(itemTop)\r\n        //seriesData.push(itemBottom)\r\n\r\n    })\r\n\r\n    //线图详细设计\r\n    let lineSeries = data.map(item => {\r\n        \r\n        return {\r\n            name: item.name.replace('学院(部)','')+'均值',\r\n            type: 'line',\r\n            xAxisIndex: 0,\r\n            data: item.value,\r\n            lineStyle: {\r\n\r\n                type: 'dashed',\r\n                color: 'rgba(0,0,0,0)'\r\n\r\n            },\r\n            symbolSize: 0.0000001,\r\n            silent: true,\r\n            label: {\r\n                show: false\r\n            },\r\n            \r\n            //图例颜色控制\r\n            //color: '#FFA387',\r\n            color: colorsTopLine[item.name],\r\n            symbol: 'none',\r\n            markLine: {\r\n                silent: true,\r\n                data: [{\r\n                    type: 'average',\r\n                    name: '平均值'\r\n                }],\r\n\r\n                lineStyle: {\r\n                    //color: '#FFA387',\r\n                    color: colorsLineColor[item.name],\r\n                    textStyle: {\r\n                        color: 'red',\r\n                    }\r\n                },\r\n                symbol: 'none',\r\n                label: {\r\n                    show: true,\r\n                    position: 'end',\r\n                    align: 'center',\r\n                    lineHeight: 28,\r\n                    padding: [-10, 0, 0, -50],\r\n                    textStyle: { //数值样式\r\n                        fontSize: 16,\r\n                    },\r\n\r\n                    formatter: item => {\r\n                        console.log('markLine', item)\r\n                        return `{circle|${item.value}}\\n`\r\n                    },\r\n\r\n                    rich: {\r\n                        \r\n                        circle: {\r\n                            //不同线不同颜色\r\n                            //backgroundColor: 'rgba(255, 99, 136, 1)',\r\n                            backgroundColor: colorsTopLine[item.name],\r\n                            color: '#FFFFFF',\r\n                            borderRadius: 3,\r\n                            fontSize: 14,\r\n                            padding: [0, 5, 2, 5]\r\n                        },\r\n                        mb: {\r\n                            padding: [0, 0, 20, 0]\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            markArea: {\r\n                data: [\r\n                    [{\r\n\r\n                        yAxis: 'average',\r\n\r\n                        itemStyle: {\r\n\r\n                            color: '#FFA387',\r\n\r\n                            opacity: 0.1\r\n\r\n                        }\r\n\r\n                    }, {\r\n\r\n                        yAxis: '0'\r\n\r\n                    }]\r\n\r\n                ],\r\n\r\n            }\r\n\r\n        }\r\n\r\n    })\r\n    \r\n    var sum1 = 0;\r\n    var sum2 = 0;\r\n    for (var i = 0; i < lineSeries[0].data.length; i++) {\r\n        sum1 = sum1+lineSeries[0].data[i];\r\n    }\r\n    for (var i = 0; i < lineSeries[1].data.length; i++) {\r\n        sum2 = sum2+lineSeries[1].data[i];\r\n    }\r\n    var average1 = sum1 / lineSeries[0].data.length;\r\n    var average2 = sum2 / lineSeries[1].data.length;\r\n    \r\n    var option = {\r\n\r\n        color: colors,\r\n        \r\n        \r\n        //鼠标显示\r\n        tooltip: {\r\n\r\n            show:true,\r\n\r\n            //trigger: 'item',\r\n\r\n            trigger: 'axis',\r\n\r\n            axisPointer: {\r\n\r\n               type: 'none'\r\n\r\n            },\r\n             backgroundColor : 'rgba(21, 64, 92, 0.9)',\r\n             formatter: function(params) {\r\n                var str = ''; //声明一个变量用来存储数据\r\n                str += '<div>' + params[0].name + '</div>';\r\n                for (var i = 0; i < params.length; i++) {\r\n                    \r\n                    str = '<span>' + params[0].name + \r\n                    '</span></br>'+\r\n                    \r\n                    '<span style=\"display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#61E9C1;color:#fff;border-radius:30%;\"></span>'+\r\n                    '<span>&nbsp&nbsp学院(部)转出比率：</span>'+\r\n                    '<span style=\"display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);\">'+\r\n                    getvalue[0][params[i].dataIndex]+\r\n                    '</span></br>'+\r\n                    \r\n                    '<span style=\"display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#0A79DF;color:#fff;border-radius:30%;\"></span>'+\r\n                    '<span>&nbsp&nbsp学院(部)转入比率：</span>'+\r\n                    '<span style=\"display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);\">'+\r\n                    getvalue[1][params[i].dataIndex]+\r\n                    '</span></br>'+\r\n                    \r\n                    '<span style=\"display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:orange;color:#fff;border-radius:30%;\"></span>'+\r\n                    '<span>&nbsp&nbsp转出比率均值：</span>'+\r\n                    '<span style=\"display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);\">'+\r\n                    average1.toFixed(2)+\r\n                    '</span></br>'+\r\n                    \r\n                    '<span style=\"display:inline-block;float:left;width:12px;height:12px;margin-top:5px;background:#db4040;color:#fff;border-radius:30%;\"></span>'+\r\n                    '<span>&nbsp&nbsp转入比率均值：</span>'+\r\n                    '<span style=\"display:block;width:60px;float:right;text-align:right;color:rgba(0, 255, 252, 1);\">'+\r\n                    average2.toFixed(2)+\r\n                    '</span></br>';\r\n                }\r\n                return str;\r\n            }\r\n             \r\n        },\r\n\r\n        grid: {\r\n        top: '33',\r\n        right: '15',\r\n        left: '50',\r\n        bottom: '55'\r\n    },\r\n\r\n        //图标详细设置\r\n        legend: {\r\n\r\n            show: true,\r\n\r\n            selectedMode: true,\r\n\r\n            orient: 'horizontal',\r\n            right: 20,\r\n\r\n            itemWidth: 16,\r\n\r\n            itemHeight: 16,\r\n\r\n            textStyle: {\r\n\r\n                //图例文字颜色\r\n                color: 'rgba(102, 102, 102, 1)',\r\n                fontSize: 14\r\n\r\n            },\r\n\r\n            data: getLegend()\r\n\r\n        },\r\n\r\n        graphic: {\r\n\r\n            type: 'image',\r\n\r\n            id: 'logo',\r\n\r\n             left: 50,\r\n            right:30,\r\n\r\n            bottom: 45,\r\n\r\n            z: -1,\r\n\r\n\r\n            style: {\r\n\r\n                image: imgurl,\r\n\r\n                width: imgwidth,\r\n\r\n                height: 50,\r\n\r\n            }\r\n\r\n        },\r\n\r\n        xAxis: [{\r\n\r\n            data: getname,\r\n\r\n            axisLabel: {\r\n                formatter: function(value) {\r\n\r\n                    var ret = \"\"; //拼接加\\n返回的类目项  \r\n\r\n                    var maxLength = 4; //每项显示文字个数  \r\n\r\n                    var valLength = value.length; //X轴类目项的文字个数  \r\n\r\n                    var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数  \r\n\r\n                    if (rowN > 1) //如果类目项的文字大于3,\r\n\r\n                    {\r\n\r\n                        for (var i = 0; i < rowN; i++) {\r\n\r\n                            var temp = \"\"; //每次截取的字符串  \r\n\r\n                            var start = i * maxLength; //开始截取的位置  \r\n\r\n                            var end = start + maxLength; //结束截取的位置  \r\n\r\n                            //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧  \r\n                            temp = value.substring(start, end) + \"\\n\";\r\n\r\n                            ret += temp; //凭借最终的字符串  \r\n\r\n                        }\r\n\r\n                        return ret;\r\n\r\n                    } else {\r\n\r\n                        return value;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                margin: 20,\r\n\r\n                color: '#666666',\r\n\r\n                textStyle: {\r\n\r\n                    fontSize: 13\r\n\r\n                },\r\n\r\n                axisLine: {\r\n\r\n                    lineStyle: {\r\n\r\n                        color: '#B0C5DB',\r\n\r\n                    }\r\n                },\r\n\r\n                axisTick: {\r\n\r\n                    show: false\r\n\r\n                },\r\n\r\n            },\r\n\r\n            axisLine: {\r\n\r\n                show: false //不显示x轴\r\n\r\n            },\r\n\r\n            axisTick: {\r\n\r\n                show: false //不显示刻度\r\n\r\n            },\r\n\r\n            boundaryGap: true,\r\n\r\n            splitLine: {\r\n\r\n                show: false,\r\n\r\n                width: 0.08,\r\n\r\n                lineStyle: {\r\n\r\n                    type: \"solid\",\r\n\r\n                    color: \"#03202E\"\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }],\r\n\r\n        yAxis: [{name: '%',\r\n\r\n        nameTextStyle: {\r\n\r\n            color: '#999999',\r\n\r\n            fontSize: 13,\r\n\r\n            padding: [0, 0, 0, 20]\r\n\r\n        },\r\n\r\n\r\n        axisLabel: {\r\n\r\n            color: '#666666',\r\n\r\n            textStyle: {\r\n\r\n                fontSize: 13\r\n\r\n            },\r\n\r\n        },\r\n\r\n        axisLine: {\r\n\r\n            show: false\r\n\r\n        },\r\n\r\n        axisTick: {\r\n\r\n            show: false\r\n\r\n        },\r\n\r\n        splitLine: {\r\n\r\n            lineStyle: {\r\n\r\n                color: '#CCDBEB',\r\n\r\n                type: 'dashed',\r\n\r\n                opacity: 0.5\r\n\r\n            }\r\n        }\r\n\r\n        }],\r\n\r\n        series: [...seriesData, ...lineSeries]\r\n\r\n    };\r\n\r\n    return option\r\n\r\n}\r\n\r\n// console.log(seriesData)\r\n\r\nmyChart.setOption(option);\r\n\r\nmyChart.on('legendselectchanged', function(obj) {\r\n\r\n    const selectedList = []\r\n\r\n    data.forEach((item, i) => {\r\n\r\n        if (obj['selected'][item['name']]) {\r\n\r\n            selectedList.push(item)\r\n\r\n        }\r\n\r\n    })\r\n\r\n    var option = chuliData(selectedList, 30)\r\n\r\n    myChart.setOption(option);\r\n\r\n});\r\n","html":"","externalScripts":"","updaterUID":"obd-oj1my7-HsRKGCl-ncA96nmk3uA3FhDb","theme":"","layout":"","viewCount":162,"userName":"y***g","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xN3pyujBhT.png?v=1616046324693","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","legend","markArea","markLine","series-bar","series-line","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"y***g"}}