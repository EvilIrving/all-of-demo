{"status":0,"data":{"cid":"xr1XLo-V5g","authorUid":"bd-2568493834","authorUserName":"yungpheng","title":"格式化数据的简单迁徙图","description":"格式化数据，减少代码","latestVersion":1,"alwaysLatest":1,"createTime":"2017-03-01T08:50:18.000Z","lastUpdateTime":"2017-03-01T08:50:18.000Z","auth":2,"uid":"bd-2568493834","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.4.0","versionCreateTime":"2017-03-01T08:50:18.000Z","code":"var geoCoordMap = {\r\n        '长春': [125.8154, 44.2584],\r\n        '长沙': [113.0823, 28.2568],\r\n        '贵阳': [106.6992, 26.7682],\r\n        '西安': [109.1162, 34.2004],\r\n        '深圳': [114.5435, 22.5439],\r\n        '济南': [117.1582, 36.8701],\r\n        '海口': [110.3893, 19.8516],\r\n        '沈阳': [123.1238, 42.1216],\r\n        '武汉': [114.3896, 30.6628],\r\n        '昆明': [102.9199, 25.4663],\r\n        '杭州': [119.5313, 29.8773],\r\n        '成都': [103.9526, 30.7617],\r\n        '拉萨': [91.1865, 30.1465],\r\n        '天津': [117.4219, 39.4189],\r\n        '合肥': [117.29, 32.0581],\r\n        '呼和浩特': [111.4124, 40.4901],\r\n        '哈尔滨': [127.9688, 45.368],\r\n        '北京': [116.4551, 40.2539],\r\n        '南京': [118.8062, 31.9208],\r\n        '南宁': [108.479, 23.1152],\r\n        '南昌': [116.0046, 28.6633],\r\n        '乌鲁木齐': [87.9236, 43.5883],\r\n        '上海': [121.4648, 31.2891]\r\n    };\r\n\r\n    var data = [{\r\n        name: '长春',\r\n        value: 90\r\n    }, {\r\n        name: '长沙',\r\n        value: 10\r\n    }, {\r\n        name: '贵阳',\r\n        value: 20\r\n    }, {\r\n        name: '西安',\r\n        value: 20\r\n    }, {\r\n        name: '深圳',\r\n        value: 20\r\n    }, {\r\n        name: '济南',\r\n        value: 50\r\n    }, {\r\n        name: '海口',\r\n        value: 58\r\n    }, {\r\n        name: '沈阳',\r\n        value: 64\r\n    }, {\r\n        name: '武汉',\r\n        value: 68\r\n    }, {\r\n        name: '昆明',\r\n        value: 45\r\n    }, {\r\n        name: '杭州',\r\n        value: 68\r\n    }, {\r\n        name: '成都',\r\n        value: 49\r\n    }, {\r\n        name: '拉萨',\r\n        value: 66\r\n    }, {\r\n        name: '天津',\r\n        value: 86\r\n    }, {\r\n        name: '合肥',\r\n        value: 58\r\n    }, {\r\n        name: '呼和浩特',\r\n        value: 59\r\n    }, {\r\n        name: '哈尔滨',\r\n        value: 95\r\n    }, {\r\n        name: '北京',\r\n        value: 68\r\n    }, {\r\n        name: '南京',\r\n        value: 56\r\n    }, {\r\n        name: '南宁',\r\n        value: 89\r\n    }, {\r\n        name: '南昌',\r\n        value: 48\r\n    }, {\r\n        name: '乌鲁木齐',\r\n        value: 49\r\n    }, {\r\n        name: '上海',\r\n        value: 78\r\n    }];\r\n\r\n    function formtGCData(geoData, data, srcNam, dest) {\r\n        var tGeoDt = [];\r\n        if (dest) {\r\n            for (var i = 0, len = data.length; i < len; i++) {\r\n                if (srcNam != data[i].name) {\r\n                    tGeoDt.push({\r\n                        coords: [geoData[srcNam], geoData[data[i].name]]\r\n                    });\r\n                }\r\n            }\r\n        } else {\r\n            for (var i = 0, len = data.length; i < len; i++) {\r\n                if (srcNam != data[i].name) {\r\n                    tGeoDt.push({\r\n                        coords: [geoData[data[i].name], geoData[srcNam]]\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        return tGeoDt;\r\n    }\r\n\r\n    function formtVData(geoData, data, srcNam) {\r\n        var tGeoDt = [];\r\n        for (var i = 0, len = data.length; i < len; i++) {\r\n            var tNam = data[i].name\r\n            if (srcNam != tNam) {\r\n                tGeoDt.push({\r\n                    name: tNam,\r\n                    value: geoData[tNam]\r\n                });\r\n            }\r\n\r\n        }\r\n        tGeoDt.push({\r\n            name: srcNam,\r\n            value: geoData[srcNam],\r\n            symbolSize: 8,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'red',\r\n                    borderColor: '#000'\r\n                }\r\n            }\r\n        });\r\n        return tGeoDt;\r\n    }\r\n\r\n    //var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\n    var planePath = 'arrow';\r\n\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    title: {\r\n        text: '格式化数据的简单迁徙图',\r\n        left: '5',\r\n        top: '10px',\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: 'rgba(100,149,237,1)',\r\n                borderWidth: 0.5,\r\n                areaStyle: {\r\n                    color: '#1b1b1b'\r\n                }\r\n            }\r\n        }\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n    },\r\n    geo: {\r\n        map: 'china',\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true,\r\n        silent: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#37376e',\r\n                borderColor: '#000'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n\r\n            type: 'lines',\r\n            zlevel: 2,\r\n            effect: {\r\n                show: true,\r\n                period: 6,\r\n                trailLength: 0.1,\r\n                color: '#db9982',\r\n                symbol: planePath,\r\n                symbolSize: 8\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#a6c84c',\r\n                    width: 1,\r\n                    opacity: 0.4,\r\n                    curveness: 0.2\r\n                }\r\n            },\r\n            data: formtGCData(geoCoordMap, data, '长沙', true)\r\n        },\r\n            {\r\n\r\n                type: 'lines',\r\n                zlevel: 2,\r\n                effect: {\r\n                    show: true,\r\n                    period: 6,\r\n                    trailLength: 0.1,\r\n                    color: 'maroon',\r\n                    symbol: planePath,\r\n                    symbolSize: 8\r\n                },\r\n                lineStyle: {\r\n                    normal: {\r\n                        color: '#a6c84c',\r\n                        width: 1,\r\n                        opacity: 0.4,\r\n                        curveness: 0.2\r\n                    }\r\n                },\r\n                data: formtGCData(geoCoordMap, data, '长沙', false)\r\n            },\r\n            {\r\n\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                rippleEffect: {\r\n                    period: 4,\r\n                    scale: 2.5,\r\n                    brushType: 'stroke'\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: 'right',\r\n                        formatter: '{b}'\r\n                    }\r\n                },\r\n                symbolSize: 5,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#0D6695',\r\n                        borderColor: 'gold'\r\n                    }\r\n                },\r\n\r\n                data: formtVData(geoCoordMap, data, '长沙')\r\n            }]\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-2568493834","theme":"","layout":"","viewCount":41149,"userName":"yungpheng","commentCount":12,"starCount":68,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xr1XLo-V5g.png?v=1488358219674","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"yungpheng"}}