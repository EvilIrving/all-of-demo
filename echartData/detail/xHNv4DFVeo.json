{"status":0,"data":{"cid":"xHNv4DFVeo","authorUid":"bd-3171977082","authorUserName":"簡***茬","title":"河地市","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-05-17T06:34:35.000Z","lastUpdateTime":"2021-05-17T06:34:35.000Z","auth":2,"uid":"bd-3171977082","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-17T07:12:49.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1621233061320-EE4u68dTg.json\";\n\n$.get(uploadedDataURL, (res) => {\n    var mapData = JSON.parse(res);\n    echarts.registerMap('hedi', mapData);\n\n    var centerMap = {};\n    if (mapData && mapData.features && mapData.features.length > 0) {\n        for (var i = 0; i < mapData.features.length; i++) {\n            var feature = mapData.features[i];\n            var properties = feature.properties || {};\n            if (properties && properties.name) {\n                centerMap[properties.name] = properties.center || [];\n            }\n        }\n    }\n\n    var option = {\n        title: {\n            text: '河地市',\n        },\n        visualMap: {\n            show: false,\n            max: 100,\n            seriesIndex: [3],\n            inRange: {\n                color: ['#A5DCF4', '#006edd'],\n            },\n        },\n        geo: [\n            {\n                //如果在vue里effectScatter没生效，一定要看一下有没有引入geo插件\n                map: 'hedi',\n                roam: false, // 是否允许缩放\n                zoom: 1.1, // 默认显示级别\n                scaleLimit: {\n                    min: 0,\n                    max: 3,\n                }, // 缩放级别\n                itemStyle: {\n                    normal: {\n                        areaColor: '#013C62',\n                        shadowColor: '#013C62',\n                        shadowBlur: 20,\n                        shadowOffsetX: -5,\n                        shadowOffsetY: 15,\n                    },\n                },\n                tooltip: {\n                    show: false,\n                },\n            },\n        ],\n        series: [\n            {\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                z: 5,\n                data: [\n                    {\n                        city: '吉安',\n                        value: [114.986373, 27.111699],\n                    },\n                ],\n                symbolSize: 14,\n                label: {\n                    normal: {\n                        show: true,\n                        formatter(params) {\n                            return `{fline|地点：${params.data.city}}\\n{tline|${params.data.info || '发生xx集件'}}`;\n                        },\n                        position: 'top',\n                        backgroundColor: 'rgba(254,174,33,.8)',\n                        padding: [0, 0],\n                        borderRadius: 3,\n                        lineHeight: 32,\n                        color: '#f7fafb',\n                        rich: {\n                            fline: {\n                                padding: [0, 10, 10, 10],\n                                color: '#ffffff',\n                            },\n                            tline: {\n                                padding: [10, 10, 0, 10],\n                                color: '#ffffff',\n                            },\n                        },\n                    },\n                    emphasis: {\n                        show: true,\n                    },\n                },\n                itemStyle: {\n                    color: '#feae21',\n                },\n            },\n            {\n                name: '河地市人口密度',\n                type: 'map',\n                zoom: '1.1',\n                mapType: 'hedi', // 自定义扩展图表类型\n                legend: {\n                    show: true,\n                },\n                label: {\n                    show: true,\n                    emphasis: {\n                        //高亮时文字样式\n                        color: '#fff',\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        areaColor: '#fff',\n                        color: '#fff',\n                    },\n                    emphasis: {\n                        areaColor: 'rgb(0, 102, 255)',\n                    },\n                },\n                data: [\n                ],\n                tooltip: {\n                    show: false,\n                }\n            },\n        ],\n    };\n\n    myChart.setOption(option);\n    myChart.on('click', function (event) {\n        console.log(event);\n        if (event.componentType === 'series' && event.seriesIndex === 1) {\n            var codeCity = event.name;\n            var coord = centerMap[codeCity];\n            option.series[0].data = [\n                {\n                    city: codeCity,\n                    value: coord,\n                },\n            ];\n            myChart.setOption(option, true);\n            //由于绑定了mouseover事件，地图默认的高亮事件不触发了\n            //所以手动高亮一下\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: event.seriesIndex,\n                dataIndex: event.dataIndex,\n            });\n        }\n    });\n});\n","html":"","externalScripts":"https://cdn.staticfile.org/axios/0.21.1/axios.min.js","updaterUID":"bd-3171977082","theme":"","layout":"","viewCount":0,"userName":"簡***茬","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHNv4DFVeo.png?v=1621235569590","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title"],"customTags":[],"updaterUserName":"簡***茬"}}