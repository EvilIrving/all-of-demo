{"status":0,"data":{"cid":"xBJXff1KhG","authorUid":"bd-442035385","authorUserName":"小***了","title":"美国经常账户赤字变化情况","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2018-04-21T16:08:43.000Z","lastUpdateTime":"2018-04-21T16:08:43.000Z","auth":2,"uid":"bd-442035385","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.0.4","versionCreateTime":"2018-04-25T16:20:49.000Z","code":"//在yourdata中填入数据，赤字增加为正数，赤字减少为负数\nfunction precisionRound(number, precision) {\n    var factor = Math.pow(10, precision);\n    return Math.round(number * factor) / factor;\n}\nvar rowdata1=[0.78, 0.29, 0.35, 0.65, 0.92, 0.9 , 0.96, 1.02, 1.63, 2.57, 3.76,3.69, 4.26, 5.04, 6.19, 7.21, 7.71, 7.19, 7.23, 3.95, 5.13, 5.8 ,5.66, 4.92, 4.75, 5.24, 5.21]\nvar newdata1=[]\nfor (var i = 0; i < rowdata1.length; i++){\n    newdata1.push(rowdata1[i]*100)\n}\nvar rowdata = [-0.81, -0.31, -0.39, -0.7, -0.99, -0.96, -1.04, -1.08, -1.66, -2.59, -3.73, -3.62, -4.19, -4.94, -6.1, -7.14, -7.62, -7.05, -7.09, -3.84, -4.95, -5.49, -5.37, -4.62, -4.9, -5, -5.05];\nvar newdata = [80.1]\nfor (var i = 1; i < rowdata.length; i++) {\n    newdata.push(precisionRound(100*rowdata[i - 1] - 100*rowdata[i], 2))\n}\nvar yourdata = newdata\n// var yourdata = [764, 66, 238, -59, -303, 563, -482, 178, 835, -81, 833, 49, 732, 432, -444, 214, 158, -712, -249, -302, -386, 697, -446, 592, -277, -879, -383, 31, -412, -72, 962, -513, 580, -373, 292, -105, -282, 767, -993, 33, 218];\n//在xaxisdata中填入x轴的数据\nvar xaxisdata = [1990, 1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016]\nvar timeinterval = 200\n\nfunction maxsum(data) {\n    var x = 0;\n    var list = []\n    for (var i = 0; i < data.length; i++) {\n        x = x + data[i];\n        list.push(x)\n    };\n    return Math.max.apply(null, list)\n}\n\nfunction getymax() {\n    var data = maxsum(yourdata)\n    var length = Math.floor(Math.log10(data)) - 1\n    var yaxismax = Math.ceil(data / Math.pow(10, length)) * Math.pow(10, length)\n    return yaxismax\n\n}\nvar ymax = 800\nvar updata = [];\nvar downdata = [];\nvar auxdata = [];\nvar sum = 0\nfor (var i = 0; i < yourdata.length; i++) {\n    auxdata.push(sum)\n    if (yourdata[i] > 0) {\n        updata.push(yourdata[i])\n        downdata.push('-')\n    } else {\n        updata.push('-')\n        downdata.push(Math.abs(yourdata[i]))\n    }\n    sum = sum + yourdata[i]\n};\nauxdata.slice(0, yourdata.length - 1)\n\noption = {\n    title: {\n        text: '美国经常账户赤字变化情况',\n                textStyle: {\n            fontSize: 18,\n            color: '#F1F1F3'\n        }\n        // subtext: '修改自官网by小白高'\n    },\n    backgroundColor: '#394056',\n    toolbox: {\n        feature: {\n            // magicType: {\n            //     type: ['line','bar']\n            // },\n            saveAsImage: {\n                show: true,\n                pixelRatio:5\n            }\n        }\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        },\n        formatter: function(params) {\n            var tar;\n            if (params[1].value != '-') {\n                tar = params[1];\n            } else {\n                tar = params[2];\n            }\n            return tar.name + '<br/>' + tar.seriesName + ' : ' + tar.value;\n        }\n    },\n    legend: {\n        data: ['赤字减少', '赤字增加', '储蓄缺口'],\n        left: 400,\n        textStyle: {\n            fontSize: 12,\n            color: '#F1F1F3'\n        }\n    },\n    // grid: {\n    //     left: '3%',\n    //     right: '4%',\n    //     bottom: '3%',\n    //     containLabel: true\n    // },\n    xAxis: {\n        type: 'category',\n        axisLine: {\n            lineStyle: {\n                color: '#57617B'\n            }\n        },\n        axisLabel:{\n            interval:0,\n            rotate:45,\n        },\n        splitLine: {\n            show: false\n        },\n        data: xaxisdata\n    },\n    yAxis: [{\n            splitLine: {\n                show: false\n            },\n            axisLine: {\n            lineStyle: {\n                color: '#57617B'\n            }\n        },\n            type: 'value',\n            max: ymax,\n            name: '十亿美元',\n        },\n        {\n            type: 'value',\n            max: ymax,\n            inverse: true,\n            show: false\n        },\n        \n    ],\n    series: [{\n            name: '辅助',\n            type: 'bar',\n            stack: '总量',\n            itemStyle: {\n                normal: {\n                    barBorderColor: 'rgba(0,0,0,0)',\n                    color: 'rgba(0,0,0,0)'\n                },\n                emphasis: {\n                    barBorderColor: 'rgba(0,0,0,0)',\n                    color: 'rgba(0,0,0,0)'\n                }\n            },\n            // data: [0, 900, 1245, 1530, 1376, 1376, 1511, 1689, 1856, 1495, 1292],\n            data: auxdata,\n        },\n\n        {\n            name: '赤字增加',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top'\n                }\n            },\n            itemStyle:{\n                normal:{\n                    color:'rgb(219,50,51)'\n                }\n            },\n            data: updata,\n            animationDelay: function(idx) {\n                return idx * timeinterval;\n            }\n\n        },\n        {\n            name: '赤字减少',\n            type: 'bar',\n            yAxisIndex: 1,\n            stack: '总量',\n            itemStyle: {\n                color: \"green\"\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'bottom'\n                }\n            },\n                       itemStyle:{\n                normal:{\n                    color:'rgb(137,189,27)'\n                }\n            },\n            data: downdata,\n            // z:2,\n            // zlevel:2,\n            animationDelay: function(idx) {\n                return idx * timeinterval;\n            }\n        },\n        // {\n        //     name: '储蓄率（左轴）',\n        //     type: 'line',\n        //     stack: '总量',\n        //     smooth: true,\n        //     yAxisIndex:2,\n        //     animationDelay: function(idx) {\n        //         return idx * timeinterval;\n        //     },\n        //     data: [18.77, 18.84, 17.71, 17.06, 17.85, 18.73, 19.6, 20.79, 21.34, 20.91, 20.77, 19.63, 18.3, 17.47, 17.66, 18.04, 19.31, 17.51, 15.67, 14.57, 15.32, 15.95, 17.98, 18.54, 19.58, 19.44, 18.09],\n        // },\n        {\n            name: '储蓄缺口',\n            type: 'line',\n            // markArea: {\n            //     zlevel:3,\n            //     data: [[{\n            //         name: '中层',\n            //         xAxis: 2000,\n            //     }, {\n            //         xAxis: 2016,\n            //     }]]\n            // },\n            smooth: true,\n            // stack: '总量',\n            // yAxisIndex: 2,\n        areaStyle: {\n            normal: {\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                    offset: 0,\n                    color: 'rgba(0, 136, 212, 0.5)'\n                }, {\n                    offset: 0.8,\n                    color: 'rgba(0, 136, 212, 0.05)'\n                }], false),\n                shadowColor: 'rgba(0, 0, 0, 0.1)',\n                shadowBlur: 10\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: 'rgb(0,136,212)',\n                borderColor: 'rgba(0,136,212,0.2)',\n                borderWidth: 12\n\n            }\n        },\n        data:newdata1 ,\n        // zlevel:3,\n        // z:3\n        },\n    ],\n    animationEasing: 'elasticOut',\n    animationDelayUpdate: function(idx) {\n        return idx * 10;\n    }\n};","html":"","externalScripts":"","updaterUID":"bd-442035385","theme":"","layout":"","viewCount":587,"userName":"小***了","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBJXff1KhG.png?v=1524673249342","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"小***了"}}