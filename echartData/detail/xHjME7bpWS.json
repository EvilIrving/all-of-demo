{"status":0,"data":{"cid":"xHjME7bpWS","authorUid":"bd-3913771301","authorUserName":"因***凡","title":"一个月中 程度分布","description":"一个月中 程度分布","latestVersion":2,"alwaysLatest":1,"createTime":"2020-11-20T04:18:25.000Z","lastUpdateTime":"2020-11-20T04:18:25.000Z","auth":2,"uid":"bd-3913771301","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-01T07:02:49.000Z","code":" var cellSize = [100, 100];\n var customradius = [30,32];\n var dataX = ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\n function getVirtulData() {\n          var date = +echarts.number.parseDate('2017-02-01');\n          var end = +echarts.number.parseDate('2017-03-01');\n          var dayTime = 3600 * 24 * 1000;\n          var data = [];\n          for (var time = date; time < end; time += dayTime) {\n            data.push([\n              echarts.format.formatTime('yyyy-MM-dd', time),\n              Math.floor(Math.random() * 10000)\n            ]);\n          }\n          return data;\n        }\nvar scatterData = getVirtulData();\n//series的数据初始设置scatter\nlet seriesData = [{ //日期\n    id: 'label',\n    type: 'scatter',\n    coordinateSystem: 'calendar',\n    symbolSize: 1,\n    label: {\n        show:false,\n        // normal: {\n        //     show: false,\n        //     formatter: function(params) {\n        //         return params.value[1]\n        //     },\n        //     offset: [-30, -30],\n        //     textStyle: {\n        //         color: color2,\n        //         fontSize: 14\n        //     }\n        // }\n    },\n    data: scatterData\n}];\nfunction getcustomDay(e){\n    let h = e.substr(8,e.length);\n    return h;\n}\nfunction getPieSeries() {\n    scatterData.map(function(item, index) {\n        var center = myChart.convertToPixel('calendar', item);\n        //console.log(item,index,center);\n        var customname;\n        var customcolor;\n        var customday;\n        customday = getcustomDay(item[0]);\n        console.log(customday);\n        if(item[1] < 2000){\n            customname = \"良好\";\n            customcolor = 'rgba(140,198,63)';\n        }else if(item[1] < 4000){\n            customname = \"轻度\";\n            customcolor = 'rgba(247,147,30,0.35)';\n        }else if(item[1] < 6000){\n            customname = \"中度\";\n            customcolor = 'rgba(247,147,30,0.6)';\n        }else if(item[1] < 8000){\n            customname = \"中重度\";\n            customcolor = 'rgba(247,147,30)';\n        }else{\n            customname = \"重度\";\n            customcolor = 'rgba(255,0,0,0.7)';\n        }\n        let seriesItem = {\n            id: index + 'pie',\n            type: 'pie',\n            center: center,\n            radius:customradius,\n            label: {\n                normal: {\n                    formatter: '{c}',\n                    position: 'center',\n                    fontSize:'13'\n                }\n            },\n            data: [{\n                    name: customname,\n                    legendHoverLink:false,\n                    hoverAnimation:false,\n                    value: customday,\n                    itemStyle: {\n                        color: customcolor\n                    },\n                }\n            ]\n        };\n        seriesData.push(seriesItem)\n    })\n}\nvar color1 = '#0a0b58';\nvar color2 = 'red';\noption = {\n    backgroundColor:'#ffffff',\n    title:{\n        text:'月状况分布',\n    },\n    legend: {\n        color:'red',\n        data: [\n            {\n                name:\"良好\",\n            },\n            {\n                name:\"轻度\",\n            },\n            {\n                name:\"中度\",\n            },\n            {\n                name:\"中重度\",\n            },\n            {\n                name:\"重度\",\n            }\n        ],\n        bottom:80,\n        textStyle: {\n            color: 'green',\n        }\n    },\n    calendar: {\n        top: 'middle',\n        left: 'center',\n        orient: 'vertical',\n        cellSize: cellSize,\n        yearLabel: {\n          show: true,\n          margin:40,\n          color:'#7fb93c',\n          formatter:function(e){\n              console.log(e);\n              return e.start + \"年     2 月\";\n          }\n        },\n        dayLabel: {\n          firstDay: 1,\n          margin:5,\n          color:'gray',\n          nameMap: dataX\n        },\n        monthLabel: {\n          show: false\n        },\n        splitLine:{\n            show:false  //外部边框\n        },\n        itemStyle: {\n            color: 'rgba(0,0,0,0)',\n            borderWidth: 1,\n            borderColor: 'rgba(0,0,0,0)'    //内边框颜色\n        },\n        range: ['2017-02']\n    },\n    series: seriesData\n};\nsetTimeout(function() {\n    getPieSeries()\n    myChart.setOption(option)\n    console.log(option);\n}, 10);","html":"","externalScripts":"","updaterUID":"bd-3913771301","theme":"","layout":"","viewCount":448,"userName":"因***凡","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHjME7bpWS.png?v=1605845905990","isCustomThumbnail":1,"builtinTags":["calendar","category-work","legend","series-pie","series-scatter","title"],"customTags":["calendar","pie","scatter"],"updaterUserName":"因***凡"}}