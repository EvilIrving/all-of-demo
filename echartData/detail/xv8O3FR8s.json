{"status":0,"data":{"cid":"xv8O3FR8s","authorUid":"bd-28308202","authorUserName":"c***0","title":"温度计","description":"温度计图表","latestVersion":2,"alwaysLatest":1,"createTime":"2020-02-26T10:27:11.000Z","lastUpdateTime":"2020-02-26T10:27:11.000Z","auth":2,"uid":"bd-28308202","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-26T10:31:06.000Z","code":"var TP_value = 40;\nvar kd = [];\nvar Gradient = [];\nvar leftColor = '';\nvar showValue = '';\nvar boxPosition = [65, 0];\nvar TP_txt = ''\n// 刻度使用柱状图模拟，短设置1，长的设置3；构造一个数据\nfor(var i = 0, len = 135; i <= len; i++) {\nif(i < 10 || i > 130) {\n    kd.push('')\n} else {\n    if((i - 10) % 20 === 0) {\n        kd.push('-3');\n    } else if((i - 10) % 4 === 0) {\n        kd.push('-1');\n    } else {\n        kd.push('');\n    }\n}\n\n}\n//中间线的渐变色和文本内容\nif(TP_value > 20) {\nTP_txt = '温度偏高';\nGradient.push({\n    offset: 0,\n    color: '#93FE94'\n}, {\n    offset: 0.5,\n    color: '#E4D225'\n}, {\n    offset: 1,\n    color: '#E01F28'\n})\n} else if(TP_value > -20) {\nTP_txt = '温度正常';\nGradient.push({\n    offset: 0,\n    color: '#93FE94'\n}, {\n    offset: 1,\n    color: '#E4D225'\n})\n} else {\nTP_txt = '温度偏低';\nGradient.push({\n    offset: 1,\n    color: '#93FE94'\n})\n}\nif(TP_value > 62) {\nshowValue = 62\n} else {\nif(TP_value < -60) {\n    showValue = -60\n} else {\n    showValue = TP_value\n}\n}\nif(TP_value < -10) {\nboxPosition = [65, -120];\n}\nleftColor = Gradient[Gradient.length - 1].color;\n// 因为柱状初始化为0，温度存在负值，所以加上负值60和空出距离10\noption = {\nbackgroundColor: '#0C2F6F',\ntitle: {\n    text: '温度计',\n    show: false\n},\nyAxis: [{\n    show: false,\n    data: [],\n    min: 0,\n    max: 135,\n    axisLine: {\n        show: false\n    }\n}, {\n    show: false,\n    min: 0,\n    max: 50,\n}, {\n    type: 'category',\n    data: ['', '', '', '', '', '', '', '', '', '', '°C'],\n    position: 'left',\n    offset: -80,\n    axisLabel: {\n        fontSize: 10,\n        color: 'white'\n    },\n    axisLine: {\n        show: false\n    },\n    axisTick: {\n        show: false\n    },\n}],\nxAxis: [{\n    show: false,\n    min: -10,\n    max: 80,\n    data: []\n}, {\n    show: false,\n    min: -10,\n    max: 80,\n    data: []\n}, {\n    show: false,\n    min: -10,\n    max: 80,\n    data: []\n}, {\n    show: false,\n    min: -5,\n    max: 80,\n\n}],\nseries: [{\n    name: '条',\n    type: 'bar',\n    // 对应上面XAxis的第一个对)象配置\n    xAxisIndex: 0,\n    data: [{\n        value: (showValue + 70),\n        label: {\n            normal: {\n                show: true,\n                position: boxPosition,\n                backgroundColor: {\n                    image: 'plugin/subway_beijing/images/power/bg5Valuebg.png',//文字框背景图\n                },\n                width: 200,\n                height: 100,\n                formatter: '{back| ' + TP_value + ' }{unit|°C}\\n{downTxt|' + TP_txt + '}',\n                rich: {\n                    back: {\n                        align: 'center',\n                        lineHeight: 50,\n                        fontSize: 40,\n                        fontFamily: 'digifacewide',\n                        color: leftColor\n                    },\n                    unit: {\n                        fontFamily: '微软雅黑',\n                        fontSize: 15,\n                        lineHeight: 50,\n                        color: leftColor\n                    },\n                    downTxt: {\n                        lineHeight: 50,\n                        fontSize: 25,\n                        align: 'center',\n                        color: '#fff'\n                    }\n                }\n            }\n        }\n    }],\n\n    barWidth: 18,\n    itemStyle: {\n        normal: {\n            color: new echarts.graphic.LinearGradient(0, 1, 0, 0, Gradient)\n        }\n    },\n    z: 2\n}, {\n    name: '白框',\n    type: 'bar',\n    xAxisIndex: 1,\n    barGap: '-100%',\n    data: [134],\n    barWidth: 28,\n    itemStyle: {\n        normal: {\n            color: '#0C2E6D',\n            barBorderRadius: 50,\n        }\n    },\n    z: 1\n}, {\n    name: '外框',\n    type: 'bar',\n    xAxisIndex: 2,\n    barGap: '-100%',\n    data: [135],\n    barWidth: 38,\n    itemStyle: {\n        normal: {\n            color: '#4577BA',\n            barBorderRadius: 50,\n        }\n    },\n    z: 0\n}, {\n    name: '圆',\n    type: 'scatter',\n    hoverAnimation: false,\n    data: [0],\n    xAxisIndex: 0,\n    symbolSize: 48,\n    itemStyle: {\n        normal: {\n            color: '#93FE94',\n            opacity: 1,\n        }\n    },\n    z: 2\n}, {\n    name: '白圆',\n    type: 'scatter',\n    hoverAnimation: false,\n    data: [0],\n    xAxisIndex: 1,\n    symbolSize: 60,\n    itemStyle: {\n        normal: {\n            color: '#0C2E6D',\n            opacity: 1,\n        }\n    },\n    z: 1\n}, {\n    name: '外圆',\n    type: 'scatter',\n    hoverAnimation: false,\n    data: [0],\n    xAxisIndex: 2,\n    symbolSize: 70,\n    itemStyle: {\n        normal: {\n            color: '#4577BA',\n            opacity: 1,\n        }\n    },\n    z: 0\n}, {\n    name: '刻度',\n    type: 'bar',\n    yAxisIndex: 0,\n    xAxisIndex: 3,\n    label: {\n        normal: {\n            show: true,\n            position: 'left',\n            distance: 10,\n            color: 'white',\n            fontSize: 14,\n            formatter: function(params) {\n                if(params.dataIndex > 130 || params.dataIndex < 10) {\n                    return '';\n                } else {\n                    if((params.dataIndex - 10) % 20 === 0) {\n                        return params.dataIndex - 70;\n                    } else {\n                        return '';\n                    }\n                }\n            }\n        }\n    },\n    barGap: '-100%',\n    data: kd,\n    barWidth: 1,\n    itemStyle: {\n        normal: {\n            color: 'white',\n            barBorderRadius: 120,\n        }\n    },\n    z: 0\n}]\n};","html":"","externalScripts":"","updaterUID":"bd-28308202","theme":"","layout":"","viewCount":283,"userName":"c***0","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xv8O3FR8s.png?v=1582713066257","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter","title"],"customTags":[],"updaterUserName":"c***0"}}