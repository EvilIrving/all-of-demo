{"status":0,"data":{"cid":"xPcrtL28i5","authorUid":"obd-o2nLMssxeFKdtMUZ8r4Oc0YwDUXv-6n","authorUserName":"5***l","title":"202083020092许建然","description":"资源与环境硕研五班","latestVersion":5,"alwaysLatest":1,"createTime":"2020-12-24T01:17:34.000Z","lastUpdateTime":"2020-12-24T01:17:34.000Z","auth":2,"uid":"obd-o2nLMssxeFKdtMUZ8r4Oc0YwDUXv-6n","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-25T07:06:57.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\nvar option = {\r\n    toolbox: {\r\n        show: true,\r\n        orient: \"vertical\",\r\n        left: \"right\",\r\n        top: \"center\",\r\n        feature: {\r\n            mark: {\r\n                show: true\r\n            },\r\n            dataView: {\r\n                show: true,\r\n                readOnly: false\r\n            },\r\n            restore: {\r\n                show: true\r\n            },\r\n            saveAsImage: {\r\n                type: 'png',\r\n                show: true,\r\n                name: '主要城市gdp',\r\n                backgroundColor: 'auto',\r\n                excludeComponents: 'toolbox'\r\n\r\n\r\n\r\n\r\n\r\n            },\r\n        },\r\n    },\r\n}\r\nvar geoCoordMap = {\r\n    '北京': [116.3809433, 39.9236145],\r\n    '天津': [117.2034988, 39.13111877],\r\n    '石家庄': [114.4897766, 38.04512787],\r\n    '太原': [112.5693512, 37.87111282],\r\n    '呼和浩特': [111.6632996, 40.82094193],\r\n    '沈阳': [123.4116821, 41.7966156],\r\n    '大连': [121.6008377, 38.91780472],\r\n    '长春': [125.3154297, 43.89256287],\r\n    '哈尔滨': [126.6433411, 45.74149323],\r\n    '上海': [121.4692688, 31.23817635],\r\n    '南京': [118.7727814, 32.04761505],\r\n    '杭州': [120.1592484, 30.26599503],\r\n    '宁波': [121.5412827, 29.87066841],\r\n    '合肥': [117.2757034, 31.86325455],\r\n    '福州': [119.2978134, 26.07859039],\r\n    '厦门': [118.0875168, 24.45743561],\r\n    '南昌': [115.8999176, 28.67599106],\r\n    '济南': [117.0056, 36.6670723],\r\n    '青岛': [120.3581696, 36.13386154],\r\n    '郑州': [113.6500473, 34.7570343],\r\n    '武汉': [114.2919388, 30.56751442],\r\n    '长沙': [112.9812698, 28.20082474],\r\n    '广州': [113.2614288, 23.11891174],\r\n    '深圳': [114.110672, 22.55639648],\r\n    '南宁': [108.3117676, 22.80654335],\r\n    '海口': [110.3465118, 20.03179359],\r\n    '重庆': [106.5103378, 29.55817604],\r\n    '成都': [104.0817566, 30.66105652],\r\n    '贵阳': [106.7113724, 26.57687378],\r\n    '昆明': [102.704567, 25.04384422],\r\n    '拉萨': [91.1, 29.4],\r\n    '西安': [108.949028, 34.26168442],\r\n    '兰州': [103.7500534, 36.06803894],\r\n    '西宁': [101.7874527, 36.60944748],\r\n    '银川': [106.2719421, 38.46800995],\r\n    '乌鲁木齐': [87.60611725, 43.79093933]\r\n\r\n};\r\n\r\nvar colors = [\r\n    [\"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\r\n    [\"pink\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\r\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\r\n];\r\nvar colorIndex = 1;\r\n$(function() {\r\n\r\n\r\n    var year = [\"2015\", \"2016\", \"2017\", \"2018\", \"2019\"];\r\n    var mapData = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n    var data1 = {\r\n\r\n        '北京': 35371.28,\r\n        '天津': 14104.28,\r\n        \"石家庄\": 5810,\r\n        \"太原\": 4029,\r\n        \"呼和浩特\": 2791,\r\n        \"沈阳\": 6470,\r\n        \"大连\": 7002,\r\n        \"长春\": 5904,\r\n        \"哈尔滨\": 5249,\r\n        \"上海\": 38155.32,\r\n        \"南京\": 14031,\r\n        \"杭州\": 15373,\r\n        \"宁波\": 11985,\r\n        \"合肥\": 9409,\r\n        \"福州\": 9392,\r\n        \"厦门\": 5995,\r\n        \"南昌\": 5596,\r\n        \"济南\": 9443,\r\n        \"青岛\": 11741,\r\n        \"郑州\": 11590,\r\n        \"武汉\": 16223,\r\n        \"长沙\": 11574,\r\n        \"广州\": 23629,\r\n        \"深圳\": 26927,\r\n        \"南宁\": 4507,\r\n        \"海口\": 1672,\r\n        \"重庆\": 23605.77,\r\n        \"成都\": 17013,\r\n        \"贵阳\": 4040,\r\n        \"昆明\": 6476,\r\n        \"拉萨\": 618,\r\n        \"西安\": 9321,\r\n        \"兰州\": 2837,\r\n        \"西宁\": 1328,\r\n        \"银川\": 1897,\r\n        \"乌鲁木齐\": 3413,\r\n    };\r\n    var data2 = {\r\n        \"北京\": 33105.97,\r\n        \"天津\": 13362.92,\r\n        \"石家庄\": 6082.62,\r\n        \"太原\": 3884.48,\r\n        \"呼和浩特\": 2903.5,\r\n        \"沈阳\": 6292.4,\r\n        \"大连\": 7668.48,\r\n        \"长春\": 7175.71,\r\n        \"哈尔滨\": 6300.48,\r\n        \"上海\": 36011.82,\r\n        \"南京\": 12820.4,\r\n        \"杭州\": 13509.15,\r\n        \"宁波\": 10745.46,\r\n        \"合肥\": 7822.91,\r\n        \"福州\": 7856.81,\r\n        \"厦门\": 4791.41,\r\n        \"南昌\": 5274.67,\r\n        \"济南\": 7856.56,\r\n        \"青岛\": 12001.52,\r\n        \"郑州\": 10143.32,\r\n        \"武汉\": 14847.29,\r\n        \"长沙\": 11003.41,\r\n        \"广州\": 22859.35,\r\n        \"深圳\": 24221.98,\r\n        \"南宁\": 4026.91,\r\n        \"海口\": 1510.51,\r\n        \"重庆\": 21588.8,\r\n        \"成都\": 15342.77,\r\n        \"贵阳\": 3798.45,\r\n        \"昆明\": 5206.9,\r\n        \"拉萨\": 540.78,\r\n        \"西安\": 8349.86,\r\n        \"兰州\": 2732.94,\r\n        \"西宁\": 1286.41,\r\n        \"银川\": 1901.48,\r\n        \"乌鲁木齐\": 3099.77,\r\n\r\n    }\r\n    var data3 = {\r\n        \"北京\": 28014.94,\r\n        \"天津\": 18549.19,\r\n        \"石家庄\": 6460.88,\r\n        \"太原\": 3382.18,\r\n        \"呼和浩特\": 2743.72,\r\n        \"沈阳\": 5864.97,\r\n        \"大连\": 7363.92,\r\n        \"长春\": 6530.03,\r\n        \"哈尔滨\": 6355.05,\r\n        \"上海\": 30632.99,\r\n        \"南京\": 11715.1,\r\n        \"杭州\": 12603.36,\r\n        \"宁波\": 9842.1,\r\n        \"合肥\": 7213.45,\r\n        \"福州\": 7103.4,\r\n        \"厦门\": 4351.7,\r\n        \"南昌\": 5003.19,\r\n        \"济南\": 7201.96,\r\n        \"青岛\": 11037.28,\r\n        \"郑州\": 9130.2,\r\n        \"武汉\": 13410.34,\r\n        \"长沙\": 10535.51,\r\n        \"广州\": 21503.15,\r\n        \"深圳\": 22490.06,\r\n        \"南宁\": 4118.83,\r\n        \"海口\": 1390.58,\r\n        \"重庆\": 19424.73,\r\n        \"成都\": 13889.39,\r\n        \"贵阳\": 3537.96,\r\n        \"昆明\": 4857.64,\r\n        \"拉萨\": 479.25,\r\n        \"西安\": 7469.85,\r\n        \"兰州\": 2523.54,\r\n        \"西宁\": 1284.91,\r\n        \"银川\": 1803.26,\r\n        \"乌鲁木齐\": 2743.82,\r\n    }\r\n    var data4 = {\r\n\r\n        \"北京\": 25669.13,\r\n        \"天津\": 17885.39,\r\n        \"石家庄\": 5927.73,\r\n        \"太原\": 2955.6,\r\n        \"呼和浩特\": 3173.59,\r\n        \"沈阳\": 5546.45,\r\n        \"大连\": 6810.2,\r\n        \"长春\": 5986.42,\r\n        \"哈尔滨\": 6101.61,\r\n        \"上海\": 28178.65,\r\n        \"南京\": 10503.02,\r\n        \"杭州\": 11313.72,\r\n        \"宁波\": 8686.49,\r\n        \"合肥\": 6274.38,\r\n        \"福州\": 6197.64,\r\n        \"厦门\": 3784.27,\r\n        \"南昌\": 4354.99,\r\n        \"济南\": 6536.12,\r\n        \"青岛\": 10011.29,\r\n        \"郑州\": 8113.97,\r\n        \"武汉\": 11912.61,\r\n        \"长沙\": 9356.91,\r\n        \"广州\": 19547.44,\r\n        \"深圳\": 19492.6,\r\n        \"南宁\": 3703.33,\r\n        \"海口\": 1257.67,\r\n        \"重庆\": 17740.59,\r\n        \"成都\": 12170.23,\r\n        \"贵阳\": 3157.7,\r\n        \"昆明\": 4300.08,\r\n        \"拉萨\": 424.95,\r\n        \"西安\": 6257.18,\r\n        \"兰州\": 2264.23,\r\n        \"西宁\": 1248.17,\r\n        \"银川\": 1617.71,\r\n        \"乌鲁木齐\": 2458.98,\r\n    }\r\n    var data5 = {\r\n\r\n\r\n        \"北京\": 23014.59,\r\n        \"天津\": 16538.19,\r\n        \"石家庄\": 5440.6,\r\n        \"太原\": 2735.34,\r\n        \"呼和浩特\": 3090.52,\r\n        \"沈阳\": 7272.31,\r\n        \"大连\": 7731.64,\r\n        \"长春\": 5530.03,\r\n        \"哈尔滨\": 5751.21,\r\n        \"上海\": 25123.45,\r\n        \"南京\": 9720.77,\r\n        \"杭州\": 10050.21,\r\n        \"宁波\": 8003.61,\r\n        \"合肥\": 5660.27,\r\n        \"福州\": 5618.08,\r\n        \"厦门\": 3466.03,\r\n        \"南昌\": 4000.01,\r\n        \"济南\": 6100.23,\r\n        \"青岛\": 9300.07,\r\n        \"郑州\": 7311.52,\r\n        \"武汉\": 10905.6,\r\n        \"长沙\": 8510.13,\r\n        \"广州\": 18100.41,\r\n        \"深圳\": 17502.86,\r\n        \"南宁\": 3410.09,\r\n        \"海口\": 1161.96,\r\n        \"重庆\": 15717.27,\r\n        \"成都\": 10801.16,\r\n        \"贵阳\": 2891.16,\r\n        \"昆明\": 3968.01,\r\n        \"拉萨\": 376.73,\r\n        \"西安\": 5801.2,\r\n        \"兰州\": 2095.99,\r\n        \"西宁\": 1131.62,\r\n        \"银川\": 1493.86,\r\n        \"乌鲁木齐\": 2631.64\r\n\r\n            ,\r\n    }\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var barData = [];\r\n    for (var key in geoCoordMap) {\r\n        categoryData.push(key);\r\n        mapData[0].push({\r\n            \"year\": '2015',\r\n            \"name\": key,\r\n            \"value\": data5[key] / 100\r\n        });\r\n        mapData[1].push({\r\n            \"year\": '2016',\r\n            \"name\": key,\r\n            \"value\": data4[key] / 100\r\n        });\r\n        mapData[2].push({\r\n            \"year\": '2017',\r\n            \"name\": key,\r\n            \"value\": data3[key] / 100\r\n        });\r\n        mapData[3].push({\r\n            \"year\": '2018',\r\n            \"name\": key,\r\n            \"value\": data2[key] / 100\r\n        });\r\n        mapData[4].push({\r\n            \"year\": '2019',\r\n            \"name\": key,\r\n            \"value\": data1[key] / 100\r\n        });\r\n\r\n    }\r\n    for (var i = 0; i < mapData.length; i++) {\r\n        barData.push([]);\r\n        for (var j = 0; j < mapData[i].length; j++) {\r\n            barData[i].push(mapData[i][j].value)\r\n        }\r\n    }\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n\r\n\r\n        optionXyMap01 = {\r\n            timeline: {\r\n                data: year,\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 3000,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '3%',\r\n                width: '80%',\r\n                //  height: null,\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#777',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {\r\n                    right: '1%',\r\n                    top: '15%',\r\n                    bottom: '10%',\r\n                    width: '20%'\r\n                },\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                        }\r\n                    }\r\n                },\r\n                geo: {\r\n                    show: true,\r\n                    map: 'china',\r\n                    roam: true,\r\n                    zoom: 1,\r\n                    center: [113.83531246, 34.0267395887],\r\n                    label: {\r\n                        emphasis: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            borderColor: 'white',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 1)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#389BB7',\r\n                            borderWidth: 0\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n            options: []\r\n\r\n        };\r\n        for (var n = 0; n < year.length; n++) {\r\n            optionXyMap01.options.push({\r\n                backgroundColor: '#051b4a',\r\n                title: [{\r\n                        text: '202083020092许建然',\r\n                        subtext: '资源与环境硕研五班',\r\n                        left: 'left',\r\n                        textStyle: {\r\n                            color: 'pink'\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'statistic',\r\n                        text: year[n] + \"年主要城市gdp(百亿元）\",\r\n                        subtext: '(暂无台北数据)',\r\n\r\n                        left: '40%',\r\n                        top: '1%',\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 28\r\n\r\n                        }\r\n                    }\r\n                ],\r\n                xAxis: {\r\n                    type: 'value',\r\n                    scale: true,\r\n                    position: 'bottom',\r\n                    min: 0,\r\n                    boundaryGap: false,\r\n                    splitLine: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        show: false\r\n                    },\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLabel: {\r\n                        margin: 2,\r\n                        textStyle: {\r\n                            color: 'white'\r\n                        }\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'category',\r\n                    //  name: 'TOP 20',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: true,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    data: categoryData\r\n                },\r\n                series: [\r\n                    //未知作用\r\n                    {\r\n                        //文字和标志\r\n                        name: 'light',\r\n                        type: 'scatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n]),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 7;\r\n                        },\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'center',\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][1]\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    {\r\n                        type: 'map',\r\n                        map: 'china',\r\n                        geoIndex: 0,\r\n                        aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: false, // 存在legend时显示\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: false,\r\n                                textStyle: {\r\n                                    color: 'red'\r\n                                }\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#031525',\r\n                                borderColor: '#FFFFFF',\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7'\r\n                            }\r\n                        },\r\n                        animation: false,\r\n                        data: mapData\r\n                    },\r\n                    //地图点的动画效果\r\n                    {\r\n                        //  name: 'Top 5',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n].sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 10)),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 7;\r\n                        },\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                shadowBlur: 10,\r\n                                shadowColor: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n\r\n\r\n                    //柱状图\r\n                    {\r\n                        zlevel: 1.5,\r\n                        type: 'bar',\r\n                        symbol: 'none',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        data: barData[n]\r\n                    }\r\n                ]\r\n\r\n            })\r\n        }\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-o2nLMssxeFKdtMUZ8r4Oc0YwDUXv-6n","theme":"","layout":"","viewCount":209,"userName":"5***l","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPcrtL28i5.png?v=1608880017606","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","series-scatter","timeline","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"5***l"}}