{"status":0,"data":{"cid":"xu5ZSvlAFY","authorUid":"bd-1042038476","authorUserName":"一***行","title":"柱图饼图组合","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-04-07T06:46:58.000Z","lastUpdateTime":"2020-04-07T06:46:58.000Z","auth":2,"uid":"bd-1042038476","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-18T15:55:18.000Z","code":"var data = [{\n        name: '幸福指数1',\n        data: [{\n            name: '<20',\n            value: '23'\n        }, {\n            name: '20~40',\n            value: '22'\n        }, {\n            name: '40~60',\n            value: '11'\n        }, {\n            name: '60~80',\n            value: '35'\n        }, {\n            name: '>80',\n            value: '35'\n        }]\n    },\n    {\n        name: '幸福指数2',\n        data: [{\n            name: '<20',\n            value: '34'\n        }, {\n            name: '20~40',\n            value: '34'\n        }, {\n            name: '40~60',\n            value: '23'\n        }, {\n            name: '60~80',\n            value: '32'\n        }, {\n            name: '>80',\n            value: '23'\n        }]\n    },\n    {\n        name: '幸福指数3',\n        data: [{\n            name: '<20',\n            value: '12'\n        }, {\n            name: '20~40',\n            value: '2'\n        }, {\n            name: '40~60',\n            value: '22'\n        }, {\n            name: '60~80',\n            value: '32'\n        }, {\n            name: '>80',\n            value: '12'\n        }]\n    },\n    {\n        name: '幸福指数4',\n        data: [{\n            name: '<20',\n            value: '11'\n        }, {\n            name: '20~40',\n            value: '22'\n        }, {\n            name: '40~60',\n            value: '52'\n        }, {\n            name: '60~80',\n            value: '62'\n        }, {\n            name: '>80',\n            value: '22'\n        }]\n    },\n    {\n        name: '幸福指数5',\n        data: [{\n            name: '<20',\n            value: '42'\n        }, {\n            name: '20~40',\n            value: '32'\n        }, {\n            name: '40~60',\n            value: '32'\n        }, {\n            name: '60~80',\n            value: '52'\n        }, {\n            name: '>80',\n            value: '42'\n        }]\n    },\n]\n\nvar pieData = new Array(5);\nfor (var index = 0; index < data.length; index++) {\n    pieData[index] = [];\n    data.map((item, i) => {\n        console.log(item.data)\n        pieData[index].push(item.data[index]);\n    })\n}\npieData = pieData.map((item, i) => {\n    item = item.map((ite, index) => {\n        ite.age = ite.name;\n        ite.name = index + 1\n        return ite;\n    })\n    return item;\n})\n\nvar serPiePisition  = [[\"10%\", \"80%\"],[\"30%\", \"80%\"],[\"50%\", \"80%\"],[\"70%\", \"80%\"],[\"90%\", \"80%\"]];\nvar serPie = {\n\n        name: \"采购方式统计1\",\n        type: \"pie\",\n        radius: \"20%\",\n        //center: [\"30%\", \"80%\"],\n        // labelLine: {\n        //     length: 5,\n        //     length2: 5\n        // },\n        label: {\n            position: 'inside'\n        },\n        //data: pieData[1],\n        itemStyle: {\n            normal: {\n                label: {\n                    show: true,\n                    position: 'inside',\n                    formatter: \"{b} \\n ({d}%)\",\n                    textStyle: {\n                        // color: \"#fff\"\n                    },\n\n                }\n            }\n        }\n    }\n    \nvar pieData = pieData.map((item,i)=>{\n    serPie.data  = item;\n    serPie.center = serPiePisition[i];\n    return JSON.parse(JSON.stringify(serPie));\n})    \nconsole.log(pieData)\noption = {\n    title: [{\n        text: '',\n\n    }, {\n        text: '各指数年龄占比',\n        x: \"10\",\n        top: \"55%\",\n    }],\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        },\n        //formatter: \"{b} ({c})\"\n    },\n\n    legend: {\n        data: ['1', '2', '3', '4', '5'],\n        align: 'right',\n        right: 10\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '53%',\n        containLabel: true\n    },\n    xAxis: [{\n        name: '年龄',\n        type: 'category',\n        data: ['<20', '20~40', '40~60', '60~80', '>80']\n    }],\n    yAxis: [{\n        type: 'value',\n        name: 'count',\n        axisLabel: {\n            formatter: '{value}'\n        }\n    }],\n    series: [{\n        name: '1',\n        type: 'bar',\n        data: data[0].data\n    }, {\n        name: '2',\n        type: 'bar',\n        data: data[1].data\n    }, {\n        name: '3',\n        type: 'bar',\n        data: data[2].data\n    }, {\n        name: '4',\n        type: 'bar',\n        data: data[3].data\n    }, {\n        name: '5',\n        type: 'bar',\n        data: data[4].data\n    }, ...pieData]\n};","html":"","externalScripts":"","updaterUID":"bd-1042038476","theme":"","layout":"","viewCount":533,"userName":"一***行","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xu5ZSvlAFY.png?v=1587225319106","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"一***行"}}