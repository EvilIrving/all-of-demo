{"status":0,"data":{"cid":"x2U93RZDvL","authorUid":"obd-olklQJ5sjZKwPYyZ-aqnIwaQIE1sk0O","authorUserName":"j***e","title":"模块统计自动轮播图饼图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-11-23T07:06:36.000Z","lastUpdateTime":"2021-11-23T09:49:12.000Z","auth":2,"uid":"obd-olklQJ5sjZKwPYyZ-aqnIwaQIE1sk0O","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-11-23T09:49:12.000Z","code":"var title = '总成绩';\nvar colorList = ['#7ed4ac', '#fe9c3a', '#ebd571', '#eb7c6f', '#0bb4d7', '#8fcde5', '#00c973'];\nvar seriesData = [\n    {\n        name: '单项实训', //模块名称\n        total: '80', //总共成绩\n        value: '52', //占比\n        excellent: '95', //优秀(90-100)\n        good: '82', //良好(80-90)\n        medium: '74', //中等(70-80)\n        pass: '62', //及格(60-70)\n        failed: '40', //不及格(0-60)\n        low: '20', //低分率(0-30)\n        overtake: '30', //超均率(平均分)\n    },\n    {\n        name: '模拟测试', //模块名称\n        total: '84', //总共成绩\n        value: '40', //占比\n        excellent: '98', //优秀(90-100)\n        good: '85', //良好(80-90)\n        medium: '73', //中等(70-80)\n        pass: '68', //及格(60-70)\n        failed: '41', //不及格(0-60)\n        low: '25', //低分率(0-30)\n        overtake: '32', //超均率(平均分)\n    },\n    {\n        name: '综合实训', //模块名称\n        total: '90', //总共成绩\n        value: '53', //占比\n        excellent: '86', //优秀(90-100)\n        good: '81', //良好(80-90)\n        medium: '74', //中等(70-80)\n        pass: '67', //及格(60-70)\n        failed: '49', //不及格(0-60)\n        low: '2', //低分率(0-30)\n        overtake: '31', //超均率(平均分)\n    },\n    {\n        name: '案例中心', //模块名称\n        total: '85', //总共成绩\n        value: '40', //占比\n        excellent: '60', //优秀(90-100)\n        good: '56', //良好(80-90)\n        medium: '40', //中等(70-80)\n        pass: '52', //及格(60-70)\n        failed: '30', //不及格(0-60)\n        low: '25', //低分率(0-30)\n        overtake: '38', //超均率(平均分)\n    },\n    {\n        name: 'VR场景', //模块名称\n        total: '70', //总共成绩\n        value: '50', //占比\n        excellent: '50', //优秀(90-100)\n        good: '70', //良好(80-90)\n        medium: '60', //中等(70-80)\n        pass: '50', //及格(60-70)\n        failed: '40', //不及格(0-60)\n        low: '20', //低分率(0-30)\n        overtake: '30', //超均率(平均分)\n    },\n    {\n        name: '课堂表现', //模块名称\n        total: '81', //总共成绩\n        value: '40', //占比\n        excellent: '81', //优秀(90-100)\n        good: '78', //良好(80-90)\n        medium: '68', //中等(70-80)\n        pass: '60', //及格(60-70)\n        failed: '44', //不及格(0-60)\n        low: '25', //低分率(0-30)\n        overtake: '37', //超均率(平均分)\n    },\n    {\n        name: '课外作业', //模块名称\n        total: '80', //总共成绩\n        value: '70', //占比\n        excellent: '90', //优秀(90-100)\n        good: '84', //良好(80-90)\n        medium: '72', //中等(70-80)\n        pass: '63', //及格(60-70)\n        failed: '45', //不及格(0-60)\n        low: '26', //低分率(0-30)\n        overtake: '34', //超均率(平均分)\n    },\n];\nvar formatNumber = function (num) {\n    var reg = /(?=(\\B)(\\d{3})+$)/g;\n    return num.toString().replace(reg, ',');\n};\n// var total = seriesData.reduce((a, b) => {\n//     return a + b.value * 1;\n// }, 0);\noption = {\n    backgroundColor: '#000c31',\n    color: colorList,\n    title: [\n        {\n            textStyle: {},\n        },\n        {\n            top: 'center',\n            right: 'center',\n        },\n    ],\n    tooltip: {\n        trigger: 'item',\n        borderColor: 'rgba(255,255,255,.3)',\n        backgroundColor: 'rgba(13,5,30,.6)',\n        borderWidth: 1,\n        padding: 5,\n        textStyle: {\n            fontSize: 14,\n            color: '#fff',\n        },\n        formatter: function (parms) {\n            var str =\n                parms.marker +\n                '' +\n                parms.data.name +\n                '</br>' +\n                '优秀(90-100)：' +\n                parms.data.excellent +\n                '%</br>' +\n                '良好(80-90)：' +\n                parms.data.good +\n                '%</br>' +\n                '中等(70-80)：' +\n                parms.data.medium +\n                '%</br>' +\n                '及格(60-70)：' +\n                parms.data.pass +\n                '%</br>' +\n                '不及格(0-60)：' +\n                parms.data.failed +\n                '%</br>' +\n                '低分率(0-30)：' +\n                parms.data.low +\n                '%</br>' +\n                '超均率(平均分)：' +\n                parms.data.overtake +\n                '分';\n            return str;\n        },\n    },\n    legend: {\n        type: 'scroll',\n        orient: 'horizontal',\n        icon: 'square',\n        top: '80%',\n        left: 'center',\n        align: 'auto',\n        textStyle: {\n            color: '#fff',\n        },\n        data: seriesData,\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: ['25%', '45%'],\n            center: ['50%', '50%'],\n            data: seriesData,\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                    borderColor: colorList,\n                    borderWidth: 0,\n                },\n            },\n            labelLine: {\n                normal: {\n                    lineStyle: {\n                        color: '#e6e6e6',\n                    },\n                },\n            },\n            label: {\n                normal: {\n                    formatter: '{icon|●}{name|{b}}',\n                    rich: {\n                        icon: {\n                            fontSize: 20,\n                        },\n                        name: {\n                            fontSize: 14,\n                            padding: [0, 10, 0, 4],\n                        },\n                    },\n                },\n            },\n        },\n    ],\n};\nmyChart.on('highlight', function (event) {\n    var name = seriesData[event.dataIndex].name;\n    var value = seriesData[event.dataIndex].value;\n    option.title[1].text = '{name|' + title + '}\\n{val|' + value + '%}';\n    option.title[1].textStyle = {\n        rich: {\n            name: {\n                fontSize: 17,\n                align: 'center',\n                fontWeight: 'normal',\n                padding: [10, 0],\n                color: colorList[event.dataIndex],\n            },\n            val: {\n                fontSize: 26,\n                align: 'center',\n                fontWeight: 'bold',\n                color: colorList[event.dataIndex],\n            },\n        },\n    };\n    myChart.setOption(option);\n});\n\nautoHover(myChart, option, seriesData.length, 3000);\n\n/**\n *  echarts tooltip 自动轮播\n *  @author liuwei\n *  @param myChart  //初始化echarts的实例\n *  @param option   //指定图表的配置项和数据\n *  @param num      //类目数量(原因：循环时达到最大值后，使其从头开始循环)\n *  @param time     //轮播间隔时长\n */\nfunction autoHover(myChart, option, num, time) {\n    var defaultData = {\n        //设置默认值\n        time: 2000,\n        num: 100,\n    };\n    if (!time) {\n        time = defaultData.time;\n    }\n    if (!num) {\n        num = defaultData.num;\n    }\n    var count = 0;\n    var timeTicket = null;\n    timeTicket && clearInterval(timeTicket);\n    timeTicket = setInterval(function () {\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0, //serieIndex的索引值   可以触发多个\n        });\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: count,\n        });\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: count,\n        });\n        count++;\n        if (count >= num) {\n            count = 0;\n        }\n    }, time);\n    myChart.on('mouseover', function (params) {\n        clearInterval(timeTicket);\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n        });\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: params.dataIndex,\n        });\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: params.dataIndex,\n        });\n    });\n    myChart.on('mouseout', function () {\n        timeTicket && clearInterval(timeTicket);\n        timeTicket = setInterval(function () {\n            myChart.dispatchAction({\n                type: 'downplay',\n                seriesIndex: 0, //serieIndex的索引值   可以触发多个\n            });\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 0,\n                dataIndex: count,\n            });\n            myChart.dispatchAction({\n                type: 'showTip',\n                seriesIndex: 0,\n                dataIndex: count,\n            });\n            count++;\n            if (count >= defaultData.num) {\n                count = 0;\n            }\n        }, defaultData.time);\n    });\n}\n","html":"","externalScripts":"","updaterUID":"obd-olklQJ5sjZKwPYyZ-aqnIwaQIE1sk0O","theme":"","layout":"","viewCount":0,"userName":"j***e","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x2U93RZDvL.png?v=1637660952629","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"j***e"}}