{"status":0,"data":{"cid":"xpjGnhgF9T","authorUid":"obd-oCXn67MwmqoTDcveizrSw1RpkKrED3S","authorUserName":"小***卡","title":"2016-2020年中国各省市火力发电量动态变化","description":"","latestVersion":13,"alwaysLatest":0,"createTime":"2021-12-20T09:50:00.000Z","lastUpdateTime":"2021-12-20T13:20:06.000Z","auth":2,"uid":"obd-oCXn67MwmqoTDcveizrSw1RpkKrED3S","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":13,"parentVersion":12,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-20T13:20:06.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1639194598494-6-HZqJr6g.json';\nvar geoGpsMap = [121.4648, 31.2891];\nvar t = 1;\nvar r = 1;\n//所有地点坐标\nvar geoCoordMap = {\n    江苏: [118.8062, 31.9208],\n    黑龙江: [127.9688, 45.368],\n    内蒙古: [110.3467, 41.4899],\n    吉林: [125.8154, 44.2584],\n    北京: [116.4551, 40.2539],\n    辽宁: [123.1238, 42.1216],\n    河北: [114.4995, 38.1006],\n    天津: [117.4219, 39.4189],\n    山西: [112.3352, 37.9413],\n    陕西: [109.1162, 34.2004],\n    甘肃: [103.5901, 36.3043],\n    宁夏: [106.3586, 38.1775],\n    青海: [101.4038, 36.8207],\n    新疆: [87.9236, 43.5883],\n    四川: [103.9526, 30.7617],\n    重庆: [108.384366, 30.439702],\n    山东: [117.1582, 36.8701],\n    河南: [113.4668, 34.6234],\n    安徽: [117.29, 32.0581],\n    湖北: [114.3896, 30.6628],\n    浙江: [119.5313, 29.8773],\n    福建: [119.4543, 25.9222],\n    江西: [116.0046, 28.6633],\n    湖南: [113.0823, 28.2568],\n    贵州: [106.6992, 26.7682],\n    云南: [102.9199, 25.4663],\n    广东: [113.12244, 23.009505],\n    广西: [108.479, 23.1152],\n    海南: [110.3893, 19.8516],\n    上海: [121.4648, 31.2891],\n    西藏: [91.11, 29.97],\n};\n\nvar d1 = {\n    山东: 4976.2,\n    内蒙古: 3312.8,\n    江苏: 4397.3,\n    广东: 2971,\n    新疆: 2215.1,\n    山西: 2354.2,\n    河北: 2371.3,\n    安徽: 2129.9,\n    河南: 2516.2,\n    浙江: 2374,\n    陕西: 1580,\n    福建: 900.2,\n    宁夏: 894.3,\n    辽宁: 1398.8,\n    贵州: 1113.5,\n    湖北: 1012,\n    江西: 832.3,\n    广西: 574.2,\n    黑龙江: 802.8,\n    甘肃: 702.9,\n    湖南: 722.6,\n    上海: 800.1,\n    吉林: 578.4,\n    天津: 610.3,\n    重庆: 448.6,\n    四川: 397.8,\n    北京: 417.5,\n    云南: 236.3,\n    海南: 194.6,\n    青海: 120.9,\n    西藏: 1.5,\n};\nvar d2 = {\n    山东: 4808.2,\n    内蒙古: 3659.2,\n    江苏: 4437.9,\n    广东: 3327.3,\n    新疆: 2349.2,\n    山西: 2572.6,\n    河北: 2475.5,\n    安徽: 2305.7,\n    河南: 2564.9,\n    浙江: 2554.1,\n    陕西: 1585.1,\n    福建: 1118.1,\n    宁夏: 1073.5,\n    辽宁: 1407.8,\n    贵州: 1133.4,\n    湖北: 1042,\n    江西: 939.1,\n    广西: 617.3,\n    黑龙江: 805.1,\n    甘肃: 713.6,\n    湖南: 786,\n    上海: 822.8,\n    吉林: 596.9,\n    天津: 603.4,\n    重庆: 468.5,\n    四川: 380.5,\n    北京: 372.3,\n    云南: 237.1,\n    海南: 194.6,\n    青海: 161.2,\n    西藏: 1.6,\n};\nvar d3 = {\n    山东: 5367.7,\n    内蒙古: 4138.4,\n    江苏: 4477.3,\n    广东: 3260.1,\n    新疆: 2517.8,\n    山西: 2787.5,\n    河北: 2723.2,\n    安徽: 2491.3,\n    河南: 2708.3,\n    浙江: 2583.4,\n    陕西: 1566.6,\n    福建: 1390.4,\n    宁夏: 1261.9,\n    辽宁: 1411.1,\n    贵州: 1217.6,\n    湖北: 1237,\n    江西: 1056.3,\n    广西: 825.7,\n    黑龙江: 873.9,\n    甘肃: 776.8,\n    湖南: 912.5,\n    上海: 813.5,\n    吉林: 671.2,\n    天津: 692.6,\n    重庆: 539.1,\n    四川: 447.9,\n    北京: 422.8,\n    云南: 287.3,\n    海南: 210.3,\n    青海: 123.1,\n    西藏: 2.2,\n};\nvar d4 = {\n    山东: 5169.4,\n    内蒙古: 4556.1,\n    江苏: 4439,\n    广东: 3346,\n    新疆: 2822,\n    山西: 2930.5,\n    河北: 2755.2,\n    安徽: 2637.2,\n    河南: 2532,\n    浙江: 2494.4,\n    陕西: 1859.1,\n    福建: 1406.4,\n    宁夏: 1416.6,\n    辽宁: 1473.6,\n    贵州: 1338.8,\n    湖北: 1466.8,\n    江西: 1095,\n    广西: 1005.8,\n    黑龙江: 911.6,\n    甘肃: 785.3,\n    湖南: 903.7,\n    上海: 783.2,\n    吉林: 719.4,\n    天津: 701.8,\n    重庆: 552.6,\n    四川: 502.5,\n    北京: 420.5,\n    云南: 309.3,\n    海南: 209.8,\n    青海: 106.7,\n    西藏: 3.9,\n};\nvar d5 = {\n    山东: 5067.2,\n    内蒙古: 4782,\n    江苏: 4390.5,\n    广东: 3575.9,\n    新疆: 3257.6,\n    山西: 3019.1,\n    河北: 2750.5,\n    安徽: 2527.3,\n    河南: 2481.9,\n    浙江: 2428.2,\n    陕西: 2008.7,\n    福建: 1561.4,\n    宁夏: 1529.3,\n    辽宁: 1498.1,\n    贵州: 1329.3,\n    湖北: 1216.4,\n    江西: 1158.1,\n    广西: 1064.7,\n    黑龙江: 921.6,\n    甘肃: 874.4,\n    湖南: 851.2,\n    上海: 803.7,\n    吉林: 749.9,\n    天津: 737.7,\n    重庆: 535,\n    四川: 524.4,\n    北京: 429.1,\n    云南: 409.8,\n    海南: 208.2,\n    青海: 103.6,\n    西藏: 4.1,\n};\ntotal = [43957.6, 46114.5, 49794.8, 51654.2, 52798.9];\n\nvar colors = ['#1DE9B6', '#EEDD78', '#FFFF00', '#FFDB5C', '#37A2DA', '#04B9FF'];\nvar colorIndex = 0;\n$(function () {\n    var year = ['2016', '2017', '2018', '2019', '2020'];\n    var mapData = [[], [], [], [], []];\n\n    /*柱子Y名称*/\n    var categoryData = [];\n    var barData = [];\n\n    for (var key in geoCoordMap) {\n        mapData[0].push({\n            year: '2016',\n            name: key,\n            value: d1[key] / 25,\n            value1: d1[key] / 10,\n        });\n        mapData[1].push({\n            year: '2017',\n            name: key,\n            value: d2[key] / 25,\n            value1: d2[key] / 10,\n        });\n        mapData[2].push({\n            year: '2018',\n            name: key,\n            value: d3[key] / 25,\n            value1: d3[key] / 10,\n        });\n        mapData[3].push({\n            year: '2019',\n            name: key,\n            value: d4[key] / 25,\n            value1: d4[key] / 10,\n        });\n        mapData[4].push({\n            year: '2020',\n            name: key,\n            value: d5[key] / 25,\n            value1: d5[key] / 10,\n        });\n    }\n\n    for (var i = 0; i < mapData.length; i++) {\n        mapData[i].sort(function sortNumber(a, b) {\n            return a.value - b.value;\n        });\n        barData.push([]);\n        categoryData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            barData[i].push(mapData[i][j].value1 * 10);\n            categoryData[i].push(mapData[i][j].name);\n        }\n    }\n\n    $.getJSON(uploadedDataURL, function (geoJson) {\n        $('body').css({\n            background:\n                'url(https://corgixuoos.oss-cn-shanghai.aliyuncs.com/soc/0623%E4%BF%AE%E6%94%B9%E5%A4%A7%E5%B1%8F-%E6%95%B4%E4%BD%93-Recovered.png) repeat-y', //'#2a6d87',\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n        });\n\n        echarts.registerMap('china', geoJson);\n        var convertData = function (data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value),\n                    });\n                }\n            }\n            return res;\n        };\n\n        var convertToLineData = function (data, gps) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var dataItem = data[i];\n                var toCoord = geoCoordMap[dataItem.name];\n                var fromCoord = gps;\n                if (fromCoord && toCoord) {\n                    if (t == 1) {\n                        res.push([\n                            {\n                                coord: toCoord,\n                            },\n                            {\n                                coord: fromCoord,\n                                value: dataItem.value,\n                            },\n                        ]);\n                    } else {\n                        res.push([\n                            {\n                                coord: fromCoord,\n                                value: dataItem.value,\n                            },\n                            {\n                                coord: toCoord,\n                            },\n                        ]);\n                    }\n                }\n            }\n            if (t == 0) {\n                t = 1;\n            } else {\n                t = 0;\n            }\n            return res;\n        };\n\n        var optionXyMap01 = {\n            timeline: {\n                data: year,\n                axisType: 'category',\n                autoPlay: true,\n                playInterval: 1500, //时间间隔\n                left: '8%',\n                right: '10%',\n                bottom: '3%',\n                width: '60%',\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff',\n                        },\n                    },\n                },\n                symbolSize: 10,\n                lineStyle: {\n                    color: '#FFFFFF',\n                },\n                checkpointStyle: {\n                    borderColor: '#FFFFFF',\n                    borderWidth: 2,\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666',\n                    },\n                    emphasis: {\n                        color: '#FFFFFF',\n                        borderColor: '#aaa',\n                    },\n                },\n            },\n            baseOption: {\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '2%',\n                    top: '10%',\n                    bottom: '10%',\n                    width: '18%',\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: {\n                        // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)', //hover颜色\n                        },\n                    },\n                },\n                visualMap: {\n                    min: 0,\n                    max: 6000,\n                    left: 'left',\n                    top: 'bottom',\n                    text: ['高', '低'],\n                    textStyle: {\n                        color: 'white',\n                    },\n                    calculable: true,\n                    colorLightness: [0.8, 100],\n                    color: ['#c05050', '#e5cf0d', '#5ab1ef'],\n                    dimension: 0,\n                    seriesIndex: 3, // 仅使第一个series生效\n                },\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887],\n                    label: {\n                        emphasis: {\n                            show: true,\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.4,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [\n                                    {\n                                        offset: 0,\n                                        color: 'rgba(3, 0, 38,9)', // 0% 处的颜色\n                                    },\n                                    {\n                                        offset: 1,\n                                        color: 'rgba(3, 0, 38,9)', // 100% 处的颜色\n                                    },\n                                ],\n                                globalCoord: false, // 缺省为 false\n                            },\n                            shadowColor: 'rgba(128, 217, 248, 9)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10,\n                        },\n                        emphasis: {\n                            areaColor: '#FCFFD9',\n                            borderWidth: 0,\n                        },\n                    },\n                },\n            },\n            options: [],\n        };\n\n        for (var n = 0; n < year.length; n++) {\n            var statistic_name = '火力发电年产量(亿千瓦时)';\n            optionXyMap01.options.push({\n                backgroundColor: '#012248',\n\n                title: [\n                    {\n                        text: '2016-2020年中国各省市火力发电量动态变化',\n                        left: 'center',\n                        top: '5%',\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 22,\n                        },\n                    },\n\n                    {\n                        id: 'statistic',\n                        text: statistic_name,\n                        left: '80%',\n                        top: '7%',\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 15,\n                        },\n                    },\n                    {\n                        text: '年度火力发电总量：' + total[n] + '亿千瓦时',\n                        left: 'center',\n                        top: '10%',\n                        textStyle: {\n                            color: '#FFAC50',\n                            fontSize: 16,\n                        },\n                    },\n                ],\n                grid: {\n                    right: 70,\n                    top: 90,\n                    bottom: 30,\n                    width: '220',\n                },\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false,\n                    },\n                    axisLine: {\n                        show: false,\n                    },\n                    axisTick: {\n                        show: false,\n                    },\n                    axisLabel: {\n                        margin: 1,\n                        textStyle: {\n                            color: '#aaa',\n                        },\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    nameGap: 16,\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    data: categoryData[n],\n                },\n\n                series: [\n                    {\n                        //文字和标志\n                        name: 'light',\n                        type: 'scatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(mapData[n]),\n                        symbolSize: function (val) {\n                            return val[2] / 5;\n                        },\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true,\n                            },\n                            emphasis: {\n                                show: true,\n                            },\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[1],\n                            },\n                        },\n                    },\n                    //地图？\n                    {\n                        type: 'map',\n                        map: 'china',\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: false, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: false,\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff',\n                                },\n                            },\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7',\n                            },\n                        },\n                        animation: false,\n                        data: mapData,\n                    },\n                    //地图点的动画效果\n                    {\n                        //  name: 'Top 5',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(\n                            mapData[n]\n                                .sort(function (a, b) {\n                                    return b.value - a.value;\n                                })\n                                .slice(0, 20)\n                        ),\n                        symbolSize: function (val) {\n                            return val[2] / 6;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke',\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true,\n                            },\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[1],\n                                shadowBlur: 100,\n                                shadowColor: colors[1],\n                            },\n                        },\n                        zlevel: 1,\n                    },\n                    //地图线的动画效果\n\n                    //柱状图\n                    {\n                        zlevel: 1.5,\n                        type: 'bar',\n                        barMaxWidth: 8,\n                        symbol: 'none',\n                        itemStyle: {\n                            normal: {\n                                color: colors[n],\n                                barBorderRadius: [0, 30, 30, 0],\n                            },\n                        },\n                        data: barData[n],\n                    },\n                ],\n            });\n            if (r == 0) {\n                r = 1;\n            } else {\n                r = 0;\n            }\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});\n","html":"","externalScripts":"","updaterUID":"obd-oCXn67MwmqoTDcveizrSw1RpkKrED3S","theme":"","layout":"","viewCount":0,"userName":"小***卡","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpjGnhgF9T.png?v=1640006406887","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","series-scatter","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"小***卡"}}