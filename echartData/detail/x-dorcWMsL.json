{"status":0,"data":{"cid":"x-dorcWMsL","authorUid":"bd-7896795","authorUserName":"sigechanxxx","title":"如何实现局部series重绘？","description":"如图，一共有两个series，包括一个heatmap和一个scatter，我想通过setInterval实现对scatter那个series的动态更新，但是我不想重新绘制heatmap（这里是模拟的数据，我自己的数据量特别大，heatmap绘制需要好几秒），但是在我的电脑上运行时，发现setOption会将两个series全部重新绘制，使得速度特别慢。\n我尝试了设置不同的zlevel，但是没有效果，仍然会将两个series都重新绘制，请问有什么办法只re-render scatter那个series，而不重新绘制heatmap那个series？谢谢","latestVersion":2,"alwaysLatest":1,"createTime":"2019-06-17T01:38:48.000Z","lastUpdateTime":"2019-06-17T01:38:48.000Z","auth":2,"uid":"bd-7896795","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-17T01:39:42.000Z","code":"var hours = ['12a', '1a', '2a', '3a', '4a', '5a', '6a',\n    '7a', '8a', '9a', '10a', '11a',\n    '12p', '1p', '2p', '3p', '4p', '5p',\n    '6p', '7p', '8p', '9p', '10p', '11p'\n];\nvar days = ['Saturday', 'Friday', 'Thursday',\n    'Wednesday', 'Tuesday', 'Monday', 'Sunday'\n];\n\nvar data = [\n    [0, 0, 5],\n    [0, 1, 1],\n    [0, 2, 0],\n    [0, 3, 0],\n    [0, 4, 0],\n    [0, 5, 0],\n    [0, 6, 0],\n    [0, 7, 0],\n    [0, 8, 0],\n    [0, 9, 0],\n    [0, 10, 0],\n    [0, 11, 2],\n    [0, 12, 4],\n    [0, 13, 1],\n    [0, 14, 1],\n    [0, 15, 3],\n    [0, 16, 4],\n    [0, 17, 6],\n    [0, 18, 4],\n    [0, 19, 4],\n    [0, 20, 3],\n    [0, 21, 3],\n    [0, 22, 2],\n    [0, 23, 5],\n    [1, 0, 7],\n    [1, 1, 0],\n    [1, 2, 0],\n    [1, 3, 0],\n    [1, 4, 0],\n    [1, 5, 0],\n    [1, 6, 0],\n    [1, 7, 0],\n    [1, 8, 0],\n    [1, 9, 0],\n    [1, 10, 5],\n    [1, 11, 2],\n    [1, 12, 2],\n    [1, 13, 6],\n    [1, 14, 9],\n    [1, 15, 11],\n    [1, 16, 6],\n    [1, 17, 7],\n    [1, 18, 8],\n    [1, 19, 12],\n    [1, 20, 5],\n    [1, 21, 5],\n    [1, 22, 7],\n    [1, 23, 2],\n    [2, 0, 1],\n    [2, 1, 1],\n    [2, 2, 0],\n    [2, 3, 0],\n    [2, 4, 0],\n    [2, 5, 0],\n    [2, 6, 0],\n    [2, 7, 0],\n    [2, 8, 0],\n    [2, 9, 0],\n    [2, 10, 3],\n    [2, 11, 2],\n    [2, 12, 1],\n    [2, 13, 9],\n    [2, 14, 8],\n    [2, 15, 10],\n    [2, 16, 6],\n    [2, 17, 5],\n    [2, 18, 5],\n    [2, 19, 5],\n    [2, 20, 7],\n    [2, 21, 4],\n    [2, 22, 2],\n    [2, 23, 4],\n    [3, 0, 7],\n    [3, 1, 3],\n    [3, 2, 0],\n    [3, 3, 0],\n    [3, 4, 0],\n    [3, 5, 0],\n    [3, 6, 0],\n    [3, 7, 0],\n    [3, 8, 1],\n    [3, 9, 0],\n    [3, 10, 5],\n    [3, 11, 4],\n    [3, 12, 7],\n    [3, 13, 14],\n    [3, 14, 13],\n    [3, 15, 12],\n    [3, 16, 9],\n    [3, 17, 5],\n    [3, 18, 5],\n    [3, 19, 10],\n    [3, 20, 6],\n    [3, 21, 4],\n    [3, 22, 4],\n    [3, 23, 1],\n    [4, 0, 1],\n    [4, 1, 3],\n    [4, 2, 0],\n    [4, 3, 0],\n    [4, 4, 0],\n    [4, 5, 1],\n    [4, 6, 0],\n    [4, 7, 0],\n    [4, 8, 0],\n    [4, 9, 2],\n    [4, 10, 4],\n    [4, 11, 4],\n    [4, 12, 2],\n    [4, 13, 4],\n    [4, 14, 4],\n    [4, 15, 14],\n    [4, 16, 12],\n    [4, 17, 1],\n    [4, 18, 8],\n    [4, 19, 5],\n    [4, 20, 3],\n    [4, 21, 7],\n    [4, 22, 3],\n    [4, 23, 0],\n    [5, 0, 2],\n    [5, 1, 1],\n    [5, 2, 0],\n    [5, 3, 3],\n    [5, 4, 0],\n    [5, 5, 0],\n    [5, 6, 0],\n    [5, 7, 0],\n    [5, 8, 2],\n    [5, 9, 0],\n    [5, 10, 4],\n    [5, 11, 1],\n    [5, 12, 5],\n    [5, 13, 10],\n    [5, 14, 5],\n    [5, 15, 7],\n    [5, 16, 11],\n    [5, 17, 6],\n    [5, 18, 0],\n    [5, 19, 5],\n    [5, 20, 3],\n    [5, 21, 4],\n    [5, 22, 2],\n    [5, 23, 0],\n    [6, 0, 1],\n    [6, 1, 0],\n    [6, 2, 0],\n    [6, 3, 0],\n    [6, 4, 0],\n    [6, 5, 0],\n    [6, 6, 0],\n    [6, 7, 0],\n    [6, 8, 0],\n    [6, 9, 0],\n    [6, 10, 1],\n    [6, 11, 0],\n    [6, 12, 2],\n    [6, 13, 1],\n    [6, 14, 3],\n    [6, 15, 4],\n    [6, 16, 0],\n    [6, 17, 0],\n    [6, 18, 0],\n    [6, 19, 0],\n    [6, 20, 1],\n    [6, 21, 2],\n    [6, 22, 2],\n    [6, 23, 6]\n];\n\nvar data2 = [\n    [1, 2, 5],\n    [2, 2, 6],\n    [3, 3, 7]\n]\nvar count = 0\n\ndata = data.map(function(item) {\n    return [item[1], item[0], item[2] || '-'];\n});\n\noption = {\n    tooltip: {\n        position: 'top'\n    },\n    animation: false,\n    grid: {\n        height: '30%',\n        y: '10%'\n    },\n    xAxis: {\n        type: 'category',\n        data: hours,\n        splitArea: {\n            show: true\n        }\n    },\n    yAxis: {\n        type: 'category',\n        data: days,\n        splitArea: {\n            show: true\n        }\n    },\n    visualMap: [{\n        min: 0,\n        max: 10,\n        calculable: true,\n        orient: 'horizontal',\n        left: 'center',\n        bottom: '15%',\n        seriesIndex: [0],\n        show: true\n    }, {\n        left: 'right',\n        top: '10%',\n        dimension: 2,\n        min: 5,\n        max: 8,\n        itemWidth: 30,\n        itemHeight: 120,\n        calculable: false,\n        show: false,\n        precision: 0.1,\n        inRange: {\n            symbolSize: [20, 40]\n        },\n        seriIndex: [1, 2]\n    }],\n    series: [{\n            name: 'Punch Card',\n            type: 'heatmap',\n            data: data,\n            label: {\n                normal: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                emphasis: {\n                    shadowBlur: 10,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n            zlevel: 2\n        },\n        {\n            name: 'before',\n            type: 'scatter',\n            color: 'red',\n            data: data2,\n            zlevel: 3\n        },\n    ]\n};\n\n\nsetInterval(function() {\n    for (let i = 0; i < 3; i++) {\n        data2[i][0] += (count++ % 2) * 2 - 1\n    }\n\n    myChart.setOption({\n        series: [{\n            data: data\n        }, {\n            data: data2\n        }]\n    });\n}, 1000);","html":"","externalScripts":"","updaterUID":"bd-7896795","theme":"","layout":"","viewCount":1658,"userName":"sigechanxxx","commentCount":0,"starCount":11,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-dorcWMsL.png?v=1560735528662","isCustomThumbnail":1,"builtinTags":["category-work","grid","series-heatmap","series-scatter","tooltip","visualMap"],"customTags":["refresh","update"],"updaterUserName":"sigechanxxx"}}