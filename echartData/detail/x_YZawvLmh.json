{"status":0,"data":{"cid":"x_YZawvLmh","authorUid":"bd-2217967868","authorUserName":"5***3","title":"往地图上添加图标点","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-07-03T09:49:42.000Z","lastUpdateTime":"2020-07-03T09:49:42.000Z","auth":1,"uid":"bd-2217967868","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-03T09:50:21.000Z","code":"\n\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\nvar imageURL=\"/asset/get/s/data-1556957097230-ADWAaIDQo.png\"\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    console.log(geoJson)\n    echarts.registerMap('china', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n    '黑龙江': [127.9688, 45.368],\n    '内蒙古': [110.3467, 41.4899],\n    \"吉林\": [125.8154, 44.2584],\n    '北京市': [116.4551, 40.2539],\n    \"辽宁\": [123.1238, 42.1216],\n    \"河北\": [114.4995, 38.1006],\n    \"天津\": [117.4219, 39.4189],\n    \"山西\": [112.3352, 37.9413]\n    \n};\nvar geoCoordMap2={\n    '食堂1': [126.4688, 45.368],\n    '食堂2': [109.3467, 41.4899],\n    \"食堂3\": [124.8154, 44.2584],\n    '食堂4': [115.4551, 40.2539],\n    \"食堂5\": [122.1238, 42.1216],\n    \"食堂6\": [113.8995, 38.5006],\n    \"食堂7\": [116.4219, 38.4189],\n    \"食堂8\": [111.3352, 36.9413]\n}\n    var data1 = [\n        {name:\"黑龙江\",value:199},\n    {name:\"内蒙古\",value:42},\n    {name:\"吉林\",value:102},\n    {name:\"北京市\",value:81},\n    {name:\"辽宁\",value:47},\n    {name:\"河北\",value:67},\n    {name:\"天津\",value:82},\n    {name:\"山西\",value:123}\n    ];\n    var data2=[\n     {name:\"食堂1\",value:199,adr:\"黑龙江街道\"},\n    {name:\"食堂2\",value:42,adr:\"内蒙古街道\"},\n    {name:\"食堂3\",value:102,adr:\"吉林街道\"},\n    {name:\"食堂4\",value:81,adr:\"北京市街道\"},\n    {name:\"食堂5\",value:47,adr:\"辽宁街道\"},\n    {name:\"食堂6\",value:67,adr:\"河北街道\"},\n    {name:\"食堂7\",value:82,adr:\"天津街道\"},\n    {name:\"食堂8\",value:123,adr:\"山西街道\"}\n        ]\n\n  var convertData = function (data,geoCoordMap) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord\n            });\n        }\n    }\n    return res;\n};\n\n\n\n    option = {\n        backgroundColor: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 1,\n        y2: 1,\n        colorStops: [{\n            offset: 0, color: '#0f378f' // 0% 处的颜色\n        }, {\n            offset: 1, color: '#00091a' // 100% 处的颜色\n        }],\n        globalCoord: false // 缺省为 false\n    },\n        title: {\n            top:20,\n            text: '地图散点图标使用',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n       tooltip: {\n            trigger: 'item',\n            triggerOn:'none',\n            enterable: true,\n            transitionDuration: 0.3,\n            formatter: function (params) {\n                var html='<div style=\"width:250px;height:200px;\"><div style=\"float:right;width:100px;height:30px;background-color:blue;text-align:center;line-height:30px;\">查看详情>></div></div>'\n              return html\n            }\n        },\n     /*   legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n             data:['pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },*/\n            legend: {\n        orient: 'vertical',\n        y: 'bottom',\n        x:'right',\n        data:['pm2.5'],\n        textStyle: {\n            color: '#fff'\n        }\n    }, \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n\n            }\n        },\n        geo: {\n            map: 'china',\n            show: true,\n            roam: true,\n            label: {\n\t\t\t\tnormal: {\n\t\t\t\t\tshow: false\n\t\t\t\t},\n\t\t\t\temphasis: {\n\t\t\t\t\tshow: false,\n\t\t\t\t}\n\t\t\t},\n            itemStyle: {\n                normal: {\n                    areaColor: '#3a7fd5',\n                    borderColor: '#0a53e9',//线\n                },\n\t\t\t\t emphasis: {\n                    areaColor: '#0a2dae',//悬浮区背景\n                }\n            }\n        },\n        series : [\n      {\n         \n            symbolSize: 5,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#fff'\n                }\n            },\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data1,geoCoordMap),\n            \n        },\n        {\n            name: '数据',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'image://'+imageURL,\n            symbolSize: [30,30],\n            label: {\n                normal: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    },\n                    formatter (value){\n                        return value.data.value[2]\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#D8BC37', //标志颜色\n                }\n            },\n            data: convertData(data2,geoCoordMap2),\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            zlevel: 1\n        },\n         \n    ]\n    };\n    myChart.setOption(option);\n    console.log(option)\n    myChart.on('mouseover', function(params) {\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 1,\n        dataIndex: params.dataIndex,\n    });\n});\n    myChart.on('mouseout', function(params) {\n    myChart.dispatchAction({\n        type: 'hideTip',\n        seriesIndex: 1,\n        dataIndex: params.dataIndex,\n    });\n});\n});","html":"","externalScripts":"","updaterUID":"bd-2217967868","theme":"","layout":"","viewCount":326,"userName":"5***3","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_YZawvLmh.png?v=1593769821931","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-scatter","title","tooltip","visualMap"],"customTags":["scatter","tooltip"],"updaterUserName":"5***3"}}