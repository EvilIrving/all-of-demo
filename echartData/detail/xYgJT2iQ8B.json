{"status":0,"data":{"cid":"xYgJT2iQ8B","authorUid":"bd-143495432","authorUserName":"d***3","title":"彩虹图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-04-18T04:28:43.000Z","lastUpdateTime":"2019-04-18T04:28:43.000Z","auth":2,"uid":"bd-143495432","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-04-18T04:28:43.000Z","code":"var test_data = [\r\n          {\r\n              \"name\": \"22\",\r\n              \"value\": \"1224760.49\"\r\n          },\r\n          {\r\n              \"name\": \"33\",\r\n              \"value\": \"1418392.50\"\r\n          },\r\n          {\r\n              \"name\": \"25-29\",\r\n              \"value\": \"1318392.50\"\r\n          }\r\n      ];\r\n      var maxData = 1418392.50,\r\n          seriesd = [],\r\n          legend = [];\r\n      \r\n      for (var j in test_data) {\r\n          if (legend.indexOf(test_data[j][\"name\"] == -1)) {\r\n              legend.push({\r\n                  'icon': 'rect',\r\n                  \"name\": test_data[j][\"name\"]\r\n              });\r\n          }\r\n          var ra = test_data.length - 1 - j;\r\n          seriesd.push({\r\n              name: test_data[j][\"name\"],\r\n              type: 'pie',\r\n              radius: [(ra*20 + 52)+\"%\", (43 + ra * 20) +\"%\" ],\r\n              itemStyle: {\r\n                  normal: {\r\n                      label: {\r\n                          show: false\r\n                      }\r\n                  }\r\n              },\r\n              hoverAnimation: false,\r\n              startAngle: 180,\r\n              center: [\"45%\", \"75%\"],\r\n              data: [{\r\n                      value: test_data[j][\"value\"],\r\n                      name: test_data[j][\"name\"],\r\n                      label: {\r\n                          normal: {\r\n                              postion: \"center\"\r\n                          }\r\n                      },\r\n                  },\r\n                  {\r\n                      value: maxData - test_data[j][\"value\"],\r\n                      itemStyle: {\r\n                          normal: {\r\n                              color: 'rgba(203,203,203,0.5)',\r\n                              label: {\r\n                                  show: false\r\n                              },\r\n                              labelLine: {\r\n                                  show: false\r\n                              }\r\n                          },\r\n                          emphasis: {\r\n                              color: 'rgba(203,203,203,1)'\r\n                          }\r\n                      },\r\n                      name: 'showtip_' + test_data[j][\"value\"]\r\n                  },\r\n                  {\r\n                      value: maxData,\r\n                      itemStyle: {\r\n                          normal: {\r\n                              color: 'rgba(0,0,0,0)',\r\n                              label: {\r\n                                  show: true\r\n                              },\r\n                              labelLine: {\r\n                                  show: true\r\n                              }\r\n                          },\r\n                          emphasis: {\r\n                              color: 'rgba(0,0,0,0)'\r\n                          }\r\n                      },\r\n                      name: 'hide'\r\n                  }\r\n              ]\r\n          })\r\n      }\r\n      var initnum = parseFloat(seriesd[0].data[0][\"value\"] * 100 / maxData).toFixed(2);\r\n      seriesd.push({\r\n          type: 'gauge',\r\n          z: 3,\r\n          min: 0,\r\n          max: 100,\r\n          splitNumber: 5,\r\n          center: ['45%', '75%'], // 默认全局居中\r\n          radius: '0%',\r\n          endAngle: 0,\r\n          startAngle: 180,\r\n          axisLabel: {\r\n              show: false,\r\n              formatter: \"{value}%\"\r\n          },\r\n          axisLine: { // 坐标轴线 \r\n              show: false,\r\n              lineStyle: {\r\n                  color: [\r\n                      [1, \"rgba(203,203,203,1)\"]\r\n                  ], //仪表盘颜色\r\n                  width: 2, //仪表盘宽度\r\n              }\r\n          },\r\n          axisTick: { // 坐标轴小标记\r\n              show:false,\r\n              length: 5, // 属性length控制线长\r\n              lineStyle: { // 属性lineStyle控制线条样式\r\n                  color: 'auto'\r\n              }\r\n          },\r\n          splitLabel: {show: false},\r\n          pointer: {show: false},\r\n          splitLine: { // 分隔线\r\n              show: false,\r\n              \r\n          },\r\n          title: {\r\n              show: false\r\n          },\r\n          detail: { //显示数据\r\n              show: false,\r\n          },\r\n          itemStyle: {\r\n              normal: {\r\n                  color: \"#676767\", //仪表盘颜色\r\n              }\r\n          },\r\n          data: [{\r\n              value: initnum\r\n          }]\r\n      \r\n      })\r\noption = {\r\n  maxnum: maxData,\r\n  tooltip: {\r\n      show: true,\r\n      formatter: function(params) {\r\n          if (params.name == \"hide\") {\r\n              return null\r\n          } else {\r\n              if (params.name.indexOf(\"showtip_\") != -1) {\r\n                  var num = Number(params.name.split(\"_\")[1]);\r\n              } else {\r\n                  var num = params.value;\r\n              }\r\n              if (Number(num) == 0) return params.seriesName + \":\" + Number(num) + \"\";\r\n              return params.seriesName + \":\" + parseFloat(num * 100 / maxData).toFixed(2) + \"%\";\r\n          }\r\n      }\r\n  },\r\n \r\n  grid: {\r\n      top: 0,\r\n      height: 0,\r\n      left: \"10%\",\r\n      right: '10%',\r\n  },\r\n  series: seriesd,\r\n  color:[\"red\",\"#afa\"]\r\n};","html":"","externalScripts":"","updaterUID":"bd-143495432","theme":"","layout":"","viewCount":236,"userName":"d***3","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYgJT2iQ8B.png?v=1555561723760","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","series-pie","tooltip"],"customTags":[],"updaterUserName":"d***3"}}