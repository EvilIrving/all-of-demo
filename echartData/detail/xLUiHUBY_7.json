{"status":0,"data":{"cid":"xLUiHUBY_7","authorUid":"bd-2215896966","authorUserName":"4***8","title":"分组柱状图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-08-25T16:14:40.000Z","lastUpdateTime":"2019-08-25T16:14:40.000Z","auth":2,"uid":"bd-2215896966","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-25T16:25:35.000Z","code":"var source={交调数据:{交通事故:1,车辆故障:2,道口操作:3},\nLink数据:{百度地图:1,高德地图:2},\n交通数据流:{车辆流量:1,车道平均速度:2,车道占有率:3,车辆排队长度:4},\n气象:{风速:1,风向:2,能见度:3,降水量:2,气压:3},\n}\n//获取x轴data数据\nfunction getXaxisData(data){\n    var xdata=[] \n    for(let i in data){\n        for(let j in data[i]){\n            xdata.push(j);\n        }\n        xdata.push('')\n    }\n    return xdata;\n}\n\n//获取series数据\nfunction getSeries(data){\n    var series=[]\n    let xdata=getXaxisData(data);\n    for(let i in data){\n        let copyxdata=xdata.slice();\n        xdata.map((val,index)=>{\n            for(let j in data[i]){\n                if(val===j){\n                    copyxdata[index]=data[i][j]\n                }\n            }\n        })\n        copyxdata=copyxdata.map(val=>{\n            if(typeof val==='number'){\n                return val\n            }else{\n                return 0\n            }\n        })\n        \n        series.push({\n            name:i,\n            type:'bar',\n            stack: \"数据源\",\n            data:copyxdata\n        })\n    }\n    return series;\n}\n\noption = {\n    grid: {\n        left: '7%',\n        right: '5%',\n        top: '25%',\n        bottom: '19%',\n    },\n    legend:{\n        show:true,\n    },\n    xAxis: {\n        axisLabel: {\n            margin: 8,\n            interval:0 ,\n            formatter:function(val){\n                return val.split(\"\").join(\"\\n\");\n            }\n        },\n        type: 'category',\n        // xdata: ['交通事故', '车辆故障','道口操作', '',\n        // '百度地图', '高德地图', '',\n        // '车辆流量'，'车道平均速度','车道占有率','车辆排队长度','',\n        // '风速','风向','能见度','降水量','气压','']\n        data:getXaxisData(source)\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series:getSeries(source)\n    // series: [{\n    //     name:'交调数据',\n    //     type:'bar',\n    //     stack: \"数据源\",\n    //     data:[1, 2, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] \n    // },\n    // {\n    //     name:'Link数据',\n    //     type:'bar',\n    //     stack: \"数据源\",\n    //     data:  [0, 0, 0, 0, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0] \n    // },\n    // {\n    //     name:'交通数据流',\n    //     type:'bar',\n    //     stack: \"数据源\",\n    //     data: [0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 0, 0, 0, 0, 0, 0, 0]\n    // },\n    // {\n    //     name:'气象',\n    //     type:'bar',\n    //     stack: \"数据源\",\n    //     data:  [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 2, 3, 0]\n    // }]\n};\n","html":"","externalScripts":"","updaterUID":"bd-2215896966","theme":"","layout":"","viewCount":117,"userName":"4***8","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xLUiHUBY_7.png?v=1566750335718","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar"],"customTags":[],"updaterUserName":"4***8"}}