{"status":0,"data":{"cid":"xjPy320bT2","authorUid":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","authorUserName":"彭***6","title":"","description":"自动滚动柱图","latestVersion":3,"alwaysLatest":0,"createTime":"2021-10-21T08:41:13.000Z","lastUpdateTime":"2021-10-21T08:45:27.000Z","auth":2,"uid":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-21T08:45:27.000Z","code":"var dataArr = [320, 270, 341, 374, 400, 150, 420, 123];\nvar spaceLength = 5,\n    fixedData = [],\n    end = 0,\n    max = 300;\nvar chartColor = [\n    ['#4ED5BF', '#8DCFFC'],\n    ['#45A9EC', '#8DCFFC'],\n];\nvar categoryData = ['省公司1', '成都2', '眉山3', '达州4', '德阳5', '绵阳6', '天府7', '达州8'];\nvar data1 = dataArr.map((item) => {\n    fixedData.push(spaceLength);\n    return item - spaceLength;\n});\nif (categoryData.length < 5) {\n    end = categoryData.length - 1;\n} else {\n    end = 2;\n}\noption = {\n    xAxis: [\n        {\n            splitLine: {\n                lineStyle: {\n                    color: '#ccc',\n                    type: 'dashed',\n                },\n            },\n            type: 'value',\n            show: true,\n            axisLine: {\n                //y轴\n                show: true,\n            },\n        },\n    ],\n\n    yAxis: [\n        {\n            splitLine: {\n                show: false,\n            },\n            axisLine: {\n                //y轴\n                show: true,\n            },\n            type: 'category',\n            axisTick: {\n                show: false,\n            },\n            data: categoryData,\n            axisLabel: {},\n        },\n    ],\n    dataZoom: [\n        {\n            type: 'slider',\n            yAxisIndex: 0,\n            zoomLock: false,\n            width: 8,\n            showDetail: false,\n            startValue: 0, // 从头开始。\n            endValue: end, // 一次性展示五个。\n            borderWidth: 0,\n            borderColor: 'transparent',\n            backgroundColor: '#343F4B',\n            fillerColor: '#4291CE',\n            showDataShadow: false,\n            brushSelect: false,\n            height: '88%',\n            handleStyle: {\n                color: '#4291CE',\n            },\n            handleIcon: 'path://M512 512m-320 0a320 320 0 1 0 640 0 320 320 0 1 0-640 0Z',\n        },\n    ],\n\n    series: [\n        {\n            name: '',\n            type: 'bar',\n            stack: 'Ad',\n            color: 'transparent',\n            data: fixedData,\n        },\n        {\n            name: '',\n            type: 'bar',\n            stack: 'Ad',\n            barWidth: 12, // 柱子宽度\n            label: {\n                formatter: function (parms) {\n                    return parms.value + spaceLength;\n                },\n                show: true,\n                position: 'right', // 位置\n                color: '#1CD8A8',\n                fontSize: 14,\n                fontWeight: 'bold', // 加粗\n                distance: 10, // 距离\n            },\n            // // 根据名字展示颜色\n            // itemStyle: {\n            //     color: (parms) => {\n            //         var color = [];\n            //         console.log(parms.name);\n            //         if (parms.name == '省公司1') {\n            //             color = chartColor[0];\n            //         } else {\n            //             color = chartColor[1];\n            //         }\n            //         return new echarts.graphic.LinearGradient(\n            //             0,\n            //             0,\n            //             1,\n            //             0,\n            //             color.map((color, offset) => ({\n            //                 color,\n            //                 offset,\n            //             }))\n            //         );\n            //     },\n            // },\n            // data: data1,\n            //   根据数据大小展示颜色\n            data: data1.map((item) => {\n                var itemStyle = {\n                    color:\n                        item <= max - spaceLength\n                            ? new this.echarts.graphic.LinearGradient(\n                                  0,\n                                  0,\n                                  1,\n                                  0,\n                                  chartColor[0].map((color, offset) => ({\n                                      color,\n                                      offset,\n                                  }))\n                              )\n                            : new echarts.graphic.LinearGradient(\n                                  0,\n                                  0,\n                                  1,\n                                  0,\n                                  chartColor[1].map((color, offset) => ({\n                                      color,\n                                      offset,\n                                  }))\n                              ),\n                };\n                return {\n                    value: item,\n                    itemStyle: itemStyle,\n                };\n            }),\n        },\n    ],\n};\n// 自动滚动\nfunction autoMove() {\n    setInterval(() => {\n        if (Number(option.dataZoom[0].endValue) === categoryData.length - 1) {\n            option.dataZoom[0].endValue = end;\n            option.dataZoom[0].startValue = 0;\n        } else {\n            option.dataZoom[0].endValue = option.dataZoom[0].endValue + 1;\n            option.dataZoom[0].startValue = option.dataZoom[0].startValue + 1;\n        }\n        myChart.setOption(option);\n    }, 3000);\n}\nautoMove();\n","html":"","externalScripts":"","updaterUID":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","theme":"","layout":"","viewCount":0,"userName":"彭***6","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjPy320bT2.png?v=1634805927198","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar"],"customTags":[],"updaterUserName":"彭***6"}}