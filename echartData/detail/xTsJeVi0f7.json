{"status":0,"data":{"cid":"xTsJeVi0f7","authorUid":"obd-o2Ea8wrkofBx18EYpjBmtNJT-KamO6i","authorUserName":"o***蝎","title":"刻度环形图","description":"","latestVersion":12,"alwaysLatest":1,"createTime":"2021-03-30T03:48:51.000Z","lastUpdateTime":"2021-09-03T02:38:54.000Z","auth":1,"uid":"obd-o2Ea8wrkofBx18EYpjBmtNJT-KamO6i","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":12,"parentVersion":11,"echartsVersion":"4.9.0","versionCreateTime":"2021-09-03T02:38:54.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\r\nlet value = '备料中';\r\noption = {\r\n    backgroundColor: 'transparent',\r\n    title: {\r\n        text: '{a|' + value + '}',\r\n        x: 'center',\r\n        y: 'center',\r\n        textStyle: {\r\n            rich: {\r\n                a: {\r\n                    fontSize: 36,\r\n                    color: '#3f2c75',\r\n                    fontFamily: 'Oswald',\r\n                    fontWeight: 'bold',\r\n                },\r\n            },\r\n        },\r\n    },\r\n    series: [\r\n        // 运动环\r\n        {\r\n            name: 'ring5',\r\n            type: 'custom',\r\n            coordinateSystem: 'none',\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.30,\r\n                        startAngle: ((0 + angle) * Math.PI) / 180,\r\n                        endAngle: ((90 + angle) * Math.PI) / 180,\r\n                    },\r\n                    style: {\r\n                        stroke: '#3f2c75',\r\n                        fill: 'transparent',\r\n                        lineWidth: 3,\r\n                    },\r\n                    silent: true,\r\n                };\r\n            },\r\n            data: [0],\r\n        },\r\n        // 运动环\r\n        {\r\n            name: 'ring5',\r\n            type: 'custom',\r\n            coordinateSystem: 'none',\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.28,\r\n                        startAngle: ((270 + -angle) * Math.PI) / 180,\r\n                        endAngle: ((40 + -angle) * Math.PI) / 180,\r\n                    },\r\n                    style: {\r\n                        stroke: '#3f2c75',\r\n                        fill: 'transparent',\r\n                        lineWidth: 3,\r\n                    },\r\n                    silent: true,\r\n                };\r\n            },\r\n            data: [0],\r\n        },\r\n        // 占比环\r\n        {\r\n            name: '吃猪肉频率',\r\n            type: 'pie',\r\n            radius: ['18%', '15%'],\r\n            silent: true,\r\n            clockwise: true,\r\n            startAngle: 90,\r\n            z: 0,\r\n            zlevel: 0,\r\n            label: {\r\n                normal: {\r\n                    position: 'center',\r\n                },\r\n            },\r\n            data: [\r\n                {\r\n                    value: value,\r\n                    name: '',\r\n                    itemStyle: {\r\n                        shadowColor: '#3f2c75',\r\n                        shadowBlur: 30,\r\n                        shadowOffsetX: '0',\r\n                        shadowOffsetY: '0',\r\n                        color: {\r\n                            // 完成的圆环的颜色\r\n                            colorStops: [\r\n                                {\r\n                                    offset: 0,\r\n                                    color: '#3f2c75', // 0% 处的颜色\r\n                                },\r\n                                {\r\n                                    offset: 1,\r\n                                    color: '#3f2c75', // 100% 处的颜色\r\n                                },\r\n                            ],\r\n                        },\r\n                    },\r\n                },\r\n                {\r\n                    value: 100 - value,\r\n                    name: '',\r\n                    label: {\r\n                        normal: {\r\n                            show: false,\r\n                        },\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'transparent',\r\n                        },\r\n                    },\r\n                },\r\n            ],\r\n        },\r\n        // 分割环\r\n        {\r\n            name: '',\r\n            type: 'gauge',\r\n            radius: '18%',\r\n            center: ['50%', '50%'],\r\n            startAngle: -180,\r\n            endAngle: 179.9999,\r\n            splitNumber: 24,\r\n            hoverAnimation: true,\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            splitLine: {\r\n                length: 10,\r\n                lineStyle: {\r\n                    width: 4,\r\n                    color: '#3f2c75',\r\n                },\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            },\r\n            pointer: {\r\n                show: false,\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    opacity: 0,\r\n                },\r\n            },\r\n            detail: {\r\n                show: false,\r\n            },\r\n            data: [\r\n                {\r\n                    value: 0,\r\n                    name: '',\r\n                },\r\n            ],\r\n        },\r\n        // 外面100圆环\r\n        {\r\n            type: 'pie',\r\n            radius: ['20%', '20.5%'],\r\n            hoverAnimation: false,\r\n            clockWise: false,\r\n            itemStyle: {\r\n                normal: {\r\n                    shadowBlur: 20,\r\n                    shadowColor: '#3f2c75',\r\n                    color: '#a290d5',\r\n                },\r\n            },\r\n            label: {\r\n                show: false,\r\n            },\r\n            data: [100],\r\n        },\r\n        // 最外虚线环\r\n        {\r\n            type: 'pie',\r\n            radius: ['25%', '24%'],\r\n            hoverAnimation: false,\r\n            clockWise: false,\r\n            z: 0,\r\n            zlevel: 0,\r\n            itemStyle: {\r\n                normal: {\r\n                    shadowBlur: 20,\r\n                    shadowColor: '#3f2c75',\r\n                    color: '#a290d5',\r\n                },\r\n            },\r\n            label: {\r\n                show: false,\r\n            },\r\n            data: [100],\r\n        },\r\n        // 最外虚线分割环\r\n        {\r\n            name: '',\r\n            type: 'gauge',\r\n            radius: '25%',\r\n            center: ['50%', '50%'],\r\n            startAngle: -180,\r\n            endAngle: 179.999,\r\n            splitNumber: 64,\r\n            hoverAnimation: true,\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            splitLine: {\r\n                length: 4,\r\n                lineStyle: {\r\n                    width: 4,\r\n                    color: '#3f2c75',\r\n                },\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            },\r\n            pointer: {\r\n                show: false,\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    opacity: 0,\r\n                },\r\n            },\r\n            detail: {\r\n                show: false,\r\n            },\r\n            data: [\r\n                {\r\n                    value: 0,\r\n                    name: '',\r\n                },\r\n            ],\r\n        },\r\n    ],\r\n};\r\n\r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\r\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\r\n    return {\r\n        x: x1,\r\n        y: y1,\r\n    };\r\n}\r\n\r\nfunction draw() {\r\n    angle = angle + 3;\r\n    myChart.setOption(option, true);\r\n    //window.requestAnimationFrame(draw);\r\n}\r\n\r\nsetInterval(function () {\r\n    //用setInterval做动画感觉有问题\r\n    draw();\r\n}, 100);\r\n","html":"","externalScripts":"","updaterUID":"obd-otRA5i9rEaNowidU4IRkdb2X1EQW28W","theme":"","layout":"","viewCount":210,"userName":"o***蝎","commentCount":0,"starCount":32,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTsJeVi0f7.png?v=1630636734927","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","series-pie","title"],"customTags":["gauge","pie"],"updaterUserName":"i***5"}}