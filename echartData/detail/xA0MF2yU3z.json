{"status":0,"data":{"cid":"xA0MF2yU3z","authorUid":"bd-4286708132","authorUserName":"L***h","title":"实时刷新","description":"项目需要","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-14T08:10:13.000Z","lastUpdateTime":"2021-05-14T08:10:13.000Z","auth":2,"uid":"bd-4286708132","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-14T08:10:14.000Z","code":"let topData = [\n    1,\n    3,\n    1,\n    2,\n    1.2,\n    1,\n    3,\n    1,\n    2,\n    1.2,\n    1,\n    3,\n];\nlet timeData = [\n    '7:00',\n    '7:10',\n    '7:20',\n    '7:30',\n    '7:40',\n    '7:50',\n    '8:00',\n    '8:10',\n    '8:20',\n    '8:30',\n    '8:40',\n    '8:50',\n];\nvar dat4 = [[]];\nlet start=0\n// aa(timeData,topData,start)\nfunction aa(xAxisdata,data,start){\n    option = {\n    \n    title: {\n        show: false,\n        text: '实时网络上传下载速率',\n        textStyle: {\n            align: 'center',\n            color: '#333',\n            fontSize: 20,\n        },\n        top: '5%',\n        left: '5%',\n    },\n    tooltip: {\n        trigger: 'axis',\n        \n        //formatter: '{b0}: {c0}<br />{b1}: {c1} KB/s',\n        formatter: function (params) {\n            //自定义函数修改折线图给数据加单位\n            var str = ''; //声明一个变量用来存储数据\n            str += '<div>' + params[0].name + '</div>'; //显示日期的函数\n            for (var i = 0; i < params.length; i++) {\n                // console.log(params[1].seriesName,1111111)\n                //图显示的数据较多时需要循环数据，这样才可以成功的给多条数据添加单位\n                str +=\n                    '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;'+                    \n                    'background-color:linear-gradient(180deg, #44C9EC 0%, #046E86 100%);\"></span>' +\n                    params[i].seriesName +\n                    '</span> : <span>' +\n                    params[i].data +\n                    '人' +\n                    '</br>';\n            }\n            return str;\n        },\n    },\n    grid: {\n        top: '5%',\n        left: '5%',\n        right: '5%',\n        bottom: '8%',\n        containLabel: true,\n    },\n    backgroundColor: '#080b30',\n    xAxis: [\n        {\n            type: 'category',\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: '#2B4B99',\n                },\n            },\n            axisLabel: {\n                color: '#8FBEE7',\n            },\n            splitLine: {\n                show: false,\n                lineStyle: {\n                    color: '#2B4B99',\n                },\n            },\n            boundaryGap: false,\n            data: timeData,\n        },\n    ],\n\n    yAxis: [\n        {\n            type: 'value',\n            min: 0,\n            splitNumber: 6,\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    color: '#2B4B99',\n                },\n            },\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: '#2B4B99',\n                },\n            },\n\n            axisLabel: {\n                show: true,\n                margin: 20,\n                formatter: '{value} K',\n                textStyle: {\n                    fontSize: 14,\n                    color: '#8FBEE7',\n                },\n            },\n            axisTick: {\n                show: true,\n            },\n        },\n    ],\n    dataZoom: [{\n        show: true,\n        \"height\": 20,\n        bottom: 8,\n        start: start,\n        end:  100,\n        backgroundColor: 'rgba(0,0,0,0)',\n        dataBackgroundColor: 'rgba(9,162,117,0.3)',\n        handleColor: 'rgba(0,255,255,0.8)',\n        textStyle: {\n            color: 'rgba(0,255,255,1)',\n            paddingLeft: 20\n        }\n    }, {\n        type: 'inside',\n        start:start,\n        end:  100,\n    }],\n    series: [\n        {\n            name: '客流量',\n            type: 'line',\n            smooth: false, //是否平滑\n            showAllSymbol: true,\n            symbolSize: 0,\n            lineStyle: {\n                normal: {\n                    width: 3,\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: '#44C9EC'\n                        },\n                        {\n                            offset: 1,\n                            color: '#046E86'\n                        }\n                    ], false),\n                    shadowColor: 'rgba(0, 0, 0, 0)',\n                    shadowBlur: 0,\n                    shadowOffsetY: 5,\n                    shadowOffsetX: 5,\n                },\n            },\n            label: {\n                show: false,\n                position: 'top',\n                textStyle: {\n                    color: '#FFF',\n                    fontSize: 14,\n                },\n            },\n            itemStyle: {\n                borderColor: 'rgb(108,78,0)',\n                borderWidth: 0,\n                shadowColor: 'rgba(0, 0, 0, 0)',\n                shadowBlur: 0,\n                shadowOffsetY: 0,\n                shadowOffsetX: 0,\n            },\n            tooltip: {\n                show: true,\n            },\n            areaStyle: {\n                normal: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: '#56FFE1'\n                        },\n                        {\n                            offset: 1,\n                            color: 'rgba(91, 235, 177, 0.2)'\n                        }\n                    ], false),\n                    opacity:0.3,\n                    shadowColor: 'rgba(108,80,243, 0.9)',\n                    shadowBlur: 20\n                }\n            },\n            data: data,\n        },\n    ],\n};\n}\n// goTo()\nvar pushIdx = 0;\nvar intervalId = setInterval(function () {\n    var i = pushIdx;\n    dat4[0].push([i,topData[i]]);\n    pushIdx+=1;\n    aa(timeData,dat4[0],start)\n    if(pushIdx>topData.length){\n        clearInterval(intervalId);\n        goTo();\n    }\n    myChart.setOption(option);\n}, 500);\nfunction goTo(){\n    var intervalId2 = setInterval(() => {\n    //这里采用的是随机数，实际情况需要向后台获取\n    let date = new Date();\n    let hh = date.getHours();\n    let mm = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes();\n    let time = hh + ':' + mm ;\n    timeData.push(time);\n    let topNum = Math.random() * 2;\n    topData.push(topNum.toFixed(2));\n    if(topData.length>=10){\n        start = topData.length-10\n    }else{\n        start = 0\n    }\n    myChart.setOption(option);\n    aa(timeData,topData,start)\n    console.log(timeData.length)\n},6000);\n}","html":"","externalScripts":"","updaterUID":"bd-4286708132","theme":"","layout":"","viewCount":0,"userName":"L***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xA0MF2yU3z.png?v=1620979814198","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-line","title","tooltip"],"customTags":[],"updaterUserName":"L***h"}}