{"status":0,"data":{"cid":"xg39sNpA55","authorUid":"bd-633732206","authorUserName":"一***3","title":"运输图","description":"数据为0不显示路线，不为0显示路线","latestVersion":11,"alwaysLatest":1,"createTime":"2018-10-12T03:14:11.000Z","lastUpdateTime":"2018-10-12T03:14:11.000Z","auth":2,"uid":"bd-633732206","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":11,"parentVersion":10,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-09T02:06:46.000Z","code":"var ccqdcl = 4571; //长春-青岛数据\r\nvar cctjcl = 0; //长春-天津数据\r\nvar shqdcl = 2338; //上海-青岛数据\r\nvar shtjcl = 3450; //上海-天津数据\r\n\r\n//长春-青岛坐标\r\nvar ccqd = [\r\n    [125.81, 44.25],\r\n    [120.33, 36.07]\r\n];\r\n//长春-天津坐标\r\nvar cctj = [\r\n    [125.81, 44.25],\r\n    [117.20, 39.12]\r\n];\r\n//上海-青岛坐标\r\nvar shqd = [\r\n    [121.46, 31.28],\r\n    [120.33, 36.07]\r\n];\r\n//上海-天津坐标\r\nvar shtj = [\r\n    [121.46, 31.28],\r\n    [117.20, 39.12]\r\n];\r\n\r\n//加逗号函数\r\nfunction toThousands(num) {\r\n    var res = num.toString().replace(/\\d+/, function(n) { // 先提取整数部分\r\n        return n.replace(/(\\d)(?=(\\d{3})+$)/g, function($1) {\r\n            return $1 + \",\";\r\n        });\r\n    })\r\n    return res;\r\n}\r\n\r\n\r\n\r\nvar geoCoordMap = {\r\n    '上海': [121.46, 31.28],\r\n    '长春': [125.81, 44.25],\r\n    '天津': [117.20, 39.12],\r\n    '青岛': [120.33, 36.07],\r\n};\r\n\r\nvar CCData = [\r\n    [{\r\n        name: '长春'\r\n    }, {\r\n        name: '青岛',\r\n        value: ccqdcl\r\n    }],\r\n    [{\r\n        name: '长春'\r\n    }, {\r\n        name: '天津',\r\n        value: cctjcl\r\n    }],\r\n];\r\n\r\nvar SHData = [\r\n    [{\r\n        name: '上海'\r\n    }, {\r\n        name: '青岛',\r\n        value: shqdcl\r\n    }],\r\n    [{\r\n        name: '上海'\r\n    }, {\r\n        name: '天津',\r\n        value: shtjcl\r\n    }],\r\n];\r\n\r\nvar planePath = 'path://M39.883,27.852h-0.959V16.795H24.632l-0.002,7.509l-0.186-0.002v-4.995h-6.446l-2.897,5.002h-4.262v3.543h-0.723v2h0.723v1.25h2.514c0.234,1.197,1.289,2.104,2.556,2.104c1.265,0,2.317-0.905,2.553-2.104h12.326c0.234,1.197,1.289,2.104,2.553,2.104c1.268,0,2.32-0.905,2.557-2.104h3.027v-1.25h0.959V27.852L39.883,27.852z M15.908,32.205c-0.887,0-1.605-0.721-1.605-1.604s0.721-1.604,1.605-1.604c0.884,0,1.604,0.721,1.604,1.604S16.792,32.205,15.908,32.205z M33.34,32.205c-0.885,0-1.604-0.721-1.604-1.604s0.719-1.604,1.604-1.604c0.887,0,1.605,0.721,1.605,1.604S34.227,32.205,33.34,32.205zM37.924,30.102h-2.029c-0.234-1.197-1.289-2.104-2.555-2.104s-2.318,0.906-2.553,2.104H18.46c-0.234-1.197-1.288-2.104-2.553-2.104c-1.266,0-2.32,0.906-2.555,2.104h-1.514v-4.793h3.837l2.898-5.002h4.87v4.984l2.186,0.021l0.002-7.519h12.291V30.102L37.924,30.102z M19.152,21.307h3.354v3.896h-5.612L19.152,21.307z';\r\n\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n\r\n        if (geoCoord) {\r\n            res.push({\r\n                value: geoCoord.concat(data[i].value),\r\n                name: data[i].name\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar shqdzhuanhuan = function(data) {\r\n    var res = [];\r\n    if (data !== 0) {\r\n        res.push({\r\n            fromName: \"上海\",\r\n            toName: \"青岛\",\r\n            coords: shqd,\r\n            value: shqdcl\r\n        })\r\n        return res;\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n};\r\n\r\nvar cctjzhuanhuan = function(data) {\r\n    var res = [];\r\n    if (data !== 0) {\r\n        res.push({\r\n            fromName: \"长春\",\r\n            toName: \"天津\",\r\n            coords: cctj,\r\n            value: cctjcl\r\n        })\r\n        return res;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\nvar ccqdzhuanhuan = function(data) {\r\n    var res = [];\r\n    if (data !== 0) {\r\n        res.push({\r\n            fromName: \"长春\",\r\n            toName: \"青岛\",\r\n            coords: ccqd,\r\n            value: ccqdcl\r\n        })\r\n        return res;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\nvar shtjzhuanhuan = function(data) {\r\n    var res = [];\r\n    if (data !== 0) {\r\n        res.push({\r\n            fromName: \"上海\",\r\n            toName: \"天津\",\r\n            coords: shtj,\r\n            value: shtjcl\r\n        });\r\n        return res;\r\n    } else {\r\n        return null;\r\n    }\r\n};\r\n\r\n\r\nvar color = ['#1B4F93', '#1B4F93'];\r\n\r\nvar series = [];\r\n[\r\n    ['长春', CCData],\r\n    ['上海', SHData]\r\n].forEach(function(item, i) {\r\n    series.push({\r\n        name: \"长春-青岛\",\r\n        type: 'lines',\r\n        zlevel: 2,\r\n        symbol: ['none', 'arrow'],\r\n        symbolSize: 15, //箭头大小\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15 //飞机大小\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 4,\r\n                opacity: 0.6,\r\n                curveness: 0.3\r\n            }\r\n        },\r\n        data: ccqdzhuanhuan(ccqdcl)\r\n\r\n\r\n    }, {\r\n        name: \"长春-天津\",\r\n        type: 'lines',\r\n        zlevel: 2,\r\n        symbol: ['none', 'arrow'],\r\n        symbolSize: 15, //箭头大小\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15 //飞机大小\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 4,\r\n                opacity: 0.6,\r\n                curveness: 0.3\r\n            }\r\n        },\r\n        data: cctjzhuanhuan(cctjcl)\r\n\r\n    }, {\r\n        name: \"上海-天津\",\r\n        type: 'lines',\r\n        zlevel: 2,\r\n        symbol: ['none', 'arrow'],\r\n        symbolSize: 15, //箭头大小\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15 //飞机大小\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 4,\r\n                opacity: 0.6,\r\n                curveness: 0.3\r\n            }\r\n        },\r\n        data: shtjzhuanhuan(shtjcl)\r\n\r\n\r\n    }, {\r\n        name: \"上海-青岛\",\r\n        type: 'lines',\r\n        zlevel: 2,\r\n        symbol: ['none', 'arrow'],\r\n        symbolSize: 15, //箭头大小\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15 //飞机大小\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 4,\r\n                opacity: 0.6,\r\n                curveness: 0.3\r\n            }\r\n        },\r\n        data: shqdzhuanhuan(shqdcl)\r\n\r\n\r\n    }, {\r\n        name: \"青岛和天津\",\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                formatter: '{b}'\r\n            }\r\n        },\r\n        symbolSize: function(val) {\r\n            if (val[2] > 200) {\r\n                return 20;\r\n            } else {\r\n                return val[2] / 10;\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#EE7700' //修改地区颜色\r\n            }\r\n        },\r\n        data: convertData([{\r\n                name: '青岛',\r\n                value: 150\r\n            },\r\n            {\r\n                name: '天津',\r\n                value: 150\r\n            }\r\n        ])\r\n\r\n    }, {\r\n        name: '长春和上海',\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                formatter: '{b}'\r\n            }\r\n        },\r\n\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#EE7700' //修改地区颜色\r\n            }\r\n        },\r\n        data: convertData([{\r\n                name: '长春',\r\n                value: 80\r\n            },\r\n            {\r\n                name: '上海',\r\n                value: 80\r\n            }\r\n        ])\r\n\r\n\r\n    });\r\n\r\n\r\n});\r\noption = {\r\n    title: [{\r\n            text: '运输图',\r\n            x: 'center',\r\n            textStyle: {\r\n                fontSize: 20,\r\n                color: '#1e56a0',\r\n                fontWeight: 'bold',\r\n            }\r\n        }, {\r\n            text: '{words|\\n长春-天津运输量:  }' + toThousands(cctjcl),\r\n            x: '40%',\r\n            top: '1%',\r\n            textStyle: {\r\n                rich: {\r\n                    words: {\r\n                        fontSize: 15,\r\n                        fontWeight: 'normal'\r\n                    }\r\n                }\r\n            }\r\n\r\n        },\r\n        {\r\n            text: '{words|\\n\\n长春-青岛运输量:  }' + toThousands(ccqdcl),\r\n            x: '40%',\r\n            top: '2%',\r\n            textStyle: {\r\n                rich: {\r\n                    words: {\r\n                        fontSize: 15,\r\n                        fontWeight: 'normal'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            text: '{words|\\n\\n\\n上海-天津运输量:  }' + toThousands(shtjcl),\r\n            x: '40%',\r\n            top: '3%',\r\n            textStyle: {\r\n                rich: {\r\n                    words: {\r\n                        fontSize: 15,\r\n                        fontWeight: 'normal'\r\n                    }\r\n                }\r\n            }\r\n\r\n        },\r\n        {\r\n            text: '{words|\\n\\n\\n\\n上海-青岛运输量:  }' + toThousands(shqdcl),\r\n            x: '40%',\r\n            top: '4%',\r\n            textStyle: {\r\n                rich: {\r\n                    words: {\r\n                        fontSize: 15,\r\n                        fontWeight: 'normal'\r\n                    }\r\n                }\r\n            }\r\n\r\n        },\r\n    ],\r\n\r\n    backgroundColor: '#cecece', //背景颜色\r\n    tooltip: {\r\n        show: true,\r\n        trigger: 'item',\r\n        // triggerOn: 'click',\r\n        formatter: function(params) {\r\n            if (params.seriesType == \"effectScatter\") {\r\n                if (params.data.name == '上海' || params.data.name == '长春') {\r\n                    return '始发站：' + params.data.name\r\n                } else if (params.data.name == '天津') {\r\n                    return '终到站：' + params.data.name + '<br />' + '共计' + (shtjcl + cctjcl)\r\n                } else if (params.data.name == '青岛') {\r\n                    return '终到站：' + params.data.name + '<br />' + '共计' + (shqdcl + ccqdcl)\r\n                }\r\n            } else if (params.seriesType == \"lines\") {\r\n                return params.data.fromName + \">\" + params.data.toName + \"<br />\" + params.data.value;\r\n            } else {\r\n                return params.name;\r\n            }\r\n        }\r\n    },\r\n    geo: {\r\n        map: 'china',\r\n        label: {\r\n            emphasis: {\r\n                show: false,\r\n\r\n            }\r\n        },\r\n        roam: false,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#C2C2C2', //地图块颜色\r\n                borderColor: '#868686' //地图框颜色\r\n            },\r\n            emphasis: {\r\n                areaColor: '#FDDD31' //鼠标移入地图块颜色\r\n            }\r\n        },\r\n\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-633732206","theme":"","layout":"","viewCount":1171,"userName":"一***3","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xg39sNpA55.png?v=1565316407063","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"一***3"}}