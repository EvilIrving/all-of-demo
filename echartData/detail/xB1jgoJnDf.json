{"status":0,"data":{"cid":"xB1jgoJnDf","authorUid":"bd-2434570465","authorUserName":"小爷路过这","title":"安徽省","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-02-22T07:02:10.000Z","lastUpdateTime":"2018-02-22T07:02:10.000Z","auth":2,"uid":"bd-2434570465","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.8.0","versionCreateTime":"2018-03-01T06:10:13.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1519279347346-BkslpCjwf.json\";\n\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，\n来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。\n但是也可以用这个 geoIndex 指定一个 geo 组件。\n这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。\n并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，\n以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('jiangxi', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '省委':[117.37,31.786],\n        '合肥市':[117.37,31.386],\n        '六安市':[116.27,31.786],\n        '滁州市':[118.07,32.486],\n        '蚌埠市':[117.27,33.086],\n        '淮南市':[116.67,32.786],\n        '宿州市':[117.77,33.486],\n        '淮北市':[116.67,33.686],\n        '亳州市':[116.27,33.386],\n        '阜阳市':[115.57,32.986],\n        '安庆市':[116.47,30.486],\n        '池州市':[117.47,30.386],\n        '黄山市':[118.17,29.886],\n        '宣城市':[119.27,30.916],\n        '芜湖市':[118.17,31.186],\n        '马鞍山市':[118.47,31.616],\n        '铜陵市':[117.87,30.956],\n    };\n    var moveLine = {\n    'normal':[\n    {\"fromName\":\"省委\",\"toName\":\"合肥市\",'coords':[[117.37,31.786],[117.37,31.386],]},\n    {\"fromName\":\"省委\",\"toName\":\"六安市\",'coords':[[117.37,31.786],[116.27,31.786],]},\n    {\"fromName\":\"省委\",\"toName\":\"滁州市\",'coords':[[117.37,31.786],[118.07,32.486],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"蚌埠市\",'coords':[[117.37,31.786],[117.27,33.086],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"淮南市\",'coords':[[117.37,31.786],[116.67,32.786],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"宿州市\",'coords':[[117.37,31.786],[117.77,33.486],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"淮北市\",'coords':[[117.37,31.786],[116.67,33.686],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"亳州市\",'coords':[[117.37,31.786],[116.27,33.386],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"阜阳市\",'coords':[[117.37,31.786],[115.57,32.986],[117.37,31.786]]},\n    \n    {\"fromName\":\"省委\",\"toName\":\"池州市\",'coords':[[117.37,31.786],[117.47,30.386],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"黄山市\",'coords':[[117.37,31.786],[118.17,29.886],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"宣城市\",'coords':[[117.37,31.786],[119.27,30.916],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"芜湖市\",'coords':[[117.37,31.786],[118.17,31.186],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"安庆市\",'coords':[[117.37,31.786],[116.47,30.486],[117.37,31.786]]},\n    {\"fromName\":\"省委\",\"toName\":\"马鞍山市\",'coords':[[117.37,31.786],[118.47,31.616],[117.37,31.786]]},    \n    {\"fromName\":\"省委\",\"toName\":\"铜陵市\",'coords':[[117.37,31.786],[117.87,30.956],[117.37,31.786]]},\n    ],\n    'warning':[\n    \n    ]\n    };\n    var data = [\n        {name:'省委',value:190},\n        {name:'合肥市',value:190},\n        {name:'六安市',value:190},\n        {name:'滁州市',value:190},\n        {name:'蚌埠市',value:190},\n        {name:'淮南市',value:90},\n        {name:'宿州市',value:120},\n        {name:'淮北市',value:120},\n        {name:'亳州市',value:120},\n        {name:'阜阳市',value:120},\n        {name:'安庆市',value:190},\n        {name:'池州市',value:190},\n        {name:'黄山市',value:190},\n        {name:'宣城市',value:190},\n        {name:'芜湖市',value:190},\n        {name:'马鞍山市',value:190},\n        {name:'铜陵市',value:90},\n    ];\n    var max = 480, min = 9; // todo \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\n\n    option = {\n        backgroundColor: '#091c3d',\n        title: {\n            top:20,\n            text: '',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n        tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n        legend: {\n        orient: 'vertical',\n        y: 'bottom',\n        x:'right',\n        data:['pm2.5'],\n        textStyle: {\n            color: '#fff'\n        }\n        }, \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n                // color: ['#3B5077', '#031525'] // 蓝黑\n                // color: ['#ffc0cb', '#800080'] // 红紫\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\n                //color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n                 //color: ['#23074d', '#cc5333'] // 紫红\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#1488CC', '#2B32B2'] // 浅蓝\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n            }\n        },\n        // toolbox: {\n        //     show: true,\n        //     orient: 'vertical',\n        //     left: 'right',\n        //     top: 'center',\n        //     feature: {\n        //             dataView: {readOnly: false},\n        //             restore: {},\n        //             saveAsImage: {}\n        //             }\n        // },\n        geo: {\n            show: true,\n            map: 'jiangxi',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: 'transparent',\n                    borderColor: '#3fdaff',\n                    borderWidth: 2,\n                    shadowColor: 'rgba(63, 218, 255, 0.5)',\n                    shadowBlur: 30\n                },\n                emphasis: {\n                    areaColor: '#2B91B7',\n                }\n            }\n        },\n        series : [\n      {\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F4E925'\n                }\n            }\n        },\n         {\n            type: 'map',\n            map: 'jiangxi',\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#FFFFFF',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7'\n                }\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: convertData(data.sort(function (a, b) {\n                return b.value - a.value;\n            }).slice(0, 5)),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F4E925',\n                    shadowBlur: 10,\n                    shadowColor: '#05C3F9'\n                }\n            },\n            zlevel: 1\n        },\n         {\n        name: '线路',\n        type: 'lines',\n        coordinateSystem: 'geo',\n        zlevel: 2,\n        large: true,\n        effect: {\n            show: true,\n            constantSpeed: 30,\n            symbol: 'arrow',//ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\n            symbolSize: 0,\n            trailLength: 0,\n        },\n        \n        lineStyle: {\n            normal: {\n                color:'#0fff17',\n                /*\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0, color: '#58B3CC'\n                    }, {\n                        offset: 1, color: '#F58158'\n                    }], false),*/\n                width: 2,\n                opacity: 1.0,\n                curveness: 0.15\n            }\n        },\n        data: moveLine.normal\n    },\n    {\n        name: '线路',\n        type: 'lines',\n        coordinateSystem: 'geo',\n        zlevel: 2,\n        large: true,\n        effect: {\n            show: true,\n            constantSpeed: 30,\n            symbol: 'arrow',//ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\n            symbolSize: 10,\n            trailLength: 0,\n        },\n        \n        lineStyle: {\n            normal: {\n                color:'rgb(255, 0, 0)',\n                width: 2,\n                opacity: 1,\n                curveness: 0.15\n            }\n        },\n        data: moveLine.warning\n    }\n         \n    ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"bd-2434570465","theme":"","layout":"","viewCount":38496,"userName":"小爷路过这","commentCount":10,"starCount":60,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1jgoJnDf.png?v=1519884613435","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"小爷路过这"}}