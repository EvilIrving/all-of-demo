{"status":0,"data":{"cid":"xPjpEwwals","authorUid":"bd-805586143","authorUserName":"m***n","title":"流程示意图","description":"折线图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-16T06:53:15.000Z","lastUpdateTime":"2021-12-16T06:53:15.000Z","auth":2,"uid":"bd-805586143","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-16T06:53:15.000Z","code":"const nodes = [\n  {\n    id: 'illegal_node_sj2',\n    name: '非立案核查',\n    x: 250,\n    y: 800,\n    nexts: [\n      { next: null, name: '同意' },\n      { next: 'illegal_node_wfqr', name: '不同意' },\n    ],\n  },\n  {\n    id: 'illegal_0',\n    name: '违法线索发现',\n    x: 500,\n    y: 1200,\n    nexts: [\n      { next: 'illegal_node_qx', name: '手动录入' },\n      { next: 'illegal_sjpc', name: '自动录入' },\n    ],\n  },\n  { id: 'illegal_node_fy', name: '法院强制执行', x: 350, y: 400, nexts: [{ next: null, name: '强制执行' }] },\n  { id: 'illegal_node_ja', name: '结案', x: 500, y: 200, nexts: [{ next: null, name: null }] },\n  {\n    id: 'illegal_node_qx',\n    name: '区县功能区核查',\n    x: 500,\n    y: 1000,\n    nexts: [\n      { next: null, name: '涉及其他部门' },\n      { next: 'illegal_node_sj', name: '合法' },\n      { next: 'illegal_node_wfqr', name: '不合法' },\n    ],\n  },\n  {\n    id: 'illegal_node_sj',\n    name: '市级核查',\n    x: 750,\n    y: 800,\n    nexts: [\n      { next: null, name: '同意' },\n      { next: 'illegal_node_qx', name: '不同意' },\n    ],\n  },\n  {\n    id: 'illegal_node_wfqr',\n    name: '违法确认',\n    x: 500,\n    y: 800,\n    nexts: [\n      { next: 'illegal_node_xzcf', name: '立案' },\n      { next: 'illegal_node_sj2', name: '非立案' },\n    ],\n  },\n  {\n    id: 'illegal_node_xzcf',\n    name: '行政处罚决定书',\n    x: 500,\n    y: 600,\n    nexts: [{ next: 'illegal_node_zx', name: '执行' }],\n  },\n  {\n    id: 'illegal_node_zx',\n    name: '执行情况',\n    x: 500,\n    y: 400,\n    nexts: [\n      { next: 'illegal_node_fy', name: '未执行到位' },\n      { next: 'illegal_node_ja', name: '执行到位' },\n    ],\n  },\n  {\n    id: 'illegal_sjpc',\n    name: '市级排查',\n    x: 150,\n    y: 1200,\n    nexts: [\n      { next: 'illegal_node_qx', name: '非误报' },\n      { next: null, name: '误报' },\n    ],\n  },\n  { id: null, name: '结束', x: 500, y: 0, nexts: [] },\n];\n\nconst datas = [];\n\nconst lines = [];\nvar center = 500;\nconst offset = 50;\nnodes.forEach((node) => {\n  datas.push({\n    name: node.name,\n    value: [node.x, node.y],\n    label: { position: 'bottom' },\n  });\n\n  node.nexts.forEach((line) => {\n    const next = nodes.find((n) => n.id === line.next);\n    if (!next) return;\n\n    const coords = [];\n    if (node.x === next.x || node.y === next.y) {\n      coords.push([node.x, node.y]);\n      coords.push([next.x, next.y]);\n    } else {\n      //竖线\n      coords.push([node.x, node.y]);\n      coords.push([node.x, next.y]);\n      //横线\n      coords.push([node.x, next.y]);\n      coords.push([next.x, next.y]);\n    }\n    if (next.name === '非误报') {\n      console.log(coords);\n    }\n    const list = coords.map((coord, index) => {\n      const item = { coord };\n      if (index === 0) {\n        item.name = line.name;\n        item.label = { position: 'middle' };\n      }\n      //如果是拐点\n      if (coords.length > 2) {\n        if (index === 1 || index === 2) {\n          item.symbolSize = 0;\n        }\n      }\n      return item;\n    });\n\n    let lineData = [];\n    list.forEach((item, index) => {\n      lineData.push(item);\n      if ((index + 1) % 2 === 0 && lineData.length > 0) {\n        lines.push(lineData);\n        lineData = [];\n      }\n    });\n  });\n});\n\noption = {\n  xAxis: {\n    //max: 1200,\n    show: false,\n    type: 'value',\n  },\n  yAxis: {\n    // max: 1200,\n    show: false,\n    type: 'value',\n  },\n  series: [\n    {\n      type: 'graph',\n      coordinateSystem: 'cartesian2d',\n      symbolSize: 32,\n      roam: true,\n      label: {\n        show: true,\n        position: 'bottom',\n      },\n      edgeSymbol: ['circle', 'arrow'],\n      edgeSymbolSize: [1, 5],\n      edgeLabel: {\n        fontSize: 12,\n      },\n      data: datas,\n    },\n    {\n      type: 'lines',\n      coordinateSystem: 'cartesian2d',\n      markLine: {\n        //silent: true,\n        data: lines,\n      },\n    },\n  ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-805586143","theme":"","layout":"","viewCount":0,"userName":"m***n","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPjpEwwals.png?v=1639637595315","isCustomThumbnail":0,"builtinTags":["category-work","grid","markLine","series-graph","series-lines"],"customTags":[],"updaterUserName":"m***n"}}