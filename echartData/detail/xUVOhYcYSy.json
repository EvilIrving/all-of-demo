{"status":0,"data":{"cid":"xUVOhYcYSy","authorUid":"bd-3763434512","authorUserName":"152*****229","title":"漏斗图","description":"最外层呈金字塔状","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-30T06:02:12.000Z","lastUpdateTime":"2020-10-30T06:02:12.000Z","auth":2,"uid":"bd-3763434512","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-30T06:02:12.000Z","code":"const colorList = [\n        '#79D9FF',\n        '#52DBD4',\n        '#58ED4B',\n        '#99E93D',\n        '#DDFF00',\n        '#F1B737',\n        '#DA7F56',\n        '#C86FCD',\n        '#8DCBF1',\n        '#73CFF3',\n      ]\n      const scaleData = [\n        {\n          value: 1234,\n          name: '其他',\n        },\n        {\n          value: 131,\n          name: '随迁',\n        },\n        {\n          value: 342,\n          name: '学习培训',\n        },\n        {\n          value: 1342,\n          name: '治病疗养',\n        },\n        {\n          value: 1002,\n          name: '工作调动',\n        },\n        {\n          value: 1202,\n          name: '经商',\n        },\n        {\n          value: 402,\n          name: '务农',\n        },\n        {\n          value: 800,\n          name: '婚嫁',\n        },\n        {\n          value: 1800,\n          name: '务工',\n        },\n        {\n          value: 500,\n          name: '投亲靠友',\n        },\n      ]\n      const values = scaleData.map(item => item.value)\n      const baseAverage = Math.max(...values) / 10\n      const baseData = []\n      const data = []\n      const sortData = scaleData.sort((obj1, obj2) => {\n        const a = obj1.value\n        const b = obj2.value\n        if (a > b) {\n          return -1\n        } else if (a < b) {\n          return 1\n        } else {\n          return 0\n        }\n      })\n      for (let i = 0; i < sortData.length; i++) {\n        baseData.push(\n          {\n            value: Math.max(...values) - baseAverage * i,\n            name: sortData[i].name,\n          },\n        )\n        data.push(\n          {\n            value: sortData[i].value,\n            name: sortData[i].name,\n            itemStyle: {\n              color: colorList[i],\n            },\n          },\n        )\n      }\n      const legendOption = {\n        top: '9%',\n        orient: 'vertical',\n        icon: 'roundRect',\n        itemGap: 15,\n        itemWidth: 14,\n        itemHeight: 6,\n        textStyle: {\n          fontSize: 12,\n          color: '#BED3F8',\n          rich: {\n            name: {\n              width: 55,\n            },\n          },\n        },\n        formatter: (name) => {\n          const idx = scaleData.findIndex(v => v.name === name)\n          if (idx < 0) {\n            return ''\n          }\n          return (\n            `\\r{name|${scaleData[idx].name}}\\r\\r${scaleData[idx].value}`\n          )\n        },\n      }\n\n\noption = {\n    legend: [\n          {\n            data: ['其他', '随迁', '学习培训', '治病疗养', '工作调动'],\n            left: 20,\n            ...legendOption,\n          },\n          {\n            data: ['经商', '务农', '婚嫁', '务工', '投亲靠友'],\n            right: 20,\n            ...legendOption,\n          },\n        ],\n        color: colorList,\n        series: [\n          {\n            name: '流入原因',\n            type: 'funnel',\n            left: '10%',\n            top: '9%',\n            bottom: '9%',\n            width: '80%',\n            sort: 'ascending',\n            label: {\n              show: false,\n            },\n            labelLine: {\n              show: false,\n            },\n            emphasis: {\n              label: {\n                show: false,\n              },\n            },\n            itemStyle: {\n              opacity: 0.2,\n            },\n            data: baseData,\n          },\n          {\n            name: '流入原因',\n            type: 'funnel',\n            left: '10%',\n            width: '80%',\n            top: '9%',\n            bottom: '9%',\n            maxSize: '80%',\n            sort: 'ascending',\n            label: {\n              show: false,\n            },\n            itemStyle: {\n              borderColor: '#333',\n              borderWidth: 1,\n            },\n            data: data,\n          },\n        ],\n};","html":"","externalScripts":"","updaterUID":"bd-3763434512","theme":"","layout":"","viewCount":190,"userName":"152*****229","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUVOhYcYSy.png?v=1604037732895","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-funnel"],"customTags":[],"updaterUserName":"152*****229"}}