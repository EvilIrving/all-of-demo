{"status":0,"data":{"cid":"x77lC1h0XF","authorUid":"bd-2536962124","authorUserName":"韩***翎","title":"类型散点图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-16T07:32:09.000Z","lastUpdateTime":"2020-09-16T07:32:09.000Z","auth":2,"uid":"bd-2536962124","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-16T07:32:09.000Z","code":"var curTime = getNowTime('1'); // 当天时间\r\n// status 0事故类（三角形） 1异常类（圆形） 2越限类（方形）\r\n// type 0红色代表动作，1绿色代表复归\r\nvar minDate = new Date(curTime+' 08:30:00').getTime();\r\n// 散点数据（x轴下方）\r\nvar resData = [\r\n\t{\r\n\t\tname: '08:43:00',\r\n\t\tvalue: [new Date(curTime+' 08:43:00').getTime(), 2],\r\n\t\tstatus: '1',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '09:13:00',\r\n\t\tvalue: [new Date(curTime+' 09:13:00').getTime(), 4],\r\n\t\tstatus: '0',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '09:43:00',\r\n\t\tvalue: [new Date(curTime+' 09:43:00').getTime(), 6.5],\r\n\t\tstatus: '0',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '10:15:00',\r\n\t\tvalue: [new Date(curTime+' 10:15:00').getTime(), 26],\r\n\t\tstatus: '1',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '10:42:00',\r\n\t\tvalue: [new Date(curTime+' 10:42:00').getTime(), 9],\r\n\t\tstatus: '2',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '10:44:00',\r\n\t\tvalue: [new Date(curTime+' 10:44:00').getTime(), 43],\r\n\t\tstatus: '1',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '10:50:00',\r\n\t\tvalue: [new Date(curTime+' 10:50:00').getTime(), 40],\r\n\t\tstatus: '1',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '12:10:00',\r\n\t\tvalue: [new Date(curTime+' 12:10:00').getTime(), 12],\r\n\t\tstatus: '2',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '13:05:00',\r\n\t\tvalue: [new Date(curTime+' 13:05:00').getTime(), 40],\r\n\t\tstatus: '1',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '13:30:00',\r\n\t\tvalue: [new Date(curTime+' 13:30:00').getTime(), 16],\r\n\t\tstatus: '1',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '13:40:00',\r\n\t\tvalue: [new Date(curTime+' 13:40:00').getTime(), 38],\r\n\t\tstatus: '2',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '14:00:00',\r\n\t\tvalue: [new Date(curTime+' 14:00:00').getTime(), 10],\r\n\t\tstatus: '2',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '14:30:00',\r\n\t\tvalue: [new Date(curTime+' 14:30:00').getTime(), 12],\r\n\t\tstatus: '1',\r\n\t\ttype: '1',\r\n\t},\r\n\t{\r\n\t\tname: '15:00:00',\r\n\t\tvalue: [new Date(curTime+' 15:00:00').getTime(), 13],\r\n\t\tstatus: '1',\r\n\t\ttype: '0',\r\n\t},\r\n\t{\r\n\t\tname: '15:38:00',\r\n\t\tvalue: [new Date(curTime+' 15:38:00').getTime(), 14],\r\n\t\tstatus: '1',\r\n\t\ttype: '1',\r\n\t},\r\n];\r\n// 散点数据（x轴上方）\r\nvar resData2 = [\r\n\t{\r\n        value: [new Date(curTime+' 11:05:00').getTime(), 2],\r\n        symbol: 'emptyCircle',\r\n        itemStyle: {\r\n            color: 'red',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:10:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:15:00').getTime(), 2],\r\n        symbol: 'emptyCircle',\r\n        itemStyle: {\r\n            color: 'red',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:20:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:25:00').getTime(), 2],\r\n        symbol: 'emptyCircle',\r\n        itemStyle: {\r\n            color: 'red',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:30:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:35:00').getTime(), 2],\r\n        symbol: 'emptyCircle',\r\n        itemStyle: {\r\n            color: 'red',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:40:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\nvar resData3 =  [\r\n    {\r\n        value: [new Date(curTime+' 08:40:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#ff0000',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 08:50:00').getTime(), 2],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#00ff00',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\nvar resData4 = [\r\n    {\r\n        value: [new Date(curTime+' 08:52:00').getTime(), 5],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#ff0000',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:00:00').getTime(), 5],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#00ff00',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\nvar resData5 = [\r\n    {\r\n        value: [new Date(curTime+' 11:10:00').getTime(), 10],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#ff0000',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 15:10:00').getTime(), 10],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: '#00ff00',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\nvar resData6 = [\r\n    {\r\n        value: [new Date(curTime+' 12:10:00').getTime(), 15],\r\n        symbol: 'triangle',\r\n        itemStyle: {\r\n            color: 'red',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 15:38:00').getTime(), 15],\r\n        symbol: 'arrow',\r\n        symbolRotate: 270,\r\n        itemStyle: {\r\n            color: 'blue',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\nvar resData7 = [\r\n    {\r\n        value: [new Date(curTime+' 08:30:00').getTime(), 12],\r\n        symbol: 'arrow',\r\n        symbolRotate: 90,\r\n        itemStyle: {\r\n            color: 'blue',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n    {\r\n        value: [new Date(curTime+' 11:25:00').getTime(), 12],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 10,\r\n    },\r\n];\r\n// 渲染图表\r\ndrawChart();\r\n\r\n// 渲染图表\r\nfunction drawChart() {\r\n\tvar scatterData = [];\r\n\tfor (var i=0; i<resData.length; i++) {\r\n\t\tvar obj = {\r\n\t\t\titemStyle: {}\r\n\t\t};\r\n\t\tobj.value = resData[i].value;\r\n\t\tobj.value[1] = -resData[i].value[1]; // 把分钟变成负数，好在x轴下方显示\r\n\t\tvar icon = '';\r\n\t\tvar color = '';\r\n\t\tif (resData[i].status == '0') {\r\n\t\t\ticon = 'triangle'\r\n\t\t} else if (resData[i].status == '1') {\r\n\t\t\ticon = 'circle'\r\n\t\t} else if (resData[i].status == '2') {\r\n\t\t\ticon = 'roundRect'\r\n\t\t}\r\n\t\tif (resData[i].type == '0') {\r\n\t\t\tcolor = '#ff0000';\r\n\t\t} else if (resData[i].type == '1') {\r\n\t\t\tcolor = '#00ff00';\r\n\t\t}\r\n\t\tif (resData[i].show == 'false') {\r\n\t\t\tobj.symbolSize = 0;\r\n\t\t} else {\r\n\t\t\tobj.symbolSize = 15;\r\n\t\t}\r\n\t\tobj.symbol = icon;\r\n\t\tobj.itemStyle.color = color;\r\n\t\tscatterData.push(obj);\r\n\t}\r\n\tvar obj2 = {\r\n        value: [new Date(curTime+' 08:30:00').getTime(), 20],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 0,\r\n    };\r\n    var obj3 = {\r\n        value: [new Date(curTime+' 18:00:00').getTime(), 20],\r\n        symbol: 'circle',\r\n        itemStyle: {\r\n            color: 'green',\r\n        },\r\n        symbolSize: 0,\r\n    };\r\n    scatterData.push(obj2);\r\n    // scatterData.push(obj3);\r\n// \tconsole.log(scatterData);\r\n    option = {\r\n        legend: {\r\n            data: ['列表'],\r\n        },\r\n        grid: {\r\n            left: '5%',\r\n            right: '5%',\r\n            bottom: '5%',\r\n            containLabel: true,\r\n        },\r\n        xAxis: {\r\n            name: '时间',\r\n            type: 'time',\r\n            min: minDate, // 当天08:30:00\r\n            splitNumber: 9,\r\n            axisLabel: {\r\n                formatter: function(value, index) {\r\n                    return echarts.format.formatTime('hh:mm', new Date(value));\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n        },\r\n        yAxis: {\r\n            type: 'value',\r\n            name: 'x',\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                formatter: function(value) {\r\n                    if (value > 0) {\r\n                        return '';\r\n                    } else {\r\n                        return Math.abs(value);\r\n                    }\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n        },\r\n        series: [\r\n            {\r\n                name: '',\r\n                type: 'scatter',\r\n                data: scatterData,\r\n                markLine: {\r\n                    animation: false,\r\n                    symbolSize: 0,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            lineStyle: {\r\n                                type: 'solid',\r\n                                color: 'blue'\r\n                            },\r\n                            label: {\r\n                                show: true,\r\n                                position: 'end',\r\n                                formatter: function() {\r\n                                    return '时间（分钟）';\r\n                                }\r\n                            }\r\n                        },\r\n                    },\r\n                    data: [\r\n                        // {\r\n                        //     name: '平均线',\r\n                        //     // 支持 'average', 'min', 'max'\r\n                        //     type: 'average'\r\n                        // },\r\n                        {\r\n                            name: 'Y水平线',\r\n                            yAxis: -40\r\n                        }\r\n                    ]\r\n                },\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'scatter',\r\n                data: resData2,\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'line',\r\n                data: resData3,\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'line',\r\n                data: resData4,\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'line',\r\n                data: resData5,\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'line',\r\n                lineStyle: {\r\n                    color: 'blue',\r\n                },\r\n                data: resData6\r\n            },\r\n            {\r\n                name: '',\r\n                type: 'line',\r\n                lineStyle: {\r\n                    color: 'blue',\r\n                },\r\n                data: resData7\r\n            },\r\n        ]\r\n    };\r\n}\r\n\r\n// 获取时间\r\nfunction getNowTime(type) { // type 1=年月日 2=时分秒 3=星期几\r\n\tvar time = '';\r\n\tvar date = new Date();\r\n\tvar year = date.getFullYear();\r\n\tvar month = date.getMonth() + 1;\r\n\tvar day = date.getDate();\r\n\tvar hours = date.getHours();\r\n\tvar minutes = date.getMinutes();\r\n\tvar seconds = date.getSeconds();\r\n\tvar weekArray = ['星期天', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六'];\r\n\tvar weekDay = date.getDay(); // 0~6 0=星期天\r\n\tif (month < 10) {\r\n\t\tmonth = '0' + month;\r\n\t}\r\n\tif (day < 10) {\r\n\t\tday = '0' + day;\r\n\t}\r\n\tif (hours < 10) {\r\n\t\thours = '0' + hours;\r\n\t}\r\n\tif (minutes < 10) {\r\n\t\tminutes = '0' + minutes;\r\n\t}\r\n\tif (seconds < 10) {\r\n\t\tseconds = '0' + seconds;\r\n\t}\r\n\tswitch(type) {\r\n\t\tcase '0':\r\n\t\t\ttime = year + '.' + month + '.' + day + ' ' + hours + ':' + minutes + ':' + seconds;\r\n\t\t\tbreak;\r\n\t\tcase '1':\r\n\t\t\ttime = year + '-' + month + '-' + day;\r\n\t\t\tbreak;\r\n\t\tcase '2':\r\n\t\t\ttime = hours + ':' + minutes + ':' + seconds;\r\n\t\t\tbreak;\r\n\t\tcase '3':\r\n\t\t\ttime = weekArray[weekDay];\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t}\r\n\treturn time;\r\n}","html":"","externalScripts":"","updaterUID":"bd-2536962124","theme":"","layout":"","viewCount":235,"userName":"韩***翎","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x77lC1h0XF.png?v=1600241529340","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markLine","series-line","series-scatter"],"customTags":[],"updaterUserName":"韩***翎"}}