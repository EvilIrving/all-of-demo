{"status":0,"data":{"cid":"x8Wt12AEWa","authorUid":"obd-oEgwfC2Zab-broL6tMBlLcPT1wCLL4P","authorUserName":"巨***a","title":"环形图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-21T05:53:24.000Z","lastUpdateTime":"2020-09-21T05:53:24.000Z","auth":2,"uid":"obd-oEgwfC2Zab-broL6tMBlLcPT1wCLL4P","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-21T07:58:03.000Z","code":"  \r\n\r\n\r\nlet angle = 0;//角度，用来做简单的动画效果的\r\nlet value = 2751;\r\noption = {\r\nbackgroundColor:\"#061740\",\r\ntitle: {\r\n        text: '{a|'+ value +'}',\r\n        x: 'center',\r\n        y: 'center',\r\n        textStyle: {\r\n            rich:{\r\n                a: {\r\n                    fontSize: 48,\r\n                    color: '#d35161'\r\n                },\r\n                \r\n                c: {\r\n                    fontSize: 20,\r\n                    color: '#d35161',\r\n                    // padding: [5,0]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    series: [\r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.7,\r\n                        startAngle: (5+angle) * Math.PI / 180,\r\n                        endAngle: (175+angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#d35161\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, \r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.7,\r\n                        startAngle: (185+angle) * Math.PI / 180,\r\n                        endAngle: (355+angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#d35161\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (275+-angle) * Math.PI / 180,\r\n                        endAngle: (-5+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, \r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (5+-angle) * Math.PI / 180,\r\n                        endAngle: (85+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, \r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (95+-angle) * Math.PI / 180,\r\n                        endAngle: (175+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (185+-angle) * Math.PI / 180,\r\n                        endAngle: (265+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                console.log(api.getHeight)\r\n                let x0 = api.getWidth()/2;\r\n                let y0 = api.getHeight()/2.05;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (85+-angle))\r\n                return {\r\n                    type: 'rect',\r\n                    shape: {\r\n                       x: point.x, \r\n                       y:point.y,\r\n                       width: 3, \r\n                       height: 10\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",//粉\r\n                        fill: \"#84888a\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2.05;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (95.5+-angle))\r\n                return {\r\n                    type: 'rect',\r\n                    shape: {\r\n                       x: point.x, \r\n                       y:point.y,\r\n                       width: 3, \r\n                       height: 10\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",//粉\r\n                        fill: \"#84888a\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"ring5\",  //绿点\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (275+-angle))\r\n                return {\r\n                   type: 'rect',\r\n                    shape: {\r\n                       x: point.x, \r\n                       y:point.y,\r\n                       width: 3, \r\n                       height: 10\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",      //绿\r\n                        fill: \"#84888a\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, \r\n        {\r\n            name: \"ring5\",  //绿点\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (265+-angle))\r\n                return {\r\n                   type: 'rect',\r\n                    shape: {\r\n                       x: point.x, \r\n                       y:point.y,\r\n                       width: 3, \r\n                       height: 10\r\n                    },\r\n                    style: {\r\n                        stroke: \"#84888a\",      //绿\r\n                        fill: \"#84888a\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, \r\n        {\r\n            name: '攻击次数',\r\n            type: 'pie',\r\n            radius: ['58%', '45%'],\r\n            silent: true,\r\n            clockwise: true,\r\n            startAngle: 90,\r\n            z: 0,\r\n            zlevel: 0,\r\n            label: {\r\n                normal: {\r\n                    position: \"center\",\r\n\r\n                }\r\n            },\r\n            data: [{\r\n                    value: value,\r\n                    name: \"\",\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: '#373a41',\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    value: 100000-value,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#373a41\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n};\r\n\r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n    return {\r\n        x: x1,\r\n        y: y1\r\n    }\r\n}\r\n\r\n// function draw(){\r\n//     angle = angle+3\r\n//     myChart.setOption(option, true)\r\n//   //window.requestAnimationFrame(draw);\r\n// }\r\n\r\n// setInterval(function() {\r\n//     //用setInterval做动画感觉有问题\r\n//     draw()\r\n// }, 100);","html":"","externalScripts":"","updaterUID":"obd-oEgwfC2Zab-broL6tMBlLcPT1wCLL4P","theme":"","layout":"","viewCount":350,"userName":"巨***a","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8Wt12AEWa.png?v=1600675083636","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"巨***a"}}