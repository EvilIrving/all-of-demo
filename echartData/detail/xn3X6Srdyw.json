{"status":0,"data":{"cid":"xn3X6Srdyw","authorUid":"bd-3154358575","authorUserName":"a***5","title":"销售回款测试1","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2019-06-25T07:10:28.000Z","lastUpdateTime":"2019-06-25T07:10:28.000Z","auth":2,"uid":"bd-3154358575","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.1","versionCreateTime":"2019-09-08T12:15:07.000Z","code":"var data = [{\r\n        \"TimeBegin\": null,\r\n        \"TimeEnd\": null,\r\n        \"SalesVolume\": 1000000,\r\n        \"ReturnVolume\": 500000,\r\n        \"ReturnRate\": 0.5,\r\n        \"FirstRegionName\": null,\r\n        \"SecondRegionName\": null,\r\n        \"ThirdRegionName\": null,\r\n        \"FirstRegionStructure\": \"EF255C4B-91D8-47A5-AC36-EE257D030274\",\r\n        \"SecondRegionStructure\": \"D3456367-3493-4364-8CA4-75BA1CE401E9\",\r\n        \"ThirdRegionStructure\": null,\r\n        \"ShopName\": \"门店1\"\r\n    },\r\n    {\r\n        \"TimeBegin\": null,\r\n        \"TimeEnd\": null,\r\n        \"SalesVolume\": 800000,\r\n        \"ReturnVolume\": 500000,\r\n        \"ReturnRate\": 0.625,\r\n        \"FirstRegionName\": null,\r\n        \"SecondRegionName\": null,\r\n        \"ThirdRegionName\": null,\r\n        \"FirstRegionStructure\": null,\r\n        \"SecondRegionStructure\": null,\r\n        \"ThirdRegionStructure\": null,\r\n        \"ShopName\": \"门店2\"\r\n    },\r\n    {\r\n        \"TimeBegin\": null,\r\n        \"TimeEnd\": null,\r\n        \"SalesVolume\": 700000,\r\n        \"ReturnVolume\": 400000,\r\n        \"ReturnRate\": 0.5714,\r\n        \"FirstRegionName\": null,\r\n        \"SecondRegionName\": null,\r\n        \"ThirdRegionName\": null,\r\n        \"FirstRegionStructure\": null,\r\n        \"SecondRegionStructure\": null,\r\n        \"ThirdRegionStructure\": null,\r\n        \"ShopName\": \"门店3\"\r\n    },\r\n    {\r\n        \"TimeBegin\": null,\r\n        \"TimeEnd\": null,\r\n        \"SalesVolume\": 1000000,\r\n        \"ReturnVolume\": 1000000,\r\n        \"ReturnRate\": 1,\r\n        \"FirstRegionName\": null,\r\n        \"SecondRegionName\": null,\r\n        \"ThirdRegionName\": null,\r\n        \"FirstRegionStructure\": null,\r\n        \"SecondRegionStructure\": null,\r\n        \"ThirdRegionStructure\": null,\r\n        \"ShopName\": \"门店4\"\r\n    },\r\n    {\r\n        \"TimeBegin\": null,\r\n        \"TimeEnd\": null,\r\n        \"SalesVolume\": 500000,\r\n        \"ReturnVolume\": 400000,\r\n        \"ReturnRate\": 0.8,\r\n        \"FirstRegionName\": null,\r\n        \"SecondRegionName\": null,\r\n        \"ThirdRegionName\": null,\r\n        \"FirstRegionStructure\": null,\r\n        \"SecondRegionStructure\": null,\r\n        \"ThirdRegionStructure\": null,\r\n        \"ShopName\": \"门店5\"\r\n    },\r\n\r\n];\r\nvar data1 = [];\r\nvar data2 = [];\r\nvar data3 = [];\r\nvar data4 = [];\r\nfor (var i = 0; i < data.length; i++) {\r\n    data1.push(data[i].ShopName);\r\n    data2.push(data[i].ReturnVolume);\r\n    data3.push(data[i].SalesVolume - data[i].ReturnVolume);\r\n    data4.push(data[i].ReturnRate);\r\n}\r\n\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n        },\r\n        formatter: function(params, ticket, callback) {\r\n            var html = \"\"\r\n            html += params[0].name;\r\n            html += '<br /> 销售额：'\r\n            html += params[0].value + params[1].value;\r\n            html += '<br />回款：';\r\n            html += params[0].value;\r\n            html += '<br />回款率：';\r\n            html += params[2].value*100;\r\n            html += '%';\r\n            return html;\r\n        }\r\n    },\r\n    dataZoom: [{\r\n        type: 'inside'\r\n    }, {\r\n        type: 'slider'\r\n    }],\r\n    xAxis: {\r\n        data: data1\r\n    },\r\n    yAxis: [\r\n        {\r\n            type: 'value',\r\n            scale: true,\r\n            name: '金额',\r\n            min: 0,\r\n        },\r\n        {\r\n            type: 'value',\r\n            scale: true,\r\n            name: '回款率',\r\n            max: 1,\r\n            min: 0,\r\n        }\r\n    ],\r\n    series: [{\r\n            type: 'bar',\r\n            data: data2\r\n        },\r\n        {\r\n            type: 'bar',\r\n            data: data3\r\n        },\r\n        {\r\n            type: 'line',\r\n            data: data4,\r\n            yAxisIndex: 1,\r\n            stack: '回款率',\r\n        }\r\n    ]\r\n};\r\n\r\nmyChart.getZr().on('click',params=>{\r\n    console.log('点击zr');\r\n    const pointInPixel= [params.offsetX, params.offsetY];\r\n    if (myChart.containPixel('grid',pointInPixel)) {\r\n        let xIndex=myChart.convertFromPixel({seriesIndex:0},[params.offsetX, params.offsetY])[0];\r\n        /*事件处理代码书写位置*/\r\n        console.log(xIndex);\r\n        //这里可以根据X轴的索引来改变charts的数据显示\r\n\r\n}\r\n});","html":"","externalScripts":"","updaterUID":"bd-3154358575","theme":"","layout":"","viewCount":44,"userName":"a***5","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xn3X6Srdyw.png?v=1567944907124","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","series-line"],"customTags":[],"updaterUserName":"a***5"}}