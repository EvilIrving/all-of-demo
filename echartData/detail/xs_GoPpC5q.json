{"status":0,"data":{"cid":"xs_GoPpC5q","authorUid":"bd-2956842748","authorUserName":"天使第一二","title":"饼图--legend的格式化","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-01-07T12:19:18.000Z","lastUpdateTime":"2019-01-07T12:19:18.000Z","auth":2,"uid":"bd-2956842748","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-07T12:19:18.000Z","code":"//  颜色集合\r\n\tvar colorList = ['#14C7F8', '#15AAF1', '#24B462', '#FFD52E', '#F97638', '#FF2919'];\r\n\t\r\n\t// 总和\r\n\tvar total = {\r\n\t    value: 168,\r\n\t    name: '一类'\r\n\t}\r\n\t//某一类\r\n\tvar item = {\r\n\t    value: (18/168*100).toFixed(1)+\"%\",\r\n\t    name: '一类'\r\n\t}\r\n\tvar originalData = [{\r\n\t        value: 18,\r\n\t        name: '一类'\r\n\t    }, {\r\n\t        value: 60,\r\n\t        name: '二类'\r\n\t    }, {\r\n\t        value: 25,\r\n\t        name: \"三类\"\r\n\t    }, {\r\n\t        value: 25,\r\n\t        name: \"四类\"\r\n\t    }, {\r\n\t        value: 35,\r\n\t        name: \"五类\"\r\n\t    },\r\n\t    {\r\n\t        value: 25,\r\n\t        name: \"六类\"\r\n\t    }\r\n\t];\r\n\techarts.util.each(originalData, function(item, index) {\r\n\t    item.itemStyle = {\r\n\t        normal: {\r\n\t            color: colorList[index]\r\n\t        }\r\n\t    };\r\n\t});\r\n\tvar option = {\r\n\t    backgroundColor:'rgba(0,0,0,0.5)',\r\n\t    tooltip: {\r\n\t        trigger: 'item',\r\n\t        formatter: '{b}: {c} ({d}%)'\r\n\t    },\r\n\t    title: [{\r\n\t        text: item.name,\r\n\t        left: '32%',\r\n\t        top: '46%',\r\n\t        textAlign: 'center',\r\n\t        textBaseline: 'middle',\r\n\t        textStyle: {\r\n\t            color: '#999',\r\n\t            fontWeight: 'normal',\r\n\t            fontSize: 20\r\n\t        }\r\n\t    }, {\r\n\t        text: item.value,\r\n\t        left: '32%',\r\n\t        top: '53%',\r\n\t        textAlign: 'center',\r\n\t        textBaseline: 'middle',\r\n\t        textStyle: {\r\n\t            color: '#666',\r\n\t            fontWeight: 'normal',\r\n\t            fontSize: 22\r\n\t        }\r\n\t    }],\r\n\t    legend:{\r\n\t        type:'plain',\r\n\t        show:true,\r\n\t        orient:'vertical',\r\n\t        top:'center',\r\n\t        right:'16%',\r\n\t        height:120,\r\n\t        itemGap:28,\r\n\t        align:'left',\r\n\t        textStyle:{\r\n\t            color:'#FFF'\r\n\t        },\r\n\t        formatter:function(name){\r\n\t            var formatName = \"\";\r\n\t            var per = 0;\r\n\t            originalData.forEach(function(value, index, array) {\r\n\t                var eachName = value.name;\r\n\t                var totalValue = 0;\r\n\t                if(name==eachName){\r\n\t                    totalValue += value.value;\r\n\t                    per = (totalValue/total.value * 100).toFixed(1);\r\n\t                }\r\n                });\r\n                formatName = name + \"  \" + per + \"%\";\r\n                return formatName;\r\n\t        },\r\n\t        data:['一类','二类','三类','四类','五类','六类'],\r\n\t        //data:originalData\r\n\t    },\r\n\t    series: [{\r\n\t    \tcenter:[\"32%\",\"50%\"],\r\n\t        hoverAnimation: false, //设置饼图默认的展开样式\r\n\t        radius: ['40%', '55%'],\r\n\t        name: 'pie',\r\n\t        type: 'pie',\r\n\t        selectedMode: 'single',\r\n\t        selectedOffset: 16, //选中是扇区偏移量\r\n\t        clockwise: true,\r\n\t        startAngle: 90,\r\n\t        label: {\r\n\t            normal: {\r\n\t                show: false\r\n\t            }\r\n\t        },\r\n\t        labelLine: {\r\n\t            normal: {\r\n\t                show: false\r\n\t            }\r\n\t        },\r\n\t        itemStyle: {\r\n\t            normal: {\r\n\t                borderWidth: 1,\r\n\t                borderColor: 'rgba(0,0,0,0)',\r\n\t            },\r\n\t            emphasis: {\r\n\t                borderWidth: 0,\r\n\t                shadowBlur: 5,\r\n\t                shadowOffsetX: 0,\r\n\t                shadowColor: 'rgba(0, 0, 0, 0.2)'\r\n\t            }\r\n\t        },\r\n\t        data: originalData\r\n\t    },\r\n\t    {\r\n        type: 'pie',\r\n        data: [100],\r\n        z: 1,\r\n        radius: ['58%', '58.5%'],\r\n        center: ['32%', '50%'],\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(29,56,101,1)'\r\n            }\r\n        },\r\n        silent: true,\r\n        labelLine: {\r\n            normal: {\r\n                show: false\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n                position: 'center',\r\n                textStyle: {\r\n                    fontSize: 14,\r\n                    color: '#000'\r\n                }\r\n            }\r\n        },\r\n\r\n    },\r\n    {\r\n        type: 'pie',\r\n        data: [100],\r\n        z: 3,\r\n        radius: ['36%', '36.5%'],\r\n        center: ['32%', '50%'],\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(29,56,101,1)'\r\n            }\r\n        },\r\n        silent: true,\r\n        labelLine: {\r\n            normal: {\r\n                show: false\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n                position: 'center',\r\n                textStyle: {\r\n                    fontSize: 14,\r\n                    color: '#000'\r\n                }\r\n            }\r\n        },\r\n\r\n    },\r\n\t{//内圈\r\n        type: 'pie',\r\n        data: [100],\r\n        z: 3,\r\n        radius: ['28%', '28.5%'],\r\n        center: ['32%', '50%'],\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(29,56,101,1)'\r\n            }\r\n        },\r\n        silent: true,\r\n        labelLine: {\r\n            normal: {\r\n                show: false\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n                position: 'center',\r\n                textStyle: {\r\n                    fontSize: 14,\r\n                    color: '#000'\r\n                }\r\n            }\r\n        },\r\n\r\n    }]\r\n\t};","html":"","externalScripts":"","updaterUID":"bd-2956842748","theme":"","layout":"","viewCount":92,"userName":"天使第一二","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xs_GoPpC5q.png?v=1546863558219","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"天使第一二"}}