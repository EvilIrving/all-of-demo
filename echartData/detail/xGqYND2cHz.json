{"status":0,"data":{"cid":"xGqYND2cHz","authorUid":"bd-925573494","authorUserName":"群***乐","title":"地图+河流线+园区面","description":"地图+河流线+园区面","latestVersion":5,"alwaysLatest":1,"createTime":"2020-09-16T03:57:17.000Z","lastUpdateTime":"2020-09-30T09:57:07.000Z","auth":1,"uid":"bd-925573494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-25T07:49:56.000Z","code":"var cq_yubei_yuanqu_ploygon = \"/asset/get/s/data-1601004278072-mwT9hm1OS.json\"; // 园区面数据\r\n\r\nvar cq_yubei_yuanqu_ployline = \"/asset/get/s/data-1601000263534-L5nH9FF-Z.json\"; // 园区线数据\r\n\r\nvar cq = \"/asset/get/s/data-1600228345761-fxbCoFhIA.json\"; // cq\r\n\r\nvar river = \"/asset/get/s/data-1600223191033-_JIZbaq7Y.json\"; // 河流线数据\r\n\r\nmyChart.showLoading();\r\n\r\n\r\n\r\n$.getJSON(river, function(riverJson) {\r\n\r\n    /** -------问题（1）-echarts叠加河流--------- */\r\n\r\n    // 将rivergeojson 进行处理成 type:lines 所需的坐标格式\r\n    // 因为 echarts.registerMap() 只能加载面\\多面的geojson数据\"type\": \"MultiPolygon\",不能加载线要素\"type\" : \"LineString\",\r\n    // 多段线则不能显示 label,如长江不能显示在河流中部。\r\n    var riverLines = [].concat.apply([], riverJson.features.map(function(feature, idx) {\r\n        return {\r\n            coords: feature.geometry.coordinates\r\n        }\r\n    }));\r\n\r\n    /** -------问题（2）-echarts叠加园区之线要素--------- */\r\n    // 闭合多段线要素、但不能显示label\r\n    // 解决办法：在特定坐标点加点坐标，显示label\r\n    var dataArr = [{\r\n        name: '渝北区-空港新城-规划范围线',\r\n        value: [106.5845,29.7306],\r\n    },{\r\n        name: '渝北区_前沿科技城企业',\r\n        value: [106.6655,29.6656],\r\n    },{\r\n        name: '渝北区_创新经济走廊建成区',\r\n        value: [106.6184,29.6767],\r\n    },{\r\n        name: '渝北区_创新经济走廊建成区',\r\n        value: [106.5906,29.6496],\r\n    },{\r\n        name: '渝北区_仙桃数据谷',\r\n        value: [106.5482,29.7466],\r\n    },{\r\n        name: '空港工业园区-航空产业园',\r\n        value: [106.6466,29.7459],\r\n    },{\r\n        name: '空港工业园区-创新示范基地',\r\n        value: [106.6370,29.7591],\r\n    },{\r\n        name: '空港工业园区-航空小镇',\r\n        value: [106.6281,29.7837],\r\n    },{\r\n        name: '空港工业园区-木耳物流园',\r\n        value: [106.6787,29.8069],\r\n    },{\r\n        name: '渝北区_农业园区',\r\n        value: [106.7237,29.8808],\r\n    }];\r\n    \r\n    $.getJSON(cq_yubei_yuanqu_ployline, function(cq_yubei_yuanqu_ploylineJson) {\r\n\r\n        var yuanquLines = [].concat.apply([], cq_yubei_yuanqu_ploylineJson.features.map(function(feature, idx) {\r\n            return {\r\n                coords: feature.geometry.coordinates\r\n            }\r\n        }));\r\n\r\n        /** -------问题（3）-echarts叠加园区之面要素--------- */\r\n\r\n        // 叠加两个面数据可通过geo。但是不能配准，两个相互独立。\r\n        // 缩放和移动，可通过监听 'georoam' 实时改变\r\n        // $.getJSON(cq_yubei_yuanqu_ploygon, function(cq_yubei_yuanqu_ploygonJson) {\r\n        //     echarts.registerMap('园区', cq_yubei_yuanqu_ploygonJson);\r\n\r\n        $.getJSON(cq, function(geoJson) {\r\n            echarts.registerMap('重庆市', geoJson);\r\n            myChart.hideLoading();\r\n            option = {\r\n                backgroundColor: '#091c3d',\r\n                geo: [{\r\n                        zlevel: 1,\r\n                        show: true,\r\n                        map: '重庆市',\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: true,\r\n                                color: '#fff'\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        aspectScale: 1,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: 'transparent',\r\n                                borderColor: '#3fdaff',\r\n                                borderWidth: 2,\r\n                                shadowColor: 'rgba(63, 218, 255, 0.5)',\r\n                                shadowBlur: 30\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7',\r\n                            }\r\n                        }\r\n                    },\r\n                    // 匹配问题（3）\r\n                    // {\r\n                    //     zlevel:2,\r\n                    //     map: '园区',\r\n                    //     roam: true,\r\n                    // }\r\n                ],\r\n                series: [{\r\n                        zlevel: 3,\r\n                        type: 'lines',\r\n                        coordinateSystem: 'geo',\r\n                        polyline: true,\r\n                        data: riverLines,\r\n                        silent: true,\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: 'rgb(200, 35, 45)',\r\n                                // opacity: 0.2,\r\n                                width: 5\r\n                            }\r\n                        },\r\n                        label: {\r\n                            show: true,\r\n                            formatter: 'sss'\r\n                        }\r\n                    },\r\n                    // 匹配问题（2）\r\n                    {\r\n                        zlevel: 1,\r\n                        type: 'lines',\r\n                        coordinateSystem: 'geo',\r\n                        polyline: true,\r\n                        data: yuanquLines,\r\n                        silent: true,\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: '#3fdaff',\r\n                                // opacity: 0.2,\r\n                                // width: 5\r\n                            }\r\n                        },\r\n                        label: {\r\n                            show: true,\r\n                            formatter: 'ssss'\r\n                        }\r\n                    },\r\n                    // 匹配问题（2）--指定点label\r\n                    {\r\n                        zlevel: 1,\r\n                        type: 'scatter',\r\n                        coordinateSystem: 'geo',\r\n                        // symbol: 'none',\r\n                        symbolSize: 2,\r\n                        data: dataArr,\r\n                        label: { // 文字\r\n                            show: true,\r\n                            color: '#fff',\r\n                            position: 'top',\r\n                            // fontSize: 12,\r\n                            formatter:'{b}'\r\n                        },\r\n\r\n                    }\r\n                ]\r\n            };\r\n            myChart.setOption(option);\r\n        });\r\n\r\n        // });\r\n\r\n    });\r\n\r\n});","html":"","externalScripts":"","updaterUID":"bd-925573494","theme":"default","layout":"","viewCount":333,"userName":"群***乐","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xGqYND2cHz.png?v=1601020197098","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-lines"],"customTags":[],"updaterUserName":"群***乐"}}