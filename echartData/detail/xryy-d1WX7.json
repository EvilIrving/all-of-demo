{"status":0,"data":{"cid":"xryy-d1WX7","authorUid":"bd-2953846579","authorUserName":"f***0","title":"dataset的使用","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-07-09T13:49:42.000Z","lastUpdateTime":"2018-07-09T13:49:42.000Z","auth":2,"uid":"bd-2953846579","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-09T13:49:43.000Z","code":"option = {\n    legend: {},\n    tooltip: {},\n    dataset: {\n        source: [\n            ['product', '2012', '2013', '2014', '2015'],\n            ['A', 41.1, 30.4, 100, 100],\n            ['B', 86.5, 192.1, 100, 50],\n            ['C', 54.1, 67.2, 100, 50]\n        ]\n    },\n    xAxis: [{\n            type: 'category',\n            gridIndex: 0\n        },\n        {\n            type: 'category',\n            gridIndex: 1\n        },\n        {\n            type: 'category',\n            gridIndex: 2\n        },\n        {\n            type: 'category',\n            gridIndex: 3\n        }\n    ],\n    yAxis: [{\n            gridIndex: 0\n        },\n        {\n            gridIndex: 1\n        },\n        {\n            gridIndex: 2\n        },\n        {\n            gridIndex: 3\n        }\n    ],\n    grid: [{\n            x: '7%',\n            y: '7%',\n            width: '38%',\n            height: '38%',\n            tooltip: {\n                trigger: \"axis\"\n            }\n        },\n        {\n            x2: '7%',\n            y: '7%',\n            width: '38%',\n            height: '38%',\n            tooltip: {\n                trigger: \"axis\"\n            }\n        },\n        {\n            x: '7%',\n            y2: '7%',\n            width: '38%',\n            height: '38%'\n        },\n        {\n            x2: '7%',\n            y2: '7%',\n            width: '38%',\n            height: '38%'\n        }\n    ],\n    series: [\n        // These series are in the first grid.\n        {\n            type: 'bar',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            seriesLayoutBy: 'column'\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            seriesLayoutBy: 'column'\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            seriesLayoutBy: 'column'\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            seriesLayoutBy: 'column'\n        },\n        // These series are in the second grid.\n        {\n            type: 'bar',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            seriesLayoutBy: 'row'\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            seriesLayoutBy: 'row'\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            seriesLayoutBy: 'row'\n        },\n        //\n        {\n            id: 'pie1',\n            type: 'pie',\n            radius: '30%',\n            seriesLayoutBy: 'row',\n            center: ['25%', '75%'],\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            encode: {\n                itemName: 'product',\n                value: 3,\n                tooltip: 'C',\n            }\n        },\n        {\n            id: 'pie2',\n            type: 'pie',\n            radius: '30%',\n            seriesLayoutBy: 'column',\n            center: ['75%', '75%'],\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            encode: {\n                itemName: 'product',\n                value: 4,\n                tooltip: '2014'\n            }\n        }\n    ]\n};\n\nmyChart.on('updateAxisPointer', function(event) {\n    console.info(event)\n    var xAxisInfo = event.axesInfo[0];\n    var seriesIndex = event.seriesIndex;\n    var dataIndexInside = event.dataIndexInside;\n    var dataIndex = event.dataIndex;\n\n    if (xAxisInfo && seriesIndex === 0) {\n        let dimension = xAxisInfo.value + 1;\n        console.info(dimension)\n        myChart.setOption({\n            series: {\n                id: \"pie1\",\n                label: {\n                    formatter: '{b}: {@[' + dimension + ']} ({d}%)'\n                },\n                encode: {\n                    itemName: 'product',\n                    value: dimension,\n                    //tooltip:'A',\n                }\n            }\n        });\n    } else if (xAxisInfo && seriesIndex === 4) {\n        let dimension = xAxisInfo.value + 1;\n        console.info(dimension)\n        myChart.setOption({\n            series: {\n                id: \"pie2\",\n                label: {\n                    formatter: '{b}: {@[' + dimension + ']} ({d}%)'\n                },\n                encode: {\n                    itemName: 'product',\n                    value: dimension,\n                    //tooltip:'A',\n                }\n            }\n        });\n    }\n});","html":"","externalScripts":"","updaterUID":"bd-2953846579","theme":"","layout":"","viewCount":202,"userName":"f***0","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryy-d1WX7.png?v=1531144183088","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","legend","series-bar","series-pie","tooltip"],"customTags":[],"updaterUserName":"f***0"}}