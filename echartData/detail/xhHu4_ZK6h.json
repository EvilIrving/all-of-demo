{"status":0,"data":{"cid":"xhHu4_ZK6h","authorUid":"obd-oF_Gj-K1MCoM1CxLnBdEwynwSr44-5Y","authorUserName":"M***d","title":"双层环形图","description":"双层环形图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-09-01T04:27:09.000Z","lastUpdateTime":"2021-09-01T04:27:09.000Z","auth":2,"uid":"obd-oF_Gj-K1MCoM1CxLnBdEwynwSr44-5Y","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-09-01T04:27:09.000Z","code":" // 数据\r\nlet dataList = [\r\n    {value: 9, name: '企业管理'},\r\n    {value: 30, name: '企业服务'},\r\n    {value: 11, name: '企业文化'},\r\n    {value: 16, name: '运营服务'},\r\n    {value: 14, name: '营销业务'},\r\n    {value: 20, name: '营销管理'},\r\n];\r\nlet dataAllList = [\r\n     {value: 50, name: '营销占比'},\r\n    {value: 50, name: '企业占比'},\r\n];\r\n// 求和，计算 label 的旋转角度\r\nlet sum = 0;\r\ndataList.forEach((val)=> {\r\n    sum += val.value;\r\n});\r\nlet seriesData = [];\r\nlet addDeg = 0;\r\nlet deg = 0;\r\nfor (let i = 0; i < dataList.length; i++) {\r\n    // 计算 label 的旋转角度\r\n    addDeg = addDeg + (dataList[i].value/sum*360);\r\n    deg = addDeg - (dataList[i].value/sum*180);\r\n\r\n    seriesData.push({\r\n        value: dataList[i].value,\r\n        name: dataList[i].name,\r\n        label:{\r\n            rotate:deg\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(0, 0, 0, 0)',\r\n                borderWidth: 3,\r\n                shadowBlur: 0,\r\n                borderColor:'#fff',\r\n            }\r\n        }\r\n    });\r\n}\r\nlet seriesOption = [{\r\n    type: 'pie',\r\n    clockWise: false,\r\n    radius: ['60%', '80%'],\r\n    hoverAnimation: false,\r\n    itemStyle: {\r\n        normal: {\r\n            label: {\r\n                show: true,\r\n                position: 'inside',\r\n                color: '#4D77F4',\r\n                formatter: function(pram){\r\n                    return pram.data.name + pram.percent+'%'\r\n                },\r\n                padding:[-90,0, 0, 0],\r\n\r\n            }\r\n        }\r\n    },\r\n    data: seriesData\r\n},\r\n{\r\n    type: 'pie',\r\n    clockWise: false,\r\n    radius: [\"35%\", '60%'],\r\n    hoverAnimation: false,\r\n    tooltip: {\r\n        show: true,\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            borderWidth: 3,\r\n            shadowBlur: 0,\r\n            borderColor:'#fff',\r\n            label: {\r\n                show: true,\r\n                position: 'inside',\r\n                color: '#fff',\r\n                formatter: function(pram){\r\n                    return pram.data.name\r\n                },\r\n                padding:[15,0,0,0],\r\n                fontSize:12,\r\n            }\r\n        }\r\n    },\r\n    data: dataAllList\r\n}];\r\noption = {\r\n    backgroundColor: '#F2E38C',\r\n    color: ['#2EDBA4','#FFBE00'],\r\n    title: {\r\n                    subtext:'问题占比',//副标题文本\r\n                    text: '企业营销',\r\n                    top: 'center',\r\n                    left: 'center',\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 16\r\n                    },\r\n                    subtextStyle:{\r\n                        color: '#fff',\r\n                        fontSize: 18\r\n                    }\r\n     },\r\n    tooltip: {\r\n        show: false,\r\n    },\r\n    toolbox: {\r\n        show: false\r\n    },\r\n    series: seriesOption\r\n}","html":"","externalScripts":"","updaterUID":"obd-oF_Gj-K1MCoM1CxLnBdEwynwSr44-5Y","theme":"","layout":"","viewCount":0,"userName":"M***d","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhHu4_ZK6h.png?v=1630470429831","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"M***d"}}