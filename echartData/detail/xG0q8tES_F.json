{"status":0,"data":{"cid":"xG0q8tES_F","authorUid":"obd-oMub700Qx89DsCuoFFJGaowXvZv4c21","authorUserName":"c***o","title":"持仓展示","description":"使用bar和pie展示持仓","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-27T07:40:37.000Z","lastUpdateTime":"2020-12-27T07:40:37.000Z","auth":2,"uid":"obd-oMub700Qx89DsCuoFFJGaowXvZv4c21","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-27T14:06:38.000Z","code":"var bartop = 70;\nvar stockidscenter = 50;\nvar idscenter = 15;\nvar capbottom = 5;//50px\nvar bartitletop = bartop-5;\nvar bartop_text = bartop+'%';\nvar bartitletop_text = bartitletop+'%';\nvar capitalData= [\n        { name: \"电解锌\", data: [86] },\n        { name: \"硅锰合金\", data: [3] },\n        { name: \"磷酸氢钙\", data: [11] },\n      ];\noption = {\n    backgroundColor:'#fff',\n    title: [{\n        text: '重仓股Top10',\n        top:bartitletop_text,\n        left:'45%'\n    },\n    {\n         text: \"资产配置\",\n         left: \"45%\",\n         top: \"5px\",\n     }],\n    grid:[{\n            top:bartop_text,\n        },\n        {\n            top:capbottom+'%',\n            height:40\n        }],\n    legend:{\n        show:false,\n        top:capbottom+'%',\n        left:'55%',\n        data:{\n            name:'股票'\n        }\n    },\n    dataset:[\n        {\n            source: [\n                ['股票','债券','现金'],\n                [30,40,20],\n                ],\n        },\n        {\n        source: [\n            ['stockname', 'stockamount', 'stockpercent', 'top10idsA', 'top10idsus','top10idshk','top10idsApercent','top10idsuspercent','top10idshkpercent'],\n            ['贵州茅台', 36.6144, 0.047243,'主要消费', '主要消费', '主要消费',0.0472,0.0472,0.0472,],\n            ['五粮液'  , 23.9682, 0.030926,'工业'    , '工业'    , '工业'    ,0.0309,0.0309,0.0309,],\n            ['中国平安', 22.9909, 0.029665,'医药卫生', '医药卫生', '医药卫生',0.0296,0.0296,0.0296,],\n            ['立讯精密', 21.4294, 0.027650,'信息技术', '信息技术', '信息技术',0.0276,0.0276,0.0276,],\n            ['宁德时代', 15.1585, 0.019559,'原材料'  , '原材料'  , '原材料'  ,0.0195,0.0195,0.0195,],\n            ['隆基股份', 15.1417, 0.019537,'金融地产', '金融地产', '金融地产',0.0195,0.0195,0.0195,],\n            ['招商银行', 14.7713, 0.019059,'金融地产', '金融地产', '金融地产',0.0190,0.0190,0.0190,],\n            ['恒瑞医药', 13.9479, 0.017997,'信息技术', '信息技术', '信息技术',0.0179,0.0179,0.0179,], \n            ['中国中免', 12.7890, 0.016501,'医药卫生', '医药卫生', '医药卫生',0.0165,0.0165,0.0165,],\n            ['迈瑞医疗', 11.7198, 0.015122,'可选消费', '可选消费', '可选消费',0.0151,0.0151,0.0151,],\n            ]\n    }],\n\n    xAxis: [{\n        type:'category',\n    },\n    {\n        gridIndex:1,\n        axisLine: {\n            show: false,\n          },\n          axisTick: {\n            show: false,\n          },\n          splitLine: {\n            show: false,\n          },\n          axisLabel: {\n            show: false,\n          },\n    }],\n    yAxis: [{\n        name:'持仓价值'\n    },\n    {\n        gridIndex:1,\n        data: [\"资产占比\"],\n          axisLabel: {\n            show: false,\n          },\n          axisLine: {\n            show: false,\n          },\n          axisTick: {\n            show: false,\n          },\n          splitLine: {\n            show: false,\n          },\n    }],\n    tooltip:{\n        show:true\n    },\n    series: [{\n        type: 'bar',\n        name: 'stocktop10',\n        datasetIndex:1,\n        encode: {\n            \n            x:'stockname',\n            y:'stockamount',\n        },\n        itemStyle:{\n            barBorderRadius:[5,5,0,0]\n        },\n        tooltip:{\n            show:true,\n            trigger:'item',\n            formatter:function(params, ticket, callback){\n                // console.log(params.encode);\n                var text = params.value[params.encode.x[0]]+'\\n:'+params.value[params.encode.y[0]]+','+params.value[1]\n                return text\n            }\n        }\n    },\n    {\n        type:'pie',\n        name:'A股重仓股行业分布',\n        radius:['10%','15%'],\n        center:['15%',stockidscenter+'%'],\n        label:{\n            show:true,\n            formatter:'{@top10idsA}\\n{d}%'\n            // position:'center'\n        },\n        // data:[12, 34, 56, 10, 23]\n        datasetIndex:1,\n        encode:{\n         \n            value:'top10idsApercent'\n        }\n    },\n    {\n        type:'pie',\n        name:'港股重仓股行业分布',\n        radius:['10%','15%'],\n        center:['45%',stockidscenter+'%'],\n        label:{\n            show:true,\n            formatter:'{@top10idshk}\\n{@top10idshkpercent}%'\n            // position:'center'\n        },\n        // data:[12, 34, 56, 10, 23]\n        datasetIndex:1,\n        encode:{\n            \n            value:'top10idshkpercent'\n        }\n    },\n    ],\n    // color: [\n    //       \"#FCAD2C\",\n    //       \"#5292FD\",\n    //       \"#3DBB33 \",\n    //       \"#EF6B6E\",\n    //       \"#7F6AAD\",\n    //       \"#585247\",\n    //     ],\n};\ncapitalData.forEach((item, index) => {\n        option.series.push({\n          xAxisIndex:1,\n          yAxisIndex:1,\n          type: \"bar\",\n          name: item.name,\n          stack: \"1\",\n          label: {\n            normal: {\n              show: true,\n              position: [5, 5],\n              formatter: `{value|${item.data}}\\n\\n{name|${item.name}}`,\n            //   formatter: `{value|${item.data}}`,\n              align: \"left\",\n              textStyle: {\n                color: \"#fff\",\n                rich: {\n                  name: {\n                    fontSize: \"12\",\n                    fontWeight: 500,\n                    color: \"gray\",\n                  },\n                  value: {\n                    fontSize: \"18\",\n                    fontWeight: 500,\n                    color: \"#fff\",\n                  },\n                },\n              },\n            },\n          },\n          barWidth: 30,\n          data: item.data,\n          itemStyle: {\n            normal: {\n              barBorderRadius: [0],\n            },\n          },\n        });\n        if (index === 0) {\n          option.series[index+3].itemStyle.normal.barBorderRadius = [\n            5,\n            0,\n            0,\n            5,\n          ];\n        } else if (index === capitalData.length - 1) {\n          option.series[index+3].itemStyle.normal.barBorderRadius = [\n            0,\n            5,\n            5,\n            0,\n          ];\n        } else {\n          return;\n        }\n      });","html":"","externalScripts":"","updaterUID":"obd-oMub700Qx89DsCuoFFJGaowXvZv4c21","theme":"","layout":"","viewCount":28,"userName":"c***o","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xG0q8tES_F.png?v=1609077998804","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","series-bar","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"c***o"}}