{"status":0,"data":{"cid":"x1HAuKVGDj","authorUid":"bd-3827956332","authorUserName":"吃***糖","title":"自定义表格","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-09-04T07:21:08.000Z","lastUpdateTime":"2019-09-04T07:21:08.000Z","auth":2,"uid":"bd-3827956332","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-09-16T02:39:34.000Z","code":"var hours = ['10','08', '06', '04', '02', '00', '01', '03',\r\n    '05', '07' , '09'\r\n];\r\nvar days = ['82', '84', '86',\r\n    '88', '90', '92', '94', '96'\r\n];\r\n\r\nvar data = [\r\n    ['82', '02', 3,'0317210','OOLU','4310','../../ICON/SPECIAL/2.2.jpg','','../../ICON/SEQ/BACKGROUND.jpg','1'],\r\n    ['84', '02', 1,'0317211','OOLU','4310','../../ICON/SPECIAL/3.1.jpg','../../ICON/CATEGORY/IMPORT.jpg','../../ICON/SEQ/BACKGROUND.jpg','2'],\r\n    ['86', '02', 2,'0317212','OOLU','4310','','','../../ICON/SEQ/BACKGROUND.jpg','3'],\r\n    ['88', '02', 3,'0317213','OOLU','4310','','','../../ICON/SEQ/BACKGROUND.jpg','4'],\r\n    ['90', '02', 3,'0317214','OOLU','4310','../../ICON/SPECIAL/2.2.jpg','','../../ICON/SEQ/BACKGROUND.jpg','5'],\r\n    ['92', '02', 2,'0317215','OOLU','4310','','../../ICON/CATEGORY/IMPORT.jpg','../../ICON/SEQ/BACKGROUND.jpg','6'],\r\n    ['94', '02', 3,'0317216','OOLU','4310','','','../../ICON/SEQ/BACKGROUND.jpg','7'],\r\n    ['96', '02', 3,'0317217','OOLU','4310','../../ICON/SPECIAL/3.1.jpg','','../../ICON/SEQ/BACKGROUND.jpg','8'],\r\n];\r\n\r\nvar data1 = data.map(function(item) {\r\n    var imagePath = 'none';\r\n    if(item[6] && item[6]!= \"\"){\r\n        imagePath = 'image://'+ item[6];\r\n    }\r\n    return {\r\n        'value':[item[1], item[0], item[3], item[4] || '', item[5] || '', item[6] || '', item[7] || '',item[2] || '-'],\r\n        'symbol': imagePath ,        \r\n    }\r\n});\r\nvar data3 = data.map(function(item) {\r\n    var imagePath = 'none';\r\n    if(item[7] && item[7] != \"\"){\r\n        imagePath = 'image://'+ item[7];\r\n    }\r\n    return {\r\n        'value':[item[1], item[0], item[3], item[4] || '', item[5] || '', item[6] || '', item[7] || '',item[2] || '-'],\r\n        'symbol': imagePath ,        \r\n    }\r\n});\r\nvar data4 = data.map(function(item) {\r\n    var imagePath = 'none';\r\n    if(item[8] && item[8]!= \"\"){\r\n        imagePath = 'image://'+ item[8];\r\n    }\r\n    return {\r\n        'value':[item[1], item[0], item[3], item[4] || '', item[5] || '', item[6] || '', item[9] || '',item[2] || '-'],\r\n        'symbol': imagePath ,        \r\n    }\r\n});\r\nvar data2 = data.map(function(item) {\r\n    return [item[1], item[0], item[3], item[4] || '', item[5] || '', item[6] || '', item[7] || '',item[2] || '-'];\r\n});\r\nvar imageUrl ='';\r\noption = {\r\n    tooltip: {\r\n\r\n        position: 'top'\r\n    },\r\n    animation: false,\r\n    grid: {\r\n        y: '10%'        \r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        data: hours,\r\n        splitArea: {\r\n            show: true\r\n        }\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        data: days,\r\n        splitArea: {\r\n            show: true\r\n        },\r\n    },\r\n    visualMap: {\r\n        min: 0,\r\n        max: 3,\r\n        splitNumber: 3,\r\n        inRange: {\r\n            color: ['#d94e5d','#eac736','#50a3ba'].reverse()\r\n        },\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    series: [{\r\n            name: 'heatmap',\r\n            type: 'heatmap',\r\n            data: data1,\r\n            zlevel: 2\r\n        }, {\r\n            name: 'topLeft1',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            //symbolSize: [30,30],\r\n            symbolSize: 1,\r\n            symbol: 'circle',\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: function(params) {\r\n                        imageUrl = params.value[5];\r\n                        return '\\n\\n {a|' + (params.value[2] || '')+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'left',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 66,\r\n                            width: 60,\r\n                            height: 20,\r\n                            fontSize: 10,\r\n                            fontWeight: 800,\r\n                            color: '#e00',\r\n                            textBorderColor: '#eee'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data2,\r\n            zlevel: 3\r\n        }, {\r\n            name: 'topLeft2',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            symbolSize: 1,\r\n            symbol: 'rect',\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: function(params){\r\n                        return '{a|'+params.value[3]+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'left',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 66,\r\n                            width: 60,\r\n                            height: 20,\r\n                            fontSize: 12,\r\n                            fontWeight: 800,\r\n                            color: '#e00',\r\n                            textBorderColor: '#eee'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data2,\r\n            zlevel: 4\r\n        }, {\r\n            name: 'bottomLeft',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            symbol: 'rect',\r\n            symbolOffset : [-20,20],\r\n            symbolSize: [30,30],\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                    formatter: function(params){\r\n                        return '\\n\\n {a|'+\" \"+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'left',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 25,\r\n                            width: 30,\r\n                            height: 30,\r\n                            color: '#e00',\r\n                            textBorderColor: '#eee',\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data1,\r\n            zlevel: 4\r\n        }, {\r\n            name: 'topright',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            symbol: 'rect',\r\n            symbolOffset : [20,-25],\r\n            symbolSize: [15,15],\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                    formatter: function(params){\r\n                        return '{a|'+\"\"+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'right',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 66,\r\n                            width: 15,\r\n                            height: 15,\r\n                            color: '#e00',\r\n                            textBorderColor: '#eee',\r\n                           \r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data3,\r\n            zlevel: 4\r\n        }, {\r\n            name: 'bottomright2',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            symbol: 'rect',\r\n            symbolOffset : [15,15],\r\n            symbolSize: [30,20],\r\n\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: function(params){\r\n                        return '{a|'+params.value[6]+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'center',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 18,\r\n                            width: 30,\r\n                            height: 20,\r\n                            color: '#000000',\r\n                            textBorderColor: '#eee',\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data4,\r\n            zlevel: 4\r\n        }, {\r\n            name: 'bottomright3',\r\n            type: 'scatter',\r\n            //coordinateSystem: 'calendar',\r\n            symbolSize: 2,\r\n            symbol: 'rect',\r\n            symbolOffset : [20,60],\r\n\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: function(params){\r\n                        return '{a|'+params.value[4]+'}';\r\n                    },\r\n                    rich: {\r\n                        a: {\r\n                            align: 'right',\r\n                            verticalAlign: 'top',\r\n                            lineHeight: 66,\r\n                            width: 20,\r\n                            height: 10,\r\n                            color: '#e00',\r\n                            textBorderColor: '#eee',\r\n                            fontSize: 10,\r\n                            fontWeight: 800,\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data1,\r\n            zlevel: 4\r\n        }\r\n        /*{\r\n            type: 'scatter',\r\n            data: data2,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'left',\r\n                    distance: 20,\r\n                    formatter: function (params) {\r\n                    //var d = echarts.number.parseDate(params.value[0]);\r\n                    return '{a|'+params.value[2]+'}';\r\n                    },\r\n                    width: 50,\r\n                    rich: {\r\n                        a: {\r\n                            color:'#000',\r\n                            lineHeight: 16,\r\n                            //backgroundColor : \"#eac736\",\r\n                            backgroundColor: {\r\n                                image: '../img/icon.png'\r\n                            },\r\n                            align: 'left',\r\n                            //fontSize: 16\r\n                        }\r\n\r\n                    }\r\n                }\r\n            },\r\n            symbolOffset:[25,-25],//偏移度\r\n            symbol:'circle',\r\n            zlevel: 3,\r\n            symbolSize :10,//点大小\r\n            itemStyle: {\r\n                color: '#d94e5d',\r\n                borderColor: '#eeeeee',\r\n                borderWidth: 1 \r\n            }\r\n        },*/\r\n        /*{\r\n            type: 'custom',\r\n            //coordinateSystem: 'calendar',\r\n            renderItem: renderItem,\r\n            dimensions: [null, {type: 'ordinal'}],\r\n            data: data2\r\n        }*/\r\n        /*,\r\n        {\r\n            name: 'before',\r\n            type: 'scatter',\r\n            color: 'red',\r\n            data: data2,\r\n            zlevel: 3\r\n        },*/\r\n    ]\r\n\r\n};\r\nfunction renderItem(params, api) {\r\n    var cellPoint = api.coord(api.value(0));\r\n   /*var cellWidth = params.coordSys.cellWidth;\r\n    var cellHeight = params.coordSys.cellHeight;*/\r\n    var cellWidth = 70;\r\n    var cellHeight = 70;\r\n\r\n    var value = api.value(1);\r\n    var events = value;  \r\n\r\n    /*if (isNaN(cellPoint[0]) || isNaN(cellPoint[1])) {\r\n        return;\r\n    }*/\r\n\r\n    var group = {\r\n        type: 'group',\r\n        children: echarts.util.map(layouts[3], function (itemLayout, index) {\r\n            return {\r\n                type: 'image',\r\n                /*shape: {\r\n                    pathData: pathes[0],\r\n                    x: -8,\r\n                    y: -8,\r\n                    width: 16,\r\n                    height: 16\r\n                },*/\r\n                /*position: [\r\n                    cellPoint[0] + echarts.number.linearMap(itemLayout[0], [-0.5, 0.5], [-cellWidth / 2, cellWidth / 2]),\r\n                    cellPoint[1] + echarts.number.linearMap(itemLayout[1], [-0.5, 0.5], [-cellHeight / 2 + 20, cellHeight / 2])\r\n                ],*/\r\n                style: api.style({\r\n                    fill: colors[0],\r\n                    image:'../img/icon.png'\r\n                })\r\n            };\r\n        }) || []\r\n    };\r\n/*\r\n    group.children.push({\r\n        type: 'text',\r\n        style: {\r\n            x: cellPoint[0],\r\n            y: cellPoint[1] - cellHeight / 2 + 15,\r\n            text: echarts.format.formatTime('dd', api.value(0)),\r\n            fill: '#777',\r\n            textFont: api.font({fontSize: 14})\r\n\r\n        }\r\n    });*/\r\n\r\n    return group;\r\n}","html":"","externalScripts":"","updaterUID":"bd-3827956332","theme":"default","layout":"","viewCount":661,"userName":"吃***糖","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1HAuKVGDj.png?v=1568601574292","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-heatmap","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"吃***糖"}}