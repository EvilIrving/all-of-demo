{"status":0,"data":{"cid":"xe5C8F5krjL","authorUid":"obd-oCGcreEeutvBr-e3ePDVCEx2wamwb34","authorUserName":"高***2","title":"网络节点关系图","description":"网络节点关系图","latestVersion":1,"alwaysLatest":1,"createTime":"2020-03-31T07:07:42.000Z","lastUpdateTime":"2020-03-31T07:07:42.000Z","auth":2,"uid":"obd-oCGcreEeutvBr-e3ePDVCEx2wamwb34","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-03-31T07:07:42.000Z","code":"data=[\r\n        {name:\"HTTPS\",sip:\"192.168.0.1\",dip:\"192.168.1.1\"},\r\n        {name:\"HTTP\",sip:\"192.168.0.2\",dip:\"192.168.1.2\"},\r\n        {name:\"FTP\",sip:\"192.168.0.3\",dip:\"192.168.1.3\"},\r\n        {name:\"FTP1\",sip:\"192.168.0.4\",dip:\"192.168.1.4\"},\r\n        {name:\"FTP2\",sip:\"192.168.0.5\",dip:\"192.168.1.5\"},\r\n        {name:\"FTP3\",sip:\"192.168.0.6\",dip:\"192.168.1.6\"}\r\n      ]\r\n      let halfWidth = 150;\r\n      let halfHeight = 50;\r\n      let halfItemwidth = 85;\r\n      let halfItemHeight = 20;\r\n      let curveness0 = {\r\n        normal: {\r\n          curveness: 0\r\n        }\r\n      };\r\n      let curveness1 = {\r\n        normal: {\r\n          curveness: 0.6\r\n        }\r\n      };\r\n      let curveness2 = {\r\n        normal: {\r\n          curveness: -0.6\r\n        }\r\n      };\r\n      let curveness3 = {\r\n        normal: {\r\n          curveness: 0\r\n        }\r\n      };\r\n      var seriesData = [],\r\n        seriesData1 = [],\r\n        seriesData2 = [],\r\n        links = [];\r\n      let len = data.length,\r\n        stepx = 600,\r\n        stepy = 500;\r\n      data.forEach((item, ind) => {\r\n        //line表示的是第几行\r\n        let line = parseInt(ind / 3);\r\n        //判断奇偶行 0：偶数行 非 0：奇数行\r\n        let reminder = line % 2;\r\n        let radioX = reminder == 0 ? ind % 3 : 2 - (ind % 3); //横坐标的步长系数\r\n        // 所有的name索引优先排列（广度优先顺序）\r\n        seriesData1.push({\r\n          name: item.name,\r\n          x: halfWidth + stepx * radioX,\r\n          y: halfHeight + stepy * line,\r\n          value: 67,\r\n          category: 0,\r\n          symbol: \"roundRect\",\r\n          symbolSize: [150, 30]\r\n        });\r\n        let branch = {\r\n          value: 12,\r\n          category: 2,\r\n          label: {\r\n            normal: {\r\n              position: \"right\"\r\n            }\r\n          }\r\n        };\r\n        // name同项的稍后排列\r\n        seriesData2.push(\r\n          {\r\n            name: item.sip,\r\n            x: halfWidth + stepx * radioX,\r\n            y: halfHeight + stepy * line + 100,\r\n            ...branch\r\n          },\r\n          {\r\n            name: item.dip,\r\n            x: halfWidth + stepx * radioX,\r\n            y: halfHeight + stepy * line + 160,\r\n            ...branch\r\n          }\r\n        );\r\n\r\n        // 根据索引生成不同项之间的线性关系\r\n        // let curve = (ind+1)%3==0&&(ind+1)/3>0?//判断拐点时曲线的弯曲方向\r\n        let curve = curveness3;\r\n        curve =\r\n          ((ind + 1) / 3) % 2 == 0\r\n            ? curveness2\r\n            : ((ind + 1) / 3) % 2 == 1\r\n            ? curveness1\r\n            : curveness3; //判断拐点的奇偶 0：偶数  非0：奇数\r\n        if (ind < len - 1) {\r\n          links.push(\r\n            { source: ind, target: ind + 1, lineStyle: curve },\r\n            { source: ind, target: 2 * ind + len, lineStyle: curveness2 },\r\n            { source: ind, target: 2 * ind + len + 1, lineStyle: curveness2 }\r\n          );\r\n        } else {\r\n          links.push(\r\n            { source: ind, target: 2 * ind + len, lineStyle: curveness2 },\r\n            { source: ind, target: 2 * ind + len + 1, lineStyle: curveness2 }\r\n          );\r\n        }\r\n      });\r\n      seriesData = seriesData1.concat(seriesData2);\r\n\r\n     option = {\r\n        color: [\"#096DD9\", \"#1890FF\", \"#40A9FF\"],\r\n        series: [\r\n          {\r\n            type: \"graph\",\r\n            force: {\r\n              repulsion: 2000\r\n            },\r\n            roam: true,\r\n            label: {\r\n              normal: {\r\n                show: true\r\n              }\r\n            },\r\n            categories: [\r\n              {\r\n                name: \"事件\"\r\n              },\r\n              {\r\n                name: \"行业\"\r\n              },\r\n              {\r\n                name: \"个股\"\r\n              }\r\n            ],\r\n            data: seriesData,\r\n            links,\r\n            lineStyle: curveness1,\r\n            lineStyle: {\r\n              normal: {\r\n                opacity: 0.9,\r\n                width: 1.5,\r\n                curveness: 0\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      };","html":"","externalScripts":"","updaterUID":"obd-oCGcreEeutvBr-e3ePDVCEx2wamwb34","theme":"","layout":"","viewCount":2049,"userName":"高***2","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xe5C8F5krjL.png?v=1585638462973","isCustomThumbnail":0,"builtinTags":["category-work","series-graph"],"customTags":[],"updaterUserName":"高***2"}}