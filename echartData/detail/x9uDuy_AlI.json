{"status":0,"data":{"cid":"x9uDuy_AlI","authorUid":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","authorUserName":"阳***2","title":"后台集中清分产量统计","description":"单位：万元","latestVersion":1,"alwaysLatest":1,"createTime":"2020-05-20T01:40:16.000Z","lastUpdateTime":"2020-05-20T01:40:16.000Z","auth":2,"uid":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-20T01:40:16.000Z","code":"let oldData = [{\n        \"clrDate\": \"05-01\",\n        \"amount\": 1,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-01\",\n        \"amount\": 2,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-01\",\n        \"amount\": 3,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-01\",\n        \"amount\": 4,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-02\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-02\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-02\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-02\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-03\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-03\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-03\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-03\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-04\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-04\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-04\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-04\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-05\",\n        \"amount\": 1,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-05\",\n        \"amount\": 2,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-05\",\n        \"amount\": 3,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-05\",\n        \"amount\": 4,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-06\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-06\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-06\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-06\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-07\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-07\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-07\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-07\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    },\n    {\n        \"clrDate\": \"05-08\",\n        \"amount\": 5,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"100元流通券\"\n    },\n    {\n        \"clrDate\": \"05-08\",\n        \"amount\": 6,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"ATM专用钞\"\n    },\n    {\n        \"clrDate\": \"05-08\",\n        \"amount\": 7,\n        \"currencyType\": \"完整券\",\n        \"currencyCode\": \"硬币\"\n    },\n    {\n        \"clrDate\": \"05-08\",\n        \"amount\": 8,\n        \"currencyType\": \"残损券\",\n        \"currencyCode\": \"残损券\"\n    }\n];\n\nlet dateArr = [],\n    currentTypeArr = [],\n    currencyCodeArr = [],\n    seriesArr;\n\noldData.forEach((item) => {\n    if (dateArr.indexOf(item.clrDate) < 0) {\n        dateArr.push(item.clrDate);\n    }\n    if (currentTypeArr.indexOf(item.currencyType) < 0) {\n        currentTypeArr.push(item.currencyType);\n    }\n    if (currencyCodeArr.indexOf(item.currencyCode) < 0) {\n        currencyCodeArr.push(item.currencyCode);\n    }\n});\n\n\nseriesArr = currencyCodeArr.map((currencyCode) => {\n    return {\n        name: currencyCode,\n        stack: '',\n        type: 'bar',\n        data: []\n    };\n});\n\n\nfor (var i = 0; i < seriesArr.length; i++) {\n    if (seriesArr[i].name == '残损券') {\n        seriesArr[i].stack = '残损券';\n    } else {\n        seriesArr[i].stack = '完整券';\n    }\n    for (var j = 0; j < oldData.length; j++) {\n        for (var k = 0; k < dateArr.length; k++) {\n            if (seriesArr[i].name == oldData[j].currencyCode &&\n                seriesArr[i].stack == oldData[j].currencyType &&\n                dateArr[k] == oldData[j].clrDate) {\n                //console.log(i+'-'+j+'-'+k);\n                seriesArr[i].data[k] = oldData[j].amount;\n            }\n        }\n    }\n}\n/*\n[ {\n    name: \"100元流通券\",\n    stack: \"完整券\",\n    type: \"bar\",\n    data: Array[1, 5, 5, 5, 1, 5, 5, 5]\n}, {\n    name: \"ATM专用钞\",\n    stack: \"完整券\",\n    type: \"bar\",\n    data: Array[2, 6, 6, 6, 2, 6, 6, 6]\n}, {\n    name: \"硬币\",\n    stack: \"完整券\",\n    type: \"bar\",\n    data: Array[3, 7, 7, 7, 3, 7, 7, 7]\n}, {\n    name: \"残损券\",\n    stack: \"残损券\",\n    type: \"bar\",\n    data: Array[4, 8, 8, 8, 4, 8, 8, 8]\n}]\n*/\noption = {\n    title: {\n        text: '后台集中清分产量统计',\n        subtext: '单位：万元',\n        top: '0',\n        left: '10%',\n        textStyle: {\n            color: '#000',\n            align: 'center',\n        }\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        }\n    },\n    legend: {\n        data: currencyCodeArr,\n        right:'5%' \n    },\n    bottom: '3%',\n    grid: {\n        left: '3%',\n        right: '4%',\n        containLabel: true\n    },\n    xAxis: [{\n        type: 'category',\n        data: dateArr\n    }],\n    yAxis: [{\n        type: 'value'\n    }],\n    series: seriesArr\n};","html":"","externalScripts":"","updaterUID":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","theme":"","layout":"","viewCount":242,"userName":"阳***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9uDuy_AlI.png?v=1589938817076","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"阳***2"}}