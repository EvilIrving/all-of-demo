{"status":0,"data":{"cid":"xBuHbhto9","authorUid":"bd-2517504769","authorUserName":"m***a","title":" 多Y轴+时间轴+缩放+markLine ","description":"\n多Y轴+时间轴+缩放+markLine ","latestVersion":2,"alwaysLatest":1,"createTime":"2019-11-14T08:19:53.000Z","lastUpdateTime":"2019-11-14T08:19:53.000Z","auth":2,"uid":"bd-2517504769","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-15T05:01:32.000Z","code":" function timeParse(time, format) {\n     if (time === \"\" || time === undefined || time === null) {\n         return '';\n     };\n     var t = new Date(time);\n     t = t.getFullYear() > 0 ? t : new Date(Date.parse(time.replace(/-/g, \"/\"))); // Safari 出现日期转换的问题\n     var tf = function(i) {\n         return (i < 10 ? '0' : '') + i\n     };\n     return format.replace(/yyyy|MM|dd|HH|mm|ss/g, function(a) {\n         switch (a) {\n             case 'yyyy':\n                 return tf(t.getFullYear());\n             case 'MM':\n                 return tf(t.getMonth() + 1);\n             case 'mm':\n                 return tf(t.getMinutes());\n             case 'dd':\n                 return tf(t.getDate());\n             case 'HH':\n                 return tf(t.getHours());\n             case 'ss':\n                 return tf(t.getSeconds());\n         }\n     })\n }\n let markData = [{\n     name: \"早餐\",\n     xAxis: 1569979320000\n }, {\n     name: \"午餐\",\n     xAxis: 1569990120000\n }, {\n     name: \"晚餐\",\n     xAxis: 1570016300000\n }]\n\n  option = {\n     tooltip: {\n         trigger: 'item',\n         axisPointer: {\n             show: true,\n             type: 'cross',\n             lineStyle: {\n                 type: 'dashed',\n                 width: 1\n             },\n             label: {\n                 backgroundColor: \"rgba(50, 50, 50, 0.8)\"\n             }\n         },\n         formatter: function(e) {\n             let value = e.value;\n             if (e.seriesIndex === 0) { // 血糖值\n                 return e.marker + \"血糖值：\" + value[1] + \"<br/>时间：\" + timeParse(value[0], \"MM-dd HH:mm:ss\");\n             } else if (e.seriesIndex === 1) { // 用药记录\n                 return e.marker + \"剂量：\" + value[1] + \"<br/>时间：\" + timeParse(value[0], \"MM-dd HH:mm:ss\");\n             } else {\n                 return e.marker + \"饮食记录：\" + value[1] + \"<br/>时间：\" + timeParse(value[0], \"MM-dd HH:mm:ss\");\n             }\n         }\n     },\n     dataZoom: [{\n         // realtime: false, // 拖动时，是否实时更新系列的视图。如果设置为 false，则只在拖拽结束的时候更新。\n         startValue: 0,\n         xAxisIndex: [0, 1],\n         minValueSpan: 3600 * 24 * 1000,\n         maxValueSpan: 3600 * 24 * 1000,\n         top: \"51%\"\n     }],\n     grid: [{\n         left: '8%',\n         right: 50,\n         height: '35%'\n     }, {\n         left: '8%',\n         right: 50,\n         top: '58%',\n         height: '35%'\n     }],\n     xAxis: [{\n         type: 'time',\n         boundaryGap: true,\n         interval: 3600 * 4 * 1000,\n         min: 1569945600000,\n         max: 1570536000000,\n         splitLine: {\n             show: false\n         },\n         axisLine: {\n             lineStyle: { // 轴上的线样式\n                 color: '#ccc'\n             }\n         },\n         axisLabel: {\n             color: \"#333\"\n         }\n     }, {\n         gridIndex: 1,\n         type: 'time',\n         boundaryGap: true,\n         interval: 3600 * 4 * 1000,\n         min: 1569945600000,\n         max: 1570536000000,\n         axisLine: {\n             onZero: true\n         },\n         splitLine: {\n             show: false\n         },\n         axisTick: {\n             show: false\n         },\n         position: 'bottom',\n\n         axisLine: {\n\n             lineStyle: { // 轴上的线样式\n                 color: '#ccc'\n             }\n         },\n         axisLabel: {\n             show: false,\n             color: \"#333\"\n         }\n     }],\n     yAxis: [{\n         name: '血糖（mmol/L）',\n         nameGap: 40,\n         nameTextStyle: {\n             color: \"#333\"\n         },\n         axisTick: {\n             show: false\n         },\n         axisLabel: {\n             show: true,\n             color: \"#333\",\n             interval: 'auto'\n         },\n         axisLine: {\n             lineStyle: { // 轴上的线样式\n                 color: '#ccc'\n             }\n         },\n         splitLine: {\n             lineStyle: {\n                 color: '#dedede'\n             }\n         }\n     }, {\n         name: '', // 隐藏的Y轴\n         gridIndex: 1,\n         max: 20,\n         axisLine: {\n             show: false\n         },\n         axisTick: {\n             show: false\n         },\n         splitLine: {\n             show: false\n         },\n         axisLabel: {\n             show: false\n         }\n     }, {\n         name: '胰岛素（IU）',\n         nameGap: 40,\n         nameTextStyle: {\n             color: \"#333\"\n         },\n         axisTick: {\n             show: false\n         },\n         axisLabel: {\n             show: true,\n             color: \"#333\",\n             interval: 'auto'\n         },\n         axisLine: {\n             lineStyle: { // 轴上的线样式\n                 color: '#ccc'\n             }\n         },\n         splitLine: {\n             show: false\n         }\n     }],\n     series: [{\n             type: 'line',\n             yAxisIndex: 0,\n             color: ['#ED5358'],\n             smooth: true,\n             symbol: \"roundRect\",\n             symbolSize: 8,\n             data: [\n                 [1569945600000, 20],\n                 [1569960000000, 31],\n                 [1569974400000, 21],\n                 [1569988800000, 3],\n                 [1570003200000, 1],\n                 [1570017600000, 5],\n                 [1570032000000, 6],\n                 [1570046400000, 2],\n                 [1570060800000, 2],\n                 [1570075200000, 8],\n                 [1570089600000, 1],\n                 [1570104000000, 6],\n                 [1570118400000, 8],\n                 [1570132800000, 5],\n                 [1570147200000, 12],\n                 [1570161600000, 12],\n                 [1570176000000, 0],\n                 [1570190400000, 9],\n                 [1570204800000, 10],\n                 [1570219200000, 5],\n                 [1570233600000, 0],\n                 [1570248000000, 9],\n                 [1570262400000, 22],\n                 [1570276800000, 1],\n                 [1570291200000, 3],\n                 [1570305600000, 9],\n                 [1570320000000, 7],\n                 [1570334400000, 8],\n                 [1570348800000, 14],\n                 [1570363200000, 17],\n                 [1570377600000, 28],\n                 [1570392000000, 11],\n                 [1570406400000, 21],\n                 [1570420800000, 26],\n                 [1570435200000, 12],\n                 [1570449600000, 28],\n                 [1570464000000, 15],\n                 [1570478400000, 28],\n                 [1570492800000, 18],\n                 [1570507200000, 39],\n                 [1570521600000, 1],\n                 [1570536000000, 30]\n             ]\n         },\n         {\n             type: 'scatter',\n             yAxisIndex: 2,\n             color: ['#0073cf'],\n             symbol: \"image://data:image/png;base64,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\",\n             symbolSize: 25,\n             data: [\n                 [1569945600000, 1],\n                 [1569960000000, 5],\n                 [1569974400000, 4],\n                 [1569988800000, 8],\n                 [1570003200000, 8],\n                 [1570017600000, 7],\n                 [1570032000000, 2],\n                 [1570046400000, 8],\n                 [1570060800000, 6],\n                 [1570075200000, 4],\n                 [1570089600000, 1],\n                 [1570104000000, 4],\n                 [1570118400000, 6],\n                 [1570132800000, 1],\n                 [1570147200000, 7],\n                 [1570161600000, 3],\n                 [1570176000000, 8],\n                 [1570190400000, 0],\n                 [1570204800000, 5],\n                 [1570219200000, 7],\n                 [1570233600000, 7],\n                 [1570248000000, 4],\n                 [1570262400000, 0],\n                 [1570276800000, 3],\n                 [1570291200000, 8],\n                 [1570305600000, 7],\n                 [1570320000000, 7],\n                 [1570334400000, 6],\n                 [1570348800000, 5],\n                 [1570363200000, 5],\n                 [1570377600000, 3],\n                 [1570392000000, 7],\n                 [1570406400000, 7],\n                 [1570420800000, 8],\n                 [1570435200000, 7],\n                 [1570449600000, 4],\n                 [1570464000000, 2],\n                 [1570478400000, 4],\n                 [1570492800000, 7],\n                 [1570507200000, 7],\n                 [1570521600000, 4],\n                 [1570536000000, 8]\n             ],\n             markLine: {\n                 silent: true,\n                 symbol: \"diamond\",\n                 symbolSize: 10,\n                 label: {\n                     color: \"#333\",\n                     formatter: function(e) {\n                         let item = markData[e.dataIndex];\n                         return `${item.name}\\n${timeParse(e.value, 'HH:mm')}\\n`; // \"早餐\\n\"+ timeParse(e.value, 'HH:mm')+\"\\n\";\n                     }\n                 },\n                 lineStyle: {\n                     normal: {\n                         color: \"#999\",\n                         type: 'solid'\n                     }\n                 },\n                 data: markData\n             }\n         }, {\n             name: '表格饮食记录',\n             type: 'scatter',\n             xAxisIndex: 1,\n             yAxisIndex: 1,\n             animation: false,\n             symbol: \"rect\",\n             symbolSize: [150, 240],\n             itemStyle: {\n                 color: \"transparent\"\n             },\n             label: {\n                 show: true,\n                 position: \"insideTop\",\n                 formatter: function(e) {\n                     return [\n                         '{x|x} {a|牛奶牛奶200ml 23:00}',\n                         '{x|x} {a|油条200ml 12:00}',\n                         '{x|x} {a|豆浆100ml 13:00}',\n                         '{x|x} {a|炒粉200k 23:00}',\n                         '{x|x} {a|炒粉200k 23:00}',\n                         '{x|x} {a|炒粉200k 23:00}',\n                         '{x|x} {a|炒粉200k 23:00}',\n                         '{x|x} {a|豆浆100ml 13:00}'\n                     ].join('\\n')\n                 },\n                 rich: {\n                     a: {\n                         color: \"#333\",\n                         lineHeight: 29,\n                         verticalAlign: \"top\",\n                     },\n                     x: {\n                         lineHeight: 29,\n                         verticalAlign: \"top\",\n                         width: 10,\n                         height: 10,\n                         backgroundColor: '#4D9AFE', // 4D9AFE\n                         borderRadius: 5\n                     }\n                 }\n             },\n             markLine: {\n                 silent: true,\n                 symbol: \"diamond\",\n                 symbolSize: 5,\n                 label: {\n                     color: \"#333\",\n                     formatter: function(e) {\n                         return \"\";\n                     }\n                 },\n                 lineStyle: {\n                     normal: {\n                         color: \"#ccc\",\n                         type: 'solid'\n                     }\n                 },\n                 data: [{\n                     \"xAxis\": 1569945600000\n                 }, {\n                     \"xAxis\": 1569960000000\n                 }, {\n                     \"xAxis\": 1569974400000\n                 }, {\n                     \"xAxis\": 1569988800000\n                 }, {\n                     \"xAxis\": 1570003200000\n                 }, {\n                     \"xAxis\": 1570017600000\n                 }, {\n                     \"xAxis\": 1570032000000\n                 }, {\n                     \"xAxis\": 1570046400000\n                 }, {\n                     \"xAxis\": 1570060800000\n                 }, {\n                     \"xAxis\": 1570075200000\n                 }, {\n                     \"xAxis\": 1570089600000\n                 }, {\n                     \"xAxis\": 1570104000000\n                 }, {\n                     \"xAxis\": 1570118400000\n                 }, {\n                     \"xAxis\": 1570132800000\n                 }, {\n                     \"xAxis\": 1570147200000\n                 }, {\n                     \"xAxis\": 1570161600000\n                 }, {\n                     \"xAxis\": 1570176000000\n                 }, {\n                     \"xAxis\": 1570190400000\n                 }, {\n                     \"xAxis\": 1570204800000\n                 }, {\n                     \"xAxis\": 1570219200000\n                 }, {\n                     \"xAxis\": 1570233600000\n                 }, {\n                     \"xAxis\": 1570248000000\n                 }, {\n                     \"xAxis\": 1570262400000\n                 }, {\n                     \"xAxis\": 1570276800000\n                 }, {\n                     \"xAxis\": 1570291200000\n                 }, {\n                     \"xAxis\": 1570305600000\n                 }, {\n                     \"xAxis\": 1570320000000\n                 }, {\n                     \"xAxis\": 1570334400000\n                 }, {\n                     \"xAxis\": 1570348800000\n                 }, {\n                     \"xAxis\": 1570363200000\n                 }, {\n                     \"xAxis\": 1570377600000\n                 }, {\n                     \"xAxis\": 1570392000000\n                 }, {\n                     \"xAxis\": 1570406400000\n                 }, {\n                     \"xAxis\": 1570420800000\n                 }, {\n                     \"xAxis\": 1570435200000\n                 }, {\n                     \"xAxis\": 1570449600000\n                 }, {\n                     \"xAxis\": 1570464000000\n                 }, {\n                     \"xAxis\": 1570478400000\n                 }, {\n                     \"xAxis\": 1570492800000\n                 }, {\n                     \"xAxis\": 1570507200000\n                 }, {\n                     \"xAxis\": 1570521600000\n                 }, {\n                     \"xAxis\": 1570536000000\n                 }]\n             },\n             data: [\n                 [1569952800000, 10],\n                 [1569967200000, 10],\n                 [1569981600000, 10],\n                 [1569996000000, 10],\n                 [1570010400000, 10],\n                 [1570024800000, 10],\n                 [1570039200000, 10],\n                 [1570053600000, 10],\n                 [1570068000000, 10],\n                 [1570082400000, 10],\n                 [1570096800000, 10],\n                 [1570111200000, 10],\n                 [1570125600000, 10],\n                 [1570140000000, 10],\n                 [1570154400000, 10],\n                 [1570168800000, 10],\n                 [1570183200000, 10],\n                 [1570197600000, 10],\n                 [1570212000000, 10],\n                 [1570226400000, 10],\n                 [1570240800000, 10],\n                 [1570255200000, 10],\n                 [1570269600000, 10],\n                 [1570284000000, 10],\n                 [1570298400000, 10],\n                 [1570312800000, 10],\n                 [1570327200000, 10],\n                 [1570341600000, 10],\n                 [1570356000000, 10],\n                 [1570370400000, 10],\n                 [1570384800000, 10],\n                 [1570399200000, 10],\n                 [1570413600000, 10],\n                 [1570428000000, 10],\n                 [1570442400000, 10],\n                 [1570456800000, 10],\n                 [1570471200000, 10],\n                 [1570485600000, 10],\n                 [1570500000000, 10],\n                 [1570514400000, 10],\n                 [1570528800000, 10],\n                 [1570543200000, 10]\n             ]\n         }\n     ]\n };","html":"","externalScripts":"","updaterUID":"bd-2517504769","theme":"","layout":"","viewCount":2291,"userName":"m***a","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBuHbhto9.png?v=1573794093004","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","markLine","series-line","series-scatter","tooltip"],"customTags":[],"updaterUserName":"m***a"}}