{"status":0,"data":{"cid":"xImkmErUO6","authorUid":"obd-oE7g_85M3XppVRxCvYPJKsoCPCpyP4L","authorUserName":"凌***e","title":"堆叠图定不添加文字并对应柱子颜色","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-26T08:31:09.000Z","lastUpdateTime":"2021-08-26T08:31:09.000Z","auth":2,"uid":"obd-oE7g_85M3XppVRxCvYPJKsoCPCpyP4L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-26T08:31:09.000Z","code":"data = {\r\n    legend: ['线上开展', '线下开展', '应开展次数'], //图例\r\n    xaxis: ['支部党员大会', '支部委员会', '党小组会', '党课'], //x轴\r\n    yaxis: [\r\n        {\r\n            //y轴\r\n            name: '线上开展',\r\n            data: [100, 130, 30, 334],\r\n        },\r\n        {\r\n            name: '线下开展',\r\n            data: [20, 60, 101, 134],\r\n        },\r\n        {\r\n            name: '应开展次数',\r\n            data: [281.55, 398.35, 214.02, 219.55],\r\n        },\r\n    ],\r\n};\r\nlet y = data.xaxis;\r\nlet currData = data.yaxis;\r\nlet colorData = ['#5d8ff8', '#5bd8a6', '#5d7092', '#f5bd12', '#e8684a', '#6dc7ec'];\r\n\r\noption = {\r\n    backgroundColor: 'black',\r\n    legend: {\r\n        bottom: '5%',\r\n        x: 'center', //可设定图例在左、右、居中\r\n        data: data.legend,\r\n        itemWidth: 20,\r\n        itemHeight: 10,\r\n        itemGap: 100,\r\n        textStyle: {\r\n            fontSize: 32,\r\n            color: '#fff',\r\n        },\r\n    },\r\n    tooltip: {\r\n        trigger: 'axis',\r\n    },\r\n    color: colorData,\r\n    grid: {\r\n        top: '20%',\r\n        left: '3%',\r\n        right: '4%',\r\n        bottom: '20%',\r\n        containLabel: true,\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitLine: {\r\n            show: false,\r\n        },\r\n        axisLine: {\r\n            show: false,\r\n        },\r\n        axisLabel: {\r\n            // margin: 15,\r\n            interval: 0,\r\n            // borderWidth: 10,\r\n            // borderColor: \"#ffffff\",\r\n            fontSize: 32,\r\n            color: '#ffffff',\r\n        },\r\n        data: y,\r\n    },\r\n    yAxis: [\r\n        {\r\n            name: '次数',\r\n            nameTextStyle: {\r\n                color: '#FFFFFF',\r\n                fontSize: 32,\r\n                lineHeight: 70,\r\n            },\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            axisLabel: {\r\n                show: true,\r\n            },\r\n            splitLine: {\r\n                lineStyle: {\r\n                    color: '#0C52A2',\r\n                },\r\n            },\r\n            axisLine: {\r\n                show: false,\r\n            },\r\n            axisLabel: {\r\n                color: '#ffffff',\r\n                fontSize: 30,\r\n            },\r\n        },\r\n    ],\r\n    series: [],\r\n};\r\nlet len = currData.length;\r\nfor (let i = 0; i < len; i++) {\r\n    let item = currData[i];\r\n    let name = item.name;\r\n    let value = item.data;\r\n    let serie = {\r\n        type: 'bar',\r\n        barWidth: 100,\r\n        name: name,\r\n        stack: 1,\r\n        data: value,\r\n        itemStyle: {\r\n            normal: {\r\n                label: {\r\n                    show: true,\r\n                    position: 'top', //top\r\n                    formatter: function (p) {\r\n                        if(i > 0){\r\n                            const preData = currData[i-1];\r\n                            if(preData.data[p.dataIndex]==0&&p.value==0){\r\n                                return ''\r\n                            }\r\n                            else if(preData.data[p.dataIndex]==0){\r\n                                return p.value;\r\n                            }else if(p.value==0){\r\n                                return \"{a|\"+preData.data[p.dataIndex]+\"}\"\r\n                            }else{\r\n                               return p.value > 0 ? \"{a|\"+preData.data[p.dataIndex]+\"}{c|,}{b|\"+p.value+\"}\" : ''; \r\n                            }\r\n                            \r\n                        }else{\r\n                            return '';\r\n                        }\r\n                    },\r\n                    rich:{\r\n                        a:{\r\n                            color:'#5d8ff8',\r\n                            fontSize:28\r\n                        },\r\n                        b:{\r\n                            color:'#5bd8a6',\r\n                            fontSize:28\r\n                        },\r\n                        c:{\r\n                            color:\"#fff\",\r\n                            fontSize:28\r\n                        }\r\n                    },\r\n                    textStyle: {\r\n                        //数值样式\r\n                        fontSize: 28\r\n                    },\r\n                }\r\n            }\r\n        },\r\n    };\r\n    if (i == currData.length - 1) {\r\n        serie = {\r\n            type: 'bar',\r\n            name: name,\r\n            data: value,\r\n            barWidth: 80,\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: true,\r\n                        position: 'top',\r\n                        textStyle: {\r\n                            //数值样式\r\n                            fontSize: 28,\r\n                        },\r\n                        formatter: function (p) {\r\n                            return p.value > 0 ? p.value : '';\r\n                        },\r\n                    },\r\n                    color: function (params) {\r\n                        var colorList = ['#E8684A'];\r\n                        return colorList[0];\r\n                    },\r\n                },\r\n            },\r\n        };\r\n    }\r\n    option.series.push(serie);\r\n}\r\n","html":"","externalScripts":"","updaterUID":"obd-oE7g_85M3XppVRxCvYPJKsoCPCpyP4L","theme":"","layout":"","viewCount":0,"userName":"凌***e","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xImkmErUO6.png?v=1629966669601","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"凌***e"}}