{"status":0,"data":{"cid":"xpOcBPPF7N","authorUid":"obd-o-WzQPFutxoDfuyDDPhYMEEbOshjlAV","authorUserName":"8***2","title":"关系图绑定点击事件","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-19T08:07:56.000Z","lastUpdateTime":"2020-10-19T08:07:56.000Z","auth":2,"uid":"obd-o-WzQPFutxoDfuyDDPhYMEEbOshjlAV","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-19T08:07:56.000Z","code":"// 调试页面回打印出点击的节点名称\n\nvar person = \"/asset/get/s/data-1561621393298-zQTG-TuDS.png\";\nvar car = \"/asset/get/s/data-1561621386236-0IGCc48l6.png\";\nvar phone = \"/asset/get/s/data-1561621379686-rZHoryrBV.png\";\n\nvar size = 50; //节点大小\n\n\nvar listdata = [];\nvar links = [];\nvar legendes = [\"手机IMSI\", \"人脸ID\", \"车牌号码\", \"人脸ID\"];\nvar texts = [];\n\n\nvar phoneNum = {\n    \"手机号:13856978256\": \"13856978256\",\n    \"手机号:13998745632\": \"13998745632\",\n    \"手机号:18812345678\": \"18812345678\",\n    \"手机号:16812345678\": \"16812345678\",\n    \"手机号:13856971111\": \"13856978256\",\n    \"手机号:13998742222\": \"13998745632\",\n    \"手机号:18812344444\": \"18812345678\",\n    \"手机号:16812343333\": \"16812345678\",\n    \"手机号:13878978256\": \"13856978256\",\n    \"手机号:137895632\": \"13998745632\",\n};\n\nvar phoneIMSI = [\"次数:1，匹配度:6%\", \"次数:3，匹配度:30%\", \"次数:2，匹配度:26%\",\n    \"次数:2，匹配度:26%\", \"次数:2，匹配度:26%\", \"次数:2，匹配度:26%\",\n    \"匹配手机号码\", \"匹配手机号码\", \"匹配手机号码\", \"匹配手机号码\"\n];\n\n\nvar carNum = {\n    \"车牌号码:豫AJ9685\": \"豫AJ9685\",\n    \"车牌号码:豫AG5123\": \"豫AG5123\",\n    \"车牌号码:豫AG6822\": \"豫AG6822\",\n    \"车牌号码:豫CJ9685\": \"豫AJ9685\",\n    \"车牌号码:豫AD5123\": \"豫AG5123\",\n    \"车牌号码:豫AT6822\": \"豫AG6822\",\n    \"车牌号码:豫AG6622\": \"豫AG6822\",\n    \"车牌号码:豫CJ9885\": \"豫AJ9685\",\n};\nconst relationShipCar = [\"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\", \"匹配车牌号码\"];\n\nvar mainRelationShip = {\n    人脸ID: \"732\"\n};\n\nfunction setDataPerson(json, n) {\n    var i = 0;\n    for (var p in json) {\n        listdata.push({\n            x: 50,\n            y: 100,\n            \"name\": p,\n            \"showName\": json[p],\n            \"symbol\": 'image://' + \"/asset/get/s/data-1561621393298-zQTG-TuDS.png\",\n            \"symbolSize\": 70,\n            \"category\": n,\n            \"draggable\": \"false\",\n            formatter: function(params) {\n                return params.data.showName;\n            },\n            label: {\n                position: 'bottom'\n            }\n        });\n        i++;\n    }\n}\n\nfunction setDataPhone(json, n) {\n    var i = 0;\n    for (var p in json) {\n        listdata.push({\n            x: i * 50,\n            y: size + i * 10,\n            \"name\": p,\n            \"showName\": json[p],\n            \"symbol\": 'image://' + \"/asset/get/s/data-1561621386236-0IGCc48l6.png\",\n            \"symbolSize\": size,\n            \"category\": n,\n            \"draggable\": \"false\",\n            formatter: function(params) {\n                return params.data.showName;\n            },\n            label: {\n                position: 'bottom'\n            }\n        });\n        i++;\n    }\n}\n\nfunction setDataCar(json, n) {\n    var i = 0;\n    for (var p in json) {\n        listdata.push({\n            x: i * 50,\n            y: size + i * 10,\n            \"name\": p,\n            \"showName\": json[p],\n            \"symbol\": 'image://' + \"/asset/get/s/data-1561621379686-rZHoryrBV.png\",\n            \"symbolSize\": size,\n            \"category\": n,\n            \"draggable\": \"false\",\n            formatter: function(params) {\n                return params.data.showName;\n            },\n            label: {\n                position: 'bottom'\n            }\n        });\n        i++;\n    }\n}\n\nfunction setLinkData(json, relarr, title) {\n    if (relarr !== \"\") {\n        var i = 0;\n        for (var p in json) {\n            links.push({\n                \"source\": p,\n                \"target\": title,\n                \"value\": relarr[i],\n                lineStyle: {\n                    normal: {\n                        // text: relarr[i],\n                        color: 'source'\n                    }\n                }\n            });\n            i++;\n        }\n    } else {\n        for (var p2 in json) {\n            links.push({\n                \"source\": p2,\n                \"target\": title,\n                \"value\": \"\",\n                lineStyle: {\n                    normal: {\n                        color: 'source'\n                    }\n                }\n            });\n        }\n    }\n}\n\nfor (var i = 0; i < legendes.length; i++) {\n    texts.push({\n        \"name\": legendes[i]\n    });\n}\n\nsetDataPhone(phoneNum, 0);\nsetDataCar(carNum, 2);\nsetDataPerson(mainRelationShip, 3);\n\nsetLinkData(phoneNum, phoneIMSI, legendes[3]);\nsetLinkData(carNum, relationShipCar, legendes[3]);\n\noption = {\n    title: {\n        text: \"关系图绑定点击事件\",\n        top: \"top\",\n        left: \"left\",\n        textStyle: {\n            color: '#000000'\n        }\n    },\n    tooltip: {\n        formatter: '{b}'\n    },\n\n    backgroundColor: '#f7f7f7',\n    legend: {\n        data: legendes,\n        textStyle: {\n            color: '#000000'\n        },\n        icon: 'circle',\n        type: 'scroll',\n        orient: 'vertical',\n        left: 10,\n        top: 20,\n        bottom: 20,\n        itemWidth: 10,\n        itemHeight: 10\n    },\n    animationDuration: 1000,\n    animationEasingUpdate: 'quinticInOut',\n    series: [{\n        type: 'graph',\n        layout: 'force',\n        force: {\n            repulsion: 80,\n            gravity: 0,\n            edgeLength: 150,\n            layoutAnimation: true,\n        },\n        data: listdata,\n        links: links,\n        categories: texts,\n        roam: false,\n        nodeScaleRatio: 0,\n        focusNodeAdjacency: false,\n        lineStyle: {\n            normal: {\n                opacity: 0.5,\n                width: 1.5,\n                curveness: 0\n            }\n        },\n        label: {\n            normal: {\n                show: true,\n                position: 'inside',\n                textStyle: {\n                    color: '#000000',\n                    fontWeight: 'normal',\n                    fontSize: \"12\" //字体大小\n                },\n                formatter: function(params) {\n                    return params.data.showName\n                },\n                fontSize: 18,\n                fontStyle: '600',\n            }\n        },\n        edgeLabel: {\n            normal: {\n                show: true,\n                textStyle: {\n                    fontSize: 12\n                },\n                formatter: \"{c}\"\n            }\n        }\n    }],\n    color: ['#e8b842', '#41b1ef', '#667aed', '#347fbb', '#772cdc',\n        '#ff69b4', '#ba55d3', '#cd5c5c', '#ffa500', '#40e0d0'\n    ]\n};\n\nconst clickFun = param => {\n    console.log(param.name)\n}\n\nmyChart.on(\"click\", clickFun);","html":"","externalScripts":"","updaterUID":"obd-o-WzQPFutxoDfuyDDPhYMEEbOshjlAV","theme":"","layout":"","viewCount":5212,"userName":"8***2","commentCount":1,"starCount":24,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpOcBPPF7N.png?v=1603094877061","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","title","tooltip"],"customTags":[],"updaterUserName":"8***2"}}