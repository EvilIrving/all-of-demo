{"status":0,"data":{"cid":"xNzQ_Xl57K","authorUid":"obd-o0KPBcWRE8PcwIIXcDHrHz2c9atQVFT","authorUserName":"d***7","title":"百分比堆叠柱状图","description":"百分比堆叠柱状图，数据需要自己处理为100归一化的数，通过自定义toolTip能够展示每个柱的百分比","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-10T04:02:13.000Z","lastUpdateTime":"2020-09-10T04:02:13.000Z","auth":2,"uid":"obd-o0KPBcWRE8PcwIIXcDHrHz2c9atQVFT","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-10T04:02:13.000Z","code":"// 注意：数据需要自己归一化为100的百分比\nconst dataList = [{\n        \"x0\": \"2011-08-03\",\n        \"y0\": 10,\n        \"y1\": 20,\n        \"y2\": 25,\n        \"y3\": 5,\n        \"y4\": 30,\n        \"y5\": 10\n    },\n    {\n        \"x0\": \"2009-09-03\",\n        \"y0\": 5,\n        \"y1\": 25,\n        \"y2\": 25,\n        \"y3\": 5,\n        \"y4\": 30,\n        \"y5\": 10\n    },\n    {\n        \"x0\": \"1992-11-30\",\n        \"y0\": 50,\n        \"y1\": 20,\n        \"y2\": 15,\n        \"y3\": 5,\n        \"y4\": 5,\n        \"y5\": 5\n    },\n    {\n        \"x0\": \"1990-04-02\",\n        \"y0\": 2,\n        \"y1\": 6,\n        \"y2\": 10,\n        \"y3\": 14,\n        \"y4\": 18,\n        \"y5\": 50\n    },\n];\nvar option = {\n    title: {\n        text: '百分比堆叠柱状图',\n    },\n    grid: {\n        top: 60,\n        left: 30,\n        right: 50,\n        bottom: 30,\n        containLabel: true,\n    },\n    color: ['#647af4', '#30d194', '#27b0f5', '#62708c', '#d65d3e', '#e1a50b'],\n    legend: {\n        top: 30,\n        left: 10,\n        icon: 'circle',\n        selectedMode: false,\n    },\n    tooltip: {\n        trigger: 'axis',\n        backgroundColor: '#fff',\n        textStyle: {\n            color: '#333',\n        },\n        extraCssText: 'box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.3);',\n        axisPointer: {\n            type: 'shadow',\n        },\n        // 定义显示tooltip，参数请使用console.log(params) 查看\n        formatter(params) {\n            const categoryName = (params && params[0] && params[0].name) || '';\n            const obj = params.map((item, index) => {\n                if (item.value === undefined) {\n                    // eslint-disable-next-line\n                    item.value = 0;\n                }\n                // 小圆点显示\n                const dotColor = `<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:${item.color}\"></span>`;\n                return `${dotColor + item.seriesName}: ${item.value[item.dimensionNames[item.encode.y[0]]]}%</br>`;\n            });\n            return `${categoryName} </br> ${obj.join('')}`;\n        },\n    },\n    dataset: {\n        source: dataList\n    },\n    grid: {\n        containLabel: true\n    },\n    xAxis: {\n        type: 'category',\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n    },\n    yAxis: {\n        show: false,\n    },\n    series: [{\n            name: '绿茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y0',\n            },\n        },\n        {\n            name: '红茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y1',\n            }\n        },\n        {\n            name: '白茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y2',\n            }\n        },\n        {\n            name: '青茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y3',\n            }\n        },\n        {\n            name: '黑茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y4',\n            }\n        },\n        {\n            name: '黄茶',\n            type: 'bar',\n            stack: '百分比',\n            encode: {\n                x: 'x0',\n                y: 'y5',\n            }\n        },\n\n    ]\n};","html":"","externalScripts":"","updaterUID":"obd-o0KPBcWRE8PcwIIXcDHrHz2c9atQVFT","theme":"","layout":"","viewCount":385,"userName":"d***7","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNzQ_Xl57K.png?v=1599710533531","isCustomThumbnail":1,"builtinTags":["category-work","dataset","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"d***7"}}