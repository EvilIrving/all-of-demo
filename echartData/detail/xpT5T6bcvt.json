{"status":0,"data":{"cid":"xpT5T6bcvt","authorUid":"bd-365218436","authorUserName":"G***G","title":"圆环动画","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-15T11:56:30.000Z","lastUpdateTime":"2021-05-15T11:56:30.000Z","auth":2,"uid":"bd-365218436","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-15T11:56:30.000Z","code":"let angle = 0;//角度，用来做简单的动画效果的\noption = {\n    color:['#008bee',\"#03e9d5\",\"#fcff00\"],\n    tooltip: {\n        trigger: 'item'\n    },\n    title: {\n        text: '{a|'+ 50 +'}{c|%}',\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            rich:{\n                a: {\n                    fontSize: 48,\n                    color: '#29EEF3'\n                },\n                \n                c: {\n                    fontSize: 20,\n                    color: '#ffffff',\n                    // padding: [5,0]\n                }\n            }\n        }\n    },\n    series: [\n        {\n            name: '访问来源',\n            type: 'pie',\n            radius: ['40%', '70%'],\n            avoidLabelOverlap: false,\n            itemStyle: {\n                borderRadius: 20,\n                borderColor: '#fff',\n                borderWidth: 20\n            },\n            label: {\n                show: false,\n                position: 'center'\n            },\n            emphasis: {\n                label: {\n                    show: false,\n                    // fontSize: '40',\n                    // fontWeight: 'bold'\n                }\n            },\n            labelLine: {\n                show: false\n            },\n            data: [\n                {value: 1048, name: '搜索引擎'},\n                {value: 735, name: '直接访问'},\n                {value: 580, name: '邮件营销'},\n            ]\n        },\n        {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\n                        startAngle: (0+angle) * Math.PI / 180,\n                        endAngle: (90+angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\n                        startAngle: (180+angle) * Math.PI / 180,\n                        endAngle: (270+angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\n                        startAngle: (270+-angle) * Math.PI / 180,\n                        endAngle: (40+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\n                        startAngle: (90+-angle) * Math.PI / 180,\n                        endAngle: (220+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\n                let point = getCirlPoint(x0, y0, r, (90+-angle))\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",//粉\n                        fill: \"#0CD3DB\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",  //绿点\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\n                let point = getCirlPoint(x0, y0, r, (270+-angle))\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4\n                    },\n                    style: {\n                        stroke: \"#0CD3DB\",      //绿\n                        fill: \"#0CD3DB\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n    ]\n};\n\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\n    return {\n        x: x1,\n        y: y1\n    }\n}\n\nfunction draw(){\n    angle = angle+3\n    myChart.setOption(option, true)\n   //window.requestAnimationFrame(draw);\n}\n\nsetInterval(function() {\n    //用setInterval做动画感觉有问题\n    draw()\n}, 100);\n","html":"","externalScripts":"","updaterUID":"bd-365218436","theme":"","layout":"","viewCount":0,"userName":"G***G","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpT5T6bcvt.png?v=1621079790841","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"G***G"}}