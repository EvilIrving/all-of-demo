{"status":0,"data":{"cid":"xy6tZLbF3m","authorUid":"obd-ojfTcmuKEZvtV3nmjgvAWean0d-QdDd","authorUserName":"天***虚","title":"任务进展详情","description":"协助模块任务进展详情","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-25T08:52:55.000Z","lastUpdateTime":"2020-12-25T08:52:55.000Z","auth":2,"uid":"obd-ojfTcmuKEZvtV3nmjgvAWean0d-QdDd","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-25T08:52:55.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1608885653923-6Kn2IlkrV.json\";\n\nfunction getTaskBarOptions ({ xList, sData }, taskType) {\n  // 根据不同的任务\n  const settingObj = {\n    midterm: {\n      color: '#28B3C0',\n      name: '中期要求'\n    },\n    total: {\n      color: '#42A76A',\n      name: '结项要求'\n    }\n  }\n\n  const option = {\n      backgroundColor: '#000',\n    grid: {\n      left: 74,\n      top: 45,\n      right: 32\n    },\n    tooltip: {\n      show: true,\n      alwaysShowContent: true,\n      trigger: 'axis',\n      axisPointer: {\n        type: 'shadow'\n      },\n      formatter: (p) => {\n        let { data, name } = p[0]\n        const html = `\n          <p>${name}</p>\n          <p>目标总数：${data.totalTargetCount}</p>\n          <p>已完成数：${data.completedCount}</p>\n          <p>完成进度：${data.value}%</p>\n        `\n        return html\n      }\n    },\n    xAxis: {\n      type: 'category',\n      data: xList,\n      axisLine: {\n        lineStyle: {\n          color: 'rgba(94, 100, 121, 0.3)'\n        }\n      },\n      axisLabel: {\n        show: true,\n        interval: 'auto',\n        color: 'rgba(183, 193, 233, 0.6)',\n        fontSize: 10,\n        formatter: function (params) {\n          var index = 4\n          // var newstr = ''\n          // for (var i = 0; i < params.length; i += index) {\n          //   var tmp = params.substring(i, i + index)\n          //   newstr += tmp + '\\n'\n          // }\n          if (params.length > index) {\n            return params.substring(0, index) + '...'\n          } else {\n            return params\n          }\n        }\n      }\n    },\n    yAxis: {\n      type: 'value',\n      min: 0,\n      max: 100,\n      axisLine: {\n        lineStyle: {\n          color: 'rgba(94, 100, 121, 0.2)'\n        }\n      },\n      axisLabel: {\n        show: true,\n        interval: 'auto',\n        formatter: '{value} %',\n        color: 'rgba(183, 193, 233, 0.6)',\n        fontSize: 10\n      },\n      splitLine: {\n        show: false\n      }\n    },\n    dataZoom: [\n      {\n        type: 'slider',\n        start: 0,\n        end: 50,\n        borderColor: '#252836',\n        fillerColor: 'rgba(40, 179, 192, 0.15)',\n        handleStyle: {\n          color: '#484D64'\n        },\n        textStyle: {\n          color: 'rgba(183, 193, 233, 0.3)'\n        }\n      }\n    ],\n    series: [\n      // 中期要求\n      {\n        name: settingObj[taskType].name,\n        itemStyle: {\n          color: settingObj[taskType].color\n        },\n        showBackground: true,\n        barMaxWidth: 50,\n        backgroundStyle: {\n          color: 'rgba(40, 179, 192, 0.07)'\n        },\n        data: sData,\n        type: 'bar'\n      }\n    ]\n  }\n\n  return option\n}\n\n$.getJSON(uploadedDataURL, function(geoJson){\n    const curActiveTaskType = 'total'\n    const taskBarData = geoJson.target_progress[curActiveTaskType]\n    const chart = echarts.init(document.getElementById('chart-panel'));\n    const option = getTaskBarOptions(taskBarData, curActiveTaskType)\n    \n    chart.setOption(option);\n})\n","html":"","externalScripts":"","updaterUID":"obd-ojfTcmuKEZvtV3nmjgvAWean0d-QdDd","theme":"","layout":"","viewCount":44,"userName":"天***虚","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xy6tZLbF3m.png?v=1608886375277","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"天***虚"}}