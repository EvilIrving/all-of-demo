{"status":0,"data":{"cid":"xTrSENc63t","authorUid":"obd-oCohVz9c-ablr4omDXf-IEt6MYpuc3n","authorUserName":"150*****568","title":"广东地图柱形图","description":"用柱形图展示数据的差异","latestVersion":2,"alwaysLatest":0,"createTime":"2021-05-26T06:20:01.000Z","lastUpdateTime":"2021-05-26T06:20:01.000Z","auth":2,"uid":"obd-oCohVz9c-ablr4omDXf-IEt6MYpuc3n","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-26T06:28:40.000Z","code":"    var uploadedDataURL = \"/asset/get/s/data-1602465184603-MDCI9F57V.json\";\n    var geoCoordMap = {\n      广州市: [113.507649675, 23.3200491021],\n      东莞市: [113.863433991, 22.9430238154],\n      中山市: [113.422060021, 22.5451775145],\n      云浮市: [111.750945959, 22.9379756855],\n      佛山市: [113.034025635, 23.0350948405],\n      惠州市: [114.41065808, 23.1135398524],\n      揭阳市: [116.079500855, 23.3479994669],\n      梅州市: [116.126403098, 24.304570606],\n      汕头市: [116.588650288, 23.2839084533],\n      汕尾市: [115.572924289, 22.9787305002],\n      江门市: [112.678125341, 22.2751167835],\n      河源市: [114.913721476, 23.9572508505],\n      深圳市: [114.025973657, 22.5960535462],\n      清远市: [113.040773349, 23.9984685504],\n      湛江市: [110.165067263, 21.2574631038],\n      潮州市: [116.830075991, 23.7618116765],\n      珠海市: [113.262447026, 22.1369146461],\n      肇庆市: [112.37965337, 23.5786632829],\n      茂名市: [110.931245331, 21.9682257188],\n      阳江市: [111.777009756, 21.9715173045],\n      韶关市: [113.594461107, 24.8029603119]\n    }\n    var customerBatteryCityData = [\n        {name: \"阳江市\", value: 70},\n        {name: \"茂名市\", value: 20},\n        {name: \"广州市\", value: 70},\n        {name: \"河源市\", value: 70},\n        {name: \"湛江市\", value: 120},\n        {name: \"潮州市\", value: 70},\n        {name: \"东莞市\", value: 70},\n        {name: \"深圳市\", value: 0},\n        {name: \"清远市\", value: 70},\n        {name: \"韶关市\", value: 10},\n        {name: \"云浮市\", value: 70},\n        {name: \"惠州市\", value: 150},\n        {name: \"汕头市\", value: 60},\n        {name: \"揭阳市\", value: 80},\n        {name: \"中山市\", value: 70},\n        {name: \"肇庆市\", value: 70},\n        {name: \"珠海市\", value: 120},\n        {name: \"汕尾市\", value: 0},\n        {name: \"江门市\", value: 70},\n        {name: \"梅州市\", value: 70},\n        {name: \"佛山市\", value: 10}\n    ]\n    $.getJSON(uploadedDataURL, function(geoJson) {\n        echarts.registerMap('guangdong', geoJson);\n        option = {\n            backgroundColor: '#131C38',\n            tooltip: {\n                // borderWidth: 0,\n                trigger: 'item',\n                show: true,\n                enterable: true,\n                textStyle:{\n                    fontSize:20,\n                    color: '#fff'\n                },\n                backgroundColor: 'rgba(0,2,89,0.8)',\n                formatter: '{b}<br />{c}'\n            },\n            geo: [\n              {\n                map: 'guangdong',\n                aspectScale: 0.9,\n                roam: false, // 是否允许缩放\n                zoom: 1.2, // 默认显示级别\n                layoutSize: '95%',\n                layoutCenter: ['55%', '50%'],\n                itemStyle: {\n                  normal: {\n                    areaColor: {\n                      type: 'linear-gradient',\n                      x: 0,\n                      y: 400,\n                      x2: 0,\n                      y2: 0,\n                      colorStops: [{\n                        offset: 0,\n                        color: 'rgba(37,108,190,0.3)' // 0% 处的颜色\n                      }, {\n                        offset: 1,\n                        color: 'rgba(15,169,195,0.3)' // 50% 处的颜色\n                      }],\n                      global: true // 缺省为 false\n                    },\n                    borderColor: '#4ecee6',\n                    borderWidth: 1\n                  },\n                  emphasis: {\n                    areaColor: {\n                      type: 'linear-gradient',\n                      x: 0,\n                      y: 300,\n                      x2: 0,\n                      y2: 0,\n                      colorStops: [{\n                        offset: 0,\n                        color: 'rgba(37,108,190,1)' // 0% 处的颜色\n                      }, {\n                        offset: 1,\n                        color: 'rgba(15,169,195,1)' // 50% 处的颜色\n                      }],\n                      global: true // 缺省为 false\n                    }\n                  }\n                },\n                emphasis: {\n                  itemStyle: {\n                    areaColor: '#0160AD'\n                  },\n                  label: {\n                    show: 0,\n                    color: '#fff'\n                  }\n                },\n                zlevel: 3\n              },\n              {\n                map: 'guangdong',\n                aspectScale: 0.9,\n                roam: false, // 是否允许缩放\n                zoom: 1.2, // 默认显示级别\n                layoutSize: '95%',\n                layoutCenter: ['55%', '50%'],\n                itemStyle: {\n                  normal: {\n                    borderColor: 'rgba(192,245,249,.6)',\n                    borderWidth: 2,\n                    shadowColor: '#2C99F6',\n                    shadowOffsetY: 0,\n                    shadowBlur: 120,\n                    areaColor: 'rgba(29,85,139,.2)'\n                  }\n                },\n                zlevel: 2,\n                silent: true\n              },\n              {\n                map: 'guangdong',\n                aspectScale: 0.9,\n                roam: false, // 是否允许缩放\n                zoom: 1.2, // 默认显示级别\n                layoutSize: '95%',\n                layoutCenter: ['55%', '51.5%'],\n                itemStyle: {\n                  // areaColor: '#005DDC',\n                  areaColor: 'rgba(0,27,95,0.4)',\n                  borderColor: '#004db5',\n                  borderWidth: 1\n                },\n                zlevel: 1,\n                silent: true\n              }\n            ],\n            series: [\n              {\n                geoIndex: 0,\n                // coordinateSystem: 'geo',\n                showLegendSymbol: true,\n                type: 'map',\n                roam: true,\n                label: {\n                  normal: {\n                    show: false,\n                    textStyle: {\n                      color: '#fff'\n                    }\n                  },\n                  emphasis: {\n                    show: false,\n                    textStyle: {\n                      color: '#fff'\n                    }\n                  }\n                },\n    \n                itemStyle: {\n                  normal: {\n                    borderColor: '#2ab8ff',\n                    borderWidth: 1.5,\n                    areaColor: '#12235c'\n                  },\n                  emphasis: {\n                    areaColor: '#2AB8FF',\n                    borderWidth: 0,\n                    color: 'red'\n                  }\n                },\n                map: 'guangdong', // 使用\n                data: customerBatteryCityData\n                // data: this.difficultData //热力图数据   不同区域 不同的底色\n              },\n              {\n                type: 'lines',\n                zlevel: 5,\n                effect: {\n                  show: false,\n                  // period: 4, //箭头指向速度，值越小速度越快\n                  // trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                  // symbol: 'arrow', //箭头图标\n                  // symbol: imgDatUrl,\n                  symbolSize: 5 // 图标大小\n                },\n                lineStyle: {\n                  width: 17, // 尾迹线条宽度\n                  color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 1,\n                    y2: 0,\n                    colorStops: [\n                      {\n                        offset: 0,\n                        color: 'rgb(199,145,41)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 0.5,\n                        color: 'rgb(199,145,41)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 0.5,\n                        color: 'rgb(223,176,32)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 1,\n                        color: 'rgb(223,176,32)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 1,\n                        color: 'rgb(199,145,41)' // 100% 处的颜色\n                      }\n                    ],\n                    global: false // 缺省为 false\n                  },\n                  opacity: 1, // 尾迹线条透明度\n                  curveness: 0 // 尾迹线条曲直度\n                },\n                label: {\n                  show: 0,\n                  position: 'end',\n                  formatter: '245'\n                },\n                silent: true,\n                data: lineData()\n              },\n              {\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                geoIndex: 0,\n                zlevel: 5,\n                label: {\n                  show: false,\n                  position: 'bottom',\n                  formatter: (params) => this.data[params.dataIndex].value,\n                  padding: [4, 8],\n                  backgroundColor: '#003F5E',\n                  borderRadius: 5,\n                  borderColor: '#67F0EF',\n                  borderWidth: 1,\n                  color: '#67F0EF'\n                },\n                symbol: 'diamond',\n                symbolSize: [17, 8],\n                itemStyle: {\n                  color: '#ffd133',\n                  opacity: 1\n                },\n                silent: true,\n                data: scatterData()\n              },\n              {\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                geoIndex: 0,\n                zlevel: 4,\n                label: {\n                  formatter: '{b}',\n                  position: 'bottom',\n                  color: '#fff',\n                  fontSize: 12,\n                  distance: 10,\n                  show: true\n                },\n                symbol: 'diamond',\n                symbolSize: [17, 8],\n                itemStyle: {\n                  // color: '#F7AF21',\n                  color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 1,\n                    y2: 0,\n                    colorStops: [\n                      {\n                        offset: 0,\n                        color: 'rgb(199,145,41)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 0.5,\n                        color: 'rgb(199,145,41)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 0.5,\n                        color: 'rgb(223,176,32)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 1,\n                        color: 'rgb(223,176,32)' // 0% 处的颜色\n                      },\n                      {\n                        offset: 1,\n                        color: 'rgb(199,145,41)' // 100% 处的颜色\n                      }\n                    ],\n                    global: false // 缺省为 false\n                  },\n                  opacity: 1\n                  // shadowColor: '#fff',\n                  // shadowBlur: 5,\n                  // shadowOffsetY: 2\n                },\n                silent: true,\n                data: scatterData2()\n              }\n              // {\n              //   type: 'effectScatter',\n              //   coordinateSystem: 'geo',\n              //   geoIndex: 0,\n              //   symbol: 'circle',\n              //   symbolSize: 4,\n              //   showEffectOn: 'render',\n              //   rippleEffect: {\n              //     brushType: 'fill',\n              //     scale: 10\n              //   },\n              //   hoverAnimation: true,\n              //   label: {\n              //     // formatter: (p) => {\n              //     //   console.log(p, 99999)\n              //     //   return p.data[2]\n              //     // },\n              //     formatter: '{b}',\n              //     position: 'bottom',\n              //     color: '#fff',\n              //     fontSize: 14,\n              //     distance: 10,\n              //     show: true\n              //   },\n              //   itemStyle: {\n              //     color: '#bacac6'\n              //   },\n              //   zlevel: 5,\n              //   data: this.scatterData2\n              // }\n            ]\n          }\n       myChart.setOption(option);\n    })\n\n      \n    // 动态计算柱形图的高度（定一个max）\n    function lineMaxHeight () {\n        const maxValue = Math.max(...customerBatteryCityData.map(item => item.value))\n        return 0.9/maxValue\n    }\n        // 柱状体的主干\n    function lineData () {\n        return customerBatteryCityData.map((item) => {\n          return {\n            coords: [geoCoordMap[item.name], [geoCoordMap[item.name][0], geoCoordMap[item.name][1] + item.value * lineMaxHeight()]]\n          }\n        })\n    }\n    // 柱状体的顶部\n    function scatterData () {\n        return customerBatteryCityData.map((item) => {\n          return [geoCoordMap[item.name][0], geoCoordMap[item.name][1] + item.value * lineMaxHeight()]\n        })\n    }\n    // 柱状体的底部\n    function scatterData2 () {\n        return customerBatteryCityData.map((item) => {\n          return {\n            name: item.name,\n            value: geoCoordMap[item.name]\n          }\n        })\n    }\n","html":"","externalScripts":"","updaterUID":"obd-oCohVz9c-ablr4omDXf-IEt6MYpuc3n","theme":"","layout":"","viewCount":0,"userName":"150*****568","commentCount":1,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTrSENc63t.png?v=1622010520516","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-lines","series-map","series-scatter","tooltip"],"customTags":[],"updaterUserName":"150*****568"}}