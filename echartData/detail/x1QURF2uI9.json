{"status":0,"data":{"cid":"x1QURF2uI9","authorUid":"bd-2382594602","authorUserName":"g***q","title":"地图动态选中标记","description":"地图动态选中标记","latestVersion":2,"alwaysLatest":1,"createTime":"2019-03-05T11:52:12.000Z","lastUpdateTime":"2019-03-05T11:52:12.000Z","auth":2,"uid":"bd-2382594602","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-03T04:22:05.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1551408729759-EYay3THxl.json\";\n\nmyChart.showLoading();\n\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('huaibei', geoJson);\n    myChart.hideLoading();\n    var areaScatterData = function(name) {\n        var areaData = [{\n                name: \"杜集区\",\n                value: [116.881568, 34.051293]\n            },\n            {\n                name: \"相山区\",\n                value: [116.74977, 34.00924]\n            },\n            {\n                name: \"濉溪县\",\n                value: [116.674713, 33.752328]\n            },\n            {\n                name: \"烈山区\",\n                value: [116.878912, 33.891355]\n            }\n        ];\n        var res = [];\n        for (var i = 0; i < areaData.length; i++) {\n            if (areaData[i].name == name) {\n                res.push(areaData[i]);\n            }\n        }\n        return res;\n    };\n    var option = {\n        tooltip: {\n            trigger: 'item',\n            formatter: function(params) {\n                return params.name;\n            }\n        },\n        geo: {\n            show: true,\n            roam: 'scale',\n            map: 'huaibei',\n            nameMap: '淮北',\n            selectedMode: 'single',\n            label: {\n                distance: 10,\n                show: true,\n                normal: {\n                    show: true,\n                    color: '#fff',\n                },\n                emphasis: {\n                    color: '#fff',\n                    show: true\n                }\n\n            },\n            itemStyle: {\n\n                normal: {\n                    areaColor: '#01a6ef',\n                    borderColor: '#1e4583',\n                    borderWidth: 1\n                },\n                emphasis: {\n                    areaColor: new echarts.graphic.LinearGradient(\n                        0, 0, 0, 1,\n                        [{\n                                offset: 0,\n                                color: '#CCCC99'\n                            },\n                            {\n                                offset: 1,\n                                color: '#00ffff'\n                            }\n                        ]\n                    ),\n                    borderColor: '#f0f9fb',\n                    shadowColor: 'rgba(7, 89, 153, 0.78)',\n                    shadowBlur: 8\n                }\n            },\n            regions: [{\n                    name: '杜集区',\n                    itemStyle: {\n                        areaColor: '#0095df'\n                    }\n                },\n                {\n                    name: '相山区',\n                    itemStyle: {\n                        areaColor: '#0076d2'\n                    }\n                },\n                {\n                    name: '濉溪县',\n                    itemStyle: {\n                        areaColor: '#01a6ef'\n                    }\n                },\n                {\n                    name: '烈山区',\n                    itemStyle: {\n                        areaColor: '#099ee0'\n                    }\n                }\n            ],\n\n        },\n        series: [{\n            type: 'map',\n            map: 'huaibei',\n            geoIndex: 0,\n            roam: 'scale',\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            clickable: true,\n            hoverable: false,\n            markPoint: {\n                symbol: 'circle'\n            },\n            label: {\n                normal: {\n                    show: false,\n                    color: '#fff'\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            animation: false,\n        }]\n    };\n    myChart.setOption(option);\n    myChart.on('geoselectchanged', function(params) {\n        var _batch = params.batch[0];\n        var _arr = params.batch[0].selected;\n        // 选中区域\n        if (_arr[_batch.name]) {\n            console.log('选中' + _batch.name);\n            myChart.setOption({\n                series: [{\n                    name: 'areaScatter',\n                    type: 'scatter',\n                    coordinateSystem: 'geo',\n                    data: areaScatterData(_batch.name),\n                    symbol: 'circle',\n                    symbolSize: 19,\n                }]\n            })\n        }\n        // 取消选择\n        else {\n            console.log('取消选择')\n            myChart.setOption({\n                series: [{\n                    name: 'areaScatter',\n                    type: 'scatter',\n                    coordinateSystem: 'geo',\n                    data: [],\n                    symbol: 'circle',\n                    symbolSize: 23,\n                }]\n            })\n        }\n    });\n\n})","html":"","externalScripts":"","updaterUID":"bd-2382594602","theme":"dark","layout":"","viewCount":816,"userName":"g***q","commentCount":1,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1QURF2uI9.png?v=1562127725682","isCustomThumbnail":0,"builtinTags":["category-work","geo","markPoint","series-map","tooltip"],"customTags":[],"updaterUserName":"g***q"}}