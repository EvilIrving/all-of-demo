{"status":0,"data":{"cid":"xSu0gjkBTu","authorUid":"obd-ot3TRAYqjMeTWzW4ZlAjPj9Yi8UQr8g","authorUserName":"离***2","title":"横向柱状图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-06T07:17:46.000Z","lastUpdateTime":"2021-06-06T07:17:46.000Z","auth":2,"uid":"obd-ot3TRAYqjMeTWzW4ZlAjPj9Yi8UQr8g","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-06T07:17:46.000Z","code":"let tdata = [\n    { code: '公安机关', stock: '19785', fundPost: '19785' },\n    { code: '住房和城乡建筑部门', stock: '16064', fundPost: '16064' },\n    { code: '教育管理部门', stock: '14319', fundPost: '14319' },\n    { code: '交通部门', stock: '13100', fundPost: '13100' },\n    { code: '其他', stock: '12054', fundPost: '12054' },\n];\nfunction contains(arr, dst) {\n    var i = arr.length;\n    while ((i -= 1)) {\n        if (arr[i] == dst) {\n            return i;\n        }\n    }\n    return false;\n}\n\nvar attackSourcesColor = [\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#EB3B5A' },\n        { offset: 1, color: '#FE9C5A' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#FA8231' },\n        { offset: 1, color: '#FFD14C' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#F7B731' },\n        { offset: 1, color: '#FFEE96' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#395CFE' },\n        { offset: 1, color: '#2EC7CF' },\n    ]),\n];\nvar attackSourcesColor1 = [\n    '#EB3B5A',\n    '#FA8231',\n    '#F7B731',\n    '#3860FC',\n    '#1089E7',\n    '#F57474',\n    '#56D0E3',\n    '#1089E7',\n    '#F57474',\n    '#1089E7',\n    '#F57474',\n    '#F57474',\n];\nvar attaData = [];\nvar attaName = [];\nvar topName = [];\ntdata.forEach((it, index) => {\n    attaData[index] = parseFloat(it.fundPost).toFixed(2);\n    attaName[index] = it.stock;\n    topName[index] = `${it.code} ${it.stock}`;\n});\nvar salvProMax = []; //背景按最大值\nfor (let i = 0; i < attaData.length; i++) {\n    salvProMax.push(attaData[0]);\n}\nfunction attackSourcesDataFmt(sData) {\n    var sss = [];\n    sData.forEach(function (item, i) {\n        let itemStyle = {\n            color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i],\n        };\n        sss.push({\n            value: item,\n            itemStyle: itemStyle,\n        });\n    });\n    return sss;\n}\n\noption = {\n    backgroundColor: '#000',\n    tooltip: {\n        show: false,\n        backgroundColor: 'rgba(3,169,244, 0.5)', //背景颜色（此时为默认色）\n        textStyle: {\n            fontSize: 16,\n        },\n    },\n    color: ['#F7B731'],\n    legend: {\n        show: false,\n        pageIconSize: [12, 12],\n        itemWidth: 20,\n        itemHeight: 10,\n        textStyle: {\n            //图例文字的样式\n            fontSize: 10,\n            color: '#fff',\n        },\n        selectedMode: false,\n        // data: ['个人所得(亿元)'],\n    },\n    grid: {\n        left: '5%',\n        right: '2%',\n        width: '80%',\n        bottom: '2%',\n        top: '8%',\n        containLabel: true,\n    },\n    xAxis: {\n        type: 'value',\n\n        splitLine: {\n            show: false,\n        },\n        axisLabel: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false,\n        },\n    },\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisPointer: {\n                label: {\n                    show: true,\n                    //margin: 30\n                },\n            },\n            pdaaing: [5, 0, 0, 0],\n            postion: 'right',\n            data: attaName,\n            axisLabel: {\n                show: false,\n                margin: 30,\n                fontSize: 10,\n                align: 'left',\n                padding: [2, 0, 0, 0],\n                color: '#000',\n                rich: {\n                    nt1: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[0],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        lineHeight: '5',\n                        padding: [0, 1, 2, 1],\n                        // padding:[0,0,2,0],\n                    },\n                    nt2: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[1],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                    },\n                    nt3: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[2],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                    },\n                    nt: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[3],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        lineHeight: 3,\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                        lineHeight: 5,\n                    },\n                },\n                formatter: function (value, index) {\n                    index = contains(attaName, value) + 1;\n                    if (index - 1 < 3) {\n                        return ['{nt' + index + '|' + index + '}'].join('\\n');\n                    } else {\n                        return ['{nt|' + index + '}'].join('\\n');\n                    }\n                },\n            },\n        },\n        {\n            type: 'category',\n            inverse: true,\n            axisTick: 'none',\n            axisLine: 'none',\n            show: true,\n            axisLabel: {\n                textStyle: {\n                    color: '#fff',\n                    fontSize: '20',\n                },\n            },\n            data: attackSourcesDataFmt(attaName),\n        },\n        {\n            //名称\n            type: 'category',\n            offset: -10,\n            position: 'left',\n            axisLine: {\n                show: false,\n            },\n            inverse: false,\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n                interval: 0,\n                color: ['#fff'],\n                align: 'left',\n                verticalAlign: 'bottom',\n                lineHeight: 32,\n                fontSize: 10,\n            },\n            data: topName,\n        },\n    ],\n    series: [\n        {\n            zlevel: 1,\n            name: '',\n            type: 'bar',\n            barWidth: '26px',\n            animationDuration: 1500,\n            data: attackSourcesDataFmt(attaData),\n            align: 'center',\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 13,\n                },\n            },\n            label: {\n                show: false,\n                fontSize: 10,\n                color: '#fff',\n                textBorderWidth: 2,\n                padding: [2, 0, 0, 0],\n            },\n        },\n        {\n            name: '',\n            type: 'bar',\n            barWidth: 26,\n            barGap: '-100%',\n            margin: '20',\n            data: salvProMax,\n            textStyle: {\n                //图例文字的样式\n                fontSize: 10,\n                color: '#fff',\n            },\n            itemStyle: {\n                normal: {\n                    color: '#142831',\n                    //width:\"100%\",\n                    fontSize: 10,\n                    //barBorderRadius: 30,\n                },\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-ot3TRAYqjMeTWzW4ZlAjPj9Yi8UQr8g","theme":"","layout":"","viewCount":0,"userName":"离***2","commentCount":1,"starCount":58,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSu0gjkBTu.png?v=1622963867009","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"离***2"}}