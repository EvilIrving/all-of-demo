{"status":0,"data":{"cid":"xUkntDaTWU","authorUid":"obd-o2HgkLuqycYWva2zUwRH05Gg8sUI1Bv","authorUserName":"s***5","title":"动态旋转","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-14T03:03:19.000Z","lastUpdateTime":"2020-12-14T03:03:19.000Z","auth":2,"uid":"obd-o2HgkLuqycYWva2zUwRH05Gg8sUI1Bv","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-14T03:03:19.000Z","code":" let angle = 0; //角度，用来做简单的动画效果的\r\n let value = 80;\r\n option = {\r\n     backgroundColor: '#000E1A',\r\n     title: [{\r\n         text: '75%',\r\n         x: '50%',\r\n         y: '40%',\r\n         textAlign: 'center',\r\n         textStyle: {\r\n             fontSize: '70',\r\n             fontWeight: '100',\r\n             color: '#79ffff',\r\n             textAlign: 'center',\r\n         },\r\n     }, ],\r\n     polar: {\r\n         radius: ['85%', '81%'],\r\n         center: ['50%', '50%'],\r\n     },\r\n     angleAxis: {\r\n         max: 100,\r\n         show: false,\r\n         startAngle: 0,\r\n     },\r\n     radiusAxis: {\r\n         type: 'category',\r\n         show: true,\r\n         axisLabel: {\r\n             show: false,\r\n         },\r\n         axisLine: {\r\n             show: false,\r\n\r\n         },\r\n         axisTick: {\r\n             show: false\r\n         },\r\n     },\r\n\r\n     series: [\r\n         // 紫色\r\n         {\r\n             name: \"ring5\",\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 return {\r\n                     type: 'arc',\r\n                     shape: {\r\n                         cx: api.getWidth() / 2,\r\n                         cy: api.getHeight() / 2,\r\n                         r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.9,\r\n                         startAngle: (0 + angle) * Math.PI / 180,\r\n                         endAngle: (90 + angle) * Math.PI / 180\r\n                     },\r\n                     style: {\r\n                         stroke: \"#8383FA\",\r\n                         fill: \"transparent\",\r\n                         lineWidth: 1.5\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         }, \r\n         {\r\n             name: \"ring5\", //紫点\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 let x0 = api.getWidth() / 2;\r\n                 let y0 = api.getHeight() / 2;\r\n                 let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.9;\r\n                 let point = getCirlPoint(x0, y0, r, (90 + angle))\r\n                 return {\r\n                     type: 'circle',\r\n                     shape: {\r\n                         cx: point.x,\r\n                         cy: point.y,\r\n                         r: 4\r\n                     },\r\n                     style: {\r\n                         stroke: \"#8450F9\", //绿\r\n                         fill: \"#8450F9\"\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         },\r\n         // 蓝色\r\n\r\n         {\r\n             name: \"ring5\",\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 return {\r\n                     type: 'arc',\r\n                     shape: {\r\n                         cx: api.getWidth() / 2,\r\n                         cy: api.getHeight() / 2,\r\n                         r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.9,\r\n                         startAngle: (180 + angle) * Math.PI / 180,\r\n                         endAngle: (270 + angle) * Math.PI / 180\r\n                     },\r\n                     style: {\r\n                         stroke: \"#4386FA\",\r\n                         fill: \"transparent\",\r\n                         lineWidth: 1.5\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         },\r\n         {\r\n             name: \"ring5\", // 蓝色\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 let x0 = api.getWidth() / 2;\r\n                 let y0 = api.getHeight() / 2;\r\n                 let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.9;\r\n                 let point = getCirlPoint(x0, y0, r, (180 + angle))\r\n                 return {\r\n                     type: 'circle',\r\n                     shape: {\r\n                         cx: point.x,\r\n                         cy: point.y,\r\n                         r: 4\r\n                     },\r\n                     style: {\r\n                         stroke: \"#4386FA\", //绿\r\n                         fill: \"#4386FA\"\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         },\r\n\r\n         {\r\n             name: \"ring5\",\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 return {\r\n                     type: 'arc',\r\n                     shape: {\r\n                         cx: api.getWidth() / 2,\r\n                         cy: api.getHeight() / 2,\r\n                         r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.95,\r\n                         startAngle: (270 + -angle) * Math.PI / 180,\r\n                         endAngle: (40 + -angle) * Math.PI / 180\r\n                     },\r\n                     style: {\r\n                         stroke: \"#0CD3DB\",\r\n                         fill: \"transparent\",\r\n                         lineWidth: 1.5\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         },\r\n         // 橘色\r\n\r\n         {\r\n             name: \"ring5\",\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 return {\r\n                     type: 'arc',\r\n                     shape: {\r\n                         cx: api.getWidth() / 2,\r\n                         cy: api.getHeight() / 2,\r\n                         r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.95,\r\n                         startAngle: (90 + -angle) * Math.PI / 180,\r\n                         endAngle: (220 + -angle) * Math.PI / 180\r\n                     },\r\n                     style: {\r\n                         stroke: \"#FF8E89\",\r\n                         fill: \"transparent\",\r\n                         lineWidth: 1.5\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         }, {\r\n             name: \"ring5\",\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 let x0 = api.getWidth() / 2;\r\n                 let y0 = api.getHeight() / 2;\r\n                 let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.95;\r\n                 let point = getCirlPoint(x0, y0, r, (90 + -angle))\r\n                 return {\r\n                     type: 'circle',\r\n                     shape: {\r\n                         cx: point.x,\r\n                         cy: point.y,\r\n                         r: 4\r\n                     },\r\n                     style: {\r\n                         stroke: \"#FF8E89\", //粉\r\n                         fill: \"#FF8E89\"\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         }, {\r\n             name: \"ring5\", //绿点\r\n             type: 'custom',\r\n             coordinateSystem: \"none\",\r\n             renderItem: function(params, api) {\r\n                 let x0 = api.getWidth() / 2;\r\n                 let y0 = api.getHeight() / 2;\r\n                 let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.95;\r\n                 let point = getCirlPoint(x0, y0, r, (270 + -angle))\r\n                 return {\r\n                     type: 'circle',\r\n                     shape: {\r\n                         cx: point.x,\r\n                         cy: point.y,\r\n                         r: 4\r\n                     },\r\n                     style: {\r\n                         stroke: \"#0CD3DB\", //绿\r\n                         fill: \"#0CD3DB\"\r\n                     },\r\n                     silent: true\r\n                 };\r\n             },\r\n             data: [0]\r\n         }, {\r\n             name: '',\r\n             type: 'bar',\r\n             roundCap: true,\r\n             barWidth: 60,\r\n             showBackground: true,\r\n             backgroundStyle: {\r\n                 color: '#464451',\r\n             },\r\n             data: [75],\r\n             coordinateSystem: 'polar',\r\n             itemStyle: {\r\n                 normal: {\r\n                     color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\r\n                         offset: 0,\r\n                         color: '#0ff'\r\n                     }, {\r\n                         offset: 1,\r\n                         color: '#02aeff'\r\n                     }]),\r\n                 }\r\n             }\r\n         },\r\n         {\r\n             type: 'pie',\r\n             radius: ['75%', '76%'],\r\n             center: ['50%', '50%'],\r\n             data: [{\r\n                     hoverOffset: 1,\r\n                     value: 100,\r\n                     name: '',\r\n                     itemStyle: {\r\n                         color: '#ff6189',\r\n                     },\r\n                     label: {\r\n                         show: false\r\n                     },\r\n                     labelLine: {\r\n                         normal: {\r\n                             smooth: true,\r\n                             lineStyle: {\r\n                                 width: 0\r\n                             }\r\n                         }\r\n                     },\r\n                     hoverAnimation: false,\r\n                 },\r\n                 {\r\n                     label: {\r\n                         show: false\r\n                     },\r\n                     labelLine: {\r\n                         normal: {\r\n                             smooth: true,\r\n                             lineStyle: {\r\n                                 width: 0\r\n                             }\r\n                         }\r\n                     },\r\n                     value: 100 - 75,\r\n                     hoverAnimation: false,\r\n                     itemStyle: {\r\n                         color: '#3c3a48',\r\n                     },\r\n                 }\r\n             ]\r\n         },\r\n     ]\r\n };\r\n\r\n //获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\n function getCirlPoint(x0, y0, r, angle) {\r\n     let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n     let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n     return {\r\n         x: x1,\r\n         y: y1\r\n     }\r\n }\r\n\r\n function draw() {\r\n     angle = angle + 3\r\n     myChart.setOption(option, true)\r\n     //window.requestAnimationFrame(draw);\r\n }\r\n\r\n setInterval(function() {\r\n     //用setInterval做动画感觉有问题\r\n     draw()\r\n }, 100);","html":"","externalScripts":"","updaterUID":"obd-o2HgkLuqycYWva2zUwRH05Gg8sUI1Bv","theme":"","layout":"","viewCount":466,"userName":"s***5","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUkntDaTWU.png?v=1607914999571","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"s***5"}}