{"status":0,"data":{"cid":"xG6smc8zFG","authorUid":"bd-3476712581","authorUserName":"温***孔","title":"当月个人支出详情","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-11-09T08:05:27.000Z","lastUpdateTime":"2018-11-09T08:05:27.000Z","auth":2,"uid":"bd-3476712581","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-11-09T08:05:27.000Z","code":"\ndemo = [\n  {\n    \"x\": \"支付宝支出\",\n    \"y\": 90000,\n    \"s\":\"个人爱好支出金额总数\"\n  },\n  {\n    \"x\": \"支付宝支出\",\n    \"y\": 26000.00,\n    \"s\":\"日常用品支出金额总数\"\n  },\n  {\n    \"x\": \"微信支出\",\n    \"y\":  50000.12,\n    \"s\":\"个人爱好支出金额总数\"\n  },\n  {\n    \"x\": \"微信支出\",\n    \"y\":  18000,\n    \"s\":\"日常用品支出金额总数\"\n  },\n  {\n    \"x\": \"现金支出\",\n    \"y\":  41000.00,\n    \"s\":\"个人爱好支出金额总数\"\n  },\n  {\n    \"x\": \"现金支出\",\n    \"y\":  13000.00,\n    \"s\":\"日常用品支出金额总数\"\n  }\n]\n\nlet data = _yAxisData();\noption = {\n    backgroundColor:\"#001121\",\n    title: {\n\t\t\ttext:'当月个人支出详情',\n\t\t\ttextStyle: {\n\t\t\t\tcolor: '#fff'\n\t\t\t},\n\t\t\n\t},\n\tcolor:colors(),\n\ttooltip:{\n        show: true,\n        trigger: 'item'\n\t},\n\tgrid:{\n\t    left:\"10%\",\n\t    top:\"10%\",\n\t},\n\tlegend:{\n\t\tshow:true,\n \t\ttype: 'scroll',\n\t\ticon: 'rect',\n\t\tleft:'70%',\n\t\ttop:\"4%\",\n\t\twidth:'50%',\n\t\titemWidth:20,\n\t\titemHeight:20,\n// \t\tdata: getVal(),\n\t\tformatter: function(val){\n\t\t\tlet str1 = val.substring(0,6);\n\t\t\tlet str2 = val.substring(6,val.length);\t\t\t\t\t\n\t\t\treturn str1+'\\n'+str2;\n\t\t},\n\t\titemGap: 10,\n\t\ttextStyle:{\n\t\t\tcolor:\"rgba(255,255,255,0.8)\",\n\t\t\tfontSize:14,\n\t\t}\n\t},\n   xAxis: [{\n\t\ttype: 'category',\n\t\tdata: _xAxisData(),\n\t\taxisTick: {\n\t\t\tshow:false,\n\t\t},\n\t\taxisLabel: {\n\t\t\tinterval:0,\n\t\t\trotate:0,\n\t\t\tfontSize: 12,\n\t\t\tformatter:function(prarms){\n\t\t\t     let str1 = prarms.split('\\n')[0];\n\t\t\t     let str2 = prarms.split('\\n')[1];\n\t\t\t     console.log(str1,str2);\n\t\t\t     return [`{a|${str1}}\\n`,`{b|${str2}}`]\n\t\t\t},\n\t\t\trich:{\n\t\t\t\ta:{\n\t\t\t\t\tcolor:'rgba(255,255,255,0.8)'\n\t\t\t\t},\n\t\t\t\tb:{\n\t\t\t\t\tcolor:'#f4b741'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false\n\t\t},\n\t\t\n\t}],\n    yAxis: [{\n\t\tname: '（万元）',\n\t\tnameTextStyle:{\n\t\t\tcolor: \"rgba(255,255,255,0.8)\",\n\t\t\tfontSize: 12\n\t\t},\n\t\ttype: 'value',\n\t\taxisLabel: {\n\t\t\tcolor: \"rgba(255,255,255,0.8)\",\n\t\t\tfontSize: 12\n\t\t},\n\t\tsplitLine: {\n\t\t\tlineStyle: {\n\t\t\t\t// 使用深浅的间隔色\n\t\t\t\tcolor: ['#82909b', '#8b949d']\n\t\t\t}\n\t\t},\n\t\taxisLine: {\n\t\t\tshow: false\n\t\t}\n\t}],\n   series: [{\n\t\t\tname: '个人爱好支出金额总数',\n\t\t\ttype: 'bar',\n\t\t\tbarWidth: '30%',\n\t\t\titemStyle: {\n\t            normal: {\n\t            \tlabel: {\n\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\tcolor:'#fff',\n\t\t\t\t\t\tfontSize:12,\n\t\t\t\t\t\tformatter: function (params) {\t\t\t\t\t\t\n\t\t\t\t\t\t\tlet str = params.value +'';\n\t\t\t\t\t\t\tlet val = _formatNum(str);\n\t\t\t\t\t\t\treturn val\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t\t},\n\t            }\n\t        },\n\t\t\t\n\t\t\tdata: data[0]\n\t\t},\n\t\t{\n\t\t\tname: '日常用品支出金额总数',\n\t\t\ttype: 'bar',\n\t\t\tbarWidth: '30%',\n\t\t\titemStyle: {\n\t            normal: {\n\t            \tlabel: {\n\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\tcolor:'#fff',\n\t\t\t\t\t\tfontSize:12,\n\t\t\t\t\t\tformatter: function (params) {\n\t\t\t\t\t\t\tlet str = params.value +'';\n\t\t\t\t\t\t\tlet val = _formatNum(str);\n\t\t\t\t\t\t\treturn val\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t            }\n\t        },\n\t\t\t\n\t\t\tdata:data[1]\n\t\t}\n\t]\n};\n// function getVal(){\n// \tlet xData = new Set(demo.map(item => item.s));\n// \tlet _data = [];\n// \tif (this.dataset) {\n// \t\tfor (let x of xData) { // 遍历Set\n// \t\t\t_data.push(x)\n// \t\t}\n// \t}\n// \treturn _data;\n// }\nfunction colors() {\n\t\treturn [\n\t\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\tcolor: '#91b9d7'\n\t\t\t\t\t}, // 0% 处的颜色 \n\t\t\t\t\t{\n\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\tcolor: '#5b90c6'\n\t\t\t\t\t} // 100% 处的颜色\n\t\t\t\t],\n\t\t\t\tfalse),\n\t\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\tcolor: '#ddc094'\n\t\t\t\t\t}, // 0% 处的颜色\n\t\t\t\t\t{\n\t\t\t\t\t\toffset: 1,\n\t\t\t\t\t\tcolor: '#d5a770'\n\t\t\t\t\t} // 100% 处的颜色\n\t\t\t\t],\n\t\t\t\tfalse),\n\t\t];\n}\n\nfunction _xAxisData() {\n\tlet xData = new Set(demo.map(item => item.x));\n\tlet _data = [];\n\tlet datay1=0,datay2=0,datay3=0;\n\t\n\tif (demo) {\n\t\tfor (let x of xData) { // 遍历Set\n\t\t\t_data.push(x)\n\t\t}\n\t\t\n\t\tdemo.map((item,i)=>{\n\t\t\t//console.log(\"case\",_data)\n\t\t\tswitch(item.x){\n\t\t\t\tcase _data[0]:\n\t\t\t\t\t datay1 += Number(item.y);\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\tcase _data[1]:\n\t\t\t\t\t datay2 += Number(item.y);\t\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\tcase _data[2]:\n\t\t\t\t\t datay3 += Number(item.y);\t\t\t\t\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t})\t\t\t\t\t\n\t\t\n\t}\n\t//console.log(\"ydata\",datay1,datay2,datay3);\n\tlet datay = [datay1,datay2,datay3];\n\tlet dataAll = [];\n\tfor(var i=0;i<_data.length;i++){\n\t\tvar str = _data[i]+\"\\n（共\"+_formatNum(datay[i]+'')+\"万元）\";\n\t\tdataAll.push(str);\n\t}\n\t//console.log(\"str\",str)\n\treturn dataAll\n\t\n}\n\nfunction _yAxisData() {\n\tvar data1 = [],\n\t\tdata2 = [];\n\tdemo && demo.map(item => {\n\t\tif (item.s == '个人爱好支出金额总数') {\n\t\t\tdata1.push(item.y)\n\n\t\t} else if (item.s == '日常用品支出金额总数') {\n\t\t\tdata2.push(item.y)\n\t\t}\n\t})\n\tlet _data=[];\n\t_data=[data1,data2]\n\treturn _data\n}\n\t\nfunction  _formatNum(str){\n\tvar newStr = \"\";\n\tvar count = 0;\n\t \n\tif(str.indexOf(\".\")==-1){\n\t    for(var i=str.length-1;i>=0;i--){\n\t\t\tif(count % 3 === 0 && count !== 0){\n\t\t\t   newStr = str.charAt(i) + \",\" + newStr;\n\t\t\t}else{\n\t\t\t   newStr = str.charAt(i) + newStr;\n\t\t\t}\n\t\t\tcount++;\n\t    }\n\t   str = newStr+'.00'; //自动补小数点后两位\n\t   //str = newStr;\n\t   return str;\n\t}else{\n\t   for(var k = str.indexOf(\".\")-1;k>=0;k--){\n\t\t\tif(count % 3 === 0 && count !== 0){\n\t\t\t   newStr = str.charAt(k) + \",\" + newStr;\n\t\t\t}else{\n\t\t\t   newStr = str.charAt(k) + newStr; //逐个字符相接起来\n\t\t\t}\n\t\t\tcount++;\n\t   }\n\t   str = newStr + (str + \"00\").substr((str + \"00\").indexOf(\".\"),3);\n\t   return str\n\t}\n}\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t","html":"","externalScripts":"","updaterUID":"bd-3476712581","theme":"","layout":"","viewCount":130,"userName":"温***孔","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xG6smc8zFG.png?v=1541750727631","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"温***孔"}}