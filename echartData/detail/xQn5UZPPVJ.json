{"status":0,"data":{"cid":"xQn5UZPPVJ","authorUid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","authorUserName":"叫***e","title":"带背景的柱形图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-12-01T09:20:06.000Z","lastUpdateTime":"2022-01-05T02:12:07.000Z","auth":2,"uid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-05T02:12:07.000Z","code":"datas = {\r\n    countArr: [10, 21, 30, 37],\r\n    nameArr: [\"测试1\", \"测试2\", \"测试3\", \"测试4\"]\r\n}\r\nlet maxNum = 50;\r\nlet bgData = [];let seriesArr = [];\r\nlet countArr2 = [];\r\n\tvar lineColor = 'rgba(51, 64, 158, 0.6)';\r\n\t\r\n\tdatas.nameArr.forEach( function(item,index){\r\n\t\tbgData.push(maxNum);\r\n\t\tcountArr2.push(maxNum * 0.8)\r\n\t})\r\n\r\n\t\tseriesArr.push({\r\n\t\t\t         name: \"人口类型统计\",\r\n\t            type: 'bar',\r\n\t            barWidth: '15',\r\n\t           \r\n\t            itemStyle: {\r\n\t                normal: {\r\n\t                    barBorderRadius: 50,\r\n\t                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#574EFF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#000219' // 100% 处的颜色\r\n                }], false),\r\n\t                }\r\n\t            },\r\n\t            data: datas.countArr,\r\n\t            zlevel: 11\r\n\t\t})\r\n   \r\n\t\tseriesArr.push({\r\n\t\t\t         name: \"\",\r\n\t            type: 'bar',\r\n\t            barWidth: '15',\r\n\t           barGap: '-100%',\r\n\t            itemStyle: {\r\n\t                normal: {\r\n\t                    barBorderRadius: 50,\r\n\t                    color: '#000',\r\n\t                }\r\n\t            },\r\n\t            data: countArr2,\r\n\t            zlevel: 11\r\n\t\t})\r\n   \r\n    seriesArr.push({\r\n        name: '',\r\n        type: 'bar',\r\n        barWidth:100,\r\n        barGap: '-60%',\r\n        data: bgData,\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(4, 4, 30, 0.43)',\r\n                \r\n               borderColor:\"#33409E\"\r\n            }\r\n        },\r\n        zlevel: 9,\r\n        xAxisIndex: 1,\r\n})\r\nseriesArr = seriesArr.reverse();\r\n option = {\r\n     backgroundColor:'rgba(0,0,0,0.8)',\r\n\t    tooltip: {\r\n\t        trigger: 'axis',\r\n\t        axisPointer: {\r\n\t            type: 'line',\r\n\t            lineStyle: {\r\n\t                opacity: 0\r\n\t            }\r\n\t        },\r\n\t         formatter:  function (params) {\r\n\t            var res='<div\"><p>'+params[0].name+'</p></div>' \r\n\t            for(var i=0;i<params.length;i++){\r\n\t                if(params[i].seriesName!=\"\"){\r\n\t                     res+='<p>'+params[i].seriesName+':'+params[i].data+'</p>'\r\n\t                }\r\n\t            }\r\n\t            return res;\r\n\t            },\r\n\t    },\r\n\t  \r\n\t    grid: {\r\n\t    \tcontainLabel: true,\r\n \t        left: 30,\r\n \t        top: 80,\r\n \t        right: 30,\r\n \t        bottom: 50\r\n\t    },\r\n\t    xAxis: [{\r\n\t        type: 'category',\r\n\t        data: datas.nameArr,\r\n\t        axisLine: {\r\n\t             show: false\r\n\t        },\r\n\t        axisLabel: {\r\n\t            show: true,\r\n\t            margin:10,\r\n\t             color: '#AAB8FF',\r\n\t             fontSize:13,\r\n\t             interval:0,\r\n             fontFamily:'FZLanTingHei-L-GBK',\r\n              formatter: function (params) {\r\n\t\t                var newParamsName = \"\"; // 最终拼接成的字符串\r\n\t\t                var paramsNameNumber = params.length; // 实际标签的个数\r\n\t\t                var provideNumber = 2; // 每行能显示的字的个数\r\n\t\t                var rowNumber = Math.ceil(paramsNameNumber / provideNumber); // 换行的话，需要显示几行，向上取整\r\n\t\t                /**\r\n\t\t                 * 判断标签的个数是否大于规定的个数， 如果大于，则进行换行处理 如果不大于，即等于或小于，就返回原标签\r\n\t\t                 */\r\n\t\t                // 条件等同于rowNumber>1\r\n\t\t                if (paramsNameNumber > provideNumber) {\r\n\t\t                  /** 循环每一行,p表示行 */\r\n\t\t                  for (var p = 0; p < rowNumber; p++) {\r\n\t\t                    var tempStr = \"\"; // 表示每一次截取的字符串\r\n\t\t                    var start = p * provideNumber; // 开始截取的位置\r\n\t\t                    var end = start + provideNumber; // 结束截取的位置\r\n\t\t                    // 此处特殊处理最后一行的索引值\r\n\t\t                    if (p == rowNumber - 1) {\r\n\t\t                      // 最后一次不换行\r\n\t\t                      tempStr = params.substring(start, paramsNameNumber);\r\n\t\t                    } else {\r\n\t\t                      // 每一次拼接字符串并换行\r\n\t\t                      tempStr = params.substring(start, end) + \"\\n\";\r\n\t\t                    }\r\n\t\t                    newParamsName += tempStr; // 最终拼成的字符串\r\n\t\t                  }\r\n\t\t                } else {\r\n\t\t                  // 将旧标签的值赋给新标签\r\n\t\t                  newParamsName = params;\r\n\t\t                }\r\n\t\t                //将最终的字符串返回\r\n\t\t                return newParamsName;\r\n\t\t              },\r\n            \r\n\t        },\r\n\t        boundaryGap:true,\r\n\t          axisTick: {\r\n\t                show: false\r\n\t            },\r\n\t           \r\n\t    },{\r\n\t        type: 'category',\r\n\t        data: datas.nameArr,\r\n\t        axisLine: {show:false},\r\n\t        axisLabel: {\r\n\t            show: false,\r\n\t        },\r\n\t        boundaryGap:true,\r\n\t        \r\n\t    }],\r\n\t    yAxis: [{\r\n\t            type: 'value',\r\n\t            splitLine: {\r\n\t                show: false\r\n\t            },\r\n\t            axisTick: {\r\n\t                show: false\r\n\t            },\r\n\t           \r\n\t            axisLine: {\r\n\t                 show: false\r\n\t            },\r\n\t            axisLabel: {\r\n\t                 show: false\r\n\t                \r\n\t            },\r\n\t        },\r\n\t       \r\n\t    ],\r\n\t    series:seriesArr\r\n\t};","html":"","externalScripts":"","updaterUID":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","theme":"","layout":"","viewCount":0,"userName":"叫***e","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xQn5UZPPVJ.png?v=1641348727244","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"叫***e"}}