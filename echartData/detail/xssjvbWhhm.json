{"status":0,"data":{"cid":"xssjvbWhhm","authorUid":"bd-2970746820","authorUserName":"幻***使","title":"","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-06-13T09:44:59.000Z","lastUpdateTime":"2019-06-13T09:44:59.000Z","auth":2,"uid":"bd-2970746820","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-04T09:01:51.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1560415363200-w_pbTfCs_.json\";\r\n\r\n//绘制全国地图\r\nmyChart.showLoading();\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('南充市', geoJson);\r\n    myChart.hideLoading();\r\n\r\n    var geoCoordMap = {\r\n        '顺庆区':[106.096345,30.95384],\r\n        '高坪区': [106.25734, 30.803843],\r\n        '嘉陵区':[105.93326052,30.70975852],\r\n        '营山县':[106.6835315,31.15002952],\r\n        '西充县':[105.847345,31.053843],\r\n        '南部县':[105.907345,31.293843],\r\n        '蓬安县':[106.407345,30.963843],\r\n        '仪陇县':[106.507345,31.453843],\r\n        '阆中市':[106.057345,31.553843],\r\n    };\r\n\r\n\r\n    var data = [{\r\n            name: '顺庆区',\r\n            value: 199\r\n        },\r\n        {\r\n            name: '高坪区',\r\n            value: 320\r\n        },\r\n        {\r\n            name: '嘉陵区',\r\n            value: 252\r\n        },\r\n        {\r\n            name: '营山县',\r\n            value: 152\r\n        },\r\n        {\r\n            name: '西充县',\r\n            value: 300\r\n        },\r\n        {\r\n            name: '南部县',\r\n            value: 200\r\n        },\r\n        {\r\n            name: '蓬安县',\r\n            value: 352\r\n        },\r\n        {\r\n            name: '仪陇县',\r\n            value: 152\r\n        },\r\n        {\r\n            name: '阆中市',\r\n            value: 189\r\n        }\r\n    ];\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n\r\n    //初始化绘制全国地图配置\r\n    option = {\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function(params) {\r\n                if (typeof(params.value)[2] == \"undefined\") {\r\n                    return params.name + ' : ' + params.value;\r\n                } else {\r\n                    return params.name + ' : ' + params.value[2];\r\n                }\r\n            }\r\n        },\r\n        geo: {\r\n            show: false,\r\n            map: '南充市',\r\n            layoutCenter: ['50%', '50%'],\r\n            layoutSize: \"100%\",\r\n        },\r\n        series: [\r\n            {\r\n               type: 'map',\r\n               map: '南充市',\r\n               geoIndex: 1,\r\n               zoom:1.2,\r\n               label: {\r\n                   emphasis: {\r\n                       show: false\r\n                   }\r\n               },\r\n               itemStyle: {\r\n                   normal: {\r\n                       areaColor: 'transparent',\r\n                       borderColor: '#3fdaff',\r\n                       borderWidth: 2\r\n                   },\r\n                   emphasis: {\r\n                       areaColor: '#C9E6FF',\r\n                       shadowColor: '#5AB2FE',\r\n                       shadowBlur: 20\r\n                   }\r\n               },\r\n               data: data,\r\n           },\r\n            {\r\n                name: 'light',\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                data: convertData(data),\r\n                symbolSize: function(val) {\r\n                    return val[2] / 10;\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        formatter: '{b}',\r\n                        position: 'right',\r\n                        show: true\r\n                    },\r\n                    emphasis: {\r\n                        show: true\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#25f4a6'\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                data: convertData(data.sort(function(a, b) {\r\n                    return b.value - a.value;\r\n                }).slice(0, 5)),\r\n                symbolSize: function(val) {\r\n                    return val[2] / 10;\r\n                },\r\n                showEffectOn: 'render',\r\n                rippleEffect: {\r\n                    brushType: 'stroke'\r\n                },\r\n                hoverAnimation: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#25f4a6',\r\n                        shadowBlur: 10,\r\n                        shadowColor: '#05C3F9'\r\n                    }\r\n                },\r\n                zlevel: 1\r\n            }\r\n        ],\r\n        animationDuration: 1000,\r\n        animationEasing: 'cubicOut',\r\n        animationDurationUpdate: 1000\r\n\r\n    };\r\n\r\n\r\n    myChart.setOption(option);\r\n});","html":"","externalScripts":"","updaterUID":"bd-2970746820","theme":"","layout":"","viewCount":195,"userName":"幻***使","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xssjvbWhhm.png?v=1562230911259","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","tooltip"],"customTags":[],"updaterUserName":"幻***使"}}