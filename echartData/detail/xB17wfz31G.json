{"status":0,"data":{"cid":"xB17wfz31G","authorUid":"bd-420765316","authorUserName":"十号a","title":"数据汇集","description":"数据汇集","latestVersion":3,"alwaysLatest":1,"createTime":"2017-11-17T07:40:10.000Z","lastUpdateTime":"2017-11-17T07:40:10.000Z","auth":2,"uid":"bd-420765316","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"3.8.0","versionCreateTime":"2017-11-22T09:22:20.000Z","code":"var startPoint = {\r\n    x: 123.904129,\r\n    y: 29.080339\r\n};\r\n// 地图自定义样式\r\nvar bmap = {\r\n    center: [startPoint.x, startPoint.y],\r\n    zoom: 8,\r\n    roam: true,\r\n    mapStyle: {\r\n        styleJson: [{\r\n            \"featureType\": \"water\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"color\": \"#044161\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"land\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"color\": \"#004981\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"boundary\",\r\n            \"elementType\": \"geometry\",\r\n            \"stylers\": {\r\n                \"color\": \"#064f85\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"railway\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"highway\",\r\n            \"elementType\": \"geometry\",\r\n            \"stylers\": {\r\n                \"color\": \"#004981\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"highway\",\r\n            \"elementType\": \"geometry.fill\",\r\n            \"stylers\": {\r\n                \"color\": \"#005b96\",\r\n                \"lightness\": 1\r\n            }\r\n        }, {\r\n            \"featureType\": \"highway\",\r\n            \"elementType\": \"labels\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"arterial\",\r\n            \"elementType\": \"geometry\",\r\n            \"stylers\": {\r\n                \"color\": \"#004981\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"arterial\",\r\n            \"elementType\": \"geometry.fill\",\r\n            \"stylers\": {\r\n                \"color\": \"#00508b\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"poi\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"green\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"color\": \"#056197\",\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"subway\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"manmade\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"local\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"arterial\",\r\n            \"elementType\": \"labels\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"boundary\",\r\n            \"elementType\": \"geometry.fill\",\r\n            \"stylers\": {\r\n                \"color\": \"#029fd4\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"building\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"color\": \"#1a5787\"\r\n            }\r\n        }, {\r\n            \"featureType\": \"label\",\r\n            \"elementType\": \"all\",\r\n            \"stylers\": {\r\n                \"visibility\": \"off\"\r\n            }\r\n        }]\r\n    }\r\n}\r\n\r\nvar geoCoordMap = {\r\n    '中心站': [120.704129, 27.980339],\r\n    '舟山雷达': [122.35847, 30.44269],\r\n    '松兰山雷达': [121.96653, 29.43498],\r\n    '临海古野雷达': [121.78729, 28.68618],\r\n    '路桥潮位站': [121.61698, 28.54435],\r\n    '大陈岛古野雷达': [121.90639, 28.45159],\r\n    '东瓯海上平台雷达站': [121.15741, 27.83642],\r\n    '石砰雷达':[120.6374, 27.40102],\r\n    '温州渔寮雷达站':[120.5373, 27.24161]\r\n};\r\n\r\nvar BJData = [\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '舟山雷达',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '松兰山雷达',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '临海古野雷达',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '路桥潮位站',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '大陈岛古野雷达',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '东瓯海上平台雷达站',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '石砰雷达',\r\n        value: 20\r\n    }],\r\n    [{\r\n        name: '中心站'\r\n    }, {\r\n        name: '温州渔寮雷达站',\r\n        value: 20\r\n    }]\r\n];\r\n\r\n\r\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = geoCoordMap[dataItem[1].name];\r\n        var toCoord = geoCoordMap[dataItem[0].name];\r\n        if (fromCoord && toCoord) {\r\n            res.push({\r\n                fromName: dataItem[1].name,\r\n                toName: dataItem[0].name,\r\n                coords: [fromCoord, toCoord]\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar color = ['#97FBFE'];\r\nvar series = [];\r\n[\r\n    ['中心站', BJData]\r\n].forEach(function(item, i) {\r\n        series.push({\r\n            //中心站\r\n            name: item[0],\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'bmap',\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    formatter: '{b}'\r\n                }\r\n            },\r\n            symbolSize: function(val) {\r\n                return val[2] / 2;\r\n            },\r\n            showEffectOn: 'render',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[i]\r\n                }\r\n            },\r\n            data: [{\r\n                name: item[0],\r\n                value: geoCoordMap[item[0]].concat([\"50\"])\r\n            }]\r\n        }, {\r\n            name: item[0],\r\n            type: 'lines',\r\n            coordinateSystem: 'bmap',\r\n            zlevel: 1,\r\n            tooltip:{\r\n                show:false\r\n            },\r\n            effect: {\r\n                show: true,\r\n                period: 4,\r\n                trailLength: 0.9,\r\n                color: '#ccc',\r\n                symbolSize: 3\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: color[i],\r\n                    width: 0,\r\n                    curveness: 0.2\r\n                }\r\n            },\r\n            data: convertData(item[1])\r\n        }, {\r\n            name: item[0],\r\n            type: 'lines',\r\n            coordinateSystem: 'bmap',\r\n            zlevel: 2,\r\n            tooltip:{\r\n                show:false\r\n            },\r\n            effect: {\r\n                show: true,\r\n                period: 6,\r\n                trailLength: 0,\r\n                //symbol: planePath,\r\n                symbolSize: 2\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: color[i],\r\n                    width: 1,\r\n                    opacity: 0.1,\r\n                    curveness: 0.2\r\n                }\r\n            },\r\n            data: convertData(item[1])\r\n        }, {\r\n            name: item[0],\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'bmap',\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    formatter: '{b}'\r\n                }\r\n            },\r\n            symbolSize: function(val) {\r\n                return val[2] / 3;\r\n            },\r\n            showEffectOn: 'render',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[i]\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                return {\r\n                    name: dataItem[1].name,\r\n                    value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n                };\r\n            })\r\n        });\r\n    });\r\n\r\noption = {\r\n    bmap: bmap,\r\n    color: ['#fff'],\r\n    backgroundColor: '#404a59',\r\n    /*title: {\r\n        text: '数据汇总',\r\n\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },*/\r\n    tooltip: {\r\n        // trigger: 'item'\r\n        formatter: '{b0}'\r\n    },\r\n    geo: {\r\n        map: 'bmap',\r\n        polyline: true,\r\n        progressiveThreshold: 500,\r\n        progressive: 200,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#404a59'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM,/dep/echarts/map/js/china.js","updaterUID":"bd-420765316","theme":"","layout":"","viewCount":250,"userName":"十号a","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB17wfz31G.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"十号a"}}