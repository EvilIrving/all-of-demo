{"status":0,"data":{"cid":"xXRDQRJE4Y","authorUid":"obd-oFhwebmADo-1v_UnuM2-0nP08e8Nb5M","authorUserName":"J***e","title":"地图自动轮询展示","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-14T09:24:17.000Z","lastUpdateTime":"2020-12-14T09:24:17.000Z","auth":2,"uid":"obd-oFhwebmADo-1v_UnuM2-0nP08e8Nb5M","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-14T09:24:17.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1558663415563-NEJY4xOlI.json\";\r\nvar chart = echarts.init(document.getElementById('chart-panel'));\r\n\r\n//绘制全国地图，获取全国地图的json\r\n$.getJSON(uploadedDataURL, function(data) {\r\n    //新建一个空数组\r\n    d = [];\r\n    //循环遍历\r\n    for (var i = 0; i < data.features.length; i++) {\r\n        //将数据中的namepush到新数组中,没有这个无法高亮显示 dataIndex\r\n        d.push({\r\n            name: data.features[i].properties.name,\r\n            value:0\r\n        })\r\n    }\r\n\r\n    //注册地图名为 'chinaTest' 的geo\r\n    echarts.registerMap('chinaTest', data);\r\n    //绘制地图\r\n    renderMap('chinaTest', d);\r\n    //轮询\r\n    autoMapHover(chart, 0, d.length)\r\n});\r\n\r\nvar option = {\r\n    backgroundColor: \"#043270\",\r\n    color: [\"#3398DB\"],\r\n    tooltip: {\r\n        trigger: \"axis\",\r\n        axisPointer: {\r\n            // 坐标轴指示器，坐标轴触发有效\r\n            type: \"shadow\" // 默认为直线，可选为：'line' | 'shadow'\r\n        }\r\n    },\r\n    xAxis: [],\r\n    yAxis: [],\r\n    grid: [],\r\n};\r\n\r\n\r\nfunction renderMap(mapName, data) {\r\n    // option.title.subtext = map;\r\n    option.series = [{\r\n        name: mapName,\r\n        type: 'map',\r\n        mapType: mapName,\r\n        roam: true,\r\n        zoom: 1,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: \"#fff\"\r\n                }\r\n            },\r\n            emphasis: {\r\n                textStyle: {\r\n                    color: \"#fff\"\r\n                }\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: \"rgba(147, 235, 248, 1)\",\r\n                borderWidth: 1,\r\n                areaColor: {\r\n                    type: \"radial\",\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.8,\r\n                    colorStops: [{\r\n                            offset: 0,\r\n                            color: \"rgba(147, 235, 248, 0)\" // 0% 处的颜色\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: \"rgba(147, 235, 248, .2)\" // 100% 处的颜色\r\n                        }\r\n                    ],\r\n                    globalCoord: false // 缺省为 false\r\n                },\r\n                shadowColor: \"rgba(128, 217, 248, 1)\",\r\n                shadowOffsetX: -2,\r\n                shadowOffsetY: 2,\r\n                shadowBlur: 10\r\n            },\r\n            //鼠标移入\r\n            emphasis: {\r\n                areaColor: \"#389BB7\",\r\n                borderWidth: 0\r\n            }\r\n        },\r\n        data: data\r\n    }];\r\n    //渲染地图\r\n    chart.setOption(option);\r\n}\r\n\r\nfunction autoMapHover(myChart, seriesIndex = 0, dataLength = 0) {\r\n    var count = 0;\r\n    var timeTicket = null;\r\n    const run = function() {\r\n        timeTicket && clearInterval(timeTicket);\r\n        timeTicket = setInterval(function() {\r\n            myChart.dispatchAction({\r\n                type: \"downplay\",\r\n                seriesIndex: seriesIndex\r\n            });\r\n            myChart.dispatchAction({\r\n                type: \"highlight\",\r\n                seriesIndex: seriesIndex,\r\n                dataIndex: count % dataLength\r\n            });\r\n            count++;\r\n        }, 1000);\r\n    };\r\n\r\n    myChart.on(\"mouseover\", function(params) {\r\n        // 清除定时器,将鼠标所在的区域高亮\r\n        clearInterval(timeTicket);\r\n        myChart.dispatchAction({\r\n            type: \"downplay\",\r\n            seriesIndex: seriesIndex\r\n        });\r\n        myChart.dispatchAction({\r\n            type: \"highlight\",\r\n            seriesIndex: 0,\r\n            dataIndex: params.dataIndex\r\n        });\r\n    });\r\n    myChart.on(\"mouseout\", function(params) {\r\n        run();\r\n    });\r\n    run();\r\n}","html":"","externalScripts":"","updaterUID":"obd-oFhwebmADo-1v_UnuM2-0nP08e8Nb5M","theme":"","layout":"","viewCount":246,"userName":"J***e","commentCount":1,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xXRDQRJE4Y.png?v=1607937857913","isCustomThumbnail":0,"builtinTags":["category-work","series-map","tooltip"],"customTags":[],"updaterUserName":"J***e"}}