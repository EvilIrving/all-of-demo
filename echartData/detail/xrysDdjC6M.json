{"status":0,"data":{"cid":"xrysDdjC6M","authorUid":"bd-2215764494","authorUserName":"p***g","title":"sketch","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-05-08T04:32:35.000Z","lastUpdateTime":"2021-04-25T02:58:14.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-05-08T04:32:35.000Z","code":"\nlet canvas = document.createElement('canvas');\nlet mapChart = echarts.init(canvas, null, {\n    width: 4096,\n    height: 2048\n});\nmapChart.setOption({\n    series: [{\n        type: 'map',\n        map: 'world',\n        // 绘制完整尺寸的 echarts 实例\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        boundingCoords: [\n            [-180, 90],\n            [180, -90]\n        ],\n        itemStyle: {\n            normal: {\n                areaColor: 'transparent',\n                borderColor: 'rgb(60, 60, 200)'\n            }\n        }\n    }]\n});\n\n$.getJSON('/asset/get/s/data-1491909692146-S1NH24cTe.json', function (data) {\n    var airports = data.airports.map(function (item) {\n        return {\n            coord: [item[3], item[4]]\n        }\n    });\n    function getAirportCoord(idx) {\n        return [data.airports[idx][3], data.airports[idx][4]];\n    }\n\n    // Route: [airlineIndex, sourceAirportIndex, destinationAirportIndex]\n    var routesGroupByAirline = {};\n    data.routes.forEach(function (route) {\n        var airline = data.airlines[route[0]];\n        var airlineName = airline[0];\n        if (!routesGroupByAirline[airlineName]) {\n            routesGroupByAirline[airlineName] = [];\n        }\n        routesGroupByAirline[airlineName].push(route);\n    });\n\n    var pointsData = [];\n    data.routes.forEach(function (airline) {\n        pointsData.push(getAirportCoord(airline[1]));\n        pointsData.push(getAirportCoord(airline[2]));\n    });\n\n    var series = data.airlines.map(function (airline) {\n        var airlineName = airline[0];\n        var routes = routesGroupByAirline[airlineName];\n\n        if (!routes) {\n            return null;\n        }\n        return {\n            type: 'lines3D',\n            name: airlineName,\n\n\n            lineStyle: {\n                width: 1,\n                color: 'rgb(200, 60, 60)',\n                opacity: 0.5\n            },\n            blendMode: 'lighter',\n\n            data: routes.map(function (item) {\n                var weight = Math.random();\n                return {\n                    lineStyle: {\n                        width: weight * 2 + 0.2,\n                        color: 'rgb(200, 60, 60)',\n                        opacity: weight / 2\n                    },\n                    coords: [airports[item[1]].coord, airports[item[2]].coord],\n                }\n            })\n        };\n    }).filter(function (series) {\n        return !!series;\n    });\n    series.push({\n        type: 'scatter3D',\n        coordinateSystem: 'globe',\n        blendMode: 'lighter',\n        symbolSize: 2,\n        itemStyle: {\n            color: 'rgb(200, 60, 60)',\n            opacity: 0.2\n        },\n        data: pointsData\n    });\n\n    myChart.setOption({\n        legend: {\n            selectedMode: 'single',\n            left: 'left',\n            data: Object.keys(routesGroupByAirline),\n            orient: 'vertical',\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        globe: {\n\n            environment: '/asset/get/s/data-1491837999815-H1_44Qtal.jpg',\n\n            heightTexture: '/asset/get/s/data-1491837512042-rJlLfXYax.jpg',\n\n            displacementScale: 0.02,\n            displacementQuality: 'high',\n\n            baseColor: '#000',\n\n            shading: 'realistic',\n            realisticMaterial: {\n                roughness: 0.2,\n                metalness: 0\n            },\n\n            postEffect: {\n                enable: true,\n                depthOfField: {\n                    enable: false,\n                    focalDistance: 150\n                }\n            },\n            temporalSuperSampling: {\n                enable: true\n            },\n            \n            layers: [{\n                texture: mapChart \n            }],\n            light: {\n                ambient: {\n                    intensity: 0\n                },\n                main: {\n                    intensity: 0.1,\n                    shadow: false\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491837984109-r1u7NmY6e.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            },\n            viewControl: {\n                autoRotate: false\n            },\n            silent: true\n        },\n        series: series\n    });\n    window.addEventListener('keydown', function () {\n        series.forEach(function (series, idx) {\n            myChart.dispatchAction({\n                type: 'lines3DToggleEffect',\n                seriesIndex: idx\n            });\n        })\n    });\n});\n","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/map/js/world.js","updaterUID":"bd-2215764494","theme":"default","layout":"","viewCount":1140,"userName":"p***g","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrysDdjC6M.png?v=1619319494494","isCustomThumbnail":0,"builtinTags":["category-work","globe","legend","series-lines3D","series-scatter3D"],"customTags":[],"updaterUserName":"p***g"}}