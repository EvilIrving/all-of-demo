{"status":0,"data":{"cid":"xfl-fFKudE","authorUid":"bd-992099902","authorUserName":"论沙场","title":"y轴正负轴都是正数","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-01-30T07:49:27.000Z","lastUpdateTime":"2019-01-30T07:49:27.000Z","auth":2,"uid":"bd-992099902","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-01-30T07:49:27.000Z","code":"app.title = '柱状图框选';\n\nvar xAxisData = [\n    '1月',\n    '2月',\n    '3月',\n    '4月',\n    '5月',\n    '6月',\n    '7月',\n    '8月',\n    '9月',\n    '10月',\n    '11月',\n    '12月',\n];\nvar goodCounts = [];\nvar goodPercents = [];\nvar badCounts = [];\nvar badPercents = [];\n\n\nvar source = [];\nvar dimensions = ['date', 'goodCount', 'badCount', 'goodPercent', 'badPercent'];\nfor (var i = 0; i < 12; i++) {\n    let goodCount = +(Math.random() * 400).toFixed(0) + 100;\n    let badCount = +(Math.random() * 400).toFixed(0) * -1;\n    let goodPercent = +(Math.random() * 30).toFixed(0);\n    let badPercent = +(Math.random() * 30).toFixed(0) * -1;\n    let date = xAxisData[i];\n    goodCounts.push(goodCount);\n    badCounts.push(badCount);\n    goodPercents.push(goodPercent);\n    badPercents.push(badPercent);\n    source.push({\n        date: date,\n        goodCount,\n        goodPercent,\n        badCount,\n        badPercent\n    })\n}\n\nvar dataset = {\n    dimensions: dimensions,\n    source: source\n}\n\nvar itemStyle = {\n    normal: {},\n    emphasis: {\n        barBorderWidth: 1,\n        shadowBlur: 10,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n        shadowColor: 'rgba(0,0,0,0.5)'\n    }\n};\n\n\nvar yAxisGoodCount = {\n    type: 'value',\n    // id: 'goodCount',\n    // gridIndex: 0,\n    position: 'left',\n    min: -600,\n    max: 600,\n    interval: 200,\n    inverse: false,\n    axisLabel: {\n        formatter: function(value) {\n            let valueNum = parseInt(value);\n            if (valueNum < 0) {\n                return value / -10;\n            }\n            return value\n        }\n    }\n}\nvar yAxisPercents = {\n    type: 'value',\n    position: 'right',\n    min: -30,\n    max: 30,\n    interval: 10,\n    inverse: false,\n    axisLabel: {\n        formatter: function(value) {\n            let valueNum = parseInt(value);\n            if (valueNum < 0) {\n                return `${value/-1}%`;\n            }\n            return `${value}%`;\n        }\n    }\n}\n\noption = {\n    backgroundColor: '#eee',\n    legend: {\n        data: ['bar', 'bar2', 'bar3', 'bar4'],\n        align: 'left',\n        left: 10\n    },\n    brush: {\n        toolbox: ['rect', 'polygon', 'lineX', 'lineY', 'keep', 'clear'],\n        xAxisIndex: 0\n    },\n    toolbox: {\n        feature: {\n            magicType: {\n                type: ['stack', 'tiled']\n            },\n            dataView: {}\n        }\n    },\n    tooltip: {\n        trigger: 'axis',\n        formatter: function(params) {\n            console.log('tooltip', params);\n            let name = params[0].name;\n            let goodCountItem = `${params[0].marker}${params[0].seriesName}: ${params[0].data.goodCount}`;\n            let badCountItem = `${params[1].marker}${params[1].seriesName}: ${params[1].data.badCount/-10}`;\n            let goodPercentItem = `${params[2].marker}${params[2].seriesName}: ${params[2].data.goodPercent}%`;\n            let badPercentItem = `${params[3].marker}${params[3].seriesName}: ${params[3].data.badPercent/-1}%`;\n            return `${name}<br/>${goodCountItem}<br/>${badCountItem}<br/>${goodPercentItem}<br/>${badPercentItem}`\n        }\n    },\n    dataset: dataset,\n    xAxis: {\n        data: xAxisData,\n        // name: 'X Axis',\n        // silent: false,\n        // axisLine: {\n        //     onZero: true\n        // },\n        // splitLine: {\n        //     show: false\n        // },\n        // splitArea: {\n        //     show: false\n        // }\n    },\n    // yAxis:[\n    //     yAxisGoodCount,\n    //     yAxisBadCount\n    //     ],\n    yAxis: [yAxisGoodCount, yAxisPercents],\n    grid: {\n        left: 100\n    },\n    // visualMap: {\n    //     type: 'continuous',\n    //     dimension: 1,\n    //     text: ['High', 'Low'],\n    //     inverse: true,\n    //     itemHeight: 200,\n    //     calculable: true,\n    //     min: -2,\n    //     max: 6,\n    //     top: 60,\n    //     left: 10,\n    //     inRange: {\n    //         colorLightness: [0.4, 0.8]\n    //     },\n    //     outOfRange: {\n    //         color: '#bbb'\n    //     },\n    //     controller: {\n    //         inRange: {\n    //             color: '#2f4554'\n    //         }\n    //     }\n    // },\n    series: [{\n            name: '好评数',\n            type: 'bar',\n            stack: 'count',\n            itemStyle: itemStyle,\n            yAxisIndex: 0,\n            xAxisIndex: 0,\n\n        },\n        {\n            // name: 'bar2',\n            type: 'bar',\n            stack: 'count',\n            itemStyle: itemStyle,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n\n        },\n        {\n            name: '好评率',\n            type: 'line',\n            itemStyle: itemStyle,\n            yAxisIndex: 1,\n            xAxisIndex: 0,\n            // data: data3\n        },\n        {\n            name: '差评率',\n            type: 'line',\n            itemStyle: itemStyle,\n            yAxisIndex: 1,\n            xAxisIndex: 0,\n            // data: data4\n        }\n    ]\n};\n\n// myChart.on('brushSelected', renderBrushed);\n\n// function renderBrushed(params) {\n//     var brushed = [];\n//     var brushComponent = params.batch[0];\n\n//     for (var sIdx = 0; sIdx < brushComponent.selected.length; sIdx++) {\n//         var rawIndices = brushComponent.selected[sIdx].dataIndex;\n//         brushed.push('[Series ' + sIdx + '] ' + rawIndices.join(', '));\n//     }\n\n//     myChart.setOption({\n//         title: {\n//             backgroundColor: '#333',\n//             text: 'SELECTED DATA INDICES: \\n' + brushed.join('\\n'),\n//             bottom: 0,\n//             right: 0,\n//             width: 100,\n//             textStyle: {\n//                 fontSize: 12,\n//                 color: '#fff'\n//             }\n//         }\n//     });\n// }","html":"","externalScripts":"","updaterUID":"bd-992099902","theme":"","layout":"","viewCount":22,"userName":"论沙场","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfl-fFKudE.png?v=1548834567781","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title"],"customTags":[],"updaterUserName":"论沙场"}}