{"status":0,"data":{"cid":"xSyqV9trQ7","authorUid":"bd-2889079406","authorUserName":"六***论","title":"病人迁移图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-07-13T02:10:58.000Z","lastUpdateTime":"2018-07-13T02:10:58.000Z","auth":2,"uid":"bd-2889079406","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-13T03:43:22.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1531447156625-SJ6uPKrXX.json\";\n\nvar  geocc= \"/asset/get/s/data-1519279347346-BkslpCjwf.json\";\n\nmyChart.showLoading();\n$.getJSON(geocc, function(geoJson) {\n    echarts.registerMap('jiangxi', geoJson);\n    myChart.hideLoading();\n    \n\n    $.getJSON(uploadedDataURL, function(geoinfo) {\n\n\n        var geoCoordMap = {\n            '马鞍山市健康大药房有限公司雨山店': [117.37, 31.786],\n            '南山矿医院': [117.37, 31.386],\n            '马鞍山诗城中医骨伤医院': [116.27, 31.786],\n            '协和医院': [118.07, 32.486],\n            '马鞍山市第四人民医院': [117.27, 33.086],\n            '马鞍山市宝芝林大药房连锁有限公司大治村店': [116.67, 32.786],\n            '马鞍山市金陵医院': [117.77, 33.486],\n            '马鞍山微创医院': [116.67, 33.686],\n            'Home': [116.27, 33.386]\n        }\n        console.log(geoinfo)\n\n        var convertData = function(data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value)\n                    });\n                }\n            }\n            return res;\n        };\n\n\n        option = {\n            baseOption: {\n                timeline: {\n                    axisType: 'category',\n                    orient: 'vertical',\n                    autoPlay: true,\n                    inverse: true,\n                    playInterval: 4000,\n                    left: null,\n                    right: 0,\n                    top: 20,\n                    bottom: 20,\n                    width: 55,\n                    height: null,\n                    label: {\n                        normal: {\n                            textStyle: {\n                                color: '#999'\n                            }\n                        },\n                        emphasis: {\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        }\n                    },\n                    symbol: 'none',\n                    lineStyle: {\n                        color: '#555'\n                    },\n                    checkpointStyle: {\n                        color: '#bbb',\n                        borderColor: '#777',\n                        borderWidth: 2\n                    },\n                    controlStyle: {\n                        showNextBtn: false,\n                        showPrevBtn: false,\n                        normal: {\n                            color: '#666',\n                            borderColor: '#666'\n                        },\n                        emphasis: {\n                            color: '#aaa',\n                            borderColor: '#aaa'\n                        }\n                    },\n                    data: []\n                },\n                backgroundColor: '#404a59',\n                title: [{\n                    text: geoinfo.date[0],\n                    textAlign: 'center',\n                    left: '50%',\n                    top: '90%',\n                    textStyle: {\n                        fontSize: 50,\n                        color: 'rgba(255, 255, 255, 0.7)'\n                    }\n                }, {\n                    text: '病人迁移图例',\n                    left: 'center',\n                    top: 10,\n                    textStyle: {\n                        color: '#aaa',\n                        fontWeight: 'normal',\n                        fontSize: 20\n                    }\n                }],\n                grid: {\n                    top: 100,\n                    containLabel: true,\n                    left: 30,\n                    right: '110'\n                },\n                geo: {\n                    show: true,\n                    map: 'jiangxi',\n                    label: {\n                        normal: {\n                            show: false\n                        },\n                        emphasis: {\n                            show: false,\n                        }\n                    },\n                    roam: true,\n                    itemStyle: {\n                        normal: {\n                            areaColor: 'transparent',\n                            borderColor: '#3fdaff',\n                            borderWidth: 2,\n                            shadowColor: 'rgba(63, 218, 255, 0.5)',\n                            shadowBlur: 30\n                        },\n                        emphasis: {\n                            areaColor: '#2B91B7',\n                        }\n                    }\n                },\n                visualMap: {\n                    show: false,\n                    min: 0,\n                    max: 500,\n                    left: 'left',\n                    top: 'bottom',\n                    text: ['高', '低'], // 文本，默认为数值文本\n                    calculable: true,\n                    seriesIndex: [1],\n                    inRange: {\n                        // color: ['#3B5077', '#031525'] // 蓝黑\n                        // color: ['#ffc0cb', '#800080'] // 红紫\n                        // color: ['#3C3B3F', '#605C3C'] // 黑绿\n                        //color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n                        //color: ['#23074d', '#cc5333'] // 紫红\n                        // color: ['#00467F', '#A5CC82'] // 蓝绿\n                        // color: ['#1488CC', '#2B32B2'] // 浅蓝\n                        // color: ['#00467F', '#A5CC82'] // 蓝绿\n                        // color: ['#00467F', '#A5CC82'] // 蓝绿\n                        // color: ['#00467F', '#A5CC82'] // 蓝绿\n                        // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n                    }\n                },\n                series: [{\n                        name: 'light',\n                        type: 'scatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(geoinfo.geodata[0]),\n                        symbolSize: function(val) {\n                            return val[2] ;\n                        },\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true\n                            },\n                            emphasis: {\n                                show: true\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: '#F4E925'\n                            }\n                        }\n                    },\n                    {\n                        name: '线路',\n                        type: 'lines',\n                        coordinateSystem: 'geo',\n                        zlevel: 2,\n                        large: true,\n                        effect: {\n                            show: true,\n                            constantSpeed: 100,\n                            symbol: 'arrow', //ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\n                            symbolSize: 10,\n                            trailLength: 0.1,\n                        },\n\n                        lineStyle: {\n                            normal: {\n                                color: '#0fff17',\n                                /*\n                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                        offset: 0, color: '#58B3CC'\n                                    }, {\n                                        offset: 1, color: '#F58158'\n                                    }], false),*/\n                                width: 2,\n                                opacity: 1.0,\n                                curveness: 0.15\n                            }\n                        },\n                        data: geoinfo.moveline[0]\n                    }\n                ],\n                animationDurationUpdate: 800,\n                animationEasingUpdate: 'quinticInOut'\n            },\n            options: []\n        };\n\n        for (var n = 0; n < geoinfo.date.length; n++) {\n            option.baseOption.timeline.data.push(geoinfo.date[n]);\n            option.options.push({\n                title: {\n                    show: true,\n                    'text': geoinfo.date[n] + '',\n                    \n                },\n                series: [{\n                        name: 'light',\n                        type: 'scatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(geoinfo.geodata[n]),\n                        symbolSize: function(val) {\n                            return val[2] ;\n                        },\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true\n                            },\n                            emphasis: {\n                                show: true\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: '#F4E925'\n                            }\n                        }\n                    },\n                    {\n                        name: '线路',\n                        type: 'lines',\n                        coordinateSystem: 'geo',\n                        zlevel: 2,\n                        large: true,\n                        effect: {\n                            show: true,\n                            constantSpeed: 100,\n                            symbol: 'arrow', //ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\n                            symbolSize: 10,\n                            trailLength: 0.1,\n                        },\n\n                        lineStyle: {\n                            normal: {\n                                color: '#0fff17',\n                                /*\n                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                        offset: 0, color: '#58B3CC'\n                                    }, {\n                                        offset: 1, color: '#F58158'\n                                    }], false),*/\n                                width: 2,\n                                opacity: 1.0,\n                                curveness: 0.15\n                            }\n                        },\n                        data: geoinfo.moveline[n]\n                    }\n                ]\n                \n                \n            });\n        }\nmyChart.setOption(option);\n    })\n\n\n})","html":"","externalScripts":"/dep/echarts/latest/extension/dataTool.min.js,/dep/echarts/latest/extension/bmap.min.js,http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-2889079406","theme":"","layout":"","viewCount":1048,"userName":"六***论","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSyqV9trQ7.png?v=1531453402335","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-lines","series-scatter","timeline","title","visualMap"],"customTags":[],"updaterUserName":"六***论"}}