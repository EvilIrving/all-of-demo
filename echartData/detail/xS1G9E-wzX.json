{"status":0,"data":{"cid":"xS1G9E-wzX","authorUid":"bd-3778831175","authorUserName":"m***i","title":" large  lines on bmap","description":"百度地图上渲染大量的线段 lines","latestVersion":2,"alwaysLatest":1,"createTime":"2018-07-02T01:48:57.000Z","lastUpdateTime":"2018-07-02T01:48:57.000Z","auth":2,"uid":"bd-3778831175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-17T05:58:15.000Z","code":"\n\nconst urls=[\n    '/asset/get/s/data-1530495740858-rySbXZvfX.bin',\n    '/asset/get/s/data-1530495753511-SyWMmbPfQ.bin',\n    '/asset/get/s/data-1530495762854-B1jz7ZDMQ.bin',\n    '/asset/get/s/data-1530495770336-SJzQ7-PGQ.bin',\n    '/asset/get/s/data-1530495783787-S1gNXbvz7.bin',\n    '/asset/get/s/data-1530495790584-ryw4QZwMQ.bin',\n]\nvar CHUNK_COUNT = 6;\n\nvar dataCount = 0;\n\nfunction fetchData(idx) {\n    if (idx >= CHUNK_COUNT) {\n        return;\n    }\n    var dataURL = urls[idx];\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', dataURL, true);\n    xhr.responseType = 'arraybuffer';\n\n    xhr.onload = function (e) {\n        var rawData = new Float32Array(this.response);\n        var data = new Float64Array(rawData.length - 2);\n        var offsetX = rawData[0];\n        var offsetY = rawData[1];\n        var off = 0;\n        var addedDataCount = 0;\n        for (var i = 2; i < rawData.length;) {\n            var count = rawData[i++];\n            data[off++] = count;\n            for (var k = 0; k < count; k++) {\n                var x = rawData[i++] + offsetX;\n                var y = rawData[i++] + offsetY;\n                data[off++] = x;\n                data[off++] = y;\n\n                addedDataCount++;\n            }\n        }\n\n        myChart.appendData({\n            seriesIndex: 0,\n            data: data\n        });\n\n        dataCount += addedDataCount;\n\n        fetchData(idx + 1);\n    }\n\n    xhr.send();\n}\n\noption = {\n    progressive: 20000,\n    bmap :{\n       center: [-74.04327099998152, 40.86737600240287],\n        zoom: 9,\n        roam: true,\n        mapStyle: {\n            styleJson: [{\n                \"featureType\": \"water\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#044161\"\n                }\n            }, {\n                \"featureType\": \"land\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#004981\"\n                }\n            }, {\n                \"featureType\": \"boundary\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#064f85\"\n                }\n            }, {\n                \"featureType\": \"railway\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"highway\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#004981\"\n                }\n            }, {\n                \"featureType\": \"highway\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#005b96\",\n                    \"lightness\": 1\n                }\n            }, {\n                \"featureType\": \"highway\",\n                \"elementType\": \"labels\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"arterial\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#004981\"\n                }\n            }, {\n                \"featureType\": \"arterial\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#00508b\"\n                }\n            }, {\n                \"featureType\": \"poi\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"green\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#056197\",\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"subway\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"manmade\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"local\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"arterial\",\n                \"elementType\": \"labels\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }, {\n                \"featureType\": \"boundary\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#029fd4\"\n                }\n            }, {\n                \"featureType\": \"building\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#1a5787\"\n                }\n            }, {\n                \"featureType\": \"label\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"visibility\": \"off\"\n                }\n            }]\n        }\n    },\n    series: [{\n        type: 'lines',\n\n        coordinateSystem: 'bmap',\n\n        blendMode: 'lighter',\n\n        dimensions: ['value'],\n\n        data: new Float64Array(),\n        polyline: true,\n        large: true,\n\n        lineStyle: {\n            color: 'orange',\n            opacity: 0.3\n        }\n    }]\n}\n\nfetchData(0);","html":"","externalScripts":"https://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM,/dep/echarts/latest/extension/bmap.min.js,http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-3778831175","theme":"","layout":"","viewCount":181,"userName":"m***i","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xS1G9E-wzX.png?v=1530496139351","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":["lines","百度地图"],"updaterUserName":"m***i"}}