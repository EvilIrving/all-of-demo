{"status":0,"data":{"cid":"x-f9WJ11iP","authorUid":"bd-4061446379","authorUserName":"A***9","title":"漏斗图-人员结构3","description":"纯属虚构","latestVersion":4,"alwaysLatest":1,"createTime":"2020-04-08T08:26:17.000Z","lastUpdateTime":"2020-04-08T08:26:17.000Z","auth":1,"uid":"bd-4061446379","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-10T10:50:45.000Z","code":"var dom = document.getElementById(\"chart-panel\");\ncurChart = (echarts.getInstanceByDom(dom))\ndata = [[\"职级\",\"6级\",\"5级\",\"4级\",\"3级\",\"2级\"],[\"事业一部\",null,2,6,14,3],[\"事业二部\",1,1,7,9,6],[\"产品控制中心\",1,1,7,3,null],[\"招标采购部\",null,null,1,2,null],[\"财务资本中心\",1,2,3,5,6],[\"计划运营部\",null,null,2,2,null],[\"人力行政部\",null,3,2,3,2],[\"商运运营部\",null,null,null,1,null],[\"客户服务部\",null,null,1,null,3],[\"营销策划部\",1,null,3,3,21],[\"公司\",4,9,32,42,41]]\napartName = []\nfunction makeData(){\n    var newData ={}\n    for (var i =1;i<data.length;i++){\n        var curData = data[i]\n        var curApart = curData[0]\n        newData[curApart] = []\n        apartName.push(curApart)\n        for (var j =1;j<curData.length;j++){\n            var curLevel = curData[j]\n            newData[curApart].push({value: curLevel == null ? 0 : curLevel, name: data[0][j]})\n            \n        }\n    }\n    return newData\n}\nnewData = makeData()\nvar curIdx = 0\noption = {\n    title:{text:\"公司\",left:\"center\",textStyle:{\n        fontSize:35}},\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b} : {c}({d}%)\"\n    },\n    toolbox: {\n        feature: {\n            dataView: {readOnly: false},\n            restore: {},\n            saveAsImage: {},\n            myTool1: {\n                show: true,\n                title: '切换部门',\n                icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',\n                onclick: function (){\n                    option.title.text = apartName[curIdx]\n                    option.series[0].data = newData[apartName[curIdx]]\n                    console.log(option,apartName[curIdx],newData[apartName[curIdx]],apartName)\n                    curChart.setOption(option)\n                    curIdx = curIdx < 10 ? curIdx +1 : 0\n                    \n                }\n            }\n        }\n    },\n    series: [\n        {\n            name:'员工结构',\n            type:'funnel',\n            left:\"center\",\n            top: 60,\n            //x2: 80,\n            bottom: 60,\n            width: '100%',\n            // height: {totalHeight} - y - y2,\n            min: 0,\n            max: 100,\n            minSize: '0%',\n            maxSize: '100%',\n            sort: \"none\",\n            gap: 0,\n            label: {\n                show: true,\n                position: 'inside',\n                fontSize:20\n            },\n            labelLine: {\n                length: 10,\n                lineStyle: {\n                    width: 1,\n                    type: 'solid'\n                }\n            },\n            itemStyle: {\n                borderColor: '#fff',\n                borderWidth: 1\n            },\n            emphasis: {\n                label: {\n                    fontSize: 20\n                }\n            },\n            data: [\n                {value: 4, name: '6级'},\n                {value: 9, name: '5级'},\n                {value: 32, name: '4级'},\n                {value: 42, name: '3级'},\n                {value: 41, name: '2级'}\n            ]\n        }\n    ]\n};\n","html":"","externalScripts":"","updaterUID":"bd-4061446379","theme":"","layout":"","viewCount":387,"userName":"A***9","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-f9WJ11iP.png?v=1586515845674","isCustomThumbnail":0,"builtinTags":["category-work","series-funnel","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"A***9"}}