{"status":0,"data":{"cid":"x6c790caP","authorUid":"bd-1208108292","authorUserName":"f***d","title":"某群淘宝人生账单分布","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-10-21T04:05:34.000Z","lastUpdateTime":"2019-10-21T04:05:34.000Z","auth":2,"uid":"bd-1208108292","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-21T04:05:34.000Z","code":"let datas = [{\n        'name': '菜菜',\n        'period': '9.10',\n        'amount': 274600,\n        'orderCount': 1670,\n    },\n    {\n        'name': '佛生',\n        'period': '13.1',\n        'amount': 147477,\n        'orderCount': 436,\n    },\n    {\n        'name': '我',\n        'period': '7.5',\n        'amount': 15997,\n        'orderCount': 72,\n    },\n    {\n        'name': 'Jiayin',\n        'period': '10.0',\n        'amount': 65796,\n        'orderCount': 544,\n    },\n    {\n        'name': '明坤',\n        'period': '10.5',\n        'amount': 310364,\n        'orderCount': 979,\n    },\n    {\n        'name': '首席',\n        'period': '6.5',\n        'amount': 8305,\n        'orderCount': 85,\n    },\n    {\n        'name': '小楠子+',\n        'period': '9.1',\n        'amount': 210284,\n        'orderCount': 2224,\n    },\n    {\n        'name': '康康',\n        'period': '10.10',\n        'amount': 41789,\n        'orderCount': 237,\n    },\n    {\n        'name': '书记',\n        'period': '10.7',\n        'amount': 36961,\n        'orderCount': 452,\n    },\n    {\n        'name': '书记夫人',\n        'period': '9.0',\n        'amount': 68088,\n        'orderCount': 647,\n    },\n    {\n        'name': 'vv',\n        'period': '8.3',\n        'amount': 72896,\n        'orderCount': 1743,\n    },\n    {\n        'name': 'qq',\n        'period': '6.10',\n        'amount': 52276,\n        'orderCount': 627,\n    },\n];\n\nlet min = 0;\nlet max = 0;\nlet packedDatas = packDatas(datas);\n\noption = {\n    backgroundColor: '#efefef',\n    title: {\n        text: '某群淘宝人生账单分布',\n        left: 'center',\n        top: 0,\n    },\n    tooltip: {\n        padding: 10,\n        backgroundColor: '#222',\n        borderColor: '#777',\n        borderWidth: 1,\n        formatter: function(obj) {\n            var value = obj.value;\n            return '<div style=\"border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px\">' +\n                value[2] +\n                '（' + value[3] + '）' +\n                '</div>' +\n                '订单数：' + value[0] + '<br>' +\n                '消费金额：' + value[1] + '<br>' +\n                'AVT：' + value[4].toFixed(2) + '<br>';\n        }\n    },\n    xAxis: {\n        splitLine: {\n            show: false,\n        },\n        scale: true,\n        type: 'value',\n        name: '订单数',\n    },\n    yAxis: {\n        splitLine: {\n            show: false,\n        },\n        scale: true,\n        type: 'value',\n        name: '消费金额',\n    },\n\n    visualMap: [{\n        show: false,\n        min: min,\n        max: max,\n        dimension: 5,\n        inRange: {\n            color: [\n                '#fed8a7',\n                '#ee2021',\n            ],\n        }\n    }, ],\n\n    series: [{\n        symbolSize: function(data) {\n            return data[1] / (data[0] * 3);\n        },\n        label: {\n            show: true,\n            position: 'top',\n            formatter: function(param) {\n                return param.data[2];\n            },\n        },\n        itemStyle: {\n            normal: {\n                shadowBlur: 10,\n                shadowColor: 'rgba(25, 100, 150, 0.5)',\n                shadowOffsetY: 5,\n            },\n        },\n        markLine: {\n            itemStyle: {\n                normal: {\n                    lineStyle: {\n                        type: 'solid',\n                        color: '#000'\n                    },\n                    label: {\n                        show: true,\n                        position: 'left'\n                    }\n                }\n            },\n            large: true,\n            effect: {\n                show: true,\n                loop: true,\n                period: 0,\n                scaleSize: 2,\n                color: null,\n                shadowColor: null,\n                shadowBlur: null\n            },\n        },\n        data: packedDatas,\n        type: 'scatter',\n    }, ]\n};\n\nfunction packDatas(datas) {\n\n    let packedDatas = datas.map((data) => {\n        let name = data['name'];\n        let periods = data['period'].split('.');\n        let period = periods[0] + ' 年 ' + periods[1] + ' 个月';\n        let orderCount = data['orderCount'];\n        let amount = data['amount'];\n        let avt = amount / orderCount;\n        let monthCount = Number.parseInt(periods[0]) * 12 + Number.parseInt(periods[1]);\n\n        min = min > 0 ? Math.min(min, monthCount) : monthCount;\n        max = Math.max(max, monthCount);\n\n        return [orderCount, amount, name, period, avt, monthCount];\n    });\n\n    return packedDatas;\n}","html":"","externalScripts":"","updaterUID":"bd-1208108292","theme":"","layout":"","viewCount":1121,"userName":"f***d","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6c790caP.png?v=1571630734603","isCustomThumbnail":0,"builtinTags":["category-work","grid","markLine","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"f***d"}}