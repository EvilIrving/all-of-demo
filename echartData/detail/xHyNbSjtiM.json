{"status":0,"data":{"cid":"xHyNbSjtiM","authorUid":"bd-1872692745","authorUserName":"Y***n","title":"XXX同/环比分析","description":"用于展现同比或环比数据分析，展现条目基础数据的同时，对增长百分率作展示","latestVersion":1,"alwaysLatest":1,"createTime":"2018-04-10T02:44:11.000Z","lastUpdateTime":"2018-04-10T02:44:11.000Z","auth":1,"uid":"bd-1872692745","publishedVersion":1,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.0.4","versionCreateTime":"2018-04-10T02:44:11.000Z","code":"\r\n    var data_x = [];\r\n    var last_data = [];\r\n    var this_data = [];\r\n    var d_value = [];\r\n    var decrease_data = [];\r\n    var increase_data =[];\r\n    var decrease_rating = [];\r\n    var increase_rating =[];\r\n    var rating_data = [];\r\n    for (var i = 1; i < 16; i++) {\r\n        data_x.push(\"条目\"+i);\r\n        last_data.push(Math.floor(Math.random()*1000)+1000);\r\n        this_data.push(Math.floor(Math.random()*1000)+1000);\r\n        d_value.push(this_data[i-1]-last_data[i-1]);\r\n        if(d_value[i-1]>0){\r\n            increase_data.push(d_value[i-1]);\r\n            increase_rating.push((d_value[i-1]*100/this_data[i-1]).toFixed(2));\r\n            decrease_data.push(0);\r\n            decrease_rating.push(0);\r\n        }\r\n        else {\r\n            decrease_data.push(d_value[i-1]);\r\n            decrease_rating.push((d_value[i-1]*100/this_data[i-1]).toFixed(2));\r\n            increase_data.push(0);\r\n            increase_rating.push(0);\r\n        }\r\n        rating_data.push(((this_data[i-1]-last_data[i-1])*100/this_data[i-1]).toFixed(2));\r\n    }\r\n\r\noption = {\r\n    title:{\r\n        text:'XXX同/环比分析'\r\n    },\r\n    tooltip: {\r\n        \r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'cross',\r\n            crossStyle: {\r\n                color: '#999'\r\n            }\r\n        }\r\n    },\r\n    toolbox: {\r\n        feature: {\r\n            dataView: {show: true, readOnly: false},\r\n            //magicType: {show: true, type: ['line', 'bar']},\r\n            restore: {show: true},\r\n            saveAsImage: {show: true}\r\n        }\r\n    },\r\n    legend: {\r\n        top:'30%',\r\n        data:['上期','本期']\r\n    },\r\n       grid:[{\r\n            show: true,\r\n            //left: 23,\r\n            top: '5%',\r\n            containLabel: true,\r\n            //width: '73%',\r\n            height:'25%'\r\n        },\r\n        {\r\n            show:true,\r\n            //left:0,\r\n            top:\"35%\",\r\n            containLabel:true,\r\n            //width:\"75.9%\",\r\n            height:\"60%\"\r\n        }],\r\n    xAxis: [\r\n        {\r\n            gridIndex:0,\r\n            type: 'category',\r\n            data: data_x,\r\n            axisLabel:{\r\n                interval: 0,\r\n                rotate: 60,\r\n                margin: 2,\r\n                show:true\r\n            },\r\n            axisPointer: {\r\n                type: 'shadow'\r\n            }\r\n        },{\r\n            gridIndex:1,\r\n            type: 'category',\r\n            data: data_x,\r\n            axisLabel:{\r\n                interval: 0,\r\n                rotate: 60,\r\n                margin: 2,\r\n            },\r\n            axisPointer: {\r\n                type: 'shadow'\r\n            }\r\n        }\r\n    ],\r\n    yAxis: [\r\n        {\r\n            gridIndex:0,\r\n            type: 'value',\r\n            name: '变化量',\r\n            \r\n            axisLabel: {\r\n                formatter: '{value} %'\r\n            }\r\n        },\r\n        {\r\n            gridIndex:1,\r\n            type: 'value',\r\n            name: '金额',\r\n            \r\n\r\n        }\r\n    ],\r\n    series: [\r\n        {\r\n            xAxisIndex:1,\r\n            yAxisIndex:1,\r\n            name:'上期',\r\n            type:'line',\r\n            data:last_data\r\n        },\r\n        {\r\n            xAxisIndex:1,\r\n            yAxisIndex:1,\r\n            name:'本期',\r\n            type:'bar',\r\n            itemStyle:{\r\n                normal:{\r\n                    color:'#008B8B',\r\n                }\r\n            },\r\n            data:this_data\r\n        }, {\r\n            xAxisIndex:0,\r\n            yAxisIndex:0,\r\n            name: \"减少\",\r\n            type: \"bar\",\r\n            stack: \"总量\",\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"rgba(51,204,112,1)\",\r\n                    barBorderRadius: 0,\r\n                    label: {\r\n                        show: true,\r\n                        position: \"bottom\",\r\n                        formatter: function(p) {\r\n                            return p.value < 0 ? ('▼' + p.value +'%') : '';\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: decrease_rating,\r\n        }, {\r\n            xAxisIndex:0,\r\n            yAxisIndex:0,\r\n            name: \"增长\",\r\n            type: \"bar\",\r\n            stack: \"总量\",\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#FF6A6A\",\r\n                    barBorderRadius: 0,\r\n                    label: {\r\n                        show: true,\r\n                        position: \"top\",\r\n                        formatter: function(p) {\r\n                            return p.value > 0 ? ('▲' + p.value + '%') : '';\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: increase_rating,\r\n        }\r\n    ]\r\n};\r\n","html":"","externalScripts":"","updaterUID":"bd-1872692745","theme":"","layout":"","viewCount":225,"userName":"Y***n","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyNbSjtiM.png?v=1523328251808","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"Y***n"}}