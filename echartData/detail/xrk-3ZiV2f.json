{"status":0,"data":{"cid":"xrk-3ZiV2f","authorUid":"bd-3778831175","authorUserName":"m***i","title":"北京房屋展示，测试","description":"测试房屋数据可视化","latestVersion":4,"alwaysLatest":1,"createTime":"2018-04-18T10:44:57.000Z","lastUpdateTime":"2018-04-18T10:44:57.000Z","auth":2,"uid":"bd-3778831175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.1.0","versionCreateTime":"2019-01-09T10:53:50.000Z","code":"$.getJSON('/asset/get/s/data-1524042235022-Sym-9YNhf.json', function(buildingsGeoJSON) {\n    var builds = buildingsGeoJSON.map(function(feature) {\n        return {\n            \"type\": \"Feature\",\n            \"properties\": {\n                \"name\": Math.random().toString(),\n                \"height\": Math.random() * 250\n            },\n            \"geometry\": feature.geometry\n        }\n    })\n    var map = {\n        \"features\": builds\n    }\n    console.log(map)\n    echarts.registerMap('buildings', map);\n    var regionsData = builds.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: Math.random() * 200,\n            height: +feature.properties.height * 10 + 0.1,\n            itemStyle: {\n                color: '#000000',\n                borderColor: 'red'\n            }\n        };\n    });\n    console.log(regionsData)\n    myChart.setOption({\n        tooltip: {},\n        visualMap: {\n            show: true,\n            min: 0.4,\n            max: 200,\n            inRange: {\n                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            }\n        },\n        maptalks3D: {\n            center: [116.32736206054689, 39.84861229610178],\n            zoom: 13,\n            pitch: 50,\n            bearing: -10,\n            'urlTemplate': 'http://www.google.cn/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}',\n            postEffect: {\n                // enable: true,\n                // SSAO: {\n                //     enable: true,\n                //     intensity: 1.2,\n                //     radius: 10\n                // },\n                // screenSpaceReflection: {\n                //     enable: true\n                // }\n            },\n            light: {\n                main: {\n                    intensity: 1,\n                    shadow: false,\n                    shadowQuality: 'high'\n                },\n                ambient: {\n                    intensity: 0.\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            }\n        },\n        series: [{\n            type: 'map3D',\n            coordinateSystem: 'maptalks3D',\n            map: 'buildings',\n            data: regionsData,\n            shading: 'realistic',\n            instancing: true,\n            silent: false,\n            itemStyle: {\n                color: '#000000',\n                // borderColor: [0, 2, 10],\n                borderWidth: 1\n            },\n            realisticMaterial: {\n                metalness: 1,\n                roughness: 0.4\n            }\n        }]\n    });\n});\n\nwindow.addEventListener('resize', function() {\n    myChart.resize();\n});","html":"","externalScripts":"https://cdn.jsdelivr.net/npm/maptalks@0.39.3/dist/maptalks.min.js,https://cdn.bootcss.com/echarts/4.1.0/echarts.min.js,https://deyihu.github.io/src/lib/echarts-gl.1.1.3.js?tdsourcetag=s_pctim_aiomsg,https://cdn.bootcss.com/jquery/2.0.3/jquery.min.js","updaterUID":"bd-3778831175","theme":"","layout":"","viewCount":1208,"userName":"m***i","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrk-3ZiV2f.png?v=1524048300238","isCustomThumbnail":1,"builtinTags":["category-work","maptalks3D","series-map3D","tooltip","visualMap"],"customTags":["echarts-gl"],"updaterUserName":"m***i"}}