{"status":0,"data":{"cid":"xyhA_crvg9","authorUid":"obd-ojDRbSjRgehsN9uh-nhuy7TqMsxJUEo","authorUserName":"m***1","title":"2014-2018全国PM2.5浓度变化","description":"","latestVersion":6,"alwaysLatest":0,"createTime":"2021-12-26T11:22:43.000Z","lastUpdateTime":"2021-12-26T13:18:39.000Z","auth":2,"uid":"obd-ojDRbSjRgehsN9uh-nhuy7TqMsxJUEo","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-26T13:18:39.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1528971808162-BkOXf61WX.json';\n//var uploadedDataURL = \"/asset/get/s/data-1559032707973-kPCDcrc0f.json\";\n\n\n\nvar colorIndex = 0;\n$(function () {\n    var geoCoordMap = {\n        北京: [116.4551, 40.2539],\n        天津: [117.4219, 39.4189],\n        河北: [114.4995, 38.1006],\n        山西: [112.3352, 37.9413],\n        内蒙古: [110.3467, 41.4899],\n        辽宁: [123.1238, 42.1216],\n        吉林: [125.8154, 44.2584],\n        黑龙江: [127.9688, 45.368],\n        上海: [121.4648, 31.2891],\n        江苏: [118.8062, 31.9208],\n        安徽: [117.29, 32.0581],\n        浙江: [119.5313, 29.8773],\n        福建: [119.4543, 25.9222],\n        江西: [116.0046, 28.6633],\n        山东: [117.1582, 36.8701],\n        河南: [113.4668, 34.6234],\n        湖北: [114.3896, 30.6628],\n        湖南: [113.0823, 28.2568],\n        广东: [113.12244, 23.009505],\n        广西: [108.479, 23.1152],\n        海南: [110.3893, 19.8516],\n        重庆: [108.384366, 30.439702],\n        四川: [103.9526, 30.7617],\n        贵州: [106.6992, 26.7682],\n        云南: [102.9199, 25.4663],\n        陕西: [109.1162, 34.2004],\n        甘肃: [103.5901, 36.3043],\n        青海: [101.4038, 36.8207],\n        宁夏: [106.3586, 38.1775],\n        新疆: [87.9236, 43.5883],\n        西藏: [91.11, 29.97],\n    };\n\n    var voltageLevel = ['2014', '2015', '2016', '2017', '2018'];\n    var mapData = [[], [], [], [], []];\n    var d2018 = {\n        北京: 50,\n        天津: 51.6,\n        河北: 53.1,\n        山西: 43.9,\n        内蒙古: 21,\n        辽宁: 31.6,\n        吉林:26.7,\n        黑龙江:23.3,\n        上海:35.7,\n        江苏:46.2,\n        浙江:30.6,\n        安徽:49.9,\n        福建:22.2,\n        江西:31.4,\n        山东:47.7,\n        河南:57.3,\n        湖北:43.2,\n        湖南:37,\n        广东:27,\n        广西:29.2,\n        海南:15.7,\n        重庆:33.4,\n        四川: 36.3,\n        贵州: 24.8,\n        云南:  17.8,\n        陕西: 44.2,\n        甘肃: 32.7,\n        青海: 25.9,\n        宁夏: 33,\n        新疆: 53.5,\n        西藏: 5.8,\n\n    };\n    var d2017 = {\n        北京: 55.7,\n天津: 60.1,\n河北: 60.1,\n山西: 49.4,\n内蒙古: 22.5,\n辽宁: 36.8,\n吉林: 36.9,\n黑龙江: 32.3,\n上海: 39.1,\n江苏: 48.3,\n浙江: 35.4,\n安徽: 56,\n福建: 24,\n江西: 38.5,\n山东: 54.3,\n河南: 61,\n湖北: 48.5,\n湖南: 41.4,\n广东: 29.9,\n广西: 31.7,\n海南: 15.8,\n重庆: 38.5,\n四川: 40.5,\n贵州: 27.8,\n云南: 18.1,\n陕西: 50.2,\n甘肃: 34.5,\n青海: 25.6,\n宁夏: 35.6,\n新疆: 49.7,\n西藏: 5.7,\n    };\n    var d2016 = {\n        北京: 69.5,\n天津: 68.4,\n河北: 67.3,\n山西: 50.4,\n内蒙古: 21.8,\n辽宁: 37.8,\n吉林: 32.8,\n黑龙江: 25.3,\n上海: 43.3,\n江苏: 50.2,\n浙江: 35.7,\n安徽: 52.9,\n福建: 24.3,\n江西: 37.3,\n山东: 61.3,\n河南: 65.7,\n湖北: 50.5,\n湖南: 43.6,\n广东: 28.6,\n广西: 32.2,\n海南: 15.9,\n重庆: 45.2,\n四川: 44.3,\n贵州: 30.9,\n云南: 21.4,\n陕西: 51.1,\n甘肃: 39.8,\n青海: 28.5,\n宁夏: 40.3,\n新疆: 53.8,\n西藏: 7.6,\n    };\n\n    var d2015 = {\n       北京: 78.5,\n天津: 70.6,\n河北: 74.8,\n山西: 50.7,\n内蒙古: 24.8,\n辽宁: 49,\n吉林: 45.8,\n黑龙江: 35.9,\n上海: 51.9,\n江苏: 58.6,\n浙江: 41.9,\n安徽: 58.9,\n福建: 25.6,\n江西: 37.6,\n山东: 69.7,\n河南: 73.7,\n湖北: 57.8,\n湖南: 47.9,\n广东: 30.7,\n广西: 35.4,\n海南: 15.9,\n重庆: 46.2,\n四川: 45,\n贵州: 32.6,\n云南: 20.9,\n陕西: 47,\n甘肃: 38.7,\n青海: 29.2,\n宁夏: 39.4,\n新疆: 49.2,\n西藏: 6.7,\n    };\n    var d2014 = {\n        北京: 79.5,\n天津: 84.1,\n河北: 82.4,\n山西: 56.4,\n内蒙古: 26.1,\n辽宁: 49.2,\n吉林: 48.6,\n黑龙江: 40.1,\n上海: 49.6,\n江苏: 62.5,\n浙江: 46.8,\n安徽: 68,\n福建: 28.6,\n江西: 44.4,\n山东: 71.2,\n河南: 77.2,\n湖北: 64.5,\n湖南: 57.2,\n广东: 35.6,\n广西: 40.3,\n海南: 16.6,\n重庆: 53.1,\n四川: 54.3,\n贵州: 36,\n云南: 22.7,\n陕西: 54.3,\n甘肃: 43,\n青海: 35.9,\n宁夏: 40.1,\n新疆: 59.1,\n西藏: 7.7,\n    };\n    \n    \n    var colors = [\n    ['#1DE9B6', '#F46E36', '#04B9FF', '#5DBD32', '#FFC809', '#FB95D5', '#BDA29A', '#6E7074', '#546570', '#C4CCD3'],\n    [\n        '#37A2DA',\n        '#67E0E3',\n        '#32C5E9',\n        '#9FE6B8',\n        '#FFDB5C',\n        '#FF9F7F',\n        '#FB7293',\n        '#E062AE',\n        '#E690D1',\n        '#E7BCF3',\n        '#9D96F5',\n        '#8378EA',\n        '#8378EA',\n    ],\n    [\n        '#DD6B66',\n        '#759AA0',\n        '#E69D87',\n        '#8DC1A9',\n        '#EA7E53',\n        '#EEDD78',\n        '#73A373',\n        '#73B9BC',\n        '#7289AB',\n        '#91CA8C',\n        '#F49F42',\n    ],\n];\n    \n    \n    var categoryData = [];\n    var barData = [];\n    for (var key in geoCoordMap) {\n        categoryData.push(key);\n        mapData[0].push({\n            year: '2014',\n            name: key,\n            value: d2014[key],\n        });\n        mapData[1].push({\n            year: '20154',\n            name: key,\n            value: d2015[key],\n        });\n        mapData[2].push({\n            year: '2016',\n            name: key,\n            value: d2016[key],\n        });\n        mapData[3].push({\n            year: '2017',\n            name: key,\n            value: d2017[key],\n        });\n        mapData[4].push({\n            year: '2018',\n            name: key,\n            value: d2018[key],\n        });\n    }\n\n    for (var i = 0; i < mapData.length; i++) {\n        barData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            barData[i].push(mapData[i][j].value);\n        }\n    }\n    $.getJSON(uploadedDataURL, function (geoJson) {\n        echarts.registerMap('china', geoJson);\n        var convertData = function (data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value),\n                    });\n                }\n            }\n            return res;\n        };\n\n        var convertToLineData = function (data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var dataItem = data[i];\n                var fromCoord = geoCoordMap[dataItem.name];\n                var toCoord = gps; //市区\n                if (fromCoord && toCoord) {\n                    res.push([\n                        {\n                            coord: fromCoord,\n                            value: dataItem.value,\n                        },\n                        {\n                            coord: toCoord,\n                        },\n                    ]);\n                }\n            }\n            return res;\n        };\n\n        let optionXyMap01 = {\n            timeline: {\n                data: voltageLevel,\n                axisType: 'category',\n                autoPlay: true,\n                playInterval: 3000,\n                left: '10%',\n                right: '10%',\n                bottom: '3%',\n                width: '80%',\n                //  height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff',\n                        },\n                    },\n                },\n                symbolSize: 10,\n                lineStyle: {\n                    color: '#555',\n                },\n                checkpointStyle: {\n                    borderColor: '#888',\n                    borderWidth: 2,\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666',\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa',\n                    },\n                },\n            },\n            baseOption: {\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '1%',\n                    top: '15%',\n                    bottom: '10%',\n                    width: '20%',\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: {\n                        // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)', //hover颜色\n                        },\n                    },\n                },\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887], //中心点\n                    label: {\n                        emphasis: {\n                            show: false,\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.5,\n                                colorStops: [\n                                    {\n                                        offset: 0,\n                                        color: 'rgba(147, 235, 248, 0)', // 0% 处的颜色\n                                    },\n                                    {\n                                        offset: 1,\n                                        color: 'rgba(147, 235, 248, .2)', // 100% 处的颜色\n                                    },\n                                ],\n                                globalCoord: false, // 缺省为 false\n                            },\n                            // shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            // shadowOffsetX: -2,\n                            // shadowOffsetY: 2,\n                            // shadowBlur: 10\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0,\n                        },\n                    },\n                },\n            },\n            options: [],\n        };\n        for (var n = 0; n < voltageLevel.length; n++) {\n            optionXyMap01.options.push({\n             backgroundColor: '#142037',\n                \n                title: [\n                    {\n                         text: '2014-2018全国PM2.5浓度变化',\n                         subtext: '数据来源：国家统计年鉴',\n                        left: '15%',\n                        top: '7%',\n                        textStyle: {\n                            color: '#EEDD78',\n                            fontSize: 30,\n                        },\n                    },\n                    {\n                        id: 'statistic',\n                        text: voltageLevel[n] + '年数据统计情况',\n                        left: '75%',\n                        top: '8%',\n                        textStyle: {\n                            color: '#EEDD78',\n                            fontSize: 20,\n                        },\n                    },\n                ],\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false,\n                    },\n                    axisLine: {\n                        show: false,\n                    },\n                    axisTick: {\n                        show: false,\n                    },\n                    axisLabel: {\n                        margin: 2,\n                        textStyle: {\n                            color: '#aaa',\n                        },\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    //  name: 'TOP 20',\n                    nameGap: 16,\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    data: categoryData,\n                },\n                series: [\n                    {\n                        //文字和标志\n                        name: 'light',\n                        type: 'scatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(mapData[n]),\n                        symbolSize: function (val) {\n                            return (val[2]) / 12;\n                        },\n                        // label: {\n                        //     normal: {\n                        //         formatter: '{b}',\n                        //         position: 'right',\n                        //         show: true\n                        //     },\n                        //     emphasis: {\n                        //         show: true\n                        //     }\n                        // },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                            },\n                        },\n                    },\n                    {\n                        type: 'map',\n                        map: 'china',\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: false, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: false,\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff',\n                                },\n                            },\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7',\n                            },\n                        },\n                        animation: false,\n                        data: mapData,\n                    },\n                    {\n                        //  name: 'Top 10',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(\n                            mapData[n]\n                                .sort(function (a, b) {\n                                    return b.value - a.value;\n                                })\n                                .slice(0, 20)\n                        ),\n                        symbolSize: function (val) {\n                            return (val[2]) / 2;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke',\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true,\n                            },\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                                shadowBlur: 5,\n                                shadowColor: colors[colorIndex][n],\n                            },\n                        },\n                        zlevel: 1,\n                    },\n                    \n                    {\n                        zlevel: 1.5,\n                        type: 'bar',\n                        symbol: 'none',\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                            },\n                        },\n                        data: barData[n],\n                    },\n                ],\n            });\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});\n","html":"","externalScripts":"","updaterUID":"obd-ojDRbSjRgehsN9uh-nhuy7TqMsxJUEo","theme":"","layout":"","viewCount":0,"userName":"m***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xyhA_crvg9.png?v=1640524719949","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","series-scatter","timeline","title","tooltip"],"customTags":[],"updaterUserName":"m***1"}}