{"status":0,"data":{"cid":"x3CySHqYMC","authorUid":"bd-3721987274","authorUserName":"者***_","title":"示例 formatter","description":"异步自定义渲染 tooltip\nencode/dimensions 的使用\nX轴 value","latestVersion":6,"alwaysLatest":0,"createTime":"2021-08-23T11:42:14.000Z","lastUpdateTime":"2021-12-30T06:55:14.000Z","auth":2,"uid":"bd-3721987274","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"5.1.2","versionCreateTime":"2021-12-30T06:55:14.000Z","code":"option = {\n    // backgroundColor: '#143151',\n    tooltip: {\n        trigger: 'axis',\n        // triggerOn: 'click',\n        formatter: function (params, ticket, callback) {\n            // 关于 encode  dimensions formatter\n            // https://echarts.apache.org/zh/option.html#tooltip.formatter\n            console.log('params:', params);\n\n            let item = params[0];\n            const distance = item.axisValue; // trigger 为 x 轴\n\n            const items = params\n                .map((item) => {\n                    const { encode, value } = item;\n                    const { marker, seriesName } = item;\n                    const x = value[encode['x'][0]]; // x 轴\n                    const y = value[encode['y'][0]]; // y 轴\n                    const unit = value[encode['unit'][0]]; // 自定义的数据纬度\n                    return `${marker} ${seriesName}: ${y} ${unit}`;\n                })\n                .join('<br/>');\n\n            setTimeout(function () {\n                callback(\n                    ticket,\n                    `\n        <div> \n        <div style=\"border-bottom:1px solid #000\">附近500米的建筑</div>\n        <div> 汽修厂 (300m)</div>\n        <div> 新新加油站 (230m)</div>\n        <div> 新新快餐店 (93m)</div>\n        <div style=\"border-bottom:1px solid #000\">附近 ${distance}</div>\n        ${items}\n        </div>`\n                );\n            }, 400);\n\n            return 'loading...';\n        },\n    },\n    toolbox: {\n        feature: {\n            dataView: { show: true, readOnly: false },\n            magicType: { show: true, type: ['line', 'bar'] },\n            restore: { show: true },\n            saveAsImage: { show: true },\n        },\n    },\n    dataZoom: [\n        {\n            //缩进的数据展示条\n            type: 'inside',\n        },\n        {\n            type: 'slider', //显示拖拽功能\n        },\n    ],\n\n    legend: {\n        icon: 'rect',\n\n        // data: [ '湿度', '温度'],\n    },\n    grid: {\n        left: '30px',\n        right: '30px',\n        bottom: '50px',\n        containLabel: true,\n    },\n    xAxis: [\n        {\n            splitLine: {\n                show: false,\n            },\n            type: 'value', // category\n            // data: [],\n        },\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            name: '浓度',\n            min: 0,\n            splitLine: {\n                show: false,\n            },\n        },\n    ],\n    series: [\n        {\n            name: '湿度',\n            type: 'line',\n\n            symbol: 'emptyCircle', //去掉折线图中的节点 emptyCircle none\n            smooth: false, // true 为平滑曲线，false 为直线\n\n            // dimensions 起别名, 可以在 encode 用, 可能还有其他地方可以使用\n            dimensions: ['distanceX', 'valueY', 'unit', 'time'],\n            encode: {\n                x: 'distanceX', // 默认 x轴\n                y: 'valueY', // 默认 y 轴\n                unit: 'unit', // 单位 自定义的数据, 可用于 formatter\n                time: 'time',\n                tooltip: ['distanceX', 'valueY', 'unit', 'time'],\n            },\n            data: [\n                [11.93, '0.49812', 'ppb', '2021-08-23 13:57:40'],\n                [20.89, '0.41282', 'ppb', '2021-08-23 13:57:44'],\n                [47.21, '0.42099', 'ppb', '2021-08-23 13:57:48'],\n                [71.711, '0.44438', 'ppb', '2021-08-23 13:57:52'],\n                [97.45, '0.35489', 'ppb', '2021-08-23 13:57:56'],\n                [126.5, '0.34146', 'ppb', '2021-08-23 13:58:00'],\n                [156.52, '0.42245', 'ppb', '2021-08-23 13:58:04'],\n                [187.14, '0.46058', 'ppb', '2021-08-23 13:58:08'],\n                [217.21, '0.35178', 'ppb', '2021-08-23 13:58:12'],\n                [250.2, '0.35178', 'ppb', '2021-08-23 13:58:16'],\n                [275.41, '0.46936', 'ppb', '2021-08-23 13:58:20'],\n                [309.41, '0.43397', 'ppb', '2021-08-23 13:58:24'],\n                [343.41, '0.39296', 'ppb', '2021-08-23 13:58:28'],\n                [376.75, '0.46826', 'ppb', '2021-08-23 13:58:32'],\n                [410.47, '0.48687', 'ppb', '2021-08-23 13:58:36'],\n                [444.71, '0.48543', 'ppb', '2021-08-23 13:58:40'],\n                [481.34, '0.41846', 'ppb', '2021-08-23 13:58:44'],\n                [505.51, '0.41846', 'ppb', '2021-08-23 13:58:48'],\n                [533.19, '0.40011', 'ppb', '2021-08-23 13:58:52'],\n                [564.17, '0.46921', 'ppb', '2021-08-23 13:58:56'],\n                [597.42, '0.44236', 'ppb', '2021-08-23 13:59:00'],\n                [631.52, '0.42375', 'ppb', '2021-08-23 13:59:04'],\n                [669.38, '0.41315', 'ppb', '2021-08-23 13:59:08'],\n                [709.65, '0.49766', 'ppb', '2021-08-23 13:59:12'],\n                [753.79, '0.47759', 'ppb', '2021-08-23 13:59:16'],\n                [800.09, '0.47759', 'ppb', '2021-08-23 13:59:20'],\n                [847.25, '0.39755', 'ppb', '2021-08-23 13:59:24'],\n                [894.42, '0.42359', 'ppb', '2021-08-23 13:59:28'],\n                [929.13, '0.41451', 'ppb', '2021-08-23 13:59:32'],\n                [975.42, '0.39718', 'ppb', '2021-08-23 13:59:36'],\n                [1030.34, '0.40200', 'ppb', '2021-08-23 13:59:40'],\n            ], // [x,y] 分别对应x和y轴上的坐标，可以自定义位置。而第一种只能按照已有的x坐标顺序排序\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-3721987274","theme":"","layout":"","viewCount":0,"userName":"者***_","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3CySHqYMC.png?v=1629718934277","isCustomThumbnail":1,"builtinTags":["category-work","dataZoom","grid","legend","series-line","toolbox","tooltip"],"customTags":[],"updaterUserName":"者***_"}}