{"status":0,"data":{"cid":"x1pDqJ0Yg6","authorUid":"bd-3389873116","authorUserName":"鳯***","title":"船舶作业情况","description":"淡蓝色-等待作业；黄色-作业中；绿色-完成作业；红色-逾期未完成；\n如果想要嵌套背景图，只需要将geo->show设置为false；红色点在船舶逾期数量大于0的情况下才会显示闪动，否则隐藏","latestVersion":1,"alwaysLatest":1,"createTime":"2019-07-09T04:08:03.000Z","lastUpdateTime":"2019-07-09T04:08:03.000Z","auth":2,"uid":"bd-3389873116","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-09T04:08:03.000Z","code":"// 坐标数据\r\nvar geoCoordMap = {\r\n    \r\n    '港区1-作业中':[102.95,36.27],\r\n    '港区1-等待作业':[100.95,36.27],\r\n    '港区1-已完成':[100.95,34.27],\r\n    '港区1-逾期':[102.95,34.27],\r\n    \r\n\t'港区2-等待作业':[120.78,32.04],\r\n\t'港区2-作业中':[122.78,32.04],\r\n    '港区2-已完成':[120.78,30.04],\r\n    '港区2-逾期':[122.78,30.04]\r\n};\r\n\r\n// 分组数据\r\nvar data = [\r\n     // 等待中\r\n     {name: '港区1-等待作业', value: [0,111]},\r\n     {name: '港区2-等待作业', value: [0,89]},\r\n     \r\n     // 作业中\r\n     {name: '港区1-作业中', value: [1,42]},\r\n     {name: '港区2-作业中', value: [1,22]},\r\n\r\n     \r\n     // 已完成\r\n     {name: '港区1-已完成', value: [2,86]},\r\n     {name: '港区2-已完成', value: [2,34]}\r\n     \r\n \r\n];\r\n\r\n// 逾期数据\r\nvar overduedata = [\r\n     // 逾期作业\r\n     {name: '港区1-逾期', value: [3,11]},\r\n     {name: '港区2-逾期', value: [3,110]}\r\n];\r\n\r\n// 地图打点\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name, // 城市名称\r\n                value: geoCoord.concat(data[i].value[0]) // 坐标\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    title: {\r\n        text: '船舶作业情况',\r\n        subtext: '淡蓝色-等待作业；黄色-作业中；绿色-完成作业；红色-逾期未完成；',\r\n        sublink: 'http://www.alipay.com', // 单击跳转\r\n        left: 'left',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    tooltip: { // 鼠标悬浮闪点图的数据填充,作者：fzhang\r\n        trigger: 'item',\r\n        formatter: function(params) {\r\n            var toolTiphtml = '';\r\n            \r\n            for (var i = 0; i < data.length; i++) {\r\n                if (params.name == data[i].name) {\r\n                    toolTiphtml += data[i].name + ':<br>'\r\n                    toolTiphtml += data[i].value[1]\r\n                }\r\n            }\r\n            for (var j = 0; j < overduedata.length; j++) {\r\n                if (params.name == overduedata[j].name) {\r\n                    toolTiphtml += overduedata[j].name + ':<br>'\r\n                    toolTiphtml += overduedata[j].value[1]\r\n                }\r\n            }\r\n\r\n            return toolTiphtml;\r\n        }\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        y: 'bottom',\r\n        x: 'right',\r\n        data: ['pm2.5'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    visualMap: { //图例值控制\r\n        min: 0,\r\n        max: 3,\r\n        calculable: true,\r\n        color: ['#ff3333', 'orange', 'yellow', 'lime', 'aqua'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n\r\n    geo: {\r\n        map: 'china',\r\n        show: true, // false为隐藏中国地图\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true, // 是否可以伸缩\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#111'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n            name: '散点：',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbolSize: function(val) {\r\n                // return val[2] * 4 + 6 ; // 闪点图的size\r\n                return 15;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'bottom',\r\n                    show: true // 是否显示地名\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#f4e925',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#333'\r\n                }\r\n            },\r\n            zlevel: 4\r\n        },\r\n        {\r\n            name: '船舶作业逾期情况：',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(overduedata),\r\n            symbolSize: function(val,params) {\r\n                var size = 15;\r\n                for (var i = 0; i < overduedata.length; i++) {\r\n                    if (params.name == overduedata[i].name) {\r\n                        if(overduedata[i].value[1] == 0){\r\n                            size = 0;\r\n                        }\r\n                    }\r\n                }\r\n                return size; // 闪点图的size\r\n            },\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                period: 1, //动画时间，值越小速度越快\r\n                brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n                scale: 3 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'bottom',\r\n                    show: true // 是否显示地名\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#f4e925',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#333'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        }\r\n    ]\r\n};\r\n\r\n","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-3389873116","theme":"","layout":"","viewCount":539,"userName":"鳯***","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1pDqJ0Yg6.png?v=1562645284032","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"鳯***"}}