{"status":0,"data":{"cid":"xgDoKklati","authorUid":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","authorUserName":"安***听","title":"象形图+叠积图+markPoint","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-12-03T07:14:18.000Z","lastUpdateTime":"2021-12-03T07:14:58.000Z","auth":2,"uid":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-03T07:14:58.000Z","code":"const barData = {\n  xaxis: ['2015', '2016', '2017', '2018', '2019'],\n  series: [\n    {\n      data: [10, 10, 20, 20, 20],\n    },\n    {\n      data: [438, 483.3, 532, 603.55, 740.2],\n    },\n  ],\n  legend: ['第三产业', 'GDP总值'],\n  unit: '亿元',\n  legendShow: true,\n  colorArr: [\n    {\n      start: '#0076FF',\n      end: 'rgba(40,203,252,0.00)',\n    },\n    {\n      start: 'rgba(124,225,255,0.8)',\n      end: 'rgba(40,203,252,0)',\n    },\n  ],\n  xLabelWidth: 135,\n  xLabelheight: 48,\n  xLabelBg:\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAADCAYAAAAp+adOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAOaADAAQAAAABAAAAAwAAAABcACqHAAAAKElEQVQoFWOc/ez/fwYoSJViZISxkcVhYoOdxuV+psHucGq4b0R4EgAU2guFUrWCeQAAAABJRU5ErkJggg==',\n  grid: {\n    left: '100px',\n    top: '96px',\n    right: '70px',\n    bottom: '65px',\n    containLabel: false,\n  },\n  namePadding: [0, 10, 10, 0],\n};\nlet normalColor = 'rgba(236,248,255,0.70)';\nlet gdpData = [];\nlet barBg = [];\nlet seriesData = barData.series.map((item, index) => {\n  if (index % 2 === 1) {\n    barBg.push({\n      type: 'pictorialBar',\n      itemStyle: {\n        normal: {\n          opacity: 0.6,\n        },\n      },\n      barGap: '-74%',\n      symbolRepeat: 'fixed', //使图形元素重复\n      symbolSize: [45, 3],\n      symbolMargin: 1,\n      symbol: `image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAADCAYAAAAHvIbcAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALaADAAQAAAABAAAAAwAAAAA4WZQ1AAAAIUlEQVQoFWPkcA77zwAFP/auYoSxB7M4E8yRQ4keko4GAN3cHaadNxSoAAAAAElFTkSuQmCC`,\n      data: barData.series[0] && barData.series[0].data,\n    });\n    gdpData[index] =\n      barData.series[index] &&\n      barData.series[index].data.map((item2, index2) => {\n        return Math.abs(item2 - barData.series[index - 1].data[index2]);\n      });\n  }\n  let markPoint = item.data.map((item, index) => {\n    return {\n      coord: [index, item],\n      symbolSize: [57, 3],\n      symbolOffset: [0, -5],\n      symbol:\n        'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAADCAYAAAAp+adOAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAOaADAAQAAAABAAAAAwAAAABcACqHAAAAKElEQVQoFWOc/ez/fwYoSJViZISxkcVhYoOdxuV+psHucGq4b0R4EgAU2guFUrWCeQAAAABJRU5ErkJggg==',\n    };\n  });\n  return {\n    name: barData.legend[index],\n    type: 'bar',\n    stack: barData.stack ? barData.stack[index] : 'bar',\n    data: index % 2 === 1 ? gdpData[index] : item.data,\n    barGap: '45%',\n    barWidth: '45px',\n    itemStyle: {\n      normal: {\n        color: {\n          type: 'linear',\n          x: 0,\n          y: 0,\n          x2: 0,\n          y2: 1,\n          colorStops: [\n            {\n              offset: 0,\n              color: barData.colorArr[index].start,\n            },\n            {\n              offset: 1,\n              color: barData.colorArr[index].end,\n            },\n          ],\n          globalCoord: false,\n        },\n      },\n    },\n    markPoint: {\n      data: markPoint,\n    },\n  };\n});\nseriesData = [...seriesData, ...barBg];\noption = {\n  backgroundColor: '#0A2E5D',\n  legend: {\n    show: barData.legendShow,\n    x: 'right',\n    y: 'top',\n    selectedMode: false,\n    icon: 'rect',\n    padding: [20, 0, 0, 0],\n    itemGap: 32,\n    itemWidth: 26,\n    itemHeight: 18,\n    textStyle: {\n      color: normalColor,\n      fontSize: 36,\n      fontFamily: 'PingFangSC-Regular',\n    },\n    textStyle: {\n      height: 30,\n      rich: {\n        a: {\n          color: normalColor,\n          fontSize: 36,\n          fontFamily: 'PingFangSC-Regular',\n        },\n      },\n    },\n    formatter: (name) => {\n      return '{a|' + name + ' ' + '}';\n    },\n    data: barData.legend,\n  },\n  grid: barData.grid,\n  tooltip: {\n    textStyle: {\n      fontSize: 48,\n    },\n    trigger: 'axis',\n    formatter: function (params) {\n      let str = '';\n      for (let i = 0; i < params.length - 1; i++) {\n        if ((!!params[i].value || params[i].value === 0) && params[i].seriesName !== '') {\n          let value;\n          if (i === params.length - 2) {\n            value = params[i].value + params[0].value;\n          } else [(value = params[i].value)];\n          str += params[i].seriesName + ': ' + value + barData.unit + '<br/>';\n        } else if (params[i].seriesName !== '') {\n          str += params[i].seriesName + ': ' + '无数据' + '<br/>';\n        }\n      }\n      return str;\n    },\n  },\n  xAxis: [\n    {\n      type: 'category',\n      data: barData.xaxis,\n      axisPointer: {\n        type: 'shadow',\n      },\n      axisLabel: {\n        interval: 0,\n        margin: 15,\n        formatter: (value) => {\n          return `{a|${value}}`;\n        },\n        width: barData.xLabelWidth,\n        height: barData.xLabelheight,\n        align: 'center',\n        backgroundColor: {\n          image: barData.xLabelBg,\n        },\n        rich: {\n          a: {\n            fontFamily: 'DINAlternate-Bold',\n            color: normalColor,\n            fontSize: 36,\n            lineHeight: 54,\n          },\n        },\n      },\n      axisLine: {\n        show: false,\n      },\n      axisTick: {\n        show: false,\n      },\n      splitLine: {\n        show: false,\n      },\n    },\n  ],\n  yAxis: [\n    {\n      type: 'value',\n      name: '',\n      splitNumber: 3,\n      nameTextStyle: {\n        fontFamily: 'PingFangSC-Regular',\n        color: normalColor,\n        fontSize: 36,\n        align: 'right',\n        padding: barData.namePadding,\n      },\n      axisLabel: {\n        showMinLabel: false,\n        formatter: '{value}',\n        align: 'right',\n        textStyle: {\n          fontFamily: 'PingFangSC-Regular',\n          color: normalColor,\n          fontSize: 36,\n        },\n      },\n      axisLine: {\n        show: false,\n      },\n      axisTick: {\n        show: false,\n      },\n      splitLine: {\n        show: barData.splitLineHide ? false : true,\n        lineStyle: {\n          type: 'dashed',\n          width: 3,\n          color: '#093D5D',\n        },\n      },\n    },\n  ],\n  series: seriesData,\n};\n","html":"","externalScripts":"","updaterUID":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","theme":"","layout":"","viewCount":0,"userName":"安***听","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgDoKklati.png?v=1638515698991","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markPoint","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"安***听"}}