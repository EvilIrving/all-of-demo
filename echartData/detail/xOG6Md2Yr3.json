{"status":0,"data":{"cid":"xOG6Md2Yr3","authorUid":"bd-995589324","authorUserName":"155******35","title":"海量数据点增量渲染","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-10-23T11:47:08.000Z","lastUpdateTime":"2018-10-23T11:47:08.000Z","auth":2,"uid":"bd-995589324","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-10-23T11:47:08.000Z","code":"var dataCount = 0;\nvar CHUNK_COUNT = 230;\n// https://blog.openstreetmap.org/2012/04/01/bulk-gps-point-data/\nfunction fetchData(idx) {\n    if (idx >= CHUNK_COUNT) {\n        return;\n    }\n    var dataURL = `data/asset/data/gps/gps_${idx}.bin`;\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', dataURL, true);\n    xhr.responseType = 'arraybuffer';\n\n    xhr.onload = function(e) {\n        var rawData = new Int32Array(this.response);\n        var data = new Float32Array(rawData.length);\n        var addedDataCount = rawData.length / 2;\n        for (var i = 0; i < rawData.length; i += 2) {\n            data[i] = rawData[i + 1] / 1e7;\n            data[i + 1] = rawData[i] / 1e7;\n        }\n\n        myChart.appendData({\n            seriesIndex: 0,\n            data: data\n        });\n\n        fetchData(idx + 1);\n    }\n\n    xhr.send();\n}\n\noption = {\n    backgroundColor: '#000',\n    title: {\n        show: false,\n    },\n    geo: {\n        map: 'china',\n        roam: false,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        silent: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#1F40BD' || '#323c48',\n                borderColor: '#111'\n            },\n            emphasis: {\n                areaColor: '#2a333d'\n            }\n        }\n    },\n    series: [{\n        name: '弱',\n        type: 'scatterGL',\n        progressive: 1e6,\n        coordinateSystem: 'geo',\n        symbolSize: 2,\n        zoomScale: 0.002,\n        blendMode: 'lighter',\n        large: true,\n        itemStyle: {\n            color: 'rgb(20, 15, 2)'\n        },\n        postEffect: {\n            enable: true\n        },\n        silent: true,\n        dimensions: ['lng', 'lat'],\n        data: new Float32Array()||new Float32Array([121.47370, 31.23039, 121.47370, 31.23039,\n            121.47370, 31.23039, 121.47370, 31.23039, 121.47370, 31.23039,\n            121.47370, 31.23039, 121.47370, 31.23039, 121.47370, 31.23039,\n            121.47370, 31.23039, 121.47370, 31.23039, 121.47370, 31.23039\n        ])\n    }]\n};\nconst startLng = 108.1539;\nconst endLng = 121.5405;\nconst startLat = 24.1306;\nconst endLat = 39.9042;\nfunction mockData() {\n    const ret = [];\n    for (let i = 0; i < 500; i += 2) {\n        const lat = (startLat + (Math.random() * (endLat - startLat))).toFixed(3);\n        const lng = (startLng + (Math.random() * (endLng - startLng))).toFixed(3);\n        ret[i] = Number(lng);\n        ret[i + 1] = Number(lat);\n    }\n    return ret;\n}\nsetInterval(() => {\n    const data = mockData();\n    myChart.appendData({\n        seriesIndex: 0,\n        data: data\n    });\n    console.log('interval');\n},2000);\nconsole.log(echarts);\n// fetchData(0);","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-995589324","theme":"","layout":"","viewCount":55,"userName":"155******35","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOG6Md2Yr3.png?v=1540295228544","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-scatterGL","title"],"customTags":[],"updaterUserName":"155******35"}}