{"status":0,"data":{"cid":"x3Xrtm3PxL","authorUid":"obd-o2SLHgGes6A9ulH8h3uOA4zBiTn2I61","authorUserName":"月***惆","title":"温度湿度风速","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-11T08:23:28.000Z","lastUpdateTime":"2020-07-11T08:23:28.000Z","auth":2,"uid":"obd-o2SLHgGes6A9ulH8h3uOA4zBiTn2I61","publishedVersion":1,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-11T08:23:28.000Z","code":"var TP_value = 40;\r\nvar kd = [];\r\nvar Gradient = [];\r\nvar leftColor = '';\r\nvar showValue = '';\r\nvar boxPosition = [65, 0];\r\nvar TP_txt = ''\r\n// 刻度使用柱状图模拟，短设置1，长的设置3；构造一个数据\r\nfor (var i = 0, len = 135; i <= len; i++) {\r\n    if (i < 10 || i > 130) {\r\n        kd.push('')\r\n    } else {\r\n        if ((i - 10) % 20 === 0) {\r\n            kd.push('-3');\r\n        } else if ((i - 10) % 4 === 0) {\r\n            kd.push('-1');\r\n        } else {\r\n            kd.push('');\r\n        }\r\n    }\r\n}\r\n//中间线的渐变色和文本内容\r\nif (TP_value > 20) {\r\n    TP_txt = '温度偏高';\r\n    Gradient.push({\r\n        offset: 0,\r\n        color: '#93FE94'\r\n    }, {\r\n        offset: 0.5,\r\n        color: '#E4D225'\r\n    }, {\r\n        offset: 1,\r\n        color: '#E01F28'\r\n    })\r\n} else if (TP_value > -20) {\r\n    TP_txt = '温度正常';\r\n    Gradient.push({\r\n        offset: 0,\r\n        color: '#93FE94'\r\n    }, {\r\n        offset: 1,\r\n        color: '#E4D225'\r\n    })\r\n} else {\r\n    TP_txt = '温度偏低';\r\n    Gradient.push({\r\n        offset: 1,\r\n        color: '#93FE94'\r\n    })\r\n}\r\nif (TP_value > 62) {\r\n    showValue = 62\r\n} else {\r\n    if (TP_value < -60) {\r\n        showValue = -60\r\n    } else {\r\n        showValue = TP_value\r\n    }\r\n}\r\nif (TP_value < -10) {\r\n    boxPosition = [65, -120];\r\n}\r\nleftColor = Gradient[Gradient.length - 1].color;\r\n// 因为柱状初始化为0，温度存在负值，所以加上负值60和空出距离10\r\nvar option = {\r\n    backgroundColor: '#041521',\r\n    title: {\r\n        text: '温度计',\r\n        show: false\r\n    },\r\n    grid: {\r\n        left: '40',\r\n        right: '10',\r\n        bottom: '30',\r\n        top: '10',\r\n\r\n    },\r\n    yAxis: [{\r\n        show: false,\r\n\r\n        data: [],\r\n        min: 0,\r\n        max: 135,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n\r\n    }, {\r\n        show: false,\r\n        min: 0,\r\n        max: 50,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n    }, {\r\n        type: 'category',\r\n        data: ['', '', '', '', '', '', '', '', '', '', '', ''],\r\n        position: 'left',\r\n        offset: -80,\r\n        axisLabel: {\r\n            fontSize: 10,\r\n            color: 'white'\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n    }],\r\n    xAxis: [{\r\n        show: false,\r\n        min: -10,\r\n        max: 80,\r\n        data: [],\r\n        axisLine: {\r\n            show: false\r\n        }\r\n    }, {\r\n        show: false,\r\n        min: -10,\r\n        max: 80,\r\n        data: []\r\n    }, {\r\n        show: false,\r\n        min: -10,\r\n        max: 80,\r\n        data: []\r\n    }, {\r\n        show: false,\r\n        min: -5,\r\n        max: 80,\r\n\r\n    }],\r\n    series: [{\r\n        name: '条',\r\n        type: 'bar',\r\n        // 对应上面XAxis的第一个对)象配置\r\n        xAxisIndex: 0,\r\n        data: [{\r\n            value: (showValue + 70),\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: boxPosition,\r\n                    width: 80,\r\n                    height: 300,\r\n                    formatter: '{back| ' + TP_value + ' }{unit|°C}\\n{downTxt|' + TP_txt + '}',\r\n                    rich: {\r\n                        back: {\r\n                            align: 'center',\r\n                            lineHeight: 60,\r\n                            fontSize: 60,\r\n                            fontFamily: 'digifacewide',\r\n                            color: leftColor\r\n                        },\r\n                        unit: {\r\n                            fontFamily: '微软雅黑',\r\n                            fontSize: 30,\r\n                            lineHeight: 40,\r\n                            color: leftColor\r\n                        },\r\n                        downTxt: {\r\n                            lineHeight: 60,\r\n                            fontSize: 25,\r\n                            align: 'center',\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }],\r\n\r\n        barWidth: 6,\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 1, 0, 0, Gradient)\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白框',\r\n        type: 'bar',\r\n        xAxisIndex: 1,\r\n        barGap: '-100%',\r\n        data: [134],\r\n        barWidth: 7,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#0C2E6D',\r\n                barBorderRadius: 50,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外框',\r\n        type: 'bar',\r\n        xAxisIndex: 2,\r\n        barGap: '-100%',\r\n        data: [135],\r\n        barWidth: 13,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#4577BA',\r\n                barBorderRadius: 50,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 0,\r\n        symbolSize: 16,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#93FE94',\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 1,\r\n        symbolSize: 20,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#0C2E6D',\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 2,\r\n        symbolSize: 24,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#4577BA',\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '刻度',\r\n        type: 'bar',\r\n        yAxisIndex: 0,\r\n        xAxisIndex: 3,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'left',\r\n                distance: 10,\r\n                color: 'white',\r\n                fontSize: 14,\r\n                formatter: function(params) {\r\n                    if (params.dataIndex > 130 || params.dataIndex < 10) {\r\n                        return '';\r\n                    } else {\r\n                        if ((params.dataIndex - 10) % 20 === 0) {\r\n                            return params.dataIndex - 70;\r\n                        } else {\r\n                            return '';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        barGap: '-100%',\r\n        data: kd,\r\n        barWidth: 1,\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'white',\r\n                barBorderRadius: 120,\r\n            }\r\n        },\r\n        z: 0\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2SLHgGes6A9ulH8h3uOA4zBiTn2I61","theme":"","layout":"","viewCount":174,"userName":"月***惆","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3Xrtm3PxL.png?v=1594455808275","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter","title"],"customTags":[],"updaterUserName":"月***惆"}}