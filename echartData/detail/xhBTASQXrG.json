{"status":0,"data":{"cid":"xhBTASQXrG","authorUid":"bd-455828630","authorUserName":"s***f","title":"包含合计的多环图","description":"包含合计，自适应技术","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-01T12:19:00.000Z","lastUpdateTime":"2019-08-01T12:19:00.000Z","auth":2,"uid":"bd-455828630","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-01T12:19:00.000Z","code":"var data = [{\r\n        name: '装备制造',\r\n        val1: 80,\r\n        val2: 120\r\n    }, {\r\n        name: '现代材料',\r\n        val1: 44,\r\n        val2: 60\r\n    }, {\r\n        name: '新能源',\r\n        val1: 35,\r\n        val2: 60\r\n    }, {\r\n        name: '新一代信息技术',\r\n        val1: 30,\r\n        val2: 60\r\n    }, {\r\n        name: '商贸物流',\r\n        val1: 20,\r\n        val2: 60\r\n    },\r\n    {\r\n        name: '装备制造',\r\n        val1: 80,\r\n        val2: 280\r\n    }, {\r\n        name: '现代材料',\r\n        val1: 44,\r\n        val2: 60\r\n    }, {\r\n        name: '新能源',\r\n        val1: 35,\r\n        val2: 60\r\n    }, {\r\n        name: '新一代信息技术',\r\n        val1: 30,\r\n        val2: 60\r\n    }, {\r\n        name: '商贸物流',\r\n        val1: 20,\r\n        val2: 60\r\n    }\r\n]\r\nvar sumVal1 = 0;\r\nvar sumVal2 = 0;\r\nvar lineCount = 5;\r\nvar titleArr = [],\r\n    seriesArr = [];\r\nvar showMax = 9;\r\ncolors = ['#ff6633', '#6699cc'];\r\nvar rowPercent;\r\ndata.forEach(function(item, index) {\r\n    sumVal1 += item.val1;\r\n    sumVal2 += item.val2;\r\n    if (index >= showMax) {\r\n        return;\r\n    }\r\n    var val = Math.round(item.val1 / item.val2 * 100);\r\n    var rest = 100 - val;\r\n    rowPercent = Math.round(Math.ceil((index + 1) / lineCount) / (Math.ceil(data.length / lineCount) + 1) * 100);\r\n    var hFix = Math.ceil((index + 1) / lineCount) == 1 ? 26 : 38;\r\n    seriesArr.push({\r\n        name: item.name,\r\n        type: 'pie',\r\n        clockWise: false,\r\n        radius: [45, 70],\r\n        itemStyle: {\r\n            normal: {\r\n                color: colors[0],\r\n                shadowColor: colors[0],\r\n                shadowBlur: 0,\r\n                label: {\r\n                    show: false\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n            }\r\n        },\r\n        hoverAnimation: false,\r\n        center: [(index % lineCount) * 16 + hFix + '%', rowPercent + '%'],\r\n        data: [{\r\n            value: val\r\n        }, {\r\n            value: rest,\r\n            name: 'invisible',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: colors[1]\r\n                },\r\n                emphasis: {\r\n                    color: colors[1]\r\n                }\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: function(params) {\r\n\r\n                        return params.seriesName + \"\\n\" + params.value + '%';\r\n                    },\r\n                    position: 'center',\r\n                    show: true,\r\n                    textStyle: {\r\n                        fontSize: '20',\r\n                        fontWeight: 'bold',\r\n                        color: colors[1]\r\n                    }\r\n                }\r\n            }\r\n        }]\r\n    })\r\n});\r\n//All count \r\nseriesArr.push({\r\n    name: '合计',\r\n    type: 'pie',\r\n    clockWise: false,\r\n    radius: [55, 90],\r\n    itemStyle: {\r\n        normal: {\r\n            color: colors[0],\r\n            shadowColor: colors[0],\r\n            shadowBlur: 0,\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n            },\r\n        }\r\n    },\r\n    hoverAnimation: false,\r\n    center: [(0 % lineCount) * 16 + 18 + '%', (rowPercent - 3) + '%'],\r\n    data: [{\r\n        value: Math.round(sumVal1 / sumVal2 * 100)\r\n    }, {\r\n        value: Math.round((1 - sumVal1 / sumVal2) * 100),\r\n        name: 'invisible',\r\n        itemStyle: {\r\n            normal: {\r\n                color: colors[1]\r\n            },\r\n            emphasis: {\r\n                color: colors[1]\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                formatter: function(params) {\r\n                    return params.seriesName + \"\\n\" + params.value + '%';\r\n                },\r\n                position: 'center',\r\n                show: true,\r\n                textStyle: {\r\n                    fontSize: '20',\r\n                    fontWeight: 'bold',\r\n                    color: colors[1]\r\n                }\r\n            }\r\n        }\r\n    }]\r\n});\r\n\r\noption = {\r\n    backgroundColor: \"#fff\",\r\n    title: titleArr,\r\n    series: seriesArr\r\n}","html":"","externalScripts":"","updaterUID":"bd-455828630","theme":"","layout":"","viewCount":104,"userName":"s***f","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhBTASQXrG.png?v=1564661940262","isCustomThumbnail":0,"builtinTags":["category-work","series-pie"],"customTags":[],"updaterUserName":"s***f"}}