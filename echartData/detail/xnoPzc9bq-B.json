{"status":0,"data":{"cid":"xnoPzc9bq-B","authorUid":"bd-2920285523","authorUserName":"9***5","title":"计划","description":"单个图表，带事件触发，带范围框选","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-29T07:54:39.000Z","lastUpdateTime":"2020-12-29T07:54:39.000Z","auth":2,"uid":"bd-2920285523","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-29T15:15:00.000Z","code":"var fee_rule_color = 1; //鼠标点击，颜色\nvar mouseDown = 0; //鼠标按下:1,释放0\n\nvar startIndex = {}; //鼠标按下初始位置\nvar currentIndex = {}; //鼠标当前位置\nvar dataIndexArray = []; //鼠标选中的所有dataIndex（即：单个小矩形）\n\n\nvar minutes = [\"00\", \"15\", \"30\", \"45\"];\n\nvar data = [\n    [\n        [0, 0, 6],\n        [0, 1, 1],\n        [0, 2, 0],\n        [0, 3, 4],\n        [0, 4, 3],\n        [0, 5, 7],\n        [0, 6, 6],\n        [0, 7, 4],\n        [0, 8, 4],\n        [0, 9, 0],\n        [0, 10, 7],\n        [0, 11, 0],\n        [0, 12, 2],\n        [0, 13, 2],\n        [0, 14, 5],\n        [0, 15, 3],\n        [0, 16, 6],\n        [0, 17, 8],\n        [0, 18, 6],\n        [0, 19, 6],\n        [0, 20, 7],\n        [0, 21, 2],\n        [0, 22, 8],\n        [0, 23, 6],\n        [1, 0, 5],\n        [1, 1, 7],\n        [1, 2, 7],\n        [1, 3, 8],\n        [1, 4, 7],\n        [1, 5, 8],\n        [1, 6, 2],\n        [1, 7, 0],\n        [1, 8, 4],\n        [1, 9, 6],\n        [1, 10, 6],\n        [1, 11, 6],\n        [1, 12, 7],\n        [1, 13, 1],\n        [1, 14, 4],\n        [1, 15, 2],\n        [1, 16, 5],\n        [1, 17, 7],\n        [1, 18, 3],\n        [1, 19, 3],\n        [1, 20, 5],\n        [1, 21, 5],\n        [1, 22, 6],\n        [1, 23, 8],\n        [2, 0, 1],\n        [2, 1, 6],\n        [2, 2, 4],\n        [2, 3, 4],\n        [2, 4, 4],\n        [2, 5, 6],\n        [2, 6, 2],\n        [2, 7, 1],\n        [2, 8, 4],\n        [2, 9, 0],\n        [2, 10, 4],\n        [2, 11, 2],\n        [2, 12, 4],\n        [2, 13, 2],\n        [2, 14, 3],\n        [2, 15, 6],\n        [2, 16, 1],\n        [2, 17, 3],\n        [2, 18, 7],\n        [2, 19, 6],\n        [2, 20, 0],\n        [2, 21, 6],\n        [2, 22, 3],\n        [2, 23, 1],\n        [3, 0, 1],\n        [3, 1, 1],\n        [3, 2, 6],\n        [3, 3, 6],\n        [3, 4, 2],\n        [3, 5, 8],\n        [3, 6, 3],\n        [3, 7, 2],\n        [3, 8, 2],\n        [3, 9, 6],\n        [3, 10, 0],\n        [3, 11, 5],\n        [3, 12, 1],\n        [3, 13, 6],\n        [3, 14, 2],\n        [3, 15, 4],\n        [3, 16, 1],\n        [3, 17, 2],\n        [3, 18, 5],\n        [3, 19, 3],\n        [3, 20, 0],\n        [3, 21, 4],\n        [3, 22, 6],\n        [3, 23, 7]\n    ],\n    [\n        [0, 0, 6],\n        [0, 1, 1],\n        [0, 2, 0],\n        [0, 3, 4],\n        [0, 4, 3],\n        [0, 5, 7],\n        [0, 6, 6],\n        [0, 7, 4],\n        [0, 8, 4],\n        [0, 9, 0],\n        [0, 10, 7],\n        [0, 11, 0],\n        [0, 12, 2],\n        [0, 13, 2],\n        [0, 14, 5],\n        [0, 15, 3],\n        [0, 16, 6],\n        [0, 17, 8],\n        [0, 18, 6],\n        [0, 19, 6],\n        [0, 20, 7],\n        [0, 21, 2],\n        [0, 22, 8],\n        [0, 23, 6],\n        [1, 0, 5],\n        [1, 1, 7],\n        [1, 2, 7],\n        [1, 3, 8],\n        [1, 4, 7],\n        [1, 5, 8],\n        [1, 6, 2],\n        [1, 7, 0],\n        [1, 8, 4],\n        [1, 9, 6],\n        [1, 10, 6],\n        [1, 11, 6],\n        [1, 12, 7],\n        [1, 13, 1],\n        [1, 14, 4],\n        [1, 15, 2],\n        [1, 16, 5],\n        [1, 17, 7],\n        [1, 18, 3],\n        [1, 19, 3],\n        [1, 20, 5],\n        [1, 21, 5],\n        [1, 22, 6],\n        [1, 23, 8],\n        [2, 0, 1],\n        [2, 1, 6],\n        [2, 2, 4],\n        [2, 3, 4],\n        [2, 4, 4],\n        [2, 5, 6],\n        [2, 6, 2],\n        [2, 7, 1],\n        [2, 8, 4],\n        [2, 9, 0],\n        [2, 10, 4],\n        [2, 11, 2],\n        [2, 12, 4],\n        [2, 13, 2],\n        [2, 14, 3],\n        [2, 15, 6],\n        [2, 16, 1],\n        [2, 17, 3],\n        [2, 18, 7],\n        [2, 19, 6],\n        [2, 20, 0],\n        [2, 21, 6],\n        [2, 22, 3],\n        [2, 23, 1],\n        [3, 0, 1],\n        [3, 1, 1],\n        [3, 2, 6],\n        [3, 3, 6],\n        [3, 4, 2],\n        [3, 5, 8],\n        [3, 6, 3],\n        [3, 7, 2],\n        [3, 8, 2],\n        [3, 9, 6],\n        [3, 10, 0],\n        [3, 11, 5],\n        [3, 12, 1],\n        [3, 13, 6],\n        [3, 14, 2],\n        [3, 15, 4],\n        [3, 16, 1],\n        [3, 17, 2],\n        [3, 18, 5],\n        [3, 19, 3],\n        [3, 20, 0],\n        [3, 21, 4],\n        [3, 22, 6],\n        [3, 23, 7]\n    ],\n    [\n        [0, 0, 6],\n        [0, 1, 1],\n        [0, 2, 0],\n        [0, 3, 4],\n        [0, 4, 3],\n        [0, 5, 7],\n        [0, 6, 6],\n        [0, 7, 4],\n        [0, 8, 4],\n        [0, 9, 0],\n        [0, 10, 7],\n        [0, 11, 0],\n        [0, 12, 2],\n        [0, 13, 2],\n        [0, 14, 5],\n        [0, 15, 3],\n        [0, 16, 6],\n        [0, 17, 8],\n        [0, 18, 6],\n        [0, 19, 6],\n        [0, 20, 7],\n        [0, 21, 2],\n        [0, 22, 8],\n        [0, 23, 6],\n        [1, 0, 5],\n        [1, 1, 7],\n        [1, 2, 7],\n        [1, 3, 8],\n        [1, 4, 7],\n        [1, 5, 8],\n        [1, 6, 2],\n        [1, 7, 0],\n        [1, 8, 4],\n        [1, 9, 6],\n        [1, 10, 6],\n        [1, 11, 6],\n        [1, 12, 7],\n        [1, 13, 1],\n        [1, 14, 4],\n        [1, 15, 2],\n        [1, 16, 5],\n        [1, 17, 7],\n        [1, 18, 3],\n        [1, 19, 3],\n        [1, 20, 5],\n        [1, 21, 5],\n        [1, 22, 6],\n        [1, 23, 8],\n        [2, 0, 1],\n        [2, 1, 6],\n        [2, 2, 4],\n        [2, 3, 4],\n        [2, 4, 4],\n        [2, 5, 6],\n        [2, 6, 2],\n        [2, 7, 1],\n        [2, 8, 4],\n        [2, 9, 0],\n        [2, 10, 4],\n        [2, 11, 2],\n        [2, 12, 4],\n        [2, 13, 2],\n        [2, 14, 3],\n        [2, 15, 6],\n        [2, 16, 1],\n        [2, 17, 3],\n        [2, 18, 7],\n        [2, 19, 6],\n        [2, 20, 0],\n        [2, 21, 6],\n        [2, 22, 3],\n        [2, 23, 1],\n        [3, 0, 1],\n        [3, 1, 1],\n        [3, 2, 6],\n        [3, 3, 6],\n        [3, 4, 2],\n        [3, 5, 8],\n        [3, 6, 3],\n        [3, 7, 2],\n        [3, 8, 2],\n        [3, 9, 6],\n        [3, 10, 0],\n        [3, 11, 5],\n        [3, 12, 1],\n        [3, 13, 6],\n        [3, 14, 2],\n        [3, 15, 4],\n        [3, 16, 1],\n        [3, 17, 2],\n        [3, 18, 5],\n        [3, 19, 3],\n        [3, 20, 0],\n        [3, 21, 4],\n        [3, 22, 6],\n        [3, 23, 7]\n    ],\n];\n\nfunction Compare(data, i, j) {\n    return data.findIndex(x => {\n        return x[0] === i && x[1] === j;\n    });\n}\n\n//计算鼠标覆盖位置所有点位（二维数组）\nfunction CalcMouseOver(data, start, end) {\n    let result = [];\n    let [sx, sy] = start;\n    let [ex, ey] = end;\n    if ((ex - sx >= 0) && (ey - sy >= 0)) {\n        // [0,0]~[2,2]左上角到右下角\n        for (let i = sx; i <= ex; i++) {\n            for (let j = sy; j <= ey; j++) {\n                result.push(Compare(data, i, j));\n            }\n        }\n    } else if (ex - sx < 0 && ey - sy >= 0) {\n        // [2,0]~[0,2]左下角到右上角\n        for (let i = ex; i <= sx; i++) {\n            for (let j = sy; j <= ey; j++) {\n                result.push(Compare(data, i, j));\n                // result.push(data.findIndex(x => x[0] == i && x[1] == j))\n            }\n        }\n    } else if (ex - sx >= 0 && ey - sy < 0) {\n        // [0,2]~[2,0]右上角到左下角\n        for (let i = sx; i <= ex; i++) {\n            for (let j = ey; j <= sy; j++) {\n                result.push(Compare(data, i, j));\n                // result.push(data.findIndex(x => x[0] == i && x[1] == j))\n            }\n        }\n    } else {\n        // [2,2]~[0,0]右下角到左上角\n        for (let i = ex; i <= sx; i++) {\n            for (let j = ey; j <= sy; j++) {\n                result.push(Compare(data, i, j));\n                // result.push(data.findIndex(x => x[0] === i && x[1] === j))\n            }\n        }\n    }\n    return result;\n}\n\n//判断鼠标向右还是向左框选\nfunction LeftOrRight(current, start, planData) {\n    let selectZoneXY = [];\n    if (current.zone < start.zone) {\n        let zoneNum = start.zone - current.zone;\n        for (let i = 0; i <= zoneNum; i++) {\n            if (i === 0) {\n                //第一个区域的起止点;\n                let startXY_1 = [start.x, start.y];\n                let startXY_2 = [0, current.y];\n                let startXY = CalcMouseOver(planData[start.zone], startXY_1, startXY_2);\n                selectZoneXY.push({\n                    zone: start.zone,\n                    index: startXY\n                });\n            } else if (i > 0 && i < zoneNum) { //TODO:中间点\n                let middleXY_1 = [minutes.length - 1, start.y];\n                let middleXY_2 = [0, current.y];\n                let middleXY = CalcMouseOver(planData[start.zone - i], middleXY_1, middleXY_2);\n                selectZoneXY.push({\n                    zone: start.zone - i,\n                    index: middleXY\n                });\n            } else {\n                let endXY_1 = [minutes.length - 1, start.y];\n                let endXY_2 = [current.x, current.y];\n                let endXY = CalcMouseOver(planData[current.zone], endXY_1, endXY_2);\n                selectZoneXY.push({\n                    zone: current.zone,\n                    index: endXY\n                });\n            }\n        }\n        // console.log('end:' + JSON.stringify(selectZoneXY))\n        // console.log('right->left')\n    } else if (current.zone > start.zone) {\n        let zoneNum = current.zone - start.zone;\n        for (let i = 0; i <= zoneNum; i++) {\n            if (i === 0) {\n                //第一个区域的起止点\n                let startXY_1 = [start.x, start.y];\n                let startXY_2 = [minutes.length - 1, current.y];\n                let startXY = CalcMouseOver(planData[start.zone], startXY_1, startXY_2);\n                selectZoneXY.push({\n                    zone: start.zone,\n                    index: startXY\n                });\n            } else if (i > 0 && i < zoneNum) { //TODO:中间点\n                let middleXY_1 = [0, start.y];\n                let middleXY_2 = [minutes.length - 1, current.y];\n                let middleXY = CalcMouseOver(planData[start.zone + i], middleXY_1, middleXY_2);\n                selectZoneXY.push({\n                    zone: start.zone + i,\n                    index: middleXY\n                });\n            } else {\n                let endXY_1 = [0, start.y];\n                let endXY_2 = [current.x, current.y];\n                let endXY = CalcMouseOver(planData[current.zone], endXY_1, endXY_2);\n                selectZoneXY.push({\n                    zone: current.zone,\n                    index: endXY\n                });\n            }\n        }\n        // console.log('end:' + JSON.stringify(selectZoneXY))\n        // console.log('left->right')\n    } else {\n        let XY_1 = [start.x, start.y];\n        let XY_2 = [current.x, current.y];\n        let XY = CalcMouseOver(planData[current.zone], XY_1, XY_2);\n        selectZoneXY.push({\n            zone: current.zone,\n            index: XY\n        });\n        // console.log('end:' + JSON.stringify(selectZoneXY))\n        // console.log('no zone')\n    }\n    return selectZoneXY;\n}\n\n\noption = {\n    \"title\": {\n        \"text\": \"计划\"\n    },\n    \"tooltip\": {\n        \"position\": \"top\",\n    },\n    \"animation\": false,\n    \"grid\": [{ //布局\n        \"left\": \"50\",\n        'width': '220',\n        \"top\": \"50\",\n        \"bottom\": \"20\",\n        \"containLabel\": true\n    }, {\n        \"left\": \"290\",\n        'width': '220',\n        \"top\": \"50\",\n        \"bottom\": \"20\",\n        \"containLabel\": true\n    }, {\n        \"left\": \"520\",\n        'width': '220',\n        \"top\": \"50\",\n        \"bottom\": \"20\",\n        \"containLabel\": true\n    }],\n    \"xAxis\": [{ //x轴(横)\n        \"gridIndex\": 0,\n        \"offset\": 0,\n        \"position\": \"top\",\n        \"type\": \"category\",\n        \"data\": minutes,\n        \"nameLocation\": \"center\",\n        \"nameTextStyle\": {\n            \"fontWeight\": \"bold\",\n            \"fontSize\": \"16\",\n            \"padding\": [3, 4, 15, 6],\n            \"color\": \"#606060\"\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }, {\n        \"gridIndex\": 1,\n        \"offset\": 1,\n        \"position\": \"top\",\n        \"type\": \"category\",\n        \"data\": minutes,\n        \"nameLocation\": \"center\",\n        \"nameTextStyle\": {\n            \"fontWeight\": \"bold\",\n            \"fontSize\": \"16\",\n            \"padding\": [3, 4, 15, 6],\n            \"color\": \"#606060\"\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }, {\n        \"gridIndex\":2,\n        \"offset\":2,\n        \"position\": \"top\",\n        \"type\": \"category\",\n        \"data\": minutes,\n        \"nameLocation\": \"center\",\n        \"nameTextStyle\": {\n            \"fontWeight\": \"bold\",\n            \"fontSize\": \"16\",\n            \"padding\": [3, 4, 15, 6],\n            \"color\": \"#606060\"\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }],\n    \"yAxis\": [{ //Y轴(纵)\n        \"type\": \"category\",\n        \"gridIndex\": 0,\n        \"data\": [\"23:00\", \"22:00\", \"21:00\", \"20:00\", \"19:00\", \"18:00\", \"17:00\", \"16:00\", \"15:00\", \"14:00\", \"13:00\", \"12:00\", \"11:00\", \"10:00\", \"09:00\", \"08:00\", \"07:00\", \"06:00\", \"05:00\", \"04:00\", \"03:00\", \"02:00\", \"01:00\", \"00:00\"],\n        \"axisLine\": {\n            \"lineStyle\": {\n                \"color\": \"#000\"\n            }\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }, {\n        \"type\": \"category\",\n        \"gridIndex\": 1,\n        \"data\": [\"23:00\", \"22:00\", \"21:00\", \"20:00\", \"19:00\", \"18:00\", \"17:00\", \"16:00\", \"15:00\", \"14:00\", \"13:00\", \"12:00\", \"11:00\", \"10:00\", \"09:00\", \"08:00\", \"07:00\", \"06:00\", \"05:00\", \"04:00\", \"03:00\", \"02:00\", \"01:00\", \"00:00\"],\n        \"axisLine\": {\n            \"lineStyle\": {\n                \"color\": \"#000\"\n            }\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }, {\n        \"type\": \"category\",\n        \"gridIndex\": 2,\n        \"data\": [\"23:00\", \"22:00\", \"21:00\", \"20:00\", \"19:00\", \"18:00\", \"17:00\", \"16:00\", \"15:00\", \"14:00\", \"13:00\", \"12:00\", \"11:00\", \"10:00\", \"09:00\", \"08:00\", \"07:00\", \"06:00\", \"05:00\", \"04:00\", \"03:00\", \"02:00\", \"01:00\", \"00:00\"],\n        \"axisLine\": {\n            \"lineStyle\": {\n                \"color\": \"#000\"\n            }\n        },\n        \"axisLabel\": {\n            \"interval\": 0,\n            \"rotate\": 0\n        },\n        \"splitArea\": {\n            \"show\": true\n        }\n    }],\n    \"visualMap\": { //右上角可视化图标\n        \"show\": true,\n        \"right\": 0,\n        \"top\": 10,\n        \"align\": \"left\",\n        \"pieces\": [{\n            \"value\": 0,\n            \"label\": \"费率0\",\n            \"color\": \"#c1232b\"\n        }, {\n            \"value\": 1,\n            \"label\": \"费率1\",\n            \"color\": \"#27727b\"\n        }, {\n            \"value\": 2,\n            \"label\": \"费率2\",\n            \"color\": \"#e87c25\"\n        }, {\n            \"value\": 3,\n            \"label\": \"费率3\",\n            \"color\": \"#b5c334\"\n        }, {\n            \"value\": 4,\n            \"label\": \"费率4\",\n            \"color\": \"#fe8463\"\n        }, {\n            \"value\": 5,\n            \"label\": \"费率5\",\n            \"color\": \"#9bca63\"\n        }, {\n            \"value\": 6,\n            \"label\": \"费率6\",\n            \"color\": \"#fad860\"\n        }, {\n            \"value\": 7,\n            \"label\": \"费率7\",\n            \"color\": \"#f3a43b\"\n        }, {\n            \"value\": 8,\n            \"label\": \"费率8\",\n            \"color\": \"#60c0dd\"\n        }, {\n            \"value\": 9,\n            \"label\": \"费率9\",\n            \"color\": \"#d7504b\"\n        }]\n    },\n    \"series\": [{ //具体数据,数据样式\n        \"name\": \"星期一\",\n        \"type\": \"heatmap\",\n        \"data\": data[0],\n        \"label\": {\n            \"normal\": {\n                \"show\": false\n            }\n        },\n        \"gridIndex\": 0,\n        \"xAxisIndex\": 0,\n        \"yAxisIndex\": 0,\n        \"itemStyle\": {\n            \"emphasis\": {\n                \"shadowBlur\": 5,\n                \"borderWidth\": 2,\n                \"borderColor\": \"white\",\n            },\n            \"borderWidth\": 0.5,\n            \"borderType\": \"solid\",\n            \"borderColor\": \"#ffffff\"\n        }\n    }, {\n        \"name\": \"星期二\",\n        \"type\": \"heatmap\",\n        \"data\": data[1],\n        \"label\": {\n            \"normal\": {\n                \"show\": false\n            }\n        },\n        \"gridIndex\": 1,\n        \"xAxisIndex\": 1,\n        \"yAxisIndex\": 1,\n        \"itemStyle\": {\n            \"emphasis\": {\n                \"shadowBlur\": 5,\n                \"borderWidth\": 2,\n                \"borderColor\": \"white\",\n            },\n            \"borderWidth\": 0.5,\n            \"borderType\": \"solid\",\n            \"borderColor\": \"#ffffff\"\n        }\n    }, {\n        \"name\": \"星期三\",\n        \"type\": \"heatmap\",\n        \"data\": data[2],\n        \"label\": {\n            \"normal\": {\n                \"show\": false\n            }\n        },\n        \"gridIndex\": 2,\n        \"xAxisIndex\": 2,\n        \"yAxisIndex\": 2,\n        \"itemStyle\": {\n            \"emphasis\": {\n                \"shadowBlur\": 5,\n                \"borderWidth\": 2,\n                \"borderColor\": \"white\",\n            },\n            \"borderWidth\": 0.5,\n            \"borderType\": \"solid\",\n            \"borderColor\": \"#ffffff\"\n        }\n    }]\n};\nmyChart.on('click', 'series', function(params) {\n    if (fee_rule_color != -1) {\n        data[params.seriesIndex][params.dataIndex][2] = fee_rule_color;\n        myChart.setOption({\n            series: [{\n                \"name\": \"星期一\",\n                \"type\": \"heatmap\",\n                \"data\": data[0],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 0,\n                \"xAxisIndex\": 0,\n                \"yAxisIndex\": 0,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }, {\n                \"name\": \"星期一\",\n                \"type\": \"heatmap\",\n                \"data\": data[1],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 1,\n                \"xAxisIndex\": 1,\n                \"yAxisIndex\": 1,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }, {\n                \"name\": \"星期三\",\n                \"type\": \"heatmap\",\n                \"data\": data[2],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 2,\n                \"xAxisIndex\": 2,\n                \"yAxisIndex\": 2,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }]\n        });\n    }\n});\n\nmyChart.on('mousedown', 'series', function(params) {\n    mouseDown = 1;\n    currentIndex = {\n        x: params.value[0],\n        y: params.value[1],\n        zone: params.seriesIndex\n    };\n    startIndex = currentIndex;\n    myChart.dispatchAction({ //隐藏提示\n        type: 'hideTip'\n    });\n});\nmyChart.on('mousemove', 'series', function(params) {\n    if (mouseDown == 1) {\n        currentIndex = {\n            x: params.value[0],\n            y: params.value[1],\n            zone: params.seriesIndex\n        };\n        dataIndexArray = LeftOrRight(currentIndex, startIndex, data);\n\n        SelectedDataIndex(myChart);\n    }\n});\nmyChart.on('mouseup', 'series', function(params) {\n    mouseDown = 0;\n    SelectedCancelDataIndex(myChart);\n    if (fee_rule_color > 0) {\n        dataIndexArray.forEach(value => {\n            value.index.forEach(x => {\n                data[value.zone][x][2] = fee_rule_color;\n            });\n        });\n        //刷新data\n        myChart.setOption({\n            series: [{\n                \"name\": \"星期一\",\n                \"type\": \"heatmap\",\n                \"data\": data[0],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 0,\n                \"xAxisIndex\": 0,\n                \"yAxisIndex\": 0,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }, {\n                \"name\": \"星期二\",\n                \"type\": \"heatmap\",\n                \"data\": data[1],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 1,\n                \"xAxisIndex\": 1,\n                \"yAxisIndex\": 1,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }, {\n                \"name\": \"星期三\",\n                \"type\": \"heatmap\",\n                \"data\": data[2],\n                \"label\": {\n                    \"normal\": {\n                        \"show\": false\n                    }\n                },\n                \"gridIndex\": 2,\n                \"xAxisIndex\": 2,\n                \"yAxisIndex\": 2,\n                \"itemStyle\": {\n                    \"emphasis\": {\n                        \"shadowBlur\": 5,\n                        \"borderWidth\": 2,\n                        \"borderColor\": \"white\",\n                    },\n                    \"borderWidth\": 0.5,\n                    \"borderType\": \"solid\",\n                    \"borderColor\": \"#ffffff\"\n                }\n            }]\n        });\n\n        dataIndexArray = [];\n    }\n});\n\n//选中高亮\nfunction SelectedDataIndex(allPlanChart) {\n    allPlanChart.dispatchAction({\n        type: 'downplay'\n    });\n    dataIndexArray.forEach(data => {\n        allPlanChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: data.zone,\n            dataIndex: data.index\n        });\n    });\n    allPlanChart.dispatchAction({\n        type: 'hideTip'\n    })\n}\n//取消选中高亮\nfunction SelectedCancelDataIndex(allPlanChart) {\n    allPlanChart.dispatchAction({\n        type: 'downplay'\n    })\n}","html":"","externalScripts":"","updaterUID":"bd-2920285523","theme":"","layout":"","viewCount":172,"userName":"9***5","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnoPzc9bq-B.png?v=1609254900344","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-heatmap","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"9***5"}}