{"status":0,"data":{"cid":"xB1Hg1l11Z","authorUid":"bd-724147536","authorUserName":"h943691093","title":"竖仪表盘","description":"竖仪表盘 target value color","latestVersion":2,"alwaysLatest":1,"createTime":"2017-04-27T04:09:16.000Z","lastUpdateTime":"2017-04-27T04:09:16.000Z","auth":2,"uid":"bd-724147536","publishedVersion":1,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.5.4","versionCreateTime":"2017-04-27T04:09:16.000Z","code":"/** powered by 进度条：http://gallery.echartsjs.com/editor.html?c=xrkKetC27e */\n/**\n可以设置多个 target value\n简单配置一下就可以变成横向\n*/\n//config\nvar config = {\n    min: 0,\n    max: 100,\n    targetValue: {\n        color: '#5aaf2e',\n        value: 60\n    }\n}\n\n//根据target value ，生成相应位置的 graphic\nfunction _settingVerticalGraphic(config) {\n    var graphic = [];\n    var left = myChart.convertToPixel({\n        xAxisIndex: 0\n    }, 0);\n    left = parseFloat(left, 10).toFixed(2);\n    left -= 26;\n    var targetValue = config.targetValue.value;\n    var min = config.min || 0;\n    var max = config.max || 100;\n    if (targetValue > max || targetValue < min) {\n        return;\n    }\n    var top = _getyAxisValueTop(targetValue);\n    graphic.push({\n        z: 10,\n        type: 'line',\n        left: left,\n        shape: {\n            x1: 0,\n            x2: 35\n        },\n        style: {\n            stroke: 'red',\n            lineWidth: 1\n        },\n        silent: true,\n        top: top\n    });\n    return {\n        graphic: graphic\n    };\n}\n\nfunction _getyAxisValueTop(value) {\n    var top = myChart.convertToPixel({\n        yAxisIndex: 0\n    }, value);\n    return parseFloat(top, 10).toFixed(2) - 2;\n}\n\n//防止自动 setOption\nvar option1 = {\n    \"tooltip\": {\n        \"axisPointer\": {\n            \"type\": \"\"\n        }\n    },\n    \"grid\": {\n        \"left\": 'middle',\n        \"width\": 60\n    },\n    \"yAxis\": {\n        \"show\": true,\n        \"offset\": -5,\n        \"type\": \"value\",\n        \"interval\": 1,\n        \"axisTick\": {\n            \"show\": false\n        },\n        \"axisLine\": {\n            \"show\": false\n        },\n        \"axisLabel\": {\n            \"show\": true,\n            \"showMinLabel\": true,\n            \"showMaxLabel\": true,\n            formatter: function(val) {\n                if (val === config.min || val === config.max || val === config.targetValue.value) {\n                    return val;\n                }\n            }\n        },\n        \"splitLine\": {\n            \"show\": false\n        },\n        \"max\": config.max,\n        \"min\": config.min\n    },\n    \"xAxis\": {\n        \"show\": false,\n        \"type\": \"category\"\n    },\n    \"series\": [{\n        \"name\": \"\",\n        \"type\": \"bar\",\n        \"barWidth\": 30,\n        \"silent\": true,\n        \"animation\": false,\n        \"itemStyle\": {\n            \"normal\": {\n                \"color\": \"#444\"\n            }\n        },\n        \"barGap\": \"-100%\",\n        \"data\": [100]\n    }, {\n        \"name\": \"成绩\",\n        \"type\": \"bar\",\n        \"barWidth\": 30,\n        \"label\": {\n            \"normal\": {\n                \"show\": true,\n                \"position\": \"insideTopRight\",\n                \"offset\": [30, 0],\n                \"textStyle\": {\n                    \"color\": \"#63869e\"\n                }\n            }\n        },\n        \"data\": [{\n            \"value\": \"50\",\n            \"itemStyle\": {\n                \"normal\": {\n                    \"color\": \"red\"\n                }\n            },\n            \"name\": \"分数\"\n        }]\n\n    }],\n};\n\nfunction handleColor(option, config) {\n    if (option.series[1].data[0].value >= config.targetValue.value) {\n        option.series[1].data[0].itemStyle.normal.color = config.targetValue.color;\n        option.series[1].label.normal.textStyle.color = config.targetValue.color;\n    }\n    return option;\n}\n//分数 50 不及格\nmyChart.setOption(handleColor(option1, config));\nsetTimeout(function() {\n    //分数 80 及格\n    option1.series[1].data[0].value = 80;\n    myChart.setOption(handleColor(option1, config));\n}, 1000);\n//标记红线\nmyChart.setOption(_settingVerticalGraphic(config), false);","html":"","externalScripts":"","updaterUID":"bd-724147536","theme":"","layout":"","viewCount":2629,"userName":"h943691093","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1Hg1l11Z.png?v=1493266156860","isCustomThumbnail":1,"builtinTags":["category-work","graphic","grid","series-bar","tooltip"],"customTags":["color","targetvalue","竖仪表盘"],"updaterUserName":"h943691093"}}