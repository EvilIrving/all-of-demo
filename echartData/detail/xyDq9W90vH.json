{"status":0,"data":{"cid":"xyDq9W90vH","authorUid":"bd-329923551","authorUserName":"熙很乖920","title":"就是抄瞎捅咕","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-01T09:51:00.000Z","lastUpdateTime":"2019-03-01T09:51:00.000Z","auth":2,"uid":"bd-329923551","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-01T09:51:00.000Z","code":"//各省份的地图json文件\r\nvar provinces = {\r\n    '上海': '/asset/get/s/data-1482909900836-H1BC_1WHg.json',\r\n    '河北': '/asset/get/s/data-1482909799572-Hkgu_yWSg.json',\r\n    '山西': '/asset/get/s/data-1482909909703-SyCA_JbSg.json',\r\n    '内蒙古': '/asset/get/s/data-1482909841923-rkqqdyZSe.json',\r\n    '辽宁': '/asset/get/s/data-1482909836074-rJV9O1-Hg.json',\r\n    '吉林': '/asset/get/s/data-1482909832739-rJ-cdy-Hx.json',\r\n    '黑龙江': '/asset/get/s/data-1482909803892-Hy4__J-Sx.json',\r\n    '江苏': '/asset/get/s/data-1482909823260-HkDtOJZBx.json',\r\n    '浙江': '/asset/get/s/data-1482909960637-rkZMYkZBx.json',\r\n    '安徽': '/asset/get/s/data-1482909768458-HJlU_yWBe.json',\r\n    '福建': '/asset/get/s/data-1478782908884-B1H6yezWe.json',\r\n    '江西': '/asset/get/s/data-1482909827542-r12YOJWHe.json',\r\n    '山东': '/asset/get/s/data-1482909892121-BJ3auk-Se.json',\r\n    '河南': '/asset/get/s/data-1482909807135-SJPudkWre.json',\r\n    '湖北': '/asset/get/s/data-1482909813213-Hy6u_kbrl.json',\r\n    '湖南': '/asset/get/s/data-1482909818685-H17FOkZSl.json',\r\n    '广东': '/asset/get/s/data-1482909784051-BJgwuy-Sl.json',\r\n    '广西': '/asset/get/s/data-1482909787648-SyEPuJbSg.json',\r\n    '海南': '/asset/get/s/data-1482909796480-H12P_J-Bg.json',\r\n    '四川': '/asset/get/s/data-1482909931094-H17eKk-rg.json',\r\n    '贵州': '/asset/get/s/data-1482909791334-Bkwvd1bBe.json',\r\n    '云南': '/asset/get/s/data-1482909957601-HkA-FyWSx.json',\r\n    '西藏': '/asset/get/s/data-1482927407942-SkOV6Qbrl.json',\r\n    '陕西': '/asset/get/s/data-1482909918961-BJw1FyZHg.json',\r\n    '甘肃': '/asset/get/s/data-1482909780863-r1aIdyWHl.json',\r\n    '青海': '/asset/get/s/data-1482909853618-B1IiOyZSl.json',\r\n    '宁夏': '/asset/get/s/data-1482909848690-HJWiuy-Bg.json',\r\n    '新疆': '/asset/get/s/data-1482909952731-B1YZKkbBx.json',\r\n    '北京': '/asset/get/s/data-1482818963027-Hko9SKJrg.json',\r\n    '天津': '/asset/get/s/data-1482909944620-r1-WKyWHg.json',\r\n    '重庆': '/asset/get/s/data-1482909775470-HJDIdk-Se.json',\r\n    '香港': '/asset/get/s/data-1461584707906-r1hSmtsx.json',\r\n    '澳门': '/asset/get/s/data-1482909771696-ByVIdJWBx.json'\r\n};\r\n\r\n//各省份的数据\r\nvar allData = [{\r\n    name: '北京'\r\n}, {\r\n    name: '天津'\r\n}, {\r\n    name: '上海'\r\n}, {\r\n    name: '重庆'\r\n}, {\r\n    name: '河北'\r\n}, {\r\n    name: '河南'\r\n}, {\r\n    name: '云南'\r\n}, {\r\n    name: '辽宁'\r\n}, {\r\n    name: '黑龙江'\r\n}, {\r\n    name: '湖南'\r\n}, {\r\n    name: '安徽'\r\n}, {\r\n    name: '山东'\r\n}, {\r\n    name: '新疆'\r\n}, {\r\n    name: '江苏'\r\n}, {\r\n    name: '浙江'\r\n}, {\r\n    name: '江西'\r\n}, {\r\n    name: '湖北'\r\n}, {\r\n    name: '广西'\r\n}, {\r\n    name: '甘肃'\r\n}, {\r\n    name: '山西'\r\n}, {\r\n    name: '内蒙古'\r\n}, {\r\n    name: '陕西'\r\n}, {\r\n    name: '吉林'\r\n}, {\r\n    name: '福建'\r\n}, {\r\n    name: '贵州'\r\n}, {\r\n    name: '广东'\r\n}, {\r\n    name: '青海'\r\n}, {\r\n    name: '西藏'\r\n}, {\r\n    name: '四川'\r\n}, {\r\n    name: '宁夏'\r\n}, {\r\n    name: '海南'\r\n}, {\r\n    name: '台湾'\r\n}, {\r\n    name: '香港'\r\n}, {\r\n    name: '澳门'\r\n}];\r\nfor (var i = 0; i < allData.length; i++) {\r\n    allData[i].value = Math.round(Math.random() * 100);\r\n}\r\n\r\n\r\nloadMap('/asset/get/s/data-1527045631990-r1dZ0IM1X.json', 'china');//初始化全国地图\r\n\r\nvar timeFn = null;\r\n\r\n//单击切换到省级地图，当mapCode有值,说明可以切换到下级地图\r\nmyChart.on('click', function(params) {\r\n    clearTimeout(timeFn);\r\n    //由于单击事件和双击事件冲突，故单击的响应事件延迟250毫秒执行\r\n    timeFn = setTimeout(function() {\r\n        var name = params.name; //地区name\r\n        var mapCode = provinces[name]; //地区的json数据\r\n        if (!mapCode) {\r\n            alert('无此区域地图显示');\r\n            return;\r\n        }\r\n\r\n        loadMap(mapCode, name);\r\n        \r\n    }, 250);\r\n});\r\n\r\n\r\n// 绑定双击事件，返回全国地图\r\nmyChart.on('dblclick', function(params) {\r\n    //当双击事件发生时，清除单击事件，仅响应双击事件\r\n    clearTimeout(timeFn);\r\n    \r\n    //返回全国地图\r\n    loadMap('/asset/get/s/data-1527045631990-r1dZ0IM1X.json', 'china');\r\n});\r\n\r\n/**\r\n 获取对应的json地图数据，然后向echarts注册该区域的地图，最后加载地图信息\r\n @params {String} mapCode:json数据的地址\r\n @params {String} name: 地图名称\r\n */\r\nfunction loadMap(mapCode, name) {\r\n    $.get(mapCode, function(data) {\r\n        if (data) {\r\n            echarts.registerMap(name, data);\r\n            var option = {\r\n                tooltip: {\r\n                    show: true,\r\n                    formatter: function(params) {\r\n                        if (params.data) return params.name + '：' + params.data['value']\r\n                    },\r\n                },\r\n                visualMap: {\r\n                    type: 'continuous',\r\n                    text: ['', ''],\r\n                    showLabel: true,\r\n                    left: '50',\r\n                    min: 0,\r\n                    max: 100,\r\n                    inRange: {\r\n                        color: ['#edfbfb', '#b7d6f3', '#40a9ed', '#3598c1', '#215096', ]\r\n                    },\r\n                    splitNumber: 0\r\n                },\r\n                series: [{\r\n                    name: 'MAP',\r\n                    type: 'map',\r\n                    mapType: name,\r\n                    data: allData,\r\n                    selectedMode: 'false',//是否允许选中多个区域\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            formatter:function(val){\r\n                                console.log(val, 9999999999)\r\n                                var area_content =  '{a|' + val.name + '}' + '-' + '{b|' + val.value + '}';\r\n                                return area_content.split(\"-\").join(\"\\n\");\r\n                            },//让series 中的文字进行换行\r\n                            rich: {\r\n                                a: {\r\n                                    color: '#fff'\r\n                                },\r\n                                b: {\r\n                                    color: '#fff',\r\n                                    fontFamily: 'Microsoft YaHei',\r\n                                    fontSize: 14,\r\n                                    width: 16,\r\n                                    height: 16,\r\n                                    borderRadius: 10,\r\n                                    borderWidth: 1,\r\n                                    borderColor: '#f00',\r\n                                    textAlign: 'center',\r\n                                    padding: 2\r\n                                }\r\n                            },//富文本样式,就是上面的formatter中'{a|'和'{b|'\r\n                        },\r\n                        emphasis: {show: false}\r\n                    },//地图中文字内容及样式控制\r\n                    \r\n                }]\r\n            };\r\n            myChart.setOption(option);\r\n            // curMap = {\r\n            //     mapCode: mapCode,\r\n            //     mapName: name\r\n            // };\r\n        } else {\r\n            alert('无法加载该地图');\r\n        }\r\n    });\r\n}","html":"","externalScripts":"","updaterUID":"bd-329923551","theme":"","layout":"","viewCount":22284,"userName":"熙很乖920","commentCount":1,"starCount":20,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xyDq9W90vH.png?v=1551433860487","isCustomThumbnail":0,"builtinTags":["category-work","series-map","tooltip","visualMap"],"customTags":[],"updaterUserName":"熙很乖920"}}