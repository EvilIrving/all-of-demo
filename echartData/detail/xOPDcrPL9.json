{"status":0,"data":{"cid":"xOPDcrPL9","authorUid":"bd-1560900257","authorUserName":"请***生","title":"动态波浪","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-12-06T02:54:52.000Z","lastUpdateTime":"2019-12-06T02:54:52.000Z","auth":2,"uid":"bd-1560900257","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-06T02:54:52.000Z","code":"/**\r\n * 创建组件\r\n * @class\r\n * @param {string} el \r\n */\r\nfunction Wave(el) {\r\n    this.$el = $(el).eq(0);\r\n\r\n    this.time = 5000;\r\n    this.timer = null;\r\n    this.chart = echarts.init(this.$el[0]);\r\n\r\n    //模拟波浪数据\r\n    this.data1 = [60, 70, 65, 75, 52, 85, 84, 55, 80, 65, 90];\r\n    this.data2 = [95, 65, 95, 50, 84, 70, 100, 85, 75, 85, 50];\r\n\r\n\r\n    this.pointCircle(this.data1,1,'rgb(184, 48, 255)');\r\n    this.pointCircle(this.data1,5,'rgb(184, 48, 255)');\r\n    this.pointCircle(this.data1,7,'rgb(184, 48, 255)');\r\n    this.pointCircle(this.data2,0,'rgb(30, 180, 255)');\r\n    this.pointCircle(this.data2,4,'rgb(30, 180, 255)');\r\n    this.pointCircle(this.data2,9,'rgb(30, 180, 255)');\r\n};\r\n\r\n\r\n/**\r\n * 渲染图表\r\n */\r\nWave.prototype.render = function () {\r\n    var that = this;\r\n    option = this.option = {\r\n        animationDuration: 0,\r\n        animationEasingUpdate: 'linear',\r\n        animationDurationUpdate: this.time,\r\n        grid: {\r\n            top: 0,\r\n            bottom: -40,\r\n            left: -500,\r\n            right: -500,\r\n            containLabel: true\r\n        },\r\n        xAxis: {\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            boundaryGap: false,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            data: (function () {\r\n                var now = new Date();\r\n                var res = [];\r\n                var len = 11;\r\n                while (len--) {\r\n                    now = new Date(now - that.time);\r\n                    res.push(now.toLocaleTimeString().replace(/^\\D*/, ''));\r\n                }\r\n\r\n                return res;\r\n            })()\r\n        },\r\n        yAxis: {\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            max: 100,\r\n            boundaryGap: false,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'line',\r\n            smooth: 0.5,\r\n            showSymbol: true,\r\n            symbol: 'circle',\r\n            symbolSize: 0,\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 1\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'rgb(184, 48, 255)'\r\n                }\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: 'rgba(184, 48, 255, 0.8)'\r\n                    }, {\r\n                        offset: 0.8,\r\n                        color: 'rgba(184, 48, 255, 0)'\r\n                    }])\r\n                }\r\n            },\r\n            data: this.data1\r\n\r\n        }, {\r\n            type: 'line',\r\n            smooth: true,\r\n            showSymbol: true,\r\n            symbol: 'circle',\r\n            symbolSize: 0,\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 1\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'rgb(30, 180, 255)'\r\n                }\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: 'rgba(30, 180, 255, 0.8)'\r\n                    }, {\r\n                        offset: 0.8,\r\n                        color: 'rgba(30, 180, 255, 0)'\r\n                    }])\r\n                }\r\n            },\r\n            data: this.data2\r\n        }]\r\n    };\r\n\r\n    this.$el.css('width', '100%');\r\n    this.chart.setOption(this.option);\r\n\r\n    that.animate();\r\n    this.timer = setInterval(function () {\r\n        that.animate();\r\n\r\n    }, that.time);\r\n}\r\n\r\n/**\r\n * 动画 \r\n */\r\nWave.prototype.animate = function () {\r\n\r\n    this.data1.unshift(this.data1.pop());\r\n    this.data2.unshift(this.data2.pop());\r\n\r\n\r\n    var axisData = (new Date()).toLocaleTimeString().replace(/^\\D*/, '');\r\n    this.option.xAxis.data.pop();\r\n    this.option.xAxis.data.unshift(axisData);\r\n\r\n    this.chart.setOption(this.option);\r\n\r\n}\r\n/**\r\n * 数据点生成标注\r\n * @param {array} datas \r\n * @param {number} i \r\n * @param {string} color \r\n */\r\nWave.prototype.pointCircle = function(datas,i,color){\r\n    datas[i] = {\r\n        value: datas[i] ,\r\n        symbolSize: 10,\r\n        itemStyle: {\r\n            normal: {\r\n                color: color,\r\n                borderColor: '#fff',\r\n                borderWidth: 2,\r\n                shadowColor: color,\r\n                shadowBlur: 15\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nWave.prototype.dispose = function () {\r\n    var that = this;\r\n    setTimeout(function () {\r\n        that.chart.dispose();\r\n        clearInterval(that.timer);\r\n    }, 1000);\r\n\r\n}\r\n\r\n\r\nvar wave = new Wave('#chart-panel');\r\nwave.render();\r\n","html":"","externalScripts":"","updaterUID":"bd-1560900257","theme":"","layout":"","viewCount":239,"userName":"请***生","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOPDcrPL9.png?v=1575600892828","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line"],"customTags":[],"updaterUserName":"请***生"}}