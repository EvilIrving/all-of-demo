{"status":0,"data":{"cid":"xdfOx_ONJ1","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"教师离职趋势预警","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-10T06:12:24.000Z","lastUpdateTime":"2020-11-10T06:12:24.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-10T06:12:24.000Z","code":"var getname =  ['2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019'];\r\nvar getvalue =[63,67,72,79,82,83,97,82,71,98];\r\nvar getbl = ['4','4','4','4','4','4','5','4','3','5'];\r\n//计算最大值  \r\nfunction calMax(arr) {\r\n    let max = 0;\r\n    arr.forEach((el) => {\r\n        el.forEach((el1) => {\r\n            if (!(el1 === undefined || el1 === '')) {\r\n                if (max < el1) {\r\n                    max = el1;\r\n                }\r\n            }\r\n        })\r\n    })\r\n    let maxint = Math.ceil(max / 9.5);\r\n    //不让最高的值超过最上面的刻度    \r\n    let maxval = maxint * 10;\r\n    //让显示的刻度是整数    \r\n    return maxval;\r\n}\r\n\r\n\r\nvar max = Math.ceil(calMax([getvalue]) / 100) * 50;\r\nvar max1 = Math.ceil(calMax([getbl]) / 1) * 1;\r\n\r\nvar option = {\r\n    grid: {\r\n        top: 80,\r\n        bottom: 40,\r\n        left: 50,\r\n        right: 50\r\n    },\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'none'\r\n        },\r\n        formatter: '{b0}年<br/>{a0}: {c0}人<br/>{a1}: {c1}%',\r\n    },\r\n    legend: {\r\n        data: [{\r\n            name: '离职人数',\r\n        }, {\r\n            name: '离职率',\r\n            icon: 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACA0lEQVQ4T5WTT2uTQRDGnzFvoO8hiFgwhRbMIVfpQQWb9J9Uj/YTiKJS8Z7Wz1BTP4B3vXhSD6UkmFhovFiNInrx4KVI4kWrljTN7IzMvr7507QH97Kwu/PbmXmeIRy3qtUAIz/HgX1gP72D+Xk+6ikNHb5ZzxHJMglfBVxI4gB1LagrEXORZ27W+mN6AFXCu9IqQQpQR6RsgfAA8L9dFMJrnLt1H0RqoB7gbbkIkgKpAHFwF2CgCAhYRrrG+TvLPcDHl1Ng3Yp+NoADhJFOBoAIvh/seSh5gIBUVE9InqeWXkcZfKg8g7hFqF06jAVJPM5MYi416q83fzVx/UsNjYPfUVkqUOgLzi8tErYfJZHI7gISQhwIgkr2AuZSpwf6a5CFTxuI36hKi0OcJNSrZwH5aqlZBulEgG/nLvc1J+JYxya2n6LZ3gP5Pgg6LJkBAKniTCLxn4BuCS6Me1DNXsTs4RJ2m1j4vOF/9n2AtDojVoKteuU5INfi+saCAE8yk5hNjfpSXvkmbqHR/uMBVkKviQYYkjGSzNSw3xrtWMZIJUBUpTPNM/dqPSPVy0WoGclbN3rY3ftdKRb/kKdvFwadaFZ+X1ol6bdy5EoPE7a61QfnbqwMWzlWvb6eI3ErJO4KxIWRZH6YygR+wJeOG6bDY2nquFPj/jjxYwfn73aOGue/WuJU4CbFxoAAAAAASUVORK5CYII='\r\n        }],\r\n        type: \"scroll\",\r\n        right: '15',\r\n        top: '10',\r\n        itemGap: 25,\r\n        itemWidth: 14,\r\n        itemHeight: 14,\r\n        textStyle: {\r\n            fontSize: '13',\r\n            color: '#656565',\r\n        },\r\n\r\n    },\r\n    xAxis: [{\r\n        data: getname,\r\n        axisLabel: {\r\n            margin: 10,\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#333333',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n    }],\r\n    yAxis: [{\r\n        type: 'value',\r\n        min: 0,\r\n        max: max, // 计算最大值\r\n        interval: max / 5, //  平均分为5份\r\n        splitNumber: 5,\r\n        name: '单位：人',\r\n        nameTextStyle: {\r\n            color: '#666666',\r\n            fontSize: 13,\r\n            padding: [0, 0, 0, 70]\r\n        },\r\n        axisLabel: {\r\n            formatter: function(value) {\r\n                num = value\r\n                if (num && num != 'undefined' && num != 'null') {\r\n                    let numS = num;\r\n                    numS = numS.toString();\r\n                    numS = numS.replace(/,/gi, '');\r\n                    return numS;\r\n                } else {\r\n                    return num;\r\n                }\r\n            },\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#333333',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: 'rgba(209,209,209,.25)',\r\n            }\r\n        },\r\n    }, {\r\n        type: 'value',\r\n        min: 0,\r\n        max: max1, // 计算最大值\r\n        interval: max1 / 5, //  平均分为5份\r\n        splitNumber: 5,\r\n        name: '离职率：%',\r\n        nameTextStyle: {\r\n            color: '#666666',\r\n            fontSize: 13,\r\n            padding: [0, 0, 0, -70]\r\n        },\r\n        axisLabel: {\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#333333',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: 'rgba(209,209,209,.25)',\r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n        name: \"离职人数\",\r\n        type: 'bar',\r\n        data: getvalue,\r\n        barWidth: '25px',\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#5CBFFF'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#5997FF'\r\n                }], false),\r\n                barBorderRadius: [4, 4, 0, 0],\r\n            }\r\n        },\r\n\t\tmarkLine: {\r\n            symbol:\"none\",\r\n            data: [{\r\n                silent: false,\r\n                lineStyle: {\r\n                    type: \"solid\",\r\n                    color: \"#FF4D4F\",\r\n\t\t\t\t\twidth:2\r\n                },\r\n                label: {\r\n                    position: 'end',\r\n                    formatter: \"预警线\",\r\n                    padding:[-30,0,0,-50],\r\n\t\t\t\t\tcolor: \"#FF4D4F\",\r\n\t\t\t\t\tfontSize:13\r\n                },\r\n                yAxis: 90\r\n\r\n            }]\r\n\t\t},\r\n    },{\r\n        name: \"离职率\",\r\n        type: 'line',\r\n        data: getbl,\r\n        yAxisIndex:1,\r\n        symbol: 'circle',\r\n        symbolSize: 10,\r\n        lineStyle: {\r\n            normal: {\r\n                width: 4,\r\n                color: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    x2: 1,\r\n                    y2: 0,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#00D0BF' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#05C399' // 100% 处的颜色\r\n                    }],\r\n                },\r\n                shadowColor: 'rgba(69, 218, 201, 0.38)',\r\n                shadowBlur: 6,\r\n                shadowOffsetY: 8,\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#FFF',\r\n                borderColor: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    x2: 1,\r\n                    y2: 0,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#00D0BF' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#05C399' // 100% 处的颜色\r\n                    }],\r\n                },\r\n                borderWidth: 4\r\n            },\r\n        },\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":335,"userName":"衰***命","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xdfOx_ONJ1.png?v=1604988744890","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markLine","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"衰***命"}}