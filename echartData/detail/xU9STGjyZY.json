{"status":0,"data":{"cid":"xU9STGjyZY","authorUid":"obd-ot3AeGM8AUWY_lY3k6SRE51Mu-0Ha8B","authorUserName":"无***i","title":"前方带有图标柱状图","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-07-29T08:59:48.000Z","lastUpdateTime":"2020-07-30T03:17:30.000Z","auth":2,"uid":"obd-ot3AeGM8AUWY_lY3k6SRE51Mu-0Ha8B","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-30T03:17:40.000Z","code":" var chartData = [{\r\n        name:'入监',\r\n         value: 10700,\r\n         test: '备注1' //自定义参数\r\n     },\r\n     {\r\n         name:'释放',\r\n         value: 6800,\r\n         test: '备注2'\r\n     },\r\n ];\r\n var rjsf = ['释放', '入监']\r\n var itemValue = [],\r\n     bgData = []; //声明背景数据\r\n\r\n // 取出所有数据最大值,作为柱形图背景数据\r\n chartData.forEach(function(items, index) { //console.log(items)\r\n     itemValue.push(items.value);\r\n });\r\n /*console.log(chartData)*/\r\n maxdata = Math.max.apply(null, itemValue); ///applay方法★取得最大值\r\n //console.log(\"最大值为 %c\"+ maxdata, \"color:red\");\r\n for (var i = 0; i < chartData.length; i++) {\r\n    var maxdata1=maxdata+10000//最大值加10000取整个的占比\r\n        bgData.push(maxdata1); //取得最大值\r\n        // console.log(bgData)\r\n }\r\n //图表\r\n option = {\r\n     title: {\r\n         show: false\r\n     },\r\n     tooltip: {\r\n         trigger: 'axis', // axis , item\r\n         axisPointer: {\r\n             type: 'shadow' // 'line' | 'shadow'\r\n         },\r\n         //backgroundColor:'transparent',\r\n         padding: 0,\r\n         textStyle: {\r\n             fontSize: 16,\r\n             fontFamily: 'Simsun',\r\n             color: '#fff'\r\n         },\r\n          formatter: function(params, ticket, callback) {\r\n              var res = '<table class=\"charts_tip\">' +\r\n                  '<thead>' +\r\n                  '<tr><th colspan=\"2\" style=\"padding:2px 5px; background:' + params[1].color + '\">' + params[1].name + '</th></tr>' +\r\n                  '</thead>' +\r\n                  '<tbody>' +\r\n                  '<tr><td class=\"cc\" style=\"padding:2px 5px;\">数量</td><td>' + params[1].value + '</td></tr>' +\r\n                  '<tr><td class=\"cc\" style=\"padding:2px 5px;\">备注</td><td>' + params[1].data.test + '</td></tr>' +\r\n                  '</tbody>' +\r\n                  '</table>';\r\n              setTimeout(function() {\r\n                  callback(ticket, res); // 仅为了模拟异步回调\r\n              }, 3000)\r\n              return res;\r\n          }\r\n     },\r\n     legend: {\r\n         show: false\r\n     },\r\n     toolbox: {\r\n         show: false\r\n     },\r\n     grid: {\r\n         left: \"0%\", //距离dom间距\r\n         right: \"4%\",\r\n         top: \"2%\",\r\n         bottom: \"-10%\",\r\n         containLabel: true\r\n     },\r\n     xAxis: [{\r\n         type: 'value',\r\n         position: 'bottom',\r\n         boundaryGap: true, // 边界间隙\r\n         min: 0,\r\n         axisLabel: {\r\n             show: false,\r\n             textStyle: {\r\n                 color: '#fff',\r\n                 fontSize: 16\r\n             }\r\n         },\r\n         axisLine: {\r\n             show: false,\r\n             lineStyle: {\r\n                 color: 'rgba(255, 255, 255, .5)'\r\n             }\r\n         },\r\n         axisTick: {\r\n             show: false // 坐标轴小标记\r\n         },\r\n         splitLine: {\r\n             show: false, // 是否显示分割线\r\n             lineStyle: {\r\n                 color: 'rgba(255, 255, 9255, 0)', // 纵向向网格线颜色\r\n                 type: 'dashed',\r\n                 width: 1\r\n             }\r\n         }\r\n     }],\r\n     yAxis: {\r\n         type: 'category',\r\n         position: 'left',\r\n         data: rjsf,\r\n         axisLabel: {\r\n             verticalAlign: \"bottom\",\r\n             align: \"left\",\r\n             padding: [0, 0, 6, 10],\r\n             textStyle: {\r\n                 color: 'red',\r\n                 fontSize: 10\r\n             },\r\n             //加左边小远圈富文本\r\n             rich: {\r\n                 lg: {\r\n                     backgroundColor: '#00f28c',\r\n                     color: '#fff',\r\n                     borderRadius: 15,\r\n                     // padding: 5,\r\n                     align: 'center',\r\n                     width: 10,\r\n                     height: 10\r\n                 },\r\n             },\r\n             formatter: function(value, index) {\r\n                 return [\r\n                     '{lg|' + '}' + '{title|' + value + '} '\r\n                 ].join('\\n')\r\n             },\r\n         },\r\n         axisLine: {\r\n             show: false,\r\n             lineStyle: {\r\n                 color: 'rgba(255, 255, 255, .5)',\r\n                 width: 1\r\n             }\r\n         },\r\n         axisTick: {\r\n             show: false // 坐标轴小标记\r\n         },\r\n         splitLine: {\r\n             show: false\r\n         },\r\n         /*data: (function(data) {\r\n             var arr = [];\r\n             data.forEach(function(items) {\r\n                 arr.push(items.name);\r\n             });\r\n             console.log(arr)\r\n             return arr;\r\n         })(chartData) // 载入y轴数据*/\r\n     },\r\n     series: [{\r\n         type: 'bar',\r\n         barGap: \"-100%\",\r\n         label: {\r\n             normal: {\r\n                 show: false\r\n             }\r\n         },\r\n         barWidth: 10,\r\n         itemStyle: {\r\n             normal: {\r\n                 barBorderRadius: [10, 10, 10, 10],\r\n                 color: '#253973' // 图表颜色\r\n             }\r\n         },\r\n         data: bgData, // 载入背景数据\r\n         z: 0\r\n     }, {\r\n         type: 'bar',\r\n         label: {\r\n             normal: {\r\n                 show: true,\r\n                 position: ['90%', '-15px'], // top, right, inside, insideTop,...\r\n                 textStyle: {\r\n                     color: '#00d4ff',\r\n                     fontSize: 10\r\n                 },\r\n                //  formatter: '{c}' + \"万人\"\r\n                 formatter: function(params) {\r\n                        console.log(params)\r\n                        var strVal = 0;//右上角数据，判断是否大于10000\r\n                        var strVal1=0;//右上角数据，判断是否加'万人'或人\r\n                        chartData.forEach(function(v, i, array) {\r\n                            if (params.name == v.name) {//判断params.name与chartData相等时\r\n                                strVal = v.value;\r\n                                strVal1=v.value;\r\n                                params.data = v.test\r\n                            }\r\n                        })\r\n                        var res='';\r\n                        strVal>9999?strVal=strVal/10000:strVal\r\n                        return strVal==strVal1?strVal+'人':strVal+'万人';//判断strval与strVal1是否相等,如果相等则没有除以10000后方加人否则加万人\r\n                    }\r\n             }\r\n         },\r\n         barWidth: 10,\r\n         itemStyle: {\r\n             normal: {\r\n                 barBorderRadius: [10, 10, 10, 10],\r\n                 //color:'#ffc938', // 图表颜色\r\n                 /*color: function(params) { // 颜色定制显示（按顺序）\r\n                     var colorList = ['#00ff90', '#00ff90'];\r\n                     return colorList[params.dataIndex]\r\n                 },*/\r\n                 color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\r\n                        offset: 0,\r\n                        color: '#00ff90'\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#fafffd'\r\n                    }]),//渐变\r\n                 //barBorderRadius: [0, 17, 17, 0]  //圆角\r\n             }\r\n         },\r\n         data: chartData, // 载入数据(内含自定义参数)\r\n         z: 1\r\n     }],\r\n };","html":"","externalScripts":"","updaterUID":"obd-ot3AeGM8AUWY_lY3k6SRE51Mu-0Ha8B","theme":"vintage","layout":"","viewCount":33,"userName":"无***i","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xU9STGjyZY.png?v=1596079060186","isCustomThumbnail":0,"builtinTags":[],"customTags":[],"updaterUserName":"无***i"}}