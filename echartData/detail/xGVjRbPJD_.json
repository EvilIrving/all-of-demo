{"status":0,"data":{"cid":"xGVjRbPJD_","authorUid":"obd-oNlDRNEPgQA1_62kDoI9_o1x04e14Cb","authorUserName":"走***V","title":"广西地图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-15T07:33:52.000Z","lastUpdateTime":"2020-12-15T07:33:52.000Z","auth":2,"uid":"obd-oNlDRNEPgQA1_62kDoI9_o1x04e14Cb","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-15T07:33:52.000Z","code":"var uploadedDataURL = \"https://geo.datav.aliyun.com/areas_v2/bound/450000_full.json\";\r\nvar nameMap = 'guangxi';\r\nwindow.dataList = [\r\n    //{ name: '百色市', value: 396 },\r\n    //{ name: '河池市', value: 66 },\r\n    //{ name: '烟台市', value: 222 },\r\n    {\r\n        name: '柳州市',\r\n        value: '1公司'\r\n    },\r\n    {\r\n        name: '桂林市',\r\n        value: '2公司'\r\n    },\r\n    {\r\n        name: '崇左市',\r\n        value: '3公司'\r\n    },\r\n    //{ name: '南宁市', value: 91 },\r\n    //{ name: '来宾市', value: 479 },\r\n    //{ name: '贺州市', value: 34 },\r\n    //{ name: '贵港市', value: 631 },\r\n    //{ name: '梧州市', value: 1203 },\r\n    //{ name: '防城港市', value: 988 },\r\n    //{ name: '钦州市', value: 693 },\r\n    //{ name: '玉林市', value: 934 },\r\n    //{ name: '北海市', value: 748 }\r\n];\r\ndebugger\r\nvar geoCoordMap = {};\r\nvar convertData = function(data) {\r\n    //console.log('data', data)\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    //console.log('res', res)\r\n    return res;\r\n};\r\n\r\n\r\n$.get(uploadedDataURL, function(gdMap) {\r\n    //debugger\r\n    echarts.registerMap(nameMap, gdMap);\r\n    /*获取地图数据*/\r\n    myChart.showLoading();\r\n    var mapFeatures = echarts.getMap(nameMap).geoJson.features;\r\n    myChart.hideLoading();\r\n    mapFeatures.forEach(function(v) {\r\n        // 地区名称\r\n        var name = v.properties.name;\r\n        // 地区经纬度\r\n        geoCoordMap[name] = v.properties.center;\r\n    });\r\n    //console.log(geoCoordMap)\r\n    //GDP\r\n    var optionMap = {\r\n        title: {\r\n            //text: '地图',\r\n            top: '2%',\r\n            textStyle: {\r\n                color: '#000',\r\n                fontSize: 16\r\n            }\r\n        },\r\n        geo: {\r\n            map: nameMap,\r\n            show: false,\r\n            roam: true,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false\r\n                }\r\n            }\r\n        },\r\n        series: [{ // 地图块的相关信息\r\n                type: 'map',\r\n                map: nameMap,\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        textStyle: {\r\n                            fontSize: 12,\r\n                            fontWeight: 400,\r\n                            color: 'rgb(255,0,0) '\r\n                        }\r\n                    }\r\n                },\r\n                data: window.dataList\r\n            },\r\n            {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                symbol: 'pin',\r\n                symbolSize: [40, 40],\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        textStyle: {\r\n                            color: '#000',\r\n                            fontSize: 10,\r\n                            fontWeight: 600\r\n                        },\r\n                        formatter(value) {\r\n                            return value.data.value[2]\r\n                        }\r\n                    }\r\n                },\r\n                hoverAnimation: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'pink', // 标志颜色\r\n                        size: 400\r\n                    }\r\n                },\r\n                zlevel: 10,\r\n                data: convertData(window.dataList)\r\n            }\r\n        ]\r\n    };\r\n    myChart.setOption(optionMap, true);\r\n});","html":"","externalScripts":"","updaterUID":"obd-oNlDRNEPgQA1_62kDoI9_o1x04e14Cb","theme":"","layout":"","viewCount":136,"userName":"走***V","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xGVjRbPJD_.png?v=1608017632532","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","title"],"customTags":[],"updaterUserName":"走***V"}}