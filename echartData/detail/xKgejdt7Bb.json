{"status":0,"data":{"cid":"xKgejdt7Bb","authorUid":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","authorUserName":"b***n","title":"柱状图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-11-08T01:44:25.000Z","lastUpdateTime":"2021-11-08T01:44:25.000Z","auth":2,"uid":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-08T01:44:25.000Z","code":"var getname = ['A','B','C','D'];\r\nvar getvalue =[23,45,23,43];\r\nvar getvalue2 =[43,43,33,39];\r\nvar getbl =[0.5,0.4,0.2,0.5];\r\n//计算最大值  \r\nfunction calMax(arr) {\r\n    let max = 0;\r\n    arr.forEach((el) => {\r\n        el.forEach((el1) => {\r\n            if (!(el1 === undefined || el1 === '')) {\r\n                if (max < el1) {\r\n                    max = el1;\r\n                }\r\n            }\r\n        })\r\n    })\r\n    let maxint = Math.ceil(max / 9.5);\r\n    //不让最高的值超过最上面的刻度    \r\n    let maxval = maxint * 10;\r\n    //让显示的刻度是整数    \r\n    return maxval;\r\n}\r\n\r\n\r\nvar max = Math.ceil(calMax([getvalue]) / 100) * 100;\r\nvar max2 = Math.ceil(calMax([getbl]) / 100) * 100;\r\n\r\nvar option = {\r\n    grid: {\r\n        top: 80,\r\n        bottom: 40,\r\n        left: 50,\r\n        right: 50\r\n    },\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'none'\r\n        },\r\n        formatter: '{b0}<br/>{a0}: {c0}人<br/>{a1}: {c1}人',\r\n    },\r\n    legend: {\r\n        data: [{\r\n            name: '住宿人数',\r\n        }, {\r\n            name: '未住宿人数',\r\n            icon: 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACA0lEQVQ4T5WTT2uTQRDGnzFvoO8hiFgwhRbMIVfpQQWb9J9Uj/YTiKJS8Z7Wz1BTP4B3vXhSD6UkmFhovFiNInrx4KVI4kWrljTN7IzMvr7507QH97Kwu/PbmXmeIRy3qtUAIz/HgX1gP72D+Xk+6ikNHb5ZzxHJMglfBVxI4gB1LagrEXORZ27W+mN6AFXCu9IqQQpQR6RsgfAA8L9dFMJrnLt1H0RqoB7gbbkIkgKpAHFwF2CgCAhYRrrG+TvLPcDHl1Ng3Yp+NoADhJFOBoAIvh/seSh5gIBUVE9InqeWXkcZfKg8g7hFqF06jAVJPM5MYi416q83fzVx/UsNjYPfUVkqUOgLzi8tErYfJZHI7gISQhwIgkr2AuZSpwf6a5CFTxuI36hKi0OcJNSrZwH5aqlZBulEgG/nLvc1J+JYxya2n6LZ3gP5Pgg6LJkBAKniTCLxn4BuCS6Me1DNXsTs4RJ2m1j4vOF/9n2AtDojVoKteuU5INfi+saCAE8yk5hNjfpSXvkmbqHR/uMBVkKviQYYkjGSzNSw3xrtWMZIJUBUpTPNM/dqPSPVy0WoGclbN3rY3ftdKRb/kKdvFwadaFZ+X1ol6bdy5EoPE7a61QfnbqwMWzlWvb6eI3ErJO4KxIWRZH6YygR+wJeOG6bDY2nquFPj/jjxYwfn73aOGue/WuJU4CbFxoAAAAAASUVORK5CYII='\r\n        }],\r\n        type: \"scroll\",\r\n        right: '15',\r\n        top: '10',\r\n        itemGap: 25,\r\n        itemWidth: 16,\r\n        itemHeight: 16,\r\n        textStyle: {\r\n            fontSize: '13',\r\n            color: '#656565',\r\n        },\r\n\r\n    },\r\n    xAxis: [{\r\n        data: getname,\r\n        axisLabel: {\r\n            margin: 10,\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#333333',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n    }],\r\n    yAxis: [{\r\n        type: 'value',\r\n        \r\n        name: '数量（人）',\r\n        nameTextStyle: {\r\n            color: '#666666',\r\n            fontSize: 13,\r\n            padding: [0, 0, 0, 60]\r\n        },\r\n        axisLabel: {\r\n            formatter: function(value) {\r\n                num = value\r\n                if (num && num != 'undefined' && num != 'null') {\r\n                    let numS = num;\r\n                    numS = numS.toString();\r\n                    numS = numS.replace(/,/gi, '');\r\n                    return numS;\r\n                } else {\r\n                    return num;\r\n                }\r\n            },\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#0000',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: 'white',\r\n                  type:'dashed'\r\n            }\r\n        }\r\n    }, {\r\n        type: 'value',\r\n        \r\n        name: '单位（%）',\r\n        nameTextStyle: {\r\n            color: '#666666',\r\n            fontSize: 13,\r\n            padding: [0, 0, 0, -60]\r\n        },\r\n        //右轴\r\n        axisLabel: {\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#0000',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        //横网格线\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: '#D1D1D1',\r\n                type:'dashed'\r\n                \r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n        name: \"住宿人数\",\r\n        type: 'bar',\r\n        data: getvalue,\r\n        barWidth: '10px',\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#1875F0'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#1875F0'\r\n                }], false),\r\n            \r\n            }\r\n        },\r\n    },\r\n    {\r\n        name: \"未住宿人数\",\r\n        type: 'bar',\r\n        data: getvalue2,\r\n        barWidth: '10px',\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#1875F0'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#1875F0'\r\n                }], false),\r\n            \r\n            }\r\n        },\r\n    }\r\n    \r\n    \r\n    ,{\r\n        name: \"住宿率\",\r\n        type: 'line',\r\n        data: getbl,\r\n        yAxisIndex:1,\r\n        symbol: 'circle',\r\n        symbolSize: 10,\r\n        lineStyle: {\r\n            normal: {\r\n                width: 4,\r\n                color: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    x2: 1,\r\n                    y2: 0,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#FFAE00' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#FFAE00' // 100% 处的颜色\r\n                    }],\r\n                },\r\n                shadowColor: '#FFAE00',\r\n        \r\n              \r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#FFAE00',\r\n               \r\n            },\r\n        },\r\n    }]\r\n};\r\nreturn option;","html":"","externalScripts":"","updaterUID":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","theme":"","layout":"","viewCount":0,"userName":"b***n","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKgejdt7Bb.png?v=1636335865374","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"b***n"}}