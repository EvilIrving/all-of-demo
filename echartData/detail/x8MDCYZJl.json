{"status":0,"data":{"cid":"x8MDCYZJl","authorUid":"bd-2903669626","authorUserName":"z***2","title":"漏斗图","description":"","latestVersion":36,"alwaysLatest":1,"createTime":"2019-12-16T06:00:05.000Z","lastUpdateTime":"2019-12-16T06:00:05.000Z","auth":2,"uid":"bd-2903669626","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":36,"parentVersion":35,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-03T09:24:08.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1576742942370-X6JMK0GY.png\";\r\n\r\nvar colors = ['#1cd389', '#668eff', '#ffc751', '#ff6e73', '#8683e6', '#9692ff'];\r\nvar url = 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAARCAMAAACLgl7OAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAaVBMVEUAAADBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcHBwcEAAAD45xibAAAAInRSTlMAmT6WJYwSfBMGZAFHmEgtkBeCCW0KAlI1k5QeiA10A1tc7ah1owAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAB7SURBVCjPtZDZDoAgDAQXvA+8bwX1/3/SGKIBEd+cx07TdgtIiAF0/mygDvnAoYDr2b3nnjP8wOaDUG6J4ncfR9cdScpMzbJECZEXT1/kesyy0n1VPv6AulF908Kg6+9DWN/hjWGUfhpgYV5Ov8ywwgUhguODddtXvXIAjuUEs/70/t4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTktMTItMTZUMTU6MzM6MDkrMDg6MDCzL2BEAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE5LTEyLTE2VDE1OjMzOjA5KzA4OjAwwnLY+AAAAABJRU5ErkJggg==';\r\n\r\n\r\n\r\nvar lineargroup = [{\r\n        value: 100,\r\n        name: '目标',\r\n        oriname: \"意向\",\r\n        number: 98756,\r\n        color: [\"rgba(29,211,137,0.8)\", \"rgba(29,211,137,0)\"]\r\n    },\r\n    {\r\n        value: 80,\r\n        name: '方案率',\r\n        oriname: \"方案\",\r\n        number: 88756,\r\n        color: [\"rgba(102,142,255,0.7)\", \"rgba(102,142,255,0)\"]\r\n    },\r\n    {\r\n        value: 60,\r\n        name: '商務率',\r\n        oriname: \"商務\",\r\n        number: 78756,\r\n        color: [\"rgba(255,198,82,0.6)\", \"rgba(255,198,82,0)\"]\r\n    },\r\n    {\r\n        value: 40,\r\n        name: '成交率',\r\n        oriname: \"即將成交\",\r\n        number: 68756,\r\n        color: [\"rgba(255,110,115,0.5)\", \"rgba(255,110,115,0)\"]\r\n    },\r\n    {\r\n        value: 20,\r\n        name: '贏單率',\r\n        oriname: \"贏單\",\r\n        number: 58756,\r\n        color: [\"rgba(134,131,230,0.4)\", \"rgba(134,131,230,0)\"]\r\n    }\r\n];\r\n\r\nvar data1 = [];\r\nvar data2 = [];\r\n\r\nfor (var i = 0; i < lineargroup.length; i++) {\r\n    var obj1 = {\r\n        value: lineargroup[i].value,\r\n        num: lineargroup[i].number,\r\n        name: lineargroup[i].oriname\r\n    };\r\n\r\n    var obj2 = {\r\n        value: lineargroup[i].value,\r\n        name: lineargroup[i].name,\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\r\n                    offset: 0,\r\n                    color: lineargroup[i].color[0]\r\n                }, {\r\n                    offset: 1,\r\n                    color: lineargroup[i].color[1]\r\n                }]),\r\n                borderWidth: 0,\r\n                opacity: 1\r\n            }\r\n        },\r\n    };\r\n    data1.push(obj1);\r\n    data2.push(obj2);\r\n}\r\n\r\nvar option = {\r\n    backgroundColor: '#ffffff',\r\n    color: colors,\r\n    // tooltip: {\r\n    //     trigger: \"item\",\r\n    //     formatter: \"{b} : {c}%\"\r\n    // },\r\n    grid: {\r\n        top: '-10',\r\n        left: \"2%\",\r\n        right: 20,\r\n        height: \"336\",\r\n        bottom: '0'\r\n    },\r\n    xAxis: {\r\n        show: false\r\n    },\r\n    yAxis: [{\r\n        show: false,\r\n        boundaryGap: false,\r\n        type: \"category\",\r\n        data: [\"转化率\", \"转化率\", \"转化率\", \"转化率\", \"转化率\"]\r\n    }],\r\n    series: [{\r\n            top: 0,\r\n            type: 'funnel',\r\n            height: '400',\r\n            gap: 20,\r\n            minSize: 150,\r\n            left: '20%',\r\n            width: '60%',\r\n            label: {\r\n                show: true,\r\n                position: 'inside',\r\n                fontSize: '14',\r\n                formatter: function(d) {\r\n                    var ins = d.name + '{aa|}\\n' + d.data.num;\r\n                    return ins\r\n                },\r\n                rich: {\r\n                    aa: {\r\n                        padding: [8, 0, 6, 0]\r\n                    }\r\n                }\r\n            },\r\n            data: data1\r\n        },\r\n        {\r\n            top: 0,\r\n            type: 'funnel',\r\n            height: '400',\r\n            gap: 20,\r\n            minSize: 150,\r\n            left: '8%',\r\n            width: '60%',\r\n            z: 2,\r\n            label: {\r\n                normal: {\r\n                    color: '#333',\r\n                    position: 'insideLeft',\r\n                    padding: [11, 25],\r\n                    formatter: function(d) {\r\n                        var ins = '{aa|' + d.name + '}\\n{bb|' + d.percent + '%}';\r\n                        return ins\r\n                    },\r\n                    rich: {\r\n                        aa: {\r\n                            align: 'center',\r\n                            color: '#666',\r\n                            fontSize: '12',\r\n                            lineHeight: '30'\r\n                        },\r\n                        bb: {\r\n                            align: 'center',\r\n                            color: '#333',\r\n                            fontSize: '22'\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: data2\r\n        },\r\n\r\n        {\r\n            type: 'pictorialBar',\r\n            name: '',\r\n            symbolSize: ['32', '17'],\r\n            symbolPosition: 'center',\r\n            symbol: url,\r\n            animation: true,\r\n            symbolClip: true,\r\n            z: 10,\r\n            data: [{\r\n                    value: 100,\r\n                },\r\n                {\r\n                    value: 100,\r\n                },\r\n                {\r\n                    value: 100,\r\n                },\r\n                {\r\n                    value: 100,\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            z: 1,\r\n            top: 36,\r\n            height: 336,\r\n            type: 'graph',\r\n            layout: 'none',\r\n            symbolSize: 0,\r\n            roam: false,\r\n            edgeSymbol: ['circle', 'arrow'],\r\n            // edgeSymbolSize: [4, 10],\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 2,\r\n                  \r\n                }\r\n            },\r\n            edgeLabel: {\r\n                normal: {\r\n                    show: true,\r\n                    rotate: 90,\r\n                    position: 'middle',\r\n                    backgroundColor: '#e4f5da',\r\n                    borderRadius: 4,\r\n                    color: '#333',\r\n                    verticalAlign: 'middle',\r\n                    fontSize: 14,\r\n                    legendHoverLink: true,\r\n                    padding: [3, 10, 5, 10],\r\n                    formatter: function(d) {\r\n                        console.log(d)\r\n                        if (d.value) {\r\n                            var ins = '{img1|} ' + '{words|' + d.value + '%}';\r\n                            return ins;\r\n                        }\r\n\r\n                    },\r\n                    rich: {\r\n                        img1: {\r\n                            backgroundColor: {\r\n                                image: uploadedDataURL,\r\n                            },\r\n                            width: 18,\r\n                            height: 16\r\n                        },\r\n                        words: {\r\n                            color: '#333',\r\n                            position: 'right',\r\n                            fontSize: 14,\r\n                            lineHeight: 20,\r\n\r\n                            padding: [0, 0, 5, 0],\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            data: [{\r\n                name: '意向',\r\n                x: 400,\r\n                y: 0\r\n            }, {\r\n                name: '方案',\r\n                x: 400,\r\n                y: 20\r\n            }, {\r\n                name: '商务',\r\n                x: 400,\r\n                y: 40\r\n            }, {\r\n                name: '即将成交',\r\n                x: 400,\r\n                y: 60\r\n            }, {\r\n                name: '贏單',\r\n                x: 400,\r\n                y: 80\r\n            }],\r\n\r\n            links: [{\r\n                    source: '意向',\r\n                    target: '方案',\r\n                    value: '67.92',\r\n\r\n                    lineStyle: {\r\n                        normal: {\r\n                            curveness: 9,\r\n                            // color: {\r\n                            //     type: 'linear',\r\n                            //     x: 0,\r\n                            //     y: 0,\r\n                            //     x2: 0,\r\n                            //     y2: 1,\r\n                            //     colorStops: [{\r\n                            //         offset: 0,\r\n                            //         color: '#1cd389' // 0% 处的颜色\r\n                            //     }, {\r\n                            //         offset: 1,\r\n                            //         color: '#668eff' // 100% 处的颜色\r\n                            //     }],\r\n                            //     global: false // 缺省为 false\r\n                            // }\r\n\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    source: '方案',\r\n                    target: '商务',\r\n                    value: '35.21',\r\n\r\n                    lineStyle: {\r\n                        normal: {\r\n                            curveness: 8,\r\n                            color: {\r\n                                type: 'linear',\r\n                                x: 0,\r\n                                y: 0,\r\n                                x2: 0,\r\n                                y2: 1,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: '#668eff' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: '#ffc751' // 100% 处的颜色\r\n                                }],\r\n                                global: false // 缺省为 false\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    source: '商务',\r\n                    target: '即将成交',\r\n                    value: '18.21',\r\n\r\n                    lineStyle: {\r\n                        normal: {\r\n                            curveness: 7,\r\n                            color: {\r\n                                type: 'linear',\r\n                                x: 0,\r\n                                y: 0,\r\n                                x2: 0,\r\n                                y2: 1,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: '#ffc751' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: '#ff6e73' // 100% 处的颜色\r\n                                }],\r\n                                global: false // 缺省为 false\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    source: '即将成交',\r\n                    target: '贏單',\r\n                    value: '20.00',\r\n\r\n                    lineStyle: {\r\n                        normal: {\r\n                            curveness: 6,\r\n                            color: {\r\n                                type: 'linear',\r\n                                x: 0,\r\n                                y: 0,\r\n                                x2: 0,\r\n                                y2: 1,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: '#ff6e73' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: '#8683e6' // 100% 处的颜色\r\n                                }],\r\n                                global: false // 缺省为 false\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            ],\r\n            \r\n        }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-2903669626","theme":"","layout":"","viewCount":3375,"userName":"z***2","commentCount":0,"starCount":16,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8MDCYZJl.png?v=1580721848746","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-funnel","series-graph","series-pictorialBar"],"customTags":["graph","pictorialBar"],"updaterUserName":"z***2"}}