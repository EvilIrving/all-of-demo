{"status":0,"data":{"cid":"xELDrLpRF","authorUid":"bd-1743862202","authorUserName":"185******99","title":"2019年10月劣化度情况  滚动条","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-12-19T12:47:35.000Z","lastUpdateTime":"2019-12-19T12:47:35.000Z","auth":2,"uid":"bd-1743862202","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-22T09:02:44.000Z","code":"  var dataMap = {};\r\n  var count = 0;\r\n\r\n  function dataFormatter(obj) {\r\n      console.log(obj)\r\n      var pList = ['北京', '天津', '河北', '山西', '内蒙古', '辽宁', '吉林', '黑龙江', '上海', '江苏', '浙江', '安徽', '福建', '江西', '山东', '河南', '湖北', '湖南', '广东', '广西', '海南', '重庆', '四川', '贵州', '云南', '西藏', '陕西', '甘肃', '青海', '宁夏', '新疆'];\r\n      var temp;\r\n      count += 1\r\n      for (var year = 2002; year <= 2005; year++) {\r\n          var max = 0;\r\n          var sum = 0;\r\n          var index = 0;\r\n          var per = 0;\r\n          temp = obj[year];\r\n          for (var i = 0, l = temp.length; i < l; i++) {\r\n              if (count == 1) {\r\n                  if (temp[i] > 10) {\r\n                      index += 1\r\n                  }\r\n              } else if (count == 2) {\r\n                  if (temp[i] > 0 && temp[i] <= 10) {\r\n                      index += 1\r\n                  }\r\n              } else if (count == 3) {\r\n                  if (temp[i] < 0) {\r\n                      index += 1\r\n                  }\r\n              }\r\n              if (temp[i] != undefined) {\r\n                  per += 1\r\n              }\r\n              max = Math.max(max, temp[i]);\r\n              sum += temp[i];\r\n              obj[year][i] = {\r\n                  name: pList[i],\r\n                  value: temp[i]\r\n              }\r\n          }\r\n          obj[year + 'max'] = per;\r\n          obj[year + 'sum'] = (index * 100 / per).toFixed(2);\r\n      }\r\n      return obj;\r\n  }\r\n  dataMap.dataPI = dataFormatter({\r\n      2005: [, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 11, 0, 0],\r\n      2004: [0, 0, 0, 0, 0, 0, , 0, 0, 0, 0, 0, 0, 0, 0, 23.14, 14.86, 0, 0, 0, 0, 0, 0, , 11.09, 0, 0, 0, 0, 0, 0],\r\n      2003: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, , 0, , , 0, 0, 0],\r\n      2002: [15.4, 12.6, 0, 15.4, 13.8, 0, 18.7, 0, 0, 18, 32.9, 0, 17.7, 0, 0, 0, 34.5, 14, 11.3, 11.2, 11.8, 42.5, 12.3, 19.4, 32.2, 13.6, 28.9, 26, 0, 16.5, 28.2]\r\n  });\r\n\r\n  dataMap.dataSI = dataFormatter({\r\n      2005: [, 5.2, 0, 0, 1.3, 0.7, 0.7, 0.9, 0, 3.8, 7.7, , 3.78, 0, 4.7, 0.6, 5.7, 7.9, 3.2, 0.1, 3, 1.7, 0.3, 0.3, 5.6, 0, 2.3, 0, 0, 5.4, 3.2],\r\n      2004: [3.72, 7.24, 3.16, 0.45, 2.76, 0, , 0.77, 0, 3.44, 6.66, 0, 4.41, 0, 4.97, 0, 0, 9.41, 0, 0, 0, 9.68, 5.39, , 0, 0, 4.11, 0.27, 1.53, 2.13, 6.31],\r\n      2003: [1.49, 1.54, 1.85, 0, 1.11, 0.98, 2.54, 0.4, 2.21, 4.22, 3.29, 0.78, 8.1, 5.41, 6.63, 0.13, 8.09, 7.84, 0.41, 4.57, 3.95, 4.23, 3.4, , 1.47, 2, , , 1.08, 0, 1.17],\r\n      2002: [0, 0, 9.6, 0, 0, 9.7, 0, 6.6, 7.1, 0, 0, 2, 0, 7, 6.2, 5.4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0]\r\n  });\r\n\r\n  dataMap.dataTI = dataFormatter({\r\n      2005: [, 0, -0.4, -5, 0, 0, 0, 0, -1.3, 0, 0, , 0, -2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1.8, 0, -4.9, 0, 0, 0],\r\n      2004: [0, 0, 0, 0, 0, -0.61, , 0, -0.84, 0, 0, -4.1, 0, -3.28, 0, 0, 0, 0, -0.19, -0.47, -3.44, 0, 0, , 0, -1, 0, 0, 0, 0, 0],\r\n      2003: [0, 0, 0, -1.16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, , 0, 0, , , 0, -0.58, 0],\r\n      2002: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n  });\r\n  var option = {\r\n      baseOption: {\r\n          timeline: {\r\n               tooltip: {\r\n              trigger: 'item',\r\n              formatter: '{b}',\r\n              textStyle: {\r\n                  fontSize: '28',\r\n              }\r\n               },\r\n              // y: 0,\r\n              axisType: 'category',\r\n              // realtime: false,\r\n              // loop: false,\r\n              autoPlay: true,\r\n              // currentIndex: 2,\r\n              playInterval: 2000,\r\n              // symbol:'roundRect',\r\n              // controlStyle: {\r\n              //     position: 'left'\r\n              // },\r\n              data: [\r\n                  '2019-5', '2019-6', '2019-9', '2019-10',\r\n              ],\r\n          },\r\n          legend: {\r\n              x: 'center',\r\n              data: ['劣化度高于10%', '劣化度0~10%', '劣化度高于IPv4'],\r\n          },\r\n          calculable: true,\r\n          grid: {\r\n              top: 80,\r\n              bottom: 100\r\n          },\r\n          tooltip: {\r\n              trigger: 'item',\r\n              formatter: \"{b}:{c}%\",\r\n              textStyle: {\r\n                  fontSize: '28',\r\n              },\r\n              //  formatter:function(parms){\r\n              //     console.log(parms)\r\n              //     var str=\"：\"+parms[0].name+\"</br>\"\r\n              //     +parms[0].marker+\"劣化度高于10%业\"+parms[0].seriesName+\"：\"+ Math.abs(parms[0].data)+\"%\"+\"</br>\"\r\n              //     +parms[1].marker+\"劣化度0~10%\"+parms[1].seriesName+\"：\"+ Math.abs(parms[1].data)+\"%\"+\"</br>\"\r\n              //     +parms[2].marker+\"劣化度高于IPv4\"+parms[2].seriesName+\"：\"+ Math.abs(parms[ 2].data)+\"%\"+\"</br>\"\r\n              //     return str;\r\n              // }\r\n          },\r\n          xAxis: [\r\n\r\n              {\r\n\r\n                  'type': 'category',\r\n                  'axisLabel': {\r\n                      'interval': 0\r\n                  },\r\n                  'data': [\r\n                      '北京', '\\n天津', '河北', '\\n山西', '内蒙古', '\\n辽宁', '吉林', '\\n黑龙江',\r\n                      '上海', '\\n江苏', '浙江', '\\n安徽', '福建', '\\n江西', '山东', '\\n河南',\r\n                      '湖北', '\\n湖南', '广东', '\\n广西', '海南', '\\n重庆', '四川', '\\n贵州',\r\n                      '云南', '\\n西藏', '陕西', '\\n甘肃', '青海', '\\n宁夏', '新疆'\r\n                  ],\r\n                  splitLine: {\r\n                      show: false\r\n                  }\r\n              }\r\n          ],\r\n          yAxis: [{\r\n              type: 'value',\r\n              name: '劣化度',\r\n              // inverse:'false',\r\n              axisLabel: {\r\n                  textStyle: {\r\n                      fontFamily: 'Microsoft?YaHei'\r\n                  },\r\n                  formatter: '{value} %',\r\n                  //          formatter: function(value, index) {\r\n                  //     var val = Math.abs(value)\r\n                  //     return val;\r\n                  // } \r\n              },\r\n              min: -7,\r\n              max: 50\r\n          }],\r\n          series: [{\r\n                  name: '劣化度高于10%',\r\n                  type: 'bar',\r\n                  itemStyle: {\r\n                      normal: {\r\n                          color: 'rgb(133,109,188)',\r\n                      }\r\n                  },\r\n                  barWidth: 8,\r\n              },\r\n              {\r\n                  name: '劣化度0~10%',\r\n                  type: 'bar',\r\n                  itemStyle: {\r\n                      normal: {\r\n                          color: 'rgb(65,58,153)',\r\n                      }\r\n                  },\r\n                  barWidth: 8,\r\n              },\r\n              {\r\n                  name: '劣化度高于IPv4',\r\n                  type: 'bar',\r\n                  itemStyle: {\r\n                      normal: {\r\n                          color: \"#f37229\",\r\n                      }\r\n                  },\r\n                  barWidth: 8,\r\n              },\r\n              {\r\n                  type: 'pie',\r\n                  center: ['78%', '25%'],\r\n                  color: ['rgb(133,109,188)', 'rgb(65,58,153)', '#f37229'],\r\n                  radius: '22%',\r\n                  label: {\r\n                      normal: {\r\n                          formatter: '{b|{b}}\\n{x|{c}%}',\r\n                          rich: {\r\n\r\n                              b: {\r\n                                  fontSize: 15,\r\n                                  lineHeight: 10,\r\n                                  color: '#000',\r\n                              },\r\n                              x: {\r\n                                  fontSize: 23,\r\n                                  lineHeight: 35,\r\n                                  color: '#000',\r\n                                  align:'center',\r\n\r\n                              },\r\n                          }\r\n                      }\r\n                  },\r\n                  labelLine: {\r\n                      normal: {\r\n                          smooth: 0.2,\r\n                          length: 30,\r\n                          length2: 30\r\n                      }\r\n                  },\r\n              }\r\n          ]\r\n      },\r\n      options: [{\r\n              title: {\r\n                  text: '2019年5月劣化度情况'\r\n              },\r\n              series: [{\r\n                      data: dataMap.dataPI['2002']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataSI['2002']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataTI['2002']\r\n                  },\r\n                  {\r\n                      data: [{\r\n                              name: '劣化度高于10%',\r\n                              value: dataMap.dataPI['2002sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度0~10%',\r\n                              value: dataMap.dataSI['2002sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度高于IPv4',\r\n                              value: dataMap.dataTI['2002sum']\r\n                          }\r\n                      ]\r\n                  }\r\n              ]\r\n          },\r\n          {\r\n              title: {\r\n                  text: '2019年6月劣化度情况'\r\n              },\r\n              series: [{\r\n                      data: dataMap.dataPI['2003']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataSI['2003']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataTI['2003']\r\n                  },\r\n                  {\r\n                      data: [{\r\n                              name: '劣化度高于10%',\r\n                              value: dataMap.dataPI['2003sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度0~10%',\r\n                              value: dataMap.dataSI['2003sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度高于IPv4',\r\n                              value: dataMap.dataTI['2003sum']\r\n                          }\r\n                      ]\r\n                  }\r\n              ]\r\n          },\r\n          {\r\n              title: {\r\n                  text: '2019年9月劣化度情况'\r\n              },\r\n              series: [{\r\n                      data: dataMap.dataPI['2004']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataSI['2004']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataTI['2004']\r\n                  },\r\n                  {\r\n                      data: [{\r\n                              name: '劣化度高于10%',\r\n                              value: dataMap.dataPI['2004sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度0~10%',\r\n                              value: dataMap.dataSI['2004sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度高于IPv4',\r\n                              value: dataMap.dataTI['2004sum']\r\n                          }\r\n                      ]\r\n                  }\r\n              ]\r\n          },\r\n          {\r\n              title: {\r\n                  text: '2019年10月劣化度情况'\r\n              },\r\n              series: [{\r\n                      data: dataMap.dataPI['2005']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataSI['2005']\r\n                  },\r\n                  {\r\n                      data: dataMap.dataTI['2005']\r\n                  },\r\n                  {\r\n                      data: [{\r\n                              name: '劣化度高于10%',\r\n                              value: dataMap.dataPI['2005sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度0~10%',\r\n                              value: dataMap.dataSI['2005sum']\r\n                          },\r\n                          {\r\n                              name: '劣化度高于IPv4',\r\n                              value: dataMap.dataTI['2005sum']\r\n                          }\r\n                      ]\r\n                  }\r\n              ]\r\n          },\r\n      ]\r\n  };","html":"","externalScripts":"","updaterUID":"bd-1743862202","theme":"","layout":"","viewCount":532,"userName":"185******99","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xELDrLpRF.png?v=1577005364708","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pie","timeline","title","tooltip"],"customTags":[],"updaterUserName":"185******99"}}