{"status":0,"data":{"cid":"xtYcLN7Aas","authorUid":"bd-1833292178","authorUserName":"和***长","title":"阶段内时钟","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-11-10T04:02:52.000Z","lastUpdateTime":"2020-11-10T04:02:52.000Z","auth":1,"uid":"bd-1833292178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-10T06:15:28.000Z","code":"// 数据进度值\r\nconst angle = 360/(24*60)\r\nconsole.log(angle)\r\nconsole.log(90 + angle*(16*60 + 45))\r\n\r\ndata = [{\r\n        name: \"https\",\r\n        value: 500,  //时长600分钟\r\n        startAngle: 90 + angle*(15*60 + 45),  //开始时间8点15分\r\n        color: '#ff0000'\r\n    },\r\n    {\r\n        name: \"ftp\",\r\n        value: 600,\r\n        startAngle: 90 + angle*(13*60 + 30),  //开始时间10点30分\r\n        color: '#F59A23'\r\n    },\r\n    {\r\n        name: \"行为\",\r\n        value: 690,\r\n        startAngle: 90 + angle*(12*60),  //开始时间12点00分\r\n        color: '#95F204'\r\n    }\r\n];\r\nsumValue = 24*60;\r\noptionData = getData(data);\r\nfunction getData(data) {\r\n    var res = {\r\n        series: [\r\n            {\r\n            name: '外部刻度',\r\n            type: 'gauge',\r\n                radius: '80%',\r\n                center: ['50%', '50%'],\r\n            //  center: ['20%', '50%'],\r\n            // radius: '70%',\r\n            min: 0, //最小刻度\r\n            max: 24, //最大刻度\r\n            splitNumber: 24, //刻度数量\r\n            startAngle: 90,\r\n            endAngle: -269.9999,\r\n            axisLine: {\r\n                show: true,\r\n                // 仪表盘刻度线\r\n                lineStyle: {\r\n                    width: 2,\r\n                    color: [\r\n                        [1, '#FFFFFF']\r\n                    ]\r\n                }\r\n            },\r\n            //仪表盘文字\r\n            axisLabel: {\r\n                show: true,\r\n                color:'#333333',\r\n                fontSize:16,\r\n                fontWeight:600,\r\n                // color: '#868FDF',\r\n                distance: -25,\r\n                formatter:function(v) {\r\n                    return v=== 24 ? '' : v\r\n                }\r\n            }, //刻度标签。\r\n            axisTick: {\r\n                show: true,\r\n                splitNumber: 12,\r\n                lineStyle: {\r\n                    color: 'rgba(215,215,215,1)',\r\n                    // color: '#3082FE', //用颜色渐变函数不起作用\r\n                    width: 2,\r\n                },\r\n                length: -8\r\n            }, //刻度样式\r\n            splitLine: {\r\n                show: true,\r\n                length: -20,\r\n                lineStyle: {\r\n                    color: 'rgba(215,215,215,1)',\r\n                    // color: '#458EFD', //用颜色渐变函数不起作用\r\n                }\r\n            }, //分隔线样式\r\n            detail: {\r\n                show: false\r\n            },\r\n            pointer: {\r\n                show: false\r\n            }\r\n        },\r\n        ]\r\n    };\r\n    for (let i = 0; i < data.length; i++) {\r\n        res.series.push({\r\n            name: data[i].name,\r\n            type: 'pie',\r\n            startAngle: data[i].startAngle,\r\n            // startAngle: 90 + angle*(15*60 + 45),  //开始时间8点15分\r\n            // clockWise: false,\r\n            z: 2,\r\n            hoverAnimation: false,\r\n            radius: [73 - i * 15 + '%', 63 - i * 15 + '%'],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false,\r\n\r\n            },\r\n            labelLine: {\r\n                show: false\r\n            },\r\n            data: [{\r\n                value: data[i].value,\r\n                name: data[i].name,\r\n                itemStyle: {\r\n                    color: data[i].color\r\n                    // color: {\r\n                    //     type: 'linear',\r\n                    //     x: 0,\r\n                    //     y: 0,\r\n                    //     x2: 1,\r\n                    //     y2: 1,\r\n                    //     colorStops: [{\r\n                    //         offset: 1,\r\n                    //         color: data[i].color\r\n                    //         // color: '#0050E2'\r\n                    //     }, {\r\n                    //         offset: 0,\r\n                    //         color: '#fff'\r\n                    //     }],\r\n                    //     global: false\r\n                    // }\r\n                }\r\n            }, {\r\n                value: sumValue - data[i].value,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                label: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.series.push({\r\n            name: '背景线',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: false,\r\n            hoverAnimation: false,\r\n            radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 10,\r\n            },\r\n            data: [{\r\n                value: 100,\r\n                itemStyle: {\r\n                    color: \"rgba(215,215,215,0.5)\",\r\n                    borderWidth: 10\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        // res.yAxis.push(data[i].name);\r\n    }\r\n    return res;\r\n}\r\n\r\n\r\nvar option = {\r\n    backgroundColor: \"#FFFFFF\",\r\n    // title: {\r\n    //     show: true,\r\n    //     text: '任务进度',\r\n    //     x: '50%',\r\n    //     y: '57%',\r\n    //     z: 8,\r\n    //     textAlign: 'center',\r\n    //     textStyle: {\r\n    //         color: '#f1f7fe',\r\n    //         fontSize: 20,\r\n    //         fontWeight: 'normal'\r\n    //     },\r\n\r\n    // },\r\n    series: optionData.series\r\n    // series: [\r\n    //     {\r\n    //         name: \"内部（环形）进度条\",\r\n    //         type: \"gauge\",\r\n    //         startAngle: 90,\r\n    //         // endAngle: -269.9999,\r\n    //         // center: ['20%', '50%'],\r\n    //         radius: '60%',\r\n    //         splitNumber: 24,\r\n    //         axisLine: {\r\n    //             lineStyle: {\r\n    //                 color: [\r\n    //                     [dataArr / 24, '#458EFD'],\r\n    //                     [1, \"#FFFFFF\"]\r\n    //                 ],\r\n    //                 width: 14\r\n    //             }\r\n    //         },\r\n    //         axisLabel: {\r\n    //             show: false,\r\n    //         },\r\n    //         axisTick: {\r\n    //             show: false,\r\n\r\n    //         },\r\n    //         splitLine: {\r\n    //             show: false,\r\n    //         },\r\n    //         pointer: {\r\n    //             show: false,\r\n    //         },\r\n    //     },\r\n    //     {\r\n    //         name: '外部刻度',\r\n    //         type: 'gauge',\r\n    //         //  center: ['20%', '50%'],\r\n    //         radius: '70%',\r\n    //         min: 0, //最小刻度\r\n    //         max: 24, //最大刻度\r\n    //         splitNumber: 24, //刻度数量\r\n    //         startAngle: 90,\r\n    //         endAngle: -269.9999,\r\n    //         axisLine: {\r\n    //             show: true,\r\n    //             // 仪表盘刻度线\r\n    //             lineStyle: {\r\n    //                 width: 2,\r\n    //                 color: [\r\n    //                     [1, '#FFFFFF']\r\n    //                 ]\r\n    //             }\r\n    //         },\r\n    //         //仪表盘文字\r\n    //         axisLabel: {\r\n    //             show: true,\r\n    //             color: '#868FDF',\r\n    //             distance: -25,\r\n    //             formatter:function(v) {\r\n    //                 return v=== 24 ? '' : v\r\n    //             }\r\n    //         }, //刻度标签。\r\n    //         axisTick: {\r\n    //             show: true,\r\n    //             splitNumber: 12,\r\n    //             lineStyle: {\r\n    //                 color: '#3082FE', //用颜色渐变函数不起作用\r\n    //                 width: 2,\r\n    //             },\r\n    //             length: -8\r\n    //         }, //刻度样式\r\n    //         splitLine: {\r\n    //             show: true,\r\n    //             length: -20,\r\n    //             lineStyle: {\r\n    //                 color: '#458EFD', //用颜色渐变函数不起作用\r\n    //             }\r\n    //         }, //分隔线样式\r\n    //         detail: {\r\n    //             show: false\r\n    //         },\r\n    //         pointer: {\r\n    //             show: false\r\n    //         }\r\n    //     },\r\n    //     /*内部*/\r\n    //     // {\r\n    //     //     type: 'pie',\r\n    //     //     radius: ['0', '40%'],\r\n    //     //     center: ['50%', '50%'],\r\n    //     //     z: 8,\r\n    //     //     hoverAnimation: false,\r\n    //     //     data: [{\r\n    //     //         name: '检查进度',\r\n    //     //         value: dataArr,\r\n    //     //         itemStyle: {\r\n    //     //             normal: {\r\n    //     //                 color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n    //     //                     offset: 0,\r\n    //     //                     color: '#3398ff'\r\n    //     //                 }, {\r\n    //     //                     offset: 1,\r\n    //     //                     color: '#7db0fd'\r\n    //     //                 }])\r\n    //     //             }\r\n\r\n    //     //         },\r\n    //     //         label: {\r\n    //     //             normal: {\r\n    //     //                 formatter: function(params) {\r\n    //     //                     return params.value + '%';\r\n    //     //                 },\r\n    //     //                 color: '#FFFFFF',\r\n    //     //                 fontSize: 54,\r\n    //     //                 fontWeight: \"bold\",\r\n    //     //                 position: 'center',\r\n    //     //                 show: true\r\n    //     //             }\r\n    //     //         },\r\n    //     //         labelLine: {\r\n    //     //             show: false\r\n    //     //         }\r\n    //     //     }],\r\n    //     // },\r\n    //     /*外一层*/\r\n    //     // {\r\n    //     //     type: \"pie\",\r\n    //     //     radius: \"45%\",\r\n    //     //     startAngle: 220,\r\n    //     //     endAngle: -40,\r\n    //     //     hoverAnimation: false,\r\n    //     //     center: [\"50%\", \"50%\"],\r\n    //     //     avoidLabelOverlap: false,\r\n    //     //     label: {\r\n    //     //         show: false\r\n    //     //     },\r\n    //     //     labelLine: {\r\n    //     //         show: false\r\n    //     //     },\r\n    //     //     data: [{\r\n    //     //         value: 1,\r\n    //     //         itemStyle: {\r\n    //     //             normal: {\r\n    //     //                 color: '#8DC4FD'\r\n    //     //             }\r\n    //     //         }\r\n    //     //     }],\r\n    //     // },\r\n    //     //外二层圈\r\n    //     // {\r\n    //     //     type: \"pie\",\r\n    //     //     radius: \"50%\",\r\n    //     //     center: [\"50%\", \"50%\"],\r\n    //     //     avoidLabelOverlap: false,\r\n    //     //     z: 0,\r\n    //     //     hoverAnimation: false,\r\n    //     //     label: {\r\n    //     //         show: false\r\n    //     //     },\r\n    //     //     labelLine: {\r\n    //     //         show: false\r\n    //     //     },\r\n    //     //     data: [{\r\n    //     //         \"value\": 1,\r\n    //     //         itemStyle: {\r\n    //     //             normal: {\r\n    //     //                 color: '#e3edf8'\r\n    //     //             }\r\n    //     //         }\r\n    //     //     }]\r\n    //     // }\r\n    // ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1833292178","theme":"","layout":"","viewCount":61,"userName":"和***长","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xtYcLN7Aas.png?v=1604988928920","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","series-pie"],"customTags":[],"updaterUserName":"和***长"}}