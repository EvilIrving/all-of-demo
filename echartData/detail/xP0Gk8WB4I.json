{"status":0,"data":{"cid":"xP0Gk8WB4I","authorUid":"bd-3147228251","authorUserName":"靇***风","title":"拆分负荷数据","description":"拆分半个小时负荷数据以秒计","latestVersion":4,"alwaysLatest":0,"createTime":"2021-12-06T09:19:19.000Z","lastUpdateTime":"2021-12-06T10:11:27.000Z","auth":2,"uid":"bd-3147228251","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-06T10:11:27.000Z","code":"Date.prototype.Format = function (fmt) {\n    //author: meizz\n    var o = {\n        'M+': this.getMonth() + 1, //月份\n        'd+': this.getDate(), //日\n        'h+': this.getHours(), //小时\n        'm+': this.getMinutes(), //分\n        's+': this.getSeconds(), //秒\n        'q+': Math.floor((this.getMonth() + 3) / 3), //季度\n        S: this.getMilliseconds(), //毫秒\n    };\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));\n    for (var k in o)\n        if (new RegExp('(' + k + ')').test(fmt))\n            fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ('00' + o[k]).substr(('' + o[k]).length));\n    return fmt;\n};\nlet dataX = [];\nlet dataY = [];\nfunction points(y1, y2, date) {\n    let time = 30 * 60;\n    if (y1 === y2) {\n        for (let i = 0; i < time; i++) {\n            let max = y1 + 0.001;\n            let min = y1 - 0.001;\n            let n = new Date(date.getTime() + i).Format('yyyy-MM-dd hh:mm:ss');\n            dataX.push(n);\n            dataY.push(Math.round((Math.random() * (max - min + 0.5) + min) * 100) / 100);\n        }\n    } else {\n        //若x1≠x2，则斜率k=(y2－y1)/(x2－x1)\n        let k = (y2 - y1) / (time - 1);\n        //上下浮动范围\n        let scope = Math.abs(y1 - y2) * 0.001;\n        for (let i = 0; i < time; i++) {\n            // 根据斜率，计算y坐标\n            let y = k * (i - 1) + y1;\n            let max = y + scope;\n            let min = y - scope;\n            let n = new Date(date.getTime() + i * 1000).Format('yyyy-MM-dd hh:mm:ss');\n            dataX.push(n);\n            dataY.push(Math.round((Math.random() * (max - min + 0.5) + min) * 100) / 100);\n        }\n    }\n}\n\n// let jsonData = [\n//     { load: 26.51687216, date: '2021-12-01 00:00:00' },\n//     { load: 23.83746577, date: '2021-12-01 00:30:00' },\n//     { load: 23.83746577, date: '2021-12-01 00:01:00' },\n// ];\nlet jsonData = [];\nlet nowDate = new Date('2021-12-01 00:00:00');\nfor (let i = 0; i < 48; i++) {\n    jsonData.push({\n        load: Math.round((Math.random() * (30 - 20 + 0.5) + 20) * 100) / 100,\n        date: new Date(nowDate.getTime() + i * 30 * 60 * 1000).Format('yyyy-MM-dd hh:mm:ss'),\n    });\n}\nif (jsonData.length > 1) {\n    for (let i = 1; i < jsonData.length; i++) {\n        points(jsonData[i - 1].load, jsonData[i].load, new Date(jsonData[i - 1].date));\n    }\n    dataX.push(jsonData[jsonData.length - 1].date);\n    dataY.push(jsonData[jsonData.length - 1].load);\n}\noption = {\n    color: ['#22DCB8', '#F47100'],\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'cross',\n            crossStyle: {\n                color: '#999',\n            },\n            lineStyle: {\n                type: 'dashed',\n            },\n        },\n    },\n    legend: {\n        // orient: 'horizontal',\n        icon: 'rect',\n        show: true,\n        right: 0,\n        top: 25,\n    },\n    xAxis: {\n        type: 'category',\n        data: dataX,\n        splitLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false,\n        },\n    },\n    yAxis: {\n        type: 'value',\n        axisLabel: {\n            color: '#999',\n            textStyle: {\n                fontSize: 12,\n            },\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#F3F4F4',\n                type: 'dashed', // y轴分割线类型\n            },\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false,\n        },\n    },\n    dataZoom: [\n        {\n            type: 'inside',\n            start: 0,\n            end: 10,\n        },\n        {\n            start: 0,\n            end: 10,\n        },\n    ],\n    series: [\n        {\n            name: '数据',\n            type: 'line',\n            smooth: true,\n            symbol: 'none',\n            data: dataY,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-3147228251","theme":"","layout":"","viewCount":0,"userName":"靇***风","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xP0Gk8WB4I.png?v=1638785488065","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-line","tooltip"],"customTags":[],"updaterUserName":"靇***风"}}