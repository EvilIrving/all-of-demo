{"status":0,"data":{"cid":"xryr3rtGOz","authorUid":"bd-3929454393","authorUserName":"默***灵","title":"性质","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-02-27T07:15:56.000Z","lastUpdateTime":"2018-02-27T07:15:56.000Z","auth":2,"uid":"bd-3929454393","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.0.3","versionCreateTime":"2018-02-27T07:16:26.000Z","code":"var startColor = ['#dd8361', '#47c7ee', '#d9b778', '#4d37e5'];\nvar endColor = ['#db4b51', '#48d5a9', '#b5cf43', '#8222fe'];\nvar endData = [];\nvar data = [{\n    \"name\": \"第一次\",\n    \"value\": 300\n}, {\n    \"name\": \"第二次\",\n    \"value\": 200\n}, {\n    \"name\": \"第三次\",\n    \"value\": 900\n},\n {\n    \"name\": \"第四次及以上\",\n    \"value\": 500\n}]\ndata.map((item, index) => {\n    endData.push({\n        value: item.value\n    })\n});\nvar allData = data.concat(endData);\n for(let i=0;i<allData.length;i++){\n            if(i<data.length){\n                allData[i].itemStyle = {\n                    normal: {\n                        color: {\n                            type: 'linear',\n                            x: 1,\n                            y: 0,\n                            x2: 0,\n                            y2: 1,\n                            colorStops: [{\n                                offset: 0, color: endColor[i] // 0% 处的颜色\n                            }, {\n                                offset: 0.5, color: endColor[i] // 0% 处的颜色\n                            }, {\n                                offset: 1, color: startColor[i] // 100% 处的颜色\n                            }],\n                            globalCoord: false // 缺省为 false\n                        }\n                    }\n                };\n            }else{\n                allData[i].itemStyle= {\n                    normal: {\n                        color: 'pink',\n                        opacity:0,\n                    }\n                };\n                allData[i].label={\n                    normal:{\n                        show:false\n                    }\n                }\n            }\n        }\n\n\n//数字每三位 加，的\nfunction toThousands(num) {\n        var result = '', counter = 0;\n        num = (num || 0).toString();\n        for (let i = num.length - 1; i >= 0; i--) {\n            counter++;\n            result = num.charAt(i) + result;\n            if (!(counter % 3) && i != 0) {\n                result = ',' + result;\n            }\n        }\n        return result;\n    };\n    \noption = {\n    backgroundColor:'#021d49',\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} :<br/>{b}: {c}人\"\n    },\n    title: {\n        text: \"性质\",\n        left: '49.5%',\n        top: '48%',\n        textAlign: 'center',\n        textBaseline: 'middle',\n        textStyle: {\n            fontSize: 16\n        }\n    },\n    series: [\n        // 内层圆圈\n        {\n            name: \"性质\",\n            type: 'pie',\n            radius: ['0', '38'],\n            center: ['50%', '50%'],\n            startAngle: 180,\n            // center: ['50%', '100%'],\n            z: 5,\n            animation: false,\n            hoverAnimation: false,\n            avoidLabelOverlap: false,\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            data: [{\n                    value: 10,\n                    name: '年龄',\n                    itemStyle: {\n                        normal: {\n                            color: '#d4d4d6',\n                            shadowColor: 'rgba(0, 0, 0, 0.6)',\n                            shadowBlur: 30,\n                        }\n                    }\n                },\n                {\n                    value: 10,\n                    name: '年龄',\n                    itemStyle: {\n                        normal: {\n                            color: '#d4d4d6',\n                            opacity: 0,\n                        }\n                    }\n                },\n            ],\n            tooltip: {\n                show: false\n            }\n        },\n        // 外层圆圈\n        {\n             name: \"性质\",\n            type: 'pie',\n            radius: ['86', '95'],\n            center: ['50%', '50%'],\n            // center: ['50%', '100%'],\n            animation: false,\n            z: 3,\n            avoidLabelOverlap: false,\n            hoverAnimation: false,\n            startAngle: 180,\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            tooltip: {\n                show: false\n            },\n            data: [{\n                    value: 10,\n                    name: name,\n                    itemStyle: {\n                        normal: {\n                            color: 'rgba(210, 210, 210, 0.55)',\n                            shadowColor: 'rgba(0, 0, 0, 1)',\n                            shadowBlur: 100\n                        }\n                    }\n                },\n                {\n                    value: 10,\n                    name: name,\n                    itemStyle: {\n                        normal: {\n                            color: 'rgba(210, 210, 210, 0.55)',\n                            opacity: 0,\n                        }\n                    }\n                },\n            ]\n        },\n        // 中间数据层 所传的第三组数据才是真实的数据\n        {\n             name: \"性质\",\n            type: 'pie',\n            radius: ['38', '86'],\n            center: ['50%', '50%'],\n            hoverAnimation: false,\n            // minAngle: 10,\n            avoidLabelOverlap: false,\n            illShowZeroSum: true,\n            startAngle: 180,\n            label: {\n                normal: {\n                    show: true,\n                    // 判断6个字以上的份两行 数字过千的有逗号\n                    formatter: function(prams) {\n                        let ret = \"\"; //拼接加\\n返回的类目项\n                        let maxLength = 3; //每项显示文字个数\n                        let valLength = prams.name.length; //X轴类目项的文字个数\n                        let rowN = Math.round(valLength / maxLength); //类目项需要换行的行数\n                        if (rowN > 1) //如果类目项的文字大于3,\n                        {\n                            for (let i = 0; i < rowN; i++) {\n                                let temp = \"\"; //每次截取的字符串\n                                let start = i * maxLength; //开始截取的位置\n                                let end = start + maxLength; //结束截取的位置\n                                //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧\n                                temp = prams.name.substring(start, end) + \"\\n\";\n                                ret += temp; //凭借最终的字符串\n                            }\n                            return '{b|' + ret + '}' + '{c|' + toThousands(prams.value) + '}';\n                        } else {\n                            return '{b|' + prams.name + '}\\n' + '{c|' + toThousands(prams.value) + '}';\n                        }\n                    },\n                    position: 'outside',\n                    textStyle: {\n                        fontSize: '14',\n                    },\n                    rich: {\n                        b: {\n                            color: '#f2f2f2',\n                            lineHeight: 15,\n                        },\n                        c: {\n                            color: '#7fe3ff'\n                        }\n                    }\n                },\n                emphasis: {\n                    show: true,\n                }\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                    length: 15,\n                    length2: 10,\n                }\n            },\n            data: allData\n        },\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3929454393","theme":"","layout":"","viewCount":582,"userName":"默***灵","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryr3rtGOz.png?v=1519715756993","isCustomThumbnail":1,"builtinTags":["category-work","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"默***灵"}}