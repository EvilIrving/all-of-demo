{"status":0,"data":{"cid":"xcAspR-krL","authorUid":"bd-1279899726","authorUserName":"设***空","title":"柱图顶端趋图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-12-01T14:02:15.000Z","lastUpdateTime":"2020-12-01T14:02:15.000Z","auth":2,"uid":"bd-1279899726","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-01T14:10:03.000Z","code":"var legendData = ['商超', '餐饮', '小吃', '其他', '年同比'];\nvar value1 = [\n    [75.45, 66.42, 150.23, 49.96, 60.67, 61.57],\n    [119.68, 54.72, 119.09, 44.76, 27.40, 24.57],\n    [105.27, 79.34, 152.96, 40.09, 55.33, 36.46],\n    [0.00, 0.00, 0.34, 0.00, 0.00, 0.00]\n];\nvar value2 = [\n    [0.00, 0.00, 0.00, 0.00],\n    [0.00, 0.00, 0.00, 0.00],\n    [0.00, 0.00, 0.00, 0.00],\n    [0.00, 0.00, 0.00, 0.00],\n    [0.00, 0.00, 0.00, 0.00],\n    [0.00, 0.00, 0.00, 0.00]\n]\n\nvar series = []\n\noption = {\n    tooltip: {\n        trigger: 'axis'\n    },\n    legend: {\n        data: legendData\n    },\n    xAxis: {\n        data: [\"黄冈\", \"十堰\", \"孝感\", \"咸宁\", \"恩施\", \"宜昌\"]\n    },\n    yAxis: [{\n        type: 'value'\n    }, {\n        type: 'value',\n        name: '%',\n    }],\n    series: []\n};\nseries = value1.map(function(data, index) {\n    return {\n        type: 'bar',\n        name: legendData[index],\n        itemStyle: {\n            opacity: 0.5\n        },\n        data: data\n    };\n})\nseries.unshift({\n    type: 'custom',\n    name: '年同比',\n    renderItem: function (params, api) {\n    var xValue = api.value(0);\n    var currentSeriesIndices = api.currentSeriesIndices();\n    var barLayout = api.barLayout({\n        barGap: '30%',\n        barCategoryGap: '20%',\n        count: currentSeriesIndices.length - 1\n    });\n\n    var points = [];\n    for (var i = 0; i < currentSeriesIndices.length; i++) {\n        var seriesIndex = currentSeriesIndices[i];\n        if (seriesIndex !== params.seriesIndex) {\n            var point = api.coord([xValue, api.value(seriesIndex)]);\n            point[0] += barLayout[i - 1].offsetCenter;\n            point[1] -= 20;\n            points.push(point);\n        }\n    }\n    var style = api.style({\n        stroke: api.visual('color'),\n        fill: null\n    });\n\n    return {\n        type: 'polyline',\n        shape: {\n            points: points\n        },\n        style: style\n    };\n},\n    yAxisIndex: 1,\n    itemStyle: {\n        borderWidth: 2\n    },\n    encode: {\n        x: 0,\n        y: [1, 2, 3, 4, 5]\n    },\n    data: value2.map((item, index) => ([index, ...item])),\n    z: 100\n})\noption.series = series\nconsole.log(option.series)","html":"","externalScripts":"","updaterUID":"bd-1279899726","theme":"","layout":"","viewCount":74,"userName":"设***空","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcAspR-krL.png?v=1606831803665","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-custom","tooltip"],"customTags":[],"updaterUserName":"设***空"}}