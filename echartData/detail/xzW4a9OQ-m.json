{"status":0,"data":{"cid":"xzW4a9OQ-m","authorUid":"obd-oE77DQ18KTsYnNX52FBq8rTC3JjrF4Z","authorUserName":"c***5","title":"中国各省份私家汽车拥有量","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-27T01:59:23.000Z","lastUpdateTime":"2020-12-27T01:59:23.000Z","auth":2,"uid":"obd-oE77DQ18KTsYnNX52FBq8rTC3JjrF4Z","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-27T01:59:23.000Z","code":"var name_title = \"中国各省份私家汽车拥有量\"\r\nvar nameColor = \" rgb(0, 0, 0)\"\r\nvar name_fontFamily = '宋体'\r\nvar name_fontSize = 38\r\n\r\nvar data = [\r\n\r\n    {\r\n        name: \"北京\",\r\n        value: 497.03,\r\n        scale: '2.21%'\r\n    },\r\n    {\r\n        name: \"天津\",\r\n        value: 259.43,\r\n        scale: '1.15%'\r\n    },\r\n    {\r\n        name: \"河北\",\r\n        value: 1518.86,\r\n        scale: '6.75%'\r\n    },\r\n    {\r\n        name: \"山西\",\r\n        value: 640.82,\r\n        scale: '2.85%'\r\n    },\r\n    {\r\n        name: \"内蒙古\",\r\n        value: 530.39,\r\n        scale: '2.36%'\r\n    },\r\n    {\r\n        name: \"辽宁\",\r\n        value: 750.63,\r\n        scale: '3.33%        '\r\n    },\r\n    {\r\n        name: \"吉林\",\r\n        value: 408.08,\r\n        scale: '1.81%        '\r\n    },\r\n    {\r\n        name: \"黑龙江\",\r\n        value: 463.57,\r\n        scale: '2.06%      '\r\n    },\r\n    {\r\n        name: \"上海\",\r\n        value: 321.27,\r\n        scale: '1.43%        '\r\n    },\r\n    {\r\n        name: \"江苏\",\r\n        value: 1639.89,\r\n        scale: '7.29%       '\r\n    },\r\n    {\r\n        name: \"浙江\",\r\n        value: 1459.21,\r\n        scale: '6.48%       '\r\n    },\r\n    {\r\n        name: \"安徽\",\r\n        value: 794.26,\r\n        scale: '3.53%        '\r\n    },\r\n    {\r\n        name: \"福建\",\r\n        value: 590.51,\r\n        scale: '2.62%        '\r\n    },\r\n    {\r\n        name: \"江西\",\r\n        value: 537.77,\r\n        scale: '2.39%        '\r\n    },\r\n    {\r\n        name: \"山东\",\r\n        value: 2092.39,\r\n        scale: '9.30%       '\r\n    },\r\n    {\r\n        name: \"河南\",\r\n        value: 1471.95,\r\n        scale: '6.54%       '\r\n    },\r\n    {\r\n        name: \"湖北\",\r\n        value: 772.35,\r\n        scale: '3.43%        '\r\n    },\r\n    {\r\n        name: \"湖南\",\r\n        value: 807.96,\r\n        scale: '3.59%        '\r\n    },\r\n    {\r\n        name: \"广东\",\r\n        value: 2037.15,\r\n        scale: '9.05%       '\r\n    },\r\n    {\r\n        name: \"广西\",\r\n        value: 613.4,\r\n        scale: '2.73% '\r\n    },\r\n    {\r\n        name: \"海南\",\r\n        value: 117.91,\r\n        scale: '0.52%        '\r\n    },\r\n    {\r\n        name: \"重庆\",\r\n        value: 403.3,\r\n        scale: '1.79%         '\r\n    },\r\n    {\r\n        name: \"四川\",\r\n        value: 1058.68,\r\n        scale: '4.70%       '\r\n    },\r\n    {\r\n        name: \"贵州\",\r\n        value: 487.45,\r\n        scale: '2.17%        '\r\n    },\r\n    {\r\n        name: \"云南\",\r\n        value: 681.57,\r\n        scale: '3.03%        '\r\n    },\r\n    {\r\n        name: \"西藏\",\r\n        value: 47.82,\r\n        scale: '0.21%     '\r\n    },\r\n    {\r\n        name: \"陕西\",\r\n        value: 609.24,\r\n        scale: '2.71%  '\r\n    },\r\n    {\r\n        name: \"甘肃\",\r\n        value: 290.91,\r\n        scale: '1.29%'\r\n    },\r\n    {\r\n        name: \"青海\",\r\n        value: 99.64,\r\n        scale: '0.44% '\r\n    },\r\n    {\r\n        name: \"宁夏\",\r\n        value: 143.16,\r\n        scale: '0.64%'\r\n    },\r\n    {\r\n        name: \"新疆\",\r\n        value: 362.41,\r\n        scale: '1.61%'\r\n    },\r\n\r\n];\r\nvar mapName = 'china'\r\nvar geoCoordMap = {};\r\n\r\n/*获取地图数据*/\r\nmyChart.showLoading();\r\nvar mapFeatures = echarts.getMap(mapName).geoJson.features;\r\nmyChart.hideLoading();\r\nmapFeatures.forEach(function(v) { // 地区名称\r\nvar name = v.properties.name;\r\n// 地区经纬度\r\n geoCoordMap[name] = v.properties.cp;\r\n\r\n});\r\n\r\nconsole.log(data)\r\nvar max = 2100,\r\n    min = 40; // todo \r\nvar maxSize4Pin = 80,\r\n    minSize4Pin = 20;\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    console.log(res)\r\n    return res;\r\n};\r\noption = {\r\n    title: {\r\n        text: name_title,\r\n       \r\n        x: 'center',\r\n        textStyle: {\r\n            color: nameColor,\r\n            fontFamily: name_fontFamily,\r\n            fontSize: name_fontSize\r\n        },\r\n      \r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function(params) {\r\n            console.log(params.data)\r\n            if (params.data.scale) {\r\n                var toolTiphtml = params.data.name + ':<br>' + params.data.scale\r\n                return toolTiphtml;\r\n            }\r\n            return;\r\n        }\r\n    },\r\n    visualMap: {\r\n        show: true,\r\n        min: 40,\r\n        max: 2100,\r\n        left: 'left',\r\n        top: 'bottom',\r\n        text: ['2100万辆', '40万辆'], // 文本，默认为数值文本\r\n        calculable: false,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n         \r\n          color:['#00467F', '#A5CC82']\r\n           \r\n       \r\n            \r\n        }\r\n    },\r\n\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#031525',\r\n                borderColor: '#3B5077',\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2B91B7',\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n            name: '散点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbolSize: function(val) {\r\n                return val[2] /100;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#05C3F9'\r\n                }\r\n            }\r\n        },\r\n        {\r\n            type: 'map',\r\n            map: mapName,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n        {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            symbol: 'pin', //气泡\r\n\r\n            symbolSize: function(val) {\r\n                var a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n                var b = minSize4Pin - a * min;\r\n                b = maxSize4Pin - a * max;\r\n                return (a * val[2] + b);\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: '{@[2]}'+'万辆',\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 9,\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#F62157', //标志颜色\r\n                }\r\n            },\r\n            zlevel: 6,\r\n            data: convertData(data),\r\n        },\r\n        {\r\n            name: 'Top 10',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 10)),\r\n            symbolSize: function(val) {\r\n                return val[2] / 100;\r\n            },\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'yellow',\r\n                    shadowBlur: 10,\r\n                    shadowColor: 'yellow'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        },\r\n\r\n    ]\r\n};\r\nmyChart.setOption(option);","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-oE77DQ18KTsYnNX52FBq8rTC3JjrF4Z","theme":"","layout":"","viewCount":241,"userName":"c***5","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xzW4a9OQ-m.png?v=1609034363810","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"c***5"}}