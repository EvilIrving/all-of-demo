{"status":0,"data":{"cid":"xnVmzkV9ew","authorUid":"bd-4230294754","authorUserName":"无***K","title":"环形图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-08-04T07:04:29.000Z","lastUpdateTime":"2020-08-04T07:04:29.000Z","auth":2,"uid":"bd-4230294754","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-14T10:05:03.000Z","code":"var dataStyle = {\n    normal: {\n        label: {\n            show: false\n        },\n        labelLine: {\n            show: false\n        },\n        shadowBlur: 10,\n        shadowColor: 'rgba(40, 40, 40, 0.3)',\n    }\n};\nvar placeHolderStyle = {\n    normal: {\n        color: 'rgba(0,0,0,0)',\n        label: {\n            show: false\n        },\n        labelLine: {\n            show: false\n        }\n    },\n    // emphasis: {\n    //     color: 'rgba(0,0,0,0)'\n    // }\n};\nvar item = {\n    value: 50,\n    name: 'invisible',\n    tooltip: {\n        show: false\n    },\n    itemStyle: placeHolderStyle\n}\nvar da = [\n        {name: '公司1', value: 300},\n        {name: '公司2', value: 200},\n        {name: '公司3', value: 100},\n        {name: '公司4', value: 50},\n        {name: '公司5', value: 25},\n        {name: '公司6', value: 15}\n    ]\nvar daa = [\n        {name: '公司1', value: 300, percent: '43.47%'},\n        {name: '公司2', value: 200, percent: '28.98%'},\n        {name: '公司3', value: 100, percent: '14.49%'},\n        {name: '公司4', value: 50, percent: '7.24%'},\n        {name: '公司5', value: 25, percent: '2.89%'},\n        {name: '公司6', value: 15, percent: '2.1%'}\n    ]\n\nvar total = 0\ndaa.map(res => {\n    total += res.value\n})\ndaa.forEach(res => {\n    res.percent = ((res.value / total) * 100).toFixed(1);\n})\nconsole.log(daa)\nvar color = [\"#857ABA\", \"#4C3CAE\", \"#8C0F86\", \"#CA2C95\", \"#E1A4C4\", \"#857ABA\"]\nvar data1 = []\nvar title = '供应商'\nvar arrName = getArrayValue(daa, \"name\");\nvar arrValue = getArrayValue(daa, \"value\");\nvar sumValue = eval(arrValue.join('+'));\nvar objData = array2obj(daa, \"name\");\n\nfunction getArrayValue(array, key) {\n    var key = key || \"value\";\n    var res = [];\n    if (array) {\n        array.forEach(function(t) {\n            res.push(t[key]);\n        });\n    }\n    return res;\n}\n\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\nfor (let i = 0; i < arrValue.length; i++) {\n    data1.push({\n        name: title,\n        type: 'pie',\n        // center: [\"18%\", \"50%\"],\n        clockWise: false,\n        // radius: [180, 200],\n        radius: [150 - i * 20, 170 - i * 20],\n        label: {\n            show: false\n        },\n        // itemStyle: dataStyle,\n        hoverAnimation: false,\n        data: [{\n            value: arrValue[i],\n            name: arrName[i]\n        }, item]\n    })\n}\noption = {\n    // backgroundColor: '#1C0D22',\n    color: color,\n    tooltip: {\n        show: true,\n        formatter: \"{a} <br/>{b} : {c}\"\n    },\n    legend: {\n        itemGap: 7,\n        top: '27%',\n        right: '10px',\n        formatter: function(name) {\n            return \"{percent|\" + objData[name].percent + \"% }{name|\" + name + \" }{value|\" + (objData[name].value) + \"项}\"\n        },\n        textStyle: {\n            rich: {\n                percent: {\n                    fontSize: 15,\n                    color: ''\n                },\n                name: {\n                    fontSize: 18,\n                    color: \"rgba(0,0,0,.45)\"\n                },\n                value: {\n                    fontSize: 14,\n                    // lineHeight: 18,\n                    color: \"rgba(0,0,0,.85)\"\n                }\n            }\n        },\n        orient: 'vertical',\n        data: arrName\n    },\n    series: data1\n};","html":"","externalScripts":"","updaterUID":"bd-4230294754","theme":"","layout":"","viewCount":305,"userName":"无***K","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnVmzkV9ew.png?v=1597399503408","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"无***K"}}