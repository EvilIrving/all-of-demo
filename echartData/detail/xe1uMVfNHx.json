{"status":0,"data":{"cid":"xe1uMVfNHx","authorUid":"obd-oMp8xbVxmYMgfq6P_Ifounj-c9DqD2w","authorUserName":"秒***z","title":"价格区间-TT","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-12-03T07:45:11.000Z","lastUpdateTime":"2021-12-03T08:09:37.000Z","auth":2,"uid":"obd-oMp8xbVxmYMgfq6P_Ifounj-c9DqD2w","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-03T08:09:37.000Z","code":"var jigouPrice1 = [[2600, 3500, ],[3000, 4000, ],[3500, 4000,],[3300, 3600,]];\nvar jigouPrice2 = [[2600, 3500, ],[3000, 4000, ],[3500, 5000,],[3300, 3600,]];\nvar jigouPrice3 = [[2600, 3500, ],[3000, 4000, ],[3500, 4000,],[3300, 3600,]];\nvar option = setOption();\n\nfunction setOption() {\n    let option;\n\n    const category = ['1', '2', '3', '4'];\n    const name = ['一级', '二级', '三级'];\n    const data = [jigouPrice1, jigouPrice2, jigouPrice3];\n\n    let series = [];\n    data.forEach((item, i) => {\n        series = [...series, ...createSeries(item, name[i], true)];\n    });\n\n    let yAxis = {\n        type: 'value',\n        axisLine: {\n            lineStyle: {\n                color: '#fff',\n            },\n        },\n    };\n\n    let xAxis = {\n        type: 'category',\n        splitLine: {\n            show: false,\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#fff',\n            },\n        },\n        data: category,\n    };\n\n    if (false) {\n        [xAxis, yAxis] = [yAxis, xAxis];\n    }\n\n    option = {\n        backgroundColor: '#0e1c47',\n        title: {\n            text: '价格区间(元)',\n            top: '19',\n            textStyle: {\n                color: '#fff',\n                fontSize: '14',\n            },\n            // subtext: 'From ExcelHome',\n            // sublink: 'http://e.weibo.com/1341556070/AjQH99che'\n        },\n        color: ['#c63c26', '#65AC3A', '#36cfc9'],\n        legend: {\n            data: name,\n            top: '33',\n            textStyle: {\n                color: '#fff',\n            },\n        },\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                // 坐标轴指示器，坐标轴触发有效\n                type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n            },\n            formatter: function (params) {\n                var html = '';\n                var axisValue = '';\n                params.forEach((item) => {\n                    axisValue = item.axisValue;\n                    const range = item.data.range;\n                    html += item.marker + item.name + range[0] + ' - ' + range[1] + '<br/>';\n                });\n                const {\n                    name,\n                    data: { range },\n                } = params[0];\n                return axisValue + '<br/>' + html;\n            },\n        },\n        grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true,\n        },\n        xAxis: xAxis,\n        yAxis: yAxis,\n        series: series,\n    };\n\n    return option;\n}\n\n// 轴数据处理\nfunction dataFormat(data, name, isReverse) {\n    let min = []; // 区间的最小值\n    let max = []; // 区间的最大值\n    let minLabel = []; // 显示区间的最小值的 label 数据，在 max 上通过 markpoint 实现，以控制 label 颜色值和显示的柱子颜色值一致，并且显示隐藏有效\n\n    data.forEach((item, i) => {\n        min.push(item[0]);\n\n        // 横向：coord: [offsetx，y]，等同于 xAxis: offsetx, yAxis: y。其中，offsetx 表示偏移值，y 表示bar的索引。\n        // 竖向：[x, offsety]\n        const coord = isReverse ? [item[0], i] : [i, item[0]];\n        minLabel.push({\n            value: item[0], // 对值进行格式化\n            coord: item[0] ? coord : [],\n        });\n\n        max.push({\n            value: item[1] - item[0], // 差值作为叠加值\n            range: item, // tooltip 显示\n            name, // legend 显示\n            label: {\n                formatter: '' + item[1], // 最终值作为显示值\n            },\n            itemStyle: {\n                color: item[2],\n            },\n        });\n    });\n\n    return {\n        min,\n        max,\n        minLabel,\n    };\n}\n\n// 生成序列数据\nfunction createSeries(arr, name, showLabel, isReverse) {\n    let newSeries = [];\n\n    const { min, max, minLabel } = dataFormat(arr, name, isReverse);\n\n    const maxPosition = isReverse ? 'right' : 'top';\n    const minPosition = isReverse ? 'left' : 'bottom';\n\n    newSeries = [\n        {\n            type: 'bar',\n            stack: name,\n            tooltip: {\n                show: false,\n            },\n            // 透明\n            itemStyle: {\n                barBorderColor: 'rgba(0,0,0,0)',\n                color: 'rgba(0,0,0,0)',\n            },\n            emphasis: {\n                itemStyle: {\n                    barBorderColor: 'rgba(0,0,0,0)',\n                    color: 'rgba(0,0,0,0)',\n                },\n            },\n            label: {\n                show: false,\n            },\n            data: min,\n        },\n        {\n            type: 'bar',\n            stack: name,\n            name: name,\n            tooltip: {\n                show: true,\n            },\n            label: {\n                show: showLabel,\n                position: maxPosition,\n            },\n            markPoint: {\n                symbol: 'rect',\n                // 图形上面的小头隐藏\n                symbolSize: 0.000000000000001,\n                label: {\n                    show: showLabel,\n                    position: minPosition,\n                },\n                data: minLabel,\n            },\n            data: max,\n        },\n    ];\n\n    return newSeries;\n}\n","html":"","externalScripts":"","updaterUID":"obd-oMp8xbVxmYMgfq6P_Ifounj-c9DqD2w","theme":"","layout":"","viewCount":0,"userName":"秒***z","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xe1uMVfNHx.png?v=1638518977813","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markPoint","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"秒***z"}}