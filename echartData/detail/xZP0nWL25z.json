{"status":0,"data":{"cid":"xZP0nWL25z","authorUid":"bd-1277561159","authorUserName":"执***开","title":"Awesome Chart","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-11-20T01:42:53.000Z","lastUpdateTime":"2021-11-20T01:42:53.000Z","auth":2,"uid":"bd-1277561159","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.0.4","versionCreateTime":"2021-11-20T01:42:53.000Z","code":"var data = {\n    code: 200,\n    msg: '操作成功',\n    data: {\n        areaList: [\n            {\n                type: '0',\n                typName: '油菜',\n                plantType: '4',\n                plantName: '面积',\n                planNums: 177.6,\n                nums: 180.15,\n                rate: 101.43,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '0',\n                typName: '其它旱杂粮',\n                plantType: '3',\n                plantName: '面积',\n                planNums: 401.3,\n                nums: 419.9,\n                rate: 104.64,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '0',\n                typName: '晚稻',\n                plantType: '2',\n                plantName: '面积',\n                planNums: 804.3,\n                nums: 819.3,\n                rate: 101.86,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '0',\n                typName: '早稻',\n                plantType: '1',\n                plantName: '面积',\n                planNums: 160.0,\n                nums: 152.98,\n                rate: 95.61,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '0',\n                typName: '小麦',\n                plantType: '0',\n                plantName: '面积',\n                planNums: 140.0,\n                nums: 172.22,\n                rate: 123.01,\n                areaCode: '330000',\n                year: 2021,\n            },\n        ],\n        produceList: [\n            {\n                type: '1',\n                typName: '油菜',\n                plantType: '4',\n                plantName: '产量',\n                planNums: 26.3,\n                nums: 25.77,\n                rate: 97.97,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '1',\n                typName: '其它旱杂粮',\n                plantType: '3',\n                plantName: '产量',\n                planNums: 95.82,\n                nums: 108.67,\n                rate: 113.41,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '1',\n                typName: '晚稻',\n                plantType: '2',\n                plantName: '产量',\n                planNums: 405.33,\n                nums: 410.47,\n                rate: 101.27,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '1',\n                typName: '早稻',\n                plantType: '1',\n                plantName: '产量',\n                planNums: 66.35,\n                nums: 62.83,\n                rate: 94.7,\n                areaCode: '330000',\n                year: 2021,\n            },\n            {\n                type: '1',\n                typName: '小麦',\n                plantType: '0',\n                plantName: '产量',\n                planNums: 40.3,\n                nums: 48.34,\n                rate: 119.95,\n                areaCode: '330000',\n                year: 2021,\n            },\n        ],\n    },\n};\n\nvar list = data.data.areaList;\nconst itemStyle = {\n    normal: {\n        barBorderRadius: [20, 20, 0, 0],\n    },\n};\nconst rich = {\n    per: {\n        color: '#00ED9C',\n        align: 'center',\n        fontSize: 16,\n        fontWeight: 600,\n    },\n    per2: {\n        color: '#FF6C4B',\n        align: 'center',\n        fontSize: 16,\n        fontWeight: 600,\n    },\n};\nconsole.log(list);\nfunction f(dataIndex, list, flag) {\n  const { planNums, nums, rate } = list[dataIndex];\n  let res = '';\n  const bool = flag ? planNums > nums : planNums < nums;\n//   if (bool) {\n    res = bool?  (rate >= 100 ? `{per|${rate}%}` : `{per2|${rate}%}`) : \"\";\n//   }\n//   console.log(params.dataIndex, ':', res);\n  return res;\n}\n\nvar legendData = ['任务数', '完成数', '完成率'];\noption = {\n    title: {\n        text: 'Awesome Chart',\n    },\n    xAxis: {\n        type: 'category',\n        data: list.map((v) => v.typName),\n    },\n    yAxis: [\n        {\n            type: 'value',\n        },\n    ],\n    legend: {\n        data: legendData,\n    },\n    series: [\n        // {\n        //     name: legendData[0],\n        //     type: 'bar',\n        //     barWidth: 15,\n        //     data: list.map((v) => v.planNums),\n        // },\n        // {\n        //     name: legendData[1],\n        //     type: 'bar',\n        //     barWidth: 15,\n        //     yAxisIndex: 2,\n        //     data: list.map((v) => v.nums),\n        // },\n        {\n            name: legendData[0],\n            type: 'bar',\n            // yAxisIndex:1,\n            // stack: \"overlap\",\n            data: list.map((v) => v.planNums),\n             label: {\n            show: true,\n            position: \"top\",\n            textStyle: {\n              //数值样式\n              color: \"#01da95\",\n              fontSize: 16,\n            },\n            // formatter: \"{per|{c} %}\",\n            formatter: ({ dataIndex }) => {\n                return f(dataIndex, list, true)\n              const { planNums, nums, rate } = list[dataIndex];\n              return planNums > nums ? (rate >= 100 ? `{per|${rate}%}` : `{per2|${rate}%}`) : \"\";\n            },\n            rich,\n          },\n          itemStyle,\n        },\n         {\n            name: legendData[1],\n            type: 'bar',\n            // yAxisIndex:1,\n            // stack: \"overlap\",\n            data: list.map((v) => v.nums),\n             label: {\n            show: true,\n            position: \"top\",\n            textStyle: {\n              //数值样式\n              color: \"#01da95\",\n              fontSize: 16,\n            },\n            // formatter: \"{per|{c} %}\",\n            formatter: ({ dataIndex }) => {\n                return f(dataIndex, list, false)\n              const { planNums, nums, rate } = list[dataIndex];\n              return planNums < nums ? (rate >= 100 ? `{per|${rate}%}` : `{per2|${rate}%}`) : \"\";\n            },\n            rich,\n          },\n          itemStyle,\n        },\n        //  {\n        //     name: legendData[2],\n        //     type: 'bar',\n        //     // yAxisIndex:1,\n        //     // stack: \"overlap\",\n        //     data: list.map((v) => v.rate),\n        // },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-1277561159","theme":"","layout":"","viewCount":0,"userName":"执***开","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZP0nWL25z.png?v=1637372573515","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title"],"customTags":[],"updaterUserName":"执***开"}}