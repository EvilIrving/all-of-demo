{"status":0,"data":{"cid":"xbbFQXO1Nz","authorUid":"bd-2720940282","authorUserName":"猴***9","title":"饼图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-08-03T01:20:03.000Z","lastUpdateTime":"2021-08-26T02:13:10.000Z","auth":2,"uid":"bd-2720940282","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.1.0","versionCreateTime":"2021-08-26T02:13:10.000Z","code":"let imgSrc = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAllBMVEUAAAAY258A1JYY258X2p4l2Zkd3qMY258Y3KAY258Y258X3J8V2p0Y2Z8Y26AW3Z0Y258Y2p4X258Y258X258Y258Y258Y3J8Y3J8Y258T2Z0Y258Y3J8Z26AY26AY258Y258X258X3J8Y3KAX3J8X3J8a36UY3J8Y26AX258X258Y258Y258Y258Y26AX3J8Y3J8Y258TXRF7AAAAMXRSTlMA3QSHmQYR62bM1iwiH0oWdxuv9OW1kTs0qA372SfSx1XvbU9BoQm8lVqMf1/3wplypN/JAQAAA+pJREFUaN7t2dl6ojAYBuAPFNxFcANRUXGry7S5/5ub+UNtaIk1iXAwT/ueeNDAR1ZCih/L3yWnGarltBljAaoVMlJxVfqM9JD3G/Ib8jND7E10nt0JGa6vd0L8SfQCda+MsbYnjbdpbbEh0Wkwxt6gasbI3IeOxYgusqBqH+unUAZdA2V1RqjFVFFbkQ2UOQHTqwvVg7xCgzOW1aXTnIxbljVvBbVLT1aPCWCU8jGSt7sGy7OOnY96GGWIFqshMx2zovH0vWwk2sqgLmdwYYvJjbNWsyNRD+2UI8i+FrPM+jBprlYvm3oyZJnhxuYpB8owSjnzG/SW7wnHMDfzt9H1vTK819wBnhFmo3N02UPI7rtmZOnjWVPeMNeabL30dll+F8/pNvhtQsj1eWXaLp7hzekmiXd/qvMCfxw84UC3OHx3C8+iIieY2/COdRUadGveWNTiDf/R8IupW2wYOrJ/Hr9Ra1SsCTP+leaa4k7fMux7esJYZQ6k7J8VTNgj1U8Re05j0Gyuq4+aDdXZNW0tC0pmMR8hBhLGWF2j7KtJl1zp6TRq3YKCXjS3blygq7Pp7dP7iyamddM+zmRPvmSCDWyzXzUdKuzRrxBJywlrACtaUpTnLV21AHpMiG1ZOYEG1UVn0+nQVSHtogXpEx6LIW3lUcJDKExoynuvdjN4b66R1ndAF3BqN+ep8oDR6hMP2jo65xvTwlDUaIEp1Fx4RxoYabyKJqZnRwGfUGqWfN9s4I1mpQMVXZO9hLgyhYoBzT0bJlq0bYOCPXXfDkaaqo2wEQNRm0MPuHzcCl5DVNms69kAj0RUrP/U0Wk8VWnVAMamfMlefF8mpkWuB3M1vvD73y1xa7GXNWQfHuzre/xj74inuNlHzv7bj6TAhqlOKB41gNQ+oT8m/BFSzySjYbnZ7/2BHIkvxsWw7RlkUDN8fP/GHRSlYljsl3Tao50hTlb68Z1Fv02Dlw9wOxBnSloZYkE60c0c+Qv6IiYkpRhkTHLbhGJ7rcQC74z1U5Yig6MJ15cubQkgUrQWfFdkiNCm9MUe4XPKSH2eN0QGx4++pJuAE3Ipeiv+6kojS9iJzJzDbf6I87tGCHV+ukDOq/RDKvl6RBv2XZibFLpU9FRpzrKDDZdWgrTkf2gcNs28Nz7OfZTGtphcgBJtYybT6KFM/QYrandQrtkmSFp5f3YvNv5P6ameV5uifDX21QvKZg8LIa3/MwSnQsgF5Vsd63mnLaqwd/McVGCRsE/iwEXpWuyrHcrmsII5StcuhEQoXWixzxIfFfC7eR6qMR0IC1Rky27oS7QqqXVbtkJUxw7T1WqVLvBT/QXZze13haQUPgAAAABJRU5ErkJggg==';\nlet chartData = [\n    {\n        value: 520,\n        name: '幼儿园',\n    },\n    {\n        value: 280,\n        name: '小学',\n    },\n    {\n        value: 100,\n        name: '初中',\n    },\n    {\n        value: 100,\n        name: '高中',\n    },\n];\nlet colorList = ['#115FEA', '#10EBE3', '#10A9EB', '#EB9C10', '#2E10EB', '#9B10EB'];\nlet sum = chartData.reduce((per, cur) => per + cur.value, 0);\nlet gap = 1 * sum / 100;\nlet pieData1 = [];\nlet pieData2 = [];\nlet gapData = {\n    name: '',\n    value: gap,\n    itemStyle: {\n        color: 'transparent',\n    },\n};\nfor (let i = 0; i < chartData.length; i++) {\n    // 第一圈数据\n    pieData1.push({\n        ...chartData[i],\n        itemStyle: {\n              borderRadius: 10\n            }\n        });\n    pieData1.push(gapData);\n\n    // 第二圈数据\n    pieData2.push({\n        ...chartData[i],\n        itemStyle: {\n            color: colorList[i],\n            opacity: 0.1,\n        },\n    });\n    pieData2.push(gapData);\n}\nconsole.log(pieData2);\noption = {\n    backgroundColor: '#000',\n    tooltip: {\n        show: false,\n        backgroundColor: 'rgba(17,95,234,0.5)',\n        textStyle: {\n            color: '#F0F0F0',\n        },\n    },\n    legend: {\n        show: true,\n        right: 'right',\n        top: 'center',\n\n        icon: 'rect',\n        itemWidth: 4,\n        itemHeight: 20,\n        textStyle: {\n            color: '#F0F0F0',\n            rich: {\n                name: {\n                    padding: [0, 10, 0, 8],\n                    color: '#fff',\n                    fontSize: 16,\n                },\n                percent: {\n                    padding: [0, 0, 0, 8],\n                    color: '#fff',\n                },\n            },\n        },\n        formatter: (name) => {\n            console.log(name);\n            console.log(chartData);\n            let item = chartData.find((i) => {\n                return i.name == name;\n            });\n            let p = ((item.value / sum) * 100).toFixed(0);\n            return '{name|' + name + '}' + '{percent|' + p + '}' + '%';\n        },\n    },\n    graphic: {\n        elements: [{\n            type: \"image\",\n            z: 3,\n            style: {\n                image: imgSrc,\n                width: 70,\n                height: 70,\n            },\n            top: 'middle',\n            left: 'center',\n            scale: [1.5,1.5]\n        }]\n    },\n    grid: {\n        top: 35,\n        right: 30,\n        bottom: 20,\n        left: 30,\n    },\n    color: colorList,\n    series: [\n        {\n            name: '消息来源',\n            type: 'pie',\n            roundCap: true,\n            radius: ['76%', '80%'],\n            center: ['50%', '50%'],\n            label: {\n                show: false,\n            },\n            labelLine: {\n                show: false,\n            },\n            data: pieData1,\n        },\n        {\n            type: 'pie',\n            radius: ['76%', '64%'],\n            center: ['50%', '50%'],\n            gap: 1.71,\n            label: {\n                show: false,\n            },\n            labelLine: {\n                show: false,\n            },\n            silent: true,\n            data: pieData2,\n        },\n        {\n            type: 'pie',\n            center: ['50%', '50%'],\n            radius: [0, '45.6%'],\n            label: {\n                show: false,\n            },\n            labelLine: {\n                show: false,\n            },\n            itemStyle: {\n                color: 'rgba(5,37,95,0.3)',\n            },\n            silent: true,\n            data: [\n                {\n                    value: 100,\n                    name: '',\n                },\n            ],\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-2720940282","theme":"","layout":"","viewCount":0,"userName":"猴***9","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xbbFQXO1Nz.png?v=1629943990345","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"猴***9"}}