{"status":0,"data":{"cid":"x_5By_BMPY","authorUid":"bd-1879983178","authorUserName":"k***3","title":"饼图动画效果","description":"饼图动画","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-01T02:48:56.000Z","lastUpdateTime":"2021-06-01T02:48:56.000Z","auth":2,"uid":"bd-1879983178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-01T02:48:56.000Z","code":" let angle = 180;//角度，用来做简单的动画效果的\r\nlet value = 55.33;\r\noption = {\r\nbackgroundColor:\"#061740\",\r\ntitle: {\r\n        text: '{a|'+ value +'}{c|%}',\r\n        x: 'center',\r\n        y: 'center',\r\n        textStyle: {\r\n            rich:{\r\n                a: {\r\n                    fontSize: 48,\r\n                    color: '#FFF43C'\r\n                },\r\n                \r\n                c: {\r\n                    fontSize: 20,\r\n                    color: '#ffffff',\r\n                    // padding: [5,0]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    series: [     // 紫色\r\n       {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.25,\r\n                      startAngle: (0 + angle) * Math.PI / 180,\r\n                         endAngle: (90 + angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 5.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n              data: [\r\n                {\r\n                    value: 50,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"rgba(4,40,50,1)\"\r\n                        }\r\n                    }\r\n                },\r\n\r\n            ]\r\n        }, {\r\n            name: \"ring5\",  //绿点\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.25;\r\n                 let point = getCirlPoint(x0, y0, r, (90 + angle))\r\n                return {\r\n                    type: 'circle',\r\n                    shape: {\r\n                        cx: point.x,\r\n                        cy: point.y,\r\n                        r: 4\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",      //绿\r\n                        fill: \"#0CD3DB\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n         {\r\n             name: '事件总数',\r\n             type: 'pie',\r\n             radius: ['32%', '35%'],\r\n             silent: true,\r\n             clockwise: true,\r\n             startAngle: 270,\r\n             z: 0,\r\n             zlevel: 0,\r\n             label: {\r\n                 normal: {\r\n                     position: \"center\",\r\n\r\n                 }\r\n             },\r\n             data: [{\r\n                     value: value,\r\n                     name: \"\",\r\n                     itemStyle: {\r\n                         normal: {\r\n                             color: { // 完成的圆环的颜色\r\n                                 colorStops: [{\r\n                                     offset: 0,\r\n                                     color: '#00EDF3' // 0% 处的颜色\r\n                                 }, {\r\n                                     offset: 1,\r\n                                     color: '#646CF9' // 100% 处的颜色\r\n                                 }]\r\n                             },\r\n                         }\r\n                     }\r\n                 },\r\n                 {\r\n                     value: 100 - value,\r\n                     name: \"\",\r\n                     label: {\r\n                         normal: {\r\n                             show: false\r\n                         }\r\n                     },\r\n                     itemStyle: {\r\n                         normal: {\r\n                             color: \"#173164\"\r\n                         }\r\n                     }\r\n                 }\r\n             ]\r\n         },\r\n        \r\n        \r\n    ]\r\n};\r\n\r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n    return {\r\n        x: x1,\r\n        y: y1\r\n    }\r\n}\r\n\r\nfunction draw(){\r\n    angle = angle+3\r\n    myChart.setOption(option, true)\r\n   //window.requestAnimationFrame(draw);\r\n}\r\n\r\nsetInterval(function() {\r\n    //用setInterval做动画感觉有问题\r\n    draw()\r\n}, 100);\r\n","html":"","externalScripts":"","updaterUID":"bd-1879983178","theme":"","layout":"","viewCount":0,"userName":"k***3","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_5By_BMPY.png?v=1622515736434","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"k***3"}}