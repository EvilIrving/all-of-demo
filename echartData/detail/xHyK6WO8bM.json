{"status":0,"data":{"cid":"xHyK6WO8bM","authorUid":"bd-2724980533","authorUserName":"l***9","title":"","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2017-12-07T07:46:09.000Z","lastUpdateTime":"2017-12-07T07:46:09.000Z","auth":2,"uid":"bd-2724980533","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-07T07:46:09.000Z","code":"    var struct_colors = [\r\n        '#c73437', '#2e4553', '#6e7073', '#5ba0a7', '#8cc8af',\r\n        '#f59731', '#bfa29b', '#709f84', '#d88268'\r\n    ];\r\n    RICH = {\r\n        name: {\r\n            color: '#fdfa3e',\r\n            fontSize: 30,\r\n            lineHeight: 30\r\n        },\r\n        basic: {\r\n            color: '#fff',\r\n            fontSize: 18,\r\n            lineHeight: 18\r\n        }\r\n    };\r\n    var info2 = {\r\n        'children': [\r\n            {\r\n                'asset_num': 50000,\r\n                'name': '20~25岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#c73437',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    }, {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    }, {\r\n                        'name': '二级-03',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-02',\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 40000,\r\n                'name': '25~30岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#2e4553',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 25000,\r\n                'name': '30~35岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#6e7073',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 25000,\r\n                'name': '35~40岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#5ba0a7',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 25000,\r\n                'name': '40~45岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#8cc8af',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 35000,\r\n                'name': '45~50岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#f59731',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 35000,\r\n                'name': '50~55岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#bfa29b',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 35000,\r\n                'name': '55~60岁',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#709f84',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n            {\r\n                'asset_num': 25000,\r\n                'name': '60岁以上',\r\n                'manage': '平均价格',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#d88268',\r\n                    }\r\n                },\r\n                'children': [\r\n                    {\r\n                        'name': '二级组织结构-1',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级组织结构-2',\r\n                        'asset_num': 20,\r\n                        'manage': 'liang-01',\r\n                    },\r\n                    {\r\n                        'name': '二级-03',\r\n                        'manage': 'liang-02',\r\n                        'children': [\r\n                            {\r\n                                'name': '三级-1',\r\n                                'asset_num': 10,\r\n                                'manage': 'liang-01',\r\n                            },\r\n                            {\r\n                                'name': '三级-2',\r\n                                'asset_num': 20,\r\n                                'manage': 'liang-01',\r\n                            }\r\n                        ],\r\n\r\n                    }\r\n                ],\r\n\r\n            },\r\n\r\n        ]\r\n    };\r\n    var structs_datas = [];\r\n    var formatUtil = echarts.format;\r\n\r\n    function format_struct_data(children, structs_datas) {\r\n        // 添加每个单位的颜色\r\n        for (var prop in children) {\r\n            var index = Math.floor(Math.random() * 20);\r\n            var value = 1;\r\n            if (children[prop].asset_num !== 0) {\r\n                value = children[prop].asset_num;\r\n            }\r\n            var tmp = {\r\n                name: children[prop].name,\r\n                manage: children[prop].manage,\r\n                children: [],\r\n                asset_num: children[prop].asset_num,\r\n                value: value\r\n            }\r\n            format_struct_data(children[prop].children, tmp.children);\r\n            if (tmp.children.length === 0) {\r\n                delete tmp.children;\r\n            }\r\n            structs_datas.push(tmp);\r\n            // return structs_datas;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function showMenu(param) {\r\n        // 可在此处添加右击操作内容\r\n        console.log('showMenu==============', param);\r\n        var event = param.event;\r\n        var pageX = event.offsetX;\r\n        var pageY = event.offsetY;\r\n        console.log('showMenu========', pageX, pageY);\r\n\r\n    }\r\n    format_struct_data(info2.children, structs_datas);\r\nmyChart.setOption(option = {\r\n   title: {\r\n            text: '',\r\n            subtext: '',\r\n            left: 'leafDepth'\r\n        },\r\n        grid: {\r\n            left: '0%',\r\n            top:'0%',\r\n            right: '0%',\r\n            bottom: '0%',\r\n            containLabel: true\r\n        },\r\n        tooltip: {\r\n\r\n            formatter: function(info) {\r\n                console.log('tool------', info);\r\n                var asset_num = info.data.asset_num;\r\n                var name = info.name;\r\n                return [\r\n                    '<h4>' + name + '</h4>',\r\n                    '<div>资产数量：' + asset_num + '</div>',\r\n                ].join('\\n');\r\n                // return [\r\n                //     '{name|' + name + '}',\r\n                //     '{basic| 资产数量：' + asset_num + '}',\r\n                // ].join('\\n');\r\n            },\r\n            // rich: RICH, tooltip不支持富文本\r\n\r\n        },\r\n\r\n        series: [{\r\n            name: '客户特征',\r\n            type: 'treemap',\r\n            visibleMin: 300,\r\n            // data: format_struct_data(info2.children, structs_datas),\r\n            data: structs_datas,\r\n            leafDepth: 1,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'insideTopLeft',\r\n                    formatter: function(a) {\r\n                        console.log('formatter==label=======', a);\r\n                        return '{name|' + a.name + '}' + \"\\n\\n\" + \"{basic|平均价格 : \" + a.data.asset_num  + '㎡/元}';\r\n\r\n                    },\r\n                    textStyle: {\r\n                        // color: '',  label的字体颜色\r\n                        fontSize: '18',\r\n                        fontWeight: 'bold'\r\n                    },\r\n                    rich: RICH,\r\n\r\n                },\r\n            },\r\n            levels: [{\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderWidth: 0,\r\n                        gapWidth: 3,\r\n                        borderColor:'#111'\r\n                    }\r\n                }\r\n            }, {\r\n                itemStyle: {\r\n                    normal: {\r\n                        gapWidth: 1,\r\n                        borderColor:'#fff'\r\n                    }\r\n                }\r\n            }],\r\n            breadcrumb: {\r\n                show: true,\r\n                // \"height\": 22,\r\n                left: \"5%\",\r\n                top: \"0%\",\r\n                emptyItemWidth: 25,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"#fff\",\r\n                        borderColor: \"rgba(13,25,33,0)\",\r\n                        borderWidth: 1,\r\n                        shadowColor: \"rgba(150,150,150,0)\",\r\n                        shadowBlur: 3,\r\n                        shadowOffsetX: 0,\r\n                        shadowOffsetY: 0,\r\n                        textStyle: {\r\n                            color: \"#000\",\r\n                            fontWeight: 'bold'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {}\r\n                    }\r\n                }\r\n            },\r\n        }]\r\n\r\n});\r\n\r\ndocument.oncontextmenu = function() {\r\n    return false;\r\n};\r\nmyChart.on('contextmenu', showMenu);","html":"","externalScripts":"","updaterUID":"bd-2724980533","theme":"","layout":"","viewCount":2073,"userName":"l***9","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyK6WO8bM.png?v=1512632769502","isCustomThumbnail":0,"builtinTags":["category-work","series-treemap","title","tooltip"],"customTags":[],"updaterUserName":"l***9"}}