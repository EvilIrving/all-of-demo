{"status":0,"data":{"cid":"xnkaqdawW","authorUid":"bd-3695957236","authorUserName":"剔***j","title":"饼状图","description":"使用富文本配置legend","latestVersion":1,"alwaysLatest":1,"createTime":"2020-01-06T08:31:37.000Z","lastUpdateTime":"2020-01-06T08:31:37.000Z","auth":2,"uid":"bd-3695957236","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-06T08:31:37.000Z","code":"\r\nlet datas = [\r\n  { value: 335, name: '进入区域', percent: '10' },\r\n  { value: 310, name: '区域入侵', percent: '40' },\r\n  { value: 274, name: '人员聚集', percent: '30' },\r\n  { value: 235, name: '越界侦测', percent: '20' }\r\n]\r\n\r\nlet colors = ['#6e7ce0', '#5fede1', '#388df6', '#7fdefe']\r\nlet legendData = []\r\nfor (var j = 0; j < datas.length; j++) {\r\n  var data = {\r\n    name: datas[j].name,\r\n    icon: 'circle',\r\n    textStyle: {\r\n      fontSize: 18,\r\n      color: colors[j]\r\n    }\r\n  }\r\n  legendData.push(data)\r\n}\r\nlet objData = array2obj(datas, 'name')\r\nconsole.log(objData)\r\noption = {\r\n    backgroundColor: '#000',\r\n  legend: {\r\n    orient: 'vertical',\r\n    top: 'center',\r\n    left: '70%',\r\n    itemGap: 30,\r\n    data: legendData,\r\n    formatter: function (name) {\r\n      return `{title|${name}}{value|${objData[name].value}}{unit|件}{percent|${objData[name].percent}}{unit|%}`\r\n    },\r\n    textStyle: {\r\n      rich: {\r\n        value: {\r\n          color: '#82baff',\r\n          fontSize: 24,\r\n          fontWeight: 600,\r\n          fontFamily: 'HuaKang',\r\n          padding: [0, 10, 0, 30]\r\n        },\r\n        unit: {\r\n          color: '#82baff',\r\n          fontSize: 14,\r\n          fontWeight: 600,\r\n          fontFamily: 'HuaKang',\r\n          padding: [0, 50, 0, 0]\r\n        },\r\n        percent: {\r\n          color: '#82baff',\r\n          fontSize: 24,\r\n          fontWeight: 600,\r\n          fontFamily: 'HuaKang',\r\n          padding: [0, 10, 0, 0]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  tooltip: {\r\n    trigger: 'item',\r\n    formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n  },\r\n  color: colors,\r\n  visualMap: {\r\n    show: false,\r\n    min: 80,\r\n    max: 600,\r\n    inRange: {\r\n      colorLightness: [0, 1]\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      name: '访问来源',\r\n      type: 'pie',\r\n      radius: '70%',\r\n      center: ['30%', '50%'],\r\n      label: {\r\n        fontSize: 18\r\n      },\r\n      data: datas,\r\n      roseType: 'radius',\r\n      animationType: 'scale',\r\n      animationEasing: 'elasticOut',\r\n      animationDelay: function (idx) {\r\n        return Math.random() * 200\r\n      }\r\n    }\r\n  ]\r\n}\r\n/**\r\n * @introduction 把数组中key值相同的那一项提取出来，组成一个对象\r\n * @description 详细描述\r\n * @param {参数类型} array 传入的数组 [{a:\"1\",b:\"2\"},{a:\"2\",b:\"3\"}]\r\n * @param {参数类型} key  属性名 a\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nfunction array2obj (array, key) {\r\n  var resObj = {}\r\n  for (var i = 0; i < array.length; i++) {\r\n    resObj[array[i][key]] = array[i]\r\n  }\r\n  return resObj\r\n}\r\n","html":"","externalScripts":"","updaterUID":"bd-3695957236","theme":"","layout":"","viewCount":9875,"userName":"剔***j","commentCount":1,"starCount":40,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnkaqdawW.png?v=1578299497985","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip","visualMap"],"customTags":[],"updaterUserName":"剔***j"}}