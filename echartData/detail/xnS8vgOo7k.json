{"status":0,"data":{"cid":"xnS8vgOo7k","authorUid":"obd-oDpFraKPqOlCcnEoNhReIq2VfHEB81g","authorUserName":"膝***纹","title":"表格双联动+布局自适应","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-07-23T11:56:13.000Z","lastUpdateTime":"2020-07-23T11:56:13.000Z","auth":2,"uid":"obd-oDpFraKPqOlCcnEoNhReIq2VfHEB81g","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-23T11:59:25.000Z","code":"\nconst seriesBar = new Array(5).fill({\n    type: 'bar',\n    stack: 'total',\n    smooth: true,\n    seriesLayoutBy: 'row',\n    label: {\n        show: true,\n        position: 'inside'\n    }\n});\nlet lastBarDataIndex = 0\n\nsetTimeout(function() {\n\n    option = {\n        baseOption: {\n            legend: {\n                show: true\n            },\n            tooltip: {\n                trigger: 'axis',\n                axisPointer: {\n                    type: 'shadow',\n                    shadowStyle: {\n                        color: 'rgba(0, 0, 0, 0.08)'\n                    }\n                },\n                showContent: false\n            },\n            dataset: {\n                source: [\n                    ['year', '2017', '2018', '2019', '2020'],\n                    ['Matcha Latte', 41.1, 30.4, 65.1, 98.7],\n                    ['Milk Tea', 86.5, 83.1, 73.4, 55.1],\n                    ['Cheese Cocoa', 24.1, 86.4, 65.2, 82.5],\n                    ['Walnut Brownie', 55.2, 72.4, 53.9, 39.1],\n                    ['Walnut sdfd', 55.2, 67.1, 86.2, 48.1],\n                ]\n            },\n            xAxis: {\n                type: 'category'\n            },\n            yAxis: {\n                gridIndex: 0\n            },\n            series: [\n                ...seriesBar,\n                {\n                    type: 'pie',\n                    id: 'pie',\n                    tooltip: {\n                        trigger: 'item',\n                        showContent: true\n                    },\n                    label: {\n                        position: 'center',\n                        show: false\n                    },\n                    labelLine: {\n                        show: false\n                    },\n                    emphasis: {\n                        label: {\n                            show: true,\n                            fontSize: '23',\n                            fontWeight: 'bold',\n                            formatter: '{d}%'\n                        }\n                    },\n                    encode: {\n                        itemName: 'year',\n                        value: '2017',\n                        tooltip: '2017'\n                    }\n                }\n            ]\n        },\n        // 添加移动端适配配置\n        media: [{\n                option: {\n                    legend: {\n                        right: 'center',\n                        top: 0,\n                        orient: 'horizontal',\n                        itemWidth: 25,\n                        itemHeight: 14,\n                        itemGap: 10\n                    },\n                    grid: {\n                        top: '15%',\n                        left: '8%',\n                        bottom: '10%',\n                        right: '50%'\n                    },\n                    series: [\n                        ...seriesBar,\n                        {\n                            radius: ['20%', '50%'],\n                            center: ['76%', '50%']\n                        }\n                    ]\n                }\n            },\n            {\n                query: {\n                    // 宽度为容器宽度，并非window宽度\n                    maxWidth: 900\n                },\n                option: {\n                    legend: {\n                        right: '12%',\n                        top: '62%',\n                        orient: 'vertical',\n                        itemWidth: 20,\n                        itemHeight: 11,\n                        itemGap: 6\n                    },\n                    grid: {\n                        top: '8%',\n                        left: '15%',\n                        bottom: '55%',\n                        right: '12%'\n                    },\n                    series: [\n                        ...seriesBar,\n                        {\n                            radius: ['25%', '45%'],\n                            center: ['35%', '72%'],\n                            emphasis: {\n                                label: {\n                                    fontSize: '18'\n                                }\n                            }\n                        }\n                    ]\n                }\n            }\n        ]\n    };\n\n    myChart.on('mouseover', function({\n        seriesIndex,\n        dataIndex,\n        seriesType\n    }) {\n        if (seriesType === 'bar') {\n            myChart.setOption({\n                series: {\n                    id: 'pie',\n                    label: {\n                        formatter: '{b}'\n                    },\n                    encode: {\n                        value: dataIndex + 1,\n                        tooltip: dataIndex + 1\n                    }\n                }\n            });\n            \n            lastBarDataIndex = dataIndex\n\n            //高亮显示饼图\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 5, // 第5个固定是饼图\n                dataIndex: seriesIndex\n            });\n        }\n\n    });\n\n    // 当鼠标离开柱状图每个堆叠项时\n    myChart.on('mouseout', function({\n        seriesType\n    }) {\n        if (seriesType === 'bar') {\n            myChart.dispatchAction({\n                type: 'downplay',\n                seriesIndex: 5,\n                dataIndex: [0, 1, 2, 3, 4] //鼠标移出时取消全部高亮\n            });\n        }\n    });\n\n    // 当鼠标在饼图时，高亮显示柱状图\n    myChart.on('mousemove', function({\n        seriesType\n    }) {\n        if (seriesType === 'pie') {\n            myChart.dispatchAction({\n                type: 'showTip',\n                seriesIndex: 0,\n                dataIndex: lastBarDataIndex\n            });\n        }\n    });\n\n    myChart.setOption(option);\n\n});","html":"","externalScripts":"","updaterUID":"obd-oDpFraKPqOlCcnEoNhReIq2VfHEB81g","theme":"","layout":"","viewCount":326,"userName":"膝***纹","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnS8vgOo7k.png?v=1595505373326","isCustomThumbnail":1,"builtinTags":["category-work","dataset","grid","legend","series-bar","series-pie","tooltip"],"customTags":["dispatchAction","media"],"updaterUserName":"膝***纹"}}