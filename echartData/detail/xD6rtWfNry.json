{"status":0,"data":{"cid":"xD6rtWfNry","authorUid":"bd-1731291088","authorUserName":"走***a","title":"guan+pie","description":"","latestVersion":20,"alwaysLatest":1,"createTime":"2020-11-02T03:53:32.000Z","lastUpdateTime":"2020-11-02T03:53:32.000Z","auth":2,"uid":"bd-1731291088","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":20,"parentVersion":19,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-13T07:29:44.000Z","code":"var top2URL = \"/asset/get/s/data-1604298243112-wVMFKjFRU.png\";\r\nvar top1URL = \"/asset/get/s/data-1604298213716-BI27ZxE4S.png\";\r\nvar imgURL = \"/asset/get/s/data-1604297660027-BIglMnvCQ.png\";\r\nvar piePatternImg = new Image();\r\npiePatternImg.src = imgURL;\r\n\r\nvar top1Img = new Image();\r\ntop1Img.src = top1URL;\r\nvar top2Img = new Image();\r\ntop2Img.src = top2URL;\r\n\r\n\r\nvar i_data = 7;\r\nvar deg = 360 / i_data;\r\nvar angdeg = ((2*Math.PI)/360)*deg;\r\nvar r = 1;\r\n\r\n\r\nvar series_data = [];\r\nfor (var i = 0; i < i_data; i++) {\r\n    var ideg = i * deg;\r\n    var iangdeg = i*angdeg-90;\r\n    var x = r * Math.cos(iangdeg);\r\n    var y = r * Math.sin(iangdeg);\r\n    console.log('====================',x,y);\r\n    var x1 = 0,\r\n        y1 = 0,\r\n        x2 = 0,\r\n        y2 = 0;\r\n    if (x > 0) {\r\n        x2 = x\r\n    } else {\r\n        x1 = Math.abs(x)\r\n    }\r\n    if (y > 0) {\r\n        y2 = y\r\n    } else {\r\n        y1 = Math.abs(y)\r\n    }\r\n    // var x1 = r * Math.cos(iangdeg);\r\n    // var y1 = r * Math.sin(iangdeg);\r\n    // var x2 = r * Math.cos(iangdeg);\r\n    // var y2 = r * Math.sin(iangdeg);\r\n    console.log(x1, y1, x2, y2);\r\n   \r\n    series_data.push({\r\n        stack: \"fenshu\",\r\n        type: \"bar\",\r\n        roundCap: true,\r\n        barWidth: 40,\r\n        label: {\r\n            show: true,\r\n            position: 'inside',\r\n            formatter: (params) => {\r\n                return 'aaa'\r\n            }\r\n        },\r\n        data: [{\r\n                value: i_data,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: new echarts.graphic.LinearGradient(x1, y1, x2, y2, [{\r\n                                offset: 0,\r\n                                color: \"rgba(101,15,36,0)\",\r\n                            }, {\r\n                                offset: 0.05,\r\n                                color: \"rgba(101,15,36,0)\",\r\n                            },\r\n                            {\r\n                                offset: 1,\r\n                                color: \"rgba(116,27,49,1)\",\r\n                            },\r\n                        ]),\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                value: i_data,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: new echarts.graphic.LinearGradient(x1, y1, x2, y2, [{\r\n                                offset: 0,\r\n                                color: \"rgba(14,63,95,0)\",\r\n                            }, {\r\n                                offset: 0.05,\r\n                                color: \"rgba(14,63,95,0)\",\r\n                            },\r\n                            {\r\n                                offset: 1,\r\n                                color: \"rgba(20,73,107,1)\",\r\n                            },\r\n                        ]),\r\n                    }\r\n                },\r\n            },\r\n        ],\r\n        coordinateSystem: \"polar\",\r\n        name: i + 'red',\r\n        label: {\r\n            show: true,\r\n        },\r\n    });\r\n\r\n}\r\n\r\n\r\nseries_data.push({\r\n    type: 'pie', //涟漪效果环\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['45.9%', '46%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,0.1)',\r\n            borderColor: 'rgba(13,243,171,0.01)',\r\n        }\r\n    }\r\n});\r\nseries_data.push({\r\n    type: 'pie',\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['44.8%', '44.9%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,0.3)',\r\n            borderColor: 'rgba(13,243,171,0.3)',\r\n        }\r\n    }\r\n});\r\nseries_data.push({\r\n    type: 'pie',\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['43.7%', '43.8%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,0.5)',\r\n            borderColor: 'rgba(13,243,171,0.5)',\r\n        }\r\n    }\r\n});\r\nseries_data.push({\r\n    type: 'pie',\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['42.5%', '42.7%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,0.8)',\r\n            borderColor: 'rgba(13,243,171,0.8)',\r\n        }\r\n    }\r\n});\r\nseries_data.push({\r\n    type: 'pie',\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['41%', '41.5%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,1)',\r\n            borderColor: 'rgba(13,243,171,1)',\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\nseries_data.push({\r\n    type: 'pie',\r\n    zlevel: 20,\r\n    silent: true,\r\n    radius: ['38%', '40%'],\r\n    hoverAnimation: false,\r\n    // color: 'rgba(13,243,171,1)',\r\n    color: '#fff',\r\n    // animation:false,\r\n    data: [1],\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,1)',\r\n            borderColor: 'rgba(13,243,171,0.1)',\r\n            borderWidth: 20,\r\n            // shadowColor:'rgba(13,243,171,0.1)',\r\n            // shadowBlur:50,\r\n            // shadowOffsetX:10,\r\n            // shadowOffsetY:50,\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\nseries_data.push({\r\n    name: '中间环形图',\r\n    type: 'pie',\r\n    radius: ['0%', '30%'],\r\n    avoidLabelOverlap: false,\r\n    hoverAnimation: false,\r\n    itemStyle: {\r\n        normal: {\r\n            color: 'rgba(13,243,171,0.5)',\r\n            borderColor: 'rgba(13,243,171,1)',\r\n            // color: {\r\n            //     image: piePatternImg,\r\n            //     repeat: 'no-repeat'\r\n            // },\r\n        }\r\n    },\r\n    label: {\r\n        normal: {\r\n            show: true,\r\n            position: 'inside',\r\n            rotate: true\r\n\r\n        },\r\n        emphasis: {\r\n            show: false,\r\n            textStyle: {\r\n                fontSize: '30',\r\n                fontWeight: 'bold'\r\n            }\r\n        }\r\n    },\r\n    labelLine: {\r\n        normal: {\r\n            show: false\r\n        }\r\n    },\r\n    data: [{\r\n            value: 5,\r\n            name: '直接访问'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '邮件营销'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '联盟广告'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '视频广告'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '搜索引擎'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '直接访问'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '邮件营销'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '联盟广告'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '视频广告'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '搜索引擎'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '直接访问'\r\n        },\r\n        {\r\n            value: 5,\r\n            name: '邮件营销'\r\n        },\r\n\r\n    ]\r\n});\r\n\r\n\r\n\r\noption = {\r\n    backgroundColor: 'rgba(0,46,32,1)',\r\n    angleAxis: {\r\n        max: i_data * i_data,\r\n        show: true,\r\n        // startAngle: 0,\r\n        axisLabel: {\r\n            show: true,\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n        },\r\n    },\r\n    radiusAxis: {\r\n        type: \"category\",\r\n        show: true,\r\n        axisLabel: {\r\n            show: true,\r\n        },\r\n        axisLine: {\r\n            show: true,\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n        },\r\n    },\r\n    polar: {\r\n        radius: [\"70%\", \"100%\"],\r\n        center: [\"50%\", \"50%\"],\r\n    },\r\n    series: series_data\r\n};\r\n\r\nfunction _pie1() {\r\n    let dataArr = [];\r\n    for (var i = 0; i < 8; i++) {\r\n\r\n        dataArr.push({\r\n            name: (i + 1).toString(),\r\n            value: 20,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"rgba(88,142,197,0.4)\",\r\n                    borderWidth: 0,\r\n                    borderColor: \"rgba(0,0,0,0)\"\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n    return dataArr\r\n\r\n}\r\n\r\nfunction _pie2() {\r\n    let dataArr = [];\r\n    for (var i = 0; i < 8; i++) {\r\n        if (i % 2 === 0) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 25,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(88,142,197,0.5)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 20,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(0,0,0,1)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,1)\"\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n    return dataArr\r\n\r\n}\r\n\r\n\r\nvar timer;\r\nvar pie_index = 11;\r\n\r\nfunction doing() {\r\n    if (pie_index < 6) {\r\n        pie_index = 11;\r\n    }\r\n    let option = myChart.getOption();\r\n    console.log('pie_index:', pie_index);\r\n    console.log('111111', option);\r\n    console.log('111111', option.series[pie_index]);\r\n    option.angleAxis[0].startAngle = option.angleAxis[0].startAngle + 1;\r\n    for (var i = 11; i > 6; i--) {\r\n        if (i == pie_index) {\r\n            option.series[pie_index].itemStyle.opacity = 0.5;\r\n        } else {\r\n            option.series[i].itemStyle.opacity = 1;\r\n        }\r\n\r\n    }\r\n\r\n\r\n    myChart.setOption(option);\r\n    pie_index -= 1;\r\n\r\n}\r\n\r\nfunction startTimer() {\r\n\r\n    // timer = setInterval(doing, 300);\r\n\r\n}\r\n\r\nsetTimeout(startTimer, 500);","html":"","externalScripts":"","updaterUID":"bd-1731291088","theme":"","layout":"","viewCount":1033,"userName":"走***a","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xD6rtWfNry.png?v=1605252584153","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"走***a"}}