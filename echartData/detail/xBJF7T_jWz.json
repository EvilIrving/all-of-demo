{"status":0,"data":{"cid":"xBJF7T_jWz","authorUid":"bd-1177841325","authorUserName":"i***o","title":"测试1","description":"测试1","latestVersion":5,"alwaysLatest":1,"createTime":"2017-12-11T03:36:01.000Z","lastUpdateTime":"2017-12-11T03:36:01.000Z","auth":2,"uid":"bd-1177841325","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-11T09:14:50.000Z","code":"var geoCoordMap = {\r\n    '上海': [121.4648, 31.2891],\r\n    '尼日利亚': [-4.388361, 11.186148],\r\n    '美国洛杉矶': [-118.24311, 34.052713],\r\n    '香港邦泰': [114.195466, 22.282751],\r\n    '美国芝加哥': [-87.801833, 41.870975],\r\n    '加纳库马西': [-4.62829, 7.72415],\r\n    '英国曼彻斯特': [-1.657222, 51.886863],\r\n    '德国汉堡': [10.01959, 54.38474],\r\n    '哈萨克斯坦阿拉木图': [45.326912, 41.101891],\r\n    '俄罗斯伊尔库茨克': [89.116876, 67.757906],\r\n    '巴西': [-48.678945, -10.493623],\r\n    '埃及达米埃塔': [31.815593, 31.418032],\r\n    '西班牙巴塞罗纳': [2.175129, 41.385064],\r\n    '柬埔寨金边': [104.88659, 11.545469],\r\n    '意大利米兰': [9.189948, 45.46623],\r\n    '乌拉圭蒙得维的亚': [-56.162231, -34.901113],\r\n    '莫桑比克马普托': [32.608571, -25.893473],\r\n    '阿尔及利亚阿尔及尔': [3.054275, 36.753027],\r\n    '阿联酋迪拜': [55.269441, 25.204514],\r\n    '匈牙利布达佩斯': [17.108519, 48.179162],\r\n    '澳大利亚悉尼': [150.993137, -33.675509],\r\n    '美国加州': [-121.910642, 41.38028],\r\n    '澳大利亚墨尔本': [144.999416, -37.781726],\r\n    '墨西哥': [-99.094092, 19.365711],\r\n    '加拿大温哥华': [-123.023921, 49.311753]\r\n};\r\nvar BJData = [\r\n    [{\r\n        name: '尼日利亚',\r\n        value: 9100\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '美国洛杉矶',\r\n        value: 2370\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '香港邦泰',\r\n        value: 3130\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '美国芝加哥',\r\n        value: 2350\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '加纳库马西',\r\n        value: 5120\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '英国曼彻斯特',\r\n        value: 3110\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '德国汉堡',\r\n        value: 6280\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '哈萨克斯坦阿拉木图',\r\n        value: 7255\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '俄罗斯伊尔库茨克',\r\n        value: 8125\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '巴西',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '埃及达米埃塔',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '西班牙巴塞罗纳',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '柬埔寨金边',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '意大利米兰',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '乌拉圭蒙得维的亚',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '莫桑比克马普托',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '阿尔及利亚阿尔及尔',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '阿联酋迪拜',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '匈牙利布达佩斯',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '澳大利亚悉尼',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '美国加州',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '澳大利亚墨尔本',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '墨西哥',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }],\r\n    [{\r\n        name: '加拿大温哥华',\r\n        value: 3590\r\n    }, {\r\n        name: '上海'\r\n    }]\r\n];\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = geoCoordMap[dataItem[0].name];\r\n        var toCoord = geoCoordMap[dataItem[1].name];\r\n        if (fromCoord && toCoord) {\r\n            res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[0].value\r\n            }, {\r\n                coord: toCoord,\r\n            }]);\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar color = ['#a6c84c', '#ffa022', '#46bee9'];\r\nvar series = [];\r\n[\r\n    ['上海', BJData]\r\n].forEach(function(item, i) {\r\n    series.push(\r\n\r\n        {\r\n            type: 'lines',\r\n            zlevel: 2,\r\n            effect: {\r\n                show: true,\r\n                period: 4, //箭头指向速度，值越小速度越快\r\n                trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                symbol: 'arrow', //箭头图标\r\n                symbolSize: 5, //图标大小\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 1, //尾迹线条宽度\r\n                    opacity: 0, //尾迹线条透明度\r\n                    curveness: .3 //尾迹线条曲直度\r\n                }\r\n            },\r\n\r\n            data: convertData(item[1])\r\n        }, {\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 2,\r\n            rippleEffect: { //涟漪特效\r\n                period: 4, //动画时间，值越小速度越快\r\n                brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right', //显示位置\r\n                    offset: [5, 0], //偏移设置\r\n                    formatter: '{b}' //圆环显示文字\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            symbol: 'circle',\r\n            symbolSize: function(val) {\r\n                return 4 + val[2] / 1000; //圆环大小\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    show: false,\r\n                    color: '#f00'\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                return {\r\n                    name: dataItem[0].name,\r\n                    value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                };\r\n            }),\r\n        },\r\n        //被攻击点\r\n        {\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: 'stroke',\r\n                scale: 4\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    //offset:[5, 0],\r\n                    color: '#00ffff',\r\n                    formatter: '{b}',\r\n                    textStyle: {\r\n                        color: \"#00ffff\"\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            symbol: 'pin',\r\n            symbolSize: 30,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: '#9966cc'\r\n                }\r\n            },\r\n            data: [{\r\n                name: item[0],\r\n                value: geoCoordMap[item[0]].concat([100]),\r\n            }],\r\n        }\r\n    );\r\n});\r\n\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    title: {\r\n        text: '上海',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#fff',\r\n            fontSize: 24\r\n        },\r\n        padding: [20, 20, 20, 20]\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        backgroundColor: 'rgba(12, 204, 104, 0.92)',\r\n        borderColor: '#FFFFCC',\r\n        showDelay: 0,\r\n        hideDelay: 0,\r\n        enterable: true,\r\n        transitionDuration: 0,\r\n        extraCssText: 'z-index:100',\r\n        formatter: function(params, ticket, callback) {\r\n            //根据业务自己拓展要显示的内容\r\n            var res = \"\";\r\n            var name = params.name;\r\n            var value = params.value[params.seriesIndex + 1];\r\n            res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\r\n            return res;\r\n        }\r\n    },\r\n    visualMap: { //图例值控制\r\n        min: 0,\r\n        max: 10000,\r\n        calculable: true,\r\n        color: ['#ff3333', 'orange', 'yellow', 'lime', 'aqua'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    geo: {\r\n        map: 'world',\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true, //是否允许缩放\r\n        layoutCenter: ['50%', '50%'], //地图位置\r\n        layoutSize: \"140%\",\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(51, 69, 89, .5)', //地图背景色\r\n                borderColor: 'rgba(100,149,237,1)' //省市边界线\r\n            },\r\n            emphasis: {\r\n                color: 'rgba(37, 43, 61, .5)' //悬浮背景\r\n            }\r\n        }\r\n    },\r\n\r\n    series: series\r\n};\r\n\r\nvar counts = option.series[0].data.length; //获取所有闪动圆环数量\r\nvar dataIndex = 0;\r\n//让圆环的提示框自动触发轮播显示\r\nfunction autoHoverTip() {\r\n    for (var i = 0; i < counts; i++) {\r\n        (function(i) {\r\n            ts = setTimeout(function() {\r\n                myChart.dispatchAction({\r\n                    type: 'showTip',\r\n                    seriesIndex: 1,\r\n                    dataIndex: i\r\n                });\r\n            }, 5000 * i);\r\n        })(i);\r\n    }\r\n}\r\n\r\nsetTimeout(function() {\r\n    autoHoverTip();\r\n    tv = setInterval(autoHoverTip, counts * 1000);\r\n}, 500);","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-1177841325","theme":"","layout":"","viewCount":6022,"userName":"i***o","commentCount":1,"starCount":23,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBJF7T_jWz.png?v=1512983690721","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"i***o"}}