{"status":0,"data":{"cid":"xTuoHFToN9","authorUid":"obd-oEwg-tfsyQIhSqPGVP0ELPf0oiElT4U","authorUserName":"1***1","title":"饼图","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-10-22T08:45:56.000Z","lastUpdateTime":"2021-10-26T03:36:39.000Z","auth":2,"uid":"obd-oEwg-tfsyQIhSqPGVP0ELPf0oiElT4U","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-26T03:36:39.000Z","code":"let chartData = [\n    {\n        name: '重大危险源数量',\n        num: 1000,\n        id: 'total',\n        key: 'TOTAL',\n    },\n    {\n        name: '一级重大危险源数据',\n        num: 100,\n        id: 'one',\n        key: 'ONE',\n    },\n    {\n        name: '二级重大危险源数据',\n        num: 200,\n        id: 'two',\n        key: 'TWO',\n    },\n    {\n        name: '三级重大危险源数据',\n        num: 300,\n        id: 'three',\n        key: 'THREE',\n    },\n    {\n        name: '四级重大危险源数据',\n        num: 400,\n        id: 'four',\n        key: 'FOUR',\n    },\n];\nlet total;\nlet colorArr = ['#FE7B7B', '#FFBD46', '#F5E139', '#0096FF'];\nlet seriesData = [];\nlet nameArr = [];\nchartData.forEach((item, index) => {\n    let value = item.num;\n    if (item.id === 'total') {\n        total = value;\n    }\n    let colorIndex = ['one', 'two', 'three', 'four'].indexOf(item.id);\n    if (['one', 'two', 'three', 'four'].includes(item.id)) {\n        nameArr.push(item.name);\n        if (value) {\n            seriesData.push({\n                name: item.name,\n                value: value,\n                itemStyle: {\n                    normal: {\n                        color: colorArr[colorIndex],\n                    },\n                },\n            });\n        }\n    }\n});\nvar dataStyle = {\n    normal: {\n        label: {\n            show: false,\n        },\n        labelLine: {\n            show: false,\n        },\n    },\n};\noption = {\n    backgroundColor:'#313131',\n    title: {\n        text: `{a|${total}}`,\n        left: 'center',\n        top: 'center',\n        textStyle: {\n            rich: {\n                a: {\n                    // width: 100,\n                    align: 'center',\n                    fontSize: 40,\n                    color: '#fff',\n                    fontWight: 300,\n                    border: '1px solid red',\n                },\n            },\n        },\n    },\n    grid: {\n        containLabel: true,\n    },\n    tooltip: {\n        trigger: 'item',\n        show: true,\n        formatter: (item) => {\n            let data = item.data;\n            if (!data.name) {\n                return '';\n            }\n            return `${data.name}: ${data.value}`;\n        },\n        backgroundColor: 'rgba(0,0,0,0.7)', // 背景\n        padding: [8, 10],\n        extraCssText: 'box-shadow: 0 0 3px rgba(255, 255, 255, 0.4);',\n    },\n    legend: {\n        orient: 'vertical',\n        icon: 'circle',\n        left: '65%',\n        top: 'center',\n        width: 140,\n        itemGap: seriesData.length > 5 ? 15 : 25,\n        itemWidth: 10,\n        itemHeight: 10,\n        data: nameArr,\n        formatter: (name) => {\n            let value = seriesData.filter((item) => item.name === name)[0].value;\n            let ratio = ((value / total) * 100).toFixed(1);\n            return `{a|${name.split('数据')[0]}}{value|${value}}|  {b|${ratio}}{c|%}`;\n        },\n        textStyle: {\n            color: 'rgba(255,255,255,.7)',\n            padding: [2, 0, 0, 2],\n            rich: {\n                a: {\n                    width: 120,\n                    align: 'left',\n                    fontSize: 14,\n                },\n                b: {\n                    align: 'left',\n                    fontSize: 16,\n                    color: '#fff',\n                },\n                c: {\n                    align: 'left',\n                    fontSize: 16,\n                },\n                value: {\n                    width: 40,\n                    align: 'right',\n                    fontSize: 16,\n                    color: '#fff',\n                },\n            },\n        },\n    },\n    series: [\n        {\n            name: 'bg',\n            type: 'pie',\n            radius: [120, 149],\n            center: ['50%', '50%'],\n            itemStyle: dataStyle,\n            hoverAnimation: false,\n            z: 1,\n            data: [\n                {\n                    value: total,\n                    name: '',\n                    itemStyle: {\n                        normal: {\n                            color: 'rgba(119, 140, 162, .15)',\n                        },\n                    },\n                },\n            ],\n        },\n        {\n            name: 'Line 1',\n            type: 'pie',\n            clockWise: true,\n            radius: [126, 143],\n            center: ['50%', '50%'],\n            itemStyle: dataStyle,\n            hoverAnimation: false,\n            startAngle: 90,\n            roundCap: 1,\n            z: 9,\n            data: seriesData,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oEwg-tfsyQIhSqPGVP0ELPf0oiElT4U","theme":"","layout":"","viewCount":0,"userName":"1***1","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTuoHFToN9.png?v=1635219399938","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"1***1"}}