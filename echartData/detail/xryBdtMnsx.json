{"status":0,"data":{"cid":"xryBdtMnsx","authorUid":"bd-1412566899","authorUserName":"范勒个二","title":"全国36城无人区数量","description":"data from Anjuke","latestVersion":6,"alwaysLatest":1,"createTime":"2017-03-19T14:45:01.000Z","lastUpdateTime":"2017-03-19T14:45:01.000Z","auth":2,"uid":"bd-1412566899","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"3.4.0","versionCreateTime":"2017-03-19T14:59:18.000Z","code":"var data = [\n    { name: \"上海\", value: 29780},\n    { name: \"珠海\", value: 2186},\n    { name: \"三亚\", value: 1135},\n    { name: \"惠州\", value: 1973},\n    { name: \"海口\", value: 2568},\n    { name: \"合肥\", value: 4039},\n    { name: \"南京\", value: 6959},\n    { name: \"杭州\", value: 5632},\n    { name: \"苏州\", value: 6707},\n    { name: \"无锡\", value: 3393},\n    { name: \"昆山\", value: 1894},\n    { name: \"广州\", value: 15769},\n    { name: \"深圳\", value: 8259},\n    { name: \"佛山\", value: 5741},\n    { name: \"东莞\", value: 3030},\n    { name: \"福州\", value: 4542},\n    { name: \"厦门\", value: 3329},\n    { name: \"南宁\", value: 3157},\n    { name: \"郑州\", value: 6690},\n    { name: \"武汉\", value: 8678},\n    { name: \"长沙\", value: 5303},\n    { name: \"南昌\", value: 3025},\n    { name: \"北京\", value: 20259},\n    { name: \"长春\", value: 3016},\n    { name: \"大连\", value: 3202},\n    { name: \"沈阳\", value: 4540},\n    { name: \"哈尔滨\", value: 3141},\n    { name: \"天津\", value: 8626},\n    { name: \"济南\", value: 4361},\n    { name: \"青岛\", value: 6667},\n    { name: \"太原\", value: 4080},\n    { name: \"石家庄\", value: 6137},\n    { name: \"西安\", value: 6991},\n    { name: \"成都\", value: 13873},\n    { name: \"重庆\", value: 13283},\n    { name: \"昆明\", value: 4633},\n\n\n];\n\n\nvar geoCoordMap = {\n    \"上海\": [121.48, 31.22],\n    \"珠海\": [113.52, 22.3],\n    \"三亚\": [109.31, 18.14],\n    \"惠州\": [114.4, 23.09],\n    \"海口\": [110.35, 20.02],\n    \"合肥\": [117.27, 31.86],\n    \"南京\": [118.78, 32.04],\n    \"杭州\": [120.19, 30.26],\n    \"苏州\": [120.62, 31.32],\n    \"无锡\": [120.29, 31.59],\n    \"昆山\": [120.95, 31.39],\n    \"广州\": [113.23, 23.16],\n    \"深圳\": [114.07, 22.62],\n    \"佛山\": [113.11, 23.05],\n    \"东莞\": [113.75, 23.04],\n    \"福州\": [119.3, 26.08],\n    \"厦门\": [118.1, 24.46],\n    \"南宁\": [108.33, 22.84],\n    \"郑州\": [113.65, 34.76],\n    \"武汉\": [114.31, 30.52],\n    \"长沙\": [113, 28.21],\n    \"南昌\": [115.89, 28.68],\n    \"北京\": [116.46, 39.92],\n    \"长春\": [125.35, 43.88],\n    \"大连\": [121.62, 38.92],\n    \"沈阳\": [123.38, 41.8],\n    \"哈尔滨\": [126.63, 45.75],\n    \"天津\": [117.2, 39.13],\n    \"济南\": [117, 36.65],\n    \"青岛\": [120.33, 36.07],\n    \"太原\": [112.53, 37.87],\n    \"石家庄\": [114.48, 38.03],\n    \"西安\": [108.95, 34.27],\n    \"成都\": [104.06, 30.67],\n    \"重庆\": [106.54, 29.59],\n    \"昆明\": [102.73, 25.04],\n};\n\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nvar convertedData = [\n    convertData(data),\n    convertData(data.sort(function(a, b) {\n        return b.value - a.value;\n    }).slice(0, 6))\n];\n\n\noption = {\n    backgroundColor: '#404a59',\n    animation: true,\n    animationDuration: 1000,\n    animationEasing: 'cubicInOut',\n    animationDurationUpdate: 1000,\n    animationEasingUpdate: 'cubicInOut',\n    title: [{\n        text: '全国36城“无人区”数',\n        link: 'http://pages.anjuke.com/expert/newexpert.html',\n        subtext: 'data from Anjuke',\n        sublink: 'http://pages.anjuke.com/expert/newexpert.html',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n        }\n    }, {\n        id: 'statistic',\n        right: 120,\n        top: 40,\n        width: 100,\n        textStyle: {\n            color: '#fff',\n            fontSize: 16\n        }\n    }],\n    toolbox: {\n        iconStyle: {\n            normal: {\n                borderColor: '#fff'\n            },\n            emphasis: {\n                borderColor: '#b1e4ff'\n            }\n        },\n        feature: {\n            dataZoom: {},\n            brush: {\n                type: ['rect', 'polygon', 'clear']\n            },\n            saveAsImage: {\n                show: true\n            }\n        }\n    },\n    brush: {\n        outOfBrush: {\n            color: '#abc'\n        },\n        brushStyle: {\n            borderWidth: 2,\n            color: 'rgba(0,0,0,0.2)',\n            borderColor: 'rgba(0,0,0,0.5)',\n        },\n        seriesIndex: [0, 1],\n        throttleType: 'debounce',\n        throttleDelay: 300,\n        geoIndex: 0\n    },\n    geo: {\n        map: 'china',\n        left: '10',\n        right: '35%',\n        center: [117.98561551896913, 31.205000490896193],\n        zoom: 2.5,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#323c48',\n                borderColor: '#111'\n            },\n            emphasis: {\n                areaColor: '#2a333d'\n            }\n        }\n    },\n    tooltip: {\n        trigger: 'item'\n    },\n    grid: {\n        right: 40,\n        top: 100,\n        bottom: 40,\n        width: '30%'\n    },\n    xAxis: {\n        type: 'value',\n        scale: true,\n        position: 'top',\n        boundaryGap: false,\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            margin: 2,\n            textStyle: {\n                color: '#aaa'\n            }\n        },\n    },\n    yAxis: {\n        type: 'category',\n        name: 'TOP',\n        nameGap: 16,\n        axisLine: {\n            show: false,\n            lineStyle: {\n                color: '#ddd'\n            }\n        },\n        axisTick: {\n            show: false,\n            lineStyle: {\n                color: '#ddd'\n            }\n        },\n        axisLabel: {\n            interval: 0,\n            textStyle: {\n                color: '#ddd'\n            }\n        },\n        data: []\n    },\n    series: [{\n        name: 'pm2.5',\n        type: 'scatter',\n        coordinateSystem: 'geo',\n        data: convertedData[0],\n        symbolSize: function(val) {\n            return Math.max(val[2] / 300, 8);\n        },\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false\n            },\n            emphasis: {\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#ddb926'\n            }\n        }\n    }, \n     {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: convertData(data.sort(function (a, b)\n            {\n            return b.value - a.value;\n            }).slice(0, 5)),\n            symbolSize: function (val) {\n                return val[2] / 500;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#ff3300',\n                    shadowBlur: 10,\n                    shadowColor: '#FF7F00'\n                }\n            },\n        zlevel: 1\n    }, {\n        id: 'bar',\n        zlevel: 2,\n        type: 'bar',\n        symbol: 'none',\n        itemStyle: {\n            normal: {\n                color: '#ddb926'\n            }\n        },\n        data: []\n    }]\n};\n\n\nmyChart.on('brushselected', renderBrushed);\n\n// myChart.setOption(option);\n\nsetTimeout(function() {\n    myChart.dispatchAction({\n        type: 'brush',\n        areas: [{\n            geoIndex: 0,\n            brushType: 'polygon',\n            coordRange: [\n                [119.72, 34.85],\n                [119.68, 34.85],\n                [119.5, 34.84],\n                [119.19, 34.77],\n                [118.76, 34.63],\n                [118.6, 34.6],\n                [118.46, 34.6],\n                [118.33, 34.57],\n                [118.05, 34.56],\n                [117.6, 34.56],\n                [117.41, 34.56],\n                [117.25, 34.56],\n                [117.11, 34.56],\n                [117.02, 34.56],\n                [117, 34.56],\n                [116.94, 34.56],\n                [116.94, 34.55],\n                [116.9, 34.5],\n                [116.88, 34.44],\n                [116.88, 34.37],\n                [116.88, 34.33],\n                [116.88, 34.24],\n                [116.92, 34.15],\n                [116.98, 34.09],\n                [117.05, 34.06],\n                [117.19, 33.96],\n                [117.29, 33.9],\n                [117.43, 33.8],\n                [117.49, 33.75],\n                [117.54, 33.68],\n                [117.6, 33.65],\n                [117.62, 33.61],\n                [117.64, 33.59],\n                [117.68, 33.58],\n                [117.7, 33.52],\n                [117.74, 33.5],\n                [117.74, 33.46],\n                [117.8, 33.44],\n                [117.82, 33.41],\n                [117.86, 33.37],\n                [117.9, 33.3],\n                [117.9, 33.28],\n                [117.9, 33.27],\n                [118.09, 32.97],\n                [118.21, 32.7],\n                [118.29, 32.56],\n                [118.31, 32.5],\n                [118.35, 32.46],\n                [118.35, 32.42],\n                [118.35, 32.36],\n                [118.35, 32.34],\n                [118.37, 32.24],\n                [118.37, 32.14],\n                [118.37, 32.09],\n                [118.44, 32.05],\n                [118.46, 32.01],\n                [118.54, 31.98],\n                [118.6, 31.93],\n                [118.68, 31.86],\n                [118.72, 31.8],\n                [118.74, 31.78],\n                [118.76, 31.74],\n                [118.78, 31.7],\n                [118.82, 31.64],\n                [118.82, 31.62],\n                [118.86, 31.58],\n                [118.86, 31.55],\n                [118.88, 31.54],\n                [118.88, 31.52],\n                [118.9, 31.51],\n                [118.91, 31.48],\n                [118.93, 31.43],\n                [118.95, 31.4],\n                [118.97, 31.39],\n                [118.97, 31.37],\n                [118.97, 31.34],\n                [118.97, 31.27],\n                [118.97, 31.21],\n                [118.97, 31.17],\n                [118.97, 31.12],\n                [118.97, 31.02],\n                [118.97, 30.93],\n                [118.97, 30.87],\n                [118.97, 30.85],\n                [118.95, 30.8],\n                [118.95, 30.77],\n                [118.95, 30.76],\n                [118.93, 30.7],\n                [118.91, 30.63],\n                [118.91, 30.61],\n                [118.91, 30.6],\n                [118.9, 30.6],\n                [118.88, 30.54],\n                [118.88, 30.51],\n                [118.86, 30.51],\n                [118.86, 30.46],\n                [118.72, 30.18],\n                [118.68, 30.1],\n                [118.66, 30.07],\n                [118.62, 29.91],\n                [118.56, 29.73],\n                [118.52, 29.63],\n                [118.48, 29.51],\n                [118.44, 29.42],\n                [118.44, 29.32],\n                [118.43, 29.19],\n                [118.43, 29.14],\n                [118.43, 29.08],\n                [118.44, 29.05],\n                [118.46, 29.05],\n                [118.6, 28.95],\n                [118.64, 28.94],\n                [119.07, 28.51],\n                [119.25, 28.41],\n                [119.36, 28.28],\n                [119.46, 28.19],\n                [119.54, 28.13],\n                [119.66, 28.03],\n                [119.78, 28],\n                [119.87, 27.94],\n                [120.03, 27.86],\n                [120.17, 27.79],\n                [120.23, 27.76],\n                [120.3, 27.72],\n                [120.42, 27.66],\n                [120.52, 27.64],\n                [120.58, 27.63],\n                [120.64, 27.63],\n                [120.77, 27.63],\n                [120.89, 27.61],\n                [120.97, 27.6],\n                [121.07, 27.59],\n                [121.15, 27.59],\n                [121.28, 27.59],\n                [121.38, 27.61],\n                [121.56, 27.73],\n                [121.73, 27.89],\n                [122.03, 28.2],\n                [122.3, 28.5],\n                [122.46, 28.72],\n                [122.5, 28.77],\n                [122.54, 28.82],\n                [122.56, 28.82],\n                [122.58, 28.85],\n                [122.6, 28.86],\n                [122.61, 28.91],\n                [122.71, 29.02],\n                [122.73, 29.08],\n                [122.93, 29.44],\n                [122.99, 29.54],\n                [123.03, 29.66],\n                [123.05, 29.73],\n                [123.16, 29.92],\n                [123.24, 30.02],\n                [123.28, 30.13],\n                [123.32, 30.29],\n                [123.36, 30.36],\n                [123.36, 30.55],\n                [123.36, 30.74],\n                [123.36, 31.05],\n                [123.36, 31.14],\n                [123.36, 31.26],\n                [123.38, 31.42],\n                [123.46, 31.74],\n                [123.48, 31.83],\n                [123.48, 31.95],\n                [123.46, 32.09],\n                [123.34, 32.25],\n                [123.22, 32.39],\n                [123.12, 32.46],\n                [123.07, 32.48],\n                [123.05, 32.49],\n                [122.97, 32.53],\n                [122.91, 32.59],\n                [122.83, 32.81],\n                [122.77, 32.87],\n                [122.71, 32.9],\n                [122.56, 32.97],\n                [122.38, 33.05],\n                [122.3, 33.12],\n                [122.26, 33.15],\n                [122.22, 33.21],\n                [122.22, 33.3],\n                [122.22, 33.39],\n                [122.18, 33.44],\n                [122.07, 33.56],\n                [121.99, 33.69],\n                [121.89, 33.78],\n                [121.69, 34.02],\n                [121.66, 34.05],\n                [121.64, 34.08]\n            ]\n        }]\n    });\n}, 0);\n\n\nfunction renderBrushed(params) {\n    var mainSeries = params.batch[0].selected[0];\n\n    var selectedItems = [];\n    var categoryData = [];\n    var barData = [];\n    var maxBar = 30;\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < mainSeries.dataIndex.length; i++) {\n        var rawIndex = mainSeries.dataIndex[i];\n        var dataItem = convertedData[0][rawIndex];\n        var pmValue = dataItem.value[2];\n\n        sum += pmValue;\n        count++;\n\n        selectedItems.push(dataItem);\n    }\n\n    selectedItems.sort(function(a, b) {\n        return a.value[2] - b.value[2];\n    });\n\n    for (var i = 0; i < Math.min(selectedItems.length, maxBar); i++) {\n        categoryData.push(selectedItems[i].name);\n        barData.push(selectedItems[i].value[2]);\n    }\n\n    this.setOption({\n        yAxis: {\n            data: categoryData\n        },\n        xAxis: {\n            axisLabel: {\n                show: !!count\n            }\n        },\n        title: {\n            id: 'statistic',\n            text: count ? '平均: ' + (sum / count).toFixed(4) : ''\n        },\n        series: {\n            id: 'bar',\n            data: barData\n        }\n    });\n}","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-1412566899","theme":"","layout":"","viewCount":1267,"userName":"范勒个二","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryBdtMnsx.png?v=1489935558681","isCustomThumbnail":0,"builtinTags":["brush","category-work","dataZoom","geo","grid","series-bar","series-effectScatter","series-scatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"范勒个二"}}