{"status":0,"data":{"cid":"xdy7sfw4kO","authorUid":"obd-oPgA5TpUxfyPkBtjuaeqaDbHBmgwR9L","authorUserName":"131*****868","title":"数据分布","description":"点击不移动，没有位置变化","latestVersion":1,"alwaysLatest":1,"createTime":"2020-05-08T03:21:19.000Z","lastUpdateTime":"2020-05-08T03:21:19.000Z","auth":2,"uid":"obd-oPgA5TpUxfyPkBtjuaeqaDbHBmgwR9L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-08T03:21:19.000Z","code":"var testData = [\r\n    {\r\n    value: 9422,\r\n    children: [\r\n        {\r\n            name:\"公众聚集场所\",\r\n            value:40,\r\n        },\r\n        {\r\n            name:\"学校、医院、养老院、疗养院、托儿所、幼儿园\",\r\n            value:20\r\n        },\r\n        {\r\n            name:\"国家机关\",\r\n            value:10\r\n        },\r\n        {\r\n            name:\"广播、电视和邮政、通信枢纽\",\r\n            value:10\r\n        },\r\n        {\r\n            name:\"公共图书馆、展览馆、博物馆、档案馆以及具有火灾危险性的文物保护单位\",\r\n            value:80\r\n        },\r\n        {\r\n            name:\"易燃易爆化学物品的生产、充装、存储、供应、销售单位\",\r\n            value:10\r\n        },\r\n        {\r\n            name:\"劳动密集型生产、加工企业\",\r\n            value:10\r\n        },\r\n        {\r\n            name:\"广播、电视和邮政、通信枢纽\",\r\n            value:10\r\n        },\r\n        {\r\n            name:\"重要科研单位\",\r\n            value:45,\r\n            // children:[\r\n            //     {name:\"主卧\",value:25},\r\n            //     {name:\"次卧\",value:20}\r\n            // ]\r\n        }\r\n    ]\r\n    }]\r\n    var color = [\r\n    \"#6F3FE1\",\r\n    \"#5781FD\",\r\n    \"#4DB1CB\",\r\n    \"#3EBD7C\",\r\n    \"#F7A925\",\r\n    \"#bda29a\",\r\n    \"#ca8622\",\r\n    \"#749f83\",\r\n    \"#6e7074\",\r\n    \"#546570\",\r\n    \"#c4ccd3\"\r\n];\r\n    \r\n    var bsLine = [];\r\nvar bsLineV = {};\r\nfor (var key in testData) {\r\n    bsLine.push(testData[key].name);\r\n    bsLineV[testData[key].name] = testData[key].value;\r\n}\r\nvar sbsLineV = Object.keys(bsLineV).sort(function(a, b) {\r\n    return -(bsLineV[a] - bsLineV[b]);\r\n});\r\nfunction colorMappingChange(value) {\r\n        var levelOption = getLevelOption(value);\r\n        chart.setOption({\r\n            series: [{\r\n                levels: levelOption\r\n            }]\r\n        });\r\n    }\r\n\r\n    var formatUtil = echarts.format;\r\n\r\n    function getLevelOption() {\r\n        return [\r\n            {\r\n            color: color,\r\n            itemStyle: {\r\n                normal: {\r\n                    borderWidth: 0,\r\n                    borderColor: '#fff',\r\n                    gapWidth: 2\r\n                }\r\n            }\r\n        },\r\n        {\r\n            //colorSaturation: [0.35, 0.6],\r\n            colorAlpha: [1, 0.5],\r\n            upperLabel: {\r\n                normal: {\r\n                    color: '#555555',\r\n                    show: true,\r\n                    height: 30\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    borderWidth: 5,\r\n                    borderColor: '#EFEFEF',\r\n                    gapWidth: 1\r\n                },\r\n                emphasis: {\r\n                    borderColor: '#ccc'\r\n                }\r\n            }\r\n        }\r\n        ];\r\n    }\r\n\r\n    option = {\r\n        title:{\r\n            text:\"数据分布\"\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: \"{b} : {c}\"\r\n            // formatter: function (info) {\r\n            //     debugger\r\n            //     var value = info.value;\r\n            //     var treePathInfo = info.treePathInfo;\r\n            //     var treePath = [];\r\n\r\n            //     for (var i = 1; i < treePathInfo.length; i++) {\r\n            //         treePath.push(treePathInfo[i].name);\r\n            //     }\r\n\r\n            //     return [\r\n            //         '<div class=\"tooltip-title\">' + formatUtil.encodeHTML(treePath) + '</div>',\r\n            //         '数量: ' + formatUtil.addCommas(value),\r\n            //     ].join('');\r\n            // }\r\n        },\r\n\r\n        series: [\r\n            {\r\n                name:'',\r\n                type:'treemap',\r\n                visibleMin: 300,\r\n                breadcrumb: {\r\n                    show: false\r\n                },\r\n                label: {\r\n                    show: true,\r\n                    formatter: '{b}'\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: '#fff'\r\n                    }\r\n                },\r\n                levels: getLevelOption(),\r\n                data: testData\r\n            }\r\n        ]\r\n    }\r\n    \r\n    myChart.setOption(option, true);\r\n    \r\n    \r\n    \r\n    // 点击事件\r\nmyChart.on(\"click\", function(param) {\r\n    console.log(param)\r\n    debugger\r\n    var selectedItem = param.name;\r\n    //alert(selectedItem);\r\n    // for (var key in dtlData) {\r\n    //     if (dtlData[key].name === selectedItem) {\r\n    //         for (var ki in sbsLineV) {\r\n    //             if (sbsLineV[ki] === selectedItem) {\r\n    //                 bsColor = color[ki]\r\n    //             }\r\n    //         }\r\n    //         series12.levels[1].color = [bsColor]\r\n    //         series12.data = [dtlData[key]]\r\n    //         option.series = [series11, series12]\r\n    //         myChart.setOption(option, true);\r\n    //     }\r\n    // }\r\n\r\n    if (bsLine.indexOf(selectedItem) < 0) {\r\n        myChart.setOption(option, true);\r\n    }\r\n});","html":"","externalScripts":"","updaterUID":"obd-oPgA5TpUxfyPkBtjuaeqaDbHBmgwR9L","theme":"","layout":"","viewCount":654,"userName":"131*****868","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xdy7sfw4kO.png?v=1588908079987","isCustomThumbnail":0,"builtinTags":["category-work","series-treemap","title","tooltip"],"customTags":[],"updaterUserName":"131*****868"}}