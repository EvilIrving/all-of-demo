{"status":0,"data":{"cid":"xByUH1N_LG","authorUid":"bd-1263247155","authorUserName":"心***着","title":"伪雷达","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-02-07T07:48:14.000Z","lastUpdateTime":"2018-02-07T07:48:14.000Z","auth":2,"uid":"bd-1263247155","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2018-02-07T07:48:14.000Z","code":"var radarStyle = document.createElement(\"style\"); \nvar str = `\n    #radar:after {\n\t  content: ' ';\n\t  display: block;\n\t  background-image: linear-gradient(44deg, rgba(0, 255, 51, 0) 50%, #00ff33 100%);\n\t  width: 180px;\n\t  height: 180px;\n\t  position: absolute;\n\t  top: 14%;\n\t  left: 14%;\n\t  animation: radar-beam 4s infinite;\n\t  animation-timing-function: linear;\n\t  transform-origin: bottom right;\n\t  border-radius: 100% 0 0 0;\n\t}\n\t@keyframes radar-beam {\n\t  0% {\n\t    transform: rotate(0deg);\n\t  }\n\t  100% {\n\t    transform: rotate(360deg);\n\t  }\n\t}\n`;\nif(radarStyle.styleSheet){         //ie下  \n    radarStyle.styleSheet.cssText = str;  \n} else {  \n    radarStyle.innerHTML = str;\n};\ndocument.getElementsByTagName(\"head\")[0].appendChild(radarStyle);\n\nvar radarDiv = document.createElement('div');\nradarDiv.id = 'radar';\nradarDiv.style.position = 'relative';\nradarDiv.style.width = '500px';\nradarDiv.style.height = '500px';\nradarDiv.style.margin = '0 auto';\nvar body = document.querySelector('body');\nbody.appendChild(radarDiv);\n\nvar mockData = [{\n\ttext: '指标一',\n\tvalue: 2\n}, {\n\ttext: '指标二',\n\tvalue: 3.2\n}, {\n\ttext: '指标三',\n\tvalue: 5\n}, {\n\ttext: '指标四',\n\tvalue: 4.1\n}, {\n\ttext: '指标五',\n\tvalue: 2.8\n}];\n\nvar container = document.getElementById('radar');\nvar radar = echarts.init(container);\n\ninitRadar(mockData);\n\nfunction initRadar(mockData){\n    var minAngle = 10;\t// 最小角度\n    var indicator = [];\n    var data = [];\n    var idx = 0;\n    var randomArr = getRandom(360 / minAngle, mockData.length);\n    for(var i=0;i<360 / minAngle;i++){\n    \tif(randomArr.indexOf(i) > -1){\n    \t\tindicator.push({\n    \t\t\ttext: mockData[idx].text\n    \t\t});\n    \t\tdata.push(mockData[idx].value);\n    \t\tidx++;\n    \t}else{\n    \t\tindicator.push({\n    \t\t\ttext: i * 10 + '`'\n    \t\t});\n    \t\tdata.push('-');\n    \t}\n    };\n    var option = {\n    \tbackgroundColor: '#333',\n        radar: [\n            {\n                indicator: indicator,\n                center: ['50%', '50%'],\n                radius: 180,\n                startAngle: 90,\n                splitNumber: 4,\n                shape: 'circle',\n                name: {\n                \tshow: false,\n                    // formatter:'【{value}】',\n                    // textStyle: {\n                    //     color:'rgba(0, 255, 51, 1)'\n                    // }\n                },\n                splitArea: {\n                    areaStyle: {\n                    \tcolor: 'rgba(255, 255, 255, 0)'\n                    }\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: 'rgba(0, 255, 51, 0)'\n                    }\n                },\n                splitLine: {\n                    lineStyle: {\n                        color: 'rgba(0, 255, 51, 1)'\n                    }\n                }\n            }\n        ],\n        series: [\n            {\n                name: '雷达图',\n                type: 'radar',\n                symbol: 'circle',\n                symbolSize: 24,\n                silent: true,\n                animationEasing: 'quarticOut',\n                animationEasingUpdate: 'quarticOut',\n                animationDuration: 2000,\n                animationDurationUpdate: 2000,\n                label: {\n                \tnormal: {\n                \t\tshow: true,\n                \t\ttextStyle: {\n                \t\t\tcolor: 'rgba(0, 255, 51, 1)'\n                \t\t}\n                \t}\n                },\n                itemStyle: {\n                \tnormal: {\n                \t\topacity: 0\n                \t},\n                \temphasis: {\n                    \tcolor: {\n                    \t\ttype: 'radial',\n                    \t\tx: 0.5,\n                    \t\ty: 0.5,\n                    \t\tr: 0.3,\n                    \t\tcolorStops: [{\n                    \t\t\toffset: 0,\n                    \t\t\tcolor: 'rgba(0, 255, 51, 1)'\n                    \t\t}, {\n                    \t\t\toffset: 1,\n                    \t\t\tcolor: 'rgba(255, 255, 255, .1)'\n                    \t\t}]\n                    \t},\n                    \tborderWidth: 0, \n                    \topacity: 1\n                    }\n                },\n                data: [\n                    {\n                        value: data,\n                        label: {\n                        \tnormal: {\n                        \t\ttextStyle: {\n                        \t\t\tcolor: 'rgba(0, 255, 51, 1)'\n                        \t\t}\n                        \t}\n                        },\n                        lineStyle: {\n                            normal: {\n                                opacity: 0\n                            }\n                        }\n                    }\n                ]\n            }\n        ]\n    };\n    \n    radar.setOption(option);\n    \n    function getRandom(range, count){\n    \tvar randomArr = [];\n    \tfor(var i = 0;i < count;i++){\n    \t\tvar r = Math.round(Math.random() * (range - 1));\n    \t\trandomArr.push(r);\n    \t}\n    \treturn randomArr;\n    }\n}\n\n// 点动画\n(function(){\n\tvar highlight = false;\n\tvar type;\n\tsetInterval(function(){\n\t    initRadar(mockData);\n\t\ttype = highlight ? 'downplay' : 'highlight';\n\t\tradar.dispatchAction({\n\t\t\ttype: type,\n\t\t\tseriesIndex: 0\n\t\t});\n\t\thighlight = !highlight;\n\t}, 2000);\n})();","html":"","externalScripts":"","updaterUID":"bd-1263247155","theme":"","layout":"","viewCount":30167,"userName":"心***着","commentCount":5,"starCount":136,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xByUH1N_LG.png?v=1517989694188","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":["radar"],"updaterUserName":"心***着"}}