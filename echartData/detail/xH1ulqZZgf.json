{"status":0,"data":{"cid":"xH1ulqZZgf","authorUid":"bd-432888987","authorUserName":"150*****969","title":"股票","description":"纯属虚构","latestVersion":7,"alwaysLatest":1,"createTime":"2017-11-21T02:05:36.000Z","lastUpdateTime":"2017-11-21T02:05:36.000Z","auth":2,"uid":"bd-432888987","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":5,"echartsVersion":"3.8.0","versionCreateTime":"2017-11-22T08:39:32.000Z","code":"    var time = [],\r\n        price = [],\r\n        avgPrice = [];\r\n    var suiji = 80;\r\n    var sjjj=true;\r\n    var refercnce = 100; //参考线，昨收价格\r\n    var minVal = refercnce - 20; //价格最小值\r\n    var maxVal = refercnce + 20; //价格最大值\r\n    var minPct = ((minVal - refercnce) / refercnce * 100).toFixed(2); \r\n    //涨幅最小值\r\n    var maxPct = ((maxVal - refercnce) / refercnce * 100).toFixed(2); \r\n    //涨幅最大值\r\n    for (var i = 9; i <= 15; i++) {\r\n        for (var y = 0; y <= 59; y++) {\r\n            if (i == 9 && y < 30) {\r\n                y = 30;\r\n            }\r\n            if ((i > 11 && i < 13) || (i === 11 && y > 30) || (i === 13 && y === 0) ) {\r\n               \r\n            }else{\r\n                time.push(weishu(i, 2) + ':' + weishu(y, 2));\r\n       \t\t\t\r\n                if(sjjj){\r\n                  suiji = randomNum(suiji,suiji+1);  \r\n                    if(suiji>=120){\r\n                        \r\n                        sjjj=false;\r\n                    }\r\n                }else{\r\n                    suiji =  randomNum(suiji,suiji-2);  \r\n                    if(suiji<=80){\r\n                        sjjj=true;\r\n                    }\r\n                }\r\n                // price.push(suiji); \r\n                // avgPrice.push(randomNum(suiji+2,suiji+4).toFixed(2)); \r\n                if(i<=11){\r\n              price.push(suiji); \r\n               \r\n                avgPrice.push(randomNum(suiji+2,suiji+4).toFixed(2)); \r\n              }\r\n            }\r\n            if (i >= 15) {\r\n                break;\r\n            }\r\n        }\r\n    }\r\n   function randomNum(minNum,maxNum){ \r\n// \t  console.log(Math.floor(Math.random()*(maxNum-minNum+1)+minNum).toFixed(2))\r\n      return Math.random()*(maxNum-minNum+1)+minNum; \r\n    } \r\n\r\n    function weishu(str, num) {\r\n        str = '0000' + str;\r\n        return str.substr(str.length - num);\r\n    }\r\n    \r\n    var option = {\r\n        tooltip:{  \r\n            backgroundColor :'rgba(240,255,255,0.8)',\r\n            borderColor:'#666',\r\n            transitionDuration :0,\r\n            padding :[2,4],\r\n            trigger :'axis',\r\n            confine:true,\r\n            borderWidth: 1,\r\n            axisPointer: {\r\n                type: 'cross',\r\n                label: {\r\n                    backgroundColor:'rgba(240,255,255,0.8)',\r\n                   \ttextStyle:{\r\n                   \t\tcolor:'#333',\r\n                   \t\tfontSize:14,\r\n                   \t},\r\n                   \tpadding:[5,4],\r\n                   \tborderColor:'#000',\r\n                \tborderWidth:1,\r\n                   \tshadowBlur:0,\r\n                   \tshadowColor:'rgba(0,0,0,0)'\r\n                },\r\n                crossStyle :{\r\n                    type :'solid',\r\n                    color:'rgb(190,190,190)',\r\n                },\r\n            },\r\n            extraCssText: 'border-radius:0',\r\n\t\t\tposition: function (pos, params, el, elRect, size) {\r\n                var obj = {};\r\n                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 10;\r\n                obj['top']=pos[1]-10;\r\n                return obj;\r\n            },\r\n\t\t\tformatter: function(obj) {\r\n              \tvar data='';  \r\n              \tvar fcolor = obj[0].value < refercnce ? '#26aa5e' : obj[0].value > refercnce ? '#f0595e' :'#333';\r\n              \tdata+='<span style=\"color:'+fcolor+'\">'+obj[0].value.toFixed(2)+'</span>';\r\n\t\t\t\treturn data;\r\n            }\r\n        },\r\n        title: {\r\n            text: '',\r\n        },\r\n        grid:{\r\n        \ttop:5,\r\n            left:5,\r\n            right:5,\r\n        },\r\n        xAxis: {\r\n            boundaryGap: false,\r\n            splitNumber: 4,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                interval: 59,\r\n                color:'#333',\r\n                padding: [0, 0,0 ,-25],\r\n                formatter: function(val,index) {\r\n                    var flag = '        ';               \r\n                    if(index===0){\r\n//                      flag='                  ';\r\n                        flag='                ';\r\n                    }\r\n                    if(index === 240){\r\n                        flag='';\r\n                    }\r\n                    if(val == '10:30' || val == '14:00'){\r\n                    \tflag='';\r\n                    \tval = '';\r\n                    }\r\n                    return flag + val;\r\n                },\r\n            },\r\n            axisLine:{\r\n                lineStyle:{\r\n                    color:'#ddd'\r\n                }, \r\n            },\r\n            data: time,\r\n            splitLine: {\r\n                show: true,\r\n            },\r\n        },\r\n        yAxis: [{\r\n            splitNumber: 4,\r\n            min: minVal,\r\n            max: maxVal,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            axisLine:{\r\n                lineStyle:{\r\n                    color:'#ddd'\r\n                },\r\n                onZero: false \r\n            },\r\n            axisLabel: {\r\n                inside:true,\r\n                padding:[-25,0,0,0],\r\n                formatter: function(val,index) {\r\n                    var flag = '';\r\n                    if(index % 2 === 0){\r\n                        if(index===2){\r\n                           flag='\\n\\n';\r\n                        }\r\n                        if(index===4){\r\n                            flag ='\\n\\n\\n\\n';\r\n                        }\r\n                        return flag+ val.toFixed(2);\r\n                    }\r\n                },\r\n                textStyle: {\r\n                    color: function(val) {\r\n                        //设置坐标轴刻度颜色(大于1000的数需要去除'，')\r\n                        var temp = val.split(',').join('');\r\n                        return temp < refercnce ? '#26aa5e' : temp > refercnce ? '#f0595e' :'#333';\r\n                    }\r\n                }\r\n            },\r\n            axisPointer: {\r\n                label: {\r\n                   show :false,\r\n                }\r\n            },\r\n\r\n        }, {\r\n            min: minPct,\r\n            max: maxPct,\r\n            axisLine:{\r\n                lineStyle:{\r\n                    color:'#ddd'\r\n                },\r\n                 onZero: false \r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                inside:true,\r\n                padding:[-25,0,0,0],\r\n                formatter: function(val,index) {\r\n                    var flag = '';\r\n                    if(index % 2 === 0){\r\n                        if(index===2){\r\n                           flag='\\n\\n';\r\n                        }\r\n                        if(index===4){\r\n                            flag ='\\n\\n\\n\\n';\r\n                        }\r\n                        return flag+ val.toFixed(2) + '%';\r\n                    }\r\n                },\r\n                textStyle: {\r\n                    color: function(val) {\r\n                        var temp = val = val.split(',').join(''); \r\n                        return temp < 0 ? '#26aa5e' : temp > 0 ? '#f0595e' :'#333';\r\n                    }\r\n                }\r\n            },\r\n            axisPointer: {\r\n                label: {\r\n                   show :false,\r\n                }\r\n            },\r\n\r\n        }],\r\n        series: [{\r\n            type: 'line',\r\n            symbol: 'none',\r\n             name:'实时价格',\r\n            smooth: true,\r\n            tooltip :{\r\n           \r\n            },        \r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#474747', // 实时价格\r\n                    width: 1,\r\n                },\r\n\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: 'rgba(0, 0, 0, 0)'\r\n                }\r\n            },\r\n            data: price,\r\n            markLine: {\r\n             silent: true,\r\n             label: {\r\n                 normal: {\r\n                     // position: 'start'\r\n                     show:false\r\n                 }\r\n             },\r\n             lineStyle: {\r\n                 normal: {\r\n                     color: '#f0595e', // 参考价格\r\n                     width: 1,\r\n                 },\r\n \r\n             },\r\n             symbol:'none',\r\n             data: [{\r\n                 yAxis: 102\r\n             }]\r\n         }\r\n        },{\r\n            type: 'line',\r\n            symbol: 'none',\r\n            name:'均线价格',\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#ffa421', // 均线价格\r\n                    width: 1\r\n                }\r\n            },\r\n            label:{\r\n            \tnormal: {\r\n                    show: false\r\n                  \r\n                }\r\n            },\r\n            data: avgPrice\r\n        }]\r\n    };\r\n    \r\n    function getdata(gpcode){\r\n        $.ajax({\r\n            url:\"http://pdfm.eastmoney.com/EM_UBG_PDTI_Fast/api/js?id=\"+gpcode+\"&TYPE=r&js=fsdata((x))&rtntype=5&isCR=false&fsdata=fsdata\",\r\n            type:'get',\r\n            beforeSend: function(request) {\r\n                        request.setRequestHeader(\"Referer\", \"http://pdfm.eastmoney.com/EM_UBG_PDTI_Fast/api/js?id=3001192&TYPE=r&js=fsdata((x))&rtntype=5&isCR=false&fsdata=fsdata\");\r\n                        request.setRequestHeader(\"Accept\", \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\");\r\n                   \r\n                    },\r\n                    \r\n            success:function(data){\r\n                console.log(data);\r\n                suiji = randomNum(suiji,suiji+1);  \r\n                price.push(suiji);\r\n                avgPrice.push(randomNum(suiji,suiji+1));\r\n                myChart.setOption({\r\n                    series: [{\r\n                         name:'实时价格',\r\n                        data: price\r\n                    },{\r\n                         name:'均线价格',\r\n                        data:avgPrice\r\n                    }]\r\n                });\r\n            },\r\n            error:function(error){\r\n                \r\n                \r\n            }\r\n        });\r\n    }\r\n    setInterval(function () {\r\n        getdata('3001192');\r\n    \r\n    }, 2000);","html":"","externalScripts":"","updaterUID":"bd-432888987","theme":"","layout":"","viewCount":553,"userName":"150*****969","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xH1ulqZZgf.png?v=1511339972795","isCustomThumbnail":0,"builtinTags":["category-work","grid","markLine","series-line","title","tooltip"],"customTags":[],"updaterUserName":"150*****969"}}