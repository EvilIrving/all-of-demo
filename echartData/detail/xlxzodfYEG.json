{"status":0,"data":{"cid":"xlxzodfYEG","authorUid":"bd-1832650076","authorUserName":"凌***殇","title":"【通用】柱状图/线状图 多参数封装","description":" * @param {*} typeSelect  图表类型 line/bar\n * @param {*} ID  图表容器id\n * @param {*} xAxisArr  x轴文字数组\n * @param {*} nameArr   类别数组\n * @param {*} colorsArr  颜色数组\n * @param {*} dataArr  数据数组\n * @param {*} yAxisSet  是否双y轴\n * @param {*} yAxisUnit  y轴左右单位\n","latestVersion":3,"alwaysLatest":1,"createTime":"2021-03-19T05:34:53.000Z","lastUpdateTime":"2021-03-19T05:34:53.000Z","auth":2,"uid":"bd-1832650076","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.9.0","versionCreateTime":"2021-05-12T03:16:59.000Z","code":"// 测试随机数组生成\nfunction random(len, start, end) {\n    var arr = [];\n\n    function _inner(start, end) {\n        var span = end - start;\n        return parseInt(Math.random() * span + start)\n    }\n    while (arr.length < len) {\n        var num = _inner(start, end);\n        if (arr.indexOf(num) == -1) {\n            arr.push(num);\n        }\n    }\n    return arr;\n}\n\n\n/**\n *\n * 通用线状/柱状图\n * @param {*} typeSelect  图表类型 line/bar\n * @param {*} ID  图表容器id\n * @param {*} xAxisArr  x轴文字数组\n * @param {*} nameArr   类别数组\n * @param {*} colorsArr  颜色数组\n * @param {*} dataArr  数据数组\n * @param {*} yAxisSet  是否双y轴\n * @param {*} yAxisUnit  y轴左右单位\n */\nfunction echartLineOrBar(typeSelect, ID, xAxisArr, nameArr, colorsArr, dataArr, yAxisSet, yAxisUnit) {\n    //  var myChart = echarts.init(document.getElementById(ID)); //echart容器======>取消注释这里\n    var typeSelectArr = []; //类型数组  如果typeSelect为数组就用传进来的typeSelect 不为数组就循环typeSelect\n    if (typeof typeSelect == \"object\") {\n        typeSelectArr = typeSelect;\n    } else {\n        for (let k = 0; k < nameArr.length; k++) {\n            typeSelectArr.push(typeSelect);\n        }\n    }\n    var seriesArr = []; //图表详细数组\n    var yAxisArr = []; //双y轴显示\n    var offset_y; //y轴偏移\n    var gird_r; //容器右侧距离\n    var tipType = \"\" //tooltip划过显示方式\n    if (yAxisSet && nameArr.length > 2) {\n        offset_y = [0, 0, 60];\n        gird_r = \"5%\";\n    } else {\n        offset_y = 0\n        gird_r = \"3%\"\n    }\n    dataArr.forEach(function(item, index) {\n        var labelSet = \"\"; //柱状图文字显示\n        if (typeSelectArr[index] === \"bar\") {\n            labelSet = {\n                show: true,\n                position: \"top\",\n                color: \"#333\",\n                fontSize: 12,\n            };\n        } else {\n            labelSet = {\n                show: false,\n            };\n        }\n\n        if (yAxisSet) {\n            seriesArr.push({\n                name: nameArr[index],\n                color: colorsArr[index],\n                type: typeSelectArr[index],\n                barWidth: \"15%\",\n                yAxisIndex: index,\n                // label: labelSet,\n                data: item,\n            });\n\n\n            yAxisArr.push({\n                type: \"value\",\n                name: '单位:' + yAxisUnit[index],\n                offset: offset_y[index],\n                splitLine: {\n                    //y轴网格线\n                    lineStyle: {\n                        color: \"#eee\",\n                    },\n                },\n                axisLabel: {\n                    //y轴文本\n                     \n                      formatter: function (value, index) {\n                      if (value >= 100000000) {\n                        return value / 100000000 + \"亿\";\n                      } else if (value >= 10000) {\n                        return value / 10000 + \"万\";\n                      } else {\n                        return value +\"元\";\n                      }\n                    },\n                    showMinLabel: false, //y轴是否设置最小刻度0\n                    textStyle: {\n                        fontSize: 12,\n                        color: colorsArr[index],\n                    },\n                },\n                axisTick: {\n                    show: false,\n                },\n                axisLine: {\n                    //y轴线\n                    show: true,\n                    lineStyle: {\n                        color: colorsArr[index]\n                    },\n                },\n            })\n\n            tipType = \"cross\";\n\n        } else {\n            seriesArr.push({\n                name: nameArr[index],\n                color: colorsArr[index],\n                type: typeSelectArr[index],\n                barWidth: \"15%\",\n                // label: labelSet,\n                data: item,\n            });\n\n            yAxisArr = [{\n                type: \"value\",\n                name: '单位:' + yAxisUnit[0],\n                splitLine: {\n                    //y轴网格线\n                    lineStyle: {\n                        color: \"#eee\",\n                    },\n                },\n                axisLabel: {\n                      formatter: function (value, index) {\n                      if (value >= 100000000) {\n                        return value / 100000000 + \"亿\";\n                      } else if (value >= 10000) {\n                        return value / 10000 + \"万\";\n                      } else {\n                        return value +\"元\";\n                      }\n                    },\n                    //y轴文本\n                    showMinLabel: false, //y轴是否设置最小刻度0\n                    color: \"#333\",\n                    textStyle: {\n                        fontSize: 12,\n                    },\n                },\n                axisTick: {\n                    show: false,\n                },\n                axisLine: {\n                    //y轴线\n                    lineStyle: {\n                        color: \"#333\",\n                    },\n                },\n            }, ]\n            tipType = \"shadow\"\n        }\n    });\n\n\n    option = {\n        backgroundColor:'#dbf6e9',\n        tooltip: {\n            trigger: \"axis\",\n            textStyle: {\n                fontSize: 14,\n            },\n            axisPointer: {\n                type: tipType\n            }\n        },\n        legend: {\n            data: nameArr,\n            left: \"center\",\n            itemWidth: 20, // 设置宽度\n            itemHeight: 15, // 设置高度\n            top: 0,\n            textStyle: {\n                color: \"#333\",\n                fontSize: 14,\n                padding: [2, 0, 0, 0],\n            },\n        },\n        grid: {\n            left: \"3%\",\n            right: gird_r,\n            bottom: \"3%\",\n            top: 50,\n            containLabel: true,\n        },\n\n        xAxis: [{\n            type: \"category\",\n\n            axisLine: {\n                lineStyle: {\n                    color: \"#333\",\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                textStyle: {\n                    fontSize: 12,\n                },\n            },\n            data: xAxisArr,\n        }, ],\n        yAxis: yAxisArr,\n        series: seriesArr,\n    }\n}\n\nechartLineOrBar(\n    [\"line\", \"bar\", \"bar\"],\n    \"myeChart\",\n    [\"上城区\", \"下城区\", \"江干区\", \"拱墅区\", \"西湖区\", \"滨江区\", \"萧山区\", \"余杭区\", \"桐庐县\", \"淳安县\", \"建德市\", \"富阳区\", \"临安区\", \"钱塘新区\"],\n    [\"类型一\", \"类型二\", \"类型三\"],\n    [\"#0076ef\", \"#f79427\", \"#6581f9\"],\n    [random(14, 500, 1000), random(14, 1500, 2000), random(14, 0, 100)], true,\n    [\"元\", \"万元\", \"个\"]\n);\n\n\n//     echartLineOrBar(\n//     [\"line\", \"bar\" ],\n//     \"myeChart\",\n//     [\"上城区\", \"下城区\", \"江干区\", \"拱墅区\", \"西湖区\", \"滨江区\", \"萧山区\", \"余杭区\", \"桐庐县\", \"淳安县\", \"建德市\", \"富阳区\", \"临安区\", \"钱塘新区\"],\n//     [\"类型一\", \"类型二\"],\n//     [\"#0076ef\", \"#f79427\"],\n//     [random(14, 500, 1000), random(14, 1500, 2000)]\n//     ,true,\n//     [\"元\",\"万元\"]\n//   );\n\n// ps：取消注释函数里的第一行！！！","html":"","externalScripts":"","updaterUID":"bd-1832650076","theme":"","layout":"","viewCount":37,"userName":"凌***殇","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xlxzodfYEG.png?v=1620789419944","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"凌***殇"}}