{"status":0,"data":{"cid":"x-Ewv2G3Gv","authorUid":"bd-7382906384","authorUserName":"满***6","title":"模拟横轴和纵轴动态变化的柱子","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2021-03-18T03:50:57.000Z","lastUpdateTime":"2021-03-18T03:50:57.000Z","auth":2,"uid":"bd-7382906384","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-18T08:30:31.000Z","code":"let datas = {\r\n    yData: [-502.84, 205.97, 332.79, 281.55],\r\n    xData: [\r\n        \"2021.01.01\",\r\n        \"2021.01.02\",\r\n        \"2021.01.03\",\r\n        \"2021.01.04\",\r\n        \"2021.01.05\",\r\n        \"2021.01.06\",\r\n        \"2021.01.07\",\r\n        \"2021.01.08\",\r\n        \"2021.01.09\",\r\n        \"2021.01.10\",\r\n    ],\r\n    unit: \"亿元\"\r\n}\r\nlet xData = datas.xData;\r\nlet yData = datas.yData;\r\nlet color = \"rgb(121, 238, 255)\";\r\nlet textColor = \"#fff\";\r\nlet splitLineColor = \"rgba(255,255,255,.1)\";\r\nlet dataArr = [4, 2, 3, 1];\r\nlet unit = datas.unit;\r\nlet series = [];\r\nlet xdata = datas.xData;\r\n\r\nfunction getDataArr(data, index) {\r\n    var newArr = [];\r\n    if (index > 0) {\r\n        let arr = dataArr.slice(0, index);\r\n        let len = arr.reduce((x, y) => x + y);\r\n        for (var j = 1; j <= len; j++) {\r\n            newArr.push('');\r\n        };\r\n    }\r\n    for (var i = 0; i <= dataArr[index]; i++) {\r\n        newArr.push(data);\r\n    }\r\n\r\n    return newArr;\r\n}\r\ndatas.yData.map((item, index) => {\r\n    let data = getDataArr(item, index);\r\n    // console.log(\"data\", data, );\r\n    let obj = {\r\n        name: '',\r\n        type: 'line',\r\n        // smooth: false, //是否平滑\r\n        // showAllSymbol: false,\r\n        // symbol: 'circle',\r\n        symbolSize: 1,\r\n\r\n        emphasis: {\r\n            // focus :'series'\r\n            itemStyle: {\r\n                color: 'rgba(0,0,0,0)',\r\n                borderWidth: 0\r\n            }\r\n        },\r\n\r\n        lineStyle: {\r\n            normal: {\r\n                color,\r\n                width: 5\r\n            },\r\n        },\r\n        areaStyle: {\r\n\r\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: \"rgb(81, 203, 216,.5)\"\r\n                },\r\n                {\r\n                    offset: 1,\r\n                    color: \"rgb(81, 203, 216,.1)\"\r\n                }\r\n            ], false),\r\n\r\n        },\r\n        itemStyle: {\r\n            color,\r\n        },\r\n        label:{\r\n          show:true  ,\r\n          formatter:(p,i)=>{\r\n              console.log(p,i)\r\n              return \"111\"\r\n          }\r\n        },\r\n        data: data\r\n    };\r\n    series.push(obj)\r\n})\r\n// console.log(\"xdata\", xdata);\r\n\r\noption = {\r\n    backgroundColor: \"rgb(48, 160, 199)\",\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            // type: \"none\",\r\n            //   axis:'y',\r\n\r\n        },\r\n    },\r\n    xAxis: [{\r\n        show: true,\r\n        type: 'category',\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: splitLineColor,\r\n\r\n            }\r\n        },\r\n        splitArea: {\r\n            show: false,\r\n\r\n        },\r\n        axisLabel: {\r\n            color: textColor,\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: splitLineColor,\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        boundaryGap: true,\r\n        data: xdata,\r\n\r\n    }],\r\n    grid: {\r\n        x: '5%',\r\n        y: '5%',\r\n        x2: '5%',\r\n        y2: '5%',\r\n        borderWidth: 1\r\n    },\r\n    yAxis: [{\r\n        type: 'value',\r\n        name: unit,\r\n        nameTextStyle: {\r\n            color: textColor,\r\n            //   fontSize:16\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: splitLineColor,\r\n\r\n            }\r\n        },\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: splitLineColor,\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            textStyle: {\r\n                color: textColor,\r\n            },\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n    }],\r\n    series\r\n};","html":"","externalScripts":"","updaterUID":"bd-7382906384","theme":"","layout":"","viewCount":28,"userName":"满***6","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-Ewv2G3Gv.png?v=1616056231409","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","tooltip"],"customTags":[],"updaterUserName":"满***6"}}