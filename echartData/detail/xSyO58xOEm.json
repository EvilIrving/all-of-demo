{"status":0,"data":{"cid":"xSyO58xOEm","authorUid":"bd-1158218442","authorUserName":"J***r","title":"雨夜","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-07-27T01:34:08.000Z","lastUpdateTime":"2018-07-27T01:34:08.000Z","auth":2,"uid":"bd-1158218442","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-27T01:34:08.000Z","code":"\n// github: github.com/jackshawn/pics-by-echarts\n\nvar lightnings = function() {\n    let lightningArr = []\n    let line = (function() {\n        let position = Math.random() * 30 + 10\n        return function() {\n            return (Math.random() - .5) * 5 + position\n        }\n    })()\n    for(let i = 0; i < 5; i++) {\n        lightningArr.push({\n            type: 'line',\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            symbolSize: 0,\n            lineStyle: {\n                normal: {\n                    color: '#fff',\n                    width: .5 + Math.random(),\n                    opacity: 1\n                }\n            },\n            data: new Array(4),\n            animation: true,\n            animationDuration: 1000\n        })\n    }\n    lightningArr[0].lineStyle.normal.width = 3\n    lightningArr[0].z = 3\n\n    let randomNum = Math.random()\n    if(randomNum > .66) {\n        // 向右\n        for(let i = 0; i < 16; i++) {\n            if(i === 15) {\n                let fir = line()\n                lightningArr.forEach(function(item) {\n                    item.data.push(fir)\n                })\n            }\n            if(i === 14) {\n                let sec = line() + 2.5\n                lightningArr.forEach(function(item) {\n                    item.data.push(sec)\n                })\n            }\n            if(i > 6 && i < 14) {\n                lightningArr[0].data.push(line() + (16 - i))\n                lightningArr[1].data.push(line() + (16 - i))\n                lightningArr[2].data.push(line() + (16 - i))\n                lightningArr[3].data.push(line() + (16 - i))\n                lightningArr[4].data.push(line() + (16 - i))\n            }\n            if(i <= 6) {\n                lightningArr[0].data.push(line() + (16 - i) * .8);\n                lightningArr[1].data.push(line() + (16 - i) * .3)\n                lightningArr[2].data.push(line() + (16 - i) * .4)\n                lightningArr[3].data.push(line() + (16 - i) * 1.1)\n                lightningArr[4].data.push(line() + (16 - i) * 1.2)\n            }\n        }\n        console.log('right')\n    }\n    if(randomNum < .33) {\n        // 向左\n        for(let i = 0; i < 16; i++) {\n            if(i === 15) {\n                let fir = line()\n                lightningArr.forEach(function(item) {\n                    item.data.push(fir)\n                })\n            }\n            if(i === 14) {\n                let sec = line() - 2.5\n                lightningArr.forEach(function(item) {\n                    item.data.push(sec)\n                })\n            }\n            if(i > 6 && i < 14) {\n                lightningArr[0].data.push(line() + (i - 16))\n                lightningArr[1].data.push(line() + (i - 16))\n                lightningArr[2].data.push(line() + (i - 16))\n                lightningArr[3].data.push(line() + (i - 16))\n                lightningArr[4].data.push(line() + (i - 16))\n            }\n            if(i <= 6) {\n                lightningArr[0].data.push(line() + (i - 16) * .8);\n                lightningArr[1].data.push(line() + (i - 16) * .4)\n                lightningArr[2].data.push(line() + (i - 16) * .3)\n                lightningArr[3].data.push(line() + (i - 16) * 1.1)\n                lightningArr[4].data.push(line() + (i - 16) * 1.2)\n            }\n        }\n        console.log('left')\n    }\n    if(randomNum >= .33 && randomNum <= .66) {\n        // 中间\n        for(let i = 0; i < 16; i++) {\n            if(i > 13) {\n                let fir = line()\n                lightningArr.forEach(function(item) {\n                    item.data.push(fir)\n                })\n            } else {\n                lightningArr[0].data.push(line());\n                lightningArr[1].data.push(line() - (16 - i) * .2)\n                lightningArr[2].data.push(line() - (16 - i) * .4)\n                lightningArr[3].data.push(line() + (16 - i) * .2)\n                lightningArr[4].data.push(line() + (16 - i) * .4)\n            }\n        }\n        console.log('center')\n    }\n\n    return lightningArr\n}\nvar rain = function() {\n    var arr = [];\n    for(let i = 0; i < 200; i++) {\n        arr.push([100 * Math.random(), 100 * Math.random()])\n    }\n    return arr\n}\nlet option = {\n    grid: {\n        left: 0,\n        right: 0,\n        bottom: 0,\n        top: 0\n    },\n    xAxis: [\n        {\n            data: [],\n            show: false\n        },\n        {\n            data: [],\n            boundaryGap: false,\n            show: false\n        },\n        {\n            splitLine: false,\n            max: 50\n            // data: new Array(15)\n        },\n        {\n            splitLine: false,\n            show: false\n        },\n    ],\n    yAxis: [\n        {\n            splitLine: false,\n            max: 50\n        },\n        {\n            splitLine: false,\n            max: 50\n        },\n        {\n            // splitLine: false,\n            // max: 50,\n            data: new Array(20)\n        },\n        {\n            splitLine: false,\n            show: false\n        },\n    ],\n    series: [\n        {\n            name: 'buildings',\n            step: 'middle',\n            type: 'line',\n            data: (function() {\n                let arr = [];\n                for(let i = 0; i < 40; i++) {\n                    arr.push(10 + 10 * Math.random())\n                }\n                return arr\n            })(),\n            lineStyle: {\n                normal: {\n                    width: 0\n                }\n            },\n            areaStyle: {\n                normal: {\n                    color: '#1c1f2f',\n                    opacity: .8\n                }\n            },\n            symbolSize: 0,\n            animation: true,\n            z: 3,\n            animationDelay: 800,\n            animationDuration: 1500,\n        },\n        {\n            name: 'clouds',\n            type: 'graph',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: [\n                {\n                    x: 0,\n                    y: 0,\n                    symbolSize: 0\n                },\n                {\n                    x: 200,\n                    y: 100,\n                    symbolSize: 0\n                },\n\n                {\n                    x: 0,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 25,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 50,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 75,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 100,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 125,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 150,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 175,\n                    y: 0,\n                    symbolSize: 300\n                },\n                {\n                    x: 200,\n                    y: 0,\n                    symbolSize: 300\n                },\n            ],\n            itemStyle: {\n                normal: {\n                    color: '#24313a',\n                    borderWidth: 0,\n                    opacity: .5\n                }\n            },\n            silent: true,\n            left: -100,\n            right: -100,\n            bottom: 0,\n            top: -100,\n            animation: true,\n            z: 4,\n            animationDelay: function (idx) {\n            \treturn idx * 100 + 500\n            }\n        },\n        {\n            name: 'clouds',\n            type: 'graph',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: [\n                {\n                    x: 0,\n                    y: 0,\n                    symbolSize: 0\n                },\n                {\n                    x: 200,\n                    y: 100,\n                    symbolSize: 0\n                },\n\n                {\n                    x: 20,\n                    y: 0,\n                    symbolSize: 450\n                },\n                {\n                    x: 60,\n                    y: 0,\n                    symbolSize: 500\n                },\n                {\n                    x: 100,\n                    y: 0,\n                    symbolSize: 450\n                },\n                {\n                    x: 140,\n                    y: 0,\n                    symbolSize: 500\n                },\n                {\n                    x: 180,\n                    y: 0,\n                    symbolSize: 450\n                },\n\n            ],\n            itemStyle: {\n                normal: {\n                    color: '#24313a',\n                    borderWidth: 0,\n                    opacity: .5\n                }\n            },\n            silent: true,\n            left: -100,\n            right: -100,\n            bottom: 0,\n            top: -100,\n            animation: true,\n            z: 4\n            // animationDelay: function (idx) {\n            // \treturn idx * 100 + 500\n            // }\n        },\n        {\n            name: 'rain',\n            type: 'scatter',\n            symbolSize: [10, 1],\n            symbolRotate: 60,\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            data: rain(),\n            z: 5,\n            symbol: 'roundRect'\n        }\n    ],\n    backgroundColor: '#1b2933'\n};\n\nmyChart.setOption(option)\n\n\nvar n = 1;\nvar offset = -10;\nsetInterval(function() {\n    // 100 * 50 = 5s\n    if(n % 50 === 0) {\n        option.series = option.series.concat(lightnings());\n        option.series[0].areaStyle.normal.color = '#3c444a';\n        option.backgroundColor = '#1d2d38';\n        myChart.setOption(option)\n        console.log('show')\n\n        setTimeout(function() {\n            option.series[0].areaStyle.normal.color = '#1c1f2f'\n            option.backgroundColor = '#1b2933'\n            option.series.forEach(function(item, index) {\n                if(index > 3) {\n                    item.lineStyle.normal.opacity = 0\n                }\n\n            })\n            myChart.setOption(option);\n            console.log('hide')\n        }, 1000)\n    }\n\n    if(n % 60 === 0) {\n        offset = -offset;\n    }\n\n    if(n % 2 === 0) {\n        // 云彩移动\n        option.series[1].left += offset;\n        option.series[1].right -= offset;\n\n        option.series[2].left -= offset;\n        option.series[2].right += offset;\n\n        // 下雨\n        option.series[3].data = rain()\n\n        myChart.setOption(option);\n    }\n\n\n    n++\n}, 100)","html":"","externalScripts":"","updaterUID":"bd-1158218442","theme":"","layout":"","viewCount":2013,"userName":"J***r","commentCount":4,"starCount":18,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSyO58xOEm.png?v=1532655248571","isCustomThumbnail":1,"builtinTags":["category-work","grid","series-graph","series-line","series-scatter"],"customTags":[],"updaterUserName":"J***r"}}