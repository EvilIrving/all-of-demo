{"status":0,"data":{"cid":"xRYhNBVdND","authorUid":"bd-2291206321","authorUserName":"1***去","title":"demo","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-11-13T09:47:55.000Z","lastUpdateTime":"2021-11-25T08:39:36.000Z","auth":2,"uid":"bd-2291206321","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-25T08:39:36.000Z","code":"dataXName = ['淑阳镇', '莒口镇', '安平镇', '刘宋镇', '五百户镇'];\ndataYbar = [66, 50, 43, 55, 37];\ndataYbar2 = [55, 42, 46, 75, 38];\ndataYline = [40, 20, 65, 25, 30];\ndataTNam = ['累计热量(GJ)', '累计流量(T)', '环比(%)'];\noption = {\n    tooltip: {\n        trigger: 'axis',\n        // \"axisPointer\": {\n        //     \"type\": \"cross\",\n        //     \"crossStyle\": {\n        //         \"color\": \"#999\"\n        //     }\n        // }\n    },\n    backgroundColor: '#FAFAFA',\n    // grid: {\n    //     left: '3%', //整个曲线居左的距离\n    //     right: '4%', //整个曲线居右左的距离\n    //     bottom: '20%', //整个曲线居下左的距离\n    //     height: '70%', //整个曲线的高\n    //     containLabel: true\n    // },\n    // https://blog.csdn.net/kebi007/article/details/68488694\n    axisLabel: {\n        interval: 0,\n        formatter: function (value) {\n            debugger;\n            var ret = ''; //拼接加\\n返回的类目项\n            var maxLength = 2; //每项显示文字个数\n            var valLength = value.length; //X轴类目项的文字个数\n            var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数\n            if (rowN > 1) {\n                //如果类目项的文字大于3,\n                for (var i = 0; i < rowN; i++) {\n                    var temp = ''; //每次截取的字符串\n                    var start = i * maxLength; //开始截取的位置\n                    var end = start + maxLength; //结束截取的位置\n                    //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧\n                    temp = value.substring(start, end) + '\\n';\n                    ret += temp; //凭借最终的字符串\n                }\n                return ret;\n            } else {\n                return value;\n            }\n        },\n    },\n    legend: {\n        data: dataTNam,\n        // \"bottom\": 5,\n        top: '1%',\n        // icon: \"circle\",\n        //   icon: \"circle\", //icon 长方形 circle 圆形 arrow箭头型 diamond菱形\n        // textStyle: {\n        //     color: \"#fff\"\n        // }\n    },\n    dataZoom: [\n        {\n            type: 'slider',\n            realtime: true,\n            //拖拉\n            handleSize: '100%', //滑动条两侧的大小\n            start: 0, //开始位置\n            end: 80, //结束位置\n            // bottom: 25, //居下的距离\n            // textStyle: {\n            //     color: '#1bb4f6', // 滑动条的文字颜色\n            // },\n        },\n    ],\n    xAxis: [\n        {\n            data: dataXName,\n            axisPointer: {\n                type: 'shadow',\n            },\n\n            axisLine: {\n                lineStyle: {\n                    color: '#D2D2D2', //x轴颜色\n                },\n            },\n            axisTick: {\n                show: true, //隐藏X轴刻度\n            },\n            axisLabel: {\n                show: true,\n                textStyle: {\n                    color: '#35346F', //X轴文字颜色\n                },\n            },\n        },\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            splitLine: {\n                show: true,\n            },\n            // name: \"累计热量(GJ)\",\n            nameTextStyle: {\n                // color: \"#ebf8ac\"\n            },\n            axisTick: {\n                show: true,\n            },\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: '#D2D2D2',\n                },\n            },\n            axisLabel: {\n                show: true,\n                textStyle: {\n                    color: '#D2D2D2', //y轴字体颜色\n                },\n            },\n        },\n        {\n            type: 'value',\n            splitLine: {\n                show: false,\n            },\n            name: '(%)',\n            axisTick: {\n                show: false, //隐藏X轴刻度\n            },\n            axisLine: {\n                show: false,\n                // lineStyle: {\n                //     color: '#fff'\n                // }\n            },\n            axisLabel: {\n                show: true,\n                textStyle: {\n                    color: '#898AAE',\n                },\n            },\n        },\n    ],\n\n    series: [\n        {\n            name: dataTNam[0],\n            type: 'bar',\n            barWidth: 20,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [10, 10, 0, 0],\n                    emphasis: {\n                        barBorderRadius: [8, 8, 0, 0],\n                    },\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                        {\n                            offset: 0,\n                            color: '#00feff',\n                        },\n                        {\n                            offset: 0.5,\n                            color: '#4693EC',\n                        },\n                        {\n                            offset: 1,\n                            color: '#027eff',\n                        },\n                    ]),\n                },\n            },\n            data: dataYbar2,\n            markLine: {\n                silent: true,\n                data: [\n                    {\n                        yAxis: 10,\n                    },\n                ],\n            },\n        },\n        {\n            name: dataTNam[1],\n            type: 'bar',\n            barWidth: 20,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [10, 10, 0, 0],\n                    emphasis: {\n                        barBorderRadius: [8, 8, 0, 0],\n                    },\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                        {\n                            offset: 0,\n                            color: '#f6d365',\n                        },\n                        {\n                            offset: 0.5,\n                            color: '#fee140',\n                        },\n                        {\n                            offset: 1,\n                            color: '#f9d423',\n                        },\n                    ]),\n                },\n            },\n            data: dataYbar,\n        },\n        {\n            name: dataTNam[2],\n            type: 'line',\n            yAxisIndex: 1,\n            // smooth:true, //圆滑\n            data: dataYline,\n            itemStyle: {\n                normal: {\n                    color: '#35346F',\n                    lineStyle: {\n                        color: '#35346F',\n                    },\n                },\n            },\n        },\n    ],\n};\n\nmyChart.on('click', function (params) {\n    console.log('echarts图：', params);\n    if (params.componentType == 'xAxis') {\n        console.log(1111);\n        alert('单击了' + params.value + 'x轴标签');\n    } else {\n        console.log(2222);\n        alert('单击了' + params.name + '柱状图');\n    }\n});\n\nautoFn(dataXName.length);\nfunction autoFn(leng) {\n    var that = this;\n    //轮播效果\n    var currentIndex = -1;\n\n    //  let myChart = echarts.getInstanceByDom(document.getElementById(\"chart-panel\"))\n    var dataLen = leng;\n\n    that.timer = setInterval(() => {\n        //  计时器增加\n        that.ai++;\n\n        if (that.ai == dataLen) {\n            that.ai = 1;\n        }\n        console.log(dataLen);\n        // 取消之前高亮的图形\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: currentIndex,\n        });\n        currentIndex = (currentIndex + 1) % dataLen;\n        // 高亮当前图形\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: currentIndex,\n        });\n        // 显示 tooltip\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: currentIndex,\n        });\n    }, 3000);\n}\n","html":"","externalScripts":"","updaterUID":"bd-2291206321","theme":"","layout":"","viewCount":0,"userName":"1***去","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xRYhNBVdND.png?v=1637829576810","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"1***去"}}