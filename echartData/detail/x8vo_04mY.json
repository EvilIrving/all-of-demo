{"status":0,"data":{"cid":"x8vo_04mY","authorUid":"bd-3145058399","authorUserName":"i***s","title":"嵌套柱图","description":"更形象化的比较预期和实际类型的数据，其实如果柱状图支持类似highcharts的{pointPadding,pointPlacement}，如：[https://codepen.io/cn-xufei/pen/vYYzVNW?&editable=true]，即可实现，不过custom的目的就是为了解决这类个性化需求。","latestVersion":2,"alwaysLatest":1,"createTime":"2019-11-13T08:51:01.000Z","lastUpdateTime":"2019-11-13T08:51:01.000Z","auth":2,"uid":"bd-3145058399","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-14T04:57:01.000Z","code":"var iw = 20, ow = 40, gcount = 2, margin = 10;\nfunction getRenderFn ({y, w, g}) {\n return function renderItem(params, api) {\n    var xValue = api.value(0);\n    var yValue = api.value(y);\n    var style = api.style();\n    var point = api.coord([xValue, yValue]);\n    var size = api.size([1, yValue])\n    var bar = api.barLayout({\n        // barGap: '100%', barCategoryGap: '0%', count: 2\n        barWidth: ow, count: gcount, barGap: '100%'\n    });\n    console.debug(bar)\n    return {\n            type: 'rect',\n            shape: {\n                x: point[0] + bar[g].offsetCenter - w/2,\n                y: point[1],\n                width: w,\n                height: size[1]\n            },\n            style: style\n        };\n }   \n}\n\noption = {\n    dataset: {\n        source: [\n          [\n            \"省份\",\n            \"目标\",\n            \"实际\",\n            \"回购\",\n            \"逾期\"\n          ],\n          [\n            \"福建\",\n            16,\n            7,\n            3,\n            1\n          ],\n          [\n            \"广东\",\n            1,\n            2,\n            3,\n            4\n          ],\n          [\n            \"贵州\",\n            4,\n            5,\n            6,\n            7\n          ]\n          \n        ]\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow'\n        }\n    },\n    legend: {\n    },\n    dataZoom: [{\n        type: 'slider',\n    }, {\n        type: 'inside',\n    }],\n    xAxis: {\n        type: 'category',\n        axisTick: {\n                alignWithLabel: true\n            }\n    },\n    yAxis: {},\n    series: [{\n        type: 'custom',\n        name: '目标',\n        renderItem: getRenderFn({\n            y: '目标',\n            w: ow,\n            g: 0\n        }),\n        encode: {\n            x: '省份',\n            y: '目标'\n        }\n    },{\n        type: 'custom',\n        name: '实际',\n        renderItem: getRenderFn({\n            y: '实际',\n            w: iw,\n            g: 0\n        }),\n        encode: {\n            x: '省份',\n            y: '实际'\n        }\n    },{\n        type: 'custom',\n        name: '回购',\n        renderItem: getRenderFn({\n            y: '回购',\n            w: ow,\n            g: 1\n        }),\n        encode: {\n            x: '省份',\n            y: '回购'\n        }\n    },{\n        type: 'custom',\n        name: '逾期',\n        renderItem: getRenderFn({\n            y: '逾期',\n            w: iw,\n            g: 1\n        }),\n        encode: {\n            x: '省份',\n            y: '逾期'\n        }\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-3145058399","theme":"dark","layout":"","viewCount":75,"userName":"i***s","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8vo_04mY.png?v=1573707421862","isCustomThumbnail":0,"builtinTags":["category-work","dataset","dataZoom","grid","legend","series-custom","tooltip"],"customTags":["bar"],"updaterUserName":"i***s"}}