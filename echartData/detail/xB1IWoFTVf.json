{"status":0,"data":{"cid":"xB1IWoFTVf","authorUid":"bd-3138855056","authorUserName":"哎呵呦喂呀嘿","title":"柱状和单点图结合","description":"","latestVersion":6,"alwaysLatest":1,"createTime":"2018-01-18T02:48:29.000Z","lastUpdateTime":"2018-01-18T02:48:29.000Z","auth":2,"uid":"bd-3138855056","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"3.8.0","versionCreateTime":"2018-01-19T09:42:33.000Z","code":"var colorList = ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3'];\nvar labelFont = 'bold 12px Sans-serif';\n\nfunction calculateMA(data, dates) {\n    var result = [];\n    for (var i = 0, len = dates.length; i < len; i++) {\n        if (data !== null && data.length !== 0) {\n            var dataOne = data[0];\n            if (dates[i] == dataOne[0]) {\n                result.push(dataOne[1]);\n                data.splice(0, 1);\n                continue;\n            }\n        }\n        result.push('-');\n    }\n    return result;\n}\n\nfunction add1(tempData, longData) {\n    var totalData = [];\n    for (var i = 0, len = longData.length; i < len; i++) {\n        var data = longData[i] + tempData[i];\n        totalData.push(data);\n    }\n    return totalData;\n}\n\n\n\nvar dates = [\"2016-03-29\", \"2016-03-30\", \"2016-03-31\", \"2016-04-01\", \"2016-04-04\", \"2016-04-05\", \"2016-04-06\", \"2016-04-07\", \"2016-04-08\", \"2016-04-11\", \"2016-04-12\", \"2016-04-13\", \"2016-04-14\", \"2016-04-15\", \"2016-04-18\", \"2016-04-19\", \"2016-04-20\", \"2016-04-21\", \"2016-04-22\", \"2016-04-25\", \"2016-04-26\", \"2016-04-27\", \"2016-04-28\", \"2016-04-29\", \"2016-05-02\", \"2016-05-03\", \"2016-05-04\", \"2016-05-05\", \"2016-05-06\", \"2016-05-09\", \"2016-05-10\", \"2016-05-11\", \"2016-05-12\", \"2016-05-13\", \"2016-05-16\", \"2016-05-17\", \"2016-05-18\", \"2016-05-19\", \"2016-05-20\", \"2016-05-23\", \"2016-05-24\", \"2016-05-25\", \"2016-05-26\", \"2016-05-27\", \"2016-05-31\", \"2016-06-01\", \"2016-06-02\", \"2016-06-03\", \"2016-06-06\", \"2016-06-07\", \"2016-06-08\", \"2016-06-09\", \"2016-06-10\", \"2016-06-13\", \"2016-06-14\", \"2016-06-15\", \"2016-06-16\", \"2016-06-17\", \"2016-06-20\", \"2016-06-21\", \"2016-06-22\"];\nvar data1 = [\n    [\"2016-04-12\", 500],\n    [\"2016-05-12\", 600]\n];\nvar data2 = [\n    [\"2016-04-28\", 8],\n    [\"2016-05-12\", 3]\n];\nvar longData = [1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 12, 15, 0, 2, 3, 4, 5, 2, 1, 4, 5, 6, 2, 1, 3, 2, 3, 5, 6, 4, 1, 2, 5, 6, 8, 9, 8, 4, 5, 6, 7, 2, 1];\nvar tempData = [1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 1, 1, 1, 11, 1, 1, 1, 1, 1, 12, 15, 0, 2, 3, 4, 5, 2, 1, 4, 5, 6, 2, 1, 3, 2, 3, 5, 6, 4, 1, 2, 5, 6, 8, 9, 8, 4, 5, 6, 7, 2, 1];\nvar INRData = calculateMA(data1, dates);\nvar PTData = calculateMA(data2, dates);\nvar totalData = add1(tempData, longData);\n\n\noption = {\n    animation: false,\n    color: colorList,\n    title: {\n        left: 'center',\n        text: '对照图'\n    },\n    tooltip: {\n        //移动端展示方式\n        //triggerOn: 'none',\n        trigger: 'axis',\n        transitionDuration: 0,\n        confine: true,\n        bordeRadius: 4,\n        borderWidth: 1,\n        borderColor: '#333',\n        backgroundColor: 'rgba(255,255,255,0.9)',\n        textStyle: {\n            fontSize: 12,\n            color: '#333'\n        }\n        \n    },\n    axisPointer: {\n        type: 'shadow',\n        link: {\n            xAxisIndex: 'all'\n        }\n    },\n    xAxis: [{\n        type: 'category',\n        data: dates,\n        boundaryGap: true,\n        axisLine: {\n            lineStyle: {\n                color: '#777'\n            }\n        },\n        axisLabel: {\n            formatter: function(value) {\n                return echarts.format.formatTime('MM-dd', value);\n            }\n        },\n        min: 'dataMin',\n        max: 'dataMax'\n        /*移动端展示方式\n        axisPointer: {\n            show: true\n        }*/\n    }, {\n        type: 'category',\n        gridIndex: 1,\n        data: dates,\n        scale: true,\n        boundaryGap: true,\n        splitLine: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#777'\n            }\n        },\n        splitNumber: 20,\n        min: 'dataMin',\n        max: 'dataMax'\n        /*移动端展示方式 \n        axisPointer: {\n             type: 'line',\n             label: {\n                 show: false\n             },\n             triggerTooltip: true,\n             handle: {\n                 show: true,\n                 size: 35,\n                 margin: 15,\n                 color: '#B80C00'\n             }\n         }*/\n    }],\n    yAxis: [{\n        //scale: true,\n        splitNumber: 2,\n        axisLine: {\n            lineStyle: {\n                color: '#777'\n            }\n        },\n        //splitLine: { show: true },\n        axisTick: {\n            show: false\n        },\n        name: 'ml',\n        nameGap: 0\n    }, {\n        //scale: true,\n        gridIndex: 1,\n        splitNumber: 2,\n        //axisLabel: {show: false},\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        name: '片',\n        nameGap: 0\n\n    },{\n        //scale: true,\n        splitNumber: 2,\n        axisLine: {\n            lineStyle: {\n                color: '#777'\n            }\n        },\n        //splitLine: { show: true },\n        axisTick: {\n            show: false\n        },\n        name: 'sec',\n        nameGap: 0,position:\"right\"\n    }],\n    dataZoom: [{\n            type: 'slider',\n            xAxisIndex: [0, 1],\n            realtime: false,\n            top: 30,\n            height: 20,\n            //移动端展示方式\n           handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',\n            handleSize: '120%'\n        }\n        /*移动端展示方式\n        , {\n                type: 'inside',\n                xAxisIndex: [0, 1],\n                top: 30,\n                height: 20\n            }*/\n    ],\n    grid: [{\n        left: 30,\n        right: 30,\n        top: 70,\n        height: 120\n    }, {\n        left: 30,\n        right: 30,\n        height: 120,\n        top: 230\n    }],\n    graphic: [{\n        type: 'group',\n        left: 'center',\n        bounding: 'raw',\n        children: [{\n            id: 'MA20',\n            type: 'text',\n            style: {\n                fill: colorList[3],\n                font: labelFont\n            },\n            right: 0\n        }]\n    }],\n    series: [{\n            name: '长期',\n            type: 'bar',\n            stack: '华法林',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            itemStyle: {\n                normal: {\n                    color: '#7fbe9e'\n                },\n                emphasis: {\n                    color: '#140'\n                }\n            },\n            data: longData\n        },\n        {\n            name: '临时',\n            type: 'bar',\n            stack: '华法林',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: tempData\n        },\n        {\n            name: '总数',\n            type: 'bar',\n            stack: '华法林',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            itemStyle: {\n                \"normal\": {\n                    \"label\": {\n                        \"show\": true,\n                        \"position\": \"insideBottom\",\n                        \"textStyle\": {\n                            \"color\": \"#555555\"\n                        }\n                    },\n                    \"color\": \"#EFEFEF\"\n                }\n\n            },\n            data: totalData\n        },\n        {\n            name: 'INR',\n            type: 'scatter',\n            data: INRData,\n            smooth: true,\n            showSymbol: false,\n            lineStyle: {\n                normal: {\n                    width: 1\n                }\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'bottom'\n                }\n            }\n        },\n        {\n            name: 'PT',\n            type: 'scatter',\n            data: PTData,\n            smooth: true,\n            showSymbol: false,\n            yAxisIndex:2,\n            lineStyle: {\n                normal: {\n                    width: 1\n                }\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'bottom'\n                }\n            }\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3138855056","theme":"","layout":"","viewCount":2337,"userName":"哎呵呦喂呀嘿","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1IWoFTVf.png?v=1516354953222","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","graphic","grid","series-bar","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"哎呵呦喂呀嘿"}}