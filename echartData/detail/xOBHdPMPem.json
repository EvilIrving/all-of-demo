{"status":0,"data":{"cid":"xOBHdPMPem","authorUid":"bd-1376687611","authorUserName":"安***打","title":"grid 上下拖动","description":"grid上下拖动的实例","latestVersion":1,"alwaysLatest":1,"createTime":"2019-07-04T09:48:47.000Z","lastUpdateTime":"2019-07-04T09:48:47.000Z","auth":2,"uid":"bd-1376687611","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-04T09:48:47.000Z","code":"var height = 800;\n\nvar grid = {\n    top: 20,\n    left: 100,\n    dragHeight: 100,\n    sliderHeightUnassign: height * 0.3,\n    sliderHeight: height * 0.7,\n    heightGap: 0.3\n};\n\nvar dataAll = [\n    [\n        [10.0, 8.04],\n        [8.0, 6.95],\n        [13.0, 7.58],\n        [9.0, 8.81],\n        [11.0, 8.33],\n        [14.0, 9.96],\n        [6.0, 7.24],\n        [4.0, 4.26],\n        [12.0, 10.84],\n        [7.0, 4.82],\n        [5.0, 5.68]\n    ],\n    [\n        [10.0, 9.14],\n        [8.0, 8.14],\n        [13.0, 8.74],\n        [9.0, 8.77],\n        [11.0, 9.26],\n        [14.0, 8.10],\n        [6.0, 6.13],\n        [4.0, 3.10],\n        [12.0, 9.13],\n        [7.0, 7.26],\n        [5.0, 4.74]\n    ],\n    [\n        [10.0, 7.46],\n        [8.0, 6.77],\n        [13.0, 12.74],\n        [9.0, 7.11],\n        [11.0, 7.81],\n        [14.0, 8.84],\n        [6.0, 6.08],\n        [4.0, 5.39],\n        [12.0, 8.15],\n        [7.0, 6.42],\n        [5.0, 5.73]\n    ],\n    [\n        [8.0, 6.58],\n        [8.0, 5.76],\n        [8.0, 7.71],\n        [8.0, 8.84],\n        [8.0, 8.47],\n        [8.0, 7.04],\n        [8.0, 5.25],\n        [19.0, 12.50],\n        [8.0, 5.56],\n        [8.0, 7.91],\n        [8.0, 6.89]\n    ]\n];\n\n\nvar option = {\n    grid: [\n        {left: grid.left, top: grid.top, width: '80%', height: grid.sliderHeightUnassign, id: 'gridUnassign'},\n        {left: grid.left, top: (grid.sliderHeightUnassign + grid.dragHeight), width: '80%', height: grid.sliderHeight, id: 'grid'}\n    ],\n    tooltip: {\n        formatter: 'Group {a}: ({c})'\n    },\n    xAxis: [\n        {gridIndex: 0, min: 0, max: 20},\n        {gridIndex: 1, min: 0, max: 20}\n    ],\n    yAxis: [\n        {gridIndex: 0, min: 0, max: 15},\n        {gridIndex: 1, min: 0, max: 15}\n    ],\n    dataZoom: [\n        {\n            type: 'slider',\n            show: true,\n            id: 'sliderX',\n            xAxisIndex: [0, 1],\n            start: 1,\n            end: 35\n        },\n        {\n            type: 'inside',\n            id: 'insideX',\n            xAxisIndex: [0, 1],\n            start: 1,\n            end: 35\n        },\n        {\n            type: 'slider',\n            show: true,\n            id: 'sliderYUnassign',\n            orient: 'vertical',\n            yAxisIndex: [0],\n            left: '93%',\n            start: 29,\n            end: 36\n        },\n        {\n            type: 'inside',\n            id: 'insiderYUnassign',\n            orient: 'vertical',\n            yAxisIndex: [0],\n            start: 29,\n            end: 36\n        },\n        {\n            type: 'slider',\n            show: true,\n            id: 'sliderY',\n            orient: 'vertical',\n            yAxisIndex: [1],\n            left: '93%',\n            start: 29,\n            end: 36\n        },\n        {\n            type: 'inside',\n            id: 'insideY',\n            orient: 'vertical',\n            yAxisIndex: [1],\n            start: 29,\n            end: 36\n        }\n    ],\n    graphic: [{\n        type: 'group',\n        id: 'graphic',\n        left: 100,\n        top: grid.sliderHeightUnassign + grid.dragHeight / 2,\n        children: [\n            {\n                type: 'line',\n                z: 9,\n                id: 'line',\n                shape: {\n                    x1: 0,\n                    y1: 0,\n                    x2: 1000,\n                    y2: 0\n                },\n                style: {\n                    fill: '#DCE2EB',\n                    stroke: '#DCE2EB',\n                    lineWidth: 2,\n                    shadowBlur: 0,                   \n                },\n                draggable: true,\n                ondrag: function (event) {\n                    setGridHeight(event.event.y);\n                }\n            },\n            {\n                type: 'rect',\n                z: 9,\n                id: 'rect',\n                shape: {\n                    x: 500,\n                    y: -10,\n                    width: 50,\n                    height: 10\n                },\n                style: {\n                    fill: '#DCE2EB',\n                    stroke: '#DCE2EB',\n                    lineWidth: 2,\n                    shadowBlur: 0,                   \n                },\n                draggable: true,\n                ondrag: function (event) {\n                    setGridHeight(event.event.y);\n                }\n            },\n            {\n                type: 'text',\n                z: 10,\n                id: 'text',\n                style: {\n                    text: '︿',\n                    fill: '#ffffff',\n                    x: 520,\n                    y: -14\n                },\n                draggable: true,\n                ondrag: function (event) {\n                    setGridHeight(event.event.y);\n                }\n            }\n        ]\n    }],\n    series: [\n        {\n            name: 'I',\n            type: 'scatter',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: dataAll[0],\n        },\n        {\n            name: 'II',\n            type: 'scatter',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: dataAll[1],\n        }\n    ]\n};\n\nfunction renderChart() {\n    myChart.setOption(option, true);\n}\n\nfunction setGridHeight(position) {\n    var unassignHeight = position - 20;\n    var gridHeight = grid.sliderHeightUnassign + grid.sliderHeight + grid.dragHeight;\n    grid.sliderHeightUnassign = unassignHeight;\n    // 这里最重要，重新计算出比例\n    grid.heightGap = unassignHeight / height;\n    grid.sliderHeight = height * grid.heightGap;\n\n    option.graphic.forEach((item, key) => {\n        if (item.id === 'graphic') {\n            option.graphic[key].top = unassignHeight + grid.dragHeight / 2;\n        }\n    });\n\n    // 设置grid\n    option.grid.forEach((item, key) => {\n        if (item.id === 'gridUnassign') {\n            option.grid[key].height = grid.sliderHeightUnassign; \n        }\n        else {\n            option.grid[key].height = grid.sliderHeight; \n            option.grid[key].top = grid.sliderHeightUnassign + grid.dragHeight;\n        }\n    });\n\n    renderChart();\n}\nrenderChart();","html":"","externalScripts":"","updaterUID":"bd-1376687611","theme":"","layout":"","viewCount":167,"userName":"安***打","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOBHdPMPem.png?v=1562233728033","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","graphic","grid","series-scatter","tooltip"],"customTags":[],"updaterUserName":"安***打"}}