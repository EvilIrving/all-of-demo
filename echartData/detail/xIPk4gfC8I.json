{"status":0,"data":{"cid":"xIPk4gfC8I","authorUid":"bd-2903669626","authorUserName":"z***2","title":"动态显示数据的饼状图","description":"外围环状图每一个自动轮流显示tooltips,  鼠标移动在里面的图的数据区域，外围环状图高亮","latestVersion":8,"alwaysLatest":1,"createTime":"2018-10-16T09:12:38.000Z","lastUpdateTime":"2018-10-16T09:12:38.000Z","auth":2,"uid":"bd-2903669626","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.2.0","versionCreateTime":"2018-10-17T10:42:29.000Z","code":"let data1 = [{\r\n        value: 100,\r\n        name: '高价值'\r\n    },\r\n    {\r\n        value: 200,\r\n        name: '中价值'\r\n    },\r\n    {\r\n        value: 300,\r\n        name: '低价值'\r\n    }\r\n]\r\nlet data2 = [{\r\n        value: 10,\r\n        name: '高价值1',\r\n        stack: '高价值',\r\n        type: '1'\r\n    },\r\n    {\r\n        value: 20,\r\n        name: '高价值2',\r\n        stack: '高价值',\r\n        type: '1'\r\n    },\r\n    {\r\n        value: 40,\r\n        name: '高价值3',\r\n        stack: '高价值',\r\n        type: '1'\r\n    },\r\n    {\r\n        value: 30,\r\n        name: '高价值4',\r\n        stack: '高价值',\r\n        type: '1'\r\n    },\r\n    {\r\n        value: 40,\r\n        name: '中价值1',\r\n        stack: '中价值',\r\n        type: '2'\r\n    },\r\n    {\r\n        value: 60,\r\n        name: '中价值2',\r\n        stack: '中价值',\r\n        type: '2'\r\n    },\r\n    {\r\n        value: 100,\r\n        name: '中价值3',\r\n        stack: '中价值',\r\n        type: '2'\r\n    },\r\n    {\r\n        value: 90,\r\n        name: '低价值1',\r\n        stack: '低价值',\r\n        type: '3'\r\n    },\r\n    {\r\n        value: 120,\r\n        name: '低价值2',\r\n        stack: '低价值',\r\n        type: '3'\r\n    },\r\n    {\r\n        value: 90,\r\n        name: '低价值3',\r\n        stack: '低价值',\r\n        type: '3'\r\n    }\r\n]\r\noption = {\r\n    color: ['#ff6e72', '#ffc751', '#4162ff', ],\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n    },\r\n    legend: {\r\n        show: true,\r\n        x: 'center',\r\n        y: 'bottom',\r\n        data: ['高价值', '中价值', '低价值'],\r\n        icon: 'circle',\r\n        textStyle: {\r\n            width: '2'\r\n        }\r\n    },\r\n    grid: {\r\n        top: 10,\r\n        left: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        containLabel: true\r\n    },\r\n    series: [{\r\n            name: '价值类型',\r\n            type: 'pie',\r\n            selectedMode: 'single',\r\n            radius: [0, '40%'],\r\n            minAngle: 5,\r\n            label: {\r\n                normal: {\r\n                    position: 'inner'\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            data: data1\r\n        },\r\n        {\r\n            name: '分开占比',\r\n            type: 'pie',\r\n            radius: ['55%', '60%'],\r\n            minAngle: 5,\r\n            labelLine: {\r\n                length: 0,\r\n                length2: 5\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: function(params) {\r\n                        var colorList = ['#ff979f', '#ffbbc6', '#ffe1e7', '#fff0f3', '#ffefcc', '#ffe3a6', '#ffd77f', '#6680ff', '#8c9fff', '#b2bfff'];\r\n                        return colorList[params.dataIndex]\r\n                    },\r\n                }\r\n            },\r\n            data: data2\r\n        }\r\n    ]\r\n}\r\n//外围的动态数据显示\r\nvar timeTicket = null;\r\nvar count = 0;\r\ntimeTicket && clearInterval(timeTicket);\r\ntimeTicket = setInterval(function() {\r\n    var dataLength = option.series[1].data.length;\r\n    myChart.dispatchAction({\r\n        type: 'downplay',\r\n        seriesIndex: 1\r\n    });\r\n    myChart.dispatchAction({\r\n        type: 'highlight',\r\n        seriesIndex: 1,\r\n        dataIndex: count % dataLength\r\n    });\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 1,\r\n        dataIndex: count % dataLength,\r\n    });\r\n    count++;\r\n}, 1500);\r\nmyChart.on('mouseover', function(params) {\r\n    clearInterval(timeTicket);\r\n    var allDataIndex = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\r\n    if (params.seriesIndex == 0) {\r\n        myChart.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 1,\r\n            dataIndex: allDataIndex\r\n        });\r\n        if (params.dataIndex == 0) {\r\n            myChart.dispatchAction({\r\n                type: 'highlight',\r\n                seriesIndex: 1,\r\n                dataIndex: allDataIndex.splice(0, 4)\r\n            });\r\n        } else {\r\n            var arr1 = allDataIndex.splice(params.dataIndex * 3 + 1, 3);\r\n            myChart.dispatchAction({\r\n                type: 'highlight',\r\n                seriesIndex: 1,\r\n                dataIndex: arr1\r\n            });\r\n        }\r\n    }\r\n});\r\nmyChart.on('mouseout', function(params) {\r\n    timeTicket && clearInterval(timeTicket);\r\n    myChart.dispatchAction({\r\n        type: 'downplay',\r\n    });\r\n    timeTicket = setInterval(function() {\r\n        var dataLength = option.series[1].data.length;\r\n        myChart.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 1\r\n        });\r\n        myChart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 1,\r\n            dataIndex: count % dataLength\r\n        });\r\n        myChart.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 1,\r\n            dataIndex: count % dataLength,\r\n        });\r\n        count++;\r\n    }, 1500);\r\n});","html":"","externalScripts":"","updaterUID":"bd-2903669626","theme":"","layout":"","viewCount":554,"userName":"z***2","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIPk4gfC8I.png?v=1539772949841","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"z***2"}}