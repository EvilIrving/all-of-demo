{"status":0,"data":{"cid":"xAKm1zK_-Z","authorUid":"bd-1350546970","authorUserName":"前***珊","title":"自定义图标线图","description":"图标线图，由于用的是版本3的，所以版本4有图片不压缩的属性没有用上，参考用的是4的话可以去看文档，效果会更好。","latestVersion":1,"alwaysLatest":1,"createTime":"2018-12-11T08:08:11.000Z","lastUpdateTime":"2018-12-11T08:08:11.000Z","auth":2,"uid":"bd-1350546970","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-11T08:08:11.000Z","code":"var commerce = \"/asset/get/s/data-1544515325236-xeknMHyjK.png\";\r\n\r\nvar social_security = \"/asset/get/s/data-1544515319190-NtpnXCAf4.png\";\r\n\r\nvar land_tax = \"/asset/get/s/data-1544515311252-yaQXbZ_lR.png\";\r\n\r\nvar police = \"/asset/get/s/data-1544515299877-vHx3D6am7.png\";\r\n\r\nvar data_clound = \"/asset/get/s/data-1544515285844-Z2k1x7F12.png\";\r\n\tconst targetCoord = [1000, 140];\r\n\tconst curveness = 0.2;\r\n\tconst linesData = [];\r\n\tconst categories = [{\r\n\t\tname: '流入中',\r\n\t\tlabel: {\r\n\t\t\tnormal: {\r\n\t\t\t\tfontSize: '14',\r\n\t\t\t\tdistance:-2,\t\r\n\t\t\t}\r\n\t\t},\r\n\t}, {\r\n\t\tname: '暂无流入',\r\n\t\tlabel: {\r\n\t\t\tnormal: {\r\n\t\t\t\tfontSize: '14',\r\n\t\t\t\tdistance:2,\t\r\n\t\t\t}\r\n\t\t},\r\n\t}]\r\n\r\n\tconst item = {\r\n\t\tname: \"数据中心\",\r\n\t\tvalue: targetCoord,\r\n\t\tsymbolSize: [110, 88],\r\n\t\tsymbol: 'image://' + data_clound,\r\n\t\tsymbolOffset: ['-20%', '-20%'],\r\n\t\tsymbolKeepAspect: true,\r\n\t\tz:22,\r\n\t\tlabel: {\r\n\t\t\tnormal: {\r\n\t\t\t\tfontSize: '16'\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n\tvar items = []; //let a = 0;a<graphData.length;a++\r\n\tvar graphData = [{\r\n\t\t\"name\": '公安',\r\n\t\t\"speed\": '',\r\n\t\t\"imgUrl\": police\r\n\t}, {\r\n\t\t\"name\": '地税',\r\n\t\t\"speed\": '',\r\n\t\t\"imgUrl\": land_tax\r\n\t}, {\r\n\t\t\"name\": '工商',\r\n\t\t\"speed\": '50kb/s',\r\n\t\t\"imgUrl\": commerce\r\n\t}, {\r\n\t\t\"name\": '社保',\r\n\t\t\"speed\": '50kb/s',\r\n\t\t\"imgUrl\": social_security\r\n\t}];\r\n\tfor(let a = graphData.length - 1; a >= 0; a--) {\r\n\t\tlet objectGraph = {};\r\n\t\t//得到社保的判断\r\n\t\tvar valueMax = (graphData.length - 1 - a) * 100; //valueMax的值影响输入的值\r\n\t\tif(graphData[a].speed == \"undefined\" || graphData[a].speed == \"\") {\r\n\t\t\tobjectGraph = {\r\n\t\t\t\tname: graphData[a].name,\r\n\t\t\t\tcategory: 1,\r\n\t\t\t\tvalue: [0, valueMax],\r\n\t\t\t\tsymbolSize: [35,33],\r\n\t\t\t\tsymbol: 'image://' + graphData[a].imgUrl,\r\n\t\t\t\tsymbolOffset: ['-90%', '50%'],\r\n\t\t\t\tsymbolKeepAspect: true,\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tobjectGraph = {\r\n\t\t\t\tname: graphData[a].name,\r\n\t\t\t\tcategory: 0,\r\n\t\t\t\tactive: true,\r\n\t\t\t\tspeed: '50kb/s',\r\n\t\t\t\tvalue: [0, valueMax],\r\n\t\t\t\tsymbolSize: [35,33],\r\n\t\t\t\tsymbol: 'image://' + graphData[a].imgUrl,\r\n\t\t\t\tsymbolOffset: ['-90%', '50%'],\r\n\t\t\t\tsymbolKeepAspect: true\r\n\t\t\t}\r\n\t\t}\r\n\t\titems.push(objectGraph)\r\n\t}\r\n\r\n\tconst data = items.concat([item]);\r\n\titems.forEach(function(el) {\r\n\t\tif(el.active) {\r\n\t\t\tlinesData.push([{\r\n\t\t\t\tcoord: el.value\r\n\t\t\t}, {\r\n\t\t\t\tcoord: targetCoord\r\n\t\t\t}])\r\n\t\t}\r\n\t})\r\n\r\n\tconst links = items.map((el) => {\r\n\t\treturn {\r\n\t\t\tsource: el.name,\r\n\t\t\ttarget: item.name,\r\n\t\t\tspeed: el.speed,\r\n\t\t\tlineStyle: {\r\n\t\t\t\tnormal: {\r\n\t\t\t\t\tcolor: el.speed ? '#20b4f4' : '#20b4f4',\r\n\t\t\t\t\tcurveness: curveness,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t})\r\n\r\n\toption = {\r\n\t    backgroundColor:\"#000\",\r\n\t\tlegend: [{\r\n\t\t\tformatter: function(name) {\r\n\t\t\t\treturn echarts.format.truncateText(name, 100, '14px Microsoft Yahei', '…');\r\n\t\t\t},\r\n\t\t\ttextStyle: {\r\n\t\t\t\tcolor: '#fff',\r\n\t\t\t\tfontSize: 14\r\n\t\t\t},\r\n\t\t\titemGap: 25,\r\n\t\t\titemWidth: 10,\r\n\t\t\tselectedMode: false,\r\n\t\t\tleft: 0,\r\n\t\t\tdata: categories.map(function(el) {\r\n\t\t\t\treturn {name:el.name,icon:'circle'}\r\n\t\t\t})\r\n\t\t}],\r\n\t\tgrid:{\r\n\t\t\ttop:\"16%\",\r\n\t\t\tbottom:\"16%\",\r\n\t\t},\r\n\t\tcolor: [\r\n\t\t\t'#20b4f4',\r\n\t\t\t'#f9f48e'\r\n\t\t],\r\n\t\txAxis: {\r\n\t\t\tshow: false,\r\n\t\t\ttype: 'value'\r\n\t\t},\r\n\t\tyAxis: {\r\n\t\t\tshow: false,\r\n\t\t\ttype: 'value'\r\n\t\t},\r\n\t\tseries: [{\r\n\t\t\ttype: 'graph',\r\n\t\t\tlayout: 'none',\r\n\t\t\tcoordinateSystem: 'cartesian2d',\r\n\t\t\tsymbolSize: 60,\r\n\t\t\tz: 1,\r\n\t\t\tedgeLabel: {\r\n\t\t\t\tnormal: {\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\tfontSize: 14,\r\n\t\t\t\t\t\tcolor:\"#fff\",//50kb的文字\r\n\t\t\t\t\t},\r\n\t\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\t\tlet txt = ''\r\n\t\t\t\t\t\tif(params.data.speed !== undefined) {\r\n\t\t\t\t\t\t\ttxt = params.data.speed\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn txt\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlabel: {\r\n\t\t\t\tnormal: {\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tposition: 'top',\r\n\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\tdistance:2\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlineStyle: {\r\n\t\t\t\tnormal: {\r\n\t\t\t\t\twidth: 2,\r\n\t\t\t\t\tcurveness:0.3,\r\n\t\t\t\t\tshadowColor: 'none'\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tedgeSymbol: ['none', 'none'],\r\n\t\t\tedgeSymbolSize: 8,\r\n\t\t\tdata: data,\r\n\t\t\tlinks: links,\r\n\t\t\tcategories: categories\r\n\t\t}, {\r\n\t\t\tname: 'A',\r\n\t\t\ttype: 'lines',\r\n\t\t\tcoordinateSystem: 'cartesian2d',\r\n\t\t\tz: 1,\r\n\t\t\teffect: {\r\n\t\t\t\tshow: true,\r\n\t\t\t\tsmooth: false,\r\n\t\t\t\ttrailLength: 0,\r\n\t\t\t\tsymbol: \"arrow\",\r\n\t\t\t\tcolor: 'rgba(32,180,244,0.8)',\r\n\t\t\t\tsymbolSize: 12\r\n\t\t\t},\r\n\t\t\tlineStyle: {\r\n\t\t\t\tnormal: {\r\n\t\t\t\t\tcurveness: curveness,\r\n\t\t\t\t\tcolor: 'transparent'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdata: linesData\r\n\t\t}]\r\n\t}\r\n","html":"","externalScripts":"","updaterUID":"bd-1350546970","theme":"","layout":"","viewCount":4018,"userName":"前***珊","commentCount":0,"starCount":19,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xAKm1zK_-Z.png?v=1544515691928","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-graph","series-lines"],"customTags":[],"updaterUserName":"前***珊"}}