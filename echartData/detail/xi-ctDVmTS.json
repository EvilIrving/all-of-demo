{"status":0,"data":{"cid":"xi-ctDVmTS","authorUid":"bd-1231329319","authorUserName":"wjingism","title":"时间轴刻度仅在跨天时显示日期","description":"首点及跨天时显示日期, 否则只显示时间","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-06T14:23:08.000Z","lastUpdateTime":"2019-03-06T14:23:08.000Z","auth":2,"uid":"bd-1231329319","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-06T14:23:08.000Z","code":"//生成数据\nlet t = Date.now();\nlet v = Math.random() * 50 + 300;\nconst data = Array(1000).fill(0).map(_ => [t += 1e5, v += Math.random() * 21 - 10]);\n\n//处理时间戳\nconst f = n => `0${n}`.slice(-2); //数字补零\nconst ts = d => `${f(d.getHours())}:${f(d.getMinutes())}` //时间字符串\nconst ds = d => `${f(d.getMonth() + 1)}-${f(d.getDate())}` //日期字符串\n\n//临时变量,遍历刻度标签时保存上一个标签的日期值\nlet tmp = -1;\n\noption = {\n    xAxis: {\n        type: 'time',\n        axisLabel: {\n            //总是显示首点(最左)标签(否则标签重叠时有可能不显示)\n            showMinLabel: true,\n\n            //格式化刻度标签:跨天时显示日期,否则仅显示时间\n            formatter: (v, i) => {\n                const d = new Date(v)\n                if (tmp !== d.getDate()) {\n                    tmp = d.getDate();\n                    return `${ts(d)}\\n${ds(d)}`;\n                } else return `${ts(d)}`;\n            }\n        }\n    },\n    yAxis: { type: 'value' },\n    series: [{ type: 'line', showSymbol: false, data }]\n};\n","html":"","externalScripts":"","updaterUID":"bd-1231329319","theme":"","layout":"","viewCount":97,"userName":"wjingism","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xi-ctDVmTS.png?v=1551882188435","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line"],"customTags":["axisLabel"],"updaterUserName":"wjingism"}}