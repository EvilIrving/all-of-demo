{"status":0,"data":{"cid":"xGBVz4BjA1","authorUid":"bd-1160972906","authorUserName":"U***","title":"全国商业银行网点数量分布-海螺图","description":"全国商业银行网点数量分布-海螺图","latestVersion":12,"alwaysLatest":1,"createTime":"2020-03-26T02:06:39.000Z","lastUpdateTime":"2020-03-26T02:06:39.000Z","auth":2,"uid":"bd-1160972906","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":12,"parentVersion":10,"echartsVersion":"4.7.0","versionCreateTime":"2020-03-26T03:11:20.000Z","code":"sourceData = [{'name': '澳门特别行政区', 'value': 30, 'extData': [89, '#ccfd66', 0, '']},\r\n {'name': '西藏自治区', 'value': 33, 'extData': [367, '#cdf967', 0, '']},\r\n {'name': '青海省', 'value': 38, 'extData': [809, '#cff169', 0, '']},\r\n {'name': '宁夏回族自治区', 'value': 40, 'extData': [1023, '#cfee69', 0, '']},\r\n {'name': '香港特别行政区', 'value': 40, 'extData': [1070, '#d0ed6a', 0, '']},\r\n {'name': '海南省', 'value': 41, 'extData': [1179, '#d0eb6a', 0, '']},\r\n {'name': '天津市', 'value': 51, 'extData': [2105, '#d3db6d', 0, '']},\r\n {'name': '新疆维吾尔自治区', 'value': 53, 'extData': [2364, '#d4d76e', 0, '']},\r\n {'name': '上海市', 'value': 59, 'extData': [2965, '#d6cd70', 0, '']},\r\n {'name': '北京市', 'value': 62, 'extData': [3237, '#d7c871', 0, '']},\r\n {'name': '甘肃省', 'value': 63, 'extData': [3375, '#d7c671', 0, '']},\r\n {'name': '贵州省', 'value': 64, 'extData': [3467, '#d8c472', 0, '']},\r\n {'name': '吉林省', 'value': 67, 'extData': [3744, '#d9bf73', 0, '']},\r\n {'name': '重庆市', 'value': 70, 'extData': [4005, '#dabb74', 0, '']},\r\n {'name': '内蒙古自治区', 'value': 70, 'extData': [4040, '#daba74', 0, '']},\r\n {'name': '云南省', 'value': 75, 'extData': [4510, '#dbb275', 0, '']},\r\n {'name': '黑龙江省', 'value': 77, 'extData': [4777, '#dcae76', 0, '']},\r\n {'name': '广西壮族自治区', 'value': 80, 'extData': [5024, '#ddaa77', 0, '']},\r\n {'name': '陕西省', 'value': 81, 'extData': [5174, '#dea778', 0, '']},\r\n {'name': '山西省', 'value': 81, 'extData': [5179, '#dea778', 0, '']},\r\n {'name': '福建省', 'value': 84, 'extData': [5463, '#dfa279', 0, '']},\r\n {'name': '江西省', 'value': 84, 'extData': [5469, '#dfa279', 0, '']},\r\n {'name': '辽宁省', 'value': 93, 'extData': [6317, '#e1947b', 0, '']},\r\n {'name': '安徽省', 'value': 94, 'extData': [6445, '#e2917c', 0, '']},\r\n {'name': '湖北省', 'value': 95, 'extData': [6583, '#e28f7c', 0, '']},\r\n {'name': '湖南省', 'value': 101, 'extData': [7172, '#e4857e', 0, '']},\r\n {'name': '河北省', 'value': 115, 'extData': [8533, '#e96e83', 0, '']},\r\n {'name': '浙江省', 'value': 123, 'extData': [9370, '#ec6086', 0, '']},\r\n {'name': '四川省', 'value': 124, 'extData': [9461, '#ec5e86', 0, '']},\r\n {'name': '河南省', 'value': 126, 'extData': [9612, '#ed5c87', 0, '']},\r\n {'name': '江苏省', 'value': 131, 'extData': [10140, '#ee5388', 0, '']},\r\n {'name': '山东省', 'value': 145, 'extData': [11558, '#f33b8d', 0, '']},\r\n {'name': '广东省', 'value': 152, 'extData': [12260, '#f62f90', 0, '']}]\r\n\r\n\r\ngraphicData = [{\r\n    type: 'group',\r\n    left: 'center',\r\n    top: '60%',\r\n    bounding: 'raw', //重要，否则内容无法超过组\r\n    z: 100,\r\n    children: []\r\n}]\r\ngraphicScatter = {\r\n    type: 'circle',\r\n    shape: {\r\n        r: 2\r\n    },\r\n    style: {\r\n        fill: 'white'\r\n    },\r\n    z: 100\r\n}\r\ngraphicText = [{\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 10,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '韩国',\r\n        font: 'bold 16px Microsoft YaHei',\r\n        textAlign: 'center'\r\n    }\r\n}, {\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 40,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '5766例',\r\n        font: 'bold 14px Microsoft YaHei',\r\n        textAlign: 'center',\r\n\r\n    }\r\n}, {\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 70,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '死亡36例',\r\n        font: 'bold 12px Microsoft YaHei',\r\n        textAlign: 'center'\r\n    }\r\n}]\r\ngraphic_total_Text = [{\r\n    type: 'text',\r\n    right: -220,\r\n    bottom: 500,\r\n    z: 100,\r\n    style: {\r\n        fill: 'black',\r\n        text: '数据时间2020年3月',\r\n        font: 'bold 12px Microsoft YaHei',\r\n        textAlign: 'right'\r\n    }\r\n}, {\r\n    type: 'text',\r\n    right: -220,\r\n    bottom: 475,\r\n    z: 100,\r\n    style: {\r\n        fill: 'black',\r\n        text: '中国有166886个银行网点',\r\n        font: 'bold 18px Microsoft YaHei',\r\n        textAlign: 'right',\r\n\r\n    }\r\n}]\r\ngraphicChildren = {\r\n    type: 'group',\r\n    // left: 'center',\r\n    // top: 'center',\r\n    position: [],\r\n    bounding: 'raw',\r\n    z: 100,\r\n    children: []\r\n\r\n}\r\n\r\nfunction convertData1() {\r\n    var maxScale = 1\r\n    var minScale = 0.1\r\n    var stepRadius = 2 * Math.PI / sourceData.length\r\n    var stepScale = (maxScale - minScale) / sourceData.length\r\n    for (var i = 0; i < sourceData.length; i++) {\r\n        sourceData[i].itemStyle = {\r\n            color: sourceData[i][\"extData\"][1],\r\n            borderWidth: 0\r\n        }\r\n        sourceData[i].label = {\r\n            show: i > 6 ? false : false,\r\n            position: i <= 5 ? \"outer\" : \"inside\",\r\n            // alignTo: \"labelLine\",\r\n            align: \"right\",\r\n            borderWidth: 1,\r\n            borderColor: \"red\",\r\n            alignTo: \"edge\",\r\n            margin: 650,\r\n            formatter: (a) => {\r\n                return a.data.extData[3]\r\n            }\r\n        }\r\n        sourceData[i].labelLine = {\r\n            show: i > 6 ? false : false,\r\n            // length: i <= 5 ? 5 * (i - 5) : 0,\r\n            // length2: i <= 5 ? 0 : 0,\r\n            lineStyle: {\r\n                type: \"dashed\"\r\n            }\r\n        }\r\n        var curRadius = (i + 0.5) * stepRadius\r\n        // var curArclen = 1\r\n        var curScale = i > 11 ? minScale + stepScale * (i) : 0.6 + stepScale * (i)\r\n        var startR = i > 11 ? sourceData[i][\"value\"] * 450 / sourceData.slice(-1)[0][\"value\"] * 0.95 : ((\r\n            sourceData[i][\"value\"] * 460 / sourceData.slice(-1)[0][\"value\"] + 20))\r\n        var curR = [startR, startR * (i > 33 ? 0.95 : (i > 11 ? 0.75 : 1.12)), startR * (i > 33 ? 0.95 : (i >\r\n            11 ? 0.8 : 1.17)) * (i > 33 ? 0.95 :\r\n            (i > 11 ? 0.8 : 1.17))]\r\n        var curPositions = []\r\n        var curChilds = []\r\n        var curCircles = []\r\n        for (var j = 0; j < 3; j++) {\r\n            var curX = Math.sin(curRadius) * curR[j]\r\n            var curY = -Math.cos(curRadius) * curR[j]\r\n            curPositions.push([curX, curY])\r\n            var curChild = JSON.stringify(graphicChildren)\r\n            curChild = JSON.parse(curChild)\r\n            curChild.position = [curX, curY]\r\n            curChild.rotation = i > 33 ? -((i + 0.5) / sourceData.length * 2 * Math.PI) : (i <= 11 ? -((i +\r\n                0.5) / sourceData.length * 2 * Math.PI) + Math.PI / 2 : 0)\r\n            curChild.scale = [curScale, curScale]\r\n            curgraphicText = JSON.parse(JSON.stringify(graphicText[j]))\r\n            curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? (i > 11 ? sourceData[i][\r\n                \"extData\"\r\n            ][0] + \"网点\" : \"\") : (j == 2 && i > 33 ? (sourceData[i][\r\n                \"extData\"\r\n            ][2] + \"个\") : (i <= 11 ? sourceData[i][\r\n                \"extData\"\r\n            ][3] : \"\")))\r\n            // curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? i > 11 ? sourceData[i][\r\n            //     \"extData\"\r\n            // ][0] + \"例\" : \"\" : i > 33 ? sourceData[i][\r\n            //     \"extData\"\r\n            // ][2] + \"例\" : \"\")\r\n            if (i <= 11) {\r\n                curgraphicText.style.fill = \"black\"\r\n                curgraphicText.style.textAlign = \"left\"\r\n            }\r\n            curChild.children = [curgraphicText]\r\n            curChilds.push(curChild)\r\n            // var curCircle = JSON.parse(JSON.stringify(graphicScatter))\r\n            // curCircle.position = [curX, curY]\r\n            // curCircles.push(curCircle)\r\n            // graphicData[0].children.push(curCircle)\r\n            graphicData[0].children.push(curChild)\r\n        }\r\n        console.log(i, sourceData[i][\"name\"], curRadius, curR, curPositions)\r\n    }\r\n    for (var m = 0; m < 3 * 2; m++) {\r\n        var cur_total_text = graphic_total_Text[m]\r\n        graphicData[0].children.push(cur_total_text)\r\n    }\r\n    return sourceData\r\n}\r\n\r\n\r\n\r\noption = {\r\n    title: {\r\n        text: '全国商业银行网点分布',\r\n        // subtext: '纯属虚构',\r\n        left: 'center',\r\n        textStyle: {\r\n            //color: \"red\",\r\n            fontSize: 40\r\n        },\r\n        //backgroundColor: \"rgb(199,16,16)\",\r\n        top: \"2%\"\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n    },\r\n    // legend: {\r\n    //     left: 'center',\r\n    //     top: 'bottom',\r\n    //     data: ['rose1', 'rose2', 'rose3', 'rose4', 'rose5', 'rose6', 'rose7', 'rose8']\r\n    // },\r\n    toolbox: {\r\n        show: true,\r\n        feature: {\r\n            mark: {\r\n                show: true\r\n            },\r\n            dataView: {\r\n                show: true,\r\n                readOnly: false\r\n            },\r\n            magicType: {\r\n                show: true,\r\n                type: ['pie', 'funnel']\r\n            },\r\n            restore: {\r\n                show: true\r\n            },\r\n            saveAsImage: {\r\n                show: true\r\n            }\r\n        }\r\n    },\r\n    graphic: graphicData,\r\n    series: [{\r\n        name: '银行网点个数',\r\n        type: 'pie',\r\n        radius: [20, 450],\r\n        center: ['50%', '60%'],\r\n        label: {\r\n            show: true\r\n        },\r\n        roseType: 'area',\r\n        data: convertData1(),\r\n        rich: {\r\n            a: {\r\n                color: 'white',\r\n                lineHeight: 10\r\n            },\r\n            b: {\r\n                backgroundColor: {\r\n                    image: 'xxx/xxx.jpg'\r\n                },\r\n                height: 40\r\n            },\r\n            x: {\r\n                fontSize: 18,\r\n                fontFamily: 'Microsoft YaHei',\r\n                borderColor: '#449933',\r\n                borderRadius: 4\r\n            }\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1160972906","theme":"","layout":"","viewCount":6439,"userName":"U***","commentCount":1,"starCount":28,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xGBVz4BjA1.png?v=1585192280748","isCustomThumbnail":0,"builtinTags":["category-work","graphic","series-pie","title","toolbox","tooltip"],"customTags":["海螺","网点","银行"],"updaterUserName":"U***"}}