{"status":0,"data":{"cid":"xF8kNJEyaX","authorUid":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","authorUserName":"彭***6","title":"进度条","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-09-29T03:25:45.000Z","lastUpdateTime":"2021-09-29T03:31:22.000Z","auth":2,"uid":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.9.0","versionCreateTime":"2021-09-29T03:31:22.000Z","code":"\r\n      let data3 = [];\r\n      let data2 = [];\r\n      let proTitle = [];\r\n      let sum2 = 0;\r\n       let chartdata =[\r\n        {name:\"施工\",val:\"65.15265\"},\r\n        {name:\"设计\",val:\"13.36558458\"},\r\n        {name:\"监理\",val:\"76.365584852\"},\r\n      ]\r\n      chartdata.map((item)=>{\r\n          item.val=item.val*-1\r\n      })\r\n      chartdata.sort((a, b) => {\r\n        return Number(a.val) - Number(b.val);\r\n      });\r\n      chartdata.forEach((item) => {\r\n        sum2 += item.val * 1;\r\n        data2.push(item.val);\r\n        proTitle.push(item.name);\r\n      });\r\n      let last = 0;\r\n      data2.forEach((item, index) => {\r\n        if (data2.length !== index + 1) {\r\n          data3.push(((item * 100) / sum2).toFixed(2));\r\n          last += Number(((item * 100) / sum2).toFixed(2));\r\n        } else {\r\n          data3.push(parseFloat((100 - last).toFixed(10)));\r\n        }\r\n      });\r\n      let data1 = [];\r\n      let sum = 0;\r\n      data3.map((item) => {\r\n        sum += item * 1;\r\n        let progress = 100 - sum;\r\n        data1.push(progress);\r\n      });\r\n      option = {\r\n        grid: {\r\n        top: '150',\r\n        left: '30%',\r\n    },\r\n        backgroundColor:'#2c3e50',\r\n        color: '#FFCA6F',\r\n        height: 100,\r\n        width: 280,\r\n        xAxis: {\r\n          show: false,\r\n        },\r\n        yAxis: [\r\n          {\r\n            type: \"category\",\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLabel: {\r\n              inside: true,\r\n              padding: [-28, 0, 0, 0],\r\n              textStyle: {\r\n                fontSize: 14,\r\n                color: \"#FFFFFF\",\r\n                \r\n              },\r\n            },\r\n            data: proTitle.reverse(),\r\n          },\r\n        ],\r\n        series: [\r\n         {\r\n            type: \"bar\",\r\n            barGap: \"-100%\",\r\n            // position:'right',\r\n            barWidth: 3,\r\n            label: {\r\n              normal: {\r\n                show: true,\r\n                position: \"right\",\r\n                color: \"#FFFFFF\",\r\n                fontSize: \"20\",\r\n                formatter: function (params) {\r\n                  let num = data3;\r\n                  return num[params.dataIndex] + \"%\";\r\n                },\r\n                  align:'right',\r\n                  offset:[80,0]\r\n              },\r\n            },\r\n            z: 1,\r\n            data: [100, 100, 100],\r\n            itemStyle: {\r\n              emphasis: {\r\n                color: \"#333\",\r\n              },\r\n              normal: {\r\n                color: \"#333\",\r\n              },\r\n            },\r\n          },\r\n          {\r\n            type: \"bar\",\r\n            barWidth: 3,\r\n            stack: \"总量\",\r\n            color: \"#333\",\r\n            itemStyle: {\r\n              emphasis: {\r\n                color: \"#333\",\r\n              },\r\n            },\r\n            data: data1.reverse(),\r\n          },\r\n          {\r\n            type: \"bar\",\r\n            barWidth: 3,\r\n            stack: \"总量\",\r\n            data: data3.reverse(),\r\n          },\r\n        ],\r\n      };\r\n","html":"","externalScripts":"","updaterUID":"obd-o2Ddhxs8w2CRgTDIeNePRpfCS3stZBY","theme":"","layout":"","viewCount":0,"userName":"彭***6","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xF8kNJEyaX.png?v=1632886282126","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar"],"customTags":[],"updaterUserName":"彭***6"}}