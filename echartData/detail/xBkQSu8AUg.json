{"status":0,"data":{"cid":"xBkQSu8AUg","authorUid":"bd-2215764494","authorUserName":"p***g","title":"ZRender Performance Test","description":"http://bl.ocks.org/mjromper/95fef29a83c43cb116c3","latestVersion":3,"alwaysLatest":1,"createTime":"2017-01-19T15:16:11.000Z","lastUpdateTime":"2017-01-20T12:08:58.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"3.4.0","versionCreateTime":"2017-01-20T09:52:35.000Z","code":"option = {\n    series: []\n};\n\nvar zr = myChart.getZr();\n\nvar average_fps = [];\nvar fpsValue = 0;\n\nvar circles = [];\nvar data = [];\n\nvar numEl = new echarts.graphic.Text({\n    style: {\n        text: '',\n        font: '40px Helvetica',\n        textAlign: 'left',\n        textBaseline: 'top'\n    },\n    position: [10, 10]\n});\n\nvar fpsEl = new echarts.graphic.Text({\n    style: {\n        text: 0,\n        font: '40px Helvetica',\n        textAlign: 'left',\n        textBaseline: 'top'\n    },\n    position: [10, 60]\n});\nzr.add(numEl);\nzr.add(fpsEl);\n\nfunction mapX(val) {\n    return (val + 5) / 10 * zr.getWidth();\n}\n\nfunction mapY(val) {\n    return (val + 5) / 10 * zr.getHeight();\n}\n\ntime0 = Date.now();\n\nzr.animation.on('frame', function() {\n\n\n    if (fpsValue > 24) {\n        for (var g = 0; g < 10; g++) {\n            data.push({\n                xloc: 0,\n                yloc: 0,\n                xvel: 0,\n                yvel: 0\n            });\n\n            var circle = new echarts.graphic.Rect({\n                shape: {\n                    x: 10,\n                    y: 10\n                },\n                style: {\n                    fill: 'red'\n                }\n            });\n            circles.push(circle);\n            zr.add(circle);\n        }\n\n        numEl.setStyle('text', data.length);\n    }\n\n    data.forEach(function(d, idx) {\n        d.xloc += d.xvel;\n        d.yloc += d.yvel;\n        d.xvel += 0.04 * (Math.random() - .5) - 0.05 * d.xvel - 0.0005 * d.xloc;\n        d.yvel += 0.04 * (Math.random() - .5) - 0.05 * d.yvel - 0.0005 * d.yloc;\n        var size = Math.min(1 + 1000 * Math.abs(d.xvel * d.yvel), 10);\n        circles[idx].setShape('width', size);\n        circles[idx].setShape('height', size);\n        circles[idx].position = [mapX(d.xloc), mapY(d.yloc)];\n    });\n\n\n    time1 = Date.now();\n\n    var currentFPS = Math.round(1000 / (time1 - time0));\n    if (!isNaN(currentFPS)) {\n        average_fps.push(currentFPS);\n        if (average_fps.length === 10) {\n            var avg = 0;\n            for (var h = 0; h < average_fps.length; h++) {\n                avg += average_fps[h];\n            }\n            fpsValue = avg / average_fps.length;\n            fpsEl.setStyle('text', fpsValue);\n            average_fps = [];\n        }\n    }\n    time0 = time1;\n});","html":"","externalScripts":"","updaterUID":"bd-2215764494","theme":"default","layout":"","viewCount":2154,"userName":"p***g","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBkQSu8AUg.png?v=1484905130403","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"p***g"}}