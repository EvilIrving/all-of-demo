{"status":0,"data":{"cid":"xqcltYftjO","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"环形图和百分比图相结合","description":"环形图和百分比图相结合","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-08T03:55:19.000Z","lastUpdateTime":"2020-12-08T03:55:19.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-31T06:41:00.000Z","code":"const handred = 100\r\nlet point = 80\r\n\r\nvar sData = [{\r\n    name: \"合同金额\",\r\n    value: \"40000\"\r\n}, {\r\n    name: \"变更金额\",\r\n    value: \"53000\"\r\n}, {\r\n    name: \"累计完成金额\",\r\n    value: \"\"\r\n}];\r\nvar money = 15\r\n\r\nvar legendData1 = [];\r\nvar legendData2 = [];\r\nfor (var i = 0; i < sData.length; i++) {\r\n\r\n    var itemName = sData[i].name;\r\n\r\n\r\n\r\n    legendData2.push(itemName)\r\n\r\n}\r\nvar colorList = ['#3085ff', '#f1b144', '#1bcc98'];\r\noption = {\r\n    backgroundColor: {\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 1,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0,\r\n            color: '#000F44' // 0% 处的颜色\r\n        }, {\r\n            offset: 1,\r\n            color: '#000B3B' // 100% 处的颜色\r\n        }],\r\n        globalCoord: false // 缺省为 false\r\n    },\r\n    title: {\r\n        text: \"{c|\" + '15' + \"}{d|万元}{c|\\n}{a|变更后金额}\",\r\n        x: \"center\",\r\n        y: \"center\",\r\n        textStyle: {\r\n            rich: {\r\n                a: {\r\n                    fontSize: 12,\r\n                    color: \"#c9c9c9\",\r\n                    // \r\n                },\r\n\r\n                c: {\r\n                    fontSize: 20,\r\n                    lineHeight: 40,\r\n                    fontWeight: \"bold\",\r\n                    color: \"#c9c9c9\",\r\n                },\r\n                d: {\r\n                    fontSize: 12,\r\n\r\n                    fontWeight: \"bold\",\r\n                    color: \"#c9c9c9\",\r\n                },\r\n            },\r\n        },\r\n    },\r\n    grid: {\r\n        containLabel: true,\r\n        left: 20,\r\n        right: 20,\r\n        bottom: 20,\r\n        top: 40,\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        borderColor: 'rgba(255,255,255,.3)',\r\n        backgroundColor: 'rgba(13,5,30,.6)',\r\n        borderWidth: 1,\r\n        padding: 5,\r\n        formatter: function(parms) {\r\n            var str;\r\n            if (parms.name == \"累计完成金额\") {\r\n                str =\r\n                    \"<span style='display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#1bcc98;'></span>\" +\r\n                    \"\" +\r\n                    parms.data.name +\r\n                    \"</br>\" +\r\n                    \"金额: \" +\r\n                    money +\r\n                    \"万元</br>\" +\r\n                    \"占比：\" +\r\n                    point +\r\n                    \"%\";\r\n            } else if (parms.name == \"\") {\r\n                str =\r\n                    \"<span style='display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#1bcc98;'></span>\" +\r\n                    \"\" +\r\n                    \"\" +\r\n                    \"累计完成金额\" +\r\n                    \"</br>\" +\r\n                    \"金额: \" +\r\n                    money +\r\n                    \"万元</br>\" +\r\n                    \"占比：\" +\r\n                    point +\r\n                    \"%\";\r\n            } else {\r\n                str =\r\n                    parms.marker +\r\n                    \"\" +\r\n                    parms.data.name +\r\n                    \"</br>\" +\r\n                    \"金额：\" +\r\n                    parms.data.value +\r\n                    \"万元</br>\" +\r\n                    \"占比：\" +\r\n                    parms.percent +\r\n                    \"%\";\r\n            }\r\n            var box = `<div style=\"font-size:0.14rem\">${str}</div>`;\r\n            return box;\r\n        },\r\n    },\r\n    legend: [{\r\n        type: \"scroll\",\r\n        // orient: 'vertical',\r\n        icon: \"circle\",\r\n        left: \"center\",\r\n        align: \"left\",\r\n        // top: 'center',\r\n        bottom: \"15\",\r\n        itemGap: 10,\r\n        itemWidth: 10,\r\n        // bottom:'50%',\r\n        textStyle: {\r\n            color: \"#c9c9c9\",\r\n            fontSize: 12,\r\n        },\r\n        selectedMode: false,\r\n        data: legendData2\r\n    }],\r\n    series: [{\r\n            type: 'pie',\r\n            z: 3,\r\n            center: ['50%', '50%'],\r\n            radius: ['40%', '55%'],\r\n            clockwise: true,\r\n            avoidLabelOverlap: true,\r\n            hoverOffset: 15,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: function(params) {\r\n                        return colorList[params.dataIndex]\r\n                    }\r\n                }\r\n            },\r\n            label: {\r\n                show: false,\r\n                position: 'outside',\r\n                formatter: '{a|{b}：{d}%}\\n{hr|}',\r\n                rich: {\r\n                    hr: {\r\n                        backgroundColor: 't',\r\n                        borderRadius: 3,\r\n                        width: 3,\r\n                        height: 3,\r\n                        padding: [3, 3, 0, -12]\r\n                    },\r\n                    a: {\r\n                        padding: [-30, 15, -20, 15]\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    length: 20,\r\n                    length2: 30,\r\n                    lineStyle: {\r\n                        width: 1\r\n                    }\r\n                }\r\n            },\r\n            data: sData\r\n        },\r\n        {\r\n            name: 'circle',\r\n            type: 'pie',\r\n            clockWise: true,\r\n            radius: ['30%', '35%'],\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: false\r\n                    },\r\n                    labelLine: {\r\n                        show: false\r\n                    }\r\n                }\r\n            },\r\n            hoverAnimation: false,\r\n            data: [{\r\n                value: point,\r\n                // name: '占比',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: { // 颜色渐变\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: '#1bcc98' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: '#1bee97' // 100% 处的颜色1\r\n                            }]\r\n                        },\r\n                        label: {\r\n                            show: false\r\n                        },\r\n                        labelLine: {\r\n                            show: false\r\n                        }\r\n                    }\r\n                }\r\n            }, {\r\n                name: '剩余',\r\n                value: handred - point,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#E1E8EE'\r\n                    }\r\n                }\r\n            }]\r\n        }\r\n\r\n    ]\r\n};\r\n","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":525,"userName":"S***l","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqcltYftjO.png?v=1609396860742","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"S***l"}}