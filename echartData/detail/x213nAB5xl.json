{"status":0,"data":{"cid":"x213nAB5xl","authorUid":"bd-439334344","authorUserName":"坏***4","title":"dataset热力地图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-17T05:40:33.000Z","lastUpdateTime":"2021-05-17T05:40:33.000Z","auth":2,"uid":"bd-439334344","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-17T05:40:33.000Z","code":"var mapIcons = {\n    sign: '/asset/get/s/data-1593933773676-FDpSjX2lK.png',\n    bg: '/asset/get/s/data-1593933762711-IHRMda0Rg.png',\n};\n\n/*\n使用富文本制作复杂标签\nwx:yangtaoxf\n\n参考以下文章和作品，感谢相关作者\nhttps://gallery.echartsjs.com/editor.html?c=x9dsJQiYl\nhttps://gallery.echartsjs.com/editor.html?c=x_jX_bJ42L\nhttps://hacpai.com/article/1591878043990\nhttps://blog.csdn.net/liangayang/article/details/83311433\n*/\n\n// 全国省份列表\nvar geoCoordMap = {\n    台湾: [121.509062, 25.044332],\n    河北: [114.502461, 38.045474],\n    山西: [112.549248, 37.857014],\n    内蒙古: [111.670801, 40.818311],\n    辽宁: [123.429096, 41.796767],\n    吉林: [125.3245, 43.886841],\n    黑龙江: [126.642464, 45.756967],\n    江苏: [118.767413, 32.041544],\n    浙江: [120.153576, 30.287459],\n    安徽: [117.283042, 31.86119],\n    福建: [119.306239, 26.075302],\n    江西: [115.892151, 28.676493],\n    山东: [117.000923, 36.675807],\n    河南: [113.665412, 34.757975],\n    湖北: [114.298572, 30.584355],\n    湖南: [112.982279, 28.19409],\n    广东: [113.280637, 23.125178],\n    广西: [108.320004, 22.82402],\n    海南: [110.33119, 20.031971],\n    四川: [104.065735, 30.659462],\n    贵州: [106.713478, 26.578343],\n    云南: [102.712251, 25.040609],\n    西藏: [91.132212, 29.660361],\n    陕西: [108.948024, 34.263161],\n    甘肃: [103.823557, 36.058039],\n    青海: [101.778916, 36.623178],\n    宁夏: [106.278179, 38.46637],\n    新疆: [87.617733, 43.792818],\n    北京: [116.405285, 39.904989],\n    天津: [117.190182, 39.125596],\n    上海: [121.472644, 31.231706],\n    重庆: [106.504962, 29.533155],\n    香港: [114.173355, 22.320048],\n    澳门: [113.54909, 22.198951],\n};\nvar markPointData = [\n    {\n        name: '新疆',\n        coord: [87.665966, 43.869561, 90],\n        runConut: '537',\n        num: '234',\n    },\n];\n\nfunction randomData() {\n    return Math.round(Math.random() * 500);\n}\n\nvar dataMap = [\n    {\n        name: '北京',\n        value: '100',\n    },\n    {\n        name: '天津',\n        value: randomData(),\n    },\n    {\n        name: '上海',\n        value: randomData(),\n    },\n    {\n        name: '重庆',\n        value: randomData(),\n    },\n    {\n        name: '河北',\n        value: randomData(),\n    },\n    {\n        name: '河南',\n        value: randomData(),\n    },\n    {\n        name: '云南',\n        value: randomData(),\n    },\n    {\n        name: '辽宁',\n        value: randomData(),\n    },\n    {\n        name: '黑龙江',\n        value: randomData(),\n    },\n    {\n        name: '湖南',\n        value: randomData(),\n    },\n    {\n        name: '安徽',\n        value: randomData(),\n    },\n    {\n        name: '山东',\n        value: randomData(),\n    },\n    {\n        name: '新疆',\n        value: randomData(),\n    },\n    {\n        name: '江苏',\n        value: randomData(),\n    },\n    {\n        name: '浙江',\n        value: randomData(),\n    },\n    {\n        name: '江西',\n        value: randomData(),\n    },\n    {\n        name: '湖北',\n        value: randomData(),\n    },\n    {\n        name: '广西',\n        value: randomData(),\n    },\n    {\n        name: '甘肃',\n        value: randomData(),\n    },\n    {\n        name: '山西',\n        value: randomData(),\n    },\n    {\n        name: '内蒙古',\n        value: randomData(),\n    },\n    {\n        name: '陕西',\n        value: randomData(),\n    },\n    {\n        name: '吉林',\n        value: randomData(),\n    },\n    {\n        name: '福建',\n        value: randomData(),\n    },\n    {\n        name: '贵州',\n        value: randomData(),\n    },\n    {\n        name: '广东',\n        value: randomData(),\n    },\n    {\n        name: '青海',\n        value: randomData(),\n    },\n    {\n        name: '西藏',\n        value: randomData(),\n    },\n    {\n        name: '四川',\n        value: randomData(),\n    },\n    {\n        name: '宁夏',\n        value: randomData(),\n    },\n    {\n        name: '海南',\n        value: randomData(),\n    },\n    {\n        name: '台湾',\n        value: randomData(),\n    },\n    {\n        name: '香港',\n        value: randomData(),\n    },\n    {\n        name: '澳门',\n        value: randomData(),\n    },\n];\nvar convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push(geoCoord.concat(data[i].value));\n        }\n    }\nconsole.log(res);\n    return res;\n};\n\nvar option = {\n      dataset:{\n\tsource: [\n [116.405285, 39.904989, 100],\n[117.190182, 39.125596, 500],\n[121.472644, 31.231706, 77],\n[106.504962, 29.533155, 103],\n[114.502461, 38.045474, 141],\n[113.665412, 34.757975, 48],\n [102.712251, 25.040609, 90],\n[123.429096, 41.796767, 447],\n [126.642464, 45.756967, 74],\n [112.982279, 28.19409, 400],\n[117.283042, 31.86119, 29],\n[117.000923, 36.675807, 50],\n [87.617733, 43.792818, 274],\n[118.767413, 32.041544, 250],\n [120.153576, 30.287459, 137],\n [115.892151, 28.676493, 416],\n[114.298572, 30.584355, 184],\n [108.320004, 22.82402, 138],\n[103.823557, 36.058039, 223],\n[112.549248, 37.857014, 451],\n [111.670801, 40.818311, 108],\n[108.948024, 34.263161, 122],\n [125.3245, 43.886841, 367],\n [119.306239, 26.075302, 274],\n [106.713478, 26.578343, 283],\n[113.280637, 23.125178, 350],\n [101.778916, 36.623178, 192],\n [91.132212, 29.660361, 172],\n[104.065735, 30.659462, 11],\n[106.278179, 38.46637, 29],\n [110.33119, 20.031971, 396],\n[121.509062, 25.044332, 388],\n[114.173355, 22.320048, 119],\n [113.54909, 22.198951, 35]\n\t\t ]\n},\n    grid: {},\n    geo: {\n        map: 'china',\n        //\"center\": [0, 12],\n        aspectScale: 0.8,\n        roam: true,\n        scaleLimit: {\n            min: 1.2,\n            max: 15,\n        },\n\n        zoom: 1.2,\n    },\n    series: [\n        {\n            name: '热力图',\n            type: 'heatmap',\n            minAlpha: 0.5,\n            coordinateSystem: 'geo',\n        },\n    ],\n    visualMap: [\n        {\n            show: true,\n            left: '10%',\n            bottom: '5%',\n            max: 500,\n            min: 0,\n            z: 999,\n            calculable: false,\n            text: ['高', '低'],\n            inRange: {\n                color: ['#0033FF', '#FFFF00', '#FF3333'],\n            },\n            textStyle: {\n                color: '#fff',\n            },\n            seriesIndex: 0,\n        },\n    ],\n};\n\nvar currentPage = 1,\n    pageSize = 5,\n    len = dataMap.length;\n\nsetInterval(function () {\n    var start = currentPage == 1 ? 0 : (currentPage - 1) * pageSize;\n    var end = currentPage * pageSize + 1;\n    var data = [];\n    var labelData = [];\n    if (end > len) {\n        labelData = dataMap.slice(start);\n        //\tdata=convertData(dataMap.slice(start));\n\n        currentPage = 1;\n    } else {\n        labelData = dataMap.slice(start, end);\n        //data=convertData(dataMap.slice(start,end));\n\n        currentPage = currentPage + 1;\n    }\n\n    myChart.setOption({\n        geo: {\n            map: 'china',\n            //\"center\": [0, 12],\n            aspectScale: 0.8,\n            roam: true,\n            scaleLimit: {\n                min: 1.2,\n                max: 15,\n            },\n\n            zoom: 1.2,\n\n            label: {\n                //标签样式设置\n\n                normal: {\n                    show: true,\n                    formatter: function (params) {\n                        for (var i = 0; i < labelData.length; i++) {\n                            if (params.name == labelData[i].name) {\n                                //return \"{div|\\n{fontName|\"+params.name+\"}{fontVal|\"+dataMap[i].value+\"}\\n{sign|}\"\n\n                                return '{div|' + params.name + '}\\n{fontVal|' + labelData[i].value + '}\\n{sign|}';\n                            }\n                        }\n                        return params.name;\n                    },\n                    /*backgroundColor: {\n                        \timage: './static/img/bg.png'\n                        },*/\n                    color: '#FFFFFF',\n                    verticalAlign: 'bottom',\n                    rich: {\n                        value: {\n                            fontsize: 20,\n                        },\n                        fontName: {\n                            shadowOffsetX: -1,\n                            color: '#57F7FE',\n                            fontSize: 10,\n                        },\n                        fontVal: {\n                            height: 10,\n                            color: '#ffffff',\n                            fontSize: 14,\n                            fontWeight: 900,\n                            padding: [10, 3, 0, 0],\n                        },\n                        div: {\n                            height: 25,\n                            fontSize: 12,\n                            lineHeight: 8,\n                            //疑似 下 右 上 左\n                            padding: [15, 3, 3, 0],\n                            color: '#57F7FE',\n                            backgroundColor: {\n                                image: mapIcons.bg,\n                            },\n                        },\n                        sign: {\n                            position: 'absolute',\n                            height: 30,\n                            color: '#ffffff',\n                            backgroundColor: {\n                                image: mapIcons.sign,\n                            },\n                        },\n                    },\n                },\n                emphasis: {\n                    //鼠标移上去的样式\n                    show: true,\n                    //\"fontSize\": \"16\",\n                    color: '#FFFFFF',\n                },\n            },\n        },\n    });\n}, 2500);\n","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-439334344","theme":"","layout":"","viewCount":0,"userName":"坏***4","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x213nAB5xl.png?v=1621230033379","isCustomThumbnail":0,"builtinTags":["category-work","dataset","geo","series-heatmap","visualMap"],"customTags":[],"updaterUserName":"坏***4"}}