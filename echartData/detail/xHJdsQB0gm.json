{"status":0,"data":{"cid":"xHJdsQB0gm","authorUid":"bd-1092382189","authorUserName":"午***书","title":"右上","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-06-13T07:11:27.000Z","lastUpdateTime":"2018-06-13T07:11:27.000Z","auth":2,"uid":"bd-1092382189","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.1.0","versionCreateTime":"2018-06-14T08:11:36.000Z","code":"var data1 = [];\nvar data2 = [];\nvar dataYaxis=[];\nvar data=[\n     {id:'xxx3',name:'施工',all:8350,value:8970},\n     {id:'xxx2',name:'监理',all:4500,value:5700},\n     {id:'xxx1',name:'设计',all:2160,value:1800}\n   ];\nfor (var x=0;x<data.length;x++){\n    dataYaxis[x]=data[x].name;\n    var obj={};\n    obj.id=data[x].id;\n    obj.name=data[x].name+'投资额',\n    obj.value=data[x].all;\n    data1[x]=obj;\n    var obj2={};\n    obj2.id=data[x].id;\n    obj2.name=data[x].name+'总额',\n    obj2.value=data[x].value;\n    obj2.valueAll=data[x].all;\n    data2[x]=obj2;\n}\noption = {\n    tooltip: {\n        trigger: 'axis',\n         axisPointer: {\n            type: 'shadow'\n        },\n        textStyle:{\n            color:'red'\n           \n            \n        },\n         backgroundColor:'white',\n        formatter:function(params){\n            var num=params[0].data.value;\n            var num1=params[1].data.value;\n            var n = parseFloat(num / num1).toFixed(2) * 100;\n             if (n >= 100) {\n                  return '禁用！资金使用额度已达招标额的' + n +  '%';\n                   \n            }\n            return null;\n        }\n\n    },\n    legend: {\n        data: ['施工', '监理', '设计'],\n\n    },\n    grid: {\n        left: '8%',\n        right: '4%',\n        bottom: '10%',\n        containLabel: true,\n        height: '70%',\n    },\n    xAxis: {\n        type: 'value',\n        axisLine: {\n            symbol: ['none', 'arrow'],\n            symbolSize: [10, 50],\n        },\n\n        axisTick: {\n            show: false,\n        },\n        axisLabel: {\n            fontSize: 22,\n            borderWidth: 20,\n            interval: 10,\n\n        },\n    },\n    yAxis: {\n        type: 'category',\n        data: dataYaxis,\n        axisLine: {\n            lineStyle: {\n                type: 'dashed',\n            },\n        },\n        axisLabel: {\n            fontSize: 22,\n            borderWidth: '20',\n        },\n        axisTick: {\n            show: false,\n        },\n\n    },\n    series: [{\n            type: 'bar',\n            itemStyle: {\n                color: function(params){\n                      var num = parseInt(params.data.value / (data2[params.dataIndex].value) * 100);\n                     if (num < 80) {\n                        return 'green';\n                    } else if (num >= 80 && num < 100) {\n                        return 'yellow';\n\n                    } else {\n                        return 'red';\n\n\n                    }\n                }\n            },\n            silent: true,\n            barWidth: 20,\n            barGap: '0%', // Make series be overlap\n            data: data1,\n\n            label: {\n                show: true,\n                position: 'right',\n                offset: [80, 10],\n                formatter: function(params, i) {\n                    i = params.dataIndex;\n                    var s = null;\n                    var a = null;\n                    var num = parseInt(params.data.value / (data2[i].value) * 100);\n                    if (num < 80) {\n                        return '{green|' + params.data.value+ '}' + \" \\n /\" + '{green|' + data2[i].value + '}';\n                    } else if (num >= 80 && num < 100) {\n                        return '{yellow|' + params.data.value + '}' + \" \\n /\" + '{green|' + data2[i].value + '}';\n\n                    } else {\n                        return '{red|' + params.data.value + '}' + \" \\n /\" + '{green|' + data2[i].value + '}';\n\n\n                    }\n                },\n                rich: {\n                    red: {\n                        color: 'red',\n                        fontSize: 20,\n                        align: 'right',\n                         /*backgroundColor: {\n                        image: 'black'\n                         },  */\n                         //backgroundColor: 'black'\n                          \n                    },\n                    green: {\n                        color: 'green',\n                        fontSize: 20,\n                        align: 'right'\n\n                    },\n                    yellow: {\n                        color: 'yellow',\n                        fontSize: 20,\n                        align: 'right'\n                        // backgroundColor: {\n                        //image: 'xxx/xxx.jpg'\n                        // },设置黄色警告图片\n                    }\n                }\n            }\n        },\n        {\n            type: 'bar',\n            itemStyle: {\n                color: '#009999',\n            },\n            barWidth: 20,\n            z: 10,\n            data: data2,\n            label: {\n                show: true,\n                position: 'center',\n                offset: [80, -14],\n                formatter: function(params, i) {\n                    i = params.dataIndex;\n                    return '{a|' + parseInt(params.data.valueAll / params.data.value * 100) + '%' + '}';\n                },\n                rich: {\n                    a: {\n                        color: 'black',\n                        fontSize: 30,\n                        align: 'center'\n\n                    },\n\n                }\n            }\n\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-1092382189","theme":"","layout":"","viewCount":112,"userName":"午***书","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJdsQB0gm.png?v=1528963896917","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"午***书"}}