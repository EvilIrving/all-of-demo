{"status":0,"data":{"cid":"xzZt0_VuhY","authorUid":"obd-oEu760Pl3AKN-AAA1CzH7_7c8Esdn4E","authorUserName":"王***芳","title":"中国地图tooltip轮播","description":"中国地图tooltip轮播以及点击提示框进行页面跳转","latestVersion":3,"alwaysLatest":1,"createTime":"2021-03-03T08:09:17.000Z","lastUpdateTime":"2021-03-03T08:09:17.000Z","auth":2,"uid":"obd-oEu760Pl3AKN-AAA1CzH7_7c8Esdn4E","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-03T08:19:32.000Z","code":"// <div id=\"ChartsChina\" ref=\"ChartsRef\" style=\"width:1000px;height:800px\"></div>\r\n// import 'echarts/map/js/china'\r\n// import \"echarts/lib/chart/map\";\r\n// var myChart = this.$echarts.init(this.$refs.ChartsRef);\r\n// 实际开发时上面都要写\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function(params) {\r\n\r\n            if (params.data != 'undefined' && params.data.hasOwnProperty('jgCODE')) {\r\n                // console.log('1111',params);\r\n                // 提示框内容\r\n                // 点击提示框页面跳转\r\n                // 页面路由跳转以及传参 \r\n\r\n                return `\r\n                      <a target=\"_Blank\" href=\"www.baidu.com?id=${params.data.c}\" style=\"text-decoration:none\">\r\n                            <div  style=\"font-size: 13px;height: 17px;line-height: 17px;color: #fff;text-align: center;\">${params.data.name}</div>\r\n                            <div  style=\"height: 30px; line-height: 30px; font-size: 15px;display: flex;align-items: center;color:#fff\">\r\n                                <i style=\"border-radius: 50%;width: 15px; height: 15px;background-color: #fff;margin:0  5px;background-color: green;\"></i>\r\n                                a的数据:${params.data.a}\r\n                            </div>\r\n                            <div  style=\"height: 30px; line-height: 30px;font-size: 15px; display: flex;align-items: center;color:#fff\">\r\n                                <i style=\"border-radius: 50%;width: 15px;height: 15px;background-color: #fff;margin:0  5px;background-color: red;\"></i> \r\n                                b的数据:${params.data.b}\r\n                            </div>\r\n                      </a>\r\n                    `\r\n            }\r\n        },\r\n        //提示框是否交互\r\n        enterable: true,\r\n        // 提示框点击显示\r\n        triggerOn: 'click',\r\n        //内编剧\r\n        padding: [0],\r\n        //提示框的样式\r\n        extraCssText: 'width: 150px;height: 78px;' +\r\n            'background-color: blue;' // +'background: url('+require('../assets/indexbg.png')+');'自己提示框的背景图或者背景色\r\n            +\r\n            'border-radius: 0; border: 1px solid #000;' +\r\n            'background-size: 100% 100%; background-repeat: no-repeat;'\r\n    },\r\n\r\n    geo: {\r\n        map: \"china\",\r\n        show: true,\r\n        // //是否开启鼠标缩放和平移漫游。\r\n        roam: false,\r\n        // //当前视角的缩放比例。\r\n        zoom: 1.2,\r\n        // //图形上的文本标签，\r\n        label: {\r\n            show: false,\r\n            color: 'red',\r\n            fontSize: '20'\r\n\r\n        },\r\n        // // // 地图的大小，见 layoutCenter。支持相对于屏幕宽高的百分比或者绝对的像素大小。\r\n        layoutSize: 100,\r\n        // // //这个是高亮边框\r\n        itemStyle: {\r\n            borderColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                offset: 0,\r\n                color: '#00F6FF'\r\n            }, {\r\n                offset: 1,\r\n                color: '#53D9FF'\r\n            }], false),\r\n            borderWidth: 5,\r\n            shadowColor: 'rgba(10,76,139,1)',\r\n            shadowOffsetY: 0,\r\n            shadowBlur: 60\r\n        }\r\n    },\r\n    series: [\r\n        //给地图填充颜色\r\n        {\r\n            name: \"地图\",\r\n            type: \"map\", //地图种类\r\n            map: \"china\", //地图类型。\r\n            // data: this._mapData,\r\n            zoom: 1.2, //放大比例\r\n            label: {\r\n                //图形上的文本标签，可用于说明图形的一些数据信息\r\n                show: false\r\n            },\r\n            // 每个省份的颜色\r\n            itemStyle: {\r\n                areaColor: {\r\n                    x: 0,\r\n                    y: 0,\r\n                    x2: 0,\r\n                    y2: 1,\r\n                    colorStops: [{\r\n                            offset: 0,\r\n                            color: '#073684' // 0% 处的颜色\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: '#061E3D' // 100% 处的颜色\r\n                        }\r\n                    ],\r\n                },\r\n                borderColor: '#215495',\r\n                borderWidth: 1,\r\n            },\r\n            // 鼠标移动到每个省份高亮的颜色属性的等设置\r\n            emphasis: {\r\n                itemStyle: {\r\n                    areaColor: {\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 0,\r\n                        y2: 1,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: '#073684' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#061E3D' // 100% 处的颜色\r\n                        }],\r\n                    },\r\n                    // borderColor: 'red',\r\n                },\r\n                label: {\r\n                    show: true,\r\n                    color: '#fff'\r\n                }\r\n\r\n            },\r\n        },\r\n        {\r\n            type: 'scatter',\r\n            name: '散点',\r\n            // 使用的坐标轴\r\n            coordinateSystem: 'geo',\r\n            // 层级\r\n            zlevel: 3,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#1DE9B6',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#333'\r\n                }\r\n            },\r\n            symbolSize: 10,\r\n            // 选中时的状态\r\n            emphasis: {\r\n                itemStyle: {\r\n                    color: 'orange',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#333'\r\n                },\r\n            },\r\n            data: [{\r\n                name: '上海中心', //坐标名称\r\n                jc: '上海', //省会\r\n                province: '上海', //省份名\r\n                jgCODE: \"010107313\", //省份代码\r\n                value: [121.5648, 31.4891], //省会经纬度\r\n                a: 0, //自己的数据，后台取的\r\n                b: 0, //自己的数据，后台取的\r\n                c: 0, //自己的数据，后台取的\r\n                itemStyle: { //点的自定义设置\r\n                    color: '#4ab2e5'\r\n                }\r\n            }, {\r\n                name: '合肥中心',\r\n                jc: '合肥',\r\n                province: '安徽',\r\n                jgCODE: \"010107314\",\r\n                value: [117.29, 32.0581],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {\r\n                    color: '#4ab2e5'\r\n                }\r\n            }, {\r\n                name: '上海分行',\r\n                jc: '上海',\r\n                province: '上海',\r\n                jgCODE: \"310000000\",\r\n                value: [121.4648, 31.0091],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '北京分行',\r\n                jc: '北京',\r\n                province: '北京',\r\n                jgCODE: \"110000000\",\r\n                value: [116.4551, 40.2539],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '天津分行',\r\n                jc: '天津',\r\n                province: '天津',\r\n                jgCODE: \"120000000\",\r\n                value: [117.4219, 39.4189],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '河北分行',\r\n                jc: '石家庄',\r\n                province: '河北',\r\n                jgCODE: \"130000000\",\r\n                value: [114.4995, 38.1006],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '山西分行',\r\n                jc: '太原',\r\n                province: '山西',\r\n                jgCODE: \"140000000\",\r\n                value: [112.3352, 37.9413],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '内蒙古分行',\r\n                jc: '呼和浩特',\r\n                province: '内蒙古',\r\n                jgCODE: \"150000000\",\r\n                value: [110.3467, 41.4899],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '辽宁分行',\r\n                jc: '沈阳',\r\n                province: '辽宁',\r\n                jgCODE: \"210000000\",\r\n                value: [123.1238, 42.1216],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '大连分行',\r\n                jc: '大连',\r\n                province: '辽宁',\r\n                jgCODE: \"212000000\",\r\n                value: [122.5, 40.1216],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '吉林分行',\r\n                jc: '长春',\r\n                province: '吉林',\r\n                jgCODE: \"220000000\",\r\n                value: [125.8154, 44.2584],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '黑龙江分行',\r\n                jc: '哈尔滨',\r\n                province: '黑龙江',\r\n                jgCODE: \"230000000\",\r\n                value: [127.9688, 45.368],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '江苏分行',\r\n                jc: '南京',\r\n                province: '江苏',\r\n                jgCODE: \"320000000\",\r\n                value: [118.8062, 31.9208],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '苏州分行',\r\n                jc: '苏州',\r\n                province: '江苏',\r\n                jgCODE: \"322000000\",\r\n                value: [120.4, 31.4],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '浙江分行',\r\n                jc: '杭州',\r\n                province: '浙江',\r\n                jgCODE: \"330000000\",\r\n                value: [119.5313, 29.8773],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '宁波分行',\r\n                jc: '宁波',\r\n                province: '浙江',\r\n                jgCODE: \"331000000\",\r\n                value: [120.0313, 27.9773],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '安徽分行',\r\n                jc: '合肥',\r\n                province: '安徽',\r\n                jgCODE: \"340000000\",\r\n                value: [117.29, 30.581],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '福建分行',\r\n                jc: '福州',\r\n                province: '福建',\r\n                jgCODE: \"350000000\",\r\n                value: [119.4543, 25.9222],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '厦门分行',\r\n                jc: '厦门',\r\n                province: '福建',\r\n                jgCODE: \"351000000\",\r\n                value: [117.9543, 24.8222],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '江西分行',\r\n                jc: '南昌',\r\n                province: '江西',\r\n                jgCODE: \"360000000\",\r\n                value: [116.0046, 28.6633],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '山东分行',\r\n                jc: '济南',\r\n                province: '山东',\r\n                jgCODE: \"370000000\",\r\n                value: [117.1582, 36.8701],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '青岛分行',\r\n                jc: '青岛',\r\n                province: '山东',\r\n                jgCODE: \"371000000\",\r\n                value: [120.7582, 37.2701],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '河南分行',\r\n                jc: '郑州',\r\n                province: '河南',\r\n                jgCODE: \"410000000\",\r\n                value: [113.4668, 34.6234],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '湖北分行',\r\n                jc: '武汉',\r\n                province: '湖北',\r\n                jgCODE: \"420000000\",\r\n                value: [114.3896, 30.6628],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '湖南分行',\r\n                jc: '长沙',\r\n                province: '湖南',\r\n                jgCODE: \"430000000\",\r\n                value: [113.0823, 28.2568],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '广东分行',\r\n                jc: '广州',\r\n                province: '广东',\r\n                jgCODE: \"440000000\",\r\n                value: [113.12244, 23.009505],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '深圳分行',\r\n                jc: '深圳',\r\n                province: '广东',\r\n                jgCODE: \"442000000\",\r\n                value: [115.12244, 23.009505],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '广西分行',\r\n                jc: '南宁',\r\n                province: '广西',\r\n                jgCODE: \"450000000\",\r\n                value: [108.479, 23.1152],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '海南分行',\r\n                jc: '海口',\r\n                province: '海南',\r\n                jgCODE: \"460000000\",\r\n                value: [110.3893, 19.8516],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '重庆分行',\r\n                jc: '重庆',\r\n                province: '重庆',\r\n                jgCODE: \"500000000\",\r\n                value: [108.384366, 30.439702],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '四川分行',\r\n                jc: '成都',\r\n                province: '四川',\r\n                jgCODE: \"510000000\",\r\n                value: [103.9526, 30.7617],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '贵州分行',\r\n                jc: '贵阳',\r\n                province: '贵州',\r\n                jgCODE: \"520000000\",\r\n                value: [106.6992, 26.7682],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '云南分行',\r\n                jc: '昆明',\r\n                province: '云南',\r\n                jgCODE: \"530000000\",\r\n                value: [102.9199, 25.4663],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '西藏分行',\r\n                jc: '拉萨',\r\n                province: '西藏',\r\n                jgCODE: \"540000000\",\r\n                value: [91.11, 29.97],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '陕西分行',\r\n                jc: '西安',\r\n                province: '陕西',\r\n                jgCODE: \"610000000\",\r\n                value: [109.1162, 34.2004],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '甘肃分行',\r\n                jc: '兰州',\r\n                province: '甘肃',\r\n                jgCODE: \"620000000\",\r\n                value: [103.5901, 36.3043],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '青海分行',\r\n                jc: '西宁',\r\n                province: '青海',\r\n                jgCODE: \"630000000\",\r\n                value: [101.4038, 36.8207],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '宁夏分行',\r\n                jc: '银川',\r\n                province: '宁夏',\r\n                jgCODE: \"640000000\",\r\n                value: [106.3586, 38.1775],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }, {\r\n                name: '新疆分行',\r\n                jc: '乌鲁木齐',\r\n                province: '新疆',\r\n                jgCODE: \"650000000\",\r\n                value: [87.9236, 43.5883],\r\n                a: 0,\r\n                b: 0,\r\n                c: 0,\r\n                itemStyle: {}\r\n            }]\r\n        },\r\n    ]\r\n};\r\nmyChart.setOption(option);\r\n// tooltip轮播\r\nvar count = 0;\r\nvar timeTicket = null;\r\nvar dataLength = 39; //此处设置的是需要轮播的次数 也就是data的长度\r\ntimeTicket && clearInterval(timeTicket);\r\ntimeTicket = setInterval(function() {\r\n    // 展示提示框\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 1,\r\n        dataIndex: (count) % dataLength\r\n    });\r\n    // 取消高亮的点\r\n    myChart.dispatchAction({\r\n        type: 'downplay',\r\n        seriesIndex: 1,\r\n        dataIndex: ((count) % dataLength - 1 == -1) ? (dataLength - 1) : ((count) % dataLength - 1)\r\n    });\r\n    // 高亮当前的城市\r\n    myChart.dispatchAction({\r\n        type: 'highlight',\r\n        seriesIndex: 1,\r\n        dataIndex: (count) % dataLength\r\n    });\r\n    count++;\r\n}, 2000);\r\n// 点击散列点显示该点提示框，显示5秒 ，5秒后再次进行轮播\r\nmyChart.on('click', function(params) {\r\n\r\n    if (params.componentSubType === \"scatter\") {\r\n        // 清除定时器\r\n        clearInterval(timeTicket)\r\n        // 展示指定提示框\r\n        myChart.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 1,\r\n            dataIndex: params.dataIndex\r\n        });\r\n        // 取消所有高亮的点\r\n        myChart.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 1,\r\n        });\r\n        // 高亮当前的城市\r\n        myChart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 1,\r\n            dataIndex: params.dataIndex\r\n        });\r\n        //再次轮播  提示框展示5秒\r\n        setTimeout(() => {\r\n            // 取消所有高亮的点\r\n            myChart.dispatchAction({\r\n                type: 'downplay',\r\n                seriesIndex: 1,\r\n            });\r\n            clearInterval(timeTicket);\r\n            timeTicket = setInterval(function() {\r\n                // 展示提示框\r\n                myChart.dispatchAction({\r\n                    type: 'showTip',\r\n                    seriesIndex: 1,\r\n                    dataIndex: (count) % dataLength\r\n                });\r\n                // 取消高亮的点\r\n                myChart.dispatchAction({\r\n                    type: 'downplay',\r\n                    seriesIndex: 1,\r\n                    dataIndex: ((count) % dataLength - 1 == -1) ? (dataLength - 1) : ((count) % dataLength - 1)\r\n                });\r\n                // 高亮当前的城市\r\n                myChart.dispatchAction({\r\n                    type: 'highlight',\r\n                    seriesIndex: 1,\r\n                    dataIndex: (count) % dataLength\r\n                });\r\n                count++;\r\n            }, 2000);\r\n        }, 5000);\r\n\r\n    }\r\n})","html":"","externalScripts":"","updaterUID":"obd-oEu760Pl3AKN-AAA1CzH7_7c8Esdn4E","theme":"","layout":"","viewCount":132,"userName":"王***芳","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xzZt0_VuhY.png?v=1614759572315","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","tooltip"],"customTags":[],"updaterUserName":"王***芳"}}