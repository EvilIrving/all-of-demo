{"status":0,"data":{"cid":"x8--lnL4EC","authorUid":"bd-101698999","authorUserName":"Z***8","title":"dataView 数据重新排序","description":"通过 optionToContent 实现 dataView 的数据排序","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-13T13:49:49.000Z","lastUpdateTime":"2020-04-13T13:49:49.000Z","auth":2,"uid":"bd-101698999","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-13T13:49:49.000Z","code":"option = {\n    title: {\n        text: 'dataView 数据重新排序'\n    },\n    xAxis: {\n        data: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    yAxis: {},\n    toolbox: {\n        feature: {\n            dataView: {\n                readOnly: false,\n                optionToContent: function(opt) {\n                    var axisData = opt.xAxis[0].data;\n                    var series = opt.series;\n                    var indexSorted = [];\n\n                    // 准备一个 index 列表\n                    axisData.forEach((num, index) => {\n                        indexSorted[index] = index;\n                    });\n                    \n                    // 对 index 列表按 series[0] 数值大小重新排序\n                    indexSorted = indexSorted.sort(function(a, b) {\n                        return series[0].data[a] - series[0].data[b];\n                    });\n                    \n                    var table = '<table style=\"width:100%;text-align:center\"><tbody><tr>' +\n                        '<td>时间</td>' +\n                        '<td>' + series[0].name + '</td>' +\n                        '<td>' + series[1].name + '</td>' +                        \n                        '</tr>';\n\n\n                    console.log(opt);\n                    for (var i = 0, l = indexSorted.length; i < l; i++) {\n                        table += '<tr>' +\n                            '<td>' + axisData[indexSorted[i]] + '</td>' +\n                            '<td>' + series[0].data[indexSorted[i]] + '</td>' +\n                            '<td>' + series[1].data[indexSorted[i]] + '</td>' +\n                            '</tr>';\n                    }\n                    table += '</tbody></table>';\n                    return table;\n                }\n            }\n        }\n\n    },\n    series: [{\n        type: 'line',\n        name: 'series1',\n        data: [220, 182, 191, 234, 290, 330, 310]\n    },{\n        type: 'line',\n        name: 'series2',\n        data: [210, 122, 131, 234, 130, 230, 150]\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-101698999","theme":"","layout":"","viewCount":86,"userName":"Z***8","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8--lnL4EC.png?v=1586785789751","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title","toolbox"],"customTags":["dataView","optionToContent"],"updaterUserName":"Z***8"}}