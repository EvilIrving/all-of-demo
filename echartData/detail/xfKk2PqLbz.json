{"status":0,"data":{"cid":"xfKk2PqLbz","authorUid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","authorUserName":"宁***群","title":"热力图—仿dataset传值方式","description":"热力图—探索实现类似dataset传值","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-12T06:16:55.000Z","lastUpdateTime":"2021-08-12T06:16:55.000Z","auth":2,"uid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-12T06:16:55.000Z","code":"var dataset = {\n    dimensions: ['时间', '地点', '人数'],\n\tsource: [\n\t\t{ '时间': '星期一', '地点': '北京', '人数': 1000 },\n        { '时间': '星期二', '地点': '上海', '人数': 400 },\n        { '时间': '星期三', '地点': '杭州', '人数': 800 },\n        { '时间': '星期二', '地点': '深圳', '人数': 200 },\n        { '时间': '星期三', '地点': '长春', '人数': 100 },\n        { '时间': '星期五', '地点': '南京', '人数': 300 },\n        { '时间': '星期四', '地点': '江苏', '人数': 800 },\n        { '时间': '星期一', '地点': '杭州', '人数': 700 },\n        { '时间': '星期三', '地点': '上海', '人数': 300 },\n        { '时间': '星期二', '地点': '杭州', '人数': 500 }\n\t]\n// \tdimensions: [\"日期\", \"访问用户\", \"第三方\"],\n// \tsource: [\n// \t\t{ 日期: \"1月1日\", 访问用户: 1523, 第三方: 1200 },\n// \t\t{ 日期: \"1月2日\", 访问用户: 1223, 第三方: 2200 },\n// \t\t{ 日期: \"1月3日\", 访问用户: 2123, 第三方: 3200 },\n// \t\t{ 日期: \"1月4日\", 访问用户: 4123, 第三方: 4200 },\n// \t\t{ 日期: \"1月5日\", 访问用户: 3123, 第三方: 2800 },\n// \t\t{ 日期: \"1月6日\", 访问用户: 7123, 第三方: 6200 }\n// \t]\n}\n\n\n\nvar s = []\nfor(let i = 0; i < dataset.source.length; i++){\n    s.push(dataset.source[i][dataset.dimensions[2]])\n}\nconsole.log(s)\nvar max =  Math.max.apply(null, s)\nconsole.log(max)\n\n\n\noption = {\n    tooltip: {\n        position: 'top',\n        formatter: function(params){\n           return  params.data[params.dimensionNames[params.encode.y[0]]]\n           + `<br />${params.marker}` \n           + params.data[params.dimensionNames[params.encode.x[0]]]\n           + ' : ' + params.data[params.dimensionNames[params.encode.value[0]]]\n        }\n    },\n    animation: false,\n    dataset: dataset,\n    label:{ \n        show: true,\n        formatter: function(params){\n        //   console.log(params,params.dimensionNames[params.encode.value[0]],params.data[params.dimensionNames[params.encode.value[0]]]) \n           return params.data[params.dimensionNames[params.encode.value[0]]]\n        }\n    },\n    grid: {\n        // height: '50%',\n        top: '10%',\n        bottom: '12%'\n    },\n    xAxis: {\n        type: 'category',\n        // data: hours,\n        splitArea: {\n            show: true,\n        }\n    },\n    yAxis: {\n        type: 'category',\n        // data: days,\n        splitArea: {\n            show: true\n        }\n    },\n    visualMap: {\n        min: 0,\n        // max: 1000,\n        max: max,\n        calculable: true,\n        orient: 'horizontal',\n        left: 'center',\n        // bottom: '15%',\n        bottom: '2%'\n    },\n    series: [{\n        // name: '热力图',\n        type: 'heatmap',\n        // data: data,\n        // label: {\n        //     show: true\n        //     // formatter: [\n        //     //     '{a}'\n        //     // ].join('\\n'),\n        \n        // },\n        emphasis: {\n            itemStyle: {\n                shadowBlur: 10,\n                shadowColor: 'rgba(0, 0, 0, 0.5)'\n            }\n        }\n    }]\n};","html":"","externalScripts":"","updaterUID":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","theme":"","layout":"","viewCount":0,"userName":"宁***群","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfKk2PqLbz.png?v=1628749015539","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","series-heatmap","tooltip","visualMap"],"customTags":[],"updaterUserName":"宁***群"}}