{"status":0,"data":{"cid":"xluUvsVqMM","authorUid":"obd-o0FOjjPGdXI6Sm5sgj7hgEwmg0o9VFv","authorUserName":"U***e","title":"重庆地图小作业","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-14T13:31:40.000Z","lastUpdateTime":"2020-06-14T13:31:40.000Z","auth":2,"uid":"obd-o0FOjjPGdXI6Sm5sgj7hgEwmg0o9VFv","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-14T15:21:12.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1592148024428-_sX96TMKH.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1592147823275-ngLluAver.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1592146914563-fTAtoYjiu.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1592145838855-UV9kCYzia.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1592145838855-UV9kCYzia.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1592127667182-CnZpFnmp-.json\";\r\n\r\n\r\n\r\n/**\r\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，\r\n来达到hover散点和区域显示tooltip的效果\r\n\r\n默认情况下，map series 会自己生成内部专用的 geo 组件。\r\n但是也可以用这个 geoIndex 指定一个 geo 组件。\r\n这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。\r\n并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\r\n当设定了 geoIndex 后，series-map.map 属性，\r\n以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\r\n\r\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\r\n\r\n并且加了pin气泡图标以示数值大小\r\n*/\r\nmyChart.showLoading();\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    console.log(geoJson);\r\n    echarts.registerMap('重庆市', geoJson);\r\n    myChart.hideLoading();\r\n    var geoCoordMap = {\r\n        '教委':[105.501708984375,30.854937397596693],\r\n        '重庆市':[106.56288, 29.556742],\r\n        // '涪陵区':[107.394905, 29.703652],\r\n        // '万州区':[108.380246, 30.807807],\r\n        // '渝中区':[106.56288, 29.556742],\r\n        // '大渡口区':[106.48613, 29.481002],\r\n        // '江北区':[106.532844, 29.575352],\r\n        // '沙坪坝区':[106.4542, 29.541224],\r\n        // '九龙坡区':[106.480989, 29.523492],\r\n        // '南岸区':[106.560813, 29.523992],\r\n        // '北碚区':[106.437868, 29.82543],\r\n        '綦江区':[106.651417, 29.028091],\r\n        //'渝北区':[106.512851, 29.601451],\r\n        '大足区':[105.715319, 29.700498],\r\n        '巴南区':[106.519423, 29.381919],\r\n        '黔江区':[108.782577, 29.527548],\r\n       // '长寿区':[107.074854, 29.833671],\r\n        '江津区':[106.253156, 29.283387],\r\n        '合川区':[106.265554, 29.990993],\r\n        '永川区':[105.894714, 29.348748],\r\n        '南川区':[107.098153, 29.156646],\r\n        '璧山区':[106.231126, 29.593581],\r\n        '铜梁区':[106.054948, 29.839944],\r\n        '潼南区':[105.841818, 30.189554],\r\n        '荣昌区':[105.594061, 29.403627],\r\n        '开州区':[108.413317, 31.167735],\r\n        '梁平区':[107.800034, 30.672168],\r\n        '武隆区':[107.75655, 29.32376],\r\n        '城口县':[108.6649, 31.946293],\r\n        '丰都县':[107.73248, 29.866424],\r\n        '垫江县':[107.348692, 30.330012],\r\n        '忠县':[108.037518, 30.291537],\r\n        '云阳县':[108.697698, 30.930529],\r\n        '奉节县':[109.465774, 31.019967],\r\n        '巫山县':[109.878928, 31.074843],\r\n        '巫溪县':[109.628912, 31.3966],\r\n        '石柱土家族自治县':[108.112448, 29.99853],\r\n        '秀山土家族苗族自治县':[108.996043, 28.444772],\r\n        '酉阳土家族苗族自治县':[108.767201, 28.839828],\r\n        '彭水苗族土家族自治县':[108.166551, 29.293856],\r\n        \r\n    };\r\n    var moveLine = {\r\n    'normal':[\r\n    {\"fromName\":\"教委\",\"toName\":\"重庆市\",'coords':[[105.501708984375,30.854937397596693],[106.56288, 29.556742],]},\r\n        \r\n   /* {\"fromName\":\"教委\",\"toName\":\"涪陵区\",'coords':[[105.501708984375,30.854937397596693],[107.394905, 29.703652],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"万州区\",'coords':[[105.501708984375,30.854937397596693],[108.380246, 30.807807],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"渝中区\",'coords':[[105.501708984375,30.854937397596693],[106.56288, 29.556742],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"大渡口区\",'coords':[[105.501708984375,30.854937397596693],[106.48613, 29.481002],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"江北区\",'coords':[[105.501708984375,30.854937397596693],[106.532844, 29.575352],]},\r\n    \r\n    {\"fromName\":\"教委\",\"toName\":\"沙坪坝区\",'coords':[[105.501708984375,30.854937397596693],[106.4542, 29.541224],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"九龙坡区\",'coords':[[105.501708984375,30.854937397596693],[106.480989, 29.523492],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"南岸区\",'coords':[[105.501708984375,30.854937397596693],[106.560813, 29.523992],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"北碚区\",'coords':[[105.501708984375,30.854937397596693],[106.437868, 29.82543],]}, \r\n    */{\"fromName\":\"教委\",\"toName\":\"綦江区\",'coords':[[105.501708984375,30.854937397596693],[106.651417, 29.028091],]},\r\n   // {\"fromName\":\"教委\",\"toName\":\"渝北区\",'coords':[[105.501708984375,30.854937397596693],[106.512851, 29.601451],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"大足区\",'coords':[[105.501708984375,30.854937397596693],[105.715319, 29.700498],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"巴南区\",'coords':[[105.501708984375,30.854937397596693],[106.519423, 29.381919],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"黔江区\",'coords':[[105.501708984375,30.854937397596693],[108.782577, 29.527548],]},\r\n    //{\"fromName\":\"教委\",\"toName\":\"长寿区\",'coords':[[105.501708984375,30.854937397596693],[107.074854, 29.833671],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"江津区\",'coords':[[105.501708984375,30.854937397596693],[106.253156, 29.283387],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"合川区\",'coords':[[105.501708984375,30.854937397596693],[106.265554, 29.990993],]},\r\n    \r\n    {\"fromName\":\"教委\",\"toName\":\"永川区\",'coords':[[105.501708984375,30.854937397596693],[105.894714, 29.348748],]},\r\n    {\"fromName\":\"教委\",\"toName\":\"南川区\",'coords':[[105.501708984375,30.854937397596693],[107.098153, 29.156646],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"璧山区\",'coords':[[105.501708984375,30.854937397596693],[106.231126, 29.593581],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"铜梁区\",'coords':[[105.501708984375,30.854937397596693],[106.054948, 29.839944],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"潼南区\",'coords':[[105.501708984375,30.854937397596693],[105.841818, 30.189554],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"荣昌区\",'coords':[[105.501708984375,30.854937397596693],[105.594061, 29.403627],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"开州区\",'coords':[[105.501708984375,30.854937397596693],[108.413317, 31.167735],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"梁平区\",'coords':[[105.501708984375,30.854937397596693],[107.800034, 30.672168],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"武隆区\",'coords':[[105.501708984375,30.854937397596693],[107.75655, 29.32376],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"城口县\",'coords':[[105.501708984375,30.854937397596693],[108.6649, 31.946293],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"丰都县\",'coords':[[105.501708984375,30.854937397596693],[107.73248, 29.866424],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"垫江县\",'coords':[[105.501708984375,30.854937397596693],[107.348692, 30.330012],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"忠县\",'coords':[[105.501708984375,30.854937397596693],[108.037518, 30.291537],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"云阳县\",'coords':[[105.501708984375,30.854937397596693],[108.697698, 30.930529],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"奉节县\",'coords':[[105.501708984375,30.854937397596693],[109.465774, 31.019967],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"巫山县\",'coords':[[105.501708984375,30.854937397596693],[109.878928, 31.074843],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"巫溪县\",'coords':[[105.501708984375,30.854937397596693],[109.628912, 31.3966],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"石柱土家族自治县\",'coords':[[105.501708984375,30.854937397596693],[108.112448, 29.99853],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"秀山土家族苗族自治县\",'coords':[[105.501708984375,30.854937397596693],[108.996043, 28.444772],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"酉阳土家族苗族自治县\",'coords':[[105.501708984375,30.854937397596693],[108.767201, 28.839828],]},\r\n   {\"fromName\":\"教委\",\"toName\":\"彭水苗族土家族自治县\",'coords':[[105.501708984375,30.854937397596693],[108.166551, 29.293856],]},\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    ],\r\n    'warning':[\r\n    \r\n    ]\r\n    };\r\n    var data = [\r\n        {name:'教委',value:190},\r\n        {name:'重庆市',value:190},\r\n       /* {name:'涪陵区',value:190},\r\n        {name:'万州区',value:190},\r\n        {name:'渝中区',value:190},\r\n        {name:'大渡口区',value:190},\r\n        {name:'江北区',value:90},\r\n        \r\n        \r\n        {name:'沙坪坝区',value:190},\r\n        {name:'九龙坡区',value:190},\r\n        {name:'南岸区',value:190},\r\n        {name:'北碚区',value:190},\r\n        */{name:'綦江区',value:190},\r\n        //{name:'渝北区',value:190},\r\n        {name:'大足区',value:190},\r\n        {name:'巴南区',value:190},\r\n        {name:'黔江区',value:190},\r\n        //{name:'长寿区',value:190},\r\n        {name:'江津区',value:190},\r\n        {name:'合川区',value:190},\r\n        {name:'永川区',value:190},\r\n        {name:'南川区',value:190},\r\n        {name:'璧山区',value:190},\r\n        {name:'铜梁区',value:190},\r\n        {name:'潼南区',value:190},\r\n        {name:'荣昌区',value:190},\r\n        {name:'开州区',value:190},\r\n        {name:'梁平区',value:190},\r\n        {name:'武隆区',value:190},\r\n        {name:'城口县',value:190},\r\n        {name:'丰都县',value:190},\r\n        {name:'垫江县',value:190},\r\n        {name:'忠县',value:190},\r\n        {name:'云阳县',value:190},\r\n        {name:'奉节县',value:190},\r\n        {name:'巫山县',value:190},\r\n        {name:'巫溪县',value:190},\r\n        {name:'石柱土家族自治县',value:190},\r\n        {name:'秀山土家族苗族自治县',value:190},\r\n        {name:'酉阳土家族苗族自治县',value:190},\r\n        {name:'彭水苗族土家族自治县',value:190},\r\n       \r\n    ];\r\n    var max = 480, min = 9; // todo \r\n    var maxSize4Pin = 100, minSize4Pin = 20;\r\n\r\n  var convertData = function (data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value)\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n\r\n    option = {\r\n        backgroundColor: '#091c3d',\r\n        title: {\r\n            top:20,\r\n            text: '',\r\n            subtext: '',\r\n            x: 'center',\r\n            textStyle: {\r\n                color: '#ccc'\r\n            }\r\n        },    \r\n\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function (params) {\r\n              if(typeof(params.value)[2] == \"undefined\"){\r\n              \treturn params.name + ' : ' + params.value;\r\n              }else{\r\n              \treturn params.name + ' : ' + params.value[2];\r\n              }\r\n            }\r\n        },\r\n        legend: {\r\n        orient: 'vertical',\r\n        y: 'bottom',\r\n        x:'right',\r\n        data:['pm2.5'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n        }, \r\n        visualMap: {\r\n            show: false,\r\n            min: 0,\r\n            max: 500,\r\n            left: 'left',\r\n            top: 'bottom',\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            calculable: true,\r\n            seriesIndex: [1],\r\n            inRange: {\r\n                // color: ['#3B5077', '#031525'] // 蓝黑\r\n                // color: ['#ffc0cb', '#800080'] // 红紫\r\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\r\n                //color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\r\n                 //color: ['#23074d', '#cc5333'] // 紫红\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#1488CC', '#2B32B2'] // 浅蓝\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n\r\n            }\r\n        },\r\n        // toolbox: {\r\n        //     show: true,\r\n        //     orient: 'vertical',\r\n        //     left: 'right',\r\n        //     top: 'center',\r\n        //     feature: {\r\n        //             dataView: {readOnly: false},\r\n        //             restore: {},\r\n        //             saveAsImage: {}\r\n        //             }\r\n        // },\r\n        geo: {\r\n            show: true,\r\n            map: '重庆市',\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: 'transparent',\r\n                    borderColor: '#3fdaff',\r\n                    borderWidth: 2,\r\n                    shadowColor: 'rgba(63, 218, 255, 0.5)',\r\n                    shadowBlur: 30\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7',\r\n                }\r\n            }\r\n        },\r\n        series : [\r\n      {\r\n            name: 'light',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbolSize: function (val) {\r\n                return val[2] / 10;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#F4E925'\r\n                }\r\n            }\r\n        },\r\n         {\r\n            type: 'map',\r\n            map: '重庆市',\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#FFFFFF',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n        {\r\n            name: 'Top 5',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data.sort(function (a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 1)),\r\n            symbolSize: function (val) {\r\n                return val[2] / 5;\r\n            },\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#F4E925',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#05C3F9'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        },\r\n         {\r\n        name: '线路',\r\n        type: 'lines',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        large: true,\r\n        effect: {\r\n            show: true,\r\n            constantSpeed: 30,\r\n            symbol: 'arrow',//ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\r\n            symbolSize: 0,\r\n            trailLength: 0,\r\n        },\r\n        \r\n        lineStyle: {\r\n            normal: {\r\n                color:'#f3f3f3',\r\n                /*\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0, color: '#58B3CC'\r\n                    }, {\r\n                        offset: 1, color: '#F58158'\r\n                    }], false),*/\r\n                width: 1,\r\n                opacity: 1.0,\r\n                curveness: 0.5\r\n            }\r\n        },\r\n        data: moveLine.normal\r\n    }/*,\r\n    {\r\n        name: '线路',\r\n        type: 'lines',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        large: true,\r\n        effect: {\r\n            show: true,\r\n            constantSpeed: 30,\r\n            symbol: 'arrow',//ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\r\n            symbolSize: 10,\r\n            trailLength: 0,\r\n        },\r\n        \r\n        lineStyle: {\r\n            normal: {\r\n                color:'rgb(255, 0, 0)',\r\n                width: 2,\r\n                opacity: 1,\r\n                curveness: 0.15\r\n            }\r\n        },\r\n        data: moveLine.warning\r\n    }*/\r\n         \r\n    ]\r\n    };\r\n    myChart.setOption(option);\r\n});","html":"","externalScripts":"https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"obd-o0FOjjPGdXI6Sm5sgj7hgEwmg0o9VFv","theme":"","layout":"","viewCount":1506,"userName":"U***e","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xluUvsVqMM.png?v=1592148073162","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"U***e"}}