{"status":0,"data":{"cid":"xcK8a_910U","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"日期热力图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-23T01:29:01.000Z","lastUpdateTime":"2020-07-23T01:29:01.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-23T01:29:01.000Z","code":"var days = [\"06.23\",\"24\",\"25\",\"26\",\"27\",\"28\",\"29\",\"30\",\"07.01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\"];//刷卡日期\r\nvar weeks = [\" \",\" \",\" \",\" \",\"六\",\"日\",\" \",\" \",\" \",\" \",\" \",\"六\",\"日\",\" \",\" \",\" \",\" \",\" \",\"六\",\"日\",\" \",\" \",\" \",\" \",\" \",\"六\",\"日\",\" \",\" \",\" \"];//刷卡日期六日\r\nvar place = [\"校医院\",\"教学楼\",\"超市\",\"图书馆\",\"饭堂\",\"宿舍\",\"校门\"];//刷卡地点\r\nvar numx=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6];//刷卡地点序号\r\nvar numy=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29,0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7,8,8,8,9,9,9,10,10,10,11,11,11,12,12,12,13,13,13,14,14,14,15,15,15,16,16,16,17,17,17,18,18,18,19,19,19,20,20,20,21,21,21,22,22,22,23,23,23,24,24,24,25,25,25,26,26,26,27,27,27,28,28,28,29,29,29];//刷卡日期序号\r\nvar numh=[4,4,4,4,4,4,0,0,0,2,2,2,0,0,0,7,7,7,3,3,3,5,5,5,0,0,0,0,0,0,7,7,7,7,7,7,0,0,0,2,2,2,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,4,4,4,0,0,0,4,4,4,0,0,0,6,6,6,3,3,3,0,0,0,6,6,6,0,0,0,6,6,6,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,6,6,6,0,0,0,0,0,0,5,5,5,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,8,8,0,0,0,0,0,0,7,7,7,0,0,0,0,0,0,0,0,0,5,5,5,7,7,7,0,0,0,0,0,0,0,0,0,0,0,0,6,6,6,0,0,0,0,0,0,8,8,8,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,4,4,4,0,0,0,0,0,0,0,0,0,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,6,6,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,6,6,6,0,0,0,5,5,5,0,0,0,0,0,0,1,1,1,1,1,1,4,4,4,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,5,5,5,5,5,2,2,2,2,2,2,6,6,6,0,0,0,4,4,4,6,6,6,2,2,2,7,7,7,2,2,2,7,7,7,0,0,0,0,0,0,2,2,2,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];//刷卡次数;\r\nvar data = [];\r\nfor(var i = 0;i<numh.length;i++){\r\n    data[i]=[numx[i],numy[i],numh[i]];\r\n}\r\ndata = data.map(function (item) {\r\n    return [item[1], item[0], item[2] || '-'];\r\n});\r\n\r\n\r\n//近一个月一卡通刷卡地点热力图图表\r\noption = {\r\n    backgroundColor:'#fff',\r\n    grid: {\r\n        top: '25%',//上边距\r\n        right: '3%',//右边距\r\n        left: '6%',//左边距\r\n        bottom: '25%',//下边距\r\n        show:true,\r\n        borderColor:\"transparent\",\r\n        backgroundColor:'rgba(6,99,252,0)',\r\n    },\r\n    tooltip: {\r\n        position: 'top',\r\n        formatter: function(params) {\r\n\t            return '刷卡地点：' + place[params.value[1]]+ '<br/>' + days[params.value[0]]+ '日刷卡总次数：' + params.data[2]+'次';\r\n\t        }\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        data: days,\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#fff',\r\n                width:5,\r\n            },\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        }, \r\n        axisLabel: {\r\n            margin: 5,\r\n            color: '#999',\r\n            textStyle: {\r\n                fontSize: 12\r\n            },\r\n\t\t\tinterval: 0,  \r\n\t\t\tformatter:function(value){ \r\n\t\t\t//\tdebugger  \r\n\t\t\t\tvar ret = \"\";//拼接加\\n返回的类目项  \r\n\t\t\t\tvar maxLength = 3;//每项显示文字个数  \r\n\t\t\t\tvar valLength = value.length;//X轴类目项的文字个数  \r\n\t\t\t\tvar rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数  \r\n\t\t\t\tif (rowN > 1)//如果类目项的文字大于3,\r\n\t\t\t\t{  \r\n\t\t\t\t\tfor (var i = 0; i < rowN; i++){\r\n\t\t\t\t\t\tvar temp = \"\";//每次截取的字符串  \r\n\t\t\t\t\t\tvar start = i * maxLength;//开始截取的位置  \r\n\t\t\t\t\t\tvar end = start + maxLength;//结束截取的位置  \r\n\t\t\t\t\t\t//这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧  \r\n\t\t\t\t\t\ttemp = value.substring(start, end) + \"\\n\";  \r\n\t\t\t\t\t\tret += temp; //凭借最终的字符串  \r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;  \r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn value;  \r\n\t\t\t\t}\r\n\t\t\t},\r\n        },\r\n    },{\r\n        type: 'category',\r\n        data: weeks,\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n\t\t\t\ttype:'dashed',\r\n                color: '#E5E8EB',\r\n                width:1,\r\n            },\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        }, \r\n        axisLabel: {\r\n            margin: 5,\r\n            color: '#999',\r\n            textStyle: {\r\n                fontSize: 12\r\n            },\r\n\t\t\tinterval: 0,  \r\n        },\r\n    }],\r\n    yAxis: {\r\n        type: 'category',\r\n        data: place,\r\n        splitArea: {\r\n            show: true,\r\n            areaStyle: {\r\n                color:'transparent',\r\n            },\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#fff',\r\n                 width:15,\r\n            },\r\n        },\r\n        axisLine: {\r\n            show: true,\r\n\t\t\tlineStyle:{\r\n\t\t\t\twidth:1,\r\n\t\t\t\tcolor:'#ccc',\r\n\t\t\t}\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        }, \r\n        axisLabel: {\r\n            margin: 8,\r\n            color: '#666',\r\n            textStyle: {\r\n                fontSize: 12\r\n            },\r\n        },\r\n    },\r\n    visualMap: {\r\n        type: 'continuous',\r\n        show:false,\r\n        min: 0,\r\n        max: 10,\r\n        inRange: {\r\n            color: ['#8DB6F8', '#4185F4','#5984C8'],\r\n        },\r\n    },\r\n    series: [{\r\n        type: 'heatmap',\r\n        data: data,\r\n        label: {\r\n            show: true,\r\n        },\r\n        zlevel:-1,\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":1021,"userName":"衰***命","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcK8a_910U.png?v=1595467742110","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-heatmap","tooltip","visualMap"],"customTags":[],"updaterUserName":"衰***命"}}