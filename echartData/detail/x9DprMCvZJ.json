{"status":0,"data":{"cid":"x9DprMCvZJ","authorUid":"obd-ol9ApUNzruRtm2D-0e5Fb-FETwsWF0O","authorUserName":"相***光","title":"最近12个月空气质量分布","description":"AQI预测 - 空气质量预报 - 最近12个月空气质量分布","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-28T07:39:39.000Z","lastUpdateTime":"2021-10-28T07:39:39.000Z","auth":2,"uid":"obd-ol9ApUNzruRtm2D-0e5Fb-FETwsWF0O","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-28T07:39:39.000Z","code":"// 数据源\r\nconst dataOrigin = {\r\n    xAxisData: [\r\n        '01',\r\n        '02',\r\n        '03',\r\n        '04',\r\n        '05',\r\n        '06',\r\n        '07',\r\n        '08',\r\n        '09',\r\n        '10',\r\n        '11',\r\n        '12',\r\n        '13',\r\n        '14',\r\n        '15',\r\n        '16',\r\n        '17',\r\n        '18',\r\n        '19',\r\n        '20',\r\n        '21',\r\n        '22',\r\n        '23',\r\n        '24',\r\n        '25',\r\n        '26',\r\n        '27',\r\n        '28',\r\n        '29',\r\n        '30',\r\n        '31',\r\n    ],\r\n    yAxisData: [\r\n        '2020-10',\r\n        '2020-11',\r\n        '2020-12',\r\n        '2021-01',\r\n        '2021-02',\r\n        '2021-03',\r\n        '2021-04',\r\n        '2021-05',\r\n        '2021-06',\r\n        '2021-07',\r\n        '2021-08',\r\n    ],\r\n    seriesDatas: [\r\n        {\r\n            name: '优',\r\n            data: [\r\n                [2, 0, 31],\r\n                [3, 0, 36],\r\n                [4, 0, 34],\r\n                [5, 0, 36],\r\n                [6, 0, 25],\r\n                [7, 0, 35],\r\n                [8, 0, 34],\r\n                [9, 0, 34],\r\n                [10, 0, 41],\r\n                [11, 0, 44],\r\n                [12, 0, 48],\r\n                [13, 0, 37],\r\n                [14, 0, 31],\r\n                [15, 0, 28],\r\n                [16, 0, 46],\r\n                [17, 0, 39],\r\n                [18, 0, 36],\r\n                [19, 0, 49],\r\n                [24, 0, 50],\r\n                [25, 0, 47],\r\n                [26, 0, 44],\r\n                [27, 0, 45],\r\n                [28, 0, 38],\r\n                [29, 0, 41],\r\n                [30, 0, 43],\r\n                [2, 1, 45],\r\n                [3, 1, 39],\r\n                [10, 1, 42],\r\n                [11, 1, 41],\r\n                [15, 1, 43],\r\n                [16, 1, 44],\r\n                [18, 1, 40],\r\n                [19, 1, 33],\r\n                [20, 1, 23],\r\n                [21, 1, 47],\r\n                [22, 1, 44],\r\n                [23, 1, 35],\r\n                [24, 1, 18],\r\n                [25, 1, 38],\r\n                [0, 2, 48],\r\n                [7, 2, 43],\r\n                [12, 2, 33],\r\n                [13, 2, 44],\r\n                [27, 2, 29],\r\n                [28, 2, 46],\r\n                [18, 3, 46],\r\n                [23, 3, 42],\r\n                [6, 4, 35],\r\n                [7, 4, 29],\r\n                [8, 4, 41],\r\n                [9, 4, 39],\r\n                [11, 4, 50],\r\n                [15, 4, 38],\r\n                [16, 4, 39],\r\n                [18, 4, 47],\r\n                [19, 4, 44],\r\n                [21, 4, 39],\r\n                [22, 4, 38],\r\n                [23, 4, 37],\r\n                [24, 4, 40],\r\n                [25, 4, 36],\r\n                [26, 4, 28],\r\n                [27, 4, 33],\r\n                [1, 5, 48],\r\n                [4, 5, 42],\r\n                [5, 5, 42],\r\n                [6, 5, 49],\r\n                [7, 5, 40],\r\n                [10, 5, 47],\r\n                [17, 5, 43],\r\n                [25, 5, 41],\r\n                [30, 5, 33],\r\n                [1, 6, 42],\r\n                [3, 6, 45],\r\n                [4, 6, 45],\r\n                [5, 6, 43],\r\n                [7, 6, 46],\r\n                [8, 6, 50],\r\n                [9, 6, 37],\r\n                [10, 6, 48],\r\n                [12, 6, 39],\r\n                [13, 6, 44],\r\n                [20, 6, 47],\r\n                [23, 6, 50],\r\n                [24, 6, 48],\r\n                [25, 6, 47],\r\n                [29, 6, 47],\r\n                [0, 7, 40],\r\n                [1, 7, 50],\r\n                [2, 7, 36],\r\n                [10, 7, 46],\r\n                [11, 7, 39],\r\n                [12, 7, 46],\r\n                [13, 7, 49],\r\n                [14, 7, 31],\r\n                [15, 7, 41],\r\n                [17, 7, 36],\r\n                [18, 7, 31],\r\n                [21, 7, 32],\r\n                [24, 7, 49],\r\n                [25, 7, 49],\r\n                [30, 7, 30],\r\n                [0, 8, 30],\r\n                [6, 8, 30],\r\n                [7, 8, 45],\r\n                [8, 8, 33],\r\n                [10, 8, 40],\r\n                [11, 8, 43],\r\n                [12, 8, 46],\r\n                [13, 8, 42],\r\n                [14, 8, 22],\r\n                [15, 8, 27],\r\n                [16, 8, 42],\r\n                [24, 8, 30],\r\n                [25, 8, 32],\r\n                [26, 8, 28],\r\n                [27, 8, 39],\r\n                [28, 8, 33],\r\n                [29, 8, 32],\r\n                [0, 9, 27],\r\n                [1, 9, 30],\r\n                [2, 9, 30],\r\n                [4, 9, 49],\r\n                [5, 9, 43],\r\n                [6, 9, 31],\r\n                [7, 9, 30],\r\n                [8, 9, 30],\r\n                [14, 9, 32],\r\n                [15, 9, 30],\r\n                [16, 9, 37],\r\n                [17, 9, 32],\r\n                [18, 9, 27],\r\n                [19, 9, 26],\r\n                [20, 9, 35],\r\n                [21, 9, 29],\r\n                [22, 9, 26],\r\n                [23, 9, 18],\r\n                [24, 9, 18],\r\n                [25, 9, 18],\r\n                [26, 9, 27],\r\n                [27, 9, 34],\r\n                [29, 9, 45],\r\n                [30, 9, 47],\r\n                [0, 10, 31],\r\n                [1, 10, 22],\r\n                [2, 10, 28],\r\n                [3, 10, 28],\r\n                [4, 10, 28],\r\n                [5, 10, 26],\r\n                [6, 10, 27],\r\n                [7, 10, 50],\r\n                [8, 10, 46],\r\n                [9, 10, 33],\r\n                [10, 10, 27],\r\n                [11, 10, 29],\r\n                [12, 10, 28],\r\n                [13, 10, 25],\r\n                [14, 10, 22],\r\n                [15, 10, 32],\r\n                [16, 10, 43],\r\n                [19, 10, 40],\r\n                [20, 10, 49],\r\n                [21, 10, 34],\r\n                [22, 10, 42],\r\n                [23, 10, 46],\r\n                [25, 10, 45],\r\n                [29, 10, 50],\r\n            ],\r\n            color: '#8DB25D',\r\n        },\r\n        {\r\n            name: '良',\r\n            data: [\r\n                [0, 0, 54],\r\n                [1, 0, 54],\r\n                [20, 0, 60],\r\n                [21, 0, 80],\r\n                [22, 0, 69],\r\n                [23, 0, 53],\r\n                [31, 0, 66],\r\n                [0, 1, 98],\r\n                [1, 1, 56],\r\n                [4, 1, 62],\r\n                [7, 1, 71],\r\n                [8, 1, 67],\r\n                [9, 1, 56],\r\n                [12, 1, 57],\r\n                [13, 1, 56],\r\n                [14, 1, 51],\r\n                [17, 1, 55],\r\n                [26, 1, 51],\r\n                [27, 1, 57],\r\n                [28, 1, 95],\r\n                [29, 1, 59],\r\n                [1, 2, 93],\r\n                [2, 2, 57],\r\n                [3, 2, 66],\r\n                [4, 2, 52],\r\n                [5, 2, 71],\r\n                [6, 2, 77],\r\n                [8, 2, 93],\r\n                [14, 2, 82],\r\n                [15, 2, 71],\r\n                [16, 2, 92],\r\n                [17, 2, 80],\r\n                [18, 2, 58],\r\n                [23, 2, 74],\r\n                [24, 2, 55],\r\n                [25, 2, 100],\r\n                [29, 2, 63],\r\n                [30, 2, 68],\r\n                [1, 3, 76],\r\n                [2, 3, 55],\r\n                [3, 3, 59],\r\n                [4, 3, 64],\r\n                [5, 3, 74],\r\n                [6, 3, 55],\r\n                [7, 3, 69],\r\n                [8, 3, 91],\r\n                [10, 3, 93],\r\n                [11, 3, 79],\r\n                [14, 3, 63],\r\n                [15, 3, 72],\r\n                [16, 3, 93],\r\n                [17, 3, 94],\r\n                [19, 3, 72],\r\n                [20, 3, 73],\r\n                [21, 3, 79],\r\n                [24, 3, 52],\r\n                [27, 3, 69],\r\n                [28, 3, 68],\r\n                [29, 3, 80],\r\n                [30, 3, 89],\r\n                [0, 4, 77],\r\n                [1, 4, 70],\r\n                [2, 4, 95],\r\n                [3, 4, 64],\r\n                [4, 4, 87],\r\n                [5, 4, 88],\r\n                [10, 4, 55],\r\n                [12, 4, 54],\r\n                [13, 4, 60],\r\n                [14, 4, 62],\r\n                [17, 4, 58],\r\n                [20, 4, 74],\r\n                [0, 5, 51],\r\n                [2, 5, 54],\r\n                [3, 5, 70],\r\n                [8, 5, 55],\r\n                [9, 5, 54],\r\n                [11, 5, 83],\r\n                [12, 5, 88],\r\n                [13, 5, 72],\r\n                [14, 5, 81],\r\n                [15, 5, 65],\r\n                [16, 5, 58],\r\n                [18, 5, 53],\r\n                [19, 5, 99],\r\n                [20, 5, 56],\r\n                [21, 5, 73],\r\n                [22, 5, 78],\r\n                [23, 5, 96],\r\n                [24, 5, 64],\r\n                [26, 5, 81],\r\n                [27, 5, 99],\r\n                [0, 6, 53],\r\n                [2, 6, 51],\r\n                [6, 6, 51],\r\n                [11, 6, 60],\r\n                [14, 6, 78],\r\n                [16, 6, 59],\r\n                [17, 6, 63],\r\n                [18, 6, 54],\r\n                [19, 6, 52],\r\n                [21, 6, 58],\r\n                [22, 6, 53],\r\n                [26, 6, 84],\r\n                [27, 6, 81],\r\n                [28, 6, 67],\r\n                [3, 7, 75],\r\n                [4, 7, 60],\r\n                [7, 7, 92],\r\n                [8, 7, 73],\r\n                [9, 7, 53],\r\n                [16, 7, 57],\r\n                [19, 7, 54],\r\n                [20, 7, 54],\r\n                [22, 7, 60],\r\n                [23, 7, 89],\r\n                [26, 7, 62],\r\n                [27, 7, 53],\r\n                [28, 7, 77],\r\n                [29, 7, 58],\r\n                [1, 8, 54],\r\n                [2, 8, 56],\r\n                [3, 8, 69],\r\n                [4, 8, 88],\r\n                [5, 8, 53],\r\n                [9, 8, 67],\r\n                [17, 8, 52],\r\n                [18, 8, 61],\r\n                [19, 8, 55],\r\n                [20, 8, 54],\r\n                [21, 8, 53],\r\n                [22, 8, 60],\r\n                [23, 8, 51],\r\n                [3, 9, 64],\r\n                [9, 9, 51],\r\n                [10, 9, 51],\r\n                [11, 9, 53],\r\n                [12, 9, 54],\r\n                [13, 9, 56],\r\n                [28, 9, 59],\r\n                [17, 10, 58],\r\n                [18, 10, 54],\r\n                [24, 10, 81],\r\n                [26, 10, 67],\r\n                [27, 10, 58],\r\n                [28, 10, 53],\r\n            ],\r\n            color: '#DBCE66',\r\n        },\r\n        {\r\n            name: '轻度',\r\n            data: [\r\n                [5, 1, 112],\r\n                [6, 1, 118],\r\n                [9, 2, 146],\r\n                [19, 2, 101],\r\n                [20, 2, 125],\r\n                [21, 2, 131],\r\n                [0, 3, 101],\r\n                [9, 3, 101],\r\n                [12, 3, 109],\r\n                [13, 3, 120],\r\n                [22, 3, 109],\r\n                [25, 3, 101],\r\n                [26, 3, 113],\r\n                [29, 5, 116],\r\n                [15, 6, 103],\r\n                [5, 7, 127],\r\n                [6, 7, 137],\r\n            ],\r\n            color: '#F49028',\r\n        },\r\n        {\r\n            name: '中度',\r\n            data: [\r\n                [11, 2, 171],\r\n                [22, 2, 163],\r\n                [26, 2, 152],\r\n            ],\r\n            color: '#F35654',\r\n        },\r\n        {\r\n            name: '重度',\r\n            data: [\r\n                [10, 2, 223],\r\n                [28, 5, 204],\r\n            ],\r\n            color: '#B255C5',\r\n        },\r\n        { name: '严重', data: [], color: '#F53362' },\r\n    ],\r\n};\r\n\r\n// AQI 等级\r\nconst AQI_LEVELS = [\r\n    {\r\n        icon: 'k1',\r\n        label: '优',\r\n        otherName: '一级',\r\n        value: 1,\r\n        min: 0,\r\n        max: 50,\r\n        proposal: '空气质量令人满意，基本无空气污染',\r\n        influence: '各类人群可正常活动',\r\n        color: '#8DB25D',\r\n        lightColor: '#D2F5A5',\r\n    },\r\n    {\r\n        icon: 'k2',\r\n        label: '良',\r\n        otherName: '二级',\r\n        value: 2,\r\n        min: 51,\r\n        max: 100,\r\n        proposal: '空气质量可接受，但某些污染物可能对极少数异常敏感人群健康有较弱影响',\r\n        influence: '极少数异常敏感人群应减少户外活动',\r\n        color: '#DBCE66',\r\n        lightColor: '#EBEBD8',\r\n    },\r\n    {\r\n        icon: 'k3',\r\n        label: '轻度',\r\n        otherName: '三级',\r\n        value: 3,\r\n        min: 101,\r\n        max: 150,\r\n        proposal: '易感人群症状有轻度加剧，健康人群出现刺激症状',\r\n        influence: '儿童、老年人及心脏病、呼吸系统疾病患者应减少长时间、高强度的户外锻炼',\r\n        color: '#F49028',\r\n        lightColor: '#F2E1C7',\r\n    },\r\n    {\r\n        icon: 'k4',\r\n        label: '中度',\r\n        otherName: '四级',\r\n        value: 4,\r\n        min: 151,\r\n        max: 200,\r\n        proposal: '进一步加剧易感人群症状，可能对健康人群心脏、呼吸系统有影响',\r\n        influence: '儿童、老年人及心脏病、呼吸系统疾病患者避免长时间、高强度的户外锻炼，一般人群适量减少户外运动',\r\n        color: '#F35654',\r\n        lightColor: '#F3D3D3',\r\n    },\r\n    {\r\n        icon: 'k5',\r\n        label: '重度',\r\n        otherName: '五级',\r\n        value: 5,\r\n        min: 201,\r\n        max: 300,\r\n        proposal: '心脏病和肺病患者症状显著加剧，运动耐受力降低，健康人群普遍出现症状',\r\n        influence: '儿童、老年人及心脏病、肺病患者应停留在室内，停止户外运动，一般人群减少户外运动',\r\n        color: '#B255C5',\r\n        lightColor: '#E5D2ED',\r\n    },\r\n    {\r\n        icon: 'k6',\r\n        label: '严重',\r\n        otherName: '六级',\r\n        value: 6,\r\n        min: 301,\r\n        max: '+',\r\n        proposal: '健康人群运动耐受力降低，有明显强烈症状，提前出现某些疾病',\r\n        influence: '儿童、老年人和病人应停留在室内，避免体力消耗，一般人群避免户外活动',\r\n        color: '#F53362',\r\n        lightColor: '#F3CBD7',\r\n    },\r\n];\r\n\r\n/**\r\n * @description 获取AQI等级\r\n * @params {number} value\r\n */\r\nconst getLevel = (value) => {\r\n    let index = 0;\r\n    if (!value || value <= 50) index = 0;\r\n    if (value > 50 && value <= 100) index = 1;\r\n    if (value > 100 && value <= 150) index = 2;\r\n    if (value > 150 && value <= 200) index = 3;\r\n    if (value > 200 && value <= 300) index = 4;\r\n    if (value > 300) index = 5;\r\n    return { index, ...AQI_LEVELS[index] };\r\n};\r\n\r\n// 获取悬浮提示元素\r\nconst getTooltipRow = (params, isHideEmpty = false) => {\r\n    if (isHideEmpty && !params.value) return '';\r\n    return `\r\n  <div style=\"display: flex; justify-content: space-between; min-width: 80px; padding-top: 3px;\">\r\n    <span style=\"${params.marker ? '' : 'padding-left: 18px'}\">${params.marker || ''} ${params.seriesName}</span>\r\n    <span style=\"padding-left: 10px; font-weight: bold;\">${params.value || '-'}</span>\r\n  </div>`;\r\n};\r\n\r\nconst visualMapPieces = AQI_LEVELS.map(({ min, max, color }) => ({ min, max, color }));\r\n\r\noption = {\r\n    title: {\r\n        text: '最近12个月空气质量分布',\r\n        left: 'center',\r\n        textStyle: {\r\n            fontWeight: 'bold',\r\n            fontFamily: 'Microsoft YaHei',\r\n            fontSize: 18,\r\n        },\r\n    },\r\n    tooltip: {\r\n        position: 'top',\r\n        formatter: (params) => {\r\n            const dateStr = `${dataOrigin.yAxisData[params.data[1]]}-${params.name}`;\r\n            const value = {\r\n                marker: params.marker,\r\n                seriesName: getLevel(params.data[2]).label,\r\n                value: params.data[2] || '-',\r\n            };\r\n            return `${dateStr}<br />${getTooltipRow(value)}`;\r\n        },\r\n    },\r\n    grid: {\r\n        top: 40,\r\n        left: 65,\r\n        right: 15,\r\n        bottom: 65,\r\n    },\r\n    visualMap: {\r\n        show: false,\r\n        pieces: visualMapPieces,\r\n    },\r\n    legend: {\r\n        show: true,\r\n        icon: 'circle',\r\n        bottom: 10,\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        data: dataOrigin.xAxisData,\r\n        axisLine: {\r\n            show: false,\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitArea: {\r\n            show: true,\r\n        },\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        data: dataOrigin.yAxisData,\r\n        axisLine: {\r\n            show: false,\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitArea: {\r\n            show: true,\r\n        },\r\n    },\r\n    series: dataOrigin.seriesDatas.map(({ name, data, color }) => ({\r\n        name,\r\n        data,\r\n        type: 'heatmap',\r\n        label: {\r\n            show: true,\r\n        },\r\n        itemStyle: {\r\n            color,\r\n            borderColor: '#fff',\r\n            borderWitdh: 5,\r\n            borderCap: 'round',\r\n        },\r\n    })),\r\n};\r\n","html":"","externalScripts":"","updaterUID":"obd-ol9ApUNzruRtm2D-0e5Fb-FETwsWF0O","theme":"","layout":"","viewCount":0,"userName":"相***光","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9DprMCvZJ.png?v=1635406779812","isCustomThumbnail":1,"builtinTags":["category-work","grid","legend","series-heatmap","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"相***光"}}