{"status":0,"data":{"cid":"xyWmG0SLK","authorUid":"bd-4161428444","authorUserName":"b***n","title":"动态渐变折线区域图","description":"GDP增长率(定时刷新过滤数据)","latestVersion":14,"alwaysLatest":1,"createTime":"2019-12-03T06:21:18.000Z","lastUpdateTime":"2019-12-03T06:21:18.000Z","auth":2,"uid":"bd-4161428444","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":14,"parentVersion":13,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-24T04:25:09.000Z","code":"//声明数据\nvar arrData = [{\n        name: '2010',\n        value: 200,\n        growth: '3.5%' //自定义参数\n    },{\n        name: '2011',\n        value: 400,\n        growth: '4.0%'\n    },{\n        name: '2012',\n        value: 400,\n        growth: '4.7%'\n    },{\n        name: '2013',\n        value: 600,\n        growth: '4.75%'\n    },{\n        name: '2014',\n        value: 500,\n        growth: '4.8%'\n    },{\n        name: '2015',\n        value: 700,\n        growth: '4.9%'\n    },{\n        name: '2016',\n        value: 1000,\n        growth: '5.2%'\n    },{\n        name: '2017',\n        value: 400,\n        growth: '5.3%'\n    },{\n        name: '2018',\n        value: 600,\n        growth: '5.4%'\n    },{\n        name: '2019',\n        value: 700,\n        growth: '5.5%'\n    }];\n    \n//①先设置默认辅助数组\nvar newData = [],\n    maxData = [];\nfor(var n=0; n< arrData.length; n++){\n    newData.push(arrData[n]);\n    maxData.push(null);\n} \n//console.log(newData);\n//console.log(maxData)\n\n//图表\nvar option = {\n    backgroundColor: '#0d073d',\n    title: {\n        text: 'GDP增长率',\n        textStyle: {\n            color: '#fff',\n            fontSize: 16,\n            fontWeight: 400\n        },\n        itemGap: 5,\n        subtext: '定时过滤',\n        subtextStyle: {\n            color: '#fff',\n            fontSize: 14,\n            fontWeight: 400\n        },\n        x: 'center',\n        y: 5,\n    },\n    tooltip: {\n        trigger: 'axis',\n        backgroundColor:'rgba(14,42,59,0.6)',\n        borderColor:'#59dcff',\n        borderWidth: 1,\n        borderRadius: 0,\n        textStyle: {\n            color: \"#fff\",\n            fontSize: 14,\n            align:'left'\n        },\n        axisPointer:{\n            type: 'line', //'line' | 'cross' | 'shadow' | 'none\n            lineStyle: {\n                width: 1,\n                type: 'dotted',\n                color: 'rgba(255,255,255,.618)'\n            }\n        },\n        confine: true, //是否将 tooltip 框限制在图表的区域内\n        position: function(point, params, dom, rect, size) {\n            // 固定在顶部\n            return [point[0], point[1] - 80];\n        },\n        formatter: function(params){  //console.log(params)\n            var res = params[0].name+ '年：<br/>总量：'+ params[0].value +'亿元'+'<br/>增速：'+params[0].data.growth;\n            return res;\n        }\n    },\n    grid: {\n        top:'15%',\n        right: '5%',\n        bottom: '10%',\n        left: '8%'\n    },\n    legend: {\n        show: false\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false, //边界间隙\n        axisLabel: {\n            interval: 0, //类目间隔 设置为 1，表示『隔一个标签显示一个标签』\n            margin: 5,\n            textStyle: {\n                color: '#fff',\n                fontStyle: 'normal',\n                fontFamily: '微软雅黑',\n                fontSize: 12,\n            },\n            formatter: '{value}'\n        },\n        axisLine:{\n            lineStyle:{\n                color:'#879dac' //x轴线\n            }\n        },\n        splitArea: {\n            show: true,\n            areaStyle: {\n                color: ['rgba(0, 41, 77, .618)', 'rgba(1, 35, 65, .618)']\n            }\n        },\n        data: (function(data){\n            var arr=[];\n            data.forEach(function(items){\n                arr.push(items.name);   \n            });\n            return arr;\n        })(arrData) //载入横坐标数据\n    },\n    yAxis: {\n        type: 'value',\n        max: 1200, //设置最大值\n        axisLine: {\n            lineStyle: {\n                color: '#879dac'\n            }\n        },\n        axisLabel: {\n            textStyle: {\n                color: '#fff',\n                fontStyle: 'normal',\n                fontFamily: '微软雅黑',\n                fontSize: 12,\n            },\n            formatter: '{value}'\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: 'rgba(34, 63, 90, .618)', //横向网格线颜色\n                type: 'dashed',\n                width: 1\n            }\n        }\n    },\n    color:['rgba(0,175,255,1)','rgba(0,218,204,1)'],\n    series: [\n        {\n            name: '1',\n            type: 'line',\n            smooth: false, //是否曲线\n            animationDuration: 1000,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(0,175,255,1)',\n                    borderColor: 'rgba(0,175,255,1)'\n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: 'rgba(0,175,255,1)',\n                    width: 3,\n                }\n            },\n            areaStyle: { \n                normal: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1,[\n                        {offset: 0, color: 'rgba(0,175,255,1)'},\n                        {offset: 1, color: 'transparent'}\n                    ]), //区域渐变颜色\n                    opacity: .8\n                }\n            },\n            symbol: 'circle',\n            symbolSize: 3,\n            z: 1,\n            data: arrData //载入数据\n        },\n        {\n            name: '2',\n            type: 'line',\n            smooth: false, \n            itemStyle: {\n                normal: {\n                    color: 'rgba(0,175,255,1)',\n                    borderColor: 'rgba(0,175,255,1)'\n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: 'rgba(0,175,255,1)',\n                    width: 3,\n                }\n            },\n            areaStyle: { \n                normal: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1,[\n                        {offset: 0, color: 'rgba(0,175,255,1)'},\n                        {offset: 1, color: 'transparent'}\n                    ]), //区域渐变颜色\n                    opacity: .8\n                }\n            },\n            symbol: 'emptyCircle',\n            symbolSize: 3,\n            data: newData //载入数据\n        },\n        {\n            name: '3',\n            type: 'line',\n            smooth: false, \n            animationDuration: 1000,\n            itemStyle: {\n                normal: {\n                    color: '0,218,204', \n                    borderColor: \"rgba(0,159,146,0)\"\n                }\n            },\n            lineStyle: {\n                normal: {\n                    type: \"solid\",\n                    width: 0,\n                    color: 'rgba(0,218,204,1)'\n                }\n            },\n            areaStyle: { \n                normal: {\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 1,\n                        y2: 0,\n                        colorStops: [{\n                            offset: 0,\n                            color: 'rgba(96,250,250,0)'\n                        }, {\n                            offset: 1,\n                            color: 'rgba(96,250,250, .35)'\n                        }]\n                    },\n                    opacity: .8\n                }\n            },\n            symbol: 'none',\n            symbolSize: 3,\n            data: maxData //载入数据\n        }\n    ]\n};\n\n// 使用刚指定的配置项和数据显示图表。\nmyChart.setOption(option);\n\n\nvar app = {\n    currentIndex: -1, //init Time\n};\n//定时\nsetInterval(function(){\n    var dataLen = option.series[0].data.length;\n    // 取消之前高亮的图形\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: app.currentIndex\n    });\n    app.currentIndex = (app.currentIndex + 1) % dataLen;  //循环时间与数组总个数进行匹配\n\n    var maxNum = option.yAxis.max; //取得最大值\n    \n    if (app.currentIndex == 0) {\n        maxData.splice(0, dataLen, null);\n        newData.splice(0, dataLen, null);\n    }\n    //②修改动画变色辅助数据\n    newData.splice(app.currentIndex, 1, arrData[app.currentIndex]);\n    //console.log(newData)\n    maxData.splice(app.currentIndex, 1, maxNum);\n    //console.log(maxData)\n\n    myChart.setOption({\n        series: [\n            {\n                name: '2',\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(255,0,102,1)', //图标点颜色\n                        borderColor: 'rgba(255,0,102,1)'\n                    }\n                },\n                lineStyle: {\n                    normal: {\n                        color: 'rgba(255,0,102,1)',\n                        width: 3,\n                    }\n                },\n                areaStyle: { \n                    normal: {\n                        color: {\n                            type: 'linear',\n                            x: 0,\n                            y: 0,\n                            x2: 0,\n                            y2: 1,\n                            colorStops: [{\n                                offset: 0,\n                                color: 'rgba(255,0,102,1)'\n                            }, {\n                                offset: 1,\n                                color: 'rgba(255,0,102,0)'\n                            }]\n                        },\n                        opacity: .9\n                    }\n                }, \n                data: newData //载入图形变色的数据\n            }, \n            {\n                name: '3',\n                data: maxData //载入数据\n            }\n        ]\n    });\n\n    // 高亮当前图形\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: app.currentIndex,\n    });\n\n    //tooltip\n    myChart.dispatchAction({\n        type: 'showTip', //showTip 显示 , hideTip 隐藏\n        seriesIndex: 0,\n        dataIndex: app.currentIndex\n    });\n\n}, 1000);","html":"","externalScripts":"","updaterUID":"bd-4161428444","theme":"","layout":"","viewCount":463,"userName":"b***n","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xyWmG0SLK.png?v=1606191909664","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","tooltip"],"customTags":[],"updaterUserName":"b***n"}}