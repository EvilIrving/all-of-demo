{"status":0,"data":{"cid":"xIMNmbim7m","authorUid":"obd-o-WSxtW8i10muVN-fGvypxP_ZFl9SAL","authorUserName":"j***g","title":"时间坐标轴+自定义渲染","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-29T07:06:05.000Z","lastUpdateTime":"2020-06-29T07:06:05.000Z","auth":1,"uid":"obd-o-WSxtW8i10muVN-fGvypxP_ZFl9SAL","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-29T07:06:22.000Z","code":"const _colorList = [\r\n    'rgba(193,46,52,0.7)',\r\n    'rgba(230,182,0,0.7)',\r\n    'rgba(0,152,217,0.7)',\r\n    'rgba(43,130,29,0.7)',\r\n    'rgba(0,94,170,0.7)',\r\n    'rgba(51,156,168,0.7)',\r\n    'rgba(205,168,25,0.7)',\r\n    'rgba(50,164,135,0.7)',\r\n    'rgba(79,129,189,0.7)',\r\n    'rgba(192,80,77,0.7)',\r\n    'rgba(155,187,89,0.7)',\r\n    'rgba(96,74,123,0.7)',\r\n    'rgba(148,138,84,0.7)',\r\n    'rgba(228,108,11,0.7)'\r\n]\r\n\r\nvar data = []\r\nvar oneDay = 24 * 3600 * 1000\r\nvar fiveMinutes = 1800 * 1000\r\nvar count = oneDay / fiveMinutes\r\nvar timestr = '2019/6/1 00:00:00'\r\nvar startTime = +new Date(timestr) - fiveMinutes\r\n\r\nfunction randomData(now) {\r\n    var value = Math.floor(Math.random() * 10)\r\n\r\n    return {\r\n        name: now.toString(),\r\n        value: [now.toLocaleDateString() + ' ' + now.getHours() + now.toLocaleTimeString().substr(-6, 6), value]\r\n    }\r\n}\r\n//\r\n// var now = +new Date(2020, 6, 29)\r\n// var oneDay = 24 * 3600 * 1000\r\n\r\nfor (var i = 0; i <= count; i++) {\r\n    startTime = new Date(+startTime + fiveMinutes)\r\n    data.push(randomData(startTime))\r\n}\r\n\r\noption = {\r\n    title: {\r\n        text: '动态数据 + 时间坐标轴'\r\n    },\r\n    // tooltip: {\r\n    //   trigger: 'axis',\r\n    //   formatter: function(params) {\r\n    //     params = params[0]\r\n    //     var date = new Date(params.name)\r\n    //     return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value[1]\r\n    //   },\r\n    //   axisPointer: {\r\n    //     animation: false\r\n    //   }\r\n    // },\r\n    grid: [{\r\n            top: 80,\r\n            left: 50,\r\n            bottom: 30,\r\n            right: 50\r\n        },\r\n        {\r\n            top: 80,\r\n            left: 50,\r\n            right: 50,\r\n            height: 150\r\n        }\r\n    ],\r\n    dataZoom: [{\r\n            top: 230,\r\n            left: 50,\r\n            type: 'slider', // 数据滑块\r\n            xAxisIndex: 0,\r\n            start: 0,\r\n            minSpan: 8, // 5min\r\n            // minSpan:16,   //10min\r\n            // minSpan:24,   //15min\r\n            // minSpan:50,   //30min\r\n            dataBackground: {\r\n                lineStyle: {\r\n                    color: '#95BC2F'\r\n                },\r\n                areaStyle: {\r\n                    color: '#95BC2F',\r\n                    opacity: 1\r\n                }\r\n            },\r\n            fillerColor: 'rgba(255,255,255,.6)'\r\n        },\r\n        {\r\n            type: 'inside', // 使鼠标在图表中时滚轮可用\r\n            xAxisIndex: 0\r\n        }\r\n    ],\r\n    xAxis: {\r\n        type: 'time',\r\n        position: 'top',\r\n        gridIndex: 1,\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        gridIndex: 1,\r\n        inverse: true,\r\n        show: false,\r\n        min: 0,\r\n        max: 10\r\n    },\r\n    series: [{\r\n        name: '模拟数据',\r\n        type: 'custom',\r\n        renderItem: (params, api) => {\r\n            var color = _colorList[api.value(1)]\r\n            var xStart = api.value(0)\r\n            var xEnd = api.value(0)\r\n            if (params.dataIndex + 1 !== data.length) {\r\n                xEnd = new Date(data[params.dataIndex + 1].value[0]).getTime()\r\n            }\r\n            var scaleStart = api.coord([xStart, 0])\r\n            var scaleSize = api.size([xEnd - xStart, 10])\r\n\r\n            return {\r\n                type: 'rect',\r\n                shape: {\r\n                    x: scaleStart[0],\r\n                    y: scaleStart[1],\r\n                    width: scaleSize[0],\r\n                    height: scaleSize[1]\r\n                },\r\n                style: api.style({\r\n                    fill: color\r\n                })\r\n            }\r\n        },\r\n        data: data\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o-WSxtW8i10muVN-fGvypxP_ZFl9SAL","theme":"","layout":"","viewCount":463,"userName":"j***g","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIMNmbim7m.png?v=1593414382116","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-custom","title"],"customTags":[],"updaterUserName":"j***g"}}