{"status":0,"data":{"cid":"xYS-YtzOaf","authorUid":"bd-2894480899","authorUserName":"蓝***y","title":"echarts迁徙图","description":"http://datav.aliyun.com/tools/atlas,\n阿里云地图选择器,自己下载想要的省市json包引入,然后改下示例相应代码就好了","latestVersion":8,"alwaysLatest":1,"createTime":"2019-06-10T08:21:01.000Z","lastUpdateTime":"2019-12-24T05:45:30.000Z","auth":2,"uid":"bd-2894480899","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":5,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-24T08:27:36.000Z","code":"// http://datav.aliyun.com/tools/atlas 阿里云地图选择器 下载需要的数据包\n// 左上角 导入数据 插入到代码\nvar uploadedDataURL = \"/asset/get/s/data-1573454139932-lW0kO573.json\"\n\n// 标记点\nvar geoCoordMap = {\n    '西安': [108.948024, 34.263161],\n    '铜川': [108.979608, 35.016582],\n    '宝鸡': [107.14487, 34.369315],\n    '咸阳': [108.685117, 34.533439],\n    '渭南': [109.802882, 34.499381],\n    '延安': [109.49081, 36.596537],\n    '汉中': [107.028621, 33.077668],\n    '榆林': [109.741193, 38.290162],\n    '安康': [109.029273, 32.6903],\n    '商洛': [109.939776, 33.868319]\n}\n\n//  给value一个随机值\nvar mapData = []\nfor (var key in geoCoordMap) {\n    mapData.push({\n        'name': key,\n        'value': parseInt((Math.random() + 1) * 150)\n    })\n}\n\n// 输出json对象数组,value里包含坐标值和随机值\nfunction convertData (data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name]\n        res.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value)\n        })\n    }\n    return res\n}\n\n//  设置目标点, 配置线条指向\nfunction convertToLineData (data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        // 起点\n        var fromCoord = geoCoordMap[data[i].name]\n        //  终点,这里设置的西安\n        var toCoord = [108.948024, 34.263161]\n        res.push([\n            {\n                coord: fromCoord,\n                value: data[i].value\n            },\n            {\n                coord: toCoord\n            }\n        ])\n    }\n    return res\n}\n\n// 解析地图数据包\n$.getJSON(uploadedDataURL, function (geoJson) {\n    // 注册地图,传入数据\n    echarts.registerMap('echarts', geoJson)\n    \n    optionMap = {\n        timeline: {\n            show: false\n        },\n        baseOption: {\n            // 设置地图参数和样式\n            geo: {\n                show: true,\n                map: 'echarts',\n                roam: true,\n                zoom: 1,\n                // 地图中心点, 可调节显示的偏移量\n                center: [108.348024, 35.463161],\n                label: {\n                    // 高亮文字隐藏\n                    emphasis: {\n                        show: false\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        borderColor: '#FF0000',\n                        borderWidth: 1,\n                        areaColor: {\n                            type: 'radial',\n                            x: 0.5,\n                            y: 0.5,\n                            r: 0.8,\n                            colorStops: [{\n                                offset: 0,\n                                // 0% 处的颜色\n                                color: 'rgba(0, 0, 0, 0)'\n                            },\n                            {\n                                offset: 1,\n                                // 100% 处的颜色\n                                color: 'rgba(0, 0, 0, .3)'\n                            }]\n                        },\n                        shadowColor: 'rgba(0, 0, 0, 1)',\n                        shadowOffsetX: -2,\n                        shadowOffsetY: 2,\n                        shadowBlur: 10\n                    },\n                    emphasis: {\n                        // 鼠标悬浮高亮\n                        areaColor: 'gray',\n                        borderWidth: 0\n                    }\n                }\n            }\n        },\n        options: [{\n            backgroundColor: '#4A4A4A',\n            xAxis: {\n                show: false\n            },\n            yAxis: {\n                show: false\n            },\n            series: [{\n                // 坐标点参数和样式\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(mapData),\n                symbolSize: function (val) {\n                    return val[2] / 10\n                },\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#FF4500',\n                        shadowBlur: 10,\n                        shadowColor: '#FF4500'\n                    }\n                }\n            },\n            {\n                // 线条参数和样式\n                type: 'lines',\n                // 变化频率\n                zlevel: 2,\n                effect: {\n                    show: true,\n                    // 箭头指向速度，值越小速度越快\n                    period: 4,\n                    // 特效尾迹长度,取值0到1,值越大,尾迹越长\n                    trailLength: 0.05,\n                    symbol: 'arrow',\n                    // 图标大小\n                    symbolSize: 5\n                },\n                lineStyle: {\n                    normal: {\n                        color: '#FF4500',\n                        // 尾迹线条宽度\n                        width: 1,\n                        // 尾迹线条透明度\n                        opacity: 1,\n                        // 尾迹线条曲直度\n                        curveness: 0.3\n                    }\n                },\n                data: convertToLineData(mapData)\n            }]\n        }]\n    }\n    myChart.setOption(optionMap)\n})\n","html":"","externalScripts":"","updaterUID":"bd-2894480899","theme":"default","layout":"","viewCount":6566,"userName":"蓝***y","commentCount":10,"starCount":18,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYS-YtzOaf.png?v=1573458900975","isCustomThumbnail":1,"builtinTags":["category-work","geo","grid","series-effectScatter","series-lines","timeline"],"customTags":["迁徙","迁移"],"updaterUserName":"蓝***y"}}