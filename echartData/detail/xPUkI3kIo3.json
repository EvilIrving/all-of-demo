{"status":0,"data":{"cid":"xPUkI3kIo3","authorUid":"obd-oPvAw3eyT790Rz8XPfsJ7mzbB5LYp91","authorUserName":"林***天","title":"图形分析图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-13T06:17:21.000Z","lastUpdateTime":"2021-08-13T06:17:21.000Z","auth":1,"uid":"obd-oPvAw3eyT790Rz8XPfsJ7mzbB5LYp91","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-13T06:17:21.000Z","code":"const mockData = [\r\n    {total: \"550\", detail: \"test1\"},\r\n    {total: \"106\", detail: \"test2\"},\r\n    {total: \"275\", detail: \"test3\"},\r\n    {total: \"222\", detail: \"test4\"},\r\n    {total: \"0\", detail: \"test5\"},\r\n]\r\n//接口总数和标题文字\r\nlet value = 1288;\r\nlet title = '总数量';\r\noption = {\r\n    //中间圆形的 文字位置\r\n     title: {\r\n        text: '{a|' + value + '}\\n{c|' + title + '}',\r\n        x: '29.5%',\r\n        y: '47%',\r\n        textAlign:'center',\r\n        textStyle: {\r\n            rich: {\r\n                a: {\r\n                    fontSize: 30,\r\n                    color: '#000',\r\n                    fontWeight:'600',\r\n                },\r\n                c: {\r\n                    fontSize:14,\r\n                    color: '#555',\r\n                    padding: [5, 0]\r\n                }\r\n            }\r\n        }\r\n    }, \r\n    grid: {\r\n        left: 0\r\n    },\r\n     tooltip: {\r\n        trigger: 'item'\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: '25%',\r\n        left: '50%',\r\n        data: mockData.map(item => item.detail), \r\n        icon: 'circle',\r\n        formatter: params => { \r\n            const dataAll = mockData.map(item => Number(item.total))\r\n            const total = dataAll.reduce((x, y) => parseInt(x, 10) + parseInt(y, 10))\r\n            const value = Number(mockData.filter(item => item.detail === params)[0].total)\r\n            if (total === 0) {\r\n                return `{c|0}{d|个}{b|0%)}\\n{a|${name}}`\r\n            }\r\n            const name = params\r\n            return `\\n\\n{c|${value}}{d|个}{b|(${((value * 100) / total).toFixed(2)}%)}\\n{a|${name}}`\r\n        },\r\n        textStyle: {\r\n            rich: {\r\n                a: {\r\n                    color: '#847777e0',\r\n                    width: 120,\r\n                    fontSize: 14,\r\n                    fontWeight: 'bold',\r\n                    align: 'left',\r\n                    padding: [5, 0]\r\n                },\r\n                b: {\r\n                    color: '#847777e0',\r\n                    fontSize: 14,\r\n                    fontWeight: 'bold',\r\n                },\r\n                 c: {\r\n                    color: '#18355C',\r\n                    fontSize: 20,\r\n                    fontWeight: 'bold',\r\n                }, d: {\r\n                    color: '#18355C',\r\n                    fontSize: 14,\r\n                    fontWeight: 'bold',\r\n                }\r\n            }\r\n        },  \r\n        selectorPosition: 'start',\r\n        align: 'left',\r\n        itemHeight: 18,\r\n        itemWidth: 12,\r\n        itemGap: 0\r\n    },\r\n    series: [\r\n        {\r\n            name: '',\r\n            type: 'pie',\r\n            radius: ['42%', '30%'],\r\n            center: ['30%', '50%'],\r\n            clockwise: false,\r\n            avoidLabelOverlap: false,\r\n            hoverOffset: 10,\r\n            legendHoverLink: true,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: '#ffffff',\r\n                }\r\n            },\r\n            data: [\r\n                { \r\n                    value: mockData[0].total,\r\n                    name: mockData[0].detail,\r\n                    tooltip: formatterVal()\r\n                },\r\n                { \r\n                    value: mockData[1].total,\r\n                    name: mockData[1].detail,\r\n                    tooltip: formatterVal()\r\n                },\r\n                { \r\n                    value: mockData[2].total,\r\n                    name: mockData[2].detail,\r\n                    tooltip: formatterVal()\r\n                },\r\n                { \r\n                    value: mockData[3].total,\r\n                    name: mockData[3].detail,\r\n                    tooltip: formatterVal()\r\n                },\r\n                { \r\n                    value: mockData[4].total,\r\n                    name: mockData[4].detail,\r\n                    tooltip: formatterVal()\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            type: 'pie',\r\n            radius: [0, '25%'],\r\n            hoverAnimation: false,\r\n            clockWise: false,\r\n            center: ['30%', '50%'],\r\n            tooltip: {\r\n            formatter:  title +'：' + value,\r\n            textStyle: {\r\n                color: '#000'\r\n            },\r\n            backgroundColor: '#fff',\r\n            extraCssText: 'box-shadow: 0px 0px 10px 0px rgba(19,83,88,0.2);'\r\n            },\r\n           /* tooltip: { //不现实总数的提示\r\n                show: true\r\n            },*/\r\n            itemStyle: {\r\n                normal: {\r\n                    shadowBlur: 6,\r\n                    shadowColor: '#444',\r\n                    color: new echarts.graphic.RadialGradient(0.5, 0.5, 34, [{\r\n                        offset: 0,\r\n                        color: '#FFF',\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#060f20'\r\n                    }])\r\n                }\r\n            },\r\n           label: {\r\n                normal: {\r\n                    show: false,\r\n                },\r\n            },\r\n            data: [100]\r\n        },\r\n    ]\r\n};\r\n\r\nfunction formatterVal(){\r\n return   {\r\n        formatter: '{b}({d}%)',\r\n        textStyle: {\r\n            color: '#000'\r\n        },\r\n        backgroundColor: '#fff',\r\n        extraCssText: 'box-shadow: 0px 0px 10px 0px rgba(19,83,88,0.2);'\r\n    }\r\n}","html":"","externalScripts":"","updaterUID":"obd-oPvAw3eyT790Rz8XPfsJ7mzbB5LYp91","theme":"","layout":"","viewCount":0,"userName":"林***天","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPUkI3kIo3.png?v=1628835442115","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"林***天"}}