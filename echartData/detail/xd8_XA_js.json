{"status":0,"data":{"cid":"xd8_XA_js","authorUid":"bd-3962729940","authorUserName":"y***4","title":"中国地图 散点分布 点击散点触发 自定义样式的 tooltip","description":"中国地图 散点分布 点击散点触发 自定义样式的 tooltip","latestVersion":2,"alwaysLatest":1,"createTime":"2019-10-23T03:25:39.000Z","lastUpdateTime":"2019-10-23T03:25:39.000Z","auth":1,"uid":"bd-3962729940","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-23T03:56:09.000Z","code":"// 中国地图 散点分布 点击散点触发 自定义样式的 tooltip\r\n// 借鉴 https://gallery.echartsjs.com/editor.html?c=xnmZ5X4gCz\r\n\r\n// 散点数据\r\nvar data = [{\r\n        name: \"景山公园\",\r\n        value: [\"116.489356\", \"39.94083\"],\r\n        id: 4,\r\n        code: \"110000Z0004\",\r\n        type: \"Z\",\r\n        date: \"2019-10-01\",\r\n        city: \"北京市\"\r\n    },\r\n    {\r\n        name: \"老城动物园\",\r\n        value: [\"113.489356\", \"36.94083\"],\r\n        id: 3,\r\n        code: \"110000D0003\",\r\n        type: \"D\",\r\n        date: \"2019-10-16\",\r\n        city: \"山西省\",\r\n    },\r\n    {\r\n        name: \"新城植物园\",\r\n        value: [\"114.489356\", \"37.94083\"],\r\n        id: 2,\r\n        code: \"110000D0002\",\r\n        type: \"Z\",\r\n        date: \"2019-10-21\",\r\n        city: \"河北省\",\r\n    }\r\n]\r\noption = {\r\n    backgroundColor: \"#efefef\",\r\n    tooltip: {\r\n        show: true,\r\n        triggerOn: \"none\",\r\n        padding: 0,\r\n        enterable: true,\r\n        transitionDuration: 1,\r\n        textStyle: {\r\n            color: \"#000\",\r\n            decoration: \"none\"\r\n        },\r\n        formatter: function(params) {\r\n            const {\r\n                data\r\n            } = params;\r\n            const type = data.type;\r\n            let typeName = \"\";\r\n            if (type === \"D\") typeName = \"动物园\";\r\n            if (type === \"Z\") typeName = \"植物园\";\r\n            if (type === \"S\") typeName = \"水族馆\";\r\n            if (type === \"B\") typeName = \"濒危动物繁殖中心\";\r\n            if (type === \"Y\") typeName = \"种质资源\";\r\n            if (type === \"Q\") typeName = \"其它\";\r\n            const tipHtml = ` <div style=\"width: 280px; background: rgba(22, 80, 158, 0.8); border: 1px solid rgba(7, 166, 255, 0.7);\">\r\n                                <div style=\"color: #fff; padding: 10px; font-size: 16px; border-bottom: 2px solid #0c8bdd;\">${data.name} (${data.code})</div>\r\n                                <p style=\"color: #fff;padding: 5px 10px;font-size: 14px;\">建设位置：${data.city}</p>\r\n                                <p style=\"color: #fff;padding: 5px 10px;font-size: 14px;\">建设时间：${data.date}</p>\r\n                                <p style=\"color: #fff;padding: 5px 10px;font-size: 14px;\">设施类型：${typeName}</p>\r\n                              </div>`;\r\n            return tipHtml;\r\n        }\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: \"china\",\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                color: \"#fff\"\r\n            },\r\n            emphasis: {\r\n                color: \"#000000\",\r\n                fontSize: 14,\r\n                show: true\r\n            }\r\n        },\r\n        roam: true,\r\n        scaleLimit: {\r\n            min: 1.2,\r\n            max: 15\r\n        },\r\n        zoom: 1.2,\r\n        itemStyle: {\r\n            normal: {\r\n                borderWidth: 1, // 区域边框宽度\r\n                borderColor: \"#029fd4\", // 区域边框颜色\r\n                areaColor: \"#2F639A\" // 区域颜色\r\n            },\r\n            emphasis: {\r\n                areaColor: \"#2F639A\"\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n        name: \"\",\r\n        type: \"scatter\",\r\n        coordinateSystem: \"geo\",\r\n        data: data,\r\n        symbol: \"pin\",\r\n        symbolSize: 30,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: \"#33C481\"\r\n            },\r\n            emphasis: {\r\n                color: \"#f00\"\r\n            }\r\n        }\r\n    }]\r\n};\r\nmyChart.on(\"click\", params => {\r\n    if (params.componentType === \"series\" && params.componentSubType === \"scatter\") {\r\n        const index = params.dataIndex;\r\n        // 取消所有散点高亮\r\n        myChart.dispatchAction({\r\n            type: \"downplay\",\r\n            seriesIndex: 0 //第几条series\r\n        });\r\n        // 显示指定data 的tooltip\r\n        myChart.dispatchAction({\r\n            type: \"showTip\",\r\n            seriesIndex: 0, //第几条series\r\n            dataIndex: index //第几个tooltip\r\n        });\r\n        // 高亮指定的散点\r\n        myChart.dispatchAction({\r\n            type: \"highlight\",\r\n            seriesIndex: 0, //第几条series\r\n            dataIndex: index //第几个tooltip\r\n        });\r\n    }\r\n});","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3962729940","theme":"","layout":"","viewCount":555,"userName":"y***4","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xd8_XA_js.png?v=1571801139538","isCustomThumbnail":1,"builtinTags":["category-work","geo","series-scatter","tooltip"],"customTags":[],"updaterUserName":"y***4"}}