{"status":0,"data":{"cid":"xSkiWuGHGG","authorUid":"bd-1040393267","authorUserName":"唯郁赢","title":"2017双十一交易额（亿元）","description":"数据来源：亿邦智库","latestVersion":1,"alwaysLatest":1,"createTime":"2017-12-18T10:27:14.000Z","lastUpdateTime":"2017-12-18T10:27:14.000Z","auth":2,"uid":"bd-1040393267","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-18T10:27:15.000Z","code":"//好像现在地图都显示不出来QAQ\nvar geoCoordMap = {\n  \"北京\": [116.46, 39.92],\n  \"上海\": [121.48, 31.22],\n  \"杭州\": [120.19, 30.26],\n  \"广州\": [113.23, 23.16],\n  \"深圳\": [114.07, 22.62],\n  \"南京\": [118.78, 32.04],\n  \"苏州\": [120.62, 31.32],\n  \"佛山\": [113.11, 23.05],\n  \"宁波\": [121.56, 29.86],\n  \"泉州\":[118.37, 24.54],\n  \"青岛\": [120.33, 36.07],\n  \"嘉兴\": [120.75, 30.75],\n  \"厦门\": [24.27, 118.06], \n  \"东莞\": [113.75, 23.04],\n  \"武汉\": [114.31, 30.52],\n  \"金华\": [119.38, 29.05],\n  \"天津\": [117.10,39.10],\n  \"成都\": [104.06, 30.67],\n  \"温州\": [120.65,28.01],\n  \"无锡\": [120.29,31.59 ],\n       \n}\n\n var data = [\n { name: \"北京\", value: 655.75},\n { name: \"上海\", value: 389.34},\n { name: \"杭州\", value: 209.02},\n { name: \"广州\", value: 165.89},\n { name: \"深圳\", value: 151.62},\n { name: \"南京\", value: 110.22},\n { name: \"苏州\", value: 103.11},\n { name: \"佛山\", value: 74.16},\n { name: \"宁波\", value: 64.76},\n { name: \"泉州\", value: 38.86},\n { name: \"青岛\", value: 36.32},\n { name: \"嘉兴\", value: 34.54},\n { name: \"厦门\", value: 31.49},\n { name: \"东莞\", value: 31.24},\n { name: \"武汉\", value: 29.46},\n { name: \"金华\", value: 28.70},\n { name: \"天津\", value: 25.40},\n { name: \"成都\", value: 24.13},\n { name: \"温州\", value: 24.13},\n { name: \"无锡\", value: 21.08},\n\n    ]\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nvar convertedData = [\n    convertData(data),\n    convertData(data.sort(function(a, b) {\n        return b.value - a.value;\n    }).slice(0, 6))\n];\ndata.sort(function(a, b) {\n    return a.value - b.value;\n})\n\nvar selectedItems = [];\nvar categoryData = [];\nvar barData = [];\n//   var maxBar = 30;\nvar sum = 0;\nvar count = data.length;\nfor (var i = 0; i < data.length; i++) {\n    categoryData.push(data[i].name);\n    barData.push(data[i].value);\n    sum += data[i].value;\n}\nconsole.log(categoryData);\nconsole.log(sum + \"   \" + count)\n\noption = {\n    backgroundColor: '#404a59',\n    animation: true,\n    animationDuration: 1000,\n    animationEasing: 'cubicInOut',\n    animationDurationUpdate: 1000,\n    animationEasingUpdate: 'cubicInOut',\n    title: [{\n        text: '2017双十一交易额（亿元）',\n        subtext: '数据来源：亿邦智库',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n        }\n    }, {\n        id: 'statistic',\n        text: count ? '平均交易额: ' + parseInt((sum / count).toFixed(4)) : '',\n        right: 120,\n        top: 40,\n        width: 100,\n        textStyle: {\n            color: '#fff',\n            fontSize: 16\n        }\n    }],\n    toolbox: {\n        iconStyle: {\n            normal: {\n                borderColor: '#fff'\n            },\n            emphasis: {\n                borderColor: '#fff'\n            }\n        },\n        feature: {\n            saveAsImage: {\n                show: true\n            }\n        }\n    },\n    geo: {\n        map: 'china',\n        left: '10',\n        right: '35%',\n        center: [117.98561551896913, 31.205000490896193],\n        zoom: 4,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#323c48',\n                borderColor: '#111'\n            },\n            emphasis: {\n                areaColor: '#323c48'\n            }\n        }\n    },\n    tooltip: {\n        trigger: 'item'\n    },\n    grid: {\n        right: 40,\n        top: 100,\n        bottom: 40,\n        width: '30%'\n    },\n    xAxis: {\n        type: 'value',\n        scale: true,\n        position: 'top',\n        boundaryGap: false,\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            margin: 2,\n            textStyle: {\n                color: '#fff'\n            }\n        },\n    },\n    yAxis: {\n        type: 'category',\n        nameGap: 16,\n        axisLine: {\n            show: true,\n            lineStyle: {\n                color: '#ddd'\n            }\n        },\n        axisLabel: {\n            interval: 0,\n            textStyle: {\n                color: '#ddd'\n            }\n        },\n        data: categoryData\n    },\n    series: [{\n   \n        type: 'scatter',\n        coordinateSystem: 'geo',\n        data: convertedData[0],\n        symbolSize: function(val) {\n            return Math.max(val[2] / 20, 5);\n        },\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false\n            },\n            emphasis: {\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#FF3333',\n                position: 'right',\n                show: true\n            }\n        }\n    }, {\n   \n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        data: convertedData[0],\n        symbolSize: function(val) {\n            return Math.max(val[2] / 50, 8);\n        },\n        showEffectOn: 'render',\n        rippleEffect: {\n            brushType: 'stroke'\n        },\n        hoverAnimation: true,\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#FFDD55',\n                shadowBlur: 50,\n                shadowColor: '#EE0000'\n            }\n        },\n        zlevel: 1\n    }, {\n        id: 'bar',\n        zlevel: 2,\n        type: 'bar',\n        symbol: 'none',\n        itemStyle: {\n            normal: {\n                color: '#ddb926'\n            }\n        },\n\n        data: data\n    }]\n};\n\n\nfunction renderBrushed(params) {\n    var mainSeries = params.batch[0].selected[0];\n\n    var selectedItems = [];\n    var categoryData = [];\n    var barData = [];\n    var maxBar = 30;\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < mainSeries.dataIndex.length; i++) {\n        var rawIndex = mainSeries.dataIndex[i];\n        var dataItem = convertedData[0][rawIndex];\n        var pmValue = dataItem.value[2];\n\n        sum += pmValue;\n        count++;\n\n        selectedItems.push(dataItem);\n    }\n\n    selectedItems.sort(function(a, b) {\n        //   return b.value[2] - a.value[2];\n        return a.value - b.value;\n    });\n\n    for (var i = 0; i < Math.min(selectedItems.length, maxBar); i++) {\n        categoryData.push(selectedItems[i].name);\n        barData.push(selectedItems[i].value[2]);\n    }\n\n    this.setOption({\n        yAxis: {\n            data: categoryData\n        },\n        xAxis: {\n            axisLabel: {\n                show: !!count\n            }\n        },\n        title: {\n            id: 'statistic',\n            text: count ? '平均: ' + (sum / count).toFixed(4) : ''\n        },\n        series: {\n            id: 'bar',\n            //        sort:'descending',\n            data: barData\n        }\n    });\n}","html":"","externalScripts":"","updaterUID":"bd-1040393267","theme":"","layout":"","viewCount":151,"userName":"唯郁赢","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkiWuGHGG.png?v=1513592835103","isCustomThumbnail":1,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-scatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"唯郁赢"}}