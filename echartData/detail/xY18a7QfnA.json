{"status":0,"data":{"cid":"xY18a7QfnA","authorUid":"obd-o2aLi8f118VFtQiPCGlu59gv-o5xn6d","authorUserName":"漱***0","title":"柱形占比图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-11-30T14:48:19.000Z","lastUpdateTime":"2020-11-30T14:48:19.000Z","auth":2,"uid":"obd-o2aLi8f118VFtQiPCGlu59gv-o5xn6d","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-01T09:58:18.000Z","code":"const track = true; //是否有轨道\nconst topColor = '#00B8FF'; //排名前三的柱形颜色: {\nconst lastColor = '#40E9B1'; //排名后面的柱形颜色: {\nconst valueSuffix = '万'; //名称后缀\nconst names = [\n    '年收入第1名',\n    '年收入第2名',\n    '年收入第3名',\n    '年收入第4名',\n    '年收入第5名',\n    '年收入第6名',\n    '年收入第7名',\n    '年收入第8名',\n    '年收入第9名',\n    '年收入第10名',\n];\nconst values = [7500, 7000, 6500, 6000, 5500, 5000, 4500, 4000, 3500, 3000];\n\nlet lineY = [];\nlet lineT = [];\nfor (let i = 0; i < names.length; i++) {\n    const data = {\n        name: names[i],\n        value: values[i],\n        barGap: '-100%',\n        itemStyle: {\n            show: true,\n            color: i < 3 ? topColor : lastColor,\n            barBorderRadius: 5,\n        },\n    };\n    lineY.push(data);\n    //有轨道\n    if (track) {\n        const data1 = {\n            value: values[0],\n            realValue: values[i],\n            itemStyle: {\n                color: '#2B3B6D',\n                barBorderRadius: 10,\n            },\n        };\n        lineT.push(data1);\n    }\n}\n\noption = {\n    backgroundColor: '#FFF',\n    tooltip: {\n        trigger: 'item',\n        formatter: (p) => {\n            if (p.seriesName === 'total') {\n                return '';\n            }\n            return `${p.name}<br/>${p.value}万`;\n        },\n    },\n    grid: {\n        borderWidth: 0,\n        top: '10%',\n        left: '10%',\n        right: '10%',\n        bottom: '10%',\n    },\n    yAxis: [{\n        type: 'category',\n        show: false,\n        inverse: true,\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: true,\n            inside: false,\n            verticalAlign: 'bottom',\n            lineHeight: '40',\n            textStyle: {\n                color: '#b3ccf8',\n                fontSize: '14',\n                fontFamily: 'PingFangSC-Regular',\n            },\n            formatter: function(val) {\n                return `${val}ee`;\n            },\n        },\n        splitArea: {\n            show: false,\n        },\n        splitLine: {\n            show: false,\n        },\n        data: values,\n    }, ],\n    xAxis: {\n        type: 'value',\n        show: false,\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        },\n    },\n    series: [],\n};\n//带名称的公用配置\nconst nameBar = {\n    name: 'bar',\n    type: 'bar',\n    zlevel: 1,\n    barWidth: '6px',\n    data: lineY,\n    barGap: '-100%',\n    label: {\n        color: '#b3ccf8',\n        show: true,\n        position: [0, '-18px'],\n        formatter: function(a) {\n            let str = '';\n            str = a.name;\n            return str;\n        },\n        rich: {\n            color: {\n                color: '#949FD5',\n                fontSize: 12,\n            },\n        },\n    },\n};\n//有轨道\nif (track) {\n    option.series = [\n        nameBar,\n        {\n            name: 'total',\n            type: 'bar',\n            zlevel: -1,\n            barGap: '-100%',\n            barWidth: '6px',\n            data: lineT,\n            legendHoverLink: false,\n            label: {\n                show: true,\n                position: 'right',\n                formatter: (a) => {\n                    let str = '';\n                    if (a.dataIndex < 3) {\n                        str = `{top|${a.data.realValue}${\n                                        valueSuffix || ''}}{unit|${valueSuffix?'':'万'}}`;\n                    } else {\n                        str = `{last|${a.data.realValue}${valueSuffix || ''}}{unit|${valueSuffix?'':'万'}}`;\n                    }\n                    return str;\n                },\n                rich: {\n                    top: {\n                        fontSize: 14,\n                        color: topColor,\n                    },\n                    last: {\n                        fontSize: 14,\n                        color: lastColor,\n                    },\n                    unit: {\n                        color: '#949FD5',\n                        fontSize: 11,\n                    },\n                },\n            },\n        },\n    ];\n} else {\n    //无轨道\n    option.series = [\n        nameBar,\n        {\n            name: 'bar',\n            type: 'bar',\n            zlevel: 2,\n            barWidth: '6px',\n            data: lineY,\n            label: {\n                show: true,\n                position: 'right',\n                textStyle: {\n                    fontSize: 14,\n                },\n                formatter: function(a) {\n                    let str = '';\n                    str = `${a.value}{unit|万}`;\n                    return str;\n                },\n                rich: {\n                    unit: {\n                        color: '#949FD5',\n                        fontSize: 11,\n                    },\n                },\n            },\n        },\n    ];\n}","html":"","externalScripts":"","updaterUID":"obd-o2aLi8f118VFtQiPCGlu59gv-o5xn6d","theme":"","layout":"","viewCount":73,"userName":"漱***0","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xY18a7QfnA.png?v=1606816698662","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"漱***0"}}