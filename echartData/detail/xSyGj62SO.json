{"status":0,"data":{"cid":"xSyGj62SO","authorUid":"bd-1192091434","authorUserName":"s***2","title":"Life & Income (with brush filter)","description":"See: http://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen https://www.gapminder.org/world/https://bost.ocks.org/mike/nations/","latestVersion":6,"alwaysLatest":1,"createTime":"2016-07-27T04:50:34.000Z","lastUpdateTime":"2016-07-27T04:50:34.000Z","auth":2,"uid":"bd-1192091434","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"3.2.2","versionCreateTime":"2016-07-27T09:51:11.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1469555879417-SkJnEmr_.json\";\n\nmyChart.showLoading();\n\n$.getJSON(uploadedDataURL, function (data) {\n    myChart.hideLoading();\n\n    var itemStyle = {\n        normal: {\n            opacity: 0.8,\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\n        }\n    };\n\n    var sizeFunction = function (x) {\n        var y = Math.sqrt(x / 5e8) + 0.1;\n        return y * 40;\n    };\n    // Schema:\n    var schema = [\n        {name: 'Income', index: 0, text: '人均收入', unit: '美元'},\n        {name: 'LifeExpectancy', index: 1, text: '人均寿命', unit: '岁'},\n        {name: 'Population', index: 2, text: '总人口', unit: ''},\n        {name: 'Country', index: 3, text: '国家', unit: ''}\n    ];\n\n    option = {\n        baseOption: {\n            timeline: {\n                axisType: 'category',\n                orient: 'vertical',\n                autoPlay: true,\n                inverse: true,\n                playInterval: 1000,\n                left: null,\n                right: 10,\n                top: 20,\n                bottom: 20,\n                width: 55,\n                height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbol: 'none',\n                lineStyle: {\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    color: '#bbb',\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: false,\n                    showPrevBtn: false,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n                data: []\n            },\n            backgroundColor: '#333',\n            title: {\n                'text': data.timeline[0],\n                textAlign: 'center',\n                right: '3%',\n                top: '73%',\n                textStyle: {\n                    fontSize: 100,\n                    color: 'rgba(255, 255, 255, 0.9)'\n                }\n            },\n            tooltip: {\n                padding: 5,\n                backgroundColor: '#222',\n                borderColor: '#777',\n                borderWidth: 1\n            },\n            xAxis: {\n                type: 'log',\n                name: '人均收入',\n                max: 100000,\n                min: 300,\n                nameGap: 25,\n                nameLocation: 'middle',\n                nameTextStyle: {\n                    fontSize: 18\n                },\n                splitLine: {\n                    show: false\n                },\n                axisTick: {\n                    lineStyle: {\n                        color: '#ddd'\n                    }\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#ddd'\n                    }\n                },\n                axisLabel: {\n                    formatter: '{value} $',\n                    textStyle: {\n                        color: '#ddd'\n                    }\n                }\n            },\n            yAxis: {\n                type: 'value',\n                name: '平均寿命',\n                nameGap: 25,\n                max: 100,\n                nameTextStyle: {\n                    color: '#ccc',\n                    fontSize: 18\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#ddd'\n                    }\n                },\n                axisTick: {\n                    lineStyle: {\n                        color: '#ddd'\n                    }\n                },\n                splitLine: {\n                    show: false\n                },\n                axisLabel: {\n                    formatter: '{value} 岁',\n                    textStyle: {\n                        color: '#ddd'\n                    }\n                }\n            },\n            grid: {\n                top: '40%',\n                left: 200,\n                right: 110\n            },\n            geo: {\n                top: 20,\n                left: 170,\n                right: 120,\n                height: '38%',\n                name: 'World Population (2010)',\n                type: 'map',\n                map: 'world',\n                roam: false,\n                label: {\n                    emphasis: {\n                        show: false\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        borderColor: '#aaa',\n                        areaColor: '#555'\n                    },\n                    emphasis: {\n                        areaColor: '#555'\n                    }\n                }\n            },            \n            toolbox: {\n                // orient: 'vertical',\n                top: 25,\n                left: 10,\n                itemSize: 20,\n                // itemGap: 17,\n                iconStyle: {\n                    normal: {\n                        borderColor: '#eee'\n                    },\n                    emphasis: {\n                        borderColor: '#fffb60'\n                    }\n                }\n            },\n            brush: {\n                toolbox: ['polygon', 'keep', 'clear'],\n                brushLink: 'all',\n                outOfBrush: {\n                    opacity: .1,\n                    color: '#aaa'\n                }\n            },\n            visualMap: [\n                {\n                    type: 'piecewise',\n                    dimension: 3,\n                    categories: data.countries.map(function (item) {\n                        return item[2];\n                    }),\n                    left: 10,\n                    bottom: 35,\n                    calculable: true,\n                    precision: 0.1,\n                    textGap: 10,\n                    itemGap: 12,\n                    textStyle: {\n                        color: '#ccc'\n                    },\n                    inRange: {\n                        color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a', '#376956', '#c3bed4', '#495a80', '#9966cc', '#bdb76a', '#eee8ab', '#a35015', '#04dd98', '#d9b3e6']\n                    },\n                    outOfRange: {\n                        color: '#555'\n                    }\n                }\n            ],\n            series: [\n                {\n                    type: 'scatter',\n                    id: 'gridScatter',\n                    itemStyle: itemStyle,\n                    data: data.series[0],\n                    symbolSize: function(val) {\n                        return sizeFunction(val[2]);\n                    },\n                    tooltip: {\n                        formatter: function (obj) {\n                            var value = obj.value;\n                            return schema[3].text + '：' + value[3] + '<br>'\n                                + schema[1].text + '：' + value[1] + schema[1].unit + '<br>'\n                                + schema[0].text + '：' + value[0] + schema[0].unit + '<br>'\n                                + schema[2].text + '：' + value[2] + '<br>';\n                        }\n                    }\n                },\n                {\n                    type: 'scatter',\n                    id: 'geoScatter',\n                    coordinateSystem: 'geo',\n                    itemStyle: {\n                        normal: {\n                            opacity: 1,\n                            shadowBlur: 5,\n                            shadowColor: 'rgba(0, 0, 0, 0.5)'\n                        },\n                    },\n                    data: data.countries.map(function (item) {\n                        return [item[0], item[1], 0, item[2]];\n                    }),\n                    symbolSize: 15,\n                    tooltip: {\n                        formatter: function (obj) {\n                            var value = obj.value;\n                            return schema[3].text + '：' + value[3];\n                        }\n                    }\n                }\n            ],\n            animationDurationUpdate: 1000,\n            animationEasingUpdate: 'quinticInOut'\n        },\n        options: []\n    };\n\n    for (var n = 0; n < data.timeline.length; n++) {\n        option.baseOption.timeline.data.push(data.timeline[n]);\n        option.options.push({\n            title: {\n                show: true,\n                'text': data.timeline[n] + ''\n            },\n            series: {\n                id: 'gridScatter',\n                name: data.timeline[n],\n                type: 'scatter',\n                itemStyle: itemStyle,\n                data: data.series[n],\n                symbolSize: function(val) {\n                    return sizeFunction(val[2]);\n                }\n            }\n        });\n    }\n\n    myChart.setOption(option);\n\n});","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-1192091434","theme":"","layout":"","viewCount":4515,"userName":"s***2","commentCount":1,"starCount":11,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSyGj62SO.png?v=1469613071808","isCustomThumbnail":0,"builtinTags":["brush","category-work","geo","grid","series-scatter","timeline","title","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"s***2"}}