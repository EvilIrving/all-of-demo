{"status":0,"data":{"cid":"xH10kor7hf","authorUid":"bd-2553280015","authorUserName":"TSDX唯我独尊","title":"高德3D地图","description":"","latestVersion":7,"alwaysLatest":1,"createTime":"2018-04-17T10:22:30.000Z","lastUpdateTime":"2018-04-17T10:22:30.000Z","auth":2,"uid":"bd-2553280015","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.0.4","versionCreateTime":"2018-04-17T11:22:38.000Z","code":" var x_PI = 3.14159265358979324 * 3000.0 / 180.0;\r\n var PI = 3.1415926535897932384626;\r\n var a = 6378245.0;\r\n var ee = 0.00669342162296594323;\r\n\r\n function bd09Togcj02(bd_lng, bd_lat) {\r\n     var x = bd_lng - 0.0065;\r\n     var y = bd_lat - 0.006;\r\n     var z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * x_PI);\r\n     var theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * x_PI);\r\n     var gg_lng = z * Math.cos(theta);\r\n     var gg_lat = z * Math.sin(theta);\r\n     return [gg_lng, gg_lat];\r\n }\r\n var uploadedDataURL = \"/asset/get/s/data-1523960589613-BJ8Gjrm2M.json\";\r\n\r\n myChart.setOption({\r\n     amap: {\r\n         maxPitch: 60,\r\n         pitch: 45,\r\n         viewMode: '3D',\r\n         zoom: 17,\r\n         expandZoomRange: true,\r\n         zooms: [3, 20],\r\n         mapStyle: 'amap://styles/6bd7d0c78736ef803efcbda2d85f89a5',\r\n         center: bd09Togcj02(125.331257, 43.89264),\r\n         // rotation: 100\r\n     },\r\n     animation: false,\r\n     tooltip: {\r\n         trigger: 'item',\r\n     },\r\n     brush: {\r\n         toolbox: ['rect', 'polygon', 'clear'],\r\n         ouyOfBrush: {\r\n             color: '#ffff00'\r\n         },\r\n         brushStyle: {\r\n             borderWidth: 2,\r\n             color: 'rgba(0,0,0,0.2)',\r\n             borderColor: 'rgba(0,0,0,0.5)',\r\n         },\r\n         seriesIndex: [0, 1],\r\n         throttleType: 'debounce',\r\n         throttleDelay: 300,\r\n         geoIndex: 'all',\r\n     },\r\n     series: [{\r\n         type: 'lines',\r\n         coordinateSystem: 'amap',\r\n         polyline: true,\r\n         data: [],\r\n         silent: true,\r\n         lineStyle: {\r\n             normal: {\r\n                 opacity: 0.2,\r\n                 width: 2\r\n             }\r\n         },\r\n         progressiveThreshold: 500,\r\n         progressive: 100,\r\n         zlevel: 2,\r\n     }, {\r\n         type: 'lines',\r\n         coordinateSystem: 'amap',\r\n         polyline: true,\r\n         data: [],\r\n         lineStyle: {\r\n             normal: {\r\n                 width: 0.04\r\n             }\r\n         },\r\n         effect: {\r\n             constantSpeed: 40,\r\n             show: true,\r\n             trailLength: 0.04,\r\n             symbolSize: 2\r\n         },\r\n         zlevel: 1\r\n     }]\r\n });\r\n\r\n var map = myChart.getModel().getComponent('amap').getAMap();\r\n var layer = myChart.getModel().getComponent('amap').getLayer();\r\n\r\n AMap.plugin([\"AMap.ControlBar\"], function() {\r\n     var bar = new AMap.ControlBar();\r\n     map.addControl(bar);\r\n });\r\n $.getJSON(uploadedDataURL, function(result) {\r\n     data = result.map(val => {\r\n         return {\r\n             coords: val.coords.map(coords => {\r\n                 return bd09Togcj02(coords[0], coords[1]);\r\n             }),\r\n             \"lineStyle\": val.lineStyle\r\n         };\r\n     });\r\n     myChart.setOption({\r\n         series: [{\r\n             data: data\r\n         }, {\r\n             data: data\r\n         }]\r\n     })\r\n });\r\n layer.render = function() {\r\n     let series = myChart.getOption().series;\r\n     myChart.setOption({\r\n         series: []\r\n     });\r\n     myChart.setOption({\r\n         series: series\r\n     });\r\n }","html":"","externalScripts":"http://webapi.amap.com/maps?v=1.4.5&key=691de0fec54875b3de33f29c8626ffc9&plugin=AMap.ControlBar,http://39.108.99.240/echarts-amap.min.js,http://localhost:8080/dist/echarts-amap.min.js","updaterUID":"bd-2553280015","theme":"","layout":"","viewCount":19961,"userName":"TSDX唯我独尊","commentCount":13,"starCount":30,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xH10kor7hf.png?v=1523960550901","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"TSDX唯我独尊"}}