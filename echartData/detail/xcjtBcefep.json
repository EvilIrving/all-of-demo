{"status":0,"data":{"cid":"xcjtBcefep","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"关系图谱","description":"","latestVersion":16,"alwaysLatest":1,"createTime":"2020-12-14T02:03:38.000Z","lastUpdateTime":"2021-07-19T10:57:40.000Z","auth":1,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":16,"parentVersion":15,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-19T10:57:40.000Z","code":"var current = ['张子山'];\r\n\r\nvar getname = ['张大海','李梅'];\r\n\r\nvar getrelation = ['父亲','母亲'];\r\n\r\nvar getname2 = ['张三','李四','王五'];\r\n\r\nvar getrelation2 = ['舍友','舍友','舍友'];\r\n\r\nvar getmajor2 = ['19级化学类','19级化学类','19级化学类'];\r\n\r\nvar getname3 = ['李慧珍','王沥川','李晨曦','赵雪琴','张铭轩'];\r\n\r\nvar getmajor3 = ['授课教师','授课教师','授课教师','授课教师','授课教师'];\r\n\r\nvar getlesson3 = ['工业生产应用有机化学','工业生产应用有机化学','工业生产应用有机化学','工业生产应用有机化学','工业生产应用有机化学'];\r\n\r\nvar getpost3 = ['研究员','研究员','研究员','研究员','研究员'];\r\n\r\n\r\n\r\ncurrent=current[0]\r\nvar family = getname.map((item,index)=>{\r\n    return{\r\n        name:getname[index],\r\n        relation:getrelation[index]\r\n    }\r\n})\r\nvar roommate = getname2.map((item,index)=>{\r\n    return {\r\n        name:getname2[index],\r\n        relation:getrelation2[index],\r\n        major:getmajor2[index]\r\n    }\r\n})\r\nvar teacher = getname3.map((item,index)=>{\r\n    return {\r\n        name:getname3[index],\r\n        relation:getmajor3[index],\r\n        lesson:getlesson3[index],\r\n        post:getpost3[index]\r\n    }\r\n})\r\nvar data = [{\r\n    type:'家庭关系',\r\n    value:family\r\n},{\r\n    type:'舍友关系',\r\n    value:roommate\r\n},{\r\n    type:'师生关系',\r\n    value:teacher\r\n}]\r\n\r\n\r\n\r\n\r\n// 请勿随意修改\r\n// var current = '张子山'\r\n// var data = [{\r\n//     type:'家庭关系',\r\n//     value:[{\r\n//         name:'李梅',\r\n//         relation:'姐'\r\n//     },{\r\n//         name:'张大海',\r\n//         relation:'父亲'\r\n//     }]\r\n// },{\r\n//     type:'舍友关系',\r\n//     value:[{\r\n//         name:'张三',\r\n//         relation:'舍友',\r\n//         major:'19级化学类'\r\n//     },{\r\n//         name:'李四',\r\n//         relation:'舍友',\r\n//         major:'19级化学类'\r\n//     },{\r\n//         name:'王五',\r\n//         relation:'舍友',\r\n//         major:'19级化学类'\r\n//     }]\r\n// },{\r\n//     type:'师生关系',\r\n//     value:[{\r\n//         name:'李慧珍',\r\n//         relation:'授课教师',\r\n//         lesson:'工业生产应用有机化学',\r\n//         post:'研究员'\r\n//     },{\r\n//         name:'王沥川',\r\n//         relation:'授课教师',\r\n//         lesson:'工业生产应用有机化学',\r\n//         post:'研究员'\r\n//     },{\r\n//         name:'李晨曦',\r\n//         relation:'授课教师',\r\n//         lesson:'工业生产应用有机化学',\r\n//         post:'研究员'\r\n//     },{\r\n//         name:'赵雪琴',\r\n//         relation:'授课教师',\r\n//         lesson:'工业生产应用有机化学',\r\n//         post:'研究员'\r\n//     },{\r\n//         name:'张铭轩',\r\n//         relation:'授课教师',\r\n//         lesson:'工业生产应用有机化学',\r\n//         post:'研究员'\r\n//     }]\r\n// }]\r\n\r\n// console.log(data)\r\n\r\n// 圆形颜色\r\nvar colorList = {\r\n    '家庭关系':new echarts.graphic.LinearGradient(0,0,0,1,[{\r\n        offset:0,\r\n        color:'#5998FF'\r\n    },{\r\n        offset:1,\r\n        color:'#5CC0FF'\r\n    }]),\r\n    '舍友关系':new echarts.graphic.LinearGradient(0,0,0,1,[{\r\n        offset:0,\r\n        color:'#0FB27C'\r\n    },{\r\n        offset:1,\r\n        color:'#4BCDA1'\r\n    }]),\r\n    '师生关系':new echarts.graphic.LinearGradient(0,0,0,1,[{\r\n        offset:0,\r\n        color:'#7A7AE9'\r\n    },{\r\n        offset:1,\r\n        color:'#899BF9'\r\n    }]),\r\n    '中心':new echarts.graphic.LinearGradient(0,0,0,1,[{\r\n        offset:0,\r\n        color:'#FF6061'\r\n    },{\r\n        offset:1,\r\n        color:'#FF7E7C'\r\n    }])\r\n}\r\n// 背景颜色\r\nvar shadowList = {\r\n    '家庭关系':'rgba(42, 154, 241, 0.5)',\r\n    '舍友关系':'rgba(33, 186, 135, 0.5)',\r\n    '师生关系':'rgba(129, 138, 241, 0.5)'\r\n}\r\n// 线条颜色\r\nvar lineList = {\r\n    '家庭关系':'#DCEAF2',\r\n    '舍友关系':'#DCF2ED',\r\n    '师生关系':'#F1ECF4'\r\n}\r\nvar links = []\r\nvar linkNum = 1;\r\nvar seriesData = data.map((item,index)=>{\r\n    return item.value.map((it,id)=>{\r\n        links.push({\r\n            source:0,\r\n            target:linkNum++,\r\n            lineStyle:{\r\n                color:lineList[item.type]\r\n            }\r\n        })\r\n        return {\r\n            ...it,\r\n            itemStyle:{\r\n                normal:{\r\n                    color:colorList[item.type],\r\n                    shadowColor:shadowList[item.type],\r\n                    shadowBlur:10\r\n                }\r\n            },\r\n            category:item.type\r\n        }\r\n    })\r\n})\r\n\r\noption = {\r\n        title: {\r\n            text: ''\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            align: 'left',\r\n            backgroundColor:'#fff',\r\n            formatter: function (params) {\r\n                let html = ''\r\n                if(params.data.category === '家庭关系'){\r\n                    html = `<span style=\"font-size:16px;line-height:32px;color:#4e4e4e;font-weight:bold\">${params.data.name}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:32px;color:#4e4e4e\">关系：${params.data.relation}</span>\r\n                    `\r\n                }else if(params.data.category === '舍友关系'){\r\n                    html = `<span style=\"font-size:16px;line-height:32px;color:#4e4e4e;font-weight:bold\">${params.data.name}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:32px;color:#4e4e4e\">关系：${params.data.relation}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:32px;color:#4e4e4e\">年级专业：${params.data.major}</span>\r\n                    `\r\n                }else if(params.data.category === '师生关系'){\r\n                    html = `\r\n                            <span style=\"font-size:16px;line-height:32px;color:#4e4e4e;font-weight:bold\">${params.data.name}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:32px;color:#4e4e4e\">关系：${params.data.relation}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:32px;color:#4e4e4e\">专业技术职务：${params.data.post}</span>\r\n                            <br/>\r\n                            <span style=\"font-size:14px;line-height:20px;color:#4e4e4e;\">授课课程：${params.data.lesson}</span>\r\n                    `\r\n                }\r\n                return html\r\n            },\r\n            extraCssText:'white-space:normal;padding:5px 15px;width:200px;word-break:break-all;box-shadow: 1px 6px 15px 0px rgba(0, 0, 0, 0.13)'\r\n        },\r\n\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    fontSize: 12\r\n                }\r\n            }\r\n        },\r\n        legend: {\r\n            x: 'center',\r\n            show: true,\r\n            data: ['家庭关系', '舍友关系','师生关系']\r\n        },\r\n        series: [\r\n            {\r\n                type: 'graph',\r\n                layout: 'force',\r\n                symbolSize: 80,\r\n                center: ['50%', '50%'],\r\n                draggable:true,\r\n                focusNodeAdjacency: true,\r\n                roam: false,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: colorList['中心'],\r\n                        shadowColor:'rgba(255, 100, 100, 0.5)',\r\n                        shadowBlur:10\r\n                    },\r\n                    emphasis: {\r\n                        // 高亮状态\r\n                    }\r\n                },\r\n                categories: [\r\n                    {\r\n                        name: '家庭关系',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colorList['家庭关系']\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        name: '舍友关系',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colorList['舍友关系']\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        name:'师生关系',\r\n                        itemStyle:{\r\n                            \r\n                            normal:{\r\n                                color:colorList['师生关系']\r\n                            }\r\n                        }\r\n                    }\r\n                ],\r\n                label: {\r\n                    normal: {\r\n                        color:'#ffffff',\r\n                        show: true,\r\n                        textStyle: {\r\n                            fontSize: 12\r\n                        }\r\n                    }\r\n                },\r\n                force: {\r\n                    repulsion: 1000,\r\n                    gravity: 0.1,\r\n                    edgeLength: [100, 200]\r\n                },\r\n                edgeSymbolSize: [4, 50],\r\n\r\n                lineStyle: {\r\n                    normal: {\r\n                        width: 5,\r\n                        curveness: 0.1, // 线的弯曲度 0-1之间 越大则歪曲度更大\r\n                        color: '#B5D7C9'\r\n                    }\r\n                },\r\n                data:[{name:current},...seriesData.flat(2)],\r\n                links:links\r\n            }\r\n        ]\r\n    };","html":"","externalScripts":"","updaterUID":"bd-1513233592","theme":"","layout":"","viewCount":598,"userName":"m***h","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcjtBcefep.png?v=1626692261011","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","title","tooltip"],"customTags":[],"updaterUserName":"敏***落"}}