{"status":0,"data":{"cid":"x3gJpxCIUF","authorUid":"bd-1399818579","authorUserName":"a***2","title":"全国地域分析","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-03T02:59:34.000Z","lastUpdateTime":"2020-06-03T02:59:34.000Z","auth":2,"uid":"bd-1399818579","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-03T03:02:54.000Z","code":"// https://github.com/apache/incubator-echarts/tree/master/map/json 下载全省的json文件 维护常量\r\nvar provinces = {\r\n    '上海': '/mapjson/shanghai.json',\r\n    '河北': '/mapjson/hebei.json',\r\n    '山西': '/asset/get/s/data-1591153103530-woA5PfbnV.json',\r\n    '内蒙古': '/mapjson/neimeng.json',\r\n    '辽宁': '/mapjson/liaoning.json',\r\n    '吉林': '/mapjson/jilin.json',\r\n    '黑龙江': '/mapjson/heilongjiang.json',\r\n    '江苏': '/mapjson/jiangsu.json',\r\n    '浙江': '/mapjson/zhejiang.json',\r\n    '安徽': '/mapjson/anhui.json',\r\n    '福建': '/mapjson/fujian.json',\r\n    '江西': '/mapjson/jiangxi.json',\r\n    '山东': '/mapjson/shandong.json',\r\n    '河南': '/mapjson/hainan.json',\r\n    '湖北': '/mapjson/hubei.json',\r\n    '湖南': '/mapjson/hunan.json',\r\n    '广东': '/mapjson/guangdong.json',\r\n    '广西': '/mapjson/guangxi.json',\r\n    '海南': '/mapjson/hainan.json',\r\n    '四川': '/mapjson/sichuan.json',\r\n    '贵州': '/mapjson/guizhou.json',\r\n    '云南': '/mapjson/yunnan.json',\r\n    '西藏': '/mapjson/xizang.json',\r\n    '陕西': '/mapjson/shanxi.json',\r\n    '甘肃': '/mapjson/gansu.json',\r\n    '青海': '/mapjson/qinghai.json',\r\n    '宁夏': '/mapjson/ningxia.json',\r\n    '新疆': '/mapjson/xinjiang.json',\r\n    '北京': '/mapjson/beijing.json',\r\n    '天津': '/mapjson/tianjin.json',\r\n    '重庆': '/mapjson/chongqing.json',\r\n    '香港': '/mapjson/xiangang.json',\r\n    '澳门': '/mapjson/aomen.json'\r\n};\r\n\r\nloadMap('/asset/get/s/data-1591152454850-nnifVpUft.json', 'china'); //初始化全国地图\r\n// 先请求全国数据\r\nvar item = [{\r\n    \"code\": \"11\",\r\n    \"area\": \"北京\",\r\n    \"board_num\": \"8\",\r\n    \"ask_num\": \"14\",\r\n    \"sign_num\": \"1\"\r\n}, {\r\n    \"code\": \"14\",\r\n    \"area\": \"山西\",\r\n    \"board_num\": \"5\",\r\n    \"ask_num\": \"900\",\r\n    \"sign_num\": \"1\"\r\n}, {\r\n    \"code\": \"15\",\r\n    \"area\": \"内蒙古\",\r\n    \"board_num\": \"1\",\r\n    \"ask_num\": \"1\",\r\n    \"sign_num\": \"1\"\r\n}, {\r\n    \"code\": \"34\",\r\n    \"area\": \"安徽\",\r\n    \"board_num\": \"2\",\r\n    \"ask_num\": \"5\",\r\n    \"sign_num\": \"1\"\r\n}, {\r\n    \"code\": \"35\",\r\n    \"area\": \"福建\",\r\n    \"board_num\": \"1\",\r\n    \"ask_num\": \"1\",\r\n    \"sign_num\": \"1\"\r\n}];\r\nitem.map(function(i) {\r\n    i.name = i.area;\r\n    i.value = i.ask_num;\r\n    return i\r\n});\r\nmyChart.on('click', function(params) {\r\n    if (params.data) {\r\n        item = [{\r\n            \"code\": \"1407\",\r\n            \"area\": \"晋中市\",\r\n            \"board_num\": \"5\",\r\n            \"ask_num\": \"9\",\r\n            \"sign_num\": \"1\"\r\n        }];\r\n        item.map(function(i) {\r\n            i.name = i.area;\r\n            i.value = i.ask_num;\r\n            return i\r\n        })\r\n        var name = params.name; //地区name\r\n        var mapCode = provinces[name]; //地区的json数据                    \r\n        loadMap(mapCode, name);\r\n\r\n    } else {\r\n        alert('无此区域地图显示')\r\n    }\r\n});\r\n\r\nfunction loadMap(mapCode, name) {\r\n    $.get(mapCode, function(data) {\r\n        if (data) {\r\n            echarts.registerMap(name, data);\r\n            var option = {\r\n                title: {\r\n                    text: '全国地域分析',\r\n                    left: 'center',\r\n                },\r\n                tooltip: {\r\n                    formatter: function(params) {\r\n                        if (params.data) {\r\n                            return params.name + '<br>' + '咨询数:' + params.data.ask_num + '<br>' + '留言数:' + params.data.board_num + '<br>' + '用户数:' + params.data.sign_num + '<br>';\r\n                        } else {\r\n                            return params.name + '<br>' + '咨询数:' + 0 + '<br>' + '留言数:' + 0 + '<br>' + '用户数:' + 0 + '<br>';\r\n                        }\r\n                    }\r\n\r\n                },\r\n                visualMap: {\r\n                    min: 0,\r\n                    max: 1500,\r\n                    left: 'left',\r\n                    top: 'bottom',\r\n                    text: ['高', '低'],\r\n                    calculable: true,\r\n                    // seriesIndex: [1],\r\n                    inRange: {\r\n                        color: ['#e0ffff', '#006edd']\r\n                    },\r\n                    show: true\r\n                },\r\n                toolbox: {\r\n                    show: true,\r\n                    feature: {\r\n                        saveAsImage: {\r\n                            pixelRatio: 4\r\n                        }\r\n                    }\r\n                },\r\n                series: [{\r\n                    type: 'map',\r\n                    mapType: name,\r\n                    selectedMode: 'false', //是否允许选中多个区域\r\n                    label: {\r\n                        normal: {\r\n                            show: true\r\n                        },\r\n                        emphasis: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    data: item\r\n                }]\r\n            };\r\n            myChart.setOption(option);\r\n        } else {\r\n            alert('无法加载该地图');\r\n        }\r\n    });\r\n}","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-1399818579","theme":"","layout":"","viewCount":14056,"userName":"a***2","commentCount":2,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3gJpxCIUF.png?v=1591153174862","isCustomThumbnail":1,"builtinTags":["category-work","series-map","title","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"a***2"}}