{"status":0,"data":{"cid":"xHJ9zL5prZ","authorUid":"bd-167860219","authorUserName":"n***1","title":"17同济交通夏令营录取情况","description":"将graph和柱状图联动","latestVersion":4,"alwaysLatest":1,"createTime":"2017-07-20T02:31:46.000Z","lastUpdateTime":"2017-07-20T02:31:46.000Z","auth":2,"uid":"bd-167860219","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.6.2","versionCreateTime":"2017-07-20T06:05:34.000Z","code":"var fx = ['01、03',\n    '02',\n    '04',\n    '05',\n    '06',\n    '07',\n    '08'\n]\nvar fxdata = []\nfor (var i = 0; i < fx.length; i++) {\n    fxdata.push({\n        name: fx[i],\n        max: 20\n    })\n}\n\nvar data = {\n    '东南大学': [\n        [0, 1, 0, 0, 1, 1, 0],\n        [2, 0, 1, 0, 3, 1, 0], 10\n    ],\n    '中南大学': [\n        [2, 2, 5, 3, 21, 4, 2],\n        [1, 1, 3, 1, 1, 0, 1], 47\n    ],\n    '中国地质大学（武汉）': [\n        [0, 1, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '中国矿业大学': [\n        [2, 4, 0, 0, 0, 0, 0],\n        [1, 1, 0, 0, 0, 0, 0], 8\n    ],\n    '中国矿业大学（北京）': [\n        [0, 1, 0, 0, 0, 0, 0],\n        [0, 1, 0, 0, 1, 0, 0], 3\n    ],\n    '中山大学': [\n        [0, 0, 1, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '兰州交通大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 1, 0, 0, 0, 0, 0], 1\n    ],\n    '北京交通大学': [\n        [0, 4, 1, 0, 0, 0, 0],\n        [0, 0, 2, 1, 4, 0, 0], 12\n    ],\n    '北京科技大学': [\n        [1, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '华中科技大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [1, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '华南师范大学': [\n        [0, 0, 1, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '华南理工大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 1, 0, 0, 0, 0], 1\n    ],\n    '南京农业大学': [\n        [0, 1, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '南京理工大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 1, 0, 0, 0], 1\n    ],\n    '吉林大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [3, 0, 1, 0, 1, 0, 0], 5\n    ],\n    '同济大学': [\n        [7, 9, 3, 2, 4, 4, 0],\n        [22, 16, 5, 5, 21, 9, 2], 109\n    ],\n    '哈尔滨工业大学': [\n        [1, 0, 0, 0, 2, 0, 0],\n        [1, 0, 1, 0, 1, 0, 0], 6\n    ],\n    '哈尔滨工业大学（威海）': [\n        [0, 1, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 1, 0, 0], 2\n    ],\n    '四川大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [1, 1, 0, 0, 0, 0, 0], 2\n    ],\n    '大连海事大学': [\n        [0, 0, 0, 0, 4, 0, 1],\n        [0, 0, 0, 0, 2, 0, 0], 7\n    ],\n    '大连理工大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [3, 0, 0, 0, 0, 0, 0], 3\n    ],\n    '天津大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [1, 0, 0, 0, 1, 0, 0], 2\n    ],\n    '山东大学': [\n        [1, 0, 0, 0, 0, 0, 0],\n        [2, 0, 0, 0, 1, 0, 0], 4\n    ],\n    '武汉理工大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [1, 0, 1, 0, 0, 0, 0], 2\n    ],\n    '清华大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 1, 0, 0], 1\n    ],\n    '湖南大学': [\n        [2, 2, 0, 0, 0, 0, 0],\n        [2, 0, 0, 0, 0, 0, 0], 6\n    ],\n    '苏州大学': [\n        [0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 1, 0, 0, 0], 1\n    ],\n    '西北工业大学': [\n        [0, 1, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 0, 0], 1\n    ],\n    '西南交通大学': [\n        [0, 2, 1, 0, 5, 8, 0],\n        [0, 2, 1, 1, 1, 2, 0], 23\n    ],\n    '郑州大学': [\n        [1, 0, 0, 0, 0, 0, 0],\n        [1, 1, 0, 0, 0, 0, 0], 3\n    ],\n    '重庆大学': [\n        [0, 0, 0, 0, 0, 1, 0],\n        [1, 1, 0, 0, 1, 0, 0], 4\n    ],\n    '长安大学': [\n        [5, 2, 2, 0, 6, 1, 0],\n        [10, 0, 3, 0, 4, 0, 0], 33\n    ]\n}\nvar nodedata = []\nvar university = '同济大学'\n\nfor (var key in data) {\n    if (key == university) {\n        nodedata.push({\n                name: key,\n                symbolSize: Math.max(data[key][2], 5),\n                value: data[key][2],\n                itemStyle: {\n                    normal: {\n                        color: 'red'\n                    }\n                }\n\n            }\n\n        )\n    } else {\n        nodedata.push({\n                name: key,\n                symbolSize: Math.max(data[key][2], 5),\n                value: data[key][2],\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(18,89,147,1)'\n                    }\n                }\n\n            }\n\n        )\n    }\n}\n\n\noption = {\n    title: {\n        text: '17同济交通夏令营录取情况',\n        subtext: university,\n        x: 'center'\n    },\n    backgroundColor: '#eee',\n    legend: {\n        data: ['没通过', '通过'],\n        align: 'left',\n        left: 10\n    },\n    toolbox: {\n        feature: {\n            magicType: {\n                type: ['stack', 'tiled']\n            },\n            dataView: {}\n        }\n    },\n    tooltip: {},\n    yAxis: {\n        data: fx,\n        name: '方向',\n        silent: false,\n        axisLine: {\n            onZero: true\n        },\n        splitLine: {\n            show: false\n        },\n        splitArea: {\n            show: false\n        }\n    },\n    xAxis: {\n        max: 25,\n        inverse: false,\n        splitArea: {\n            show: false\n        }\n    },\n    grid: [{\n        left: 50,\n        name: '人数',\n        height: '80%',\n        width: '20%',\n\n    }],\n    series: [{\n            name: '没通过',\n            type: 'bar',\n            stack: 'one',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: data[university][0],            label: {\n                normal: {\n                    show: true,\n                    position: 'inside'\n                }\n            },\n        }, {\n            name: '通过',\n            type: 'bar',\n            stack: 'one',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: data[university][1],            label: {\n                normal: {\n                    show: true,\n                    position: 'inside'\n                }\n            },\n        }, {\n\n            type: 'graph',\n            layout: 'force',\n\n            focusNodeAdjacency: true,\n            roam: true,\n            data: nodedata,\n            label: {\n                normal: {\n                    position: 'top',\n                    show: true,\n                    textStyle: {\n                        color: 'rgba(18,89,147,1)',\n                        fontSize: 12\n                    },\n                }\n            },\n            force: {\n                repulsion: 100\n            },\n            links: [],\n            tooltip: {\n                formatter: function(d) {\n                    return d.name + '参加人数:' + d.data.value\n                }\n            }\n                       \n        }\n\n\n    ]\n};\nmyChart.on('click', function(p) {\n    console.log(p)\n    if (p.seriesType == 'graph') {\n        var university = p.name\n        var nodedata = []\n        for (var key in data) {\n            if (key == university) {\n                nodedata.push({\n                        name: key,\n                        symbolSize: Math.max(data[key][2], 5),\n                        value: data[key][2],\n                        itemStyle: {\n                            normal: {\n                                color: 'red'\n                            }\n                        }\n\n                    }\n\n                )\n            } else {\n                nodedata.push({\n                        name: key,\n                        symbolSize: Math.max(data[key][2], 5),\n                        value: data[key][2],\n                        itemStyle: {\n                            normal: {\n                                color: 'rgba(18,89,147,1)'\n                            }\n                        }\n\n                    }\n\n                )\n            }\n        }\n        myChart.setOption({\n            title: {\n                subtext: university\n            },\n            series: [{\n                data: data[university][0]\n            }, {\n                data: data[university][1]\n            }, {\n                data: nodedata\n            }]\n        })\n    }\n})","html":"","externalScripts":"","updaterUID":"bd-167860219","theme":"","layout":"","viewCount":4768,"userName":"n***1","commentCount":4,"starCount":15,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJ9zL5prZ.png?v=1500517906600","isCustomThumbnail":1,"builtinTags":["category-work","grid","legend","series-bar","series-graph","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"n***1"}}