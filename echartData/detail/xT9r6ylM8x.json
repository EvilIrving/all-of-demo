{"status":0,"data":{"cid":"xT9r6ylM8x","authorUid":"bd-3093676960","authorUserName":"s***s","title":"血缘链路图v1","description":"血缘链路图v1","latestVersion":1,"alwaysLatest":0,"createTime":"2021-09-15T09:27:52.000Z","lastUpdateTime":"2021-09-15T09:27:52.000Z","auth":2,"uid":"bd-3093676960","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.0","versionCreateTime":"2021-09-15T09:27:52.000Z","code":"// 桑基图数据格式要求如下↓，nodes中的节点需要和links互相对应，node表示图\n// 上的节点，link对应节点间的关系，如需自定义节点颜色需要在数据中单独设置\n// 否则只能设置某层节点的颜色，由于link连线中只有source和target两个节点关系\n// 所以鼠标滑过高亮从第一层到最后一层的节点需求无法实现，在level中可以单独\n// 设置某个层级的样式\n\n// tips：修改代码的话请点击上方↑克隆，莫要在我的版本基础上再改动了哈\nvar nodes = [\n    {\n        id: 'end',\n    },\n];\nvar links = [];\nfor (let j = 0; j < 5; j++) {\n    nodes.push({\n        id: 'one' + j,\n    });\n    links.push({\n        source: 'one' + j,\n        target: 'two' + j,\n        value: 1,\n    });\n}\nfor (let j = 0; j < 5; j++) {\n    nodes.push({\n        id: 'two' + j,\n    });\n    links.push({\n        source: 'two0',\n        target: 'three' + j,\n        value: 1,\n    });\n}\nfor (let j = 0; j < 10; j++) {\n    nodes.push({\n        id: 'three' + j,\n        type: 'L2',\n    });\n    if (j < 5) {\n        links.push({\n            source: 'two0',\n            target: 'right' + j,\n            value: 1,\n        });\n    }\n}\nfor (let j = 0; j < 2; j++) {\n    nodes.push({\n        id: 'four' + j,\n    });\n    links.push(\n        {\n            source: 'three' + j,\n            target: 'four1',\n            value: 1,\n        },\n        {\n            source: 'three' + (j + 1),\n            target: 'four2',\n            value: 1,\n        }\n    );\n}\n\nconsole.log(JSON.stringify(nodes));\nconsole.log(JSON.stringify(links));\nlinks.push(\n    {\n        source: 'four1',\n        target: 'end',\n        value: 1,\n    },\n    {\n        source: 'four2',\n        target: 'end',\n        value: 1,\n    }\n);\nnodes = [\n    { id: 'end',  level: 3},\n\n    { id: 'one0', level: 0},\n    { id: 'one1' , level: 0},\n    { id: 'one2',  level: 0},\n    { id: 'one3',  level: 0},\n    { id: 'one4' , level: 0},\n\n    { id: 'two0', level: 1 },\n    { id: 'two1', level: 1  },\n    { id: 'two2', level: 1  },\n    { id: 'two3', level: 1  },\n    { id: 'two4', level: 1  },\n\n    { id: 'three0',level: 3  },\n    { id: 'three1',  level: 3 },\n    { id: 'three2',level: 3 },\n    { id: 'three3',level: 3  },\n    { id: 'three4', level: 1 },\n    { id: 'three5', level: 1 },\n    { id: 'three6',level: 1 },\n    { id: 'three7', level: 1 },\n  \n   \n    { id: 'four1' },\n    { id: 'four2' },\n];\nlinks = [\n    { source: 'one0', target: 'two0', value: 1 },\n    { source: 'one1', target: 'two1', value: 1 },\n    { source: 'one2', target: 'two2', value: 1 },\n    { source: 'one3', target: 'two3', value: 1 },\n    { source: 'one4', target: 'two4', value: 1 },\n\n    { source: 'two0', target: 'three0', value: 1 },\n    { source: 'two0', target: 'three1', value: 1 },\n    { source: 'two0', target: 'three2', value: 1 },\n    { source: 'two0', target: 'three3', value: 1 },\n    { source: 'two0', target: 'three4', value: 1 },\n    { source: 'two0', target: 'right0', value: 1 },\n    { source: 'two0', target: 'right1', value: 1 },\n    { source: 'two0', target: 'right2', value: 1 },\n    { source: 'two0', target: 'right3', value: 1 },\n    { source: 'two0', target: 'right4', value: 1 },\n\n    { source: 'two1', target: 'three5', value: 1 },\n    { source: 'two1', target: 'three4', value: 1 },\n    { source: 'two2', target: 'three6', value: 1 },\n    { source: 'two3', target: 'three7', value: 1 },\n    { source: 'two4', target: 'three7', value: 1 },\n    { source: 'three0', target: 'four1', value: 1 },\n    { source: 'three1', target: 'four2', value: 1 },\n    { source: 'three1', target: 'four1', value: 1 },\n    { source: 'three2', target: 'four1', value: 1 },\n    { source: 'three3', target: 'four1', value: 1 },\n    { source: 'three4', target: 'four1', value: 1 },\n    { source: 'three5', target: 'four2', value: 1 },\n    { source: 'three6', target: 'four2', value: 1 },\n    { source: 'three7', target: 'four2', value: 1 },\n    { source: 'four1', target: 'end', value: 1 },\n    { source: 'four2', target: 'end', value: 1 },\n];\n\n// var links = [\n//     {\n//         source: '电网',\n//         target: '电',\n//         value: 1,\n//     },\n//     {\n//         source: '光伏',\n//         target: '电',\n//         value: 1,\n//     },\n//     {\n//         source: '燃气',\n//         target: '空调热',\n//         value: 3,\n//     },\n//     {\n//         source: '电',\n//         target: '照明',\n//         value: 1,\n//     },\n//     {\n//         source: '电',\n//         target: '电梯',\n//         value: 1,\n//     },\n//     {\n//         source: '电',\n//         target: 'OA设备',\n//         value: 1,\n//     },\n//     {\n//         source: '电',\n//         target: '电脑及实验设备',\n//         value: 1,\n//     },\n//     {\n//         source: '电',\n//         target: '高效机房',\n//         value: 1,\n//     },\n//     {\n//         source: '电',\n//         target: '分布式风冷',\n//         value: 1,\n//     },\n//     {\n//         source: '燃气',\n//         target: '热水',\n//         value: 1,\n//     },\n//     {\n//         source: '高效机房',\n//         target: '空调冷',\n//       value: 1,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '热水',\n//         value: 2,\n//     },\n//     {\n//         source: '分布式风冷',\n//         target: '空调冷',\n//         value: 1,\n//     },\n//     {\n//         source: '分布式风冷',\n//         target: '空调热',\n//         value: 2,\n//     },\n//     {\n//         source: '照明',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '电梯',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: 'OA设备',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '电脑及实验设备',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '电',\n//         target: '其他设备',\n//         value: 2,\n//     },\n//     {\n//         source: '其他设备',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '电',\n//         target: '自然冷源',\n//         value: 0,\n//     },\n//     {\n//         source: '自然冷源',\n//         target: '空调冷',\n//         value: 2,\n//     },\n//     {\n//         source: '热水',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '热水',\n//         target: '酒店',\n//         value: 2,\n//     },\n//     {\n//         source: '热水',\n//         target: '商业',\n//         value: 2,\n//     },\n//     {\n//         source: '热水',\n//         target: '运动',\n//         value: 2,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '热水',\n//         value: 2,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '酒店',\n//         value: 2,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '商业',\n//         value: 2,\n//     },\n//     {\n//         source: '空调冷',\n//         target: '运动',\n//         value: 2,\n//     },\n\n//     {\n//         source: '空调热',\n//         target: '办公',\n//         value: 2,\n//     },\n//     {\n//         source: '空调热',\n//         target: '酒店',\n//         value: 2,\n//     },\n//     {\n//         source: '空调热',\n//         target: '商业',\n//         value: 2,\n//     },\n//     {\n//         source: '空调热',\n//         target: '运动',\n//         value: 2,\n//     },\n// ];\nvar option = {\n    tooltip: {\n        trigger: 'item',\n        triggerOn: 'mousemove',\n    },\n    series: {\n        type: 'sankey',\n        layout: 'none',\n        top: 50,\n        left: 50,\n        right: 50,\n        nodeGap: 14,\n        layoutIterations: 0, // 自动优化列表，尽量减少线的交叉，为0就是按照数据排列\n        data: nodes, // 节点\n        links: links, // 节点之间的连线\n        draggable: false,\n        focusNodeAdjacency: 'allEdges', // 鼠标划上时高亮的节点和连线，allEdges表示鼠标划到节点上点亮节点上的连线及连线对应的节点\n        // tooltip: {\n        //   formatter: function(params) {\n        //     if (params.data.source) {\n        //       return `${params.data.source}：${params.data.value}`;\n        //     } else {\n        //       return `${params.name}：${params.value}`;\n        //     }\n        //   }\n        // },\n        levels: [\n            {\n                depth: 0,\n                itemStyle: {\n                    color: '#F27E7E',\n                },\n                lineStyle: {\n                    color: 'source',\n                    opacity: 0.2,\n                },\n            },\n            {\n                depth: 1,\n                lineStyle: {\n                    color: 'source',\n                    opacity: 0.2,\n                },\n            },\n            {\n                depth: 2,\n                lineStyle: {\n                    color: 'source',\n                    opacity: 0.2,\n                },\n            },\n            {\n                depth: 3,\n                label: {\n                    fontSize: 12,\n                },\n            },\n        ],\n        label: {\n            fontSize: 14,\n            color: '#666',\n        },\n        itemStyle: {\n            normal: {\n                borderWidth: 0,\n            },\n        },\n    },\n};\n","html":"","externalScripts":"","updaterUID":"bd-3093676960","theme":"","layout":"","viewCount":0,"userName":"s***s","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xT9r6ylM8x.png?v=1631698073207","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey","tooltip"],"customTags":[],"updaterUserName":"s***s"}}