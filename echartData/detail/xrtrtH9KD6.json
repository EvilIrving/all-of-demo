{"status":0,"data":{"cid":"xrtrtH9KD6","authorUid":"obd-oD5FRlmc-cSp4ho6UruvdLFzXuqoS1H","authorUserName":"汤***j","title":"地图动效","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-14T03:59:31.000Z","lastUpdateTime":"2021-07-14T03:59:31.000Z","auth":1,"uid":"obd-oD5FRlmc-cSp4ho6UruvdLFzXuqoS1H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-14T03:59:31.000Z","code":"var map\n\n      function initMap(options) {\n        //合并属性参数，可覆盖config.json中的对应配置\n        var mapOptions = mars3d.Util.merge(options, {\n          scene: {\n            center: {\n              y: 26.197302,\n              x: 112.783136,\n              z: 5933910.9,\n              heading: 355.6,\n              pitch: -80.3,\n            },\n          },\n        })\n\n        //创建三维地球场景\n        map = new mars3d.Map('mars3dContainer', mapOptions)\n\n        //创建Echarts图层\n        createEchartsLayer()\n      }\n\n      function createEchartsLayer() {\n        var options = getEchartsOption()\n        var echartsLayer = new mars3d.layer.EchartsLayer(options)\n        map.addLayer(echartsLayer)\n      }\n\n      function getEchartsOption() {\n        var geoCoordMap = {\n          安徽省: [117.17, 31.52],\n          北京市: [116.24, 39.55],\n          重庆市: [106.54, 29.59],\n          福建省: [119.18, 26.05],\n          甘肃省: [103.51, 36.04],\n          广东省: [113.14, 23.08],\n          广西壮族自治区: [108.19, 22.48],\n          贵州省: [106.42, 26.35],\n          海南省: [110.2, 20.02],\n          河北省: [114.3, 38.02],\n          河南省: [113.4, 34.46],\n          黑龙江省: [128.36, 45.44],\n          湖北省: [112.27, 30.15],\n          湖南省: [112.59, 28.12],\n          吉林省: [125.19, 43.54],\n          江苏省: [118.46, 32.03],\n          江西省: [115.55, 28.4],\n          辽宁省: [123.25, 41.48],\n          内蒙古: [108.41, 40.48],\n          宁夏回族自治区: [106.16, 38.27],\n          青海省: [101.48, 36.38],\n          山东省: [118.0, 36.4],\n          山西省: [112.33, 37.54],\n          陕西省: [108.57, 34.17],\n          上海市: [121.29, 31.14],\n          海南: [108.77, 19.1],\n          四川省: [104.04, 30.4],\n          天津市: [117.12, 39.02],\n          西藏自治区: [91.08, 29.39],\n          新疆维吾尔自治区: [87.36, 43.45],\n          云南省: [102.42, 25.04],\n          浙江省: [120.1, 30.16],\n          澳门: [115.07, 21.33],\n          台湾省: [121.21, 23.53],\n        }\n\n        var BJData = [\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '上海市',\n              value: 195,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '广东省',\n              value: 90,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '辽宁省',\n              value: 80,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '湖北省',\n              value: 70,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '内蒙古',\n              value: 70,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '江苏省',\n              value: 60,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '新疆维吾尔自治区',\n              value: 70,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '四川省',\n              value: 40,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '云南省',\n              value: 130,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '黑龙江省',\n              value: 130,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '甘肃省',\n              value: 200,\n            },\n          ],\n          [\n            {\n              name: '北京市',\n            },\n            {\n              name: '西藏自治区',\n              value: 60,\n            },\n          ],\n        ]\n\n        //var planePath =  \"path://M917.965523 917.331585c0 22.469758-17.891486 40.699957-39.913035 40.699957-22.058388 0-39.913035-18.2302-39.913035-40.699957l-0.075725-0.490164-1.087774 0c-18.945491-157.665903-148.177807-280.296871-306.821991-285.4748-3.412726 0.151449-6.751774 0.562818-10.240225 0.562818-3.450589 0-6.789637-0.410346-10.202363-0.524956-158.606321 5.139044-287.839661 127.806851-306.784128 285.436938l-1.014096 0 0.075725 0.490164c0 22.469758-17.854647 40.699957-39.913035 40.699957s-39.915082-18.2302-39.915082-40.699957l-0.373507-3.789303c0-6.751774 2.026146-12.903891 4.91494-18.531052 21.082154-140.712789 111.075795-258.241552 235.432057-312.784796C288.420387 530.831904 239.989351 444.515003 239.989351 346.604042c0-157.591201 125.33352-285.361213 279.924387-285.361213 154.62873 0 279.960203 127.770012 279.960203 285.361213 0 97.873098-48.391127 184.15316-122.103966 235.545644 124.843356 54.732555 215.099986 172.863023 235.808634 314.211285 2.437515 5.290493 4.01443 10.992355 4.01443 17.181311L917.965523 917.331585zM719.822744 346.679767c0-112.576985-89.544409-203.808826-199.983707-203.808826-110.402459 0-199.944821 91.232864-199.944821 203.808826s89.542362 203.808826 199.944821 203.808826C630.278335 550.488593 719.822744 459.256752 719.822744 346.679767z\";\n\n        var convertData = function (data) {\n          var res = []\n          for (var i = 0; i < data.length; i++) {\n            var dataItem = data[i]\n            var fromCoord = geoCoordMap[dataItem[0].name]\n            var toCoord = geoCoordMap[dataItem[1].name]\n            if (fromCoord && toCoord) {\n              res.push({\n                fromName: dataItem[0].name,\n                toName: dataItem[1].name,\n                coords: [fromCoord, toCoord],\n              })\n            }\n          }\n          return res\n        }\n\n        var color = ['#a6c84c', '#ffa022', '#46bee9']\n        var mySeries = []\n        ;[['', BJData]].forEach(function (item, i) {\n          mySeries.push(\n            {\n              //线\n              name: item[0],\n              type: 'lines',\n              coordinateSystem: 'GLMap',\n              zlevel: 1,\n              effect: {\n                show: true,\n                period: 6,\n                trailLength: 0.7,\n                color: '#fff',\n                symbolSize: 3,\n              },\n              lineStyle: {\n                normal: {\n                  color: color[0],\n                  width: 0,\n                  curveness: 0.2,\n                },\n              },\n              data: convertData(item[1]),\n            },\n            {\n              //移动 点\n              name: item[0],\n              type: 'lines',\n              coordinateSystem: 'GLMap',\n              zlevel: 2,\n              //effect: {\n              //    show: true,\n              //    period: 6,\n              //    trailLength: 0,\n              //    symbol: planePath,\n              //    symbolSize: 15\n              //},\n              effect: {\n                show: true,\n                period: 6,\n                trailLength: 0.1,\n                //            symbol: planePath,\n                symbol: 'arrow',\n                symbolSize: 5,\n              },\n              lineStyle: {\n                normal: {\n                  color: color[1],\n                  width: 1,\n                  opacity: 0.4,\n                  curveness: 0.2,\n                },\n              },\n              data: convertData(item[1]),\n            },\n            {\n              //省份圆点\n              name: item[0],\n              //                      name: item[0] + ' Top10',\n              type: 'effectScatter',\n              coordinateSystem: 'GLMap',\n              zlevel: 2,\n              rippleEffect: {\n                brushType: 'stroke',\n              },\n              label: {\n                normal: {\n                  show: true,\n                  position: 'right',\n                  formatter: '{b}',\n                },\n              },\n              symbolSize: function (val) {\n                return val[2] / 6\n              },\n              itemStyle: {\n                normal: {\n                  color: function (params) {\n                    var tmp = params.data.value[2]\n                    if (tmp < 100) {\n                      return 'green'\n                    } else if (tmp > 150) {\n                      return 'red'\n                    } else {\n                      return 'yellow'\n                    }\n                  },\n                },\n              },\n              data: item[1].map(function (dataItem) {\n                return {\n                  name: dataItem[1].name,\n                  value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value]),\n                }\n              }),\n            }\n          )\n        })\n\n        var option = {\n          animation: false,\n          //backgroundColor: '#404a59',\n          backgroundColor: 'rgba(116, 112, 124, 0.2)',\n          title: {\n            text: '北京病人就诊流向图',\n            subtext: '(1月份统计结果)',\n            left: 'center',\n            textStyle: {\n              color: '#fff',\n            },\n            subtextStyle: {\n              color: 'yellow',\n              fontWeight: 'bold',\n            },\n          },\n          tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if (params.seriesIndex === 2 || params.seriesIndex === 5 || params.seriesIndex === 8) {\n                return params.name + ' ' + params.seriesName + ' ' + params.data.value[2] + ' 人次'\n              } else if (params.seriesIndex === 1 || params.seriesIndex === 4 || params.seriesIndex === 7) {\n                return params.data.fromName + '→' + params.data.toName\n              }\n            },\n          },\n          legend: {\n            orient: 'vertical',\n            top: '6%',\n            left: 'center',\n            data: ['北京市'],\n            textStyle: {\n              color: '#fff',\n            },\n            selectedMode: 'single',\n          },\n          GLMap: {},\n          series: mySeries,\n        }\n\n        return option\n      }","html":"","externalScripts":"","updaterUID":"obd-oD5FRlmc-cSp4ho6UruvdLFzXuqoS1H","theme":"","layout":"","viewCount":0,"userName":"汤***j","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrtrtH9KD6.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"汤***j"}}