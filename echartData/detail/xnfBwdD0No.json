{"status":0,"data":{"cid":"xnfBwdD0No","authorUid":"obd-oMuVUEhRH-KU8ZOkZx0aApOOJzRRH27","authorUserName":"Y***D","title":"项目概览","description":"监控项目集群  点击闪点查看详情","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-23T03:25:57.000Z","lastUpdateTime":"2020-07-23T03:25:57.000Z","auth":1,"uid":"obd-oMuVUEhRH-KU8ZOkZx0aApOOJzRRH27","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-23T03:25:57.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1595473893338-SpJOkOU_l.json\";\n\n// var uploadedDataURL = \"/asset/get/s/data-1595468790318-hKTS8IYn1.json\";\n\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\n// var uploadedDataURL = \"/asset/get/s/data-1482909892121-BJ3auk-Se.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('guizhou', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '黔南信创项目2020001': [107.369999, 26.758219],\n        '黔南信创项目2020002': [107.517196, 25.858119],\n        '黔南信创项目2020003': [106.917156, 25.658219]\n    }\n    var dataTooltip = [{\n            name: '黔南信创项目2020001',\n            value: 89\n        },\n        {\n            name: '黔南信创项目2020002',\n            value: 70\n        },\n        {\n            name: '黔南信创项目2020003',\n            value: 60\n        }\n    ];\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value)\n                });\n            }\n        }\n        return res;\n    };\n\n    option = {\n        backgroundColor: '#fff',\n        title: {\n            top: 20,\n            text: '项目概览',\n            subtext: '', //二级标题\n            x: 'center', //横坐标居中\n            textStyle: {\n                color: 'rgb(29, 134, 238)' //字体颜色\n            }\n        },\n\n        tooltip: { //提示框组件\n            trigger: 'item', //触发类型：数据项图形触发\n            formatter: function(params) {\n                if (typeof(params.value)[2] == \"undefined\") {\n                    return params.name;\n                } else {\n                    return params.name + ' : ' + params.value[2] + '%';\n                }\n            }\n        }, //提示框浮层内容格式器\n        visualMap: { //视觉映射组件\n            show: false, //否显示 visualMap-continuous 组件。如果设置为 false，不会显示，但是数据映射的功能还存在\n            max: 100, //指定 visualMapContinuous 组件的允许的最大值\n            seriesIndex: [1], //指定取哪个系列的数据，即哪个系列的 series.data,默认取所有系列\n            inRange: { //定义 在选中范围中 的视觉元素\n                color: ['#00467F', '#A5CC82'] // 蓝绿\n            }\n        },\n        geo: {\n            show: true, //是否显示\n            map: 'guizhou', //地图类型\n            zoom: 1,\n            label: { //图形上的文本标签，说明图形的数据信息，比如值，名称\n                normal: {\n                    show: true, //是否在普通状态下显示标签\n                },\n                emphasis: {\n                    show: false, //是否在高亮状态下显示标签\n                }\n            },\n            roam: true, //是否开启鼠标缩放和平移漫游\n            itemStyle: {\n                // normal: {\n                //     // areaColor: 'transparent',//地图颜色，透明\n                //     // borderColor: '#3fdaff',//地图边框颜色\n                //     // borderWidth:2,//边框宽度\n                //     // shadowColor: 'rgba(63, 218, 255, 0.5)',//阴影\n                //     areaColor: '#E6F1FF', //地图颜色，透明\n                //     borderColor: '#4395FF', //地图边框颜色\n                //     borderWidth: 1, //边框宽度\n                //     shadowColor: 'rgba(63, 218, 255, 0.5)', //阴影\n                //     // shadowOffsetX: -1,\n                //     // shadowOffsetY: 1,\n                // },\n                 normal: {\n                    borderColor: \"#3fdaff\",\n                    borderWidth: 1,\n                    areaColor: {\n                        type: \"radial\",\n                        x: 0.5,\n                        y: 0.5,\n                        r: 0.8,\n                        colorStops: [{\n                                offset: 0,\n                                color: \"rgba(147, 235, 248, 0)\", // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: \"rgba(147, 235, 248, .4)\", // 100% 处的颜色\n                            },\n                        ],\n                        globalCoord: false, // 缺省为 false\n                    },\n                    shadowColor: \"rgba(128, 217, 248, 1)\",\n                    // shadowColor: 'rgba(255, 255, 255, 1)',\n                    shadowOffsetX: -2,\n                    shadowOffsetY: 2,\n                    shadowBlur: 10,\n                },\n                emphasis: {\n                    // areaColor: '#3fdaff', //hover高亮时的颜色\n                    areaColor: '#E6F1FF', //hover高亮时的颜色\n                }\n            }\n        },\n        series: [\n            // {\n            //     type: 'map',\n            //     map: 'guizhou',\n            //     geoIndex: 1,\n            //     aspectScale: 0.75, //长宽比\n            //     showLegendSymbol: false, // 存在legend时显示\n            //     label: {\n            //         normal: {\n            //             show: true\n            //         },\n            //         emphasis: {\n            //             show: false,\n            //             textStyle: {\n            //                 color: '#black'\n            //             }\n            //         }\n            //     },\n            //     itemStyle: {\n            //         normal: {\n            //             borderColor: '#2980b9',\n            //             borderWidth: 1,\n            //             areaColor: '#E6F1FF'\n            //         },\n            //         emphasis: {\n            //             areaColor: '#E6F1FF',\n            //             borderWidth: 0,\n            //             color: 'green'\n            //         }\n            //     },\n            //     roam: true,\n            //     animation: true,\n            //     data: dataTooltip\n            // },\n            {\n                name: '项目闪点',\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(dataTooltip),\n                symbolSize: 15, //基点\n                showEffectOn: 'render',\n                rippleEffect: {\n                //涟漪特效相关配置。\n                period: 5, //动画的周期，秒数。\n                scale: 5, //波纹的最大缩放比例。\n                brushType: \"stroke\", //波纹的绘制方式，可选 'stroke' 和 'fill'。\n            },\n                hoverAnimation: true,\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        color:'black',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: 'rgb(0,210,122)', //修改圆圈的颜色\n                        shadowBlur: 10,\n                        shadowColor: '#05C3F9'\n                    }\n                },\n                zlevel: 1\n            },\n\n        ]\n    };\n    myChart.setOption(option);\n});\nmyChart.on('click',function(param){\n    console.log(param);\n    if(param.componentType =='series'){\n        console.log('闪点点击事件');\n        window.open(encodeURI('https://www.baidu.com/'))\n    }\n})","html":"","externalScripts":"","updaterUID":"obd-oMuVUEhRH-KU8ZOkZx0aApOOJzRRH27","theme":"","layout":"","viewCount":298,"userName":"Y***D","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnfBwdD0No.png?v=1595474758006","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","title","tooltip","visualMap"],"customTags":["geo"],"updaterUserName":"Y***D"}}