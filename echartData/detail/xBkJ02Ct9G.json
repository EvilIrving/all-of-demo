{"status":0,"data":{"cid":"xBkJ02Ct9G","authorUid":"bd-638421887","authorUserName":"玄魂玉","title":"豆瓣电影","description":"前100数据分析","latestVersion":1,"alwaysLatest":1,"createTime":"2018-03-29T03:25:58.000Z","lastUpdateTime":"2018-03-29T03:25:58.000Z","auth":2,"uid":"bd-638421887","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2018-03-29T03:25:58.000Z","code":"$.getJSON(\"https://api.douban.com/v2/movie/top250?count=100&callback=?\", {}, function(json) {\r\n    var xx = [];\r\n    var yy = ['1990~94', '1995~99', '2000~04', '2005~09', '2010~14', '2014~19'];\r\n    var data = generateData(json.subjects);\r\n\r\n    function generateData(value) {\r\n        var arr = [];\r\n        $.each(value, function(x, y) {\r\n            var n = '';\r\n            if (1990 <= parseInt(y.year) && parseInt(y.year) <= 1994) {\r\n                n = '1990~94'\r\n            } else if (1995 <= parseInt(y.year) && parseInt(y.year) <= 1999) {\r\n                n = '1995~99'\r\n            } else if (2000 <= parseInt(y.year) && parseInt(y.year) <= 2004) {\r\n                n = '2000~04'\r\n            } else if (2005 <= parseInt(y.year) && parseInt(y.year) <= 2009) {\r\n                n = '2005~09'\r\n            } else if (2010 <= parseInt(y.year) && parseInt(y.year) <= 2014) {\r\n                n = '2010~14'\r\n            } else if (2015 <= parseInt(y.year) && parseInt(y.year) <= 2019) {\r\n                n = '2014~19'\r\n            }\r\n\r\n\r\n            $.each(y.genres, function(i, lx) {\r\n                if (lx != '剧情') {\r\n                    if (xx.indexOf(lx) < 0) {\r\n                        xx.push(lx)\r\n                    }\r\n                    arr.push([lx, n, y.collect_count, y.rating.average, parseInt(Math.random() * 8 + 2), y.year, y.title, lx]);\r\n                }\r\n\r\n            })\r\n\r\n\r\n        })\r\n        return arr;\r\n    }\r\n\r\n    function lab(val) {\r\n        var num = 0;\r\n        $.each(data, function(i, item) {\r\n            if (item.indexOf(val) > -1) {\r\n                num++\r\n            }\r\n        })\r\n        return val + num;\r\n    }\r\n    option = {\r\n        backgroundColor: '#333',\r\n        tooltip: {\r\n            formatter: function(obj) {\r\n                var value = obj.value;\r\n                return '片名' + '：' + value[6] + '<br>' + '类别' + '：' + value[0] + '<br>';\r\n            }\r\n        },\r\n        visualMap: [\r\n            // {\r\n            //     dimension: 3,\r\n            //     show: false,\r\n            //     min: 2,\r\n            //     max: 10,\r\n            //     bottom: 0,\r\n            //     inRange: {\r\n            //         symbolSize: [10, 30]\r\n            //     }\r\n            // }, \r\n            {\r\n                dimension: 4,\r\n                show: false,\r\n                min: 2,\r\n                max: 10,\r\n                top: 0,\r\n                inRange: {\r\n                    symbolSize: [10, 40]\r\n                }\r\n            }, {\r\n                dimension: 7,\r\n                categories: xx,\r\n                textStyle: {\r\n                    color: '#fff'\r\n                },\r\n                formatter: function(value) {\r\n                    return lab(value);\r\n                },\r\n                inRange: {\r\n                    color: ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3', '#87d465', '#4b949d', '#744b9d', '#9d4b5e', '#9a9d4b', '#8d4b9d', '#a0b84b', '#eac892', '#92eadf', '#abea92', '#ea92a5', '#abc7f1', '#dfea92']\r\n                }\r\n            }\r\n        ],\r\n        xAxis3D: {\r\n            type: 'category',\r\n            name: '类别',\r\n            data: xx\r\n        },\r\n        yAxis3D: {\r\n            type: 'category',\r\n            name: '年代',\r\n            data: yy\r\n        },\r\n        zAxis3D: {\r\n            type: 'value',\r\n            name: '评论人数',\r\n        },\r\n        grid3D: {\r\n            boxWidth: 220,\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: '#fff'\r\n                }\r\n            },\r\n            axisPointer: {\r\n                show: false\r\n            },\r\n            viewControl: {\r\n                alpha: 10,\r\n                beta: 20,\r\n                distance: 200\r\n            },\r\n        },\r\n        series: [{\r\n            type: 'scatter3D',\r\n            name: '喜欢影片',\r\n            symbolSize: 20,\r\n            data: data,\r\n            label: {\r\n                show: true,\r\n                formatter: function(params) {\r\n                    return params.data[6]\r\n                }\r\n            }\r\n        }]\r\n    }\r\n    myChart.setOption(option)\r\n});","html":"","externalScripts":"http://gallerybox.echartsjs.com/dep/echarts/3.8.0/echarts.min.js,http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-638421887","theme":"","layout":"","viewCount":722,"userName":"玄魂玉","commentCount":1,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBkJ02Ct9G.png?v=1522293958803","isCustomThumbnail":0,"builtinTags":["category-work","grid3D","series-scatter3D","tooltip","visualMap"],"customTags":[],"updaterUserName":"玄魂玉"}}