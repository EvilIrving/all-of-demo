{"status":0,"data":{"cid":"xMrmLEweXl","authorUid":"bd-4199582992","authorUserName":"秀***起","title":"地图散点涟漪","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-26T05:35:58.000Z","lastUpdateTime":"2020-04-26T05:35:58.000Z","auth":2,"uid":"bd-4199582992","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-26T05:35:59.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n\r\n//geoCoordMap把所有可能出现的城市加到数组里面\r\nvar geoCoordMap = {\r\n    \"杭州\": [119.5313, 29.8773],\r\n    \"苏州\": [118.8062, 31.9208],\r\n    '上海': [121.4648, 31.2891],\r\n    \"天津\": [117.4219, 39.4189],\r\n    '深圳': [114.072026, 22.552194],\r\n    \"成都\": [103.9526, 30.7617],\r\n    \"郑州\": [113.4668, 34.6234],\r\n    \"宁波\": [121.640618, 29.86206],\r\n    \"合肥\": [117.29, 32.0581],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"广州\": [113.12244, 23.009505],\r\n    \"大连\": [123.1238, 42.1216],\r\n    \"青岛\": [117.1582, 36.8701],\r\n    '北京': [116.4551, 40.2539],\r\n    '义乌': [120.067209, 29.346921],\r\n    '东莞': [113.764742, 23.02039],\r\n    \"长沙\": [113.0823, 28.2568],\r\n    \"贵阳\": [106.6992, 26.7682],\r\n    '珠海': [113.556111, 22.250876],\r\n    '威海': [122.109148, 37.516889],\r\n    \"泉州\": [118.58, 24.93],\r\n    \"赤峰\": [118.87, 42.28],\r\n    \"厦门\": [118.1, 24.46],\r\n    \"福州\": [119.3, 26.08],\r\n    \"抚顺\": [123.97, 41.97],\r\n    \"汕头\": [116.69, 23.39],\r\n    \"宁波\": [121.56, 29.86],\r\n    \"海口\": [110.35, 20.02],\r\n    \"岳阳\": [113.09, 29.37],\r\n    \"武汉\": [114.31, 30.52],\r\n    \"义乌\": [120.06, 29.32],\r\n    \"唐山\": [118.02, 39.63],\r\n    \"石家庄\": [114.48, 38.03],\r\n    \"哈尔滨\": [126.63, 45.75],\r\n    \"兰州\": [103.73, 36.03],\r\n    \"贵阳\": [106.71, 26.57],\r\n    \"呼和浩特\": [111.65, 40.82],\r\n    \"南昌\": [115.89, 28.68],\r\n    \"佛山\": [113.11, 23.05],\r\n    \"汕头\": [116.69, 23.39],\r\n    \"烟台\": [121.39, 37.52],\r\n    \"威海\": [122.1, 37.5],\r\n};\r\n\r\n//2013年数据\r\nvar d1 = {\r\n    \"杭州\": 100,\r\n    \"苏州\": 2,\r\n    '上海': 21,\r\n    \"天津\": 4,\r\n    '深圳': 7,\r\n    \"郑州\": 7,\r\n    \"成都\": 5,\r\n    \"宁波\": 2,\r\n    \"合肥\": 1,\r\n    \"重庆\": 3,\r\n    \"广州\": 19,\r\n    \"大连\": 1,\r\n    \"青岛\": 2,\r\n    '北京': 16,\r\n    '义乌': 2,\r\n    '东莞': 1,\r\n    \"长沙\": 3,\r\n    \"贵阳\": 0,\r\n    '珠海': 0,\r\n    '威海': 0,\r\n    '南昌': 1,\r\n    '西安': 2,\r\n    '南京': 6,\r\n    '海口': 0,\r\n    '厦门': 3,\r\n    '沈阳': 3,\r\n    '无锡': 0,\r\n    '呼和浩特': 0,\r\n    '长春': 0,\r\n    '哈尔滨': 1,\r\n    '武汉': 5,\r\n    '南宁': 1,\r\n    '昆明': 1,\r\n    '兰州': 0,\r\n    '唐山': 0,\r\n    '石家庄': 2,\r\n    '太原': 1,\r\n    '赤峰': 0,\r\n    '抚顺': 0,\r\n    '珲春': 0,\r\n    '绥芬河': 0,\r\n    '徐州': 0,\r\n    '南通': 1,\r\n    '温州': 2,\r\n    '绍兴': 0,\r\n    '芜湖': 0,\r\n    '福州': 5,\r\n    '泉州': 2,\r\n    '赣州': 2,\r\n    '济南': 3,\r\n    '烟台': 0,\r\n    '洛阳': 1,\r\n    '黄石': 0,\r\n    '岳阳': 0,\r\n    '汕头': 0,\r\n    '佛山': 0,\r\n    '泸州': 0,\r\n    '海东': 0,\r\n    '银川': 0,\r\n};\r\n\r\nvar mapData = [];\r\n\r\nfor (var key in geoCoordMap) {\r\n    mapData.push({\r\n        \"year\": '2013',\r\n        \"name\": key,\r\n        \"value\": d1[key],\r\n    })\r\n}\r\nmapData.sort(function sortNumber(a, b) {\r\n    return a.value - b.value\r\n});\r\n\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n    echarts.registerMap('china', geoJson);\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n    optionXyMap01 = {\r\n        grid: {\r\n            right: '1%',\r\n            top: '15%',\r\n            bottom: '10%',\r\n            width: '20%'\r\n        },\r\n        tooltip: {\r\n            trigger: 'axis', // hover触发器\r\n            axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                shadowStyle: {\r\n                    color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                }\r\n            }\r\n        },\r\n        geo: {\r\n            show: true,\r\n            map: 'china',\r\n            roam: false,\r\n            zoom: 1,\r\n            center: [113.83531246, 34.0267395887],\r\n        },\r\n\r\n        series: [\r\n            //地图中闪烁的点\r\n            {\r\n                //  name: 'Top 5',\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                data: convertData(mapData.sort(function(a, b) {\r\n                    return b.value - a.value;\r\n                }).slice(0, 20)),\r\n                symbolSize: function(val) {\r\n                    return val[2] / 10;\r\n                },\r\n                showEffectOn: 'render',\r\n                rippleEffect: {\r\n                    brushType: 'stroke'\r\n                },\r\n                hoverAnimation: true,\r\n                label: {\r\n                    normal: {\r\n                        formatter: '{b}',\r\n                        position: 'right',\r\n                        show: true\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"#1DE9B6\",\r\n                        shadowBlur: 10,\r\n                        shadowColor: \"#1DE9B6\"\r\n                    }\r\n                },\r\n                zlevel: 1\r\n            },\r\n        ]\r\n    };\r\n    myChart.setOption(optionXyMap01);\r\n});","html":"","externalScripts":"","updaterUID":"bd-4199582992","theme":"","layout":"","viewCount":76,"userName":"秀***起","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xMrmLEweXl.png?v=1587879359197","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","tooltip"],"customTags":[],"updaterUserName":"秀***起"}}