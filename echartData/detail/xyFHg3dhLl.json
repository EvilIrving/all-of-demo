{"status":0,"data":{"cid":"xyFHg3dhLl","authorUid":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","authorUserName":"B***n","title":"高英杰微创新作品","description":"绵阳市对外交通量吸引比例，数据虚构","latestVersion":1,"alwaysLatest":1,"createTime":"2021-12-19T08:00:50.000Z","lastUpdateTime":"2021-12-19T08:00:50.000Z","auth":2,"uid":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-19T08:00:50.000Z","code":"var chinaGeoCoordMap = {\r\n    \"成都42%\": [104.075045,30.663774],\r\n    '绵阳市': [104.689584,31.476866],\r\n    \"重庆25%\": [106.55408,29.578697],\r\n    \"西安7%\": [108.94113,34.352069],\r\n    \"北京6%\": [116.382836,39.926047],\r\n    \"兰州6%\": [103.799085,36.114321],\r\n    \"武汉4%\": [114.285544,30.65433],\r\n    \"贵阳3%\": [106.669064,26.696559],\r\n    \"广州2%\": [113.218501,23.2084522],\r\n    \"南京2%\": [118.802027,32.095359],\r\n    \"上海1%\": [121.423696,31.320051]\r\n};\r\nvar chinaDatas = [\r\n    [{\r\n        name: '成都42%',\r\n        value: 0.42\r\n    }],\r\n    [{\r\n        name: '重庆25%',\r\n        value: 0.25\r\n    }],\r\n    [{\r\n        name: '西安7%',\r\n        value: 0.07\r\n    }],\r\n    [{\r\n        name: '北京6%',\r\n        value: 0.06\r\n    }],\r\n    [{\r\n        name: '兰州6%',\r\n        value: 0.06\r\n    }],\r\n    [{\r\n        name: '武汉4%',\r\n        value: 0.04\r\n    }],\r\n    [{\r\n        name: '贵阳3%',\r\n        value: 0.03\r\n    }],\r\n    [{\r\n        name: '广州2%',\r\n        value: 0.02\r\n    }],\r\n    [{\r\n        name: '南京2%',\r\n        value: 0.002\r\n    }],\r\n    [{\r\n        name: '上海1%',\r\n        value: 0.001\r\n    }],\r\n       ];\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = chinaGeoCoordMap[dataItem[0].name];\r\n        var toCoord = [104.689584,31.476866];\r\n        if (fromCoord && toCoord) {\r\n            res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[0].value\r\n            }, {\r\n                coord: toCoord,\r\n            }]);\r\n        }\r\n    }\r\n    return res;\r\n};\r\nvar series = [];\r\n[\r\n    ['绵阳市', chinaDatas]\r\n].forEach(function(item, i) {\r\n    console.log(item)\r\n    series.push({\r\n            type: 'lines',\r\n            zlevel: 1,\r\n            effect: {\r\n                show: true,\r\n                period: 3, //箭头指向速度，值越小速度越快\r\n                trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                symbol: 'arrow', //箭头图标\r\n                symbolSize: 5, //图标大小\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 2, //尾迹线条宽度\r\n                    opacity: 1, //尾迹线条透明度\r\n                    curveness: .1 //尾迹线条曲直度\r\n                }\r\n            },\r\n            data: convertData(item[1])\r\n        }, {\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 2,\r\n            rippleEffect: { //涟漪特效\r\n                period: 2, //动画时间，值越小速度越快\r\n                brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n                scale: 2 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right', //显示位置\r\n                    offset: [70, 0], //偏移设置\r\n                    formatter: function(params) { //圆环显示文字\r\n                        return params.data.name;\r\n                    },\r\n                    fontSize: 20,\r\n                     zlevel: 1,\r\n                    padding: [0,0,-100,-155]\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            symbol: 'circle',\r\n            symbolSize: function(val) {\r\n                return 20 + val[2] * 50; //圆环大小\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    show: false,\r\n                    color: '#f00'\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                return {\r\n                    name: dataItem[0].name,\r\n                    value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                };\r\n            }),\r\n        },\r\n        //被攻击点\r\n        {\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 1,\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: 'stroke',\r\n                scale: 4\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    //offset:[5, 0],\r\n                    color: '#0f0',\r\n                    formatter: '{b}',\r\n                    textStyle: {\r\n                        color: \"#f0\",\r\n                        fontSize: 20\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#f60\"\r\n                }\r\n            },\r\n            symbol: 'pin',\r\n            symbolSize: 50,\r\n            data: [{\r\n                name: item[0],\r\n                value: chinaGeoCoordMap[item[0]].concat([10]),\r\n            }],\r\n        }\r\n    );\r\n});\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        backgroundColor: 'rgba(166, 200, 76, 0.82)',\r\n        borderColor: '#FFFFCC',\r\n        showDelay: 0,\r\n        hideDelay: 0,\r\n        enterable: true,\r\n        transitionDuration: 0,\r\n        extraCssText: 'z-index:100',\r\n        formatter: function(params, ticket, callback) {\r\n            //根据业务自己拓展要显示的内容\r\n            var res = \"\";\r\n            var name = params.name;\r\n            var value = params.value[params.seriesIndex + 1];\r\n            res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\r\n            return res;\r\n        }\r\n    },\r\n    backgroundColor: \"#013954\",\r\n    title: {\r\n            text: '绵阳市\\n对主要城市的交通吸引',\r\n            left: 'center',\r\n            textStyle: {\r\n                color: '#fff',\r\n                fontSize: 30\r\n            }\r\n        },\r\n    visualMap: { //图例值控制\r\n        min: 0,\r\n        max: 1,\r\n        calculable: true,\r\n        show: true,\r\n        color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    geo: {\r\n        map: 'china',\r\n        zoom: 1.2,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true, //是否允许缩放\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(51, 69, 89, .5)', //地图背景色\r\n                borderColor: '#516a89', //省市边界线00fcff 516a89\r\n                borderWidth: 2\r\n            },\r\n            emphasis: {\r\n                color: 'rgba(37, 43, 61, .5)' //悬浮背景\r\n            }\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","theme":"","layout":"","viewCount":0,"userName":"B***n","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xyFHg3dhLl.png?v=1639900850938","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"B***n"}}