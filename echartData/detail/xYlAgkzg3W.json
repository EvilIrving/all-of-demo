{"status":0,"data":{"cid":"xYlAgkzg3W","authorUid":"obd-oNjFNTw3WJQtsAaZ-bD3oKEiWUxyVCk","authorUserName":"B***8","title":"营商环境榜单","description":"","latestVersion":17,"alwaysLatest":0,"createTime":"2021-08-19T04:28:39.000Z","lastUpdateTime":"2021-08-19T06:55:20.000Z","auth":2,"uid":"obd-oNjFNTw3WJQtsAaZ-bD3oKEiWUxyVCk","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":17,"parentVersion":16,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-19T06:55:20.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n\r\n//geoCoordMap把所有可能出现的城市加到数组里面\r\nvar geoCoordMap = {\r\n    '北京': [116.4551, 40.2539],\r\n    '深圳': [114.072026, 22.552194],\r\n    '上海': [121.4648, 31.2891],\r\n    \"广州\": [113.27, 23.13],\r\n    \"杭州\": [119.5313, 29.8773],\r\n    \"苏州\": [120.59, 31.29],\r\n    \"成都\": [103.9526, 30.7617],\r\n    \"武汉\": [114.31, 30.52],\r\n    \"南京\": [118.80, 32.06],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"青岛\": [120.39, 36.06],\r\n    \"宁波\": [121.640618, 29.86206],\r\n    \"西安\": [108.94, 38.34],\r\n    \"长沙\": [113.0823, 28.2568],\r\n    \"济南\": [117.12, 36.65],\r\n    \"天津\": [117.4219, 39.4189],\r\n    \"郑州\": [113.4668, 34.6234],\r\n    \"厦门\": [118.1, 24.46],\r\n    \"合肥\": [117.29, 32.0581],\r\n    '东莞': [113.764742, 23.02039],\r\n    \"无锡\": [120.31, 31.49],\r\n    \"佛山\": [113.11, 23.05],\r\n    '珠海': [113.556111, 22.250876],\r\n    '昆明': [102.83, 24.88],\r\n    '沈阳': [123.47, 41.68],\r\n};\r\n\r\n//市场活力\r\nvar d1 = {\r\n    '北京': 75.52,\r\n    '深圳': 71.30,\r\n    '上海': 71.85,\r\n    \"广州\": 52.51,\r\n    \"杭州\": 48.32,\r\n    \"苏州\": 56.44,\r\n    \"成都\": 49.35,\r\n    '武汉': 36.11,\r\n    '南京': 42.49,\r\n    \"重庆\": 41.70,\r\n    \"青岛\": 38.25,\r\n    \"宁波\": 39.69,\r\n    '西安': 43.48,\r\n    \"长沙\": 36.97,\r\n    '济南': 35.25,\r\n    \"天津\": 34.79,\r\n    \"郑州\": 35.95,\r\n    '厦门': 34.42,\r\n    \"合肥\": 32.63,\r\n    '东莞': 35.61,\r\n    '无锡': 42.62,\r\n    '佛山': 31.05,\r\n    '珠海': 32.73,\r\n    '昆明': 37.27,\r\n    '沈阳': 27.65,\r\n};\r\n\r\n//科技创新\r\nvar d2 = {\r\n    '北京': 91.14,\r\n    '深圳': 74.90,\r\n    '上海': 55.93,\r\n    \"广州\": 31.68,\r\n    \"杭州\": 30.79,\r\n    \"苏州\": 33.06,\r\n    \"成都\": 25.30,\r\n    '武汉': 25.78,\r\n    '南京': 31.21,\r\n    \"重庆\": 19.44,\r\n    \"青岛\": 24.90,\r\n    \"宁波\": 28.97,\r\n    '西安': 31.90,\r\n    \"长沙\": 21.72,\r\n    '济南': 16.18,\r\n    \"天津\": 29.42,\r\n    \"郑州\": 14.79,\r\n    '厦门': 21.90,\r\n    \"合肥\": 21.84,\r\n    '东莞': 29.04,\r\n    '无锡': 20.50,\r\n    '佛山': 19.73,\r\n    '珠海': 24.40,\r\n    '昆明': 9.67,\r\n    '沈阳': 16.50,\r\n};\r\n//人力资源\r\nvar d3 = {\r\n    '北京': 68.80,\r\n    '深圳': 70.12,\r\n    '上海': 61.73,\r\n    \"广州\": 68.83,\r\n    \"杭州\": 55.63,\r\n    \"苏州\": 47.35,\r\n    \"成都\": 64.14,\r\n    '武汉': 57.46,\r\n    '南京': 49.37,\r\n    \"重庆\": 57.49,\r\n    \"青岛\": 45.31,\r\n    \"宁波\": 43.15,\r\n    '西安': 57.87,\r\n    \"长沙\": 51.51,\r\n    '济南': 47.69,\r\n    \"天津\": 42.82,\r\n    \"郑州\": 59.35,\r\n    '厦门': 44.11,\r\n    \"合肥\": 47.69,\r\n    '东莞': 44.08,\r\n    '无锡': 37.29,\r\n    '佛山': 45.89,\r\n    '珠海': 40.33,\r\n    '昆明': 48.79,\r\n    '沈阳': 43.14,\r\n};\r\n//成本节约\r\nvar d4 = {\r\n    '北京': 12.74,\r\n    '深圳': 36.89,\r\n    '上海': 26.69,\r\n    \"广州\": 55.26,\r\n    \"杭州\": 56.99,\r\n    \"苏州\": 70.55,\r\n    \"成都\": 72.86,\r\n    '武汉': 74.20,\r\n    '南京': 55.09,\r\n    \"重庆\": 73.48,\r\n    \"青岛\": 73.40,\r\n    \"宁波\": 61.72,\r\n    '西安': 75.70,\r\n    \"长沙\": 71.86,\r\n    '济南': 72.55,\r\n    \"天津\": 64.46,\r\n    \"郑州\": 74.87,\r\n    '厦门': 72.87,\r\n    \"合肥\": 81.74,\r\n    '东莞': 72.05,\r\n    '无锡': 71.69,\r\n    '佛山': 74.01,\r\n    '珠海': 69.82,\r\n    '昆明': 75.66,\r\n    '沈阳': 84.20,\r\n};\r\n//公共服务\r\nvar d5 = {\r\n    '北京': 63.56,\r\n    '深圳': 44.66,\r\n    '上海': 64.01,\r\n    \"广州\": 50.82,\r\n    \"杭州\": 56.58,\r\n    \"苏州\": 58.01,\r\n    \"成都\": 48.92,\r\n    '武汉': 50.54,\r\n    '南京': 56.38,\r\n    \"重庆\": 45.79,\r\n    \"青岛\": 48.66,\r\n    \"宁波\": 51.36,\r\n    '西安': 39.73,\r\n    \"长沙\": 46.77,\r\n    '济南': 53.13,\r\n    \"天津\": 49.51,\r\n    \"郑州\": 43.51,\r\n    '厦门': 39.56,\r\n    \"合肥\": 39.83,\r\n    '东莞': 36.13,\r\n    '无锡': 50.92,\r\n    '佛山': 42.43,\r\n    '珠海': 41.48,\r\n    '昆明': 40.29,\r\n    '沈阳': 52.35,\r\n};\r\n//基础设施\r\nvar d6 = {\r\n    '北京': 36.80,\r\n    '深圳': 39.53,\r\n    '上海': 54.92,\r\n    \"广州\": 64.99,\r\n    \"杭州\": 29.94,\r\n    \"苏州\": 28.49,\r\n    \"成都\": 21.22,\r\n    '武汉': 33.75,\r\n    '南京': 27.74,\r\n    \"重庆\": 36.36,\r\n    \"青岛\": 46.18,\r\n    \"宁波\": 44.75,\r\n    '西安': 22.28,\r\n    \"长沙\": 29.35,\r\n    '济南': 49.39,\r\n    \"天津\": 34.40,\r\n    \"郑州\": 24.84,\r\n    '厦门': 23.48,\r\n    \"合肥\": 21.44,\r\n    '东莞': 32.76,\r\n    '无锡': 18.74,\r\n    '佛山': 27.24,\r\n    '珠海': 27.49,\r\n    '昆明': 19.34,\r\n    '沈阳': 15.73,\r\n};\r\n//生态环境\r\nvar d7 = {\r\n    '北京': 48.23,\r\n    '深圳': 60.20,\r\n    '上海': 56.05,\r\n    \"广州\": 60.40,\r\n    \"杭州\": 60.16,\r\n    \"苏州\": 56.13,\r\n    \"成都\": 48.19,\r\n    '武汉': 56.09,\r\n    '南京': 56.21,\r\n    \"重庆\": 60.23,\r\n    \"青岛\": 56.24,\r\n    \"宁波\": 58.17,\r\n    '西安': 47.85,\r\n    \"长沙\": 56.12,\r\n    '济南': 48.15,\r\n    \"天津\": 48.06,\r\n    \"郑州\": 48.19,\r\n    '厦门': 60.21,\r\n    \"合肥\": 56.16,\r\n    '东莞': 60.30,\r\n    '无锡': 56.20,\r\n    '佛山': 60.26,\r\n    '珠海': 60.34,\r\n    '昆明': 60.11,\r\n    '沈阳': 48.15,\r\n};\r\n//政策环境\r\nvar d8 = {\r\n    '北京': 89.87,\r\n    '深圳': 100,\r\n    '上海': 89.71,\r\n    \"广州\": 92.12,\r\n    \"杭州\": 87.95,\r\n    \"苏州\": 45.94,\r\n    \"成都\": 55.93,\r\n    '武汉': 65.68,\r\n    '南京': 69.62,\r\n    \"重庆\": 42.26,\r\n    \"青岛\": 51.78,\r\n    \"宁波\": 55.16,\r\n    '西安': 21.25,\r\n    \"长沙\": 38.66,\r\n    '济南': 35.10,\r\n    \"天津\": 52.23,\r\n    \"郑州\": 40.70,\r\n    '厦门': 68.42,\r\n    \"合肥\": 49.66,\r\n    '东莞': 37.52,\r\n    '无锡': 38.44,\r\n    '佛山': 42.52,\r\n    '珠海': 37.52,\r\n    '昆明': 32.68,\r\n    '沈阳': 32.97,\r\n};\r\n\r\nvar colors = [\r\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#7b0c00\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\r\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\r\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\r\n];\r\nvar colorIndex = 0;\r\n$(function() {\r\n    var year = [\"市场活力\", \"科技创新\", \"人力资源\", \"成本节约\", \"公共服务\", \"基础设施\",\"生态环境\",\"政策环境\"];\r\n    var mapData = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n    ];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var barData = [];\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData[0].push({\r\n            \"year\": '市场活力',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n        mapData[1].push({\r\n            \"year\": '科技创新',\r\n            \"name\": key,\r\n            \"value\": d2[key],\r\n        });\r\n        mapData[2].push({\r\n            \"year\": '人力资源',\r\n            \"name\": key,\r\n            \"value\": d3[key],\r\n        });\r\n        mapData[3].push({\r\n            \"year\": '成本节约',\r\n            \"name\": key,\r\n            \"value\": d4[key],\r\n        });\r\n        mapData[4].push({\r\n            \"year\": '公共服务',\r\n            \"name\": key,\r\n            \"value\": d5[key],\r\n        });\r\n        mapData[5].push({\r\n            \"year\": '基础设施',\r\n            \"name\": key,\r\n            \"value\": d6[key],\r\n        });\r\n        mapData[6].push({\r\n            \"year\": '生态环境',\r\n            \"name\": key,\r\n            \"value\": d7[key],    \r\n        });\r\n        mapData[7].push({\r\n            \"year\": '政策环境',\r\n            \"name\": key,\r\n            \"value\": d8[key],\r\n        });\r\n    }\r\n\r\n    for (var i = 0; i < mapData.length; i++) {\r\n        mapData[i].sort(function sortNumber(a, b) {\r\n            return a.value - b.value\r\n        });\r\n        barData.push([]);\r\n        categoryData.push([]);\r\n        for (var j = 0; j < mapData[i].length; j++) {\r\n            barData[i].push(mapData[i][j].value);\r\n            categoryData[i].push(mapData[i][j].name);\r\n        }\r\n    }\r\n\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        \r\n        optionXyMap01 = {//下方的轴\r\n            timeline: {\r\n                data: year,\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 3000,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '2%',\r\n                width: '80%',\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#777',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {//右边的柱状图\r\n                    right: '1%',\r\n                    top: '15%',\r\n                    bottom: '10%',\r\n                    width: '20%'\r\n                },\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                        }\r\n                    }\r\n                },\r\n                geo: {\r\n                    show: true,\r\n                    map: 'china',\r\n                    roam: true,\r\n                    zoom: 1,\r\n                    center: [113.83531246, 34.0267395887],\r\n                    label: {\r\n                        emphasis: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            borderColor: 'rgba(147, 235, 248, 1)',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 1)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#389BB7',\r\n                            borderWidth: 0\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n            options: []\r\n\r\n        };\r\n\r\n        for (var n = 0; n < year.length; n++) {\r\n            optionXyMap01.options.push({\r\n                backgroundColor: '#013954',\r\n                title:\r\n                    [{\r\n                            text: '营商环境指数TOP25城市八大指标表现',\r\n                            left: '25%',\r\n                            top: '7%',\r\n                            textStyle: {\r\n                                color: '#fff',\r\n                                fontSize: 25\r\n                            }\r\n                        },\r\n                        {\r\n                            id: 'statistic',\r\n                            text: year[n] + \"指数\",\r\n                            left: '75%',\r\n                            top: '8%',\r\n                            textStyle: {\r\n                                color: '#fff',\r\n                                fontSize: 25\r\n                            }\r\n                        }\r\n                    ],\r\n                xAxis: {\r\n                    type: 'value',\r\n                    scale: true,\r\n                    position: 'top',\r\n                    min: 0,\r\n                    boundaryGap: false,\r\n                    splitLine: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        show: false\r\n                    },\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLabel: {\r\n                        margin: 2,\r\n                        textStyle: {\r\n                            color: '#aaa'\r\n                        }\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'category',\r\n                    //  name: 'TOP 20',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: true,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    data: categoryData[n]\r\n                },\r\n\r\n                series: [\r\n                    //地图\r\n                    {\r\n                        type: 'map',\r\n                        map: 'china',\r\n                        geoIndex: 0,\r\n                        aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: false, // 存在legend时显示\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: false,\r\n                                textStyle: {\r\n                                    color: '#fff'\r\n                                }\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#031525',\r\n                                borderColor: '#FFFFFF',\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7'\r\n                            }\r\n                        },\r\n                        animation: false,\r\n                        data: mapData\r\n                    },\r\n                    //地图中闪烁的点\r\n                    {\r\n                        //  name: 'Top 5',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n].sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 25)),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 2;\r\n                        },\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                shadowBlur: 10,\r\n                                shadowColor: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    //柱状图\r\n                    {\r\n                        zlevel: 1.5,\r\n                        type: 'bar',\r\n                        symbol: 'none',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        data: barData[n]\r\n                    }\r\n                ]\r\n            })\r\n        }\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});\r\n\r\n","html":"","externalScripts":"","updaterUID":"obd-oNjFNTw3WJQtsAaZ-bD3oKEiWUxyVCk","theme":"","layout":"","viewCount":0,"userName":"B***8","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYlAgkzg3W.png?v=1629356120434","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"B***8"}}