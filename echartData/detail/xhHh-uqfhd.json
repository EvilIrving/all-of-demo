{"status":0,"data":{"cid":"xhHh-uqfhd","authorUid":"obd-o-xe63CCY7-j2x7camMzPwQIU7WkvAY","authorUserName":"中***机","title":"产线运行状态","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-21T08:15:25.000Z","lastUpdateTime":"2021-07-21T08:15:25.000Z","auth":2,"uid":"obd-o-xe63CCY7-j2x7camMzPwQIU7WkvAY","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-21T08:15:25.000Z","code":"var datas = ['物料检测', '气密检测', '尺寸检测', '堆芯装配', '电堆封装', '电堆终检'];\nfunction dateFormat(fmt, date) {\n    let ret;\n    const opt = {\n        'Y+': date.getFullYear().toString(), // 年\n        'm+': (date.getMonth() + 1).toString(), // 月\n        'd+': date.getDate().toString(), // 日\n        'H+': date.getHours().toString(), // 时\n        'M+': date.getMinutes().toString(), // 分\n        'S+': date.getSeconds().toString(), // 秒\n        // 有其他格式化字符需求可以继续添加，必须转化成字符串\n    };\n    for (let k in opt) {\n        ret = new RegExp('(' + k + ')').exec(fmt);\n        if (ret) {\n            fmt = fmt.replace(ret[1], ret[1].length == 1 ? opt[k] : opt[k].padStart(ret[1].length, '0'));\n        }\n    }\n    return fmt;\n}\n\nfunction titleTime() {\n    var time = dateFormat('YYYY-mm-dd HH:MM:SS', new Date());\n    return time;\n}\n\nsetInterval(() => {\n    var now = titleTime();\n    var option = myChart.getOption();\n    option.title[0].text = '产线运行状态 ' + now;\n    myChart.setOption(option);\n}, 1000);\n\nvar colorData = [1, 0, 1, 1, 1, 0];\n\nvar legendData = [\n    {\n        name: '运行',\n        data: [1, 1, 1, 1, 1, 1, 1],\n    },\n    {\n        name: ' ',\n        data: [1, 1, 1, 1, 1, 1, 1],\n    },\n    {\n        name: '停止',\n        data: [1, 1, 1, 1, 1, 1, 1],\n    },\n];\nvar colorList = ['#62ff00', '#fff0', '#ff4a4a'];\nvar seriesList = [];\nfor (var i = 0; i < legendData.length; i++) {\n    seriesList.push({\n        type: 'bar',\n        name: legendData[i].name,\n        stack: '2',\n        legendHoverLink: false,\n        barWidth: 14,\n        itemStyle: {\n            normal: {\n                borderColor: colorList[i],\n                borderWidth: 3,\n                color: function (params) {\n                    if (params.componentIndex == 1) {\n                        return '#fff0';\n                    } else if (params.componentIndex == 0) {\n                        if (colorData[params.dataIndex] == 1) {\n                            return '#62ff00';\n                        } else {\n                            return '#fff0';\n                        }\n                    } else {\n                        if (colorData[params.dataIndex] == 0) {\n                            return '#ff4a4a';\n                        } else {\n                            return '#fff0';\n                        }\n                    }\n                },\n            },\n        } /*\n        label: {\n            show: false,\n            position: 'inside',\n            color:'#fff',\n        },*/,\n        data: legendData[i].data,\n    });\n}\noption = {\n    title: {\n        show: true,\n        text: '产线运行状态',\n        textStyle: {\n            color: '#fff',\n        },\n    },\n    backgroundColor: '#004a96',\n    tooltip: {\n        show: false,\n    } /*\n    legend: [\n        {\n            left: '10%',\n            top: '7%',\n            icon: 'react',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                color: '#000',\n            },\n            data: ['环境管控单元', '生态控件分区', '水环境管控分区'],\n        },\n        {\n            left: '10%',\n            top: '14%',\n            icon: 'react',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                color: '#000',\n            },\n            data: ['大气环境管控分区', '土壤污染风险管控分区', '自然资源管控分区', '库线管控分区'],\n        },\n        {\n            left: '10%',\n            top: '21%',\n            icon: 'react',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                color: '#000',\n            },\n            data: ['库线管控分区'],\n        },\n    ],*/,\n    grid: {\n        containLabel: true,\n        top: '12%',\n        left: '0%',\n        right: '1%',\n        bottom: '0%',\n    },\n    xAxis: {\n        show: false,\n    },\n    yAxis: [\n        {\n            inverse: true,\n            data: datas,\n            axisLabel: {\n                margin: 140,\n                fontSize: 16,\n                align: 'left',\n                color: '#fff',\n                nterval: 0, //强制显示文字\n            },\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisPointer: {\n                label: {\n                    show: true,\n                    margin: 30,\n                },\n            },\n        },\n        {\n            show: false,\n            data: datas,\n            axisLine: {\n                show: false,\n            },\n        },\n    ],\n    series: seriesList,\n};\n// 3.配置项和数据给实例化对象\nmyChart.setOption(option);\n\n/*var option1 =  myChart.getOption();\n   console.log(option1)*/\n","html":"","externalScripts":"","updaterUID":"obd-o-xe63CCY7-j2x7camMzPwQIU7WkvAY","theme":"","layout":"","viewCount":0,"userName":"中***机","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhHh-uqfhd.png?v=1626855325756","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"中***机"}}