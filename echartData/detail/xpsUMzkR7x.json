{"status":0,"data":{"cid":"xpsUMzkR7x","authorUid":"obd-ojP2gHAckVtfwspDyYC5FR1RH3Sj8E7","authorUserName":"最***平","title":"地图","description":"","latestVersion":15,"alwaysLatest":1,"createTime":"2020-06-15T14:55:14.000Z","lastUpdateTime":"2021-11-25T07:59:00.000Z","auth":1,"uid":"obd-ojP2gHAckVtfwspDyYC5FR1RH3Sj8E7","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":15,"parentVersion":14,"echartsVersion":"4.9.0","versionCreateTime":"2021-11-25T07:59:00.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1637826904039-zHU2nal-3.json\";\n\n\n\nmyChart.showLoading('default', {\n    text: '统计中，请稍候...',\n    maskColor: '#2957A2',\n    textColor: '#fff',\n});\n\nvar mapDate = [\n  {\n   count:2,\n   sourceLat:'39.66064453125',\n   sourceLng: '115.51025390625',\n   targetName: '国家体育馆',\n   targetId: '001'\n  },\n   {\n   count:2,\n   sourceLat:'39.57275390625',\n   sourceLng: '115.99365234375',\n   targetName: '国家体育馆',\n   targetId: '001'\n  }\n ]\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = [dataItem.sourceLng,dataItem.sourceLat];\n        var toCoord = [116.33224936, 39.944965353];\n        if (fromCoord && toCoord) {\n            res.push([{\n                coord: fromCoord,\n                value: dataItem.count\n            }, {\n                coord: toCoord\n            }]);\n        }\n    }\n    return res;\n};\n\nvar series = [];\n\n    series.push({\n            type: 'lines',\n            zlevel: 2,\n            effect: {\n                show: true,\n                period: 4, //箭头指向速度，值越小速度越快\n                trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                symbol: 'arrow', //箭头图标\n                symbolSize: 15, //图标大小\n            },\n            lineStyle: {\n                normal: {\n                    width: 1, //尾迹线条宽度\n                    opacity: 1, //尾迹线条透明度\n                    curveness: .1 //尾迹线条曲直度\n                }\n            },\n            data: convertData(mapDate)\n        }, {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: { //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: 'stroke', //波纹绘制方式 stroke, fill\n                scale: 8 //波纹圆环最大限制，值越大波纹越大\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right', //显示位置\n                    offset: [5, 0], //偏移设置\n                    formatter: function(params) { //圆环显示文字\n                        return params.data.name;\n                    },\n                    fontSize: 16\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: 'circle',\n            symbolSize: function(val) {\n                return 5 + val[2] * 2; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: false,\n                    color: '#f00'\n                }\n            },\n            data: mapDate.map(function(dataItem) {\n                return {\n                    name: '',\n                    value: [dataItem.sourceLng,dataItem.sourceLat,dataItem.count]\n                };\n            }),\n        },\n        //被攻击点\n        {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: {\n                period: 4,\n                brushType: 'stroke',\n                scale: 8\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right', //显示位置\n                    offset: [5, 0], //偏移设置\n                    formatter: function(params) { //圆环显示文字\n                        return params.data.name;\n                    },\n                    fontSize: 16\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: 'circle',\n            symbolSize: function(val) {\n                return 2 + val[2] * 2; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: false,\n                    color: '#0f0'\n                }\n            },\n            data: [{\n                name: '国家体育馆',\n                value: ['116.33224936','39.944965353',10],\n            }],\n        }\n    );\n\nvar mapInit = () => { \n    $.getJSON(uploadedDataURL, function (geoJson) {\n        echarts.registerMap('bj', geoJson);\n        myChart.hideLoading();\n        option = {\n            tooltip: {\n                trigger: 'item',\n                backgroundColor: 'rgba(166, 200, 76, 0.82)',\n                borderColor: '#FFFFCC',\n                showDelay: 0,\n                hideDelay: 0,\n                enterable: true,\n                transitionDuration: 0,\n                extraCssText: 'z-index:100',\n                formatter: function(params, ticket, callback) {\n                    //根据业务自己拓展要显示的内容\n                    var res = \"\";\n                    var name = params.name;\n                    var value = params.value[params.seriesIndex + 1];\n                    res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\n                    return res;\n                }\n            },\n            backgroundColor: \"#013954\",\n            visualMap: { //图例值控制\n                min: 0,\n                max: 6,\n                calculable: true,\n                show: true,\n                color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\n                textStyle: {\n                    color: '#fff'\n                }\n            },\n            geo: {\n                map: 'bj',\n                zoom: 1.2,\n                label: {\n                    emphasis: {\n                        show: false\n                    }\n                },\n                roam: true, //是否允许缩放\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(51, 69, 89, .5)', //地图背景色\n                        borderColor: '#516a89', //省市边界线00fcff 516a89\n                        borderWidth: 1\n                    },\n                    emphasis: {\n                        color: 'rgba(37, 43, 61, .5)' //悬浮背景\n                    }\n                }\n            },\n            series: series\n        };\n        myChart.setOption(option);\n    });\n};\nmapInit();\n","html":"","externalScripts":"","updaterUID":"obd-oj3TGM1V2cBGJDIOGbvV2TIt_iZK_DD","theme":"","layout":"","viewCount":6365,"userName":"最***平","commentCount":0,"starCount":19,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpsUMzkR7x.png?v=1637827140335","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-map","series-scatter","timeline"],"customTags":[],"updaterUserName":"w***2"}}