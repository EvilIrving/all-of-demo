{"status":0,"data":{"cid":"xeO-0w4LTP","authorUid":"bd-2469886102","authorUserName":"芊***8","title":"堆叠柱图触发点击2","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-15T08:45:50.000Z","lastUpdateTime":"2020-12-15T08:45:50.000Z","auth":2,"uid":"bd-2469886102","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-15T08:46:14.000Z","code":"let labels = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];\n\noption = {\n    tooltip: {\n        // triggerOn:'none',\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        }\n    },\n    legend: {\n        data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    xAxis: [{\n        type: 'value'\n    }, {\n        type: 'value',\n        show: false,\n    }],\n    yAxis: {\n        type: 'category',\n        data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\n    },\n    series: [\n\n        {\n            name: '直接访问',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                show: true,\n                position: 'insideRight'\n            },\n            data: [320, 302, 301, 334, 390, 330, 320],\n            // xAxisIndex:0,\n        },\n        {\n            name: '邮件营销',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                show: true,\n                position: 'insideRight'\n            },\n            data: [120, 132, 101, 134, 90, 230, 210]\n        },\n        {\n            name: '联盟广告',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                show: true,\n                position: 'insideRight'\n            },\n            data: [220, 182, 191, 234, 290, 330, 310]\n        },\n        {\n            name: '视频广告',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                show: true,\n                position: 'insideRight'\n            },\n            data: [150, 212, 201, 154, 190, 330, 410]\n        },\n        {\n            name: '搜索引擎',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                show: true,\n                position: 'insideRight'\n            },\n            data: [820, 832, 901, 934, 1290, 1330, 1320]\n        },\n        {\n            name: '辅助bar',\n            type: 'bar',\n            // stack: '总量',\n            barGap: '-100%',\n            label: {\n                show: false,\n            },\n            data: [0, 0, 0, 0, 0, 0, 0],\n            xAxisIndex: 1,\n            // zlevel:-1,\n            itemStyle: {\n                color: 'rgba(0,0,0,.2)'\n            }\n        },\n    ]\n};\n\nlet itemIndex = -1;\n\nmyChart.on('click', e => {\n    console.log(e.seriesIndex)\n    if (e.componentType === \"series\") {\n        const index = e.dataIndex;\n\n        if (itemIndex === index) {\n\n            option.series[option.series.length - 1].data[itemIndex] = 0;\n            myChart.setOption(option)\n\n            itemIndex = -1;\n        } else {\n\n            option.series[option.series.length - 1].data[itemIndex] = 0;\n            option.series[option.series.length - 1].data[index] = 1;\n            myChart.setOption(option)\n\n            itemIndex = index\n\n        }\n    }\n\n\n})\n\n// var currentIndex = -1;\n// setInterval(function() {\n//     var dataLen = option.series[0].data.length;\n\n//     // 取消之前高亮的图形\n//     myChart.dispatchAction({\n//         type: 'downplay',\n//         seriesIndex: 0,\n//         dataIndex: currentIndex\n//     });\n//     currentIndex = (currentIndex + 1) % dataLen;\n//     // 高亮当前图形\n//     myChart.dispatchAction({\n//         type: 'highlight',\n//         seriesIndex: 0,\n//         dataIndex: currentIndex,\n//     });\n//     // 显示 tooltip\n//     myChart.dispatchAction({\n//         type: 'showTip',\n//         seriesIndex: 0,\n//         dataIndex: currentIndex\n//     });\n// }, 1000);","html":"","externalScripts":"","updaterUID":"bd-2469886102","theme":"","layout":"","viewCount":75,"userName":"芊***8","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xeO-0w4LTP.png?v=1608021974321","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"芊***8"}}