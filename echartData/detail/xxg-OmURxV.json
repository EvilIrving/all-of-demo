{"status":0,"data":{"cid":"xxg-OmURxV","authorUid":"obd-ojW2_PfpV3_JY4pw_BrnJYY7SppffEr","authorUserName":"灬***鸟","title":"内江地图变化","description":"内江地图变化","latestVersion":3,"alwaysLatest":1,"createTime":"2021-04-16T09:07:25.000Z","lastUpdateTime":"2021-04-16T09:07:25.000Z","auth":2,"uid":"obd-ojW2_PfpV3_JY4pw_BrnJYY7SppffEr","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2021-04-16T09:33:31.000Z","code":" var uploadedDataURL = \"https://geo.datav.aliyun.com/areas_v2/bound/511000_full.json\";\n\n //如果想要修改，请点击上方克隆，然后在自己的版本上修改，不要在lz的版本上改！！\n\n\n\n var colors = [\n     [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\n     [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\n     [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\n ];\n var colorIndex = 0;\n $(function() {\n     var geoCoordMap = {\n         '资中县': [104.85212, 29.76416],\n         '东兴区': [105.17157, 29.69684],\n         '市中区': [104.94698, 29.56942],\n         \"威远县\": [104.66885, 29.52742],\n         '隆昌市': [105.28773, 29.33948]\n\n     };\n     var year = [\"2014\", \"2015\", \"2016\", \"2017\", \"2018\",\"2019\"];\n     var mapData = [\n         [{\n             \"year\": '2014',\n             \"name\": \"资中县\",\n             \"value\": 1056\n         }, {\n             \"year\": '2014',\n             \"name\": \"东兴区\",\n             \"value\": 48\n         }, {\n             \"year\": '2014',\n             \"name\": \"市中区\",\n             \"value\": 3594\n         }, {\n             \"year\": '2014',\n             \"name\": \"威远县\",\n             \"value\": 108\n         }, {\n             \"year\": '2014',\n             \"name\": \"隆昌市\",\n             \"value\": 8542\n         }],\n         [{\n             \"year\": '2015',\n             \"name\": \"资中县\",\n             \"value\": 402\n         }, {\n             \"year\": '2015',\n             \"name\": \"东兴区\",\n             \"value\": 402\n         }, {\n             \"year\": '2015',\n             \"name\": \"市中区\",\n             \"value\": 402\n         }, {\n             \"year\": '2015',\n             \"name\": \"威远县\",\n             \"value\": 402\n         }, {\n             \"year\": '2015',\n             \"name\": \"隆昌市\",\n             \"value\": 402\n         }],\n         [{\n             \"year\": '2016',\n             \"name\": \"资中县\",\n             \"value\": 402\n         }, {\n             \"year\": '2016',\n             \"name\": \"东兴区\",\n             \"value\": 402\n         }, {\n             \"year\": '2016',\n             \"name\": \"市中区\",\n             \"value\": 402\n         }, {\n             \"year\": '2016',\n             \"name\": \"威远县\",\n             \"value\": 402\n         }, {\n             \"year\": '2016',\n             \"name\": \"隆昌市\",\n             \"value\": 402\n         }],\n         [{\n             \"year\": '2017',\n             \"name\": \"资中县\",\n             \"value\": 402\n         }, {\n             \"year\": '2017',\n             \"name\": \"东兴区\",\n             \"value\": 402\n         }, {\n             \"year\": '2017',\n             \"name\": \"市中区\",\n             \"value\": 402\n         }, {\n             \"year\": '2017',\n             \"name\": \"威远县\",\n             \"value\": 402\n         }, {\n             \"year\": '2017',\n             \"name\": \"隆昌市\",\n             \"value\": 402\n         }],\n         [{\n             \"year\": '2018',\n             \"name\": \"资中县\",\n             \"value\": 402\n         }, {\n             \"year\": '2018',\n             \"name\": \"东兴区\",\n             \"value\": 402\n         }, {\n             \"year\": '2018',\n             \"name\": \"市中区\",\n             \"value\": 402\n         }, {\n             \"year\": '2018',\n             \"name\": \"威远县\",\n             \"value\": 402\n         }, {\n             \"year\": '2018',\n             \"name\": \"隆昌市\",\n             \"value\": 402\n         }],\n         [{\n             \"year\": '2019',\n             \"name\": \"资中县\",\n             \"value\": 402\n         }, {\n             \"year\": '2019',\n             \"name\": \"东兴区\",\n             \"value\": 402\n         }, {\n             \"year\": '2019',\n             \"name\": \"市中区\",\n             \"value\": 402\n         }, {\n             \"year\": '2019',\n             \"name\": \"威远县\",\n             \"value\": 402\n         }, {\n             \"year\": '2019',\n             \"name\": \"隆昌市\",\n             \"value\": 402\n         }]\n     ];\n\n     /*柱子Y名称*/\n     var categoryData = [];\n     var barData = [];\n     \n     for (var i = 0; i < mapData.length; i++) {\n         barData.push([]);\n         for (var j = 0; j < mapData[i].length; j++) {\n             barData[i].push(mapData[i][j].value)\n         }\n     }\n     $.getJSON(uploadedDataURL, function(geoJson) {\n\n         echarts.registerMap('china', geoJson);\n         var convertData = function(data) {\n             var res = [];\n             for (var i = 0; i < data.length; i++) {\n                 var geoCoord = geoCoordMap[data[i].name];\n                 if (geoCoord) {\n                     res.push({\n                         name: data[i].name,\n                         value: geoCoord.concat(data[i].value)\n                     });\n                 }\n             }\n             return res;\n         };\n\n         var convertToLineData = function(data, gps) {\n             var res = [];\n             for (var i = 0; i < data.length; i++) {\n                 var dataItem = data[i];\n                 var fromCoord = geoCoordMap[dataItem.name];\n                 debugger;\n                 var toCoord = gps; //郑州\n                 //  var toCoord = geoGps[Math.random()*3]; \n                 if (fromCoord && toCoord) {\n                     res.push([{\n                         coord: fromCoord,\n                         value: dataItem.value\n                     }, {\n                         coord: toCoord,\n                     }]);\n                 }\n             }\n             return res;\n         };\n\n         optionXyMap01 = {\n             timeline: {\n                 data: year,\n                 axisType: 'category',\n                 autoPlay: true,\n                 playInterval: 3000,\n                 left: '10%',\n                 right: '10%',\n                 bottom: '3%',\n                 width: '80%',\n                 //  height: null,\n                 label: {\n                     normal: {\n                         textStyle: {\n                             color: '#ddd'\n                         }\n                     },\n                     emphasis: {\n                         textStyle: {\n                             color: '#fff'\n                         }\n                     }\n                 },\n                 symbolSize: 10,\n                 lineStyle: {\n                     color: '#555'\n                 },\n                 checkpointStyle: {\n                     borderColor: '#777',\n                     borderWidth: 2\n                 },\n                 controlStyle: {\n                     showNextBtn: true,\n                     showPrevBtn: true,\n                     normal: {\n                         color: '#666',\n                         borderColor: '#666'\n                     },\n                     emphasis: {\n                         color: '#aaa',\n                         borderColor: '#aaa'\n                     }\n                 },\n\n             },\n             baseOption: {\n                 animation: true,\n                 animationDuration: 1000,\n                 animationEasing: 'cubicInOut',\n                 animationDurationUpdate: 1000,\n                 animationEasingUpdate: 'cubicInOut',\n                 grid: {\n                     right: '1%',\n                     top: '15%',\n                     bottom: '10%',\n                     width: '20%'\n                 },\n                 tooltip: {\n                     trigger: 'axis', // hover触发器\n                     axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                         type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                         shadowStyle: {\n                             color: 'rgba(150,150,150,0.1)' //hover颜色\n                         }\n                     }\n                 },\n                 geo: {\n                     show: true,\n                     map: 'china',\n                     roam: true,\n                     zoom: 1,\n                     center: [105.06776, 29.58698],\n                     label: {\n                         emphasis: {\n                             show: false\n                         }\n                     },\n                     itemStyle: {\n                         normal: {\n                             borderColor: 'rgba(147, 235, 248, 1)',\n                             borderWidth: 1,\n                             areaColor: {\n                                 type: 'radial',\n                                 x: 0.5,\n                                 y: 0.5,\n                                 r: 0.8,\n                                 colorStops: [{\n                                     offset: 0,\n                                     color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\n                                 }, {\n                                     offset: 1,\n                                     color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\n                                 }],\n                                 globalCoord: false // 缺省为 false\n                             },\n                             shadowColor: 'rgba(128, 217, 248, 1)',\n                             // shadowColor: 'rgba(255, 255, 255, 1)',\n                             shadowOffsetX: -2,\n                             shadowOffsetY: 2,\n                             shadowBlur: 10\n                         },\n                         emphasis: {\n                             areaColor: '#389BB7',\n                             borderWidth: 0\n                         }\n                     }\n                 },\n             },\n             options: []\n\n         };\n         for (var n = 0; n < year.length; n++) {\n             optionXyMap01.options.push({\n                 backgroundColor: '#051b4a',\n                 title: [{\n                         /* text: '地图',\n                          subtext: '内部数据请勿外传',\n                          left: 'center',\n                          textStyle: {\n                              color: '#fff'\n                          }*/\n                     },\n                     {\n                         id: 'statistic',\n                         text: year[n] + \"年数据统计情况\",\n                         left: '75%',\n                         top: '8%',\n                         textStyle: {\n                             color: '#fff',\n                             fontSize: 30\n                         }\n                     }\n                 ],\n                 xAxis: {\n                     type: 'value',\n                     scale: true,\n                     position: 'top',\n                     min: 0,\n                     boundaryGap: false,\n                     splitLine: {\n                         show: false\n                     },\n                     axisLine: {\n                         show: false\n                     },\n                     axisTick: {\n                         show: false\n                     },\n                     axisLabel: {\n                         margin: 2,\n                         textStyle: {\n                             color: '#aaa'\n                         }\n                     },\n                 },\n                 yAxis: {\n                     type: 'category',\n                     //  name: 'TOP 20',\n                     nameGap: 16,\n                     axisLine: {\n                         show: true,\n                         lineStyle: {\n                             color: '#ddd'\n                         }\n                     },\n                     axisTick: {\n                         show: false,\n                         lineStyle: {\n                             color: '#ddd'\n                         }\n                     },\n                     axisLabel: {\n                         interval: 0,\n                         textStyle: {\n                             color: '#ddd'\n                         }\n                     },\n                     data: categoryData\n                 },\n                 series: [\n                     //未知作用\n                     {\n                         //文字和标志\n                         name: 'light',\n                         type: 'scatter',\n                         coordinateSystem: 'geo',\n                         data: convertData(mapData[n]),\n                         symbolSize: function(val) {\n                             return val[2] / 10;\n                         },\n                         label: {\n                             normal: {\n                                 formatter: '{b}',\n                                 position: 'right',\n                                 show: true\n                             },\n                             emphasis: {\n                                 show: true\n                             }\n                         },\n                         itemStyle: {\n                             normal: {\n                                 color: colors[colorIndex][n]\n                             }\n                         }\n                     },\n                     //地图？\n                     {\n                         type: 'map',\n                         map: '内江市',\n                         geoIndex: 0,\n                         aspectScale: 0.75, //长宽比\n                         showLegendSymbol: false, // 存在legend时显示\n                         label: {\n                             normal: {\n                                 show: false\n                             },\n                             emphasis: {\n                                 show: false,\n                                 textStyle: {\n                                     color: '#fff'\n                                 }\n                             }\n                         },\n                         roam: true,\n                         itemStyle: {\n                             normal: {\n                                 areaColor: '#031525',\n                                 borderColor: '#FFFFFF',\n                             },\n                             emphasis: {\n                                 areaColor: '#2B91B7'\n                             }\n                         },\n                         animation: false,\n                         data: mapData\n                     },\n\n                     //柱状图\n                     {\n                         zlevel: 1.5,\n                         type: 'bar',\n                         symbol: 'none',\n                         itemStyle: {\n                             normal: {\n                                 color: colors[colorIndex][n]\n                             }\n                         },\n                         data: barData[n]\n                     }\n                 ]\n             })\n         }\n         myChart.setOption(optionXyMap01);\n     });\n });\n\n","html":"","externalScripts":"","updaterUID":"obd-ojW2_PfpV3_JY4pw_BrnJYY7SppffEr","theme":"","layout":"","viewCount":45,"userName":"灬***鸟","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xxg-OmURxV.png?v=1618565611293","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-map","series-scatter","timeline","title","tooltip"],"customTags":[],"updaterUserName":"灬***鸟"}}