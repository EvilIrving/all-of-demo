{"status":0,"data":{"cid":"xHyaV2kfVG","authorUid":"bd-446530220","authorUserName":"江帆198793","title":"多图合并","description":"多种数据图合并","latestVersion":4,"alwaysLatest":1,"createTime":"2018-01-09T07:16:04.000Z","lastUpdateTime":"2018-01-09T07:16:04.000Z","auth":1,"uid":"bd-446530220","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.8.0","versionCreateTime":"2018-05-15T11:27:17.000Z","code":"var unit = \"%\";\r\nvar color = \"red\";\r\nvar data = {\r\n    \"caseInfo\": [{\r\n        \"title\": \"报修未达标率\",\r\n        \"value\": [{\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"未达标回单率\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [20, 30, 40, 47, 12]\r\n            }, {\r\n                \"name\": \"未达标率\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [24, 31, 43, 41, 13]\r\n            }]\r\n        }, {\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"未达标及思虑\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [10, 20, 44, 42, 65]\r\n            }]\r\n\r\n        }, {\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"未达标\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"特约服务类\", \"投诉类\", \"建议类\", \"咨询类\", \"户内维修类\"],\r\n                \"yData\": [20, 30, 40, 47, 12]\r\n            }]\r\n        }, {\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"未达标及\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"特约服务类\", \"投诉类\", \"建议类\", \"咨询类\", \"户内维修类\"],\r\n                \"yData\": [20, 33, 40, 47, 12]\r\n            }]\r\n        }]\r\n    }, {\r\n        \"title\": \"投诉未达标\",\r\n        \"value\": [{\r\n            \"stack\": \"总量\",\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"特约服务类\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [1, 12, 11, 12, 15]\r\n            }, {\r\n                \"name\": \"投诉类\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 32, 21, 22, 23]\r\n            }, {\r\n                \"name\": \"建议类\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [12, 14, 16, 21, 24]\r\n            }, {\r\n                \"name\": \"咨询类\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 22, 13, 14, 12]\r\n            }, {\r\n                \"name\": \"户内维修类\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [15, 3, 12, 22, 12]\r\n            }]\r\n        }, {\r\n            \"stack\": \"总量1\",\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"特约服务类1\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [1, 12, 11, 12, 15]\r\n            }, {\r\n                \"name\": \"投诉类1\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 31, 21, 22, 23]\r\n            }, {\r\n                \"name\": \"建议类1\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [12, 14, 16, 21, 24]\r\n            }, {\r\n                \"name\": \"咨询类1\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 22, 13, 14, 12]\r\n            }, {\r\n                \"name\": \"户内维修类1\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [15, 3, 12, 22, 12]\r\n            }]\r\n        }]\r\n    }, {\r\n        \"title\": \"预收未达标\",\r\n        \"value\": [{\r\n            \"stack\": \"总量2\",\r\n            \"type\": \"bar\",\r\n            \"item\": [{\r\n                \"name\": \"特约服务类2\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [1, 12, 11, 12, 15]\r\n            }, {\r\n                \"name\": \"投诉类2\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 31, 21, 22, 23]\r\n            }, {\r\n                \"name\": \"建议类2\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [12, 14, 16, 21, 24]\r\n            }, {\r\n                \"name\": \"咨询类2\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [2, 22, 13, 14, 12]\r\n            }, {\r\n                \"name\": \"户内维修类2\",\r\n                \"id\": \"151518\",\r\n                \"xData\": [\"项目一\", \"项目二\", \"项目三\", \"项目四\", \"项目五\"],\r\n                \"yData\": [15, 3, 12, 22, 12]\r\n            }]\r\n        }, {\r\n            \"type\": \"pie\",\r\n            \"item\": [{\r\n                \"name\": \"下一\",\r\n                \"value\": 20,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"占比\",\r\n                \"value\": 30,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"天天\",\r\n                \"value\": 50,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"问我\",\r\n                \"value\": 60,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"液体\",\r\n                \"value\": 22,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"问我1\",\r\n                \"value\": 33,\r\n                \"id\": \"df323df\"\r\n            }]\r\n\r\n        }, {\r\n            \"type\": \"pie\",\r\n            \"item\": [{\r\n                \"name\": \"订单\",\r\n                \"value\": 20,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"二额\",\r\n                \"value\": 30,\r\n                \"id\": \"df323df\"\r\n            }, {\r\n                \"name\": \"水电费\",\r\n                \"value\": 60,\r\n                \"id\": \"df323df\"\r\n            }]\r\n        }]\r\n    }],\r\n    \"projectList\": [\r\n        [\"回单率未达标\", \"及时率未达标\", \"回单未达标\", \"时率未达标\"],\r\n        [\"未关闭统计图\", \"不满意统计图\"],\r\n        [\"未关闭明细\", \"突发事件分类统计图\", \"质量事故统计图\"]\r\n    ]\r\n}\r\nvar title = [];\r\nvar series = [];\r\nvar subTitle = \"\";\r\nvar grid = [];\r\nvar xAxis = [];\r\nvar yAxis = [];\r\nvar indexOne = -1;\r\nvar legend = [];\r\nfor (var k = 0; k < data.caseInfo.length; k++) {\r\n    var L = data.caseInfo.length;\r\n    var datas = data.caseInfo[k];\r\n    var y = Math.floor(k * (100 / L));\r\n    title.push({\r\n        text: datas.title,\r\n        y: y + '%',\r\n        left: 'left',\r\n        textStyle: {\r\n            color: color\r\n        }\r\n    });\r\n    var bottom = Math.floor((100 / L) * (L - 1));\r\n    for (var index = 0; index < datas.value.length; index++) {\r\n        indexOne++\r\n        if (datas.value[index].type != \"pie\") {\r\n            grid.push({\r\n                top: (y + 8) + \"%\",\r\n                width: Math.floor(100 / datas.value.length) + \"%\",\r\n                left: Math.floor(100 / datas.value.length * index) + \"%\",\r\n                bottom: (bottom - y + 2) + \"%\",\r\n                containLabel: true,\r\n                textStyle: {\r\n                    color: color\r\n                }\r\n            });\r\n            xAxis.push({\r\n                type: 'category',\r\n                gridIndex: indexOne,\r\n                data: datas.value[index].item[0].xData,\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: color\r\n                    }\r\n                },\r\n                axisLabel: {\r\n                    interval: 0,\r\n                    rotate: (function() {\r\n                        for (var w = 0; w < datas.value[index].item[0].xData.length; w++) {\r\n                            if (datas.value[index].item[0].xData[w].length > 3) {\r\n                                return 30\r\n                            } else {\r\n                                return 0\r\n                            }\r\n                        }\r\n                    })()\r\n                }\r\n            });\r\n            yAxis.push({\r\n                type: 'value',\r\n                gridIndex: indexOne,\r\n                axisLabel: {\r\n                    formatter: '{value}' + unit\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: color\r\n                    }\r\n                },\r\n            });\r\n            for (var m = 0; m < datas.value[index].item.length; m++) {\r\n                series.push({\r\n                    type: datas.value[index].type,\r\n                    data: datas.value[index].item[m].yData,\r\n                    stack: (function() {\r\n                        if (datas.value[index].stack) {\r\n                            return datas.value[index].stack;\r\n                        } else {\r\n                            return \"\";\r\n                        }\r\n                    })(),\r\n                    name: datas.value[index].item[m].name,\r\n                    xAxisIndex: indexOne,\r\n                    yAxisIndex: indexOne,\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            position: (function() {\r\n                                if (datas.value[index].stack) {\r\n                                    return \"inside\";\r\n                                } else {\r\n                                    return \"top\";\r\n                                }\r\n                            })(),\r\n                            formatter: (function() {\r\n                                if (datas.value[index].stack) {\r\n                                    return '{c}';\r\n                                } else {\r\n                                    return '{c}' + unit;\r\n                                }\r\n                            })(),\r\n                            textStyle: {\r\n                                color: color\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            // legend.push({\r\n            //     width: \"25%\",\r\n            //     type: \"scroll\",\r\n            //     top: 5 + y + \"%\",\r\n            //     left: Math.floor(100 / datas.value.length * index) + \"%\",\r\n            //     data: Object.keys(datas.value[index].item).map(function(key) {\r\n            //         return datas.value[index].item[key].name;\r\n            //     }),\r\n            //     textStyle: {\r\n            //         color: color\r\n            //     },\r\n            //     pageTextStyle: {\r\n            //         color: color\r\n            //     },\r\n            //     pageIconColor: color\r\n            // })\r\n        } else {\r\n            series.push({\r\n                type: datas.value[index].type,\r\n                radius: Math.floor(70 / L) - 3 + '%',\r\n                center: [Math.floor((100 / datas.value.length / 2) + (100 / datas.value.length) * index) + \"%\", Math.floor(y + (70 / L / 1.1)) + \"%\"],\r\n                data: datas.value[index].item,\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: 'inner',\r\n                        formatter: '{c}',\r\n                        textStyle: {\r\n                            color: color\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            // legend.push({\r\n            //     width: \"25%\",\r\n            //     type: \"scroll\",\r\n            //     top: 5 + y + \"%\",\r\n            //     left: Math.floor(100 / datas.value.length * index) + \"%\",\r\n            //     data: Object.keys(datas.value[index].item).map(function(key) {\r\n            //         return datas.value[index].item[key].name;\r\n            //     }),\r\n            //     textStyle: {\r\n            //         color: color\r\n            //     },\r\n            //     pageTextStyle: {\r\n            //         color: color\r\n            //     },\r\n            //     pageIconColor: color\r\n            // })\r\n        }\r\n    };\r\n    subTitle += '<div style=\"position:absolute;top:' + (y + 2) + '%;width:100%\">';\r\n    for (var x = 0; x < data.projectList[k].length; x++) {\r\n        subTitle += '<p style=\"color:' + color + ';float:left;text-align:center;width:' + Math.floor((100 / datas.value.length)) + '%\">';\r\n        subTitle += data.projectList[k][x];\r\n        subTitle += '</p>';\r\n    }\r\n    subTitle += '</div>';\r\n}\r\n\r\n\r\noption = {\r\n    color: ['#d84d4d', '#4dc7d7', '#fae76a', '#ce76fc', '#fcc15b', '#77fdb9', '#77c6fd', '#d9824d', '#ffada0', '#61c219', '#4d78d8', '#0ad08c', '#fa6aaa', '#48cfab', '#ffd5bc', '#af7eff', '#ffa9e8', '#ffbb91', '#ed6a55', '#5365a2'],\r\n    textStyle: {\r\n        fontStyle: \"normal\",\r\n    },\r\n    tooltip: {\r\n        //trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'cross',\r\n            crossStyle: {\r\n                color: '#999'\r\n            },\r\n            label: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: \"#333\"\r\n                }\r\n            }\r\n        },\r\n        showContent: true,\r\n        triggerOn: \"mousemove\"\r\n    },\r\n    // legend: legend,\r\n    grid: grid,\r\n    xAxis: xAxis,\r\n    yAxis: yAxis,\r\n    title: title,\r\n    series: series\r\n}\r\n$(\"#chart-panel\").append(subTitle);","html":"","externalScripts":"","updaterUID":"bd-2789773164","theme":"","layout":"","viewCount":1491,"userName":"江帆198793","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyaV2kfVG.png?v=1526383637507","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"csuwjlgx"}}