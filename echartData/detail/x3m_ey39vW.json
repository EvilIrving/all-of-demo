{"status":0,"data":{"cid":"x3m_ey39vW","authorUid":"bd-3951734745","authorUserName":"花***4","title":"map 两种点","description":"map 两种点","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-02T16:39:46.000Z","lastUpdateTime":"2019-03-02T16:39:46.000Z","auth":2,"uid":"bd-3951734745","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-02T16:39:46.000Z","code":"var name_title = \"name_title\"\nvar subname = 'subname\\n，\\nsubname'\nvar nameColor = \" rgb(55, 75, 113)\"\nvar name_fontFamily = '等线'\nvar subname_fontSize = 15\nvar name_fontSize = 18\nvar mapName = 'china'\nvar data = [\n    {name:\"北京\",value:177},\n    {name:\"天津\",value:42},\n    {name:\"河北\",value:102},\n    {name:\"山西\",value:81},\n    {name:\"内蒙古\",value:47},\n    {name:\"辽宁\",value:67},\n    {name:\"吉林\",value:82},\n    {name:\"黑龙江\",value:66},\n    {name:\"上海\",value:24},\n    {name:\"江苏\",value:92},\n    {name:\"浙江\",value:114},\n    {name:\"安徽\",value:109},\n    {name:\"福建\",value:116},\n    {name:\"江西\",value:91},\n    {name:\"山东\",value:119},\n    {name:\"河南\",value:137},\n    {name:\"湖北\",value:116},\n    {name:\"湖南\",value:114},\n    {name:\"重庆\",value:91},\n    {name:\"四川\",value:125},\n    {name:\"贵州\",value:62},\n    {name:\"云南\",value:83},\n    {name:\"西藏\",value:9},\n    {name:\"陕西\",value:80},\n    {name:\"甘肃\",value:56},\n    {name:\"青海\",value:10},\n    {name:\"宁夏\",value:18},\n    {name:\"新疆\",value:67},\n    {name:\"广东\",value:123},\n    {name:\"广西\",value:59},\n    {name:\"海南\",value:14},\n    ];\n    \nvar geoCoordMap = {};\nvar toolTipData = [ \n    {name:\"北京\",value:[{name:\"文科\",value:95},{name:\"理科\",value:82}]},\n    {name:\"天津\",value:[{name:\"文科\",value:22},{name:\"理科\",value:20}]},\n    {name:\"河北\",value:[{name:\"文科\",value:60},{name:\"理科\",value:42}]},\n    {name:\"山西\",value:[{name:\"文科\",value:40},{name:\"理科\",value:41}]},\n    {name:\"内蒙古\",value:[{name:\"文科\",value:23},{name:\"理科\",value:24}]},\n    {name:\"辽宁\",value:[{name:\"文科\",value:39},{name:\"理科\",value:28}]},\n    {name:\"吉林\",value:[{name:\"文科\",value:41},{name:\"理科\",value:41}]},\n    {name:\"黑龙江\",value:[{name:\"文科\",value:35},{name:\"理科\",value:31}]},\n    {name:\"上海\",value:[{name:\"文科\",value:12},{name:\"理科\",value:12}]},\n    {name:\"江苏\",value:[{name:\"文科\",value:47},{name:\"理科\",value:45}]},\n    {name:\"浙江\",value:[{name:\"文科\",value:57},{name:\"理科\",value:57}]},\n    {name:\"安徽\",value:[{name:\"文科\",value:57},{name:\"理科\",value:52}]},\n    {name:\"福建\",value:[{name:\"文科\",value:59},{name:\"理科\",value:57}]},\n    {name:\"江西\",value:[{name:\"文科\",value:49},{name:\"理科\",value:42}]},\n    {name:\"山东\",value:[{name:\"文科\",value:67},{name:\"理科\",value:52}]},\n    {name:\"河南\",value:[{name:\"文科\",value:69},{name:\"理科\",value:68}]},\n    {name:\"湖北\",value:[{name:\"文科\",value:60},{name:\"理科\",value:56}]},\n    {name:\"湖南\",value:[{name:\"文科\",value:62},{name:\"理科\",value:52}]},\n    {name:\"重庆\",value:[{name:\"文科\",value:47},{name:\"理科\",value:44}]},\n    {name:\"四川\",value:[{name:\"文科\",value:65},{name:\"理科\",value:60}]},\n    {name:\"贵州\",value:[{name:\"文科\",value:32},{name:\"理科\",value:30}]},\n    {name:\"云南\",value:[{name:\"文科\",value:42},{name:\"理科\",value:41}]},\n    {name:\"西藏\",value:[{name:\"文科\",value:5},{name:\"理科\",value:4}]},\n    {name:\"陕西\",value:[{name:\"文科\",value:38},{name:\"理科\",value:42}]},\n    {name:\"甘肃\",value:[{name:\"文科\",value:28},{name:\"理科\",value:28}]},\n    {name:\"青海\",value:[{name:\"文科\",value:5},{name:\"理科\",value:5}]},\n    {name:\"宁夏\",value:[{name:\"文科\",value:10},{name:\"理科\",value:8}]},\n    {name:\"新疆\",value:[{name:\"文科\",value:36},{name:\"理科\",value:31}]},\n    {name:\"广东\",value:[{name:\"文科\",value:63},{name:\"理科\",value:60}]},\n    {name:\"广西\",value:[{name:\"文科\",value:29},{name:\"理科\",value:30}]},\n    {name:\"海南\",value:[{name:\"文科\",value:8},{name:\"理科\",value:6}]},\n];\n\n/*获取地图数据*/\nmyChart.showLoading();\nvar mapFeatures = echarts.getMap(mapName).geoJson.features;\nmyChart.hideLoading();\nmapFeatures.forEach(function(v) {\n    // 地区名称\n    var name = v.properties.name;\n    // 地区经纬度\n    geoCoordMap[name] = v.properties.cp;\n\n});\n\n// console.log(\"============geoCoordMap===================\")\n// console.log(geoCoordMap)\n// console.log(\"================data======================\")\nconsole.log(data)\nconsole.log(toolTipData)\nvar max = 480,\n    min = 9; // todo \nvar maxSize4Pin = 100,\n    minSize4Pin = 20;\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value),\n            });\n        }\n    }\n    return res;\n};\nvar convertData1 = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            geoCoord[0] = +geoCoord[0] + 0.2 + ''\n            geoCoord[1] = +geoCoord[1] + 0.1 + ''\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value),\n            });\n        }\n    }\n    return res;\n};\noption = {\n    title: {\n        text: name_title,\n        subtext: subname,\n        x: 'center',\n        textStyle: {\n            color: nameColor,\n            fontFamily: name_fontFamily,\n            fontSize: name_fontSize\n        },\n        subtextStyle:{\n            fontSize:subname_fontSize,\n            fontFamily:name_fontFamily\n        }\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: function(params) {\n            if (typeof(params.value)[2] == \"undefined\") {\n                \n                console.log(toolTiphtml)\n                // console.log(convertData(data))\n                return toolTiphtml;\n            } else {\n                a()\n                var toolTiphtml = ''\n                \n                console.log(toolTiphtml, 8888)\n                // console.log(convertData(data))\n                return toolTiphtml;\n            }\n        }\n    },\n    // legend: {\n    //     orient: 'vertical',\n    //     y: 'bottom',\n    //     x: 'right',\n    //     data: ['credit_pm2.5'],\n    //     textStyle: {\n    //         color: '#fff'\n    //     }\n    // },\n    visualMap: {\n        show: true,\n        min: 0,\n        max: 200,\n        left: 'left',\n        top: 'bottom',\n        text: ['高', '低'], // 文本，默认为数值文本\n        calculable: true,\n        seriesIndex: [1],\n        inRange: {\n            // color: ['#3B5077', '#031525'] // 蓝黑\n            // color: ['#ffc0cb', '#800080'] // 红紫\n            // color: ['#3C3B3F', '#605C3C'] // 黑绿\n            // color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n            // color: ['#23074d', '#cc5333'] // 紫红\n            color: ['#00467F', '#A5CC82'] // 蓝绿\n            // color: ['#1488CC', '#2B32B2'] // 浅蓝\n            // color: ['#00467F', '#A5CC82'] // 蓝绿\n            // color: ['#00467F', '#A5CC82'] // 蓝绿\n            // color: ['#00467F', '#A5CC82'] // 蓝绿\n            // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n        }\n    },\n    /*工具按钮组*/\n    // toolbox: {\n    //     show: true,\n    //     orient: 'vertical',\n    //     left: 'right',\n    //     top: 'center',\n    //     feature: {\n    //         dataView: {\n    //             readOnly: false\n    //         },\n    //         restore: {},\n    //         saveAsImage: {}\n    //     }\n    // },\n    geo: {\n        show: true,\n        map: mapName,\n        label: {\n            normal: {\n                show: false\n            },\n            emphasis: {\n                show: false,\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#031525',\n                borderColor: '#3B5077',\n            },\n            emphasis: {\n                areaColor: '#2B91B7',\n            }\n        }\n    },\n    series: [{\n            name: '散点',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            symbolSize: function(val) {\n                return 8;\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'bottom',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#05C3F9'\n                }\n            }\n        },\n        {\n            type: 'map',\n            map: mapName,\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n                normal: {\n                    show: true\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#3B5077',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7'\n                }\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: '点',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin', //气泡\n            symbolSize: 0,\n            label: {\n                normal: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F62157', //标志颜色\n                }\n            },\n            zlevel: 6,\n            data: convertData(data),\n        },\n        {\n            name: 'Top 5',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData1(data.sort(function(a, b) {\n                return b.value - a.value;\n            }).slice(0, 5)),\n            symbolSize: function(val) {\n                return val[2] / 10;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    position: [10, 10],\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: 'yellow',\n                    shadowBlur: 10,\n                    shadowColor: 'yellow'\n                }\n            },\n            zlevel: 8\n        },\n\n    ]\n};\nfunction a(){\n    console.log(7777)\n}\nmyChart.setOption(option);","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3951734745","theme":"","layout":"","viewCount":11209,"userName":"花***4","commentCount":0,"starCount":20,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3m_ey39vW.png?v=1551544786950","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"花***4"}}