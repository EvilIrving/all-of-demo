{"status":0,"data":{"cid":"x_NK3NhgTX","authorUid":"bd-358217656","authorUserName":"丿***年","title":"堆叠区域图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-04-29T12:10:09.000Z","lastUpdateTime":"2020-04-29T12:10:09.000Z","auth":1,"uid":"bd-358217656","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-29T12:23:26.000Z","code":"\n/* 根据毫秒格式化时间 */\nvar formatDateTime = function (date) {\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    m = m < 10 ? '0' + m : m;\n    var d = date.getDate();\n    d = d < 10 ? '0' + d : d;\n    var h = date.getHours();\n    h = h < 10 ? '0' + h : h;\n    var s = date.getSeconds();\n    s = s < 10 ? '0' + s : s;\n    var minute = date.getMinutes();\n    minute = minute < 10 ? '0' + minute : minute;\n    return y + '/' + m + '/' + d + ' ' + h + ':' + minute + ':' + s;\n};\nvar data = [\n        {\n          time: '1587626607226',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 153297,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 360,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 85,  \"cpuTotalUsage\" : 23,  \"gatewayRtt\" : 36,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87267857,  \"txAudioKBitrate\" : 42,  \"lastmileDelay\" : 16,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 176,  \"userCount\" : 5,  \"duration\" : 2759,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.57299999999999995,  \"rxBytes\" : 135439112},\n        },\n        {\n          time: '1587626613229',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 155761,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 374,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 81,  \"cpuTotalUsage\" : 52,  \"gatewayRtt\" : 11,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87497756,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 13,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 210,  \"userCount\" : 5,  \"duration\" : 2765,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.59699999999999998,  \"rxBytes\" : 135734940},\n        },\n        {\n          time: '1587626621228',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 155889,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 360,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 83,  \"cpuTotalUsage\" : 25,  \"gatewayRtt\" : 20,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87696805,  \"txAudioKBitrate\" : 42,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 145,  \"userCount\" : 5,  \"duration\" : 2773,  \"cpuAppUsage\" : 6,  \"memTotalUsage\" : 0.59799999999999998,  \"rxBytes\" : 136126856},\n        },\n        {\n          time: '1587626623226',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 155073,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 353,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 83,  \"cpuTotalUsage\" : 24,  \"gatewayRtt\" : 3,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87745751,  \"txAudioKBitrate\" : 40,  \"lastmileDelay\" : 10,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 138,  \"userCount\" : 5,  \"duration\" : 2775,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.59699999999999998,  \"rxBytes\" : 136223844},\n        },\n        {\n          time: '1587626601225',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 153585,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 390,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 85,  \"cpuTotalUsage\" : 22,  \"gatewayRtt\" : 83,  \"txPacketLossRate\" : 2,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87059433,  \"txAudioKBitrate\" : 39,  \"lastmileDelay\" : 14,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 183,  \"userCount\" : 5,  \"duration\" : 2753,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 60699999999999998,  \"rxBytes\" : 135147159},\n        },\n        {\n          time: '1587626619228',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 156353,  \"rxPacketLossRate\" : 1,  \"rxVideoKBitrate\" : 376,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 83,  \"cpuTotalUsage\" : 32,  \"gatewayRtt\" : 24,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87646229,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 140,  \"userCount\" : 5,  \"duration\" : 2771,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.60699999999999998,  \"rxBytes\" : 136027820},\n        },\n        {\n          time: '1587626609225',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 153265,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 380,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 85,  \"cpuTotalUsage\" : 22,  \"gatewayRtt\" : 5,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87347536,  \"txAudioKBitrate\" : 42,  \"lastmileDelay\" : 14,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 252,  \"userCount\" : 5,  \"duration\" : 2761,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.60699999999999998,  \"rxBytes\" : 135543530},\n        },\n        {\n          time: '1587626617225',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 162577,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 331,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 81,  \"cpuTotalUsage\" : 49,  \"gatewayRtt\" : 23,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87596006,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 138,  \"userCount\" : 5,  \"duration\" : 2769,  \"cpuAppUsage\" : 6,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 135924402},\n        },\n        {\n          time: '1587626627228',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 0,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 559,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 83,  \"cpuTotalUsage\" : 25,  \"gatewayRtt\" : 373,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87850873,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 151,  \"userCount\" : 5,  \"duration\" : 2779,  \"cpuAppUsage\" : 6,  \"memTotalUsage\" : 0.59699999999999998,  \"rxBytes\" : 136427389},\n        },\n        {\n          time: '1587626611227',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 156017,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 320,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 81,  \"cpuTotalUsage\" : 36,  \"gatewayRtt\" : 6,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87428381,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 13,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 253,  \"userCount\" : 5,  \"duration\" : 2763,  \"cpuAppUsage\" : 9,  \"memTotalUsage\" : 0.60599999999999998,  \"rxBytes\" : 135632090},\n        },\n        {\n          time: '1587626615224',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 162529,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 358,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 81,  \"cpuTotalUsage\" : 54,  \"gatewayRtt\" : 15,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87547110,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 142,  \"userCount\" : 5,  \"duration\" : 2767,  \"cpuAppUsage\" : 7,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 135833219},\n        },\n        {\n          time: '1587626625225',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 155073,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 182,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 83,  \"cpuTotalUsage\" : 21,  \"gatewayRtt\" : 7,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87797735,  \"txAudioKBitrate\" : 42,  \"lastmileDelay\" : 10,  \"memAppUsage\" : 0.056000000000000001,  \"txVideoKBitrate\" : 149,  \"userCount\" : 5,  \"duration\" : 2777,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 136274103},\n        },\n        {\n          time: '1587626629227',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 155121,  \"rxPacketLossRate\" : 2,  \"rxVideoKBitrate\" : 364,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 82,  \"cpuTotalUsage\" : 23,  \"gatewayRtt\" : 8,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87900071,  \"txAudioKBitrate\" : 41,  \"lastmileDelay\" : 14,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 140,  \"userCount\" : 5,  \"duration\" : 2781,  \"cpuAppUsage\" : 6,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 136528022},\n        },\n        {\n          time: '1587626631228',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 154561,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 340,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 82,  \"cpuTotalUsage\" : 23,  \"gatewayRtt\" : 12,  \"txPacketLossRate\" : 0,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87958995,  \"txAudioKBitrate\" : 39,  \"lastmileDelay\" : 12,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 176,  \"userCount\" : 5,  \"duration\" : 2783,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 136622116},\n        },\n        {\n          time: '1587626603251',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 153361,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 326,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 84,  \"cpuTotalUsage\" : 23,  \"gatewayRtt\" : 68,  \"txPacketLossRate\" : 3,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87127343,  \"txAudioKBitrate\" : 40,  \"lastmileDelay\" : 15,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 202,  \"userCount\" : 5,  \"duration\" : 2755,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.59599999999999997,  \"rxBytes\" : 135237611},\n        },\n        {\n          time: '1587626605225',\n          eventId: 'rtc_stats',\n          userId: '1426704877',\n          eventParam:\n            {  \"memoryAppUsageInKbytes\" : 153377,  \"rxPacketLossRate\" : 0,  \"rxVideoKBitrate\" : 371,  \"rxAudioKBitrate\" : 0,  \"memoryTotalUsageRatio\" : 84,  \"cpuTotalUsage\" : 23,  \"gatewayRtt\" : 83,  \"txPacketLossRate\" : 3,  \"memoryAppUsageRatio\" : 5,  \"txBytes\" : 87206918,  \"txAudioKBitrate\" : 42,  \"lastmileDelay\" : 15,  \"memAppUsage\" : 0.053999999999999999,  \"txVideoKBitrate\" : 252,  \"userCount\" : 5,  \"duration\" : 2757,  \"cpuAppUsage\" : 5,  \"memTotalUsage\" : 0.57099999999999995,  \"rxBytes\" : 135339794},\n        },\n      ];\nvar series = {};\nvar xAxis = [];\nvar legend = [];\n\ndata.forEach(function(item,idx){\n    /* \n    当为第一条数据时  添加图例数据  也可以直接写上面\n    当为第一条数据时  创建所有数据的对象集\n    */\n    if(idx == 0){\n        for(var key in item.eventParam){\n            legend.push(key)\n            series[key] = [item.eventParam[key]]\n        }\n    }else{\n        /* 直接找数据集里对应的字段 追加数据 */\n        \n        for(var key in item.eventParam){\n            series[key].push(item.eventParam[key])\n        }\n    }\n    \n    /* 添加时间集 */\n    xAxis.push(formatDateTime(new Date(Number(item.time))))\n    \n})\noption = {\n    title: {\n        text: '堆叠区域图'\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'cross',\n            label: {\n                backgroundColor: '#6a7985'\n            }\n        }\n    },\n    legend: {\n        data: legend\n    },\n    toolbox: {\n        feature: {\n            saveAsImage: {}\n        }\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    xAxis: [\n        {\n            type: 'category',\n            boundaryGap: false,\n            axisLabel:{\n                interval:10,    /* 时间分割 x轴每相隔多少条数据显示一个label */\n            },\n            data:xAxis\n        }\n    ],\n    yAxis: [\n        {\n            type: 'value'\n        }\n    ],\n    series: []\n};\n\n/* 添加折线数据 */\nfor(var key in series){\n    option.series.push({\n            name: key,\n            type: 'line',\n            stack: '数值',\n            areaStyle: {},\n            data: series[key]\n        })\n}\nconsole.log(option)\n","html":"","externalScripts":"","updaterUID":"bd-358217656","theme":"","layout":"","viewCount":65,"userName":"丿***年","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_NK3NhgTX.png?v=1588163006602","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"丿***年"}}