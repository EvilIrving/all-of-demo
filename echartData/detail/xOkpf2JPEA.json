{"status":0,"data":{"cid":"xOkpf2JPEA","authorUid":"bd-2218151701","authorUserName":"爱***鲜","title":"桑基图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-09-14T07:43:19.000Z","lastUpdateTime":"2021-09-14T08:54:08.000Z","auth":2,"uid":"bd-2218151701","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-09-14T08:54:09.000Z","code":"var population = [\n    { source: '原煤', target: '农林牧渔业', value: 712359.3 },\n    { source: '原煤', target: '建筑业', value: 12500.2 },\n    { source: '原煤', target: '工业合计', value: 50241.4 },\n    { source: '原煤', target: '交通运输储运业和邮政业', value: 42212.9 },\n    { source: '原煤', target: '批发零售业和住宿餐饮业 ', value: 180555.06 },\n    { source: '原煤', target: '其他行业', value: 8560.2 },\n    { source: '原煤', target: '城乡居民生活', value: 14031.95 },\n\n    { source: '煤制品', target: '农林牧渔业', value: 618180.6 },\n    { source: '煤制品', target: '建筑业', value: 436696.23 },\n    { source: '煤制品', target: '工业合计', value: 213535 },\n    { source: '煤制品', target: '批发零售业和住宿餐饮业 ', value: 1856227.4 },\n\n    { source: '焦炭', target: '农林牧渔业', value: 8950 },\n    { source: '焦炭', target: '建筑业', value: 177577.6 },\n    { source: '焦炭', target: '批发零售业和住宿餐饮业 ', value: 523499 },\n    { source: '焦炭', target: '其他行业', value: 110113 },\n\n    { source: '焦炉煤气', target: '农林牧渔业', value: 145857 },\n    { source: '焦炉煤气', target: '建筑业', value: 413287.5 },\n    { source: '焦炉煤气', target: '住宅用地', value: 73910.8 },\n    { source: '焦炉煤气', target: '批发零售业和住宿餐饮业 ', value: 442695 },\n    { source: '焦炉煤气', target: '其他行业', value: 2764.4 },\n\n    { source: '原油', target: '农林牧渔业', value: 134172 },\n    { source: '原油', target: '建筑业', value: 294527 },\n    { source: '原油', target: '住宅用地', value: 6851 },\n    { source: '原油', target: '工业合计', value: 121422 },\n    { source: '原油', target: '批发零售业和住宿餐饮业 ', value: 989856.58 },\n    { source: '原油', target: '其他行业', value: 9134 },\n\n    { source: '汽油', target: '农林牧渔业', value: 33732.97 },\n    { source: '汽油', target: '建筑业', value: 65556.41 },\n    { source: '汽油', target: '住宅用地', value: 295348.5 },\n    { source: '汽油', target: '商业用地', value: 7391.31 },\n    { source: '汽油', target: '批发零售业和住宿餐饮业 ', value: 549721.16 },\n\n    { source: '液化实燃油', target: '农林牧渔业', value: 146022.81 },\n    { source: '液化实燃油', target: '住宅用地', value: 146422.47 },\n    { source: '液化实燃油', target: '商业用地', value: 49587.21 },\n    { source: '液化实燃油', target: '交通运输储运业和邮政业', value: 36218.96 },\n    { source: '液化实燃油', target: '批发零售业和住宿餐饮业 ', value: 267393.02 },\n    { source: '液化实燃油', target: '其他行业', value: 4131.95 },\n\n    { source: '天然气', target: '农林牧渔业', value: 146022.81 },\n    { source: '天然气', target: '住宅用地', value: 146422.47 },\n    { source: '天然气', target: '商业用地', value: 49587.21 },\n    { source: '天然气', target: '交通运输储运业和邮政业', value: 36218.96 },\n    { source: '天然气', target: '批发零售业和住宿餐饮业 ', value: 267393.02 },\n    { source: '天然气', target: '其他行业', value: 4131.95 },\n    { source: '天然气', target: '城乡居民生活', value: 54031.95 },\n];\n\nvar city = {\n    原煤: '#e9bae8',\n    煤制品: '#3dc5e7',\n    焦炭: '#2aa12d',\n    焦炉煤气: '#e88886',\n    原油: '#feda66',\n    汽油: '#c92123',\n    液化实燃油: '#8bc77b',\n    天然气: '#61d3ff',\n\n    农林牧渔业: '#fb7f10',\n    建筑业: '#e492d0',\n    住宅用地: '#2aa12d',\n    商业用地: '#fb7f10',\n    工业合计: '#98c0fd',\n    交通运输储运业和邮政业: '#4393c3',\n    '批发零售业和住宿餐饮业 ': '#2166ac',\n    其他行业: '#f97494',\n    城乡居民生活: '#8ca4ff',\n};\nvar citylist = [];\n//遍历city\nfor (var key in city) {\n    citylist.push(\n        { name: key, itemStyle: { normal: { color: city[key] } } } //构造节点对象，包括name和itemStyle\n    );\n}\nconsole.log(citylist);\nvar data = [];\nfor (var i = 0; i < population.length; i++) {\n    var color = new echarts.graphic.LinearGradient(0, 0, 1, 0, [\n        {\n            offset: 0,\n            color: city[population[i].source], //获取起始节点的颜色属性\n        },\n        {\n            offset: 1,\n            color: city[population[i].target], //获取结尾节点的颜色属性\n        },\n    ]);\n    data.push({\n        source: population[i].source,\n        target: population[i].target,\n        value: population[i].value,\n        lineStyle: {\n            //添加样式配置\n            normal: {\n                color: color,\n            },\n        },\n    });\n}\nvar option = {\n    //backgroundColor: '#fff',\n    // title: {\n    //     text: '区域成交用地性质占比',\n    //     textStyle: {\n    //         fontWeight: 'normal',\n    //         fontSize: 20,\n    //         color: '#F1F1F3',\n    //     },\n    //     top: '3%',\n    //     x: 'center',\n    // },\n    tooltip: {\n        trigger: 'item',\n        triggerOn: 'mousemove',\n    },\n    //4.0版本\n    series: [\n        {\n            type: 'sankey',\n            data: citylist,\n            links: data,\n            focusNodeAdjacency: 'allEdges',\n            itemStyle: {\n                borderWidth:0,\n                borderColor: '#fff',\n                //opacity: 1,\n            },\n            lineStyle: {\n                color: 'source',\n                curveness: 0.5,\n            },\n            //  label: {\n            //     normal: {\n            //         fontSize: '14',\n            //         color: '#212b43',\n            //     },\n            // },\n        },\n    ],\n    //5.0版本用这个\n    // series: [\n    //         {\n    //             type: 'sankey',\n    //             data: citylist,\n    //             links: data,\n    //             emphasis: {\n    //                 focus: 'adjacency'\n    //             },\n    //             lineStyle: {\n    //                 color: 'gradient',\n    //                 curveness: 0.5\n    //             }\n    //         }\n    //     ]\n};\n","html":"","externalScripts":"","updaterUID":"bd-2218151701","theme":"","layout":"","viewCount":0,"userName":"爱***鲜","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOkpf2JPEA.png?v=1631609649313","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey","title","tooltip"],"customTags":[],"updaterUserName":"爱***鲜"}}