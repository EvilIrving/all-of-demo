{"status":0,"data":{"cid":"x6eewnhHrH","authorUid":"bd-2680668432","authorUserName":"C***酱","title":"多组数据顶端装饰","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-06-23T12:45:46.000Z","lastUpdateTime":"2020-06-23T12:45:46.000Z","auth":2,"uid":"bd-2680668432","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-30T07:29:08.000Z","code":"const customSeriesLength = 3\r\nconst xAxisData = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\nconst colors = [\"#1576d2\", \"#d14a82\", \"#26c1f2\", \"#a166ff\", \"#9C2BB6\"]\r\nconst barWidth = 0.2 // 柱条占比\r\nconst barGap = 0.2 // 不同系列的柱间距离\r\n\r\nfunction renderItem(params, api) {\r\n    const ceilHeight = 5 // 装饰的高度\r\n\r\n    const topCenter = api.coord([api.value(0), api.value(1)]) // 顶点中心\r\n    const unitWidth = api.size([0, 1])[0]\r\n    const height = api.size([0, api.value(1)])[1] // 高度\r\n    const width = unitWidth * barWidth; // 宽度\r\n\r\n    const unitGapWidth = barGap * barWidth * unitWidth\r\n    const GapsWidth = (customSeriesLength - 1) * unitGapWidth\r\n    const showWidth = GapsWidth + width * customSeriesLength\r\n    const decorateIdx = parseInt(params.seriesName.split('_')[1]) // 绘制时的排序\r\n    const xPosi = topCenter[0] - showWidth / 2 + decorateIdx * (width + unitGapWidth)\r\n    return {\r\n        type: 'rect', // 装饰\r\n        shape: {\r\n            x: xPosi,\r\n            y: topCenter[1],\r\n            width: width,\r\n            height: height > ceilHeight ? ceilHeight : height\r\n        },\r\n        style: api.style()\r\n    }\r\n}\r\n\r\nlet series = []\r\nfor (let i = 0; i < customSeriesLength; i++) {\r\n    const data = xAxisData.map(d => ~~(Math.random() * 100))\r\n    const color = colors[i]\r\n    series.push({\r\n        name: 'basicRect_' + i,\r\n        type: 'bar',\r\n        barWidth: barWidth * 100 + '%',\r\n        barGap: barGap * 100 + '%',\r\n        data: data,\r\n        itemStyle: {\r\n            opacity: 0.5,\r\n            color: color\r\n        }\r\n    })\r\n    series.push({\r\n        name: 'decorateRect_' + i,\r\n        type: 'custom',\r\n        renderItem: renderItem,\r\n        data: data,\r\n        zlevel: 2,\r\n        itemStyle: {\r\n            color: color\r\n        }\r\n    })\r\n}\r\n\r\noption = {\r\n    xAxis: {\r\n        type: 'category',\r\n        data: xAxisData\r\n    },\r\n    yAxis: {\r\n        type: 'value'\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"","updaterUID":"bd-2680668432","theme":"","layout":"","viewCount":187,"userName":"C***酱","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6eewnhHrH.png?v=1593502148702","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-custom"],"customTags":[],"updaterUserName":"C***酱"}}