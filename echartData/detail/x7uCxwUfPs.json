{"status":0,"data":{"cid":"x7uCxwUfPs","authorUid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","authorUserName":"林***影","title":"柱状图+自定义Tip数据","description":"柱状图+自定义Tip数据","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-07T02:41:39.000Z","lastUpdateTime":"2021-07-07T02:41:39.000Z","auth":2,"uid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-07T02:41:39.000Z","code":"const payload = {\n    id: 'org-box-1',\n    unit: '人',\n    wordNum: 3,\n    data: {\n        color: ['#FF6363', '#0077CC'],\n        x: ['办公室', '资产部', '安全部', '办公室', '建设部'],\n        data: ['1', '6', '2', '1', '4'],\n        data2: [15, 25, 12, 14, 17],\n        data3: [12, 25, 13, 14, 18],\n        data4: [4, 6, 1, 1, 3],\n        data5: [20, 0, 0, 0, 0],\n    },\n};\n\nconst max = payload.max || parseInt(Math.max(...payload.data.data) * 1.4, 10);\nconst wordNum = payload.wordNum;\n\nconst formatter = (params, wordNum) => {\n    if (!wordNum) return params\n    let newParamsName = ''\n    const paramsNameNumber = params.length\n    const provideNumber = wordNum\n    const rowNumber = Math.ceil(paramsNameNumber / provideNumber)\n    if (paramsNameNumber > provideNumber) {\n        for (let p = 0; p < rowNumber; p++) {\n            let tempStr = ''\n            const start = p * provideNumber\n            const end = start + provideNumber\n            if (p === rowNumber - 1) {\n                tempStr = params.substring(start, paramsNameNumber)\n            } else {\n                tempStr = params.substring(start, end) + '\\n'\n            }\n            newParamsName += tempStr\n        }\n    } else {\n        newParamsName = params\n    }\n    return newParamsName\n}\n\noption = {\n    backgroundColor: '#031231',\n    tooltip: {\n        trigger: 'axis',\n        backgroundColor: 'rgba(9, 30, 60, 0.6)',\n        extraCssText: 'box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;',\n        borderWidth: 0,\n        confine: false,\n        appendToBody: true,\n        textStyle: {\n            color: '#fff',\n            fontSize: 10,\n        },\n        axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n        },\n        formatter(list) {\n            var msg = '';\n            for (const i in list) {\n                if (i === 0) {\n                    msg += list[i].name + '<br>';\n                }\n                // msg += list[i].seriesName + '：' + list[i].data + '<br>'\n                msg += '<div class=\"echarts-tip-div\">';\n                msg += '<div class=\"left\">编制：</div>';\n                msg += '<div class=\"right\">' + payload.data.data2[list[i].dataIndex] + '</div>';\n                msg += '</div>';\n                msg += '<div class=\"echarts-tip-div\">';\n                msg += '<div class=\"left\">在编：</div>';\n                msg += '<div class=\"right\">' + payload.data.data3[list[i].dataIndex] + '</div>';\n                msg += '</div>';\n                msg += '<div class=\"echarts-tip-div\">';\n                msg += '<div class=\"left\">借用：</div>';\n                msg += '<div class=\"right\">' + payload.data.data4[list[i].dataIndex] + '</div>';\n                msg += '</div>';\n                msg += '<div class=\"echarts-tip-div\">';\n                msg += '<div class=\"left\">挂岗：</div>';\n                msg += '<div class=\"right\">' + payload.data.data5[list[i].dataIndex] + '</div>';\n                msg += '</div>';\n            }\n            return msg;\n        },\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        top: 25,\n        bottom: '0',\n        containLabel: true,\n    },\n    xAxis: {\n        type: 'category',\n        axisLine: {\n            lineStyle: {\n                color: '#4176A3',\n                width: 1,\n            },\n        },\n        axisLabel: {\n            color: '#96CBFA',\n            fontSize: 12,\n            formatter(params) {\n                return formatter(params, wordNum);\n            },\n            // rotate: 45\n        },\n        data: payload.data.x,\n    },\n    yAxis: [\n        {\n            max,\n            name: '单位：' + payload.unit,\n            // name: '',\n            nameTextStyle: {\n                align: 'left',\n                fontSize: 11,\n                color: '#4176a3',\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#4176A3',\n                    width: 2,\n                },\n            },\n            splitLine: {\n                //分割线配置\n                lineStyle: {\n                    color: '#4176A356',\n                },\n            },\n        },\n        {\n            type: 'value',\n            nameTextStyle: {\n                color: '#4176A3',\n                fontSize: 11,\n            },\n            position: 'right',\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: '#396A87',\n                    width: 2,\n                },\n            },\n            axisLabel: {\n                show: true,\n                formatter: '{value} ' + payload.unit, //右侧Y轴文字显示\n                color: '#396A87',\n                fontSize: 14,\n            },\n        },\n    ],\n    series: [\n        {\n            name: '超员比例',\n            type: 'bar',\n            barMaxWidth: 8,\n            showBackground: true,\n            backgroundStyle: {\n                // color: \"rgba(154, 73, 73, 0.3)\",\n                borderWidth: 14,\n            },\n            data: payload.data.data,\n            itemStyle: {\n                borderRadius: [4, 4, 0, 0],\n                color: new echarts.graphic.LinearGradient(\n                    0,\n                    0,\n                    0,\n                    1,\n                    [\n                        {\n                            offset: 1,\n                            color: payload.data.color[1], // 0% 处的颜色\n                        },\n                        {\n                            offset: 0,\n                            color: payload.data.color[0], // 100% 处的颜色\n                        },\n                    ],\n                    false\n                ),\n            },\n            label: {\n                show: true,\n                position: 'top',\n                distance: 10,\n                formatter: (payload.id === 'org-box-2' ? '{c}\\n' : '{c}') + payload.unit,\n                color: '#fff',\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","theme":"","layout":"","viewCount":0,"userName":"林***影","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x7uCxwUfPs.png?v=1625625700026","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"林***影"}}