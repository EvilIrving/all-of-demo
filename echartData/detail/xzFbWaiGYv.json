{"status":0,"data":{"cid":"xzFbWaiGYv","authorUid":"obd-oF_xBEUaU3oyzHh0hg5ntWKmhb36Y5U","authorUserName":"a***u","title":"工时统计甘特图","description":"不同日期的当日工时统计","latestVersion":3,"alwaysLatest":1,"createTime":"2020-12-09T08:15:43.000Z","lastUpdateTime":"2020-12-09T08:15:43.000Z","auth":2,"uid":"obd-oF_xBEUaU3oyzHh0hg5ntWKmhb36Y5U","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-15T08:21:22.000Z","code":"    var baseDate=`${new Date().getFullYear()}/${new Date().getMonth() + 1}/${new Date().getDate()}`\r\n    // echart配置\r\n    var option = {\r\n        color: \"#0A8BFF\",\r\n        backgroundColor:\"#fff\",\r\n        title: {\r\n            text: '工时统计甘特图',\r\n            subtext: '不同日期的当日工时统计'\r\n        },\r\n        tooltip: {\r\n            enterable:true,\r\n            //alwaysShowContent:true,\r\n            hideDelay:100,\r\n            backgroundColor: 'rgba(255,255,255,1)',//背景颜色（此时为默认色）\r\n            borderRadius: 5,//边框圆角\r\n            padding: [5,0,5,0],    // [5, 10, 15, 20] 内边距\r\n            textStyle:{\r\n                color:'#000'\r\n            },\r\n            position: function(point, params, dom, rect, size) {\r\n                $(dom).html('<div style=\"font-size:14px;color:rgba(0,0,0,0.65)\" class=\"tip\"><h1 style=\"font-size:14px;color:rgba(0,0,0,0.85);height:25px;display:flex;align-items: center;padding:0 0 5px 8px;margin:0;border-bottom:1px solid rgba(0,0,0,0.06);font-weight:bold\">' + \r\n                params.name.split(',')[0] + '</h1> <p style=\"margin:0;padding:0 8px 0 8px;height:25px;display:flex;align-items: center;\">时段:'+ \r\n                params.value[1].split(' ')[1] + '~' + params.value[2].split(' ')[1] + \r\n                ' </p><p style=\"margin:0;padding:0 8px 0 8px;height:25px;display:flex;align-items: center;\">总工时:'+params.name.split(',')[1] + \r\n                ' </p></div>')\r\n            },\r\n        },\r\n        legend: {//图例\r\n            data: ['工时'],\r\n            left: '90px',\r\n            top:\"6%\",\r\n            itemWidth:16,\r\n            itemHeight:16,\r\n            selectedMode: false, // 图例设为不可点击\r\n            textStyle: {\r\n                color: 'rgba(0, 0, 0, 0.45)',\r\n                fontSize:14\r\n            }\r\n        },\r\n        grid: {//绘图网格\r\n            left: '0%',\r\n            right: '3%',\r\n            top: '10%',\r\n            bottom: '10%',\r\n            containLabel: true\r\n        },\r\n        xAxis: {                   \r\n            type: 'time', \r\n            position: 'top',\r\n            interval: 3600  * 1000,   //以一个小时递增 \r\n            max:`${baseDate} 24:00`,\r\n            min:`${baseDate} 00:00`, //将data里最小时间的整点时间设为min,否则min会以data里面的min为开始进行整点递增\r\n            axisLabel: {\r\n                formatter: function (value, index) {\r\n                            var data = new Date(value)\r\n                            var hours = data.getHours()\r\n                            return hours\r\n                        },\r\n                textStyle: {\r\n                  color: 'rgba(0,0,0,0.65)',  //更改坐标轴文字颜色\r\n                  fontSize : 14      //更改坐标轴文字大小\r\n                }\r\n            },\r\n            axisLine:{\r\n                lineStyle:{\r\n                    color:'rgba(0,0,0,0.1)',\r\n                }\r\n            } \r\n        },\r\n        yAxis: {\r\n            axisLine:{\r\n                lineStyle:{\r\n                    color:'rgba(0,0,0,0.1)',\r\n                }\r\n            } ,\r\n            data: [\r\n                ['2020-12-05','10小时40分钟'], \r\n                ['2020-12-06','7小时40分钟'], \r\n                ['2020-12-07','11小时40分钟'], \r\n                ['2020-12-08','11小时40分钟'], \r\n                ['2020-12-09','11小时40分钟'], \r\n                ['2020-12-10','11小时40分钟'], \r\n                ['2020-12-11','11小时40分钟'], \r\n                ['2020-12-12','11小时40分钟'], \r\n                ['2020-12-13','11小时40分钟'], \r\n                ['2020-12-14','11小时40分钟']\r\n                ],\r\n            axisLabel: {\r\n                textStyle:{\r\n                    color:\"rgba(0, 0, 0, 0.65)\", //刻度颜色\r\n                    fontSize:14  //刻度大小\r\n                },\r\n                formatter: function (value) {\r\n                    let a=value.split(',')[0];\r\n                    let b=value.split(',')[1];\r\n                    return   a +'{a|' +'\\n'+ b + '}'+'{b|' + '}'\r\n                }, rich: {\r\n                    a: {\r\n                        color: 'rgba(24, 144, 255, 0.7)',\r\n                        fontSize:12, \r\n                    },\r\n                    b: {\r\n                        color: 'red',\r\n                        fontSize:14, \r\n                    }\r\n                } \r\n            }\r\n        },\r\n        series: [\r\n            // 用空bar来显示三个图例\r\n            { name: \"工时\", type: 'bar', data: [],barMaxWidth:10 },\r\n            // { name: state[1], type: 'bar', data: [],barMaxWidth:10 },\r\n            // { name: state[2], type: 'bar', data: [],barMaxWidth:10 },\r\n            {\r\n                type: 'custom',                \r\n                renderItem: function (params, api) {//开发者自定义的图形元素渲染逻辑，是通过书写 renderItem 函数实现的\r\n                    var categoryIndex = api.value(0);//这里使用 api.value(0) 取出当前 dataItem 中第一个维度的数值。\r\n                    var start = api.coord([api.value(1), categoryIndex]); // 这里使用 api.coord(...) 将数值在当前坐标系中转换成为屏幕上的点的像素值。\r\n                    var end = api.coord([api.value(2), categoryIndex]);\r\n                    // var height = api.size([0, 1])[1];\r\n                    var height =20;\r\n                    return {\r\n                        type: 'rect',// 表示这个图形元素是矩形。还可以是 'circle', 'sector', 'polygon' 等等。\r\n                        shape: echarts.graphic.clipRectByRect({ // 矩形的位置和大小。\r\n                            x: start[0],\r\n                            y: start[1] - height / 2,\r\n                            width: end[0] - start[0],\r\n                            height: height\r\n                        }, { // 当前坐标系的包围盒。\r\n                            x: params.coordSys.x,\r\n                            y: params.coordSys.y,\r\n                            width: params.coordSys.width,\r\n                            height: params.coordSys.height\r\n                        }),\r\n                        style: api.style()\r\n                    };\r\n                },\r\n                encode: {\r\n                    x: [1, 2], // data 中『维度1』和『维度2』对应到 X 轴\r\n                    y: 0// data 中『维度0』对应到 Y 轴\r\n                },\r\n                itemStyle: {\r\n                \tnormal: {\r\n                \t\tcolor: function(params){\r\n                \t\t\tconsole.log(params)\r\n                \t\t\tif(params.data!==null && params.data['value']&& params.data['value'][3]=='in'){\r\n                \t\t\t\treturn '#0A8BFF';\r\n                \t\t\t}else{\r\n                \t\t\t\treturn 'red';\r\n                \t\t\t}\r\n                \t\t}\r\n                \t}\r\n                },\r\n                data: [ // 维度0 维度1 维度2\r\n                  {\r\n                    \r\n                      value: [0, `${baseDate} 1:28`, `${baseDate} 5:28`,'out']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                    {\r\n                      \r\n                      value: [0, `${baseDate} 7:28`, `${baseDate} 15:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                  {\r\n                      \r\n                      value: [1, `${baseDate} 2:18`, `${baseDate} 4:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                    {\r\n                      \r\n                      value: [1, `${baseDate} 6:15`, `${baseDate} 17:58`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                  {\r\n                      \r\n                      value: [1, `${baseDate} 19:18`, `${baseDate} 20:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                    {\r\n                      \r\n                      value: [1, `${baseDate} 21:15`, `${baseDate} 23:38`,'out']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                   {\r\n                      \r\n                      value: [2, `${baseDate} 19:18`, `${baseDate} 20:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                    {\r\n                      \r\n                      value: [2, `${baseDate} 21:15`, `${baseDate} 23:38`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                   {\r\n                      \r\n                      value: [3, `${baseDate} 1:28`, `${baseDate} 5:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },\r\n                    {\r\n                      \r\n                      value: [3, `${baseDate} 7:28`, `${baseDate} 15:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [4, `${baseDate} 8:28`, `${baseDate} 9:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [5, `${baseDate} 9:28`, `${baseDate} 10:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [6, `${baseDate} 10:28`, `${baseDate} 11:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [7, `${baseDate} 11:28`, `${baseDate} 12:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [8, `${baseDate} 12:28`, `${baseDate} 13:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  },{\r\n                      \r\n                      value: [9, `${baseDate} 13:28`, `${baseDate} 14:28`,'in']//0,1,2代表y轴的索引，后两位代表x轴数据开始和结束\r\n                  }\r\n                ]\r\n            }\r\n        ]\r\n    };","html":"","externalScripts":"","updaterUID":"obd-oF_xBEUaU3oyzHh0hg5ntWKmhb36Y5U","theme":"","layout":"","viewCount":651,"userName":"a***u","commentCount":6,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xzFbWaiGYv.png?v=1608020482703","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-custom","title","tooltip"],"customTags":["工时统计","甘特图"],"updaterUserName":"a***u"}}