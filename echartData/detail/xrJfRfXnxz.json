{"status":0,"data":{"cid":"xrJfRfXnxz","authorUid":"bd-2738046816","authorUserName":"s***3","title":"动态时间图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2017-11-29T12:06:34.000Z","lastUpdateTime":"2017-11-29T12:06:34.000Z","auth":2,"uid":"bd-2738046816","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2017-11-29T12:09:15.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1511956458744-r1Xex7heM.json\";\r\n\r\n\r\nmyChart.showLoading();\r\n\r\n$.getJSON(uploadedDataURL, function (data) {\r\n    myChart.hideLoading();\r\n\r\n    var itemStyle = {\r\n        normal: {\r\n            opacity: 0.8,\r\n            shadowBlur: 10,\r\n            shadowOffsetX: 0,\r\n            shadowOffsetY: 0,\r\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n        }\r\n    };\r\n\r\n    var sizeFunction = function (x) {\r\n        var y = Math.sqrt(x / 1000) + 0.5;\r\n        return y * 40;\r\n    };\r\n    // Schema:\r\n    var schema = [\r\n        {name: 'Income', index: 0, text: '人均消费', unit: '元'},\r\n        {name: 'LifeExpectancy', index: 1, text: '平均年龄', unit: '岁'},\r\n        {name: 'Population', index: 2, text: '游客总数', unit: ''},\r\n        {name: 'Country', index: 3, text: '景区', unit: ''}\r\n    ];\r\n\r\n    option = {\r\n        baseOption: {\r\n            timeline: {\r\n                axisType: 'category',\r\n                orient: 'vertical',\r\n                autoPlay: true,\r\n                inverse: true,\r\n                playInterval: 1000,\r\n                left: null,\r\n                right: 0,\r\n                top: 20,\r\n                bottom: 20,\r\n                width: 55,\r\n                height: null,\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#999'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbol: 'none',\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    color: '#bbb',\r\n                    borderColor: '#777',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: false,\r\n                    showPrevBtn: false,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n                data: []\r\n            },\r\n            backgroundColor: '#333',\r\n            title: {\r\n                'text': data.timeline[0],\r\n                textAlign: 'center',\r\n                left: '63%',\r\n                top: '55%',\r\n                textStyle: {\r\n                    fontSize: 100,\r\n                    color: 'rgba(255, 255, 255, 0.7)'\r\n                }\r\n            },\r\n            tooltip: {\r\n                padding: 5,\r\n                backgroundColor: '#222',\r\n                borderColor: '#777',\r\n                borderWidth: 1,\r\n                formatter: function (obj) {\r\n                    var value = obj.value;\r\n                    return schema[3].text + '：' + value[3] + '<br>'\r\n                            + schema[1].text + '：' + value[1] + schema[1].unit + '<br>'\r\n                            + schema[0].text + '：' + value[0] + schema[0].unit + '<br>'\r\n                            + schema[2].text + '：' + value[2] + '<br>';\r\n                }\r\n            },\r\n            grid: {\r\n                left: '12%',\r\n                right: '110'\r\n            },\r\n            xAxis: {\r\n                type: 'log',\r\n                name: '人均消费',\r\n                max: 600,\r\n                min: 50,\r\n                nameGap: 25,\r\n                nameLocation: 'middle',\r\n                nameTextStyle: {\r\n                    fontSize: 18\r\n                },\r\n                splitLine: {\r\n                    show: false\r\n                },\r\n                axisTick: {\r\n                    lineStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                },\r\n                axisLabel: {\r\n                    formatter: '{value} ￥',\r\n                    textStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                }\r\n            },\r\n            yAxis: {\r\n                type: 'value',\r\n                name: '平均年龄',\r\n                max: 60,\r\n                nameTextStyle: {\r\n                    color: '#ccc',\r\n                    fontSize: 18\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                },\r\n                axisTick: {\r\n                    lineStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                },\r\n                splitLine: {\r\n                    show: false\r\n                },\r\n                axisLabel: {\r\n                    formatter: '{value} 岁',\r\n                    textStyle: {\r\n                        color: '#ccc'\r\n                    }\r\n                }\r\n            },\r\n            visualMap: [\r\n                {\r\n                    show: false,\r\n                    dimension: 3,\r\n                    categories: data.counties,\r\n                    calculable: true,\r\n                    precision: 0.1,\r\n                    textGap: 30,\r\n                    textStyle: {\r\n                        color: '#ccc'\r\n                    },\r\n                    inRange: {\r\n                        color: ['#bcd3bb', '#e88f70', '#edc1a5', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a']\r\n                    }\r\n                }\r\n            ],\r\n            series: [\r\n                {\r\n                    type: 'scatter',\r\n                    itemStyle: itemStyle,\r\n                    data: data.series[0],\r\n                    symbolSize: function(val) {\r\n                        return sizeFunction(val[2]);\r\n                    }\r\n                }\r\n            ],\r\n            animationDurationUpdate: 1000,\r\n            animationEasingUpdate: 'quinticInOut'\r\n        },\r\n        options: []\r\n    };\r\n\r\n    for (var n = 0; n < data.timeline.length; n++) {\r\n        option.baseOption.timeline.data.push(data.timeline[n]);\r\n        option.options.push({\r\n            title: {\r\n                show: true,\r\n                'text': data.timeline[n] + ''\r\n            },\r\n            series: {\r\n                name: data.timeline[n],\r\n                type: 'scatter',\r\n                itemStyle: itemStyle,\r\n                data: data.series[n],\r\n                symbolSize: function(val) {\r\n                    return sizeFunction(val[2]);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    myChart.setOption(option);\r\n\r\n});","html":"","externalScripts":"","updaterUID":"bd-2738046816","theme":"","layout":"","viewCount":633,"userName":"s***3","commentCount":1,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJfRfXnxz.png?v=1511957355772","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-scatter","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"s***3"}}