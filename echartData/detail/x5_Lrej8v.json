{"status":0,"data":{"cid":"x5_Lrej8v","authorUid":"bd-1597834988","authorUserName":"m***猫","title":"物流线路展示","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2019-10-24T08:28:09.000Z","lastUpdateTime":"2019-10-24T08:28:09.000Z","auth":2,"uid":"bd-1597834988","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-31T11:23:57.000Z","code":"var chinaGeoCoordMap = {\n    '黑龙江': [127.9688, 45.368],\n    '内蒙古': [110.3467, 41.4899],\n    \"吉林\": [125.8154, 44.2584],\n    '北京市': [116.4551, 40.2539],\n    \"辽宁\": [123.1238, 42.1216],\n    \"河北\": [114.4995, 38.1006],\n    \"天津\": [117.4219, 39.4189],\n    \"山西\": [112.3352, 37.9413],\n    \"陕西\": [109.1162, 34.2004],\n    \"甘肃\": [103.5901, 36.3043],\n    \"宁夏\": [106.3586, 38.1775],\n    \"青海\": [101.4038, 36.8207],\n    \"新疆\": [87.9236, 43.5883],\n    \"西藏\": [91.11, 29.97],\n    \"四川\": [103.9526, 30.7617],\n    \"重庆\": [108.384366, 30.439702],\n    \"山东\": [117.1582, 36.8701],\n    \"河南\": [113.4668, 34.6234],\n    \"江苏\": [118.8062, 31.9208],\n    \"安徽\": [117.29, 32.0581],\n    \"湖北\": [114.3896, 30.6628],\n    \"浙江\": [119.5313, 29.8773],\n    \"福建\": [119.4543, 25.9222],\n    \"江西\": [116.0046, 28.6633],\n    \"湖南\": [113.0823, 28.2568],\n    \"贵州\": [106.6992, 26.7682],\n    \"云南\": [102.9199, 25.4663],\n    \"广东\": [113.12244, 23.009505],\n    \"广西\": [108.479, 23.1152],\n    \"海南\": [110.3893, 19.8516],\n    '上海': [121.4648, 31.2891]\n};\nvar chinaDatas = [\n    [{\n        name: '黑龙江',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '内蒙古',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '吉林',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '辽宁',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '河北',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '天津',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '山西',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '陕西',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '甘肃',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '宁夏',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '青海',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '新疆',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '西藏',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '四川',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '重庆',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '山东',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '河南',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '江苏',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '安徽',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '湖北',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '浙江',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '福建',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '江西',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '湖南',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '贵州',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '广西',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n    [{\n        name: '海南',\n        value: 0,\n        price: 100,\n        num: 2\n    }],\n];\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        // \t\t\tconsole.log('dataItem',dataItem) //第二个数据\n        var fromCoord = [116.4551, 40.2539];\n        var toCoord = chinaGeoCoordMap[dataItem[0].name];\n        // \t\t\tconsole.log('toCoord',toCoord);//第一个地址\n        if (fromCoord && toCoord) {\n            res.push([{\n                coord: fromCoord,\n                value: dataItem[0].value,\n            }, {\n                coord: toCoord,\n                dataItem: dataItem\n            }]);\n        }\n    }\n    return res;\n};\nlet redName = '新疆';\nvar planePath = 'path://M.6,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705';\n\nvar series = [];\n[ ['北京市', chinaDatas] ].forEach(function(item, i) {\n    // console.log('得到数据',item)\n    series.push(\n        {\n            type: 'lines',\n            zlevel: 2,\n            effect: {\n                // 括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\n                show: true,\n                period: 4, //箭头指向速度，值越小速度越快\n                trailLength: 0.1, //特效尾迹长度[0,1]值越大，尾迹越长重\n                symbol: 'circle', //箭头图标\n                symbolSize: 3, //图标大小\n                color:\"#fff\"\n            },\n            \n            // symbol: ['none', 'arrow'],\n            lineStyle: { \n                 \n                normal: { \n                       \n                    // shadowBlur: .5, \n                    // // shadowColor: 'rgba(221, 244, 253, 1)', \n                    // shadowColor: 'rgba(221, 244, 253, 1)', \n                    // // shadowOffsetX: -5,\n                    // shadowOffsetY: 5,\n                    \n                    \n                    \n                    width:.7, //尾迹线条宽度\n                    opacity: .5, //尾迹线条透明度\n                    curveness: 0.2, //尾迹线条曲直度\n                    color: function(params) { //圆环显示文字\n                        // console.log('redName',redName)\n                        \n                           return '#ffa022'\n                        \n                    },\n                },\n                color: 'red'\n            },\n            tooltip: {\n                //  show:false,\n                trigger: 'item',\n                backgroundColor: 'rgba(8, 18, 42, 0.85)',\n                borderColor: '#040616',\n                showDelay: 0,\n                hideDelay: 0,\n                enterable: true,\n                transitionDuration: 0,\n                extraCssText: 'z-index:100',\n                formatter: function(params, ticket, callback) {\n                    //根据业务自己拓展要显示的内容\n                    //console.log('params--1',params)\n                    let res = \"\";\n                    let name = params.data.dataItem[0].name;\n                    let price = params.data.dataItem[0].price;\n                    let num = params.data.dataItem[0].num;\n                    // res = \"<div style='color:#fff;'><span>北京->\" + name + \"</span><br/><span>均价：\" + price + \"</span><br/><span>线路数：\" + num + \"</span></div>\";\n                    res = \"<div style='color:#fff;'><span>北京->\" + name + \"</span><br/><span>均价：\" + price + \"</span>,<span>线路数：\" + num + \"</span></div>\";\n\n\n                    let html = '<div class=\"mapTableContent\"><div class=\"tableTop\">北京 -> 新疆</div> <div class=\"tableList\"> <div class=\"item itemTop\"> <p>城市</p> <p>均价</p> <p>线路数</p> </div> <div class=\"item\"> <p>新疆-1</p> <p>100</p> <p>1</p> </div> <div class=\"item\"> <p>新疆-2</p> <p>200</p> <p>2</p> </div> </div> </div>' \n                    if(name == redName){\n                        return html;\n                    }else{\n                        return res;\n                    }\n                }\n            },\n            data: convertData(item[1])\n        }, \n        {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: { //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: 'fill', //波纹绘制方式 stroke, fill\n                scale: 2.2 //波纹圆环最大限制，值越大波纹越大\n            },\n        \n      // 括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\n            // symbol: 'none',\n             symbol: 'circle',\n            symbolSize: function(val) {\n                return 5; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: false,\n                    // color: '#f00'\n                    color: function(params) { //圆环显示文字\n                        // console.log('redName',redName)\n                       \n                           return '#ffa022'\n                        \n                    },\n                    borderWidth: 0,\n                    shadowColor: '#b5e8fa', //发光?效果\n                    shadowBlur: 4\n                }\n            },\n            tooltip: {\n                //  show:false,\n                trigger: 'item',\n                backgroundColor: 'rgba(8, 18, 42, 0.85)',\n                borderColor: '#040616',\n                showDelay: 0,\n                hideDelay: 0,\n                enterable: true,\n                transitionDuration: 0,\n                extraCssText: 'z-index:100',\n                formatter: function(params, ticket, callback) {\n                    // 根据业务自己拓展要显示的内容\n                    //console.log('params--2',params)\n                    let res = \"\";\n                    let name = params.data.dataItem[0].name;\n                    let price = params.data.dataItem[0].price;\n                    let num = params.data.dataItem[0].num;\n                    res = \"<div style='color:#fff;padding:10px;'><span>北京->\" + name + \"</span><br/><span>均价：\" + price + \"</span><br/><span>线路数：\" + num + \"</span></div>\";\n                    return res;\n                }\n            },\n            data: item[1].map(function(dataItem) {\n                // \tconsole.log('dataItem',dataItem[0]);\n                return {\n                    dataItem: dataItem,\n                    name: dataItem[0].name,\n                    value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\n                };\n            }),\n        },\n        //被攻击点\n        {\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            zlevel: 1,\n            rippleEffect: {\n                period: 4,\n                brushType: 'stroke',\n                scale: 4\n            },\n\n          \n            symbol: 'circle',\n            color:'rgba(128, 220, 251, .6)',\n            symbolSize: 20,\n            data: [{\n                name: item[0],\n                value: chinaGeoCoordMap[item[0]].concat([10]),\n            }],\n        }\n    );\n});\n\noption = {\n    tooltip: {\n        //  show:false,\n        trigger: 'item',\n        backgroundColor: 'rgba(166, 200, 76, 0.82)',\n        borderColor: '#040616',\n        showDelay: 0,\n        hideDelay: 0,\n        enterable: true,\n        transitionDuration: 0,\n        extraCssText: 'z-index:100'\n    },\n    // backgroundColor: \"#001339\", \n      backgroundColor: '#001d3d',\n    // visualMap: { //图例值控制\n    //     min: 0,\n    //     max: 1,\n    //     calculable: true,\n    //     show: false,\n    //     color: ['#4fc6ef', '#4fc6ef', '#4fc6ef', '#4fc6ef', '#4fc6ef'],\n    //     textStyle: {\n    //         color: '#fff'\n    //     }\n    // },\n    geo: {\n        map: 'china',\n        zoom: 1,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: false, //是否允许缩放\n        itemStyle: {\n            normal: {\n                color: \"#092765\", //地图背景色\n                borderColor: '#6481a0', //省市边界线00fcff 516a89\n                borderWidth: 1\n            },\n            emphasis: {\n                color: 'rgba(37, 43, 61, .5)' //悬浮背景\n            }\n            //   normal: {\n            //     areaColor: '#132937',\n            //     borderColor: '#0692a4'\n            // },\n            // emphasis: {\n            //     areaColor: '#0b1c2d'\n            // }\n        }\n    },\n    series: series\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-1597834988","theme":"","layout":"","viewCount":7935,"userName":"m***猫","commentCount":1,"starCount":29,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5_Lrej8v.png?v=1572521037169","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","tooltip"],"customTags":[],"updaterUserName":"m***猫"}}