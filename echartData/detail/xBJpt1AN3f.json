{"status":0,"data":{"cid":"xBJpt1AN3f","authorUid":"bd-3778831175","authorUserName":"m***i","title":"NY Buildings And Taxi Roads","description":"NY Buildings And Taxi Roads","latestVersion":6,"alwaysLatest":1,"createTime":"2018-04-18T14:00:37.000Z","lastUpdateTime":"2018-04-18T14:00:37.000Z","auth":2,"uid":"bd-3778831175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.1.0","versionCreateTime":"2019-01-09T11:18:43.000Z","code":"$.getJSON('/asset/get/s/data-1524056463493-H1PcbpN2z.json', function(buildingsGeoJSON) {\n    var builds = buildingsGeoJSON.map(function(feature) {\n        return {\n            \"type\": \"Feature\",\n            \"properties\": {\n                \"name\": Math.random().toString(),\n                \"height\": feature.height || 100\n            },\n            \"geometry\": {\n                \"type\": \"Polygon\",\n                \"coordinates\": [feature.polygon]\n            }\n        }\n    })\n\n    var regionsData = builds.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: Math.random() * 1,\n            height: feature.properties.height,\n            coords: feature.geometry.coordinates\n        };\n    });\n\n    $.getJSON('/asset/get/s/data-1524055280228-SkugT242f.json', function(linesData) {\n        var data = linesData.features;\n        var hStep = 300 / (data.length - 1);\n        var taxiRoutes = [];\n        var i = 0;\n        for (var x in data) {\n            var lnglats = data[x].geometry.coordinates\n            taxiRoutes.push({\n                coords: lnglats,\n                lineStyle: {\n                    color: echarts.color.modifyHSL('#5A94DF', Math.round(hStep * x))\n\n                },\n                value: Math.random() * 200\n            })\n        }\n\n        myChart.setOption({\n            maptalks3D: {\n                center: [-74.01164278497646, 40.70769573605318],\n                zoom: 16,\n                pitch: 55,\n                urlTemplate: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n                // altitudeScale: 1,\n                postEffect: {\n                    enable: true,\n                    FXAA: {\n                        enable: true\n                    }\n                },\n                light: {\n                    main: {\n                        intensity: 1,\n                        shadow: true,\n                        shadowQuality: 'high'\n                    },\n                    ambient: {\n                        intensity: 0.\n                    },\n                    ambientCubemap: {\n                        texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\n                        exposure: 1,\n                        diffuseIntensity: 0.5,\n                        specularIntensity: 2\n                    }\n                }\n            },\n            series: [{\n                    type: 'polygons3D',\n                    coordinateSystem: 'maptalks3D',\n                    // map: 'buildings',\n                    data: regionsData,\n                    shading: 'realistic',\n                    silent: true,\n                    instancing: true,\n                    realisticMaterial: {\n                        metalness: 1,\n                        roughness: 0.4,\n                        // textureTiling: 200,\n                        // detailTexture: '/asset/get/s/data-1528097075999-B13VYDfxm.jpg'\n                    }\n                },\n                {\n                    type: 'lines3D',\n                    coordinateSystem: 'maptalks3D',\n                    effect: {\n                        show: true,\n                        constantSpeed: 1,\n                        trailWidth: 3,\n                        trailLength: 1,\n                        trailOpacity: 1,\n                        spotIntensity: 10\n                    },\n                    blendMode: 'lighter',\n                    polyline: true,\n                    data: taxiRoutes\n                }\n            ]\n        });\n\n        var maptalksIns = myChart.getModel().getComponent('maptalks3D').getMaptalks();\n        maptalksIns.on('click', function(e) {\n            console.log(e)\n        });\n\n    });\n});","html":"","externalScripts":"https://cdn.jsdelivr.net/npm/maptalks@0.39.3/dist/maptalks.min.js,https://cdn.bootcss.com/echarts/4.1.0/echarts.min.js,https://deyihu.github.io/src/lib/echarts-gl.1.1.3.js?tdsourcetag=s_pctim_aiomsg,https://cdn.bootcss.com/jquery/2.0.3/jquery.min.js,https://cdnjs.cloudflare.com/ajax/libs/tween.js/r14/Tween.js","updaterUID":"bd-3778831175","theme":"","layout":"","viewCount":43052,"userName":"m***i","commentCount":31,"starCount":64,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBJpt1AN3f.png?v=1524060038716","isCustomThumbnail":1,"builtinTags":["category-work","maptalks3D","series-lines3D","series-polygons3D"],"customTags":["echarts-gl"],"updaterUserName":"m***i"}}