{"status":0,"data":{"cid":"xotUkUWcB0","authorUid":"bd-2150127011","authorUserName":"黒***紫","title":"3D地图飞机线","description":"3D地图飞机线","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-27T09:41:53.000Z","lastUpdateTime":"2019-08-27T09:41:53.000Z","auth":1,"uid":"bd-2150127011","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-27T09:41:53.000Z","code":"var chinaGeoCoordMap = {\r\n    '黑龙江': [127.9688, 45.368],\r\n    '内蒙古': [110.3467, 41.4899],\r\n    \"吉林\": [125.8154, 44.2584],\r\n    '北京市': [116.4551, 40.2539],\r\n    \"辽宁\": [123.1238, 42.1216],\r\n    \"河北\": [114.4995, 38.1006],\r\n    \"天津\": [117.4219, 39.4189],\r\n    \"山西\": [112.3352, 37.9413],\r\n    \"陕西\": [109.1162, 34.2004],\r\n    \"甘肃\": [103.5901, 36.3043],\r\n    \"宁夏\": [106.3586, 38.1775],\r\n    \"青海\": [101.4038, 36.8207],\r\n    \"新疆\": [87.9236, 43.5883],\r\n    \"西藏\": [91.11, 29.97],\r\n    \"四川\": [103.9526, 30.7617],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"山东\": [117.1582, 36.8701],\r\n    \"河南\": [113.4668, 34.6234],\r\n    \"江苏\": [118.8062, 31.9208],\r\n    \"安徽\": [117.29, 32.0581],\r\n    \"湖北\": [114.3896, 30.6628],\r\n    \"浙江\": [119.5313, 29.8773],\r\n    \"福建\": [119.4543, 25.9222],\r\n    \"江西\": [116.0046, 28.6633],\r\n    \"湖南\": [113.0823, 28.2568],\r\n    \"贵州\": [106.6992, 26.7682],\r\n    \"云南\": [102.9199, 25.4663],\r\n    \"广东\": [113.12244, 23.009505],\r\n    \"广西\": [108.479, 23.1152],\r\n    \"海南\": [110.3893, 19.8516],\r\n    '上海': [121.4648, 31.2891]\r\n};\r\nvar chinaDatas = [\r\n    [{\r\n        name: '黑龙江',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '内蒙古',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '吉林',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '辽宁',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '河北',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '天津',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '山西',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '陕西',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '甘肃',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '宁夏',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '青海',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '新疆',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '西藏',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '四川',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '重庆',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '山东',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '河南',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '江苏',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '安徽',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '湖北',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '浙江',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '福建',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '江西',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '湖南',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '贵州',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '广西',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '海南',\r\n        value: 0\r\n    }],\r\n    [{\r\n        name: '上海',\r\n        value: 1\r\n    }]\r\n];\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = chinaGeoCoordMap[dataItem[0].name];\r\n        var toCoord = [116.4551, 40.2539];\r\n        if (fromCoord && toCoord) {\r\n            res.push({\r\n        coords: [ fromCoord,toCoord ],\r\n        // 数据值\r\n        value: dataItem[0].value,\r\n    });\r\n        }\r\n    }\r\n    return res;\r\n};\r\nvar series = [];\r\n[\r\n    ['北京市', chinaDatas]\r\n].forEach(function(item, i) {\r\n    console.log(item)\r\n    series.push({\r\n        type: 'lines3D',\r\n\r\n        coordinateSystem: 'geo3D',\r\n\r\n\r\n        blendMode: 'lighter',\r\n\r\n        effect: {\r\n            show: true,\r\n            period: 4, //箭头指向速度，值越小速度越快\r\n            trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n            symbol: 'arrow', //箭头图标\r\n            symbolSize: 5, //图标大小\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                width: 1, //尾迹线条宽度\r\n                opacity: 1, //尾迹线条透明度\r\n                curveness: .3 //尾迹线条曲直度\r\n            }\r\n        },\r\n        data: convertData(item[1])\r\n    }, {\r\n        type: 'bar3D',\r\n        coordinateSystem: 'geo3D',\r\n        label: {\r\n            show: false\r\n        },\r\n        bevelSize: 1,\r\n        bevelSmoothness: 5,\r\n        itemStyle:{\r\n            opacity: 0.6,\r\n        },\r\n        minHeight: 1,\r\n        shading: 'realistic',\r\n        data: item[1].map(function(dataItem) {\r\n            return {\r\n                name: dataItem[0].name,\r\n                value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n            };\r\n        }),\r\n    }, {\r\n        type: 'scatter3D',\r\n        coordinateSystem: 'geo3D',\r\n        rippleEffect: {\r\n            period: 4,\r\n            brushType: 'stroke',\r\n            scale: 4\r\n        },\r\n        symbol: 'pin',\r\n        symbolSize: 50,\r\n        data: [{\r\n            name: item[0],\r\n            value: chinaGeoCoordMap[item[0]].concat([10]),\r\n        }],\r\n    });\r\n});\r\nconsole.log(series);\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        backgroundColor: 'rgba(166, 200, 76, 0.82)',\r\n        borderColor: '#FFFFCC',\r\n        showDelay: 0,\r\n        hideDelay: 0,\r\n        enterable: true,\r\n        transitionDuration: 0,\r\n        extraCssText: 'z-index:100',\r\n        formatter: function(params, ticket, callback) {\r\n            //根据业务自己拓展要显示的内容\r\n            var res = \"\";\r\n            var name = params.name;\r\n            var value = params.value[params.seriesIndex + 1];\r\n            res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\r\n            return res;\r\n        }\r\n    },\r\n    backgroundColor: \"#013954\",\r\n    visualMap: { //图例值控制\r\n        min: 0,\r\n        max: 1,\r\n        calculable: true,\r\n        show: true,\r\n        color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    geo3D: {\r\n        map: 'china',\r\n        roam: true,\r\n        itemStyle: {\r\n            areaColor: 'rgb(5,101,123)',\r\n            opacity: 1,\r\n            borderWidth: 0.8,\r\n            borderColor: 'rgb(62,215,213)'\r\n        },\r\n        label: {\r\n            show: true,\r\n            textStyle: {\r\n                color: '#fff', //地图初始化区域字体颜色\r\n                fontSize: 16,\r\n                opacity: 1,\r\n                backgroundColor: 'rgba(0,0,0,0)'\r\n                //backgroundColor: 'rgba(53,171,199,0)'\r\n            },\r\n        },\r\n        emphasis: { //当鼠标放上去  地区区域是否显示名称\r\n            label: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#fff',\r\n                    fontSize: 16,\r\n                    backgroundColor: 'rgba(0,23,11,0)'\r\n                }\r\n            }\r\n        },\r\n        //shading: 'lambert',\r\n        light: { //光照阴影\r\n            main: {\r\n                color: '#fff', //光照颜色\r\n                intensity: 1.2, //光照强度\r\n                //shadowQuality: 'high', //阴影亮度\r\n                shadow: false, //是否显示阴影\r\n                alpha: 55,\r\n                beta: 10\r\n\r\n            },\r\n            ambient: {\r\n                intensity: 0.3\r\n            }\r\n        },\r\n        realisticMaterial: {\r\n            detailTexture: 'asset/leather/leather_albedo.jpg'\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/latest/extension/bmap.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-2150127011","theme":"","layout":"","viewCount":149,"userName":"黒***紫","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xotUkUWcB0.png?v=1566898913551","isCustomThumbnail":0,"builtinTags":["category-work","geo3D","series-bar3D","series-lines3D","series-scatter3D","tooltip","visualMap"],"customTags":[],"updaterUserName":"黒***紫"}}