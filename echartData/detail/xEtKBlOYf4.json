{"status":0,"data":{"cid":"xEtKBlOYf4","authorUid":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","authorUserName":"h***笙","title":"“设备实行情况” - 驻马店市","description":"自定义上传json文件，修改地理坐标，可做本地市区分析展示","latestVersion":1,"alwaysLatest":1,"createTime":"2020-08-15T01:01:01.000Z","lastUpdateTime":"2020-08-15T01:01:01.000Z","auth":2,"uid":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-15T01:01:01.000Z","code":"//引入市区json文件\nvar uploadedDataURL = \"/asset/get/s/data-1597452450339-dQm5JP9rx.json\";\n\n\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('china', geoJson);\n    myChart.hideLoading();\n    //地理位置信息\n    var geoCoordMap = {\n       '遂平县': [114.015819,33.150944],\n    '上蔡县': [114.276256,33.267906],\n    '西平县': [114.022143,33.394355],\n    \"驿城区\": [114.006045,32.978599],\n    '确山县': [114.033641,32.810768],\n    \"泌阳县\": [113.335694,32.731107],\n    \"汝南县\": [114.375141,33.016389],\n    \"正阳县\": [114.398138,32.615372],\n    \"平舆县\": [114.629254,32.969876],\n    \"新蔡县\": [114.979952,32.752487]\n    \n};\n//数据信息\n    var data = [\n        {name:\"遂平县\",value:199},\n    {name:\"上蔡县\",value:42},\n    {name:\"西平县\",value:102},\n    {name:\"驿城区\",value:81},\n    {name:\"确山县\",value:47},\n    {name:\"泌阳县\",value:67},\n    {name:\"汝南县\",value:82},\n    {name:\"正阳县\",value:123},\n    {name:\"平舆县\",value:24},\n    {name:\"新蔡县\",value:92}\n    ];\n   var max = 480, min = 9; // todo \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\n\n\n    option = {\n        backgroundColor: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 1,\n        y2: 1,\n        colorStops: [{\n            offset: 0, color: '#0f378f' // 0% 处的颜色\n        }, {\n            offset: 1, color: '#00091a' // 100% 处的颜色\n        }],\n        globalCoord: false \n    },\n        title: {\n            top:20,\n            text: '“设备实行情况” - 驻马店市',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n       tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n     /*   legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n             data:['pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },*/\n            legend: {\n        orient: 'vertical',\n        y: 'bottom',\n        x:'right',\n        data:['pm2.5'],\n        textStyle: {\n            color: '#fff'\n        }\n    }, \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n\n            }\n        },\n        geo: {\n            map: 'china',\n            show: true,\n            roam: true,\n            center:[114.006045,32.978599],\n             zoom : 7,//当前视角缩放比例\n            label: {\n\t\t\t\tnormal: {\n\t\t\t\t\tshow: false\n\t\t\t\t},\n\t\t\t\temphasis: {\n\t\t\t\t\tshow: false,\n\t\t\t\t}\n\t\t\t},\n            itemStyle: {\n                normal: {\n                    areaColor: '#3a7fd5',\n                    borderColor: '#0a53e9',//线\n                    shadowColor: '#092f8f',//外发光\n                    shadowBlur: 20\n                },\n\t\t\t\t emphasis: {\n                    areaColor: '#0a2dae',//悬浮区背景\n                }\n            }\n        },\n        series : [\n      {\n         \n            symbolSize: 5,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#fff'\n                }\n            },\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            \n        },\n         {\n            type: 'map',\n            map: 'china',\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#FFFFFF',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7'\n                }\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: 'Top 5',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin',\n            symbolSize: [50,50],\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    },\n                    formatter (value){\n                        return value.data.value[2]\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#D8BC37', //标志颜色\n                }\n            },\n            data: convertData(data),\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            zlevel: 1\n        },\n         \n    ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"http://mc3mc3.applinzi.com/map/jquery-3.4.1.js","updaterUID":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","theme":"","layout":"","viewCount":8640,"userName":"h***笙","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xEtKBlOYf4.png?v=1597453261935","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"h***笙"}}