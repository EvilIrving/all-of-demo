{"status":0,"data":{"cid":"xWSnx5gXV","authorUid":"bd-623649287","authorUserName":"l***c","title":"同一个图中多坐标轴","description":"","latestVersion":23,"alwaysLatest":1,"createTime":"2019-11-11T05:30:36.000Z","lastUpdateTime":"2019-11-11T05:30:36.000Z","auth":2,"uid":"bd-623649287","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":23,"parentVersion":22,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-18T04:28:15.000Z","code":"    function calculateMA(cateIndex, data) {\n        const result = []\n        for (var item of data) {\n            result.push(item[cateIndex])\n        }\n        return result\n    }\n    const cate2 = ['疾病分期', '药物治疗', '放射治疗']\n    var data = {\n        categoryData: [\"2004-01-02\", \"2004-01-05\", \"2004-01-06\", \"2004-01-07\", \"2004-01-08\", \"2004-01-09\", \"2004-01-12\"],\n        values: [\n            [10452.74, 10409.85, 10367.41, 10554.96],\n            [10411.85, 10544.07, 10411.85, 10575.92],\n            [10543.85, 10538.66, 10454.37, 10584.07],\n            [10535.46, 10529.03, 10432, 10587.55],\n            [10530.07, 10592.44, 10480.59, 10651.99],\n            [10589.25, 10458.89, 10420.52, 10603.48],\n            [10461.55, 10485.18, 10389.85, 10543.03]\n        ],\n        volumns: [\n            [\n                [\"2004-01-06\", 10],\n                [\"2004-01-07\", 10]\n            ],\n            [\n                [\"2004-01-07\", 8],\n                [\"2004-01-09\", 8]\n            ],\n            [\n                [\"2004-01-05\", 6]\n            ],\n        ]\n    };\n    console.log(data)\n    console.log(calculateMA(0, data.values))\n    console.log(calculateMA(1, data.values))\n    option = {\n        backgroundColor: '#eee',\n        animation: true,\n        // legend: {\n        //     bottom: 40,\n        //     left: 'center',\n        //     data: ['Dow-Jones index', 'MA5', 'MA10', 'MA20', 'MA30']\n        // },\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                type: 'line',\n                snap: true,\n                lineStyle: {\n                    color: '#000',\n                    width: 2,\n                    type: 'dashed'\n                }\n            },\n            backgroundColor: 'rgba(245, 245, 245, 0.8)',\n            borderWidth: 1,\n            borderColor: '#ccc',\n            padding: 10,\n            textStyle: {\n                color: '#000'\n            },\n            position: function(pos, params, el, elRect, size) {\n                var obj = {\n                    top: 10\n                };\n                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;\n                return obj;\n            },\n            extraCssText: 'width: 200px',\n            triggerOn: 'mousemove',\n            confine: true\n        },\n        axisPointer: {\n            link: {\n                xAxisIndex: 'all'\n            },\n            label: {\n                backgroundColor: '#777'\n            }\n        },\n        // toolbox: {\n        //     feature: {\n        //         dataZoom: {\n        //             yAxisIndex: false\n        //         },\n        //         // brush: {\n        //         //     type: ['lineX', 'clear']\n        //         // }\n        //     }\n        // },\n        // brush: {\n        //     xAxisIndex: 'all',\n        //     brushLink: 'all',\n        //     outOfBrush: {\n        //         colorAlpha: 0.1\n        //     }\n        // },\n        grid: [{\n                top: '10%',\n                left: '10%',\n                right: '8%',\n                height: '50%',\n            },\n            {\n                left: '10%',\n                right: '8%',\n                bottom: '20%',\n                height: '15%',\n            }\n        ],\n        xAxis: [{\n                type: 'category',\n                data: data.categoryData,\n                scale: true,\n                boundaryGap: false,\n                axisLine: {\n                    show: false,\n                },\n                axisTick: {\n                    show: false,\n                },\n                axisLabel: {\n                    margin: 15,\n                    color: '#333',\n                    fontSize: 14,\n                },\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                        type: 'dashed',\n                    },\n                },\n                splitNumber: 20,\n                min: 'dataMin',\n                max: 'dataMax',\n                axisPointer: {\n                    z: 100,\n                },\n            },\n\n            {\n                type: 'category',\n                gridIndex: 1,\n                data: data.categoryData,\n                scale: true,\n                boundaryGap: false,\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                    },\n                },\n                axisLabel: {\n                    color: '#333'\n                },\n                axisTick: {\n                    show: false,\n                },\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                        type: 'dashed',\n                    },\n                },\n                // axisLabel: {show: false},\n                splitNumber: 20,\n                min: 'dataMin',\n                max: 'dataMax',\n            },\n        ],\n        yAxis: [{\n                scale: true,\n                splitArea: {\n                    // show: true,\n                },\n                axisLine: {\n                    show: false,\n                    onZero: false,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                    },\n                },\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                        type: 'dashed',\n                    },\n                },\n                axisLabel: {\n                    show: false,\n                },\n                axisTick: {\n                    show: false,\n                },\n                name: '检验结果',\n                nameTextStyle: {\n                    color: '#333',\n                    padding: [0, 80, -30, 0],\n                },\n            },\n            {\n                scale: true,\n                gridIndex: 1,\n                splitNumber: 2,\n                axisLabel: {\n                    color: 'rgba(0,0,0,0.90)',\n                    fontSize: 16,\n                    formatter(value, index) {\n                        console.log(value, index);\n                        return cate2[index];\n                    },\n                },\n                axisLine: {\n                    show: false,\n                    onZero: false,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                        type: 'dashed',\n                    },\n                },\n                axisTick: {\n                    show: false,\n                },\n\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#d8d8d8',\n                        type: 'dashed',\n                    },\n                },\n            },\n        ],\n        dataZoom: [{\n                type: 'inside',\n                xAxisIndex: [0, 1],\n                start: 10,\n                end: 80,\n            },\n            {\n                show: true,\n                xAxisIndex: [0, 1],\n                type: 'slider',\n                height: 20,\n                // top: '5%',\n                bottom: '10%',\n                start: 10,\n                end: 80,\n                handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\n                handleSize: '140%',\n                handleStyle: {\n                    color: '#57A6AF',\n                },\n                backgroundColor: '#f8f8f9',\n                dataBackground: {\n                    lineStyle: {\n                        width: 0,\n                    },\n                    areaStyle: {\n                        color: 'transparent',\n                    },\n                },\n                fillerColor: 'rgba(87,166,175,0.40)',\n                textStyle: {\n                    color: 'red',\n                }\n\n            }\n        ],\n        series: [{\n                name: 'Dow-Jones index',\n                type: 'line',\n                data: calculateMA(0, data.values),\n\n                // symbol(value, params){\n                //     console.log(value, params);\n                //     const {marker} = params\n                //     return '<span title=\"点击\" style=\"display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#06B800;\"></span>'\n                // },\n                // markLine: {\n                //     itemStyle: {\n                //         normal: {\n                //             lineStyle: { type: 'solid',width: 4, color: 'orange' },\n                //             label: { show: true, position: 'end' } \n                //         },\n                //     }, \n                //     symbol: 'none',\n                //     data: [\n                //         [\n                //             {\n                //                 name: '正常值范围',\n                //                 coord: ['2004-01-12', 10410],\n                //                 symbolOffset: [80,0],\n                //             },\n                //             {\n                //                 // name: '正常值范围',\n                //                 coord: ['2004-01-12', 10465],\n                //             },\n\n\n                //         ]\n                //     ]\n                // },\n\n                markPoint: {\n                    symbol: \"rect\",\n                    symbolSize: [8, 180],\n                    symbolOffset: [8, 0],\n                    label: {\n                        position: 'insideRight'\n                    },\n                    data: [{\n                        name: '正常值范围',\n                        coord: ['2004-01-12', 10465]\n                    }]\n                },\n                zlevel: 1,\n                symbolSize: 10,\n\n                // smooth: true,\n            },\n            {\n                name: 'MA5',\n                type: 'line',\n                data: calculateMA(1, data.values),\n                // smooth: true,\n                lineStyle: {\n                    normal: {\n                        opacity: 0.5\n                    }\n                }\n            },\n            {\n                name: 'MA10',\n                type: 'line',\n                data: calculateMA(2, data.values),\n                // smooth: true,\n                lineStyle: {\n                    normal: {\n                        opacity: 0.5\n                    }\n                }\n            },\n            {\n                name: 'MA20',\n                type: 'line',\n                data: calculateMA(3, data.values),\n                // smooth: true,\n                lineStyle: {\n                    normal: {\n                        opacity: 0.5\n                    }\n                }\n            },\n\n            {\n                name: cate2[0],\n                type: 'line',\n                xAxisIndex: 1,\n                yAxisIndex: 1,\n                data: data.volumns[2],\n                symbolSize: 10,\n                lineStyle: {\n                    width: 4\n                }\n            },\n\n            {\n                name: cate2[1],\n                type: 'line',\n                xAxisIndex: 1,\n                yAxisIndex: 1,\n                data: data.volumns[1],\n                symbolSize: 10,\n                lineStyle: {\n                    width: 4\n                }\n            },\n\n            {\n                name: cate2[2],\n                type: 'line',\n                xAxisIndex: 1,\n                yAxisIndex: 1,\n                data: data.volumns[0],\n                symbolSize: 10,\n                lineStyle: {\n                    width: 4\n                }\n            }\n        ]\n    }\n\n    myChart.on('click', function(params) {\n        // params  单击拐点的具体数据信息\n        const {\n            value,\n            seriesName,\n            seriesIndex\n        } = params\n        // window.alert(`您点击了 ${seriesName} at index ${seriesIndex} : value`)\n        console.log('单击项', params);\n    })\n\n    myChart.on('mouseover', function(params) {\n        // params  单击拐点的具体数据信息\n        const {\n            value,\n            seriesName,\n            seriesIndex\n        } = params\n        // window.alert(`您点击了 ${seriesName} at index ${seriesIndex} : value`)\n        console.log('单击项', params);\n    })","html":"","externalScripts":"","updaterUID":"bd-623649287","theme":"","layout":"","viewCount":385,"userName":"l***c","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWSnx5gXV.png?v=1574051295953","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","markPoint","series-line","tooltip"],"customTags":[],"updaterUserName":"l***c"}}