{"status":0,"data":{"cid":"x9RDz0M-uS","authorUid":"bd-389650542","authorUserName":"夜***雅","title":"水平柱图含统计","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-10-13T06:05:54.000Z","lastUpdateTime":"2020-10-13T06:05:54.000Z","auth":2,"uid":"bd-389650542","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-13T06:35:57.000Z","code":"var spNum = 5,\r\n    _max = 100;\r\nvar y_data = ['一大队', '二大队', '三大队', '四大队', '五大队', '六大队'];\r\nvar _data1 = [10, 15, 10, 13, 15, 11],\r\n    _data2 = [19, 5, 40, 33, 15, 51],\r\n    _data3 = [21, 55, 10, 13, 35, 11];\r\nvar attackSourcesColor = ['#C86E0B', '#1378C0', '#279654', '#6989BB'];\r\n\r\nfunction contains(arr, dst) {\r\n    var i = arr.length;\r\n    while (i -= 1) {\r\n        if (arr[i] == dst) {\r\n            return i;\r\n        }\r\n    }\r\n    return false;\r\n}\r\noption = {\r\n    backgroundColor: '#021730',\r\n    grid: {\r\n        containLabel: true,\r\n        left: '-2%',\r\n        right: 0,\r\n        bottom: 0,\r\n        top:10\r\n    },\r\n    tooltip: {\r\n        show: true,\r\n        backgroundColor: '#fff',\r\n        borderColor: '#ddd',\r\n        borderWidth: 1,\r\n        textStyle: {\r\n            color: '#3c3c3c',\r\n            fontSize: 16\r\n        },\r\n        formatter: function(p) {\r\n            // console.log(p);\r\n            var _arr = p.seriesName.split('/'),\r\n                idx = p.seriesIndex; //1，2，3\r\n            return '名称：' + p.seriesName + '<br>' + '完成：' + p.value + '<br>' + '占比：' + (p.value / _max * 100).toFixed(0) + '%';\r\n        },\r\n        extraCssText: 'box-shadow: 0 0 5px rgba(0, 0, 0, 0.1)'\r\n    },\r\n    xAxis: {\r\n        splitNumber: spNum,\r\n        interval: _max / spNum,\r\n        max: _max,\r\n        axisLabel: {\r\n            show: false,\r\n            formatter: function(v) {\r\n                var _v = (v / _max * 100).toFixed(0);\r\n                return _v == 0 ? _v : _v + '%';\r\n            }\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n\r\n    },\r\n    yAxis: [{\r\n        data: y_data,\r\n        inverse: true,\r\n        axisLabel: {\r\n            verticalAlign: \"bottom\",\r\n            align: \"left\",\r\n            padding: [0, 12, 12, 6],\r\n            textStyle: {\r\n                fontSize: 14,\r\n                color: \"#ffffff\",\r\n                fontFamily: \"SourceHanSansCN-Regular\"\r\n            },\r\n            rich: {\r\n                nt1: {\r\n                    color: '#fff',\r\n                    backgroundColor: attackSourcesColor[0],\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 4,\r\n                    fontFamily: 'DIN',\r\n                    fontSize: 14\r\n                },\r\n                nt2: {\r\n                    color: '#fff',\r\n                    backgroundColor: attackSourcesColor[1],\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 4,\r\n                    fontFamily: 'DIN',\r\n                    fontSize: 14\r\n                },\r\n                nt3: {\r\n                    color: '#fff',\r\n                    backgroundColor: attackSourcesColor[2],\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 4,\r\n                    fontFamily: 'DIN',\r\n                    fontSize: 14\r\n                },\r\n                nt: {\r\n                    color: '#fff',\r\n                    backgroundColor: attackSourcesColor[3],\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 4,\r\n                    fontFamily: 'DIN',\r\n                    fontSize: 14\r\n                },\r\n            },\r\n            formatter: function(value, index) {\r\n                index = contains(y_data, value) + 1\r\n                if (index - 1 < 3) {\r\n                    return [\r\n                        '{nt' + index + '|' + index + '}' + '  {title' + index + '|' + value + '}'\r\n                    ].join('\\n')\r\n                } else {\r\n                    return [\r\n                        '{nt|' + index + '}' + '  {title|' + value + '}'\r\n                    ].join('\\n')\r\n                }\r\n            }\r\n\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    }, {\r\n        show: false,\r\n        data: y_data,\r\n        axisLine: {\r\n            show: false\r\n        }\r\n    }],\r\n    dataZoom: [{\r\n        type: 'slider',\r\n        yAxisIndex: 0,\r\n        zoomLock: true,\r\n        width: 10,\r\n        handleSize: 0,\r\n        showDetail: false,\r\n        start: 0,\r\n        end: 50,\r\n        handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',\r\n        handleSize: '110%',\r\n        handleStyle: {\r\n            color: \"blue\",\r\n        },\r\n        borderColor: \"red\",\r\n        fillerColor:'blue'\r\n    }, {\r\n        type: 'inside',\r\n        id: 'insideY',\r\n        yAxisIndex: 0,\r\n        start: 0,\r\n        end: 50,\r\n        zoomOnMouseWheel: false,\r\n        moveOnMouseMove: true,\r\n        moveOnMouseWheel: true\r\n    }],\r\n    series: [{\r\n            name: '总量',\r\n            barWidth: 6,\r\n            type: 'bar',\r\n            stack: '1',\r\n            barGap: '-100%', // 将总计与其他数据重合\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: ['102%', '-3'], // 总计数据的位置,\r\n                    textStyle: {\r\n                        fontSize: 14,\r\n                        color: '#18CEFE' //总计数据的颜色\r\n                    },\r\n                },\r\n            },\r\n            itemStyle: {\r\n                color: 'transparent', // 颜色自己设\r\n            },\r\n            data: [50, 75, 60, 59, 65, 73]\r\n        },\r\n        {\r\n            type: 'bar',\r\n            name: '已处置',\r\n            stack: '2',\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            legendHoverLink: false,\r\n            animationDuration: 1500,\r\n            barWidth: 6,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#0096FF',\r\n                    barBorderRadius: [20, 20, 20, 20],\r\n                },\r\n                emphasis: {\r\n                    color: '#0096FF'\r\n                }\r\n            },\r\n            data: _data1\r\n        }, {\r\n            type: 'bar',\r\n            name: '未处置',\r\n            stack: '2',\r\n            legendHoverLink: false,\r\n            barWidth: 6,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#00FFFF',\r\n                    barBorderRadius: [20, 20, 20, 20],\r\n                },\r\n                emphasis: {\r\n                    color: '#00FFFF'\r\n                }\r\n            },\r\n            data: _data2\r\n        }, {\r\n            type: 'bar',\r\n            stack: '2',\r\n            name: '处置中',\r\n            legendHoverLink: false,\r\n            barWidth: 6,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#2CD00E',\r\n                    barBorderRadius: [20, 20, 20, 20],\r\n                },\r\n                emphasis: {\r\n                    color: '#2CD00E'\r\n                }\r\n            },\r\n            data: _data3\r\n        }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-389650542","theme":"default","layout":"","viewCount":119,"userName":"夜***雅","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9RDz0M-uS.png?v=1602570957659","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"夜***雅"}}