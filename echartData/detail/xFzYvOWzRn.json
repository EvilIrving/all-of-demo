{"status":0,"data":{"cid":"xFzYvOWzRn","authorUid":"obd-oNrF49s1TQu3mDmHhnt96xmGFxk3oCH","authorUserName":"我***乞","title":"刻度表盘","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-04-21T06:19:38.000Z","lastUpdateTime":"2021-04-21T06:19:38.000Z","auth":2,"uid":"obd-oNrF49s1TQu3mDmHhnt96xmGFxk3oCH","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-04-21T06:19:38.000Z","code":" let angle = 0;//角度，用来做简单的动画效果的\r\nlet value = 55.33;\r\noption = {\r\n// backgroundColor:\"#061740\",\r\ntitle: {\r\n        text: '{a|'+ value +'}{c|%}',\r\n        x: 'center',\r\n        y: 'center',\r\n        textStyle: {\r\n            rich:{\r\n                a: {\r\n                    fontSize: 35,\r\n                    color: '#FF9933'\r\n                },\r\n                \r\n                c: {\r\n                    fontSize: 35,\r\n                    color: '#FF9933',\r\n                    // padding: [5,0]\r\n                }\r\n            }\r\n        }\r\n    },\r\n    legend: {\r\n        type: \"plain\",\r\n        orient: \"vertical\",\r\n        right: 0,\r\n        top: \"10%\",\r\n        align: \"auto\",\r\n        data: [{\r\n            name: '涨价后没吃过',\r\n            icon: \"circle\"\r\n        }, {\r\n            name: '天天吃',\r\n            icon: \"circle\"\r\n        }, {\r\n            name: '三五天吃一次',\r\n            icon: \"circle\"\r\n        }, {\r\n            name: '半个月吃一次',\r\n            icon: \"circle\"\r\n        }],\r\n        textStyle: {\r\n            color: \"white\",\r\n            fontSize: 16,\r\n            padding: [10, 1, 10, 0]\r\n        },\r\n        selectedMode:false\r\n    },\r\n    series: [ {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.5,\r\n                        startAngle: (0+angle) * Math.PI / 180,\r\n                        endAngle: (90+angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#FF9933\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 3\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.5,\r\n                        startAngle: (180+angle) * Math.PI / 180,\r\n                        endAngle: (270+angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#000000\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 3\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.57,\r\n                        startAngle: (270+-angle) * Math.PI / 180,\r\n                        endAngle: (40+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#FF9933\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 3\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.57,\r\n                        startAngle: (90+-angle) * Math.PI / 180,\r\n                        endAngle: (220+-angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#000000\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 3\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: \"ring5\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.57;\r\n                let point = getCirlPoint(x0, y0, r, (90+-angle))\r\n                return {\r\n                    type: 'circle',\r\n                    shape: {\r\n                        cx: point.x,\r\n                        cy: point.y,\r\n                        r: 5\r\n                    },\r\n                    style: {\r\n                        stroke: \"#FF9933\",//粉\r\n                        fill: \"#FF9933\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: \"ring5\",  //绿点\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.57;\r\n                let point = getCirlPoint(x0, y0, r, (270+-angle))\r\n                return {\r\n                    type: 'circle',\r\n                    shape: {\r\n                        cx: point.x,\r\n                        cy: point.y,\r\n                        r: 5\r\n                    },\r\n                    style: {\r\n                        stroke: \"#000\",      //绿\r\n                        fill: \"#000\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        }, {\r\n            name: '吃猪肉频率',\r\n            type: 'pie',\r\n            radius: ['45%', '37%'],\r\n            silent: true,\r\n            clockwise: true,\r\n            startAngle: 90,\r\n            z: 0,\r\n            zlevel: 0,\r\n            label: {\r\n                normal: {\r\n                    position: \"center\",\r\n\r\n                }\r\n            },\r\n            data: [{\r\n                    value: value,\r\n                    name: \"\",\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: { // 完成的圆环的颜色\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: '#FFCC00' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: '#FF9933' // 100% 处的颜色\r\n                                }]\r\n                            },\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    value: 100-value,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#999999\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n        \r\n        {\r\n            name: \"\",\r\n            type: \"gauge\",\r\n            radius: \"35%\",\r\n            center: ['50%', '50%'],\r\n            startAngle: 0,\r\n            endAngle: 359.9,\r\n            splitNumber: 8,\r\n            hoverAnimation: true,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                length: 40,\r\n                lineStyle: {\r\n                    width: 3,\r\n                    color: \"#000000\"\r\n                }\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            pointer: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    opacity: 0\r\n                }\r\n            },\r\n            detail: {\r\n                show: false\r\n            },\r\n            data: [{\r\n                value: 0,\r\n                name: \"\"\r\n            }]\r\n        },\r\n             {\r\n            name: \"\",\r\n            type: \"gauge\",\r\n            radius: \"45%\",\r\n            center: ['50%', '50%'],\r\n            startAngle: 0,\r\n            endAngle: 359.9,\r\n            splitNumber: 8,\r\n            hoverAnimation: true,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                length: 15\r\n                ,\r\n                lineStyle: {\r\n                    width: 3,\r\n                    color: \"#000000\"\r\n                }\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            pointer: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    opacity: 0\r\n                }\r\n            },\r\n            detail: {\r\n                show: false\r\n            },\r\n            data: [{\r\n                value: 0,\r\n                name: \"\"\r\n            }]\r\n        },\r\n    ]\r\n};\r\n\r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n    return {\r\n        x: x1,\r\n        y: y1\r\n    }\r\n}\r\n\r\nfunction draw(){\r\n    angle = angle+3\r\n    myChart.setOption(option, true)\r\n   //window.requestAnimationFrame(draw);\r\n}\r\n\r\nsetInterval(function() {\r\n    //用setInterval做动画感觉有问题\r\n    draw()\r\n}, 100);","html":"","externalScripts":"","updaterUID":"obd-oNrF49s1TQu3mDmHhnt96xmGFxk3oCH","theme":"","layout":"","viewCount":11,"userName":"我***乞","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xFzYvOWzRn.png?v=1618985979143","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"我***乞"}}