{"status":0,"data":{"cid":"xtrvN5gT10","authorUid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","authorUserName":"叫***e","title":"堆叠柱形图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-06T06:58:32.000Z","lastUpdateTime":"2021-12-06T06:58:32.000Z","auth":2,"uid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-06T06:58:32.000Z","code":"//实现二：\nfunction isHasElementTwo(arr,value){\n    var str = arr.toString();\n\tvar index = str.indexOf(value);\n\tif(index >= 0){\n\t   //存在返回索引\n\t   var reg1 = new RegExp(\"((^|,)\"+value+\"(,|$))\",\"gi\");\n\t   return str.replace(reg1,\"$2@$3\").replace(/[^,@]/g,\"\").indexOf(\"@\");\n\t}else{\n\t\treturn -1;//不存在此项\n\t}\n\n}\ndatas = {\n    name:\"综治\",\n    nameArr:['电话举报','领导上报','监督员上报','群众上报'],\n    dataArr:[[30],[80],[50],[20]],\n    perArr:[10,50,30,10]\n}\ncolors = ['#0263FF','#CB3D21','#F1C551','#8E30FF'];\n\nlet seriesArr = [];\ndatas.nameArr.forEach(function(name,index){\n    var  shadowOffsetX = 0;\n    if(index!=0)  shadowOffsetX= -20\n    seriesArr.push( {\n            name: name,\n            type: 'bar',\n            stack: '案件数',\n            barWidth: 30,\n            itemStyle:{\n                normal: {\n                    color: colors[index],\n                    barBorderRadius: [20, 20, 20, 20],\n                    shadowOffsetX:shadowOffsetX,\n                    shadowColor: colors[index],\n                }\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            z:   datas.nameArr.length - index,\n            data: datas.dataArr[index]\n        },)\n})\noption = {\n    backgroundColor:\"#000\",\n    tooltip : {\n        trigger: 'axis',\n        axisPointer : {            // 坐标轴指示器，坐标轴触发有效\n            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n        }\n    },\n    legend: {\n        data: datas.nameArr,\n        icon:\"circle\",\n        itemGap: 50,\n        itemWidth:10,\n        itemHeight: 10,\n        top:\"30%\",\n        formatter: function (name) {\n            var index = isHasElementTwo(datas.nameArr,name)\n             return '{name|'+name+'}\\n{num|'+datas.dataArr[index][0]+'}{split| / }{per|'+datas.perArr[index]+'}{cell| %}'\n        },\n        width:300,\n        textStyle:{\n            rich:{\n                \n                name:{\n                    fontSize: 11,\n                    fontFamily: 'FZLanTingHei-L-GBK',\n                    fontWeight: 400,\n                    color: '#FFFFFF',\n                     padding:[35,0,0,0]\n                },\n                num:{\n                    fontSize: 32,\n                    fontFamily: 'DigifaceWide',\n                    fontWeight: 400,\n                    color: '#69A3FF',\n                   //  padding:[-40,0,0,0]\n                },\n                split:{\n                    fontSize: 16,\n                    fontFamily: 'Avanti',\n                    fontWeight: 400,\n                    color:' #8CACFF',\n                  //  padding:[-40,0,0,0]\n                },\n                per:{\n                     fontSize: 14,\n                    fontFamily: 'Avanti',\n                    fontWeight: 400,\n                    color:' #8CACFF',\n                   //padding:[-40,0,0,0]\n                },\n                cell:{\n                     fontSize: 12,\n                    fontFamily: 'Avanti',\n                    fontWeight: 400,\n                    color:' #8CACFF',\n                    // padding:[-40,0,0,0]\n                }\n            }\n        }\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '30%',\n        top:0,\n        containLabel: true\n    },\n    xAxis:  {\n        type: 'value',\n     axisLabel:{\n            show:false\n        },\n        axisLine:{\n            show:false\n        },\n        splitLine:{\n            show:false\n        },\n        axisTick:{\n             show:false\n        }\n    },\n    yAxis: {\n        type: 'category',\n        data:datas.name,\n        axisLabel:{\n            show:false\n        },\n        axisLine:{\n            show:false\n        },\n        splitLine:{\n            show:false\n        },\n        axisTick:{\n             show:false\n        }\n    },\n    series:seriesArr\n};","html":"","externalScripts":"","updaterUID":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","theme":"","layout":"","viewCount":0,"userName":"叫***e","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xtrvN5gT10.png?v=1638773913032","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"叫***e"}}