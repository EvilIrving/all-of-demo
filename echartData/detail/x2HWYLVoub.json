{"status":0,"data":{"cid":"x2HWYLVoub","authorUid":"bd-3817636711","authorUserName":"S***G","title":"双y轴 零刻度对齐 负值反向渐变","description":"双y轴 0点x轴对齐 负镜像渐变柱状折线图","latestVersion":2,"alwaysLatest":1,"createTime":"2020-04-03T07:39:21.000Z","lastUpdateTime":"2020-04-03T07:39:21.000Z","auth":1,"uid":"bd-3817636711","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-03T07:39:47.000Z","code":"var data = [220, 182, -191, 234, 290, 330, -310]\nvar databar = []\nconst rightColor = {\n    color: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 0,\n        y2: 1,\n        colorStops: [{\n            offset: 0,\n            color: '#ff9569' // 0% 处的颜色\n        }, {\n            offset: 1,\n            color: '#e92758' // 100% 处的颜色\n        }],\n        global: false // 渐变为 false\n    },\n    barBorderRadius: [30, 30, 0, 0]\n}\nconst leftColor = {\n    color: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 0,\n        y2: 1,\n        colorStops: [{\n            offset: 0,\n            color: '#e92758' // 0% 处的颜色\n        }, {\n            offset: 1,\n            color: '#ff9569' // 100% 处的颜色\n        }],\n        global: false // 渐变为 false\n    },\n    barBorderRadius: [0, 0, 30, 30]\n}\ndata.map(v => {\n    databar.push({\n        value: v,\n        itemStyle: v > 0 ? rightColor : leftColor\n    })\n})\n\nfunction Max(value) {\n    let maxStr = +`${parseInt(Math.abs(value.max))}` [0] + 1\n    let minStr = +`${parseInt(Math.abs(value.min))}` [0] + 1\n    for (let i = 0; i < `${Math.ceil(Math.abs(value.max))}`.length - 1; i++) {\n        maxStr += '0'\n    }\n    for (let i = 0; i < `${Math.ceil(Math.abs(value.min))}`.length - 1; i++) {\n        minStr += '0'\n    }\n    return Math.abs(value.max) > Math.abs(value.min) ?\n        +maxStr :\n        +minStr\n}\n\nfunction Min(value) {\n    let maxStr = +`${parseInt(Math.abs(value.max))}` [0] + 1\n    let minStr = +`${parseInt(Math.abs(value.min))}` [0] + 1\n    for (\n        let i = 0; i < `${Math.ceil(Math.abs(value.max))}`.length - 1; i++\n    ) {\n        maxStr += '0'\n    }\n    for (\n        let i = 0; i < `${Math.ceil(Math.abs(value.min))}`.length - 1; i++\n    ) {\n        minStr += '0'\n    }\n    return value.min >= 0 ?\n        0 :\n        Math.abs(value.max) > Math.abs(value.min) ?\n        - +maxStr :\n        - +minStr\n}\n\noption = {\n    backgroundColor: '#fff',\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'none' // 隐藏鼠标移入的辅助提示线\n        }\n    },\n    xAxis: [{\n        type: 'category',\n        data: ['2020/02/01', '2020/02/02', '2020/02/03', '2020/02/04', '2020/02/05', '2020/02/06', '2020/02/07'],\n        color: '#59588D',\n        // x轴坐标刻度线\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            color: '#4d4d4d', // x轴文字颜色\n            fontSize: 12,\n            margin: 10, // x轴刻度文字与x轴的距离\n            formatter: (value, index) => {\n                return index === 0 ? value : value.slice('5')\n            }\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#fad0c4' // x轴线颜色\n            }\n        }\n    }],\n    yAxis: [{\n            type: 'value',\n            axisTick: {\n                show: false\n            },\n            axisLine: {\n                show: false // 隐藏y轴线\n            },\n            axisLabel: {\n                color: '#4d4d4d'\n            },\n            splitLine: {\n                lineStyle: {\n                    color: '#fad0c4' // 背景横线颜色\n                }\n            },\n            // 计算左侧y轴对应的柱状图数据的最大值\n            max: value => Max(value),\n            min: value => Min(value)\n        },\n        {\n            type: 'value',\n            position: 'right',\n            axisTick: {\n                show: false\n            },\n            axisLine: {\n                show: false\n            },\n            axisLabel: {\n                show: true,\n                color: '#4d4d4d',\n                formatter: '{value}%'\n            },\n            splitLine: {\n                show: false,\n                lineStyle: {\n                    color: '#e6fcfa'\n                }\n            },\n            // 右侧y轴百分比对应折线图的最大最小值\n            max: value => Max(value),\n            min: value => Min(value)\n        }\n    ],\n    series: [{\n            type: 'bar',\n            data: databar,\n            barWidth: '30%',\n            barMaxWidth: 20,\n            itemStyle: rightColor\n        },\n        {\n            type: 'line',\n            data: [10, 82, -91, 34, 90, 30, -40],\n            smooth: false, //是否平滑曲线显示\n            showSymbol: false, // false 表示只有在tooltip hover的时候显示\n            symbolSize: 1,\n            yAxisIndex: 1,\n            lineStyle: {\n                color: '#fe9a8b',\n                width: 1\n            }, //折线颜色粗细\n            areaStyle: {\n                color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: [{\n                            offset: 0,\n                            color: '#f78ca0'\n                        },\n                        {\n                            offset: 7 / 9,\n                            color: '#f9748f'\n                        },\n                        {\n                            offset: 9 / 9,\n                            color: '#fe9a8b'\n                        }\n                    ]\n                },\n                opacity: 0.2\n            }, // 区域颜色\n            itemStyle: {\n                color: '#fff',\n                borderColor: '#fe9a8b'\n            } //拐点颜色边框样式\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3817636711","theme":"","layout":"","viewCount":1256,"userName":"S***G","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x2HWYLVoub.png?v=1585899587609","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"S***G"}}