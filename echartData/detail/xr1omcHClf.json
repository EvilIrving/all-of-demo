{"status":0,"data":{"cid":"xr1omcHClf","authorUid":"bd-927643697","authorUserName":"N***4","title":"地图点击选点","description":"用于经纬度选择，可转为使用百度地图","latestVersion":19,"alwaysLatest":1,"createTime":"2017-12-01T03:18:59.000Z","lastUpdateTime":"2017-12-05T08:58:12.000Z","auth":2,"uid":"bd-927643697","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":19,"parentVersion":18,"echartsVersion":"3.8.0","versionCreateTime":"2019-08-16T09:13:58.000Z","code":"//获取中国地图省份geo数据\r\n$.getScript(\"https://gallerybox.echartsjs.com/dep/echarts/map/js/china.js\", function() {\r\n    option = {\r\n        map:{},\r\n        title: {\r\n            text: \"地图点击选点\"\r\n        },\r\n        tooltip: {\r\n            formatter: function(arg) {\r\n                return arg.data[2] + \":\" + arg.data[0] + \",\" + arg.data[1];\r\n            }\r\n        },\r\n        geo: {\r\n            map: 'china',\r\n            roam: true,\r\n            center: [114.878927, 33.4578]\r\n        },\r\n        series: [{\r\n            type: \"scatter\",\r\n            coordinateSystem: \"geo\",\r\n            symbol: \"pin\",\r\n            symbolSize: 30,\r\n            name: \"test\",\r\n            data: [\r\n                [114.878, 33.458, \"所选点\"]\r\n            ],\r\n            label: {\r\n                normal: {\r\n                    position: \"top\",\r\n                    show: true,\r\n                    textBorderColor: \"#fff\",\r\n                    textBorderWidth: 2,\r\n                    fontWeight: 800,\r\n                    fontSize: 10,\r\n                    color: \"auto\",\r\n                    formatter: function(arg) {\r\n                        return arg.data[0] + \"\\n\" + arg.data[1];\r\n                    }\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n\r\n    myChart.setOption(option);\r\n    \r\n    //实时展示当前鼠标所在地图位置的坐标\r\n    $(myChart.getDom()).off(\"mousemove\").on(\"mousemove\", myChart, function(event) {\r\n        var data = event.data.convertFromPixel(\"series\", [event.offsetX, event.offsetY]);\r\n        data = [Math.round(data[0] * 1000000) / 1000000, Math.round(data[1] * 1000000) / 1000000];\r\n        $(\"#myinput\").val(JSON.stringify(data));\r\n    });\r\n\r\n    \r\n    //点击展示坐标\r\n    $(myChart.getDom()).off(\"click\").on(\"click\", myChart, function(event) {\r\n        var data = event.data.convertFromPixel(\"series\", [event.offsetX, event.offsetY]);\r\n        data = [Math.round(data[0] * 1000000) / 1000000, Math.round(data[1] * 1000000) / 1000000];\r\n        data.push(\"所选点\");\r\n        myChart.setOption({\r\n            series: [{\r\n                data: [data]\r\n            }]\r\n        })\r\n    });\r\n});\r\n\r\n\r\n\r\nvar menubox = $(\"#myinput\");\r\nif(menubox.length==0){\r\n    $('<input id=\"myinput\" value=\"\" style=\"position:fixed;top: 30px;right: 10px;z-index: 999999999999999999999;color: #000;\"/>')\r\n    .appendTo($(document.body));\r\n}\r\n\r\n","html":"","externalScripts":"","updaterUID":"bd-927643697","theme":"default","layout":"","viewCount":559,"userName":"N***4","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xr1omcHClf.png?v=1512464293146","isCustomThumbnail":1,"builtinTags":["category-work","geo","series-scatter","title","tooltip"],"customTags":["取点","地图","经纬度","选点"],"updaterUserName":"N***4"}}