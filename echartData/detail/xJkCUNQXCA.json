{"status":0,"data":{"cid":"xJkCUNQXCA","authorUid":"obd-oPvAG8_QaZGAqSZEVYGZhZc2zWJDU9K","authorUserName":"紫***华","title":"echarts饼图，自定义legend，解决legend字数太多和太长的问题，翻页处理","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-06-15T09:35:32.000Z","lastUpdateTime":"2021-06-15T09:35:32.000Z","auth":2,"uid":"obd-oPvAG8_QaZGAqSZEVYGZhZc2zWJDU9K","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.1.2","versionCreateTime":"2021-06-16T02:14:40.000Z","code":"const data1=function(){\n    let data = []\n       data.push({name:`测试长字符缩略`,value:Math.round(Math.random() * 100)})\n    for (let i = 1; i < 15; i++) {\n        data.push({name:`ceshi${i}`,value:Math.round(Math.random() * 100)})\n      }\n   \n      return data\n}()\n\noption = {\n        tooltip: {\n          trigger: \"item\",\n          formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n        },\n        legend: {\n          type: \"scroll\",\n          orient: \"vertical\",\n          right: 20,\n          top: 250,\n          bottom: 30,\n          height:250,\n          pageIconColor: \"white\",//激活的分页按钮颜色\n          pageIconInactiveColor: \"#2f4554\",//没激活的分页按钮颜色\n          //设置自定义legend 的重点\n          formatter: function(name) {\n            // 获取legend显示内容\n            let data = data1;//这个是展示的数据\n            let total = 0;\n            let tarValue = 0;\n            let value = 0;\n            for (let i = 0, l = data.length; i < l; i++) {\n              total += data[i].value;\n              if (data[i].name == name) {\n                tarValue = data[i].value;\n                value = data[i].value;\n              }\n            }\n            let p = total=== 0? 0:((tarValue / total) * 100).toFixed(1);\n            return [\n              \"{a|\" +\n                echarts.format.truncateText(\n                  name,\n                  80,\n                  \"14px Microsoft Yahei\",\n                  \"…\"//如果宽度超过80会出现...\n                ) +\n                \"}\",\n              \"{b|\" + p + \"%}\",\n              \"{x|\" + value + \"}\"  //a、b、x、跟下面的rich对应\n            ].join(\" \");\n          },\n          tooltip: {\n            show: true//这个为true的话悬停到legend上会出现tooltip\n          },\n          textStyle: {\n            rich: {\n              a: {\n                color: \"white\",\n                width: 80,\n                align: \"left\"\n              },\n              b: {\n                width: 50,\n                align: \"left\",\n                color: \"white\"\n              },\n              x: {\n                width: 30,\n                align: \"left\",\n                color: \"white\"\n              }\n            }\n          }\n        },\n        graphic: {//环形中间的字\n          elements: [\n            {\n              type: \"text\",\n              left: \"28%\",\n              top: \"43%\",\n              style: {\n                text: \"666666\",\n                textAlign: \"center\",\n                fill: \"#fff\",\n                fontSize: 32\n              }\n            },\n            {\n              type: \"text\",\n              left: \"28%\",\n              top: \"56%\",\n              style: {\n                text: \"总人数（人）\",\n                textAlign: \"center\",\n                fill: \"#fff\",\n                fontSize: 14\n              }\n            }\n          ]\n        },\n        series: [\n          {\n            name: \"访问来源\",\n            type: \"pie\",\n            radius: [\"50%\",\"70%\"],//环形图\n            center: [\"35%\", \"50%\"],\n            labelLine: {\n              show: false\n            },\n            label: {\n              show: false\n            },\n            data: data1\n          }\n        ]\n      };\n","html":"","externalScripts":"","updaterUID":"obd-oPvAG8_QaZGAqSZEVYGZhZc2zWJDU9K","theme":"dark","layout":"","viewCount":0,"userName":"紫***华","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xJkCUNQXCA.png?v=1623809680666","isCustomThumbnail":0,"builtinTags":["category-work","graphic","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"紫***华"}}