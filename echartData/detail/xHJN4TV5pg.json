{"status":0,"data":{"cid":"xHJN4TV5pg","authorUid":"bd-2215764494","authorUserName":"p***g","title":"Flights","description":"Flights on globe with different visuals","latestVersion":8,"alwaysLatest":1,"createTime":"2017-04-11T11:25:32.000Z","lastUpdateTime":"2021-04-25T02:51:44.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"5.1.0","versionCreateTime":"2021-04-25T02:51:25.000Z","code":"\n$.getJSON('/asset/get/s/data-1491909692146-S1NH24cTe.json', function (data) {\n    var airports = data.airports.map(function (item) {\n        return {\n            coord: [item[3], item[4]]\n        }\n    });\n    function getAirportCoord(idx) {\n        return [data.airports[idx][3], data.airports[idx][4]];\n    }\n\n    // Route: [airlineIndex, sourceAirportIndex, destinationAirportIndex]\n    var routesGroupByAirline = {};\n    data.routes.forEach(function (route) {\n        var airline = data.airlines[route[0]];\n        var airlineName = airline[0];\n        if (!routesGroupByAirline[airlineName]) {\n            routesGroupByAirline[airlineName] = [];\n        }\n        routesGroupByAirline[airlineName].push(route);\n    });\n\n    var pointsData = [];\n    data.routes.forEach(function (airline) {\n        pointsData.push(getAirportCoord(airline[1]));\n        pointsData.push(getAirportCoord(airline[2]));\n    });\n\n    var series = data.airlines.map(function (airline) {\n        var airlineName = airline[0];\n        var routes = routesGroupByAirline[airlineName];\n\n        if (!routes) {\n            return null;\n        }\n        return {\n            type: 'lines3D',\n            name: airlineName,\n\n            effect: {\n                show: true,\n                trailWidth: 2,\n                trailLength: 0.15,\n                trailOpacity: 1,\n                trailColor: 'rgb(30, 30, 60)'\n            },\n\n            lineStyle: {\n                width: 1,\n                color: 'rgb(50, 50, 150)',\n                // color: 'rgb(118, 233, 241)',\n                opacity: 0.1\n            },\n            blendMode: 'lighter',\n\n            data: routes.map(function (item) {\n                return [airports[item[1]].coord, airports[item[2]].coord];\n            })\n        };\n    }).filter(function (series) {\n        return !!series;\n    });\n    series.push({\n        type: 'scatter3D',\n        coordinateSystem: 'globe',\n        blendMode: 'lighter',\n        symbolSize: 2,\n        itemStyle: {\n            color: 'rgb(50, 50, 150)',\n            opacity: 0.2\n        },\n        data: pointsData\n    });\n\n    myChart.setOption({\n        legend: {\n            selectedMode: 'single',\n            left: 'left',\n            data: Object.keys(routesGroupByAirline),\n            orient: 'vertical',\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        globe: {\n\n            environment: '/asset/get/s/data-1491837999815-H1_44Qtal.jpg',\n\n            heightTexture: '/asset/get/s/data-1491837512042-rJlLfXYax.jpg',\n\n            displacementScale: 0.1,\n            displacementQuality: 'high',\n\n            baseColor: '#000',\n\n            shading: 'realistic',\n            realisticMaterial: {\n                roughness: 0.2,\n                metalness: 0\n            },\n\n            postEffect: {\n                enable: true,\n                depthOfField: {\n                    enable: false,\n                    focalDistance: 150\n                }\n            },\n            temporalSuperSampling: {\n                enable: true\n            },\n            light: {\n                ambient: {\n                    intensity: 0\n                },\n                main: {\n                    intensity: 0.1,\n                    shadow: false\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491837984109-r1u7NmY6e.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            },\n            viewControl: {\n                autoRotate: false\n            },\n            silent: true\n        },\n        series: series\n    });\n    window.addEventListener('keydown', function () {\n        series.forEach(function (series, idx) {\n            myChart.dispatchAction({\n                type: 'lines3DToggleEffect',\n                seriesIndex: idx\n            });\n        })\n    });\n});\n","html":"","externalScripts":"https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js","updaterUID":"bd-2215764494","theme":"default","layout":"","viewCount":77453,"userName":"p***g","commentCount":19,"starCount":76,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJN4TV5pg.png?v=1619319105985","isCustomThumbnail":1,"builtinTags":["category-work","globe","legend","series-lines3D","series-scatter3D"],"customTags":["echarts-gl"],"updaterUserName":"p***g"}}