{"status":0,"data":{"cid":"xUGmfc7Oem","authorUid":"obd-ojqTNUq1GFZ2FYGnxCgY2zvS_mbh_DN","authorUserName":"爱***机","title":"自动轮播饼图","description":"可以自动轮播，并自动切换中间内容","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-08T08:11:52.000Z","lastUpdateTime":"2021-01-08T08:11:52.000Z","auth":2,"uid":"obd-ojqTNUq1GFZ2FYGnxCgY2zvS_mbh_DN","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-08T08:11:52.000Z","code":"let title = '总量';\r\nlet colorList = [\r\n'#ff7f50', '#87cefa', '#da70d6', '#32cd32', '#6495ed',\r\n'#ff69b4', '#ba55d3', '#cd5c5c', '#ffa500', '#40e0d0',\r\n'#1e90ff', '#ff6347', '#7b68ee', '#00fa9a', '#ffd700',\r\n'#6b8e23', '#ff00ff', '#3cb371', '#b8860b', '#30e0e0'\r\n]\r\nlet echartData=[\r\n\t{\"name\":\"商品C\", \"value\": 2289},\r\n\t{\"name\":\"商品P\", \"value\": 671},\r\n\t{\"name\":\"商品D\", \"value\": 2518},\r\n\t{\"name\":\"商品T\", \"value\": 200},\r\n\t{\"name\":\"商品F\", \"value\": 1952},\r\n\t{\"name\":\"商品G\", \"value\": 926},\r\n\t{\"name\":\"商品H\", \"value\": 4536},\r\n\t{\"name\":\"商品I\", \"value\": 750},\r\n\t{\"name\":\"商品A\", \"value\": 2373},\r\n\t{\"name\":\"商品J\", \"value\": 493},\r\n\t{\"name\":\"商品K\", \"value\": 385},\r\n\t{\"name\":\"商品B\", \"value\": 5449},\r\n\t{\"name\":\"商品M\", \"value\": 869},\r\n\t{\"name\":\"商品L\", \"value\": 4960},\r\n\t{\"name\":\"商品Q\", \"value\": 270},\r\n\t{\"name\":\"商品N\", \"value\": 566},\r\n\t{\"name\":\"商品R\", \"value\": 1077},\r\n\t{\"name\":\"商品O\", \"value\": 339},\r\n\t{\"name\":\"商品E\", \"value\": 4730},\r\n\t{\"name\":\"商品S\", \"value\": 920},\r\n]\r\nlet formatNumber = function(num) {\r\n    let reg = /(?=(\\B)(\\d{3})+$)/g;\r\n    return num.toString().replace(reg, ',');\r\n}\r\nlet total = echartData.reduce((a, b) => {\r\n    return a + b.value * 1\r\n}, 0);\r\noption = {\r\n    backgroundColor:\"#000c31\",\r\n    color: colorList,\r\n    title: [{\r\n        text: '{name|' + title + '：}{val|' + formatNumber(total) + '}',\r\n        top: 10,\r\n        right: 20,\r\n        textStyle: {\r\n            rich: {\r\n                name: {\r\n                    fontSize: 24,\r\n                    fontWeight: 'normal',\r\n                    color: '#ff8800',\r\n                    padding: [10, 0]\r\n                },\r\n                val: {\r\n                    fontSize: 24,\r\n                    fontWeight: 'bold',\r\n                    color: '#ff8800',\r\n                }\r\n            }\r\n        }\r\n    },\r\n    {\r\n        //text:'{name|' + title + '：}\\n{val|' + formatNumber(total) + '}',\r\n        top: \"center\",\r\n        right: \"center\",\r\n    }],\r\n    series: [{\r\n        type: 'pie',\r\n        radius: ['35%', '50%'],\r\n        center: ['50%', '50%'],\r\n        data: echartData,\r\n        hoverAnimation: true,\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: colorList,\r\n                borderWidth:2\r\n            }\r\n        },\r\n        labelLine: {\r\n            normal: {\r\n                lineStyle: {\r\n                    color: '#e6e6e6'\r\n                }\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                formatter:'{icon|●}{name|{b}}{value|({d}%)}',\r\n                rich: {\r\n                    icon: {\r\n                        fontSize: 24\r\n                    },\r\n                    name: {\r\n                        fontSize: 12,\r\n                        padding: [0, 10, 0, 4],\r\n                    },\r\n                    value: {\r\n                        fontSize: 12,\r\n                        fontWeight: 'bold',\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    }]\r\n};\r\nmyChart.on(\"highlight\",(event)=>{\r\n    let name=echartData[event.dataIndex].name;\r\n    let value = echartData[event.dataIndex].value\r\n    option.title[1].text='{name|' + name + '}\\n{val|' + value + '}';\r\n    option.title[1].textStyle={\r\n        rich: {\r\n            name: {\r\n                fontSize: 16,\r\n                align:\"center\",\r\n                fontWeight: 'normal',\r\n                padding:[10,0],\r\n                color: colorList[event.dataIndex],\r\n            },\r\n            val: {\r\n                fontSize: 32,\r\n                align:\"center\",\r\n                fontWeight: 'bold',\r\n                color: colorList[event.dataIndex],\r\n            }\r\n        }\r\n    }\r\n    myChart.setOption(option);\r\n});\r\n\r\nautoHover(myChart, option, echartData.length, 3000);\r\n\r\n\r\n\r\n\r\n/**\r\n *  echarts tooltip 自动轮播\r\n *  @author liuwei\r\n *  @param myChart  //初始化echarts的实例\r\n *  @param option   //指定图表的配置项和数据\r\n *  @param num      //类目数量(原因：循环时达到最大值后，使其从头开始循环)\r\n *  @param time     //轮播间隔时长\r\n */\r\nfunction autoHover(myChart, option, num, time) {\r\n  var defaultData = {   //设置默认值\r\n    time: 2000,\r\n    num: 100\r\n  };\r\n  if(!time){\r\n    time = defaultData.time;\r\n  }\r\n  if(!num){\r\n    num = defaultData.num;\r\n  }\r\n  var count = 0;\r\n  var timeTicket = null;\r\n  timeTicket && clearInterval(timeTicket);\r\n  timeTicket = setInterval(function () {\r\n    myChart.dispatchAction({\r\n      type: \"downplay\",\r\n      seriesIndex: 0 //serieIndex的索引值   可以触发多个\r\n    });\r\n    myChart.dispatchAction({\r\n      type: \"highlight\",\r\n      seriesIndex: 0,\r\n      dataIndex: count\r\n    });\r\n    myChart.dispatchAction({\r\n      type: \"showTip\",\r\n      seriesIndex: 0,\r\n      dataIndex: count\r\n    });\r\n    count++;\r\n    if (count >= num) {\r\n      count = 0\r\n    }\r\n  }, time);\r\n  myChart.on(\"mouseover\", function (params) {\r\n    clearInterval(timeTicket);\r\n    myChart.dispatchAction({\r\n      type: \"downplay\",\r\n      seriesIndex: 0\r\n    });\r\n    myChart.dispatchAction({\r\n      type: \"highlight\",\r\n      seriesIndex: 0,\r\n      dataIndex: params.dataIndex\r\n    });\r\n    myChart.dispatchAction({\r\n      type: \"showTip\",\r\n      seriesIndex: 0,\r\n      dataIndex: params.dataIndex\r\n    });\r\n  });\r\n  myChart.on(\"mouseout\", function () {\r\n    timeTicket && clearInterval(timeTicket);\r\n    timeTicket = setInterval(function () {\r\n      myChart.dispatchAction({\r\n        type: \"downplay\",\r\n        seriesIndex: 0 //serieIndex的索引值   可以触发多个\r\n      });\r\n      myChart.dispatchAction({\r\n        type: \"highlight\",\r\n        seriesIndex: 0,\r\n        dataIndex: count\r\n      });\r\n      myChart.dispatchAction({\r\n        type: \"showTip\",\r\n        seriesIndex: 0,\r\n        dataIndex: count\r\n      });\r\n      count++;\r\n      if (count >= defaultData.num) {\r\n        count = 0\r\n      }\r\n    }, defaultData.time);\r\n  });\r\n}\r\n","html":"","externalScripts":"https://echarts.baidu.com/resource/echarts-liquidfill-latest/dist/echarts-liquidfill.min.js","updaterUID":"obd-ojqTNUq1GFZ2FYGnxCgY2zvS_mbh_DN","theme":"","layout":"","viewCount":192,"userName":"爱***机","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUGmfc7Oem.png?v=1610093512751","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title"],"customTags":[],"updaterUserName":"爱***机"}}