{"status":0,"data":{"cid":"x7mtRL0Du0","authorUid":"bd-2302755999","authorUserName":"159*****209","title":"湖北省地图点击切换","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-11-06T04:50:03.000Z","lastUpdateTime":"2018-11-06T04:50:03.000Z","auth":2,"uid":"bd-2302755999","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.0","versionCreateTime":"2018-11-06T05:44:38.000Z","code":"let mapData = ((echarts.getMap('湖北') || {}).geoJson || {}).features || [],\n    names = [];\ngeoCoordMap = {};\nmapData.map((f) => {\n    let name = (f.properties || {}).name,\n        cp = (f.properties || {}).cp;\n    if (name && '' !== name && cp) {\n        geoCoordMap[name] = cp;\n        names.push(name);\n    }\n});\n\nfunction generateNameData(min, max) {\n    let data = [];\n    names.map((n) => {\n        let value = Math.round((Math.random() * (max - min) + min) * 100) / 100;\n        let cp = geoCoordMap[n]\n        data.push({\n            name: n,\n            value: cp.slice().concat(value)\n        });\n    });\n    return data;\n}\n\nfunction generateLinesData(min, max) {\n    let data = [];\n    names.map((o) => {\n        names.map((d) => {\n            let value = Math.round((Math.random() * (max - min) + min) * 100) / 100;\n            let oCp = geoCoordMap[o],\n                dCp = geoCoordMap[d];\n            data.push([oCp, dCp, value]);\n        })\n    })\n    return data;\n\n}\n\nlet barData = generateNameData(100, 300);\nlet linesData = generateLinesData(100, 500);\noption = {\n    title: {\n        text: '湖北省地图点击切换',\n        x: 'left',\n        top: \"10\",\n        textStyle: {\n            color: '#000',\n            fontSize: 14\n        }\n    },\n    tooltip: {\n        show: true,\n        // formatter:(params)=>{\n        //   let data = \"测试1:\"+params.name + \"<br/>\"+\"值:\"+ params.value[2]+\"<br/>\"+\"地理坐标:[\" + params.value[0]+\",\"+params.value[1] +\"]\";\n        //   return data;\n        // },\n    },\n    geo3D: {\n        map: '湖北',\n        roam: true,\n        itemStyle: {\n            areaColor: '#1d5e98',\n            opacity: 1,\n            borderWidth: 0.4,\n            borderColor: '#000'\n        },\n        label: {\n            show: true,\n            textStyle: {\n                color: '#000', //地图初始化区域字体颜色\n                fontSize: 8,\n                opacity: 1,\n                backgroundColor: 'rgba(0,23,11,0)'\n            },\n        },\n        emphasis: { //当鼠标放上去  地区区域是否显示名称\n\n            label: {\n                show: true,\n                textStyle: {\n                    color: '#fff',\n                    fontSize: 3,\n                    backgroundColor: 'rgba(0,23,11,0)'\n                }\n            }\n        },\n        //shading: 'lambert',\n        light: { //光照阴影\n            main: {\n                color: '#fff', //光照颜色\n                intensity: 1.2, //光照强度\n                //shadowQuality: 'high', //阴影亮度\n                shadow: false, //是否显示阴影\n                alpha: 55,\n                beta: 10\n\n            },\n            ambient: {\n                intensity: 0.3\n            }\n        },\n        viewControl: {\n            alpha: 40,\n            autoRotate: true,\n            autoRotateAfterStill: 10\n        }\n    },\n    series: [\n        //柱状图\n        {\n            name: 'bar3D',\n            type: \"bar3D\",\n            coordinateSystem: 'geo3D',\n            barSize: 1, //柱子粗细\n            shading: 'lambert',\n            opacity: 1,\n            bevelSize: 0.3,\n            label: {\n                show: false,\n                formatter: '{b}'\n            },\n            data: barData,\n        },\n\n\n        //画线\n\n        {\n            type: 'lines3D',\n\n            coordinateSystem: 'geo3D',\n\n            effect: {\n                show: true,\n                trailWidth: 1,\n                trailOpacity: 0.5,\n                trailLength: 0.2,\n                constantSpeed: 5\n            },\n\n            blendMode: 'lighter',\n\n            lineStyle: {\n                width: 0.2,\n                opacity: 0.05\n            },\n\n            data: linesData\n        }\n    ]\n};\n\nlet myChart = echarts.getInstanceByDom(document.getElementById('chart-panel'));\n\nmyChart.on(\"click\", (params) => {\n    let geoName = params.name,\n        flag = false;\n    let option = myChart.getOption();\n    if (geoName && '' !== geoName) {\n        let coord = geoCoordMap[geoName];\n        if (coord) {\n            flag = true;\n            option.geo3D[0].viewControl.alpha = 90;\n            option.geo3D[0].viewControl.distance = 0;\n            myChart.setOption(option)\n\n        }\n    }\n    if (!flag) {\n        option.geo3D[0].viewControl.alpha = 40;\n        option.geo3D[0].viewControl.distance = 100;\n        myChart.setOption(option)\n\n    }\n})","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/map/js/province/hubei.js","updaterUID":"bd-2302755999","theme":"vintage","layout":"","viewCount":9941,"userName":"159*****209","commentCount":6,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x7mtRL0Du0.png?v=1541479803926","isCustomThumbnail":1,"builtinTags":["category-work","geo3D","series-bar3D","series-lines3D","title","tooltip"],"customTags":[],"updaterUserName":"159*****209"}}