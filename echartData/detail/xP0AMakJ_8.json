{"status":0,"data":{"cid":"xP0AMakJ_8","authorUid":"bd-134433512","authorUserName":"安***D","title":"数据分布-暗色-带标签","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-10-26T02:08:01.000Z","lastUpdateTime":"2018-10-26T02:08:01.000Z","auth":2,"uid":"bd-134433512","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-10-26T02:08:01.000Z","code":"var formatUtil = echarts.format;\n\nvar dtlData = [{\n    name: '一账通',\n    value: 2474,\n    children: [{\n        name: 'JKOSS',\n        value: 426\n    }, {\n        name: 'JKTOA',\n        value: 73\n    }, {\n        name: 'JKTOALF_EBD',\n        value: 12\n    }, {\n        name: 'JKTOALF_TOASER',\n        value: 101\n    }, {\n        name: 'TOA',\n        value: 1083\n    }, {\n        name: 'TOAMALL',\n        value: 709\n    }, {\n        name: 'TOAWEB_CMS',\n        value: 58\n    }, {\n        name: 'TOAFLLF_MAAM',\n        value: 12\n    }]\n}, {\n    name: '中小企业',\n    value: 1053,\n    children: [{\n        name: 'SMELPCORE_CORE',\n        value: 347\n    }, {\n        name: 'SMELPCORE_FINANCE',\n        value: 230\n    }, {\n        name: 'SMELPCORE_SMELPMCHT',\n        value: 14\n    }, {\n        name: 'SMELPCORE_SMELPWG',\n        value: 28\n    }, {\n        name: 'SMELPCORE_WEB',\n        value: 50\n    }, {\n        name: 'SMELPFATAEX',\n        value: 14\n    }, {\n        name: 'SMELPRISK_RISK',\n        value: 370\n    }]\n}, {\n    name: '同业',\n    value: 1635,\n    children: [{\n        name: 'FIC2',\n        value: 1128\n    }, {\n        name: 'LSMMS',\n        value: 194\n    }, {\n        name: 'MFICAW',\n        value: 91\n    }, {\n        name: 'YZTTA',\n        value: 222\n    }]\n}, {\n    name: '开放平台',\n    value: 9422,\n    children: [{\n        name: 'CDE',\n        value: 259\n    }, {\n        name: 'CMPCC',\n        value: 1161\n    }, {\n        name: 'PACCF1',\n        value: 3564\n    }, {\n        name: 'PAEBD_PAEBD',\n        value: 2231\n    }, {\n        name: 'QHZX',\n        value: 384\n    }, {\n        name: 'PCDP_CDP',\n        value: 205\n    }, {\n        name: 'PIMP_PIMP',\n        value: 51\n    }, {\n        name: 'ZXAR',\n        value: 94\n    }, {\n        name: 'ZXCD1',\n        value: 918\n    }, {\n        name: 'ZXPD1',\n        value: 555\n    }]\n}, {\n    name: '贷款',\n    value: 2156,\n    children: [{\n        name: 'MYUE',\n        value: 56\n    }, {\n        name: 'P2PLM',\n        value: 351\n    }, {\n        name: 'P2PPD',\n        value: 1619\n    }, {\n        name: 'PDAP_PDAP',\n        value: 112\n    }, {\n        name: 'PCACORE_QJJ',\n        value: 16\n    }, {\n        name: 'MP2PPD',\n        value: 2\n    }]\n}, {\n    name: '银行一账通',\n    value: 6576,\n    children: [{\n        name: 'FO007',\n        value: 1078\n    }, {\n        name: 'FO008',\n        value: 799\n    }, {\n        name: 'FO009',\n        value: 483\n    }, {\n        name: 'FO023',\n        value: 665\n    }, {\n        name: 'FO024',\n        value: 644\n    }, {\n        name: 'FO025',\n        value: 1040\n    }, {\n        name: 'FO027',\n        value: 685\n    }, {\n        name: 'FCES01',\n        value: 215\n    }, {\n        name: 'FPPG_MIP',\n        value: 61\n    }, {\n        name: 'NMPMS_NMPMS',\n        value: 32\n    }, {\n        name: 'FOGZ',\n        value: 546\n    }, {\n        name: 'FO047',\n        value: 328\n    }]\n}]\n\nvar color = [\n    \"#c23531\",\n    \"#2f4554\",\n    \"#61a0a8\",\n    \"#d48265\",\n    \"#91c7ae\",\n    \"#bda29a\",\n    \"#ca8622\",\n    \"#749f83\",\n    \"#6e7074\",\n    \"#546570\",\n    \"#c4ccd3\"\n]\n\nvar bsLine = []\nvar bsLineV = {}\nfor (var key in dtlData) {\n    bsLine.push(dtlData[key].name)\n    bsLineV[dtlData[key].name] = dtlData[key].value\n}\nvar sbsLineV = Object.keys(bsLineV).sort(function(a, b) {\n    return -(bsLineV[a] - bsLineV[b])\n});\n\n\n// 层级样式\nfunction getLevelOption1() {\n    return [{\n            color: color,\n            itemStyle: {\n                normal: {\n                    borderWidth: 0,\n                    borderColor: '#777',\n                    gapWidth: 2\n                }\n            }\n        },\n        {\n            colorSaturation: [0.35, 0.6],\n            //colorAlpha: [1, 0.5],\n            upperLabel: {\n                normal: {\n                    color: '#fff',\n                    show: true,\n                    height: 30\n                }\n            },\n            itemStyle: {\n                normal: {\n                    borderWidth: 5,\n                    borderColor: '#555',\n                    gapWidth: 1\n                },\n                emphasis: {\n                    borderColor: '#ccc'\n                }\n            }\n        }\n    ];\n}\n\n\nfunction getLevelOption2() {\n    return [{\n            itemStyle: {\n                normal: {\n                    borderWidth: 0,\n                    borderColor: '#fff',\n                    gapWidth: 2\n                }\n            }\n        },\n        {\n            color: [],\n            //colorSaturation: [0.35, 0.6],\n            //colorAlpha: [0.5, 1],\n            //colorMappingBy: 'value',\n            upperLabel: {\n                normal: {\n                    show: true,\n                    height: 30\n                }\n            },\n            itemStyle: {\n                normal: {\n                    borderWidth: 5,\n                    borderColor: '#555',\n                    gapWidth: 1\n                },\n                emphasis: {\n                    borderColor: '#ccc'\n                }\n            }\n        }\n    ];\n}\n\nvar series0 = {\n    name: '数据库',\n    type: 'treemap',\n    itemStyle: {\n        normal: {\n            borderColor: '#fff'\n        }\n    },\n    levels: getLevelOption1(),\n    leafDepth: 2,\n    data: dtlData\n};\n\nvar series11 = {\n    name: '数据库',\n    type: 'treemap',\n    itemStyle: {\n        normal: {\n            borderColor: '#fff'\n        }\n    },\n    right: '50%',\n    width: '48%',\n    levels: getLevelOption1(),\n    leafDepth: 2,\n    data: dtlData\n};\n\nvar series12 = {\n    name: '数据库',\n    type: 'treemap',\n    itemStyle: {\n        normal: {\n            borderColor: '#fff'\n        }\n    },\n    left: '55%',\n    width: '40%',\n    levels: getLevelOption2(),\n    leafDepth: 2,\n    data: [dtlData[0]]\n};\n\noption = {\n    backgroundColor: '#fff',\n    title: {\n        text: '数据分布',\n        left: 'center'\n    },\n    toolbox: {\n        show: true,\n        feature: {\n            saveAsImage: {},\n            restore: {},\n            dataView: {}\n        }\n    },\n    tooltip: {\n        formatter: function(info) {\n            var value = info.value;\n            var treePathInfo = info.treePathInfo;\n            var treePath = [];\n\n            for (var i = 1; i < treePathInfo.length; i++) {\n                treePath.push(treePathInfo[i].name);\n            }\n\n            return [\n                '<div class=\"tooltip-title\">' + formatUtil.encodeHTML(treePath.join(' - ')) + '</div>',\n                'Table Count: ' + formatUtil.addCommas(value),\n            ].join('');\n        }\n    },\n    series: [series0]\n};\n\nmyChart.setOption(option, true);\n\n// 点击事件\nmyChart.on(\"click\", function(param) {\n    var selectedItem = param.name;\n    //alert(selectedItem);\n    for (var key in dtlData) {\n        if (dtlData[key].name === selectedItem) {\n            for (var ki in sbsLineV){\n                if (sbsLineV[ki] === selectedItem){\n                    bsColor = color[ki]\n                }\n            }\n            series12.levels[1].color = [bsColor]\n            series12.data = [dtlData[key]]\n            option.series = [series11, series12]\n            myChart.setOption(option, true);\n        }\n    }\n\n    if (bsLine.indexOf(selectedItem) < 0) {\n        option.series = [series0]\n        myChart.setOption(option, true);\n    }\n});","html":"","externalScripts":"","updaterUID":"bd-134433512","theme":"","layout":"","viewCount":608,"userName":"安***D","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xP0AMakJ_8.png?v=1540519681173","isCustomThumbnail":0,"builtinTags":["category-work","series-treemap","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"安***D"}}