{"status":0,"data":{"cid":"xOL_L0Z56Q","authorUid":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","authorUserName":"曹***灰","title":"饼图自动高亮展示","description":"自动高亮展示，鼠标移入展示当前","latestVersion":3,"alwaysLatest":1,"createTime":"2020-11-20T09:36:37.000Z","lastUpdateTime":"2020-11-20T09:36:37.000Z","auth":2,"uid":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-20T09:38:36.000Z","code":"var _this = this;\n\nvar isSet = true; // 判断：当鼠标移上去的时候，自动高梁被取消\nvar charPie3currentIndex = 0;\n// 基于准备好的dom，初始化echarts实例\nlet myChart = echarts.init(document.getElementById(\"chart-panel\"));\n\nconst chartPieColors = [\n    [{\n            offset: 0,\n            color: \"#59B5FF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#2263BD\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#FF9793\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#E7504C\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#AE60FA\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#6D32C1\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#EFCE49\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#D79C12\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#FFB058\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#C56625\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#4ACC88\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#27A657\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#2C989E\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#27BCC9\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#8A98FF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#2B36A8\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#00CDCB\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#06CECB\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#068EFF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#0040C4\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#006ABF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#0591E8\" // 100% 处的颜色 \n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#47F0FF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#07F0FF\" // 100% 处的颜色 #47F0FF 100%\n        }\n    ]\n]\nlet datas = [{\n        name: \"互联网\",\n        value: 10\n    },\n    {\n        name: \"房地产\",\n        value: 30\n    },\n    {\n        name: \"教育\",\n        value: 50\n    },\n    {\n        name: \"贸易\",\n        value: 20\n    },\n    {\n        name: \"其他\",\n        value: 60\n    },\n    {\n        name: \"农业\",\n        value: 10\n    },\n    {\n        name: \"畜牧业\",\n        value: 30\n    },\n    {\n        name: \"渔业\",\n        value: 50\n    },\n    {\n        name: \"制造业\",\n        value: 20\n    },\n    {\n        name: \"轻工业\",\n        value: 60\n    }\n];\nlet seriesData = datas.map((item, index) => {\n    return {\n        value: item.value,\n        name: item.name,\n        itemStyle: {\n            borderWidth: 0,\n            borderColor: \"#182037\",\n            color: {\n                type: \"linear\",\n                x: 0,\n                y: 0,\n                x2: 0,\n                y2: 1,\n                colorStops: chartPieColors[index > 8 ? Math.floor(Math.random() * 8 + 1) : index],\n                global: false // 缺省为 false\n            }\n        }\n    };\n});\noption = {\n    tooltip: {\n        trigger: \"item\",\n        formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n    },\n    legend: { // 图例组件。\n        show: false,\n        orient: \"vertical\",\n        type: \"scroll\",\n        right: 50,\n        top: \"middle\",\n        itemWidth: 10,\n        itemHeight: 10,\n        textStyle: {\n            color: \"#A1B5EB\"\n        },\n        data: datas && datas.filter(item => item.name)\n    },\n    series: [{\n        name: \"预警行业分布\",\n        type: \"pie\",\n        center: [\"30%\", \"50%\"],\n        radius: [\"50%\", \"70%\"],\n        hoverOffset: 25,\n        avoidLabelOverlap: false,\n        left: 5,\n        top: '10%',\n        label: { //饼图图形上的文本标签\n            normal: {\n                show: true,\n                position: \"inner\",\n                formatter: \"{c}\"\n            },\n            emphasis: {\n                show: true,\n                textStyle: {\n                    fontSize: \"16\",\n                }\n            }\n        },\n        labelLine: {\n            normal: {\n                show: false\n            }\n        },\n        data: seriesData\n    }]\n};\n// 2、鼠标移动上去的时候的高亮动画\nmyChart.on(\"mouseover\", function(param) {\n    isSet = false;\n    clearInterval(_this.startCharts);\n    // 取消之前高亮的图形\n    myChart.dispatchAction({\n        type: \"downplay\",\n        seriesIndex: 0,\n        dataIndex: charPie3currentIndex,\n    });\n    // 高亮当前图形\n    myChart.dispatchAction({\n        type: \"highlight\",\n        seriesIndex: 0,\n        dataIndex: param.dataIndex,\n    });\n    // 显示 tooltip\n    myChart.dispatchAction({\n        type: \"showTip\",\n        seriesIndex: 0,\n        dataIndex: param.dataIndex,\n    });\n});\n// 3、自动高亮展示\nvar chartHover = function() {\n    var dataLen = option.series[0].data.length;\n    // 取消之前高亮的图形\n    myChart.dispatchAction({\n        type: \"downplay\",\n        seriesIndex: 0,\n        dataIndex: charPie3currentIndex,\n    });\n    charPie3currentIndex = (charPie3currentIndex + 1) % dataLen;\n    // 高亮当前图形\n    myChart.dispatchAction({\n        type: \"highlight\",\n        seriesIndex: 0,\n        dataIndex: charPie3currentIndex,\n    });\n    // 显示 tooltip\n    myChart.dispatchAction({\n        type: \"showTip\",\n        seriesIndex: 0,\n        dataIndex: charPie3currentIndex,\n    });\n};\n_this.startCharts = setInterval(chartHover, 2000);\n// 4、鼠标移出之后，恢复自动高亮\nmyChart.on(\"mouseout\", function(param) {\n    if (!isSet) {\n        _this.startCharts = setInterval(chartHover, 2000);\n        isSet = true;\n        myChart.dispatchAction({\n            type: \"downplay\",\n            seriesIndex: 0,\n            dataIndex: param.dataIndex,\n        });\n    }\n});","html":"","externalScripts":"","updaterUID":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","theme":"","layout":"","viewCount":492,"userName":"曹***灰","commentCount":1,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOL_L0Z56Q.png?v=1605865116799","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"曹***灰"}}