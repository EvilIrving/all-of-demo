{"status":0,"data":{"cid":"xBJoW1veIm","authorUid":"bd-599414847","authorUserName":"A***M","title":"地图点固定随机高亮 scatter结合effectScatter","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2018-08-14T13:54:11.000Z","lastUpdateTime":"2018-08-14T13:54:11.000Z","auth":2,"uid":"bd-599414847","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.1.0","versionCreateTime":"2018-08-16T01:41:11.000Z","code":"var mapData = {\n    num: [10, 15], // 每次出现球的个数范围： 最小6 最大10\n    mapColor: '#5c9ac1', //地图填充颜色\n    borderColor: '#5278a7', //地图边框颜色\n    shadowColor: '#5174a4', //阴影颜色\n    shadowBlur: 2, //地图阴影\n    setIntervalTime: 2000, //默认刷新时间3秒\n}\n\n\n////0-8 慢 9-15 快 16-22特快\nvar data = [{\n        name: '库尔勒',\n        value: 86\n    },\n    {\n        name: '拉萨',\n        value: 120\n    },\n    {\n        name: '西宁',\n        value: 86\n    },\n    {\n        name: '成都',\n        value: 120\n    },\n\n    {\n        name: '银川',\n        value: 70\n    },\n    {\n        name: '呼和浩特',\n        value: 86\n    },\n    {\n        name: '呼和浩特右',\n        value: 86\n    },\n    {\n        name: '哈尔滨',\n        value: 86\n    },\n\n    {\n        name: '天津',\n        value: 40\n    },\n    {\n        name: '南宁',\n        value: 120\n    },\n    {\n        name: '太原',\n        value: 40\n    },\n    {\n        name: '澳门',\n        value: 100\n    },\n    {\n        name: '石家庄',\n        value: 86\n    },\n    {\n        name: '济南',\n        value: 70\n    },\n    {\n        name: '武汉',\n        value: 86\n    },\n    {\n        name: '长沙',\n        value: 86\n    },\n    {\n        name: '南昌',\n        value: 60\n    },\n    {\n        name: '南京',\n        value: 70\n    },\n    {\n        name: '上海',\n        value: 140\n    },\n    {\n        name: '福州',\n        value: 86\n    },\n\n    {\n        name: '香港',\n        value: 140\n    },\n    {\n        name: '广州',\n        value: 50\n    },\n    {\n        name: '北京',\n        value: 120\n    },\n\n]\nvar geoCoordMap = {\n    '库尔勒': [86.06, 41.68],\n    '拉萨': [87.852814, 32.027792],\n    '西宁': [95.800446, 36.426903],\n    '成都': [102.71783, 31.587876],\n    '银川': [105.955754, 37.3138],\n    '呼和浩特': [111.916478, 40.756366],\n    '呼和浩特右': [118.024381, 42.740123],\n    '哈尔滨': [127.002262, 46.623208],\n    '北京': [116.479008, 40.137923],\n    '天津': [117.288489, 39.228155],\n    '太原': [112.358013, 37.665644],\n    '石家庄': [115.522348, 35.889795],\n    '济南': [118.833862, 36.605113],\n    '武汉': [111.401354, 30.8288413],\n    '长沙': [112.358013, 27.535879],\n    '南昌': [115.301581, 27.601462],\n    '南京': [119.643343, 31.902318],\n    '上海': [121.556662, 31.145853],\n    '福州': [119.128219, 26.811868],\n    '南宁': [108.384197, 23.191126],\n    '香港': [115.301581, 23.937347],\n    '广州': [111.254175, 23.734258],\n    '澳门': [110.591873, 21.617284]\n\n};\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nfunction randNum2(min, max, num) {\n    if (num > max - min) {\n        console.error('范围太小');\n        return false;\n    }\n    var range = max - min,\n        minV = min + 1, //实际上可以取的最小值\n        arr = [],\n        tmp = \"\";\n\n    function GenerateANum(i) {\n        for (i; i < num; i++) {\n            var rand = Math.random(); //  rand >=0  && rand < 1\n            tmp = Math.floor(rand * range + minV);\n            if (arr.indexOf(tmp) == -1) {\n                arr.push(tmp)\n            } else {\n                GenerateANum(i);\n                break;\n            }\n\n        }\n    }\n    GenerateANum(0); //默认从0开始\n    return arr;\n}\n\nfunction getSeries(arrIndex) {\n\n    if (!arrIndex) {\n        var nums = randNum2(mapData.num[0], mapData.num[1], 1)[0]\n        var len = data.length - 1\n        arrIndex = randNum2(0, len, nums)\n    }\n\n    var tempArr = []\n    arrIndex.forEach((item) => {\n        tempArr.push(data[item])\n    })\n    return convertData(tempArr)\n}\n\noption = {\n    background: 'transparent',\n    tooltip: {},\n    geo: {\n        map: 'china',\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        regions: [{\n            name: '南海诸岛',\n            value: 0,\n            itemStyle: {\n                normal: {\n                    opacity: 0,\n                    label: {\n                        show: false\n                    }\n                }\n            }\n        }],\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: mapData.mapColor,\n                borderColor: mapData.borderColor,\n                shadowColor: mapData.shadowColor,\n                shadowBlur: mapData.shadowBlur,\n            },\n            emphasis: {\n                areaColor: mapData.mapColor,\n            }\n        }\n    },\n    series: [{\n            name: '正常频率较慢',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: getSeries([0, 1, 2, 3, 4, 5, 6, 7]),\n            symbolSize: function(val) {\n                return val[2] / 8;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke',\n                scale: 2, //设置缩放\n                period: 5, //设置时间\n            },\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(255, 255, 255, .6)',\n                    shadowBlur: 10,\n                    shadowColor: 'rgba(255, 255, 255, .6)',\n                }\n            },\n            zlevel: 1\n        },\n        {\n            name: '高亮频率较快',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: getSeries([15, 14, 13, 12, 11, 10, 9, 8]),\n            symbolSize: function(val) {\n                return val[2] / 8;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke',\n                scale: 3, //设置缩放\n                period: 3, //设置时间\n            },\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                   color: 'rgba(255, 255, 255, .8)',\n                    shadowBlur: 10,\n                    shadowColor: 'rgba(255, 255, 255, .8)',\n                }\n            },\n            zlevel: 2,\n        },\n        {\n            name: '高亮频率特快',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: getSeries([22, 21, 20, 19, 18, 17, 16]),\n            symbolSize: function(val) {\n                return val[2] / 8;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke',\n                scale: 3, //设置缩放\n                period: 2, //设置时间\n            },\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(255, 255, 255, 1)',\n                    shadowBlur: 10,\n                    shadowColor: '#fff'\n                }\n            },\n            zlevel: 2,\n        }\n    ],\n    animationDelayUpdate: function(idx) {\n        return idx * 30;\n    }\n}\n\n// setInterval(() => {\n// option.series[1].data = getSeries()\n// myChart.setOption(option, true);\n// }, mapData.setIntervalTime);","html":"","externalScripts":"http://gallery.echartsjs.com/dep/echarts/map/js/china.js","updaterUID":"bd-599414847","theme":"","layout":"","viewCount":1726,"userName":"A***M","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBJoW1veIm.png?v=1534383671802","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","tooltip"],"customTags":[],"updaterUserName":"A***M"}}