{"status":0,"data":{"cid":"x_l4aGH5l_","authorUid":"obd-o2Cu6Fu8pg896ESqXwpR-T6d1K1a8Bx","authorUserName":"水***风","title":"运输次数","description":"百分比3D正体柱状图","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-17T09:45:36.000Z","lastUpdateTime":"2020-06-17T09:45:36.000Z","auth":2,"uid":"obd-o2Cu6Fu8pg896ESqXwpR-T6d1K1a8Bx","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-17T09:45:36.000Z","code":"// 绘制左侧面\nconst CubeLeft = echarts.graphic.extendShape({\n    shape: {\n        x: 0,\n        y: 0\n    },\n    buildPath: function(ctx, shape) {\n        // 该方法官方文档有详细的介绍，先看官网再看此此demo有助于理解\n        // 绘画路径是canves中的路径绘制方法\n        // shape参数是下面series里面的shap，\n        //外边的参数shape是默认值，即如果低下的shap中没有会采用默认值x:0，y:0\n        // 换算后的值跟canvas上一致，往下往右为正\n        const xAxisPoint = shape.xAxisPoint\n        ctx.moveTo(shape.x, shape.y);\n        ctx.lineTo(shape.x - 15, shape.y - 3);\n        ctx.lineTo(xAxisPoint[0] - 15, xAxisPoint[1] - 3);\n        ctx.lineTo(xAxisPoint[0], xAxisPoint[1]);\n        ctx.closePath()\n    }\n})\n// 绘制右侧面\nconst CubeRight = echarts.graphic.extendShape({\n    shape: {\n        x: 0,\n        y: 0\n    },\n    buildPath: function(ctx, shape) {\n        const xAxisPoint = shape.xAxisPoint\n        ctx.moveTo(shape.x, shape.y);\n        ctx.lineTo(shape.x + 15, shape.y - 3);\n        ctx.lineTo(xAxisPoint[0] + 15, xAxisPoint[1] - 3);\n        ctx.lineTo(xAxisPoint[0], xAxisPoint[1]);\n        ctx.closePath()\n    }\n})\n// 绘制顶面\nconst CubeTop = echarts.graphic.extendShape({\n    shape: {\n        x: 0,\n        y: 0\n    },\n    buildPath: function(ctx, shape) {\n        ctx.moveTo(shape.x, shape.y);\n        ctx.lineTo(shape.x + 15, shape.y - 3);\n        ctx.lineTo(shape.x, shape.y - 6);\n        ctx.lineTo(shape.x - 15, shape.y - 3);\n        ctx.closePath()\n    }\n})\n// 注册三个面图形\necharts.graphic.registerShape('CubeLeft', CubeLeft)\necharts.graphic.registerShape('CubeRight', CubeRight)\necharts.graphic.registerShape('CubeTop', CubeTop)\n\nconst MAX = [8, 8, 8, 8, 8]\nconst VALUE = [7, 6, 4, 2, 2]\nconst MAX_VALUE = 8\noption = {\n    backgroundColor: \"#334253\",\n    title: {\n        text: '运输次数',\n        top: 32,\n        left: 18,\n        textStyle: {\n            color: 'white',\n            fontSize: 20\n        }\n    },\n    // tooltip: {\n    //     trigger: 'axis',\n    //     axisPointer: {\n    //         type: 'shadow'\n    //     },\n    //     formatter: function(params) {\n    //         const item = params[1]\n    //         return item.name + ' : ' + item.value + '次';\n    //     }\n    // },\n    grid: {\n        left: 40,\n        right: 40,\n        bottom: 100,\n        top: 100,\n        containLabel: true\n    },\n    xAxis: {\n        type: 'category',\n        data: ['沪A0731', '沪A0732', '沪A0733', '沪A0734', '沪A0735'],\n        axisLine: {\n            show: true,\n            lineStyle: {\n                color:'#586473'\n            }\n        },\n        offset: 10,\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            color:'#F5F5F5'\n        }\n    },\n    yAxis: {\n        type: 'value',\n        axisLine: {\n            show: false,\n            // axisLabel未定义color时采用此color\n            lineStyle: {\n                color: 'white'\n            }\n        },\n        splitLine: {\n            lineStyle:{\n              color:'#586473'\n            }\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            formatter: function (val) {\n                return parseInt(val/MAX_VALUE * 100)  + '%' ;\n            }\n        },\n    },\n    series: [{\n        type: 'custom',\n        renderItem: function(params, api) {\n            // coord 是将数值转换成坐标系上的点\n            // x轴与y轴上的值转化为坐标点,也可以理解为维度0,1\n            // 如 data:[['沪A0731',7]]，api.value(0)为沪A0731，api.value(1)]为7\n            const location = api.coord([api.value(0), api.value(1)])\n            return {\n                type: 'group',\n                children: [{\n                    type: 'CubeLeft',\n                    shape: {\n                        x: location[0],\n                        y: location[1],\n                        // x轴上的坐标点此时y轴value为0\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill: 'rgba(86,105,126,.5)'\n                    }\n                }, {\n                    type: 'CubeRight',\n                    shape: {\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill: 'rgba(86,105,126,.5)'\n                    }\n                }, {\n                    type: 'CubeTop',\n                    shape: {\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill: 'rgba(86,105,126,.5)'\n                    }\n                }]\n            }\n        },\n        data: MAX,\n        silent:true\n    }, {\n        type: 'custom',\n        renderItem: (params, api) => {\n            const location = api.coord([api.value(0), api.value(1)])\n            return {\n                type: 'group',\n                children: [{\n                    type: 'CubeLeft',\n                    shape: {\n                        xValue: api.value(0),\n                        yValue: api.value(1),\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#C8753C'\n                            },\n                             {\n                                offset: 0.25,\n                                color: '#C8753C'\n                            },\n                             {\n                                offset: 0.75,\n                                color: '#70B2CA'\n                            },\n                            {\n                                offset: 1,\n                                color: '#70B2CA'\n                            }\n                        ])\n                    }\n                }, {\n                    type: 'CubeRight',\n                    shape: {\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#C8753C'\n                            },\n                            {\n                                offset: 0.25,\n                                color: '#C8753C'\n                            },\n                             {\n                                offset: 0.75,\n                                color: '#70B2CA'\n                            },\n                            {\n                                offset: 1,\n                                color: '#70B2CA'\n                            }\n                        ])\n                    }\n                }, {\n                    type: 'CubeTop',\n                    shape: {\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                        fill:'#C8753C'\n                    }\n                }]\n            }\n        },\n        data: VALUE\n    },{\n        type: 'bar',\n        label: {\n            show: true,\n            position: 'top',\n            formatter: (params) => {\n                return  params.value + '次'\n            },\n            color: '#fff',\n            offset: [0, -5]\n\n        },\n        itemStyle: {\n            color: 'transparent'\n        },\n        data: VALUE\n    }]\n}","html":"","externalScripts":"","updaterUID":"obd-o2Cu6Fu8pg896ESqXwpR-T6d1K1a8Bx","theme":"","layout":"","viewCount":256,"userName":"水***风","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_l4aGH5l_.png?v=1592387136150","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-custom","title"],"customTags":[],"updaterUserName":"水***风"}}