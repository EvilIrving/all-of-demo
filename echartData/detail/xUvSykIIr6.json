{"status":0,"data":{"cid":"xUvSykIIr6","authorUid":"bd-1627449234","authorUserName":"l***w","title":"跑道图占比","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-09T10:28:51.000Z","lastUpdateTime":"2020-06-09T10:28:51.000Z","auth":2,"uid":"bd-1627449234","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-09T10:28:51.000Z","code":"data = [{\r\n        name: \"使用中资源量\",\r\n        value: 754\r\n    },\r\n    {\r\n        name: \"维修中资源量\",\r\n        value: 611\r\n    },\r\n    {\r\n        name: \"保养中资源量\",\r\n        value: 400\r\n    },\r\n    {\r\n        name: \"已损坏资源量\",\r\n        value: 200\r\n    }\r\n];\r\narrName = getArrayValue(data, \"name\");\r\n//debugger\r\narrValue = getArrayValue(data, \"value\");\r\nsumValue = eval(arrValue.join('+'));\r\nobjData = array2obj(data, \"name\");\r\noptionData = getData(data)\r\nfunction getArrayValue(array, key) {\r\n    var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction array2obj(array,key) {\r\n\tvar resObj = {};\r\n\tfor(var i=0;i<array.length;i++){\r\n\t\tresObj[array[i][key]] = array[i];\r\n\t}\r\n\treturn resObj;\r\n}\r\n\r\nfunction getData(data) {\r\n    var res = {\r\n        series: [],\r\n        //yAxis: []\r\n    };\r\n    for (let i = 0; i < data.length; i++) {\r\n        // console.log([70 - i * 15 + '%', 67 - i * 15 + '%']);\r\n        res.series.push({\r\n            name: '',\r\n            type: 'pie',\r\n            clockWise: false, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\r\n            center: [\"30%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n            },\r\n            data: [{\r\n                value: data[i].value,\r\n                name: data[i].name\r\n            }, {\r\n                value: sumValue - data[i].value,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.series.push({\r\n            name: '',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: false, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\r\n            center: [\"30%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n            },\r\n            data: [{\r\n                value: 7.5,\r\n                itemStyle: {\r\n                    color: \"rgb(3, 31, 62)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }, {\r\n                value: 2.5,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        //res.yAxis.push((data[i].value / sumValue * 100).toFixed(2) + \"%\");\r\n    }\r\n    return res;\r\n}\r\n\r\noption = {\r\n    backgroundColor:'#000',\r\n    title: {\r\n        text:'dfssdf',\r\n        left: 'center',\r\n        top: 0,\r\n        textStyle: {\r\n            color: '#00ffff',\r\n            fontSize: 14,\r\n            fontWeight: 0\r\n        }\r\n    },\r\n    legend: {\r\n        show: true,\r\n        icon:\"circle\",\r\n        top: \"15%\",\r\n        left: '35%',\r\n        data: arrName,\r\n        width:50,\r\n        //padding: [0, 5],\r\n\t        itemGap:5,\r\n            itemWidth:8,\r\n            itemHeight:8,\r\n        itemGap: 5,\r\n        formatter: function(name) {\r\n            //return \"{title|\" + name + \"}\\n{value|\" + (objData[name].value) +\"}  {title|项}\"+(objData[name].value/sumValue*100).toFixed(2)+\"%\"\r\n            return  name + \" \" + (objData[name].value) +\"项\\n\"+(objData[name].value/sumValue*100).toFixed(2)+\"%\"\r\n        },\r\n       \r\n        textStyle: {\r\n            // rich: {\r\n            //     title: {\r\n            //         fontSize: 16,\r\n            //         lineHeight: 15,\r\n            //         color: \"rgb(0, 178, 246)\"\r\n            //     },\r\n            //     value: {\r\n            //         fontSize: 18,\r\n            //         lineHeight: 20,\r\n            //         color: \"#fff\"\r\n            //     }\r\n            // }\r\n            color:'#fff',\r\n            fontSize:14,\r\n        },\r\n    },\r\n    tooltip: {\r\n        show: true,\r\n        trigger: \"item\",\r\n        formatter: \"{b}:<br>{c}\"\r\n    },\r\n    color: ['rgb(24, 183, 142)', 'rgb(1, 179, 238)', 'rgb(22, 75, 205)', 'rgb(52, 52, 176)'],\r\n    grid: {\r\n        top: '15%',\r\n        //bottom: '53%',\r\n        left: \"0\",\r\n        containLabel: false\r\n    },\r\n    // yAxis: [{\r\n    //     type: 'category',\r\n    //     inverse: true,\r\n    //     axisLine: {\r\n    //         show: false\r\n    //     },\r\n    //     axisTick: {\r\n    //         show: false\r\n    //     },\r\n    //     axisLabel: {\r\n    //         interval: 0,\r\n    //         inside: true,\r\n    //         textStyle: {\r\n    //             color: \"#fff\",\r\n    //             fontSize: 16,\r\n    //         },\r\n    //         show: true\r\n    //     },\r\n    //     data: optionData.yAxis\r\n    // }],\r\n    // xAxis: [{\r\n    //     show: false\r\n    // }],\r\n    series: optionData.series\r\n};","html":"","externalScripts":"","updaterUID":"bd-1627449234","theme":"","layout":"","viewCount":219,"userName":"l***w","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUvSykIIr6.png?v=1591698532034","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"l***w"}}