{"status":0,"data":{"cid":"xjJCPQ_nnn","authorUid":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","authorUserName":"187*****210","title":"四分之三圆环","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-09-08T07:15:16.000Z","lastUpdateTime":"2020-09-08T07:15:16.000Z","auth":1,"uid":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-13T06:41:26.000Z","code":"data = [{\r\n        name: \"名称1\",\r\n        value: 85\r\n    },\r\n    {\r\n        name: \"名称2\",\r\n        value: 71\r\n    },\r\n    {\r\n        name: \"名称3\",\r\n        value: 40\r\n    },\r\n    {\r\n        name: \"名称4\",\r\n        value: 20\r\n    }\r\n];\r\ncolor = [\r\n    ['#30C5DB', '#30C5DB'],\r\n    ['#F88C41', '#F88C41'],\r\n    ['#66C4F7', '#66C4F7'],\r\n    ['#9F9CF7', '#9F9CF7'],\r\n];\r\narrName = getArrayValue(data, \"name\");\r\narrValue = getArrayValue(data, \"value\");\r\nsumValue = eval(arrValue.join('+'));\r\nobjData = array2obj(data, \"name\");\r\noptionData = getData(data)\r\n\r\nfunction getArrayValue(array, key) {\r\n    var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction array2obj(array, key) {\r\n    var resObj = {};\r\n    for (var i = 0; i < array.length; i++) {\r\n        resObj[array[i][key]] = array[i];\r\n    }\r\n    return resObj;\r\n}\r\n\r\nfunction getData(data) {\r\n    var res = {\r\n        series: [],\r\n        legend: [],\r\n    };\r\n    for (let i = 0; i < data.length; i++) {\r\n        if (data[i].value < 60) {\r\n            var itemColor = {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: color[2][0] // 0% 处的颜色\r\n                }, {\r\n                    offset: 2 / 3,\r\n                    color: color[2][1] // 100% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: color[2][1] // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            };\r\n        } else {\r\n            if (data[i].value < 80) {\r\n                var itemColor = {\r\n                    type: 'linear',\r\n                    x: 0,\r\n                    y: 0,\r\n                    x2: 0,\r\n                    y2: 1,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: color[1][0] // 0% 处的颜色\r\n                    }, {\r\n                        offset: 0.5,\r\n                        color: color[1][1] // 100% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: color[1][1] // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n                }\r\n            } else {\r\n                if (data[i].value < 100) {\r\n                    var itemColor = {\r\n                        type: 'linear',\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 0,\r\n                        y2: 1,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: color[0][0] // 0% 处的颜色\r\n                        }, {\r\n                            offset: 2 / 3,\r\n                            color: color[0][1] // 100% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: color[0][1] // 100% 处的颜色\r\n                        }],\r\n                        global: false // 缺省为 false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        res.series.push({\r\n            name: '',\r\n            type: 'pie',\r\n            clockWise: false, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [70 - i * 15 + '%', 65 - i * 15 + '%'],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                normal: {\r\n                    color: itemColor,\r\n                }\r\n\r\n            },\r\n            data: [{\r\n                value: data[i].value,\r\n                name: data[i].name\r\n            }, {\r\n                value: 400 / 3 - data[i].value,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.series.push({\r\n            name: '',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: false, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [70 - i * 15 + '%', 65 - i * 15 + '%'],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n            },\r\n            data: [{\r\n                value: 7.5,\r\n                itemStyle: {\r\n                    color: \"#E3F0FF\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }, {\r\n                value: 2.5,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n    }\r\n    return res;\r\n}\r\noptionData.series.push({\r\n                name: '刻度线',\r\n                type: 'gauge',\r\n                startAngle: 90,\r\n                endAngle: 360,\r\n                min: 0,\r\n                max: 100,\r\n                radius: '70%',\r\n                center: [\"50%\", \"50%\"],\r\n                title: {show:false},\r\n                detail: {show:false},\r\n                axisLine: {show: false,},\r\n                axisTick: {length: 0,},\r\n                splitLine: {\r\n                    length: '100%',\r\n                    show:true,\r\n                    lineStyle: {\r\n                        color: '#999',\r\n                        width: 1,\r\n                        type: 'solid',\r\n                    },\r\n                },\r\n                axisLabel: { show:false},\r\n                pointer: {show:false,},\r\n                data: [{value: 0,}]\r\n            },{\r\n                name: '刻度值',\r\n                type: 'gauge',\r\n                startAngle: 90,\r\n                endAngle: 360,\r\n                min: 0,\r\n                max: 100,\r\n                radius: '75%',\r\n                center: [\"50%\", \"50%\"],\r\n                title: {show:false},\r\n                detail: {show:false},\r\n                axisLine: {show: false,},\r\n                axisTick: {length: 0,},\r\n                splitLine: {show:false,length:-23},\r\n                axisLabel: {\r\n                    color: '#000',\r\n                    fontSize: 12,\r\n                    verticalAlign:'top',\r\n                    align:'left',\r\n                    margin:0\r\n                },\r\n                pointer: {show:false,},\r\n                data: [{value: 0,}]\r\n            });\r\n\r\noption = {\r\n  backgroundColor:'#fff',\r\n    legend: [{\r\n        show: true,\r\n        top: '15%',\r\n        left: \"50%\",\r\n        data: arrName,\r\n        width: 100,\r\n        itemGap: 48,\r\n        itemWidth: 0,\r\n        icon: 'none',\r\n        formatter: function(name) {\r\n            return \"{title|\" + name + \"}{value| \" + (objData[name].value / sumValue * 100).toFixed(2) + \"%} \"\r\n        },\r\n        textStyle: {\r\n            rich: {\r\n                title: {\r\n                    fontSize: 16,\r\n                    color: \"#6D7383\"\r\n                },\r\n                value: {\r\n                    fontSize: 16,\r\n                    color: \"#009afe\"\r\n                }\r\n            }\r\n        },\r\n    }],\r\n    tooltip: {\r\n        show: true,\r\n        trigger: \"item\",\r\n        confine: true,\r\n        formatter: function(param) {\r\n            return param.name + ' : ' + param.value + ' ( ' + (objData[param.name].value / sumValue * 100).toFixed(2) + \"% ）\"\r\n        },\r\n        textStyle: {\r\n            rich: {\r\n                title: {\r\n                    fontSize: 20,\r\n                    lineHeight: 30,\r\n                    color: \"#6D7383\"\r\n                },\r\n                value: {\r\n                    fontSize: 18,\r\n                    lineHeight: 20,\r\n                    color: \"#4DA1FF\"\r\n                }\r\n            }\r\n        },\r\n    },\r\n\r\n    series: optionData.series\r\n}","html":"","externalScripts":"","updaterUID":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","theme":"","layout":"","viewCount":1610,"userName":"187*****210","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjJCPQ_nnn.png?v=1605249687073","isCustomThumbnail":0,"builtinTags":["category-work","legend","polar","series-pie","tooltip"],"customTags":[],"updaterUserName":"187*****210"}}