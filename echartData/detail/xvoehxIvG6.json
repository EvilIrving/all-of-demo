{"status":0,"data":{"cid":"xvoehxIvG6","authorUid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","authorUserName":"l***y","title":"关系图-力引导布局","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-06T07:26:18.000Z","lastUpdateTime":"2020-11-06T07:26:18.000Z","auth":2,"uid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-06T07:26:18.000Z","code":"let data = [{\r\n    name: \"a\",\r\n    value: 40\r\n}, {\r\n    name: \"b\",\r\n    value: 30\r\n}, {\r\n    name: \"c\",\r\n    value: 20\r\n}, {\r\n    name: \"d\",\r\n    value: 10\r\n}, {\r\n    name: \"e\",\r\n    value: 5\r\n}]\r\n//最大最小值\r\nlet max = data.reduce((a, b)=>{\r\n    return (b.value == undefined ? b : b.value) > (a.value == undefined ? a : a.value) ? b : a;\r\n}).value;\r\nlet min = data.reduce((a, b)=>{\r\n    return (b.value == undefined ? b : b.value) < (a.value == undefined ? a : a.value) ? b : a;\r\n}).value;\r\n//映射到节点大小的最大最小值\r\nlet maxSize4Pin = 100;\r\nlet minSize4Pin = 30;\r\n//将实际值映射到10-100之间\r\nfor (let item of data) {\r\n    item.symbolSize = ((val)=>{\r\n        let a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n        let b = minSize4Pin - a * min;\r\n        return a * val + b;\r\n    })(item.value);\r\n}\r\nconsole.log(data)\r\noption = {\r\n backgroundColor: '#012248',\r\n    tooltip: {},\r\n    grid: {\r\n    },\r\n    animationDurationUpdate: function(idx) {\r\n        // 越往后的数据延迟越大\r\n        return idx * 100\r\n    },\r\n    animationEasingUpdate: \"bounceIn\",\r\n    series: [{\r\n        type: \"graph\",\r\n        layout: \"force\",\r\n        force: {\r\n            repulsion: 100, //越大斥力越大\r\n            gravity: 0.05, //越大节点越往中心靠拢\r\n            edgeLength: 20, //值越小则长度越长\r\n        },\r\n        roam: true,\r\n        draggable: true,\r\n        symbolSize: 1,\r\n        itemStyle: {\r\n            opacity: 0.9,\r\n            color: ()=>{\r\n                    return (\r\n                        'rgb(' + [\r\n                            Math.round(Math.random() * 500),\r\n                            Math.round(Math.random() * 300),\r\n                            Math.round(Math.random() * 200)\r\n                        ].join(',') +\r\n                        ')'\r\n                    )\r\n                }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                fontSize: 10\r\n                \r\n            }\r\n        },\r\n        data: data\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","theme":"","layout":"","viewCount":115,"userName":"l***y","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvoehxIvG6.png?v=1604647578700","isCustomThumbnail":0,"builtinTags":["category-work","series-graph","tooltip"],"customTags":[],"updaterUserName":"l***y"}}