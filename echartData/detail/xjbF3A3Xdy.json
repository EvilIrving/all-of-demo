{"status":0,"data":{"cid":"xjbF3A3Xdy","authorUid":"obd-ot7vxnQdygPJKrpXWnYZtFDwTxmmd8H","authorUserName":"握***J","title":"12./09","description":"10:49","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-09T02:49:51.000Z","lastUpdateTime":"2021-12-09T02:49:51.000Z","auth":2,"uid":"obd-ot7vxnQdygPJKrpXWnYZtFDwTxmmd8H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-09T02:49:51.000Z","code":"   const chartData = [\n        {\n            value: 520,\n            name: '温度传感器'\n        },\n        {\n            value: 280,\n            name: '湿度传感器'\n        },\n        {\n            value: 100,\n            name: 'UPS'\n        },\n        {\n            value: 100,\n            name: '门禁'\n        },\n        {\n            value: 100,\n            name: '消防'\n        },\n        {\n            value: 100,\n            name: '空调'\n        },\n        {\n            value: 100,\n            name: '漏水/水浸'\n        },\n        {\n            value: 100,\n            name: '烟雾'\n        }\n    ]\n    const colorList = ['#115FEA', '#10EBE3', '#10A9EB', '#EB9C10', '#2E10EB', '#9B10EB']\n    const sum = chartData.reduce((per, cur) => per + cur.value, 0)\n    const gap = (1 * sum) / 100\n    const pieData1 = []\n    const pieData2 = []\n    const gapData = {\n        name: '',\n        value: gap,\n        itemStyle: {\n            color: 'transparent'\n        }\n    }\n    for (let i = 0; i < chartData.length; i++) {\n        // 第一圈数据\n        pieData1.push({\n            ...chartData[i],\n            itemStyle: {\n                borderRadius: 10\n            }\n        })\n        pieData1.push(gapData)\n\n        // 第二圈数据\n        pieData2.push({\n            ...chartData[i],\n            itemStyle: {\n                color: colorList[i],\n                opacity: 0.1\n            }\n        })\n        pieData2.push(gapData)\n    }\n    console.log(pieData2)\n\n    option = {\n        backgroundColor: '#FC7D3F',\n        tooltip: {\n            show: false\n            // backgroundColor: 'rgba(255, 255, 255)',\n            // textStyle: {\n            //     color: '#FC7D3F'#FC7D3F\n            // }\n        },\n        legend: {\n            show: true,\n            right: '20%',\n            top: '10%',\n            align: 'left',\n            itemGap: 18,\n            // icon: 'rect',\n            itemWidth: 13,\n            itemHeight: 7,\n            // symbolKeepAspect: false,\n            textStyle: {\n                // 个\n                color: '#D8DDE3',\n                rich: {\n                    name: {\n                        verticalAlign: 'right',\n                        align: 'left',\n                        width: 100,\n                        fontSize: 18,\n                        color: '#D8DDE3'\n                    },\n                    percent: {\n                        padding: [0, 0, 0, 8],\n                        color: '#D8DDE3'\n                    }\n                },\n                borderWidth: 53 // 间距的宽度\n            },\n            formatter: name => {\n                console.log(name)\n                console.log(chartData)\n                const item = chartData.find(i => {\n                    return i.name === name\n                })\n                const p = ((item.value / sum) * 100).toFixed(0)\n                return '{name|' + name + '}' + '{percent|' + p + '}' + '个'\n            }\n        },\n        graphic: {\n            elements: [\n                // {\n                //     type: 'image',\n                //     z: 3,\n                //     style: {\n                //         image: imgSrc,\n                //         width: 70,\n                //         height: 70\n                //     },\n                //     top: 'middle',\n                //     left: 'center',\n                //     scale: [1.5, 1.5]\n                // }\n            ]\n        },\n        grid: {\n            top: 35,\n            right: 30,\n            bottom: 20,\n            left: 30\n        },\n        color: colorList,\n        series: [\n            {\n                name: '消息来源',\n                type: 'pie',\n                roundCap: true,\n                radius: ['66%', '70%'],\n                center: ['26%', '45%'],\n                label: {\n                    show: false\n                },\n                labelLine: {\n                    show: false\n                },\n                data: pieData1\n            },\n            {\n                type: 'pie',\n                radius: ['66%', '54%'],\n                center: ['26%', '45%'],\n                gap: 1.71,\n                label: {\n                    show: false\n                },\n                labelLine: {\n                    show: false\n                },\n                silent: true,\n                data: pieData2\n            },\n            {\n                type: 'pie',\n                center: ['26%', '45%'],\n                radius: [0, '45.6%'],\n                label: {\n                    show: false\n                },\n                labelLine: {\n                    show: false\n                },\n                itemStyle: {\n                    color: 'rgba(75, 126, 203,.1)'\n                },\n                silent: true,\n                data: [\n                    {\n                        value: 100,\n                        name: ''\n                    }\n                ]\n            }\n        ]\n    }\n","html":"","externalScripts":"","updaterUID":"obd-ot7vxnQdygPJKrpXWnYZtFDwTxmmd8H","theme":"","layout":"","viewCount":0,"userName":"握***J","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjbF3A3Xdy.png?v=1639018191826","isCustomThumbnail":0,"builtinTags":["category-work","graphic","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"握***J"}}