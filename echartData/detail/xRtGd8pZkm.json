{"status":0,"data":{"cid":"xRtGd8pZkm","authorUid":"obd-oNCF_U4olqrFdRugM_xyQjQzUkg6qCx","authorUserName":"S***T","title":"主要城市年平均房价","description":"","latestVersion":5,"alwaysLatest":0,"createTime":"2021-12-14T15:13:08.000Z","lastUpdateTime":"2021-12-14T16:46:56.000Z","auth":2,"uid":"obd-oNCF_U4olqrFdRugM_xyQjQzUkg6qCx","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-14T16:46:56.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1528971808162-BkOXf61WX.json';\n\n//geoCoordMap把所有可能出现的城市加到数组里面\nvar geoCoordMap = {\n    北京: [116.405285, 39.904989],\n    上海: [121.472644, 31.231706],\n    广州: [113.280637, 23.125178],\n    深圳: [114.085947, 22.547],\n\n    成都: [104.065735, 30.659462],\n    杭州: [120.153576, 30.287459],\n    重庆: [106.504962, 29.533155],\n    西安: [108.948024, 34.263161],\n    苏州: [120.619585, 31.299379],\n    武汉: [114.298572, 30.584355],\n    南京: [118.767413, 32.041544],\n    天津: [117.190182, 39.125596],\n    郑州: [113.665412, 34.757975],\n    长沙: [112.982279, 28.19409],\n    东莞: [113.760234, 23.048884],\n    佛山: [113.122717, 23.028762],\n    宁波: [121.549792, 29.868388],\n    青岛: [120.369557, 36.094406],\n    沈阳: [123.429096, 41.796767],\n};\n\n//2015年数据\nvar d1 = {\n    北京: 39437,\n    上海: 32324,\n    广州: 20016,\n    深圳: 41494,\n\n    成都: 7256.67,\n    杭州: 16080,\n    重庆: 6289,\n    西安: 6450,\n    苏州: 12251,\n    武汉: 10000,\n    南京: 18697,\n    天津: 15553,\n    郑州: 8790,\n    长沙: 6448,\n    东莞: 8371,\n    佛山: 6082,\n    宁波: 12250,\n    青岛: 12384,\n    沈阳: 7242,\n};\n\n//2016年数据\nvar d2 = {\n    北京: 57597,\n    上海: 41741,\n    广州: 22926,\n    深圳: 43289,\n\n    成都: 7643.42,\n    杭州: 21655,\n    重庆: 7493,\n    西安: 6514,\n    苏州: 16181,\n    武汉: 13875,\n    南京: 24867,\n    天津: 23220,\n    郑州: 12091,\n    长沙: 7601,\n    东莞: 11651,\n    佛山: 7161,\n    宁波: 13857,\n    青岛: 13523,\n    沈阳: 7242,\n};\n//2017年数据\nvar d3 = {\n    北京: 57768,\n    上海: 53195.42,\n    广州: 28578,\n    深圳: 51477,\n\n    成都: 11269.75,\n    杭州: 28540,\n    重庆: 9925,\n    西安: 8880,\n    苏州: 15320,\n    武汉: 16259,\n    南京: 25733,\n    天津: 22205,\n    郑州: 12859,\n    长沙: 9873,\n    东莞: 13913,\n    佛山: 10229,\n    宁波: 17037,\n    青岛: 18142,\n    沈阳: 7999,\n};\n//2018年数据\nvar d4 = {\n    北京: 59868,\n    上海: 46603,\n    广州: 32088,\n    深圳: 53205,\n\n    成都: 13252.58,\n    杭州: 28651,\n    重庆: 12080,\n    西安: 12207,\n    苏州: 16943,\n    武汉: 17568,\n    南京: 27568,\n    天津: 22188,\n    郑州: 13582,\n    长沙: 10627,\n    东莞: 14813,\n    佛山: 10908,\n    宁波: 20313,\n    青岛: 18788,\n    沈阳: 7242,\n};\n//2019年数据\nvar d5 = {\n    北京: 58568,\n    上海: 48283.67,\n    广州: 31692,\n    深圳: 54790,\n\n    成都: 11618.5,\n    杭州: 27002,\n    重庆: 11187,\n    西安: 12446,\n    苏州: 16818,\n    武汉: 10000,\n    南京: 28526,\n    天津: 20952,\n    郑州: 13266,\n    长沙: 10078,\n    东莞: 16105,\n    佛山: 12652,\n    宁波: 22814,\n    青岛: 16340,\n    沈阳: 9817,\n};\n//2020年数据\nvar d6 = {\n    北京: 57561,\n    上海: 51201.83,\n    广州: 33364,\n    深圳: 56795,\n\n    成都: 12341.08,\n    杭州: 27851,\n    重庆: 11275,\n    西安: 12748,\n    苏州: 21678,\n    武汉: 16772,\n    南京: 28640,\n    天津: 19729,\n    郑州: 13509,\n    长沙: 10151,\n    东莞: 18296,\n    佛山: 13173,\n    宁波: 26075,\n    青岛: 16619,\n    沈阳: 10216,\n};\n//2021年数据\nvar d7 = {\n    北京: 58768,\n    上海: 44812.82,\n    广州: 35143,\n    深圳: 57733,\n\n    成都: 13304.73,\n    杭州: 31577,\n    重庆: 12526,\n    西安: 13871,\n    苏州: 22216,\n    武汉: 16829,\n    南京: 27977,\n    天津: 18121,\n    郑州: 13513,\n    长沙: 10467,\n    东莞: 20215,\n    佛山: 14221,\n    宁波: 26579,\n    青岛: 16134,\n    沈阳: 9999,\n};\n\nvar colors = [\n    ['#1DE9B6', '#F46E36', '#04B9FF', '#5DBD32', '#FFC809', '#FB95D5', '#BDA29A', '#6E7074', '#546570', '#C4CCD3'],\n    [\n        '#37A2DA',\n        '#67E0E3',\n        '#32C5E9',\n        '#9FE6B8',\n        '#FFDB5C',\n        '#FF9F7F',\n        '#FB7293',\n        '#E062AE',\n        '#E690D1',\n        '#E7BCF3',\n        '#9D96F5',\n        '#8378EA',\n        '#8378EA',\n    ],\n    [\n        '#DD6B66',\n        '#759AA0',\n        '#E69D87',\n        '#8DC1A9',\n        '#EA7E53',\n        '#EEDD78',\n        '#73A373',\n        '#73B9BC',\n        '#7289AB',\n        '#91CA8C',\n        '#F49F42',\n    ],\n];\nvar colorIndex = 0;\n$(function () {\n    var year = ['2015', '2016', '2017', '2018', '2019', '2020', '2021'];\n    var mapData = [[], [], [], [], [], [], []];\n\n    /*柱子Y名称*/\n    var categoryData = [];\n    var barData = [];\n\n    for (var key in geoCoordMap) {\n        mapData[0].push({\n            year: '2015',\n            name: key,\n            value: d1[key],\n        });\n        mapData[1].push({\n            year: '2016',\n            name: key,\n            value: d2[key],\n        });\n        mapData[2].push({\n            year: '2017',\n            name: key,\n            value: d3[key],\n        });\n        mapData[3].push({\n            year: '2018',\n            name: key,\n            value: d4[key],\n        });\n        mapData[4].push({\n            year: '2019',\n            name: key,\n            value: d5[key],\n        });\n        mapData[5].push({\n            year: '2020',\n            name: key,\n            value: d6[key],\n        });\n        mapData[6].push({\n            year: '2021',\n            name: key,\n            value: d7[key],\n        });\n    }\n\n    for (var i = 0; i < mapData.length; i++) {\n        mapData[i].sort(function sortNumber(a, b) {\n            return a.value - b.value;\n        });\n        barData.push([]);\n        categoryData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            barData[i].push(mapData[i][j].value);\n            categoryData[i].push(mapData[i][j].name);\n        }\n    }\n\n    $.getJSON(uploadedDataURL, function (geoJson) {\n        echarts.registerMap('china', geoJson);\n        var convertData = function (data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value),\n                    });\n                }\n            }\n            return res;\n        };\n\n       option = {\n           backgroundColor: '#080b30',\n            title: {\n                text: '测试',\n                textStyle: {\n                    align: 'center',\n                    color: '#fff',\n                    fontSize: 20,\n                },\n                top: '5%',\n                left: 'center',\n            },\n            tooltip: {\n                trigger: 'axis',\n                axisPointer: {\n                    lineStyle: {\n                        color: {\n                            type: 'linear',\n                            x: 0,\n                            y: 0,\n                            x2: 0,\n                            y2: 1,\n                            colorStops: [{\n                                offset: 0,\n                                color: 'rgba(0, 255, 233,0)'\n                            }, {\n                                offset: 0.5,\n                                color: 'rgba(255, 255, 255,1)',\n                            }, {\n                                offset: 1,\n                                color: 'rgba(0, 255, 233,0)'\n                            }],\n                            global: false\n                        }\n                    },\n                },\n            },\n            grid: {\n                top: '15%',\n                left: '5%',\n                right: '5%',\n                bottom: '15%',\n                // containLabel: true\n            },\n            xAxis: [{\n                type: 'category',\n                axisLine: {\n                    show: true\n                },\n                splitArea: {\n                    // show: true,\n                    color: '#f00',\n                    lineStyle: {\n                        color: '#f00'\n                    },\n                },\n                axisLabel: {\n                    color: '#fff'\n                },\n                splitLine: {\n                    show: false\n                },\n                boundaryGap: false,\n                data: ['2015', '2016', '2017', '2018', '2019', '2020','2021'],\n        \n            }],\n        \n            yAxis: [{\n                type: 'value',\n                min: 0,\n                // max: 140,\n                splitNumber: 4,\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: 'rgba(255,255,255,0.1)'\n                    }\n                },\n                axisLine: {\n                    show: false,\n                },\n                axisLabel: {\n                    show: false,\n                    margin: 20,\n                    textStyle: {\n                        color: '#d1e6eb',\n        \n                    },\n                },\n                axisTick: {\n                    show: false,\n                },\n            }],\n            series: [{\n                    name: '注册总量',\n                    type: 'line',\n                    // smooth: true, //是否平滑\n                    showAllSymbol: true,\n                    // symbol: 'image://./static/images/guang-circle.png',\n                    symbol: 'circle',\n                    symbolSize: 25,\n                    lineStyle: {\n                        normal: {\n                            color: \"#6c50f3\",\n                            shadowColor: 'rgba(0, 0, 0, .3)',\n                            shadowBlur: 0,\n                            shadowOffsetY: 5,\n                            shadowOffsetX: 5,\n                        },\n                    },\n                    label: {\n                        show: true,\n                        position: 'top',\n                        textStyle: {\n                            color: '#6c50f3',\n                        }\n                    },\n                    itemStyle: {\n                        color: \"#6c50f3\",\n                        borderColor: \"#fff\",\n                        borderWidth: 3,\n                        shadowColor: 'rgba(0, 0, 0, .3)',\n                        shadowBlur: 0,\n                        shadowOffsetY: 2,\n                        shadowOffsetX: 2,\n                    },\n                    tooltip: {\n                        show: false\n                    },\n                    areaStyle: {\n                        normal: {\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                    offset: 0,\n                                    color: 'rgba(108,80,243,0.3)'\n                                },\n                                {\n                                    offset: 1,\n                                    color: 'rgba(108,80,243,0)'\n                                }\n                            ], false),\n                            shadowColor: 'rgba(108,80,243, 0.9)',\n                            shadowBlur: 20\n                        }\n                    },\n                    data: [502.84, 205.97, 332.79, 281.55, 398.35, 214.02, ]\n                },\n                {\n                    name: '注册总量',\n                    type: 'line',\n                    // smooth: true, //是否平滑\n                    showAllSymbol: true,\n                    // symbol: 'image://./static/images/guang-circle.png',\n                    symbol: 'circle',\n                    symbolSize: 25,\n                    lineStyle: {\n                        normal: {\n                            color: \"#00ca95\",\n                            shadowColor: 'rgba(0, 0, 0, .3)',\n                            shadowBlur: 0,\n                            shadowOffsetY: 5,\n                            shadowOffsetX: 5,\n                        },\n                    },\n                    label: {\n                        show: true,\n                        position: 'top',\n                        textStyle: {\n                            color: '#00ca95',\n                        }\n                    },\n        \n                    itemStyle: {\n                        color: \"#00ca95\",\n                        borderColor: \"#fff\",\n                        borderWidth: 3,\n                        shadowColor: 'rgba(0, 0, 0, .3)',\n                        shadowBlur: 0,\n                        shadowOffsetY: 2,\n                        shadowOffsetX: 2,\n                    },\n                    tooltip: {\n                        show: false\n                    },\n                    areaStyle: {\n                        normal: {\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                    offset: 0,\n                                    color: 'rgba(0,202,149,0.3)'\n                                },\n                                {\n                                    offset: 1,\n                                    color: 'rgba(0,202,149,0)'\n                                }\n                            ], false),\n                            shadowColor: 'rgba(0,202,149, 0.9)',\n                            shadowBlur: 20\n                        }\n                    },\n                    data: [281.55, 398.35, 214.02, 179.55, 289.57, 356.14, ],\n                },\n            ]\n        };\n        optionXyMap01 = {\n            timeline: {\n                data: year,\n                axisType: 'category',\n                autoPlay: true,\n                playInterval: 3000,\n                left: '10%',\n                right: '10%',\n                bottom: '3%',\n                width: '80%',\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff',\n                        },\n                    },\n                },\n                symbolSize: 10,\n                lineStyle: {\n                    color: '#555',\n                },\n                checkpointStyle: {\n                    borderColor: '#777',\n                    borderWidth: 2,\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666',\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa',\n                    },\n                },\n            },\n            baseOption: {\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '1%',\n                    top: '15%',\n                    bottom: '10%',\n                    width: '20%',\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: {\n                        // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)', //hover颜色\n                        },\n                    },\n                },\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887],\n                    label: {\n                        emphasis: {\n                            show: true,\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [\n                                    {\n                                        offset: 0,\n                                        color: 'rgba(147, 235, 248, 0)', // 0% 处的颜色\n                                    },\n                                    {\n                                        offset: 1,\n                                        color: 'rgba(147, 235, 248, .2)', // 100% 处的颜色\n                                    },\n                                ],\n                                globalCoord: false, // 缺省为 false\n                            },\n                            shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10,\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0,\n                        },\n                    },\n                },\n            },\n            options: [],\n        };\n\n        for (var n = 0; n < year.length; n++) {\n            optionXyMap01.options.push({\n                backgroundColor: '#013954',\n                title: [\n                    {\n                        text: '一线城市近七年年平均房价',\n                        left: '20%',\n                        top: '7%',\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 25,\n                        },\n                    },\n                    {\n                        id: 'statistic',\n                        text: year[n] + '年房价（元/平方米）',\n                        left: '80%',\n                        top: '8%',\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 25,\n                        },\n                    },\n                ],\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false,\n                    },\n                    axisLine: {\n                        show: true,\n                    },\n                    axisTick: {\n                        show: false,\n                    },\n                    axisLabel: {\n                        margin: 2,\n                        textStyle: {\n                            color: '#aaa',\n                        },\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    //  name: 'TOP 20',\n                    nameGap: 16,\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd',\n                        },\n                    },\n                    data: categoryData[n],\n                },\n\n                series: [\n                    //地图\n                    {\n                        type: 'map',\n                        map: 'china',\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: true, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: true,\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff',\n                                },\n                            },\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7',\n                            },\n                        },\n                        animation: false,\n                        data: mapData,\n                    },\n                    //地图中闪烁的点\n                    {\n                        //  name: 'Top 5',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(\n                            mapData[n]\n                                .sort(function (a, b) {\n                                    return b.value - a.value;\n                                })\n                                .slice(0, 20)\n                        ),\n                        symbolSize: function (val) {\n                            return val[2] / 1200;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke',\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true,\n                            },\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                                shadowBlur: 10,\n                                shadowColor: colors[colorIndex][n],\n                            },\n                        },\n                        zlevel: 1,\n                    },\n                    //柱状图\n                    {\n                        zlevel: 1.5,\n                        type: 'bar',\n                        symbol: 'none',\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                            },\n                        },\n                        data: barData[n],\n                    },\n                ],\n            });\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});\n","html":"","externalScripts":"","updaterUID":"obd-oNCF_U4olqrFdRugM_xyQjQzUkg6qCx","theme":"","layout":"","viewCount":0,"userName":"S***T","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xRtGd8pZkm.png?v=1639500416508","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"S***T"}}