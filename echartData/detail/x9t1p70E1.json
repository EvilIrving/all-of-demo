{"status":0,"data":{"cid":"x9t1p70E1","authorUid":"bd-2856137297","authorUserName":"落***青","title":"今年失控情况","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-11-13T01:50:20.000Z","lastUpdateTime":"2019-11-13T01:50:20.000Z","auth":2,"uid":"bd-2856137297","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-13T06:15:45.000Z","code":"var data = [\n        ['2019-01',null],\n        ['2019-02',19,0,0,100],\n        ['2019-03',11,10,47.62,52.38],\n        ['2019-04',57,5,8.06,91.94],\n        ['2019-05',20,0,0,100],\n        ['2019-06',99,20,16.81,83.19],\n        ['2019-07',47,18,27.69,72.31],\n        ['2019-08',63,1,1.56,98.44],\n        ['2019-09',62,3,4.62,95.38],\n        ['2019-10',56,4,6.67,93.33],\n        ['2019-11',null],\n        ['2019-12',null],\n    ]\n    \n    function outZero(data){\n        if(data.indexOf('0') > -1){\n            return data.split('0')[1]\n        }else{\n            return data;\n        }\n    }\n    \n    var normalData = [];//正常数据\n    var outControlData = [];//失控数据\n    \n    data.forEach(function(v,i){\n        var noramlDataItem = {\n            name:outZero(v[0].split('-')[1]) +'月',\n            value: v[4],\n            normalDataNum : v[1],\n            outControlDataNum: v[2],\n            normalDataPer: v[4],\n            outControlDataPer : v[3]\n        }\n        var outControlDataItem = {\n            name:outZero(v[0].split('-')[1]) +'月',\n            value: v[3],\n            normalDataNum : v[1],\n            outControlDataNum: v[2],\n            normalDataPer: v[4],\n            outControlDataPer : v[3]\n        }\n        normalData.push(noramlDataItem)\n        outControlData.push(outControlDataItem)\n    })\n\nconsole.log(normalData)\noption = {\n  \"title\": {\n    \"text\": \"今年失控情况\",\n    \"textStyle\": {\n      \"fontSize\": 16,\n      \"fontWeight\": 500,\n      \"color\": \"#475669\",\n      \"fontFamily\": \"Chinese Quote,-apple-system,BlinkMacSystemFont,Segoe UI,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Helvetica Neue,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol\",\n      \"fontFeatureSettings\": \"tnum\",\n      \"fontVariantNumeric\": \"tabular-nums\"\n    }\n  },\n  \"tooltip\": {\n    \"trigger\": \"axis\",\n    \"axisPointer\": {\n      \"type\": \"shadow\"\n    }\n  },\n  \"legend\": {\n    \"data\": [\n      \"正常数据\",\n      \"失控数据\"\n    ],\n    \"right\": 110\n  },\n  \"grid\": {\n    \"left\": 10,\n    \"right\": 15,\n    \"bottom\": \"3%\",\n    \"containLabel\": true\n  },\n  \"xAxis\": [\n    {\n      \"type\": \"category\",\n      \"axisTick\": {\n        \"show\": false\n      },\n      \"axisLine\": {\n        \"lineStyle\": {\n          \"color\": \"#707f96\"\n        }\n      },\n      \"data\": [\n        \"1月\",\n        \"2月\",\n        \"3月\",\n        \"4月\",\n        \"5月\",\n        \"6月\",\n        \"7月\",\n        \"8月\",\n        \"9月\",\n        \"10月\",\n        \"11月\",\n        \"12月\"\n      ]\n    }\n  ],\n  \"yAxis\": [\n    {\n      \"type\": \"value\",\n      \"axisLine\": {\n        \"show\": false\n      },\n      \"axisTick\": {\n        \"show\": false\n      },\n      min:0,\n      max:100,\n      \"axisLabel\": {\n        \"color\": \"#707f96\",\n        formatter:function(value,index){\n            return value  + '%';\n        }\n      },\n      \"splitLine\": {\n        \"lineStyle\": {\n          \"type\": \"dashed\"\n        }\n      }\n        \n    }\n  ],\n  \"series\": [\n    {\n      \"name\": \"正常数据\",\n      \"type\": \"bar\",\n      \"stack\": \"广告\",\n      \"color\": \"#80c0fe\",\n      \"barWidth\": 20,\n      \"data\": normalData\n    //   [\n    //     {\n    //       \"name\": \"1月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     },\n    //     {\n    //       \"name\": \"2月\",\n    //       \"value\": 487,\n    //       \"timeRange\": \"2019-02-12~2019-02-28\",\n    //       \"perVal\": 100\n    //     },\n    //     {\n    //       \"name\": \"3月\",\n    //       \"value\": 508,\n    //       \"timeRange\": \"2019-03-02~2019-03-21\",\n    //       \"perVal\": 91.7\n    //     },\n    //     {\n    //       \"name\": \"4月\",\n    //       \"value\": 1468,\n    //       \"timeRange\": \"2019-04-03~2019-04-30\",\n    //       \"perVal\": 95.57\n    //     },\n    //     {\n    //       \"name\": \"5月\",\n    //       \"value\": 562,\n    //       \"timeRange\": \"2019-05-01~2019-05-30\",\n    //       \"perVal\": 92.28\n    //     },\n    //     {\n    //       \"name\": \"6月\",\n    //       \"value\": 3026,\n    //       \"timeRange\": \"2019-06-01~2019-06-30\",\n    //       \"perVal\": 92.4\n    //     },\n    //     {\n    //       \"name\": \"7月\",\n    //       \"value\": 1737,\n    //       \"timeRange\": \"2019-07-01~2019-07-31\",\n    //       \"perVal\": 91.09\n    //     },\n    //     {\n    //       \"name\": \"8月\",\n    //       \"value\": 1824,\n    //       \"timeRange\": \"2019-08-01~2019-08-31\",\n    //       \"perVal\": 98.33\n    //     },\n    //     {\n    //       \"name\": \"9月\",\n    //       \"value\": 1788,\n    //       \"timeRange\": \"2019-09-01~2019-09-30\",\n    //       \"perVal\": 92.36\n    //     },\n    //     {\n    //       \"name\": \"10月\",\n    //       \"value\": 1639,\n    //       \"timeRange\": \"2019-10-01~2019-10-31\",\n    //       \"perVal\": 93.23\n    //     },\n    //     {\n    //       \"name\": \"11月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     },\n    //     {\n    //       \"name\": \"12月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     }\n    //   ]\n    },\n    {\n      \"name\": \"失控数据\",\n      \"type\": \"bar\",\n      \"stack\": \"广告\",\n      \"color\": \"#ffa5a5\",\n      \"barWidth\": 20,\n      \"data\": outControlData\n    //   [\n    //     {\n    //       \"name\": \"1月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     },\n    //     {\n    //       \"name\": \"2月\",\n    //       \"value\": 0,\n    //       \"timeRange\": \"2019-02-12~2019-02-28\",\n    //       \"perVal\": 0\n    //     },\n    //     {\n    //       \"name\": \"3月\",\n    //       \"value\": 46,\n    //       \"timeRange\": \"2019-03-02~2019-03-21\",\n    //       \"perVal\": 8.3\n    //     },\n    //     {\n    //       \"name\": \"4月\",\n    //       \"value\": 68,\n    //       \"timeRange\": \"2019-04-03~2019-04-30\",\n    //       \"perVal\": 4.43\n    //     },\n    //     {\n    //       \"name\": \"5月\",\n    //       \"value\": 47,\n    //       \"timeRange\": \"2019-05-01~2019-05-30\",\n    //       \"perVal\": 7.72\n    //     },\n    //     {\n    //       \"name\": \"6月\",\n    //       \"value\": 249,\n    //       \"timeRange\": \"2019-06-01~2019-06-30\",\n    //       \"perVal\": 7.6\n    //     },\n    //     {\n    //       \"name\": \"7月\",\n    //       \"value\": 170,\n    //       \"timeRange\": \"2019-07-01~2019-07-31\",\n    //       \"perVal\": 8.91\n    //     },\n    //     {\n    //       \"name\": \"8月\",\n    //       \"value\": 31,\n    //       \"timeRange\": \"2019-08-01~2019-08-31\",\n    //       \"perVal\": 1.67\n    //     },\n    //     {\n    //       \"name\": \"9月\",\n    //       \"value\": 148,\n    //       \"timeRange\": \"2019-09-01~2019-09-30\",\n    //       \"perVal\": 7.64\n    //     },\n    //     {\n    //       \"name\": \"10月\",\n    //       \"value\": 119,\n    //       \"timeRange\": \"2019-10-01~2019-10-31\",\n    //       \"perVal\": 6.77\n    //     },\n    //     {\n    //       \"name\": \"11月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     },\n    //     {\n    //       \"name\": \"12月\",\n    //       \"value\": null,\n    //       \"timeRange\": null,\n    //       \"perVal\": null\n    //     }\n    //   ]\n    }\n  ]\n}","html":"","externalScripts":"","updaterUID":"bd-2856137297","theme":"","layout":"","viewCount":105,"userName":"落***青","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9t1p70E1.png?v=1573625745345","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"落***青"}}