{"status":0,"data":{"cid":"xvWPpm7gtv","authorUid":"bd-1884180431","authorUserName":"z***e","title":"上海市地图","description":"上海市地图，市区统称为市区，加阴影有立体效果","latestVersion":2,"alwaysLatest":1,"createTime":"2019-05-29T09:46:15.000Z","lastUpdateTime":"2019-05-29T09:46:15.000Z","auth":2,"uid":"bd-1884180431","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-29T10:06:45.000Z","code":"\nvar uploadedDataURL = \"/asset/get/s/data-1559121640669-cC3-ztp_y.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('shanghai', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '上海市区': [121.430317, 31.222771],\n           '闵行区': [121.375972, 31.111658],\n        '宝山区': [121.489934, 31.398896],\n        '嘉定区': [121.250333, 31.383524],\n       '浦东新区': [121.567706, 31.245944],\n        '金山区': [121.330736, 30.724697],\n        '松江区': [121.223543, 31.03047],\n        '青浦区': [121.113021, 31.151209],\n        '奉贤区': [121.458472, 30.912345],\n        '崇明区': [121.397516, 31.626946],\n    }\n    var data =  [\n            {\n                name: '上海市区',\n                value: 85\n            },\n            {\n                name: '闵行区',\n                value: 70\n            }, {\n                name: '宝山区',\n                value: 75\n            }, {\n                name: '嘉定区',\n                value: 80\n            }, {\n                name: '浦东新区',\n                value: 78\n            }, {\n                name: '金山区',\n                value: 77\n            }, {\n                name: '松江区',\n                value: 79\n            }, {\n                name: '青浦区',\n                value: 85\n            }, {\n                name: '奉贤区',\n                value: 81\n            }, {\n                name: '崇明区',\n                value: 83\n            }];\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value)\n                });\n            }\n        }\n        return res;\n    };\n\n\n    option = {\n        backgroundColor: '#fff',\n        title: {\n            text: '上海市地图',\n            subtext: '市区统称为市区',\n            x: 'left',\n            textStyle: {\n                color: '#ccc'\n            }\n        },\n        tooltip: {\n            trigger: 'item',\n            backgroundColor: '#09bdb1',\n            borderColor: '#FFFFCC',\n            showDelay: 0,\n            hideDelay: 0,\n            enterable: true,\n            transitionDuration: 0,\n            extraCssText: 'z-index:100',\n            formatter: function(params, ticket, callback) {\n                //根据业务自己拓展要显示的内容\n                var res = \"\";\n                var name = params.name;\n                var value = params.value;\n                res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\n                return res;\n            }\n        },\n        legend: {\n            orient: 'vertical',\n            top: 'top',\n            left: 'right',\n            data: ['credit_pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        visualMap: { //颜色的设置  dataRange\n                show: false,\n                x: 'left',\n                y: 'center',\n                seriesIndex: [1],\n                min: 70,\n                max: 90,\n                text: ['高', '低'], // 文本，默认为数值文本\n                textStyle: {\n                    color: '#fff'\n                },\n                inRange: {\n                    color: ['#5cd2c3','#419bd3','#7a95d2','#5dcbdc','#838dcd','#5de9b1','#5dc6df','#5db8ea','#2bbc90','#5dc4e3']\n\n                }\n            },\n        geo: {\n           map: 'shanghai',\n                left: '350',\n                itemStyle: { //地图区域的多边形 图形样式\n                    color: '#fff',\n                    normal: { //是图形在默认状态下的样式\n                        label: {\n                            show: true, //是否显示标签\n                            textStyle: {\n                                color: '#ff0'\n                            },\n                        },\n\n                        borderWidth: 1,\n                        borderColor: 'rgba(37,124,169)',\n                        shadowColor: '#e8e8e8',\n                        shadowOffsetY: 15,\n                        shadowOffsetX: 8,\n\n                    },\n\n                },\n        },\n        series: [{\n                name: 'credit_pm2.5',\n                type: 'effectScatter',\n                left: '150',\n                coordinateSystem: 'geo',\n                data: convertData(data),\n                symbolSize: function(val) {\n                    return val[2] / 5;\n                },\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                hoverAnimation: true,\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'bottom',\n                        color:'#fff',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#10f9ff',\n                        shadowBlur: 0,\n                        shadowColor: '#05C3F9'\n                    }\n                },\n                zlevel: 1\n            }, {\n                type: 'map',\n                mapType: 'shanghai',\n                left: '350',\n                // zoom: 1.2,\n                roam: false, //是否开启鼠标缩放和平移漫游\n                itemStyle: { //地图区域的多边形 图形样式\n                    // color: ['rgb(11,85,142)', 'rgb(13,106,177)'],\n                    normal: { //是图形在默认状态下的样式\n                        label: {\n                            show: true, //是否显示标签\n                            textStyle: {\n                                color: 'transparent'\n                            },\n                        },\n                        borderWidth: 1,\n                        borderColor: '#28729f',\n                        areaColor: '#29b4b7',\n                    },\n                    emphasis: { //是图形在高亮状态下的样式,比如在鼠标悬浮或者图例联动高亮时\n                        label: {\n                            show: false,\n                            textStyle: {\n                                color: 'transparent'\n                            },\n                        },\n                        borderColor: '#28729f',\n                        areaColor: '#9ea9f7',\n                    }\n                },\n\n                data: data\n            }\n        ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.1/TweenMax.min.js ,https://code.createjs.com/1.0.0/easeljs.min.js","updaterUID":"bd-1884180431","theme":"","layout":"","viewCount":11144,"userName":"z***e","commentCount":3,"starCount":29,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvWPpm7gtv.png?v=1559124405972","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"z***e"}}