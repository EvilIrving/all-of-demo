{"status":0,"data":{"cid":"xVo3Qhf1-p","authorUid":"obd-oAc5r6yAgOjOqTkSLZbru0HDvV1RW7m","authorUserName":"季***_","title":"带动画效果饼图","description":"注意版本","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-07T08:29:47.000Z","lastUpdateTime":"2021-07-07T08:29:47.000Z","auth":2,"uid":"obd-oAc5r6yAgOjOqTkSLZbru0HDvV1RW7m","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-07-07T08:29:47.000Z","code":"let colorsList = ['#00FFFF','#FFB3FF','#FFA488', '#00BBFF','#E38EFF','#00FF99', '#0066FF','#FFAA33', '#B94FFF', '#FFDD55','#B088FF','#00FF00', '#FFFF33','#0000FF', '#5555FF',  '#BBFF00','#FFCCCC', '#77FF00', '#EE7700','#FF00FF','#008800','#FF44AA'];\r\nlet angle =0;\r\nlet pieChart=null;\r\n// let intervalPie=null;\r\n\r\nlet dataList =[\r\n            {name: '联网使用单位',value: parseInt(Math.random()*50)},\r\n            {name: '数据中心',value: parseInt(Math.random()*50)},\r\n            {name: '等级保护单位',value: parseInt(Math.random()*50)},\r\n            {name: '网络产品/服务厂商',value: parseInt(Math.random()*50)},\r\n            {name: '信息服务单位',value: parseInt(Math.random()*50)}\r\n        ]\r\n\r\noption = {\r\n    backgroundColor:'#003a82',\r\n    color: colorsList,\r\n    legend: {\r\n        // selectedMode: false, // 取消图例上的点击事件\r\n        type: 'plain',\r\n        icon: 'circle',\r\n        orient: 'vertical',\r\n        right: '10px',\r\n        bottom: '10px',\r\n        align: 'left',\r\n        itemGap: 15,\r\n        itemWidth: 10, // 设置宽度\r\n        itemHeight: 10, // 设置高度\r\n        symbolKeepAspect: false,\r\n        textStyle: {\r\n            color: '#3699e0',\r\n            rich: {\r\n                name: {\r\n                    verticalAlign: 'right',\r\n                    align: 'left',\r\n                    width: 35,\r\n                    fontSize: 12\r\n                },\r\n                value: {\r\n                    align: 'left',\r\n                    width: 60,\r\n                    fontSize: 12\r\n                },\r\n                count: {\r\n                    align: 'left',\r\n                    width: 80,\r\n                    fontSize: 12\r\n                },\r\n                upRate: {\r\n                    align: 'left',\r\n                    fontSize: 12,\r\n                    color: '#00cf90'\r\n                },\r\n                downRate: {\r\n                    align: 'left',\r\n                    fontSize: 12,\r\n                    color: '#ff5722'\r\n                }\r\n            }\r\n        },\r\n    },\r\n    series: [\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\r\n                        startAngle: (0 + angle) * Math.PI / 180,\r\n                        endAngle: (90 + angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\r\n                        startAngle: (180 + angle) * Math.PI / 180,\r\n                        endAngle: (270 + angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (270 + -angle) * Math.PI / 180,\r\n                        endAngle: (40 + -angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2,\r\n                        cy: api.getHeight() / 2,\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\r\n                        startAngle: (90 + -angle) * Math.PI / 180,\r\n                        endAngle: (220 + -angle) * Math.PI / 180\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",\r\n                        fill: \"transparent\",\r\n                        lineWidth: 1.5\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (90 + -angle))\r\n                return {\r\n                    type: 'circle',\r\n                    shape: {\r\n                        cx: point.x,\r\n                        cy: point.y,\r\n                        r: 4\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",//粉\r\n                        fill: \"#0CD3DB\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: \"\",  //绿点\r\n            type: 'custom',\r\n            coordinateSystem: \"none\",\r\n            renderItem: function (params, api) {\r\n                let x0 = api.getWidth() / 2;\r\n                let y0 = api.getHeight() / 2;\r\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\r\n                let point = getCirlPoint(x0, y0, r, (270 + -angle))\r\n                return {\r\n                    type: 'circle',\r\n                    shape: {\r\n                        cx: point.x,\r\n                        cy: point.y,\r\n                        r: 4\r\n                    },\r\n                    style: {\r\n                        stroke: \"#0CD3DB\",      //绿\r\n                        fill: \"#0CD3DB\"\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n        {\r\n            name: '数量',\r\n            type: 'pie',\r\n            hoverAnimation: false,\r\n            radius: ['40%', '55%'],\r\n            center: ['50%', '50%'],\r\n            data: dataList,\r\n            label: {\r\n                textStyle: {\r\n                    // color: '#4ff2c9',\r\n                },\r\n                normal: {\r\n                    show: false,\r\n                    position: 'center',\r\n                    formatter: '{text|{b}}\\n{c}',\r\n                    rich: {\r\n                        text: {\r\n                            align: 'center',\r\n                            verticalAlign: 'middle',\r\n                            padding: 8,\r\n                            fontSize: 12\r\n                        },\r\n                        value: {\r\n                            align: 'center',\r\n                            verticalAlign: 'middle',\r\n                            fontSize: 40\r\n                        }\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        fontSize: '12'\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: true\r\n                }\r\n            }\r\n        },\r\n\r\n    ]\r\n};\r\n \r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n    return {\r\n        x: x1,\r\n        y: y1\r\n    }\r\n}\r\n\r\nlet timeIntervalPie = setInterval(() => {\r\n    drawTimeIntervalPie()\r\n}, 100);\r\n\r\nfunction drawTimeIntervalPie() {\r\n    angle = angle + 3;\r\n    myChart.setOption(option, true);\r\n}\r\n timeIntervalPie;\r\n","html":"","externalScripts":"","updaterUID":"obd-oAc5r6yAgOjOqTkSLZbru0HDvV1RW7m","theme":"","layout":"","viewCount":0,"userName":"季***_","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xVo3Qhf1-p.png?v=1625646587379","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie"],"customTags":[],"updaterUserName":"季***_"}}