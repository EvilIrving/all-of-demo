{"status":0,"data":{"cid":"xoFmRAIeoU","authorUid":"obd-oCucXlPWzxnFF3gwtXXjxGdSbbq9M33","authorUserName":"183*****796","title":"立体堆叠柱状图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2021-01-15T10:05:35.000Z","lastUpdateTime":"2021-01-15T10:05:35.000Z","auth":2,"uid":"obd-oCucXlPWzxnFF3gwtXXjxGdSbbq9M33","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-21T07:29:02.000Z","code":"var legends = ['重大风险','较大风险','一般风险','低风险'];\r\nvar name = ['综合风险','瓦斯风险','冲击地压风险','水害风险'];\r\nvar data1 = [1, 5, 4, 1];\r\nvar data2 = [14, 12, 16, 8];\r\nvar data3 = [36, 24, 34, 28];\r\nvar data4 = [56, 33, 37, 44];\r\nvar color = [ {\r\n    type: \"linear\",\r\n    x: 0,\r\n    x2: 1,\r\n    y: 0,\r\n    y2: 0,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: \"#dc0707\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#dc0707\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#af0808\",\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"#af0808\",\r\n        },\r\n    ],\r\n},{\r\n    type: \"linear\",\r\n    x: 0,\r\n    x2: 1,\r\n    y: 0,\r\n    y2: 0,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: \"#f67c20\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#f67c20\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#cc681e\",\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"#cc681e\",\r\n        },\r\n    ],\r\n},{\r\n    type: \"linear\",\r\n    x: 0,\r\n    x2: 1,\r\n    y: 0,\r\n    y2: 0,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: \"#fde008\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#fde008\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#c7b20e\",\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"#c7b20e\",\r\n        },\r\n    ],\r\n},{\r\n    type: \"linear\",\r\n    x: 0,\r\n    x2: 1,\r\n    y: 0,\r\n    y2: 0,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: \"#54b4fa\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#54b4fa\",\r\n        },\r\n        {\r\n            offset: 0.5,\r\n            color: \"#0592f9\",\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"#0592f9\",\r\n        },\r\n    ],\r\n}];\r\nvar barWidth = 30;\r\nvar constData2 = [];\r\nvar constData3 = [];\r\nvar constData4 = [];\r\nvar showData = [];\r\nfor (var i = 0; i < data1.length; i++) {\r\n    constData2[i] = data1[i] + data2[i];\r\n    constData3[i] = data1[i] + data2[i] + data3[i];\r\n    constData4[i] = data1[i] + data2[i] + data3[i] + data4[i];\r\n    if (data1[i] <= 0) {\r\n        showData.push({\r\n            value: 0.1,\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: \"#f67c20\",\r\n                    borderWidth: 2,\r\n                    color: \"#f67c20\",\r\n                },\r\n            },\r\n        });\r\n    } else {\r\n        if (data2[i] > 0) {\r\n            showData.push({\r\n                value: data1[i],\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: \"#f67c20\", \r\n                        borderWidth: 2,\r\n                        color: \"#f67c20\",\r\n                    },\r\n                },\r\n            });\r\n        } else {\r\n            showData.push({\r\n                value: data1[i],\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: \"#fde008\",\r\n                        borderWidth: 2,\r\n                        color: \"#fde008\",\r\n                    },\r\n                },\r\n            });\r\n        }\r\n    }\r\n}\r\nvar option = {\r\n    tooltip: {\r\n        trigger: \"axis\"\r\n    },\r\n    legend: {\r\n        data: legends,\r\n        selectedMode: false,\r\n        show: true\r\n    },\r\n    xAxis: {\r\n        data: name,\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            color: '#a4a4a4'\r\n        },\r\n    },\r\n    yAxis: {\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine:{\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            color: \"#a4a4a4\"\r\n        }\r\n    },\r\n    series: [{\r\n            z: 1,\r\n            name: legends[0],\r\n            type: \"bar\",\r\n            barWidth: barWidth,\r\n            stack: \"总量\",\r\n            color: color[0],\r\n            data: data1,\r\n        },\r\n        {\r\n            z: 2,\r\n            name: legends[1],\r\n            type: \"bar\",\r\n            barWidth: barWidth,\r\n            stack: \"总量\",\r\n            color: color[1],\r\n            data: data2\r\n        },\r\n        {\r\n            z: 3,\r\n            name: legends[2],\r\n            type: \"bar\",\r\n            barWidth: barWidth,\r\n            stack: \"总量\",\r\n            color: color[2],\r\n            data: data3\r\n        },\r\n        {\r\n            z: 4,\r\n            name: legends[3],\r\n            type: \"bar\",\r\n            barWidth: barWidth,\r\n            stack: \"总量\",\r\n            color: color[3],\r\n            data: data4\r\n        },\r\n        {\r\n            z: 5,\r\n            type: \"pictorialBar\",\r\n            data: data1,\r\n            symbol: \"diamond\",\r\n            symbolOffset: [\"0%\", \"50%\"],\r\n            symbolSize: [barWidth, 10],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[0],\r\n                },\r\n            },\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n        },\r\n        {\r\n            z: 6,\r\n            type: \"pictorialBar\",\r\n            data: constData2,\r\n            symbolPosition: \"end\",\r\n            symbol: \"diamond\",\r\n            symbolOffset: [\"0%\", \"-50%\"],\r\n            symbolSize: [barWidth, 10],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[1],\r\n                },\r\n            },\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n        },\r\n        {\r\n            z: 7,\r\n            type: \"pictorialBar\",\r\n            data: constData3,\r\n            symbolPosition: \"end\",\r\n            symbol: \"diamond\",\r\n            symbolOffset: [\"0%\", \"-50%\"],\r\n            symbolSize: [barWidth, 10],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[2],\r\n                },\r\n            },\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n        },\r\n        {\r\n            z: 8,\r\n            type: \"pictorialBar\",\r\n            data: constData4,\r\n            symbol: \"diamond\",\r\n            symbolPosition: \"end\",\r\n            symbolOffset: [\"0%\", \"-50%\"],\r\n            symbolSize: [barWidth, 10],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: color[3],\r\n                },\r\n            },\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n        },\r\n        {\r\n            z: 9,\r\n            type: \"pictorialBar\",\r\n            symbolPosition: \"end\",\r\n            data: showData,\r\n            symbol: \"diamond\",\r\n            symbolOffset: [\"0%\", \"-50%\"],\r\n            symbolSize: [barWidth - 4, (10 * (barWidth - 4)) / barWidth],\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n        }\r\n    ],\r\n};","html":"","externalScripts":"","updaterUID":"obd-oCucXlPWzxnFF3gwtXXjxGdSbbq9M33","theme":"","layout":"","viewCount":169,"userName":"183*****796","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xoFmRAIeoU.png?v=1611214142281","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"183*****796"}}