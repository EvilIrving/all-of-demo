{"status":0,"data":{"cid":"xO1pyQxcas","authorUid":"bd-1298913600","authorUserName":"思***展","title":"山东省内部泵机销售图","description":"省内泵机销售情况总览","latestVersion":7,"alwaysLatest":1,"createTime":"2019-03-05T09:35:26.000Z","lastUpdateTime":"2019-03-05T09:35:26.000Z","auth":1,"uid":"bd-1298913600","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":4,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-26T16:33:10.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1505284886122-SkAzQUUcZ.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('shandong', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '朝阳':[120.22,41.8],\n        '丹东':[124.38,40.33],\n        '抚顺':[124.48,41.88],\n        '本溪':[125.12,41.30],\n        '铁岭':[124.03,42.828],\n        '大连':[122.00,39.62],\n        '营口':[122.43,40.27],\n        '鞍山':[123.28,40.47],\n        '辽阳':[123.17,41.27],\n        '沈阳':[123.03,42.10],\n        '盘锦':[122.07,41.12],\n        '锦州':[121.13,41.30],\n        '阜新':[121.57,42.32],\n        '葫芦岛':[120.33,40.62]\n    }\n    //后台接口返回数据\n    var data = [\n        {name: '朝阳', value: 23},\n        {name: '丹东', value: 22},\n        {name: '抚顺', value: 23},\n        {name: '本溪', value: 54},\n        {name: '铁岭', value: 12},\n        {name: '大连', value: 12},\n        {name: '营口', value: 54},\n        {name: '鞍山', value: 34},\n        {name: '辽阳', value: 64},\n        {name: '沈阳', value: 23},\n        {name: '盘锦', value: 40},\n        {name: '锦州', value: 55},\n        {name: '阜新', value: 43},\n        {name: '葫芦岛', value: 23}\n    ];\n    var max = 480, min = 9; \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n    option = {\n        backgroundColor: '#091C3D',\n        title: {\n            top:20,\n            text: '辽宁',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n        tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n        legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x:'right',\n            data:['pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        }, \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], \n            calculable: true,\n            seriesIndex: [1],\n            inRange: {}\n        },\n        geo: {\n            show: true,\n            map: 'shandong',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: 'transparent',\n                    borderColor: '#3fdaff',\n                    borderWidth: 2,\n                    shadowColor: 'rgba(63, 218, 255, 0.5)',\n                    shadowBlur: 30\n                },\n                emphasis: {\n                    areaColor: '#2B91B7',\n                }\n            }\n        },\n        series : [\n      {\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F4E925'\n                }\n            }\n        },\n         {\n            type: 'map',\n            map: 'shandong',\n            geoIndex: 0,\n            aspectScale: 0.75, \n            showLegendSymbol: false, \n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#FFFFFF',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7'\n                }\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: convertData(data.sort(function (a, b) {\n                return b.value - a.value;\n            }).slice(0, 5)),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F4E925',\n                    shadowBlur: 10,\n                    shadowColor: '#05C3F9'\n                }\n            },\n            zlevel: 1\n        },\n         \n    ],\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"bd-436493471","theme":"","layout":"","viewCount":1086,"userName":"思***展","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xO1pyQxcas.png?v=1580056390971","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"p***y"}}