{"status":0,"data":{"cid":"xH1MF7NDnG","authorUid":"bd-3055827877","authorUserName":"怒***8","title":"test","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-04-20T09:31:38.000Z","lastUpdateTime":"2018-04-20T09:31:38.000Z","auth":2,"uid":"bd-3055827877","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":1,"echartsVersion":"4.1.0","versionCreateTime":"2018-05-03T11:48:20.000Z","code":"var geoCoordMap = {\r\n        \"白云机场南-地铁站\":[\"113.303097\",\"23.38669\"],\r\n        \"昌岗-地铁站\":[\"113.276885\",\"23.090654\"],\r\n        \"车陂南-地铁站\":[\"113.389561\",\"23.11593\"],\r\n        \"大石-地铁站\":[\"113.321744\",\"23.017761\"],\r\n        \"大塘-地铁站\":[\"113.321677\",\"23.077974\"],\r\n        \"东山口-地铁站\":[\"113.295373\",\"23.12398\"],\r\n        \"番禺广场-地铁站\":[\"113.385642\",\"22.935482\"],\r\n        \"岗顶-地铁站\":[\"113.339601\",\"23.13488\"],\r\n        \"公园前-地铁站\":[\"113.264315\",\"23.125446\"],\r\n        \"广州火车站-地铁站\":[\"113.256603\",\"23.148143\"],\r\n        \"广州南站-地铁站\":[\"113.269125\",\"22.98898\"],\r\n        \"广州塔-地铁站\":[\"113.323618\",\"23.106375\"],\r\n        \"海珠广场-地铁站\":[\"113.265344\",\"23.114796\"],\r\n        \"汉溪长隆-地铁站\":[\"113.33017\",\"22.992931\"],\r\n        \"华师-地铁站\":[\"113.345349\",\"23.140306\"],\r\n        \"黄沙-地铁站\":[\"113.239856\",\"23.110524\"],\r\n        \"嘉禾望岗-地铁站\":[\"113.289243\",\"23.23746\"],\r\n        \"客村-地铁站\":[\"113.320331\",\"23.096197\"],\r\n        \"沥滘-地铁站\":[\"113.319077\",\"23.054898\"],\r\n        \"区庄-地铁站\":[\"113.296725\",\"23.134483\"],\r\n        \"厦滘-地铁站\":[\"113.320837\",\"23.038007\"],\r\n        \"石牌桥-地铁站\":[\"113.332124\",\"23.133135\"],\r\n        \"市桥-地铁站\":[\"113.361726\",\"22.949743\"],\r\n        \"坦尾-地铁站\":[\"113.218387\",\"23.125234\"],\r\n        \"体育西路-地铁站\":[\"113.321503\",\"23.131138\"],\r\n        \"天河客运站-地铁站\":[\"113.3436\",\"23.171\"],\r\n        \"万胜围-地铁站\":[\"113.384796\",\"23.097712\"],\r\n        \"五山-地铁站\":[\"113.351812\",\"23.152833\"],\r\n        \"西朗-地铁站\":[\"113.231978\",\"23.065437\"],\r\n        \"燕塘-地铁站\":[\"113.327132\",\"23.15998\"],\r\n        \"杨箕-地铁站\":[\"113.307563\",\"23.127543\"],\r\n        \"珠江新城-地铁站\":[\"113.321206\",\"23.119293\"]\r\n\r\n    };\r\n\r\n    var metroData = [\r\n        [{name:'白云机场南-地铁站',value:415}, {name:'昌岗-地铁站',value:205}],\r\n//        [{name:'昌岗-地铁站',value:95}, {name:'白云机场南-地铁站',value:95}],\r\n//\r\n//        [{name:'白云机场南-地铁站',value:95}, {name:'车陂南-地铁站',value:3000}],\r\n//        [{name:'车陂南-地铁站',value:95}, {name:'白云机场南-地铁站',value:95}],\r\n////\r\n//        [{name:'广州南站-地铁站',value:95}, {name:'燕塘-地铁站',value:5000}],\r\n//        [{name:'燕塘-地铁站',value:95}, {name:'广州南站-地铁站',value:90}],\r\n//\r\n//        [{name:'杨箕-地铁站',value:95}, {name:'海珠广场-地铁站',value:90}],\r\n\r\n\r\n    ];\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var dataItem = data[i];\r\n            var fromCoord = geoCoordMap[dataItem[0].name];\r\n            var toCoord = geoCoordMap[dataItem[1].name];\r\n            if (fromCoord && toCoord) {\r\n                res.push([{\r\n                    coord: fromCoord,\r\n                    value: dataItem[1].value//来源或流向修改\r\n                }, {\r\n                    coord: toCoord,\r\n                }]);\r\n            }\r\n        }\r\n        //console.log(res)\r\n        return res;\r\n\r\n    };\r\n\r\n    var outInPercentstr=[{color:'aqua', gt:0, lte:2000},{color:'lime', gt:2000, lte:4000},{color:'yellow', gt:4000, lte:6000},{color:'orange', gt:6000, lte:8000},{color:'#ff3333', gt:8000}];\r\n    var series = [];\r\n    [[\"广州市\", metroData]].forEach(function (item, i) {\r\n        series.push(\r\n                {\r\n                    name: '广州市',\r\n                    type: 'map',\r\n                    geoIndex: 0,\r\n                    tooltip: {\r\n                        show: true,\r\n                        formatter: function(params) {\r\n//                            console.log(params)\r\n//                            if(params.data.value!=null){\r\n//                                return params.seriesName+\"<br/>\"+params.data.name+\":\"+params.data.value;\r\n//                            }else{\r\n//                                return params.data.name;\r\n//                            }\r\n                        }\r\n                    },\r\n                    data: item[1].map(function (dataItem) {\r\n                        return {\r\n                            name: dataItem[1].name,\r\n                            value: dataItem[1].value\r\n                        };\r\n                    })\r\n                },\r\n                {//路径\r\n                    name: item[2],\r\n                    type: 'lines',\r\n                    symbol: ['none', 'none'], //'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'线两端的标记类型\r\n                    symbolSize : 20, //箭头大小\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0.1,\r\n                            opacity: 0.4,\r\n                            curveness: 0.3\r\n                        },\r\n                    },\r\n                    zlevel: 2,\r\n                    effect: {\r\n                        show: true, //是否显示特效\r\n                        period: 3,  //特效动画的时间，单位为 s\r\n                        symbol:'pin', //特效图形的类型\r\n                        constantSpeed: 60, //固定速度，大于0的值后会忽略 period 配置项\r\n                        symbolSize: 5,\r\n                        color: '#fff',\r\n                        shadowBlur: 8\r\n                    },\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0.1,\r\n                            curveness: 0.3\r\n                        }\r\n                    },\r\n                    data: convertData(item[1])\r\n                }\r\n\r\n\r\n    );\r\n        \r\n        var arrItem=item[1][\"0\"];\r\n        for(var k=0;k<arrItem.length;k++){\r\n             series.push({\r\n                    type: 'effectScatter',\r\n                    coordinateSystem: 'geo',\r\n                    zlevel: 2,\r\n                    rippleEffect: { //涟漪特效相关配置\r\n                        period:'4', //动画的时间\r\n                        scale:'4', //动画中波纹的最大缩放比例\r\n                        brushType: 'stroke'\r\n                    },\r\n                    label: { //图形上的城市文本标签\r\n                        normal: {\r\n                            show: true,\r\n                            position: 'right',\r\n                            formatter: '{b}',\r\n                            textStyle:{\r\n                                color:'#fff',\r\n                                fontStyle: 'normal',\r\n                                fontFamily: 'arial',\r\n                                fontSize: 12,\r\n                            }\r\n                        }\r\n                    },\r\n                    tooltip:{\r\n                        show:true,\r\n                        formatter:function(params){\r\n                            //console.log(params)\r\n                            var name = params.name.split(\"-\")[0];\r\n                            if( params.value[2] != null && params.value[2] != undefined && params.value[2] != 'NaN'){\r\n\r\n                                return name + \"：\" + params.value[2];\r\n                            }else{\r\n                                return name;\r\n                            }\r\n                        }\r\n                    },\r\n                    symbolSize: 8,//点大小\r\n                    data: item[1].map(function (dataItem) {\r\n                        return {\r\n                            name: dataItem[k].name,\r\n                            value: geoCoordMap[dataItem[k].name].concat([dataItem[k].value])\r\n                        };\r\n                    })\r\n                });\r\n        }\r\n       \r\n    });\r\n\r\n    option = {\r\n        backgroundColor: '#2b3a65',\r\n        tooltip : {  //提示组件\r\n            show: false,\r\n        },\r\n        legend:{show:false},\r\n        visualMap: {\r\n            type: 'piecewise',\r\n            splitNumber: 5,\r\n            calculable: true,\r\n            itemWidth: 20,\r\n            itemHeight: 16,\r\n            itemGap: 5,\r\n            align: 'left',\r\n            seriesIndex:['1','2','3'],\r\n            pieces:outInPercentstr,\r\n            right: 40,\r\n            bottom: 170,\r\n            textStyle: {\r\n                color: '#4ac7f5',\r\n                fontSize: 14,\r\n            }\r\n        },\r\n        geo: [{\r\n            map: 'china',\r\n            // top: 110,\r\n            // left:880,\r\n            z:1,\r\n            label: {\r\n                emphasis: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                    },\r\n                }\r\n            },\r\n            roam: true, //开启缩放或者平移\r\n            zoom: 1.3,  //缩放比例\r\n            itemStyle: {\r\n                normal: {\r\n//                    areaColor: '#267bee',\r\n                    areaColor: 'rgba(61,97,166,0.5)',\r\n                    borderWidth: 3,\r\n                    borderColor: 'rgba(108,136,216,0.9)'\r\n                },\r\n                emphasis: {\r\n                    areaColor: 'rgba(61,97,166,1)'\r\n                }\r\n            }\r\n        },{\r\n            //map: 'guangdong',\r\n            backgroundColor: '#2b3a65',\r\n            top: 339,\r\n            left:693,\r\n            z:0,\r\n            label: {\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                    },\r\n                }\r\n            },\r\n            roam:false, //开启缩放或者平移\r\n            zoom: 4.85,  //缩放比例\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#2b3a65',\r\n                    borderWidth: 1,\r\n                    borderColor: '#fff'\r\n                },\r\n                emphasis: {\r\n                    areaColor: 'transparent'\r\n                }\r\n            }\r\n        }],\r\n        series: series\r\n    };","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3055827877","theme":"","layout":"","viewCount":11138,"userName":"怒***8","commentCount":3,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xH1MF7NDnG.png?v=1525348100831","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","series-map","tooltip","visualMap"],"customTags":[],"updaterUserName":"怒***8"}}