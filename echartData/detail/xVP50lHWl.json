{"status":0,"data":{"cid":"xVP50lHWl","authorUid":"bd-1297937853","authorUserName":"颖***r","title":"合计","description":"获取总数，求出占比","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-25T06:38:06.000Z","lastUpdateTime":"2019-11-25T06:38:06.000Z","auth":2,"uid":"bd-1297937853","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-25T06:38:06.000Z","code":"var YQdata = [{\r\n        value: 335,\r\n        legendname: '种类01',\r\n        name: \"种类01\",\r\n        itemStyle: {\r\n            color: \"#f06acc\"\r\n        }\r\n    },\r\n    {\r\n        value: 310,\r\n        legendname: '种类02',\r\n        name: \"种类02\",\r\n        itemStyle: {\r\n            color: \"#822e6b\"\r\n        }\r\n    },\r\n    {\r\n        value: 234,\r\n        legendname: '种类03',\r\n        name: \"种类03\",\r\n        itemStyle: {\r\n            color: \"#f3d4a3\"\r\n        }\r\n    },\r\n    {\r\n        value: 154,\r\n        legendname: '种类04',\r\n        name: \"种类04\",\r\n        itemStyle: {\r\n            color: \"#68cc6d\"\r\n        }\r\n    },\r\n    {\r\n        value: 335,\r\n        legendname: '种类05',\r\n        name: \"种类05\",\r\n        itemStyle: {\r\n            color: \"#c2a597\"\r\n        }\r\n    },\r\n];\r\nvar textsum = 0;\r\nvar text = 0;\r\n(\r\n    function() {\r\n\r\n\r\n        for (var j = 0; j < YQdata.length; j++) {\r\n            text = YQdata[j].value;\r\n            textsum += text\r\n\r\n        }\r\n        return textsum;\r\n    }\r\n)();\r\n\r\n\r\n\r\noption = {\r\n    title: [{\r\n        text: '合计',\r\n        subtext: textsum + '个',\r\n        textStyle: {\r\n            fontSize: 20,\r\n            color: \"black\"\r\n        },\r\n        subtextStyle: {\r\n            fontSize: 15,\r\n            color: '#8C8C8C'\r\n        },\r\n        textAlign: \"center\",\r\n        x: '34.5%',\r\n        y: '46%',\r\n    }],\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: '{b}<br/>数量是：{c}<br/>占比：({d}%)'\r\n        // formatter: function(parms) {\r\n        //     var str = parms.seriesName + \"</br>\" +\r\n        //         parms.marker + \"\" + parms.data.legendname + \"</br>\" +\r\n        //         \"数量：\" + parms.data.value + \"</br>\" +\r\n        //         \"占比：\" + parms.percent + \"%\";\r\n        //     return str;\r\n        // }\r\n    },\r\n    legend: {\r\n        type: \"scroll\",\r\n        orient: 'vertical',\r\n        left: '70%',\r\n        align: 'left',\r\n        top: 'middle',\r\n        textStyle: {\r\n            color: '#8C8C8C',\r\n        },\r\n        height: 250,\r\n        formatter: function(name) {\r\n            var sum = 0;\r\n            var amount = 0;\r\n            for (var i = 0; i < YQdata.length; i++) {\r\n                sum += YQdata[i].value;\r\n                if (name == YQdata[i].name) {\r\n                    amount = YQdata[i].value;\r\n                }\r\n                var Avg = (amount / sum * 100).toFixed(2);\r\n\r\n            }\r\n\r\n            return name + \"   \" + Avg + \"%   \" + amount + \"笔\";\r\n            // return sum\r\n        },\r\n\r\n    },\r\n    series: [{\r\n        name: '',\r\n        type: 'pie',\r\n        center: ['35%', '50%'],\r\n        radius: ['30%', '40%'],\r\n        clockwise: false, //饼图的扇区是否是顺时针排布\r\n        avoidLabelOverlap: false,\r\n        label: {\r\n            normal: {\r\n                position: 'inner',\r\n                show: false,\r\n                // show: true,\r\n                // position: 'outter',\r\n                //  formatter:function (parms){\r\n                //      return parms.data.legendname\r\n                //  }\r\n            }\r\n        },\r\n        data: YQdata\r\n    }]\r\n};\r\n","html":"","externalScripts":"","updaterUID":"bd-1297937853","theme":"","layout":"","viewCount":100,"userName":"颖***r","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xVP50lHWl.png?v=1574663886321","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"颖***r"}}