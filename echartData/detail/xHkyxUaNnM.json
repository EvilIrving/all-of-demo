{"status":0,"data":{"cid":"xHkyxUaNnM","authorUid":"bd-3778831175","authorUserName":"m***i","title":"NY Buildings","description":"NY Buildings","latestVersion":4,"alwaysLatest":1,"createTime":"2018-04-18T13:19:35.000Z","lastUpdateTime":"2018-04-18T13:19:35.000Z","auth":2,"uid":"bd-3778831175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.1.0","versionCreateTime":"2019-01-09T10:41:57.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1534124434928-H1s9ZDCHm.png\";\n$.getJSON('/asset/get/s/data-1524056463493-H1PcbpN2z.json', function(buildingsGeoJSON) {\n    console.log(buildingsGeoJSON);\n    var builds = buildingsGeoJSON.map(function(feature) {\n        return {\n            \"type\": \"Feature\",\n            \"properties\": {\n                \"name\": Math.random().toString(),\n                \"height\": feature.height || 100\n            },\n            \"geometry\": {\n                \"type\": \"Polygon\",\n                \"coordinates\": [feature.polygon]\n            }\n        }\n    })\n    var map = {\n        \"features\": builds\n    }\n    console.log(map)\n    echarts.registerMap('buildings', map);\n    var regionsData = builds.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: Math.random() * 1,\n            height: feature.properties.height\n        };\n    });\n    console.log(regionsData)\n    myChart.setOption({\n        //   visualMap: {\n        //     show: true,\n        //     min: 0.4,\n        //     max: 200,\n        //     inRange: {\n        //         color: ['blue', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n        //     }\n        // },\n        maptalks3D: {\n            center: [-74.01164278497646, 40.70769573605318],\n            zoom: 16,\n            pitch: 55,\n            bearing: -10,\n            urlTemplate: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n            postEffect: {\n                enable: true,\n                FXAA: {\n                    enable: true\n                }\n            },\n            light: {\n                main: {\n                    intensity: 1,\n                    shadow: false,\n                    shadowQuality: 'high'\n                },\n                ambient: {\n                    intensity: 0.\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            }\n        },\n        series: [{\n            type: 'map3D',\n            coordinateSystem: 'maptalks3D',\n            map: 'buildings',\n            data: regionsData,\n            shading: 'realistic',\n            instancing: true,\n            silent: true,\n            itemStyle: {\n                color: '#FFFFFF',\n                borderWidth: 1\n            },\n            realisticMaterial: {\n                metalness: 1,\n                roughness: 0.4,\n                // textureTiling: 35,\n                // detailTexture: uploadedDataURL\n            }\n        }]\n    });\n});\n\nwindow.addEventListener('resize', function() {\n    myChart.resize();\n});","html":"","externalScripts":"https://cdn.jsdelivr.net/npm/maptalks@0.39.3/dist/maptalks.min.js,https://cdn.bootcss.com/echarts/4.1.0/echarts.min.js,https://deyihu.github.io/src/lib/echarts-gl.1.1.3.js?tdsourcetag=s_pctim_aiomsg,https://cdn.bootcss.com/jquery/2.0.3/jquery.min.js","updaterUID":"bd-3778831175","theme":"","layout":"","viewCount":858,"userName":"m***i","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHkyxUaNnM.png?v=1524057575905","isCustomThumbnail":1,"builtinTags":["category-work","maptalks3D","series-map3D"],"customTags":["echarts-gl"],"updaterUserName":"m***i"}}