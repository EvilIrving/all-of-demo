{"status":0,"data":{"cid":"x7YZ5x0A7M","authorUid":"bd-86379122","authorUserName":"x***m","title":"单级地图下钻","description":"单级地图下钻","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-27T08:49:53.000Z","lastUpdateTime":"2021-01-27T08:49:53.000Z","auth":2,"uid":"bd-86379122","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-27T08:49:53.000Z","code":"   var mapName = \"china\";\r\n   var chinaJson = echarts.getMap(mapName).geoJson;\r\n\r\n   //注册地图 -- 包含下一级\r\n   function registerAllMap(mapName, mapJson) {\r\n       echarts.registerMap(mapName, mapJson);\r\n       $.each(mapJson.features, function() {\r\n           echarts.registerMap(this.properties.name, {\r\n               \"type\": \"FeatureCollection\",\r\n               \"features\": [this]\r\n           })\r\n       })\r\n   }\r\n   registerAllMap(mapName, chinaJson);\r\n   //地图 配置项\r\n   function getMapOption(mapName) {\r\n       var geoCoordsMap = {};\r\n       var mapData = echarts.getMap(mapName).geoJson;\r\n       $.each(mapData.features, function() {\r\n           geoCoordsMap[this.properties.name] = this.properties.cp;\r\n       });\r\n       //地图数据 - 模拟数据\r\n\r\n       var seriesData = [];\r\n       $.each(mapData.features, function() {\r\n           seriesData.push({\r\n               name: this.properties.name,\r\n               value: 1\r\n           });\r\n       });\r\n\r\n       var convertData = function(data) {\r\n           var scatterData = [];\r\n           for (var i = 0; i < data.length; i++) {\r\n               var geoCoords = geoCoordsMap[data[i].name];\r\n               if (geoCoords) {\r\n                   var obj = {\r\n                       name: data[i].name,\r\n                       value: geoCoords.concat(data[i].value)\r\n                   };\r\n                   scatterData.push(obj);\r\n               }\r\n           }\r\n           return scatterData;\r\n       };\r\n       var aspectScale = 0.85;\r\n\r\n       var zoom = 0.6;\r\n       return {\r\n\r\n           title: {\r\n               text: mapName,\r\n               left: 'center'\r\n           },\r\n           toolbox: {\r\n               feature: {\r\n                   myBack: {\r\n                       show: false,\r\n                       title: '返回',\r\n                       icon: 'path://M473.2 276.9v-133c-4-18.4-11.7-27-20.2-30.3-17.2-6.7-37.8 8.5-37.8 8.5L95.9 395.4c-70.1 48.4-4.8 84.7-4.8 84.7L405.5 751c62.9 46 67.7-24.2 67.7-24.2V603.4c319.3-99.2 449.9 297.5 449.9 297.5 12.1 21.8 19.3 0 19.3 0 123.4-595-469.2-624-469.2-624z m0 0',\r\n                       iconStyle: {\r\n                           color: \"#1aaef6\",\r\n                           borderColor: \"#1aaef6\"\r\n                       },\r\n                       onclick: function() {\r\n                           var opt = getMapOption(mapName);\r\n                           opt.toolbox.feature.myBack.show = false;\r\n                           myChart.setOption(opt);\r\n                       }\r\n                   }\r\n               }\r\n           },\r\n           geo: {\r\n               map: mapName,\r\n               top: 0,\r\n               bottom: 0,\r\n               aspectScale: aspectScale,\r\n               zoom: zoom,\r\n               itemStyle: { //地图区域的多边形 图形样式\r\n                   normal: { //是图形在默认状态下的样式\r\n                       borderWidth: 1,\r\n                       borderColor: '#75cef9',\r\n                       shadowColor: '#5daee2',\r\n                       shadowOffsetY: 10,\r\n                       shadowOffsetX: 8\r\n                   }\r\n\r\n               }\r\n           },\r\n\r\n           series: [{\r\n                   type: 'map',\r\n                   top: 0,\r\n                   z: 2,\r\n                   bottom: 0,\r\n                   mapType: mapName,\r\n                   selectedMode: 'single',\r\n                   aspectScale: aspectScale,\r\n                   zoom: zoom,\r\n                   roam: false, //是否开启鼠标缩放和平移漫游\r\n                   label: {\r\n                       show: false\r\n                   },\r\n                   itemStyle: {\r\n                       borderWidth: 1,\r\n                       borderColor: '#75cef9',\r\n                       areaColor: {\r\n                           type: 'linear',\r\n                           x: 0,\r\n                           y: 0,\r\n                           x2: 0,\r\n                           y2: 800,\r\n                           colorStops: [{\r\n                               offset: 0,\r\n                               color: '#0770d5' // 0% 处的颜色\r\n                           }, {\r\n                               offset: 1,\r\n                               color: '#43bef6' // 100% 处的颜色\r\n                           }],\r\n                           global: true\r\n                       }\r\n\r\n                   },\r\n                   emphasis: {\r\n                       label: {\r\n                           show: false\r\n                       },\r\n                       itemStyle: {\r\n                           areaColor: '#ff9a2c'\r\n                       }\r\n                   },\r\n                   data: seriesData\r\n               },\r\n               {\r\n                   name: 'Top 3',\r\n                   type: 'effectScatter',\r\n                   coordinateSystem: 'geo',\r\n                   symbolSize: 4,\r\n                   z: 3,\r\n                   label: {\r\n                       show: true,\r\n                       position: \"right\",\r\n                       color: '#abfffc',\r\n                       fontSize: 14,\r\n                       formatter: '{b}',\r\n                       offset: [5, 0]\r\n                   },\r\n                   rippleEffect: {\r\n                       brushType: 'fill',\r\n                       scale: 8\r\n                   },\r\n                   itemStyle: {\r\n                       color: '#01fafe'\r\n                   },\r\n                   emphasis: {\r\n                       label: {\r\n                           color: '#092550'\r\n                       }\r\n                   },\r\n                   silent: 1,\r\n                   data: convertData(seriesData)\r\n               }\r\n           ]\r\n       };\r\n   }\r\n\r\n   option = getMapOption(mapName);\r\n\r\n   //地图切换事件\r\n   myChart.on(\"mapselectchanged\", function(e) {\r\n       var name = e.batch[0].name;\r\n       if (e.batch[0].selected[name]) {\r\n           var opt = getMapOption(name);\r\n           opt.toolbox.feature.myBack.show = true;\r\n           myChart.setOption(opt);\r\n\r\n       }\r\n   });","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-86379122","theme":"","layout":"","viewCount":590,"userName":"x***m","commentCount":1,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x7YZ5x0A7M.png?v=1611737393351","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","title","toolbox"],"customTags":[],"updaterUserName":"x***m"}}