{"status":0,"data":{"cid":"xuIPjP5Bo1","authorUid":"bd-138257330","authorUserName":"o***5","title":"各渠道交易占比","description":"自定义系列","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-23T09:20:37.000Z","lastUpdateTime":"2019-08-23T09:20:37.000Z","auth":2,"uid":"bd-138257330","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-23T09:20:37.000Z","code":"\ngetBackgroundImage()\n\nlet angle = 0;//角度，用来做简单的动画效果的\n\noption = {\n    //backgroundColor: \"transparent\",\n    title: {\n        text: \"各渠道交易占比\",\n        textStyle:{\n            color:\"white\",\n            fontSize:40\n        },\n        left:\"right\",\n        top:10\n        \n    },\n    legend: {\n        type: \"plain\",\n        orient: \"vertical\",\n        right: 0,\n        top: \"10%\",\n        align: \"auto\",\n        data: [{\n            name: '快捷支付',\n            icon: \"circle\"\n        }, {\n            name: '个人网银&手机银行',\n            icon: \"circle\"\n        }, {\n            name: '自助设备',\n            icon: \"circle\"\n        }, {\n            name: '资产负债',\n            icon: \"circle\"\n        }, {\n            name: '社交网络服务',\n            icon: \"circle\"\n        }, {\n            name: '支付结算',\n            icon: \"circle\"\n        }, {\n            name: '其他',\n            icon: \"circle\"\n        }],\n        textStyle: {\n            color: \"white\",\n            fontSize: 16,\n            padding: [10, 1, 10, 0]\n        },\n        selectedMode:false\n    },\n    series: [{\n            name: \"ring4\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.85,\n                        startAngle: (0+-angle) * Math.PI / 180,\n                        endAngle: (90+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"rgb(255, 255, 255,0.2)\",\n                        fill: \"transparent\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                \n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.85,\n                        startAngle: (180+-angle) * Math.PI / 180,\n                        endAngle: (270+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"rgb(255, 255, 255,0.2)\",\n                        fill: \"transparent\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring4\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'ring',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8,\n                        r0: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.58\n                    },\n                    style: {\n                        stroke: \"transparent\",\n                        fill: new echarts.graphic.LinearGradient(0, 0.58, 0, 0.8, [{\n                                // 0% 处的颜色   \n                                offset: 0,\n                                color: 'rgb(255, 255, 255,0.1)'\n                            },\n                            {\n                                // 100% 处的颜色\n                                offset: 1,\n                                color: 'transparent'\n                            }\n                        ]),\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\n                        startAngle: (0+angle) * Math.PI / 180,\n                        endAngle: (90+angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#086d9f\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6,\n                        startAngle: (180+angle) * Math.PI / 180,\n                        endAngle: (270+angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#086d9f\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\n                        startAngle: (270+-angle) * Math.PI / 180,\n                        endAngle: (40+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#883d20\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65,\n                        startAngle: (90+-angle) * Math.PI / 180,\n                        endAngle: (220+-angle) * Math.PI / 180\n                    },\n                    style: {\n                        stroke: \"#883d20\",\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\n                let point = getCirlPoint(x0, y0, r, (90+-angle))\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4\n                    },\n                    style: {\n                        stroke: \"#883d20\",\n                        fill: \"#883d20\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"ring5\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.65;\n                let point = getCirlPoint(x0, y0, r, (270+-angle))\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4\n                    },\n                    style: {\n                        stroke: \"#883d20\",\n                        fill: \"#883d20\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: '访问来源',\n            type: 'pie',\n            radius: ['58%', '45%'],\n            avoidLabelOverlap: false,\n            color: [\"#0066ff\", \"#ff9c00\", \"#00fcff\", \"#00bc73\", \"#f33887\", \"#5e66ff\", \"#f0d700\"],\n            label: {\n                show: false\n            },\n            data: [{\n                    value: 66.5,\n                    name: '快捷支付'\n                },\n                {\n                    value: 21,\n                    name: '个人网银&手机银行'\n                },\n                {\n                    value: 4.8,\n                    name: '自助设备'\n                },\n                {\n                    value: 2.1,\n                    name: '资产负债'\n                },\n                {\n                    value: 1.8,\n                    name: '社交网络服务'\n                },\n                {\n                    value: 1.7,\n                    name: '支付结算'\n                },\n                {\n                    value: 6.95,\n                    name: '其他'\n                }\n            ],\n            silent: true\n        },\n        {\n            name: \"ring1\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'ring',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.37\n                    },\n                    style: {\n                        stroke: \"rgba(255,255,255,0.4)\",\n                        fill: \"transparent\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        {\n            name: '访问来源',\n            type: 'pie',\n            radius: ['36%', '32%'],\n            avoidLabelOverlap: false,\n            color: [\"#0066ff\", \"#ff9c00\", \"#00fcff\", \"#00bc73\", \"#f33887\", \"#5e66ff\", \"#f0d700\"],\n            label: {\n                show: false\n            },\n            data: [{\n                    value: 66.5,\n                    name: '快捷支付'\n                },\n                {\n                    value: 21,\n                    name: '个人网银&手机银行'\n                },\n                {\n                    value: 4.8,\n                    name: '自助设备'\n                },\n                {\n                    value: 2.1,\n                    name: '资产负债'\n                },\n                {\n                    value: 1.8,\n                    name: '社交网络服务'\n                },\n                {\n                    value: 1.7,\n                    name: '支付结算'\n                },\n                {\n                    value: 6.95,\n                    name: '其他'\n                }\n            ],\n            silent: true\n        },\n        {\n            name: \"ring2\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'ring',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.30\n                    },\n                    style: {\n                        stroke: \"#0885b5\",\n                        fill: \"transparent\",\n                        lineWidth: 2,\n                        lineDash: [15, 10]\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        {\n            name: \"ring3\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'ring',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.28\n                    },\n                    style: {\n                        stroke: \"rgba(16, 81, 167,.5)\",\n                        fill: \"transparent\"\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        {\n            name: \"ring4\",\n            type: 'custom',\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: 'ring',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.2\n                    },\n                    style: {\n                        stroke: \"#873c20\",\n                        fill: \"transparent\",\n                        //shadowColor:\"#ddd\",\n                        //shadowOffsetX:0,\n                        //shadowBlur:4\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }\n    ]\n};\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\n    let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\n    return {\n        x: x1,\n        y: y1\n    }\n}\n\n\n//设置背景图片\nfunction getBackgroundImage() {\n    let panel = document.getElementById(\"chart-panel\")\n    let bgImgSrc = \"http://i2.hdslb.com/bfs/archive/2da1ff7cd9e88497116a78146b39e73e967fb25e.jpg\";\n    panel.style.backgroundImage = \"url(\" + bgImgSrc + \")\";\n    panel.style.backgroundSize = \"cover\";\n}\n\n//随机数生成\nfunction random(m, n) {\n    return Math.floor(Math.random() * (m - n) + n);\n}\n\n\nfunction draw(){\n    angle = angle+3\n    myChart.setOption(option, true)\n   //window.requestAnimationFrame(draw);\n}\n//draw()\n\nsetInterval(function() {\n    //用setInterval做动画感觉有问题\n    draw()\n}, 100);\n","html":"","externalScripts":"","updaterUID":"bd-138257330","theme":"","layout":"","viewCount":1858,"userName":"o***5","commentCount":0,"starCount":11,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xuIPjP5Bo1.png?v=1566552037457","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"o***5"}}