{"status":0,"data":{"cid":"xfjfqQrNfl","authorUid":"obd-o2TqHWXMh8TZC804MFxeSGgA2DZje6J","authorUserName":"166******23","title":"","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-23T07:14:02.000Z","lastUpdateTime":"2021-07-23T07:14:02.000Z","auth":2,"uid":"obd-o2TqHWXMh8TZC804MFxeSGgA2DZje6J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-23T07:14:02.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1627024096296-_tJ8s6GhL.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024091242-CYZlH-scX.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024086943-DS0Ic5og7.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024081564-4lEeGIjG9.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024067515-PuwF60ukI.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024062683-6WOPl1qVe.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024057276-Y0egMVcKA.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024052815-h1Yxk0P40.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024046396-c1JX-yFBr.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627024000230-0L47lDNry.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023995954-9WbjsaCAE.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023990895-79OtNoo8U.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023986280--LGbAvZDW.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023978564-tRrYqrBW4.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023972588-i8Rd3ks7I.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023965175-hXsJCeYRP.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023959504-beIMMxssR.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023952764-LcCkAaNF2.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023941705-5FEDhLa74.json\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1627023901008-CGUcoBuTD.json\";\n\n   \n   \n    getDatas(Area, darwMapType) {\n        //获取本地Json数据\n      const areaList = require(\"@/assets/map/\" + Area + \".json\");\n      this.areaList = areaList;\n      let mapDatas = [];\n      areaList.features.map((item) => {\n        mapDatas.push({\n          name: item.properties.name,\n          level: item.properties.level,\n          adcode: item.properties.adcode,\n        });\n      });\n      this.mapData = mapDatas;\n      this.init();\n    },\n    init() {\n      var that = this;\n      var myChart = echarts.init(this.$refs.myCharts);\n      echarts.registerMap(\"cityMap\", this.areaList, {}); //加载自定义边界数据地图\n      var option = {\n        tooltip: {\n          trigger: \"item\",\n          formatter: (p) => {\n            let val = p.value;\n            if (window.isNaN(val)) {\n              val = 0;\n            }\n            let txtCon = \"<div style='text-align:center'>\" + p.name;\n            (\"</div>\");\n            return txtCon;\n          },\n        },\n        geo: {\n          type: \"map\",\n          map: \"cityMap\",\n          layoutCenter: [\"50%\", \"48%\"],\n          layoutSize: \"150%\",\n          show: true,\n          roam: true,\n          zoom: 0.65,\n          scaleLimit: {\n            max: 10,\n            min: 0,\n          },\n          label: {\n            normal: {\n              show: true, // 是否展示地区名称\n              textStyle: {\n                color: \"#fff\",\n              },\n            },\n            emphasis: {\n              show: true, // 滑过是否展示地区名称\n              textStyle: {\n                color: \"#fff\",\n              },\n            },\n          },\n          itemStyle: {\n            normal: {\n              show: true,\n              areaColor: \"#031525\", //地图区域的颜色 也可以颜色渐变如下的 areaColor\n              areaColor: {\n                type: \"radial\",\n                x: 0.5,\n                y: 0.5,\n                r: 0.8,\n                colorStops: [\n                  {\n                    offset: 0,\n                    color: \"rgba(147, 235, 248, .0)\", // 0% 处的颜色\n                  },\n                  {\n                    offset: 1,\n                    color: \"rgba(147, 235, 248, .2)\", // 100% 处的颜色\n                  },\n                ],\n                globalCoord: false, // 缺省为 false\n              },\n              borderColor: \"#0CD5DD\", //边界线颜色\n              borderWidth: \"1\", //边界线的宽度\n            },\n            emphasis: {\n              // 鼠标移入时区域的样式\n              areaColor: \"#2AB8FF\",\n              borderWidth: 0,\n              color: \"green\",\n            },\n          },\n        },\n        series: [\n          {\n            name: \"点\",\n            type: \"scatter\",\n            coordinateSystem: \"geo\",\n            symbol: \"pin\", //气泡\n            symbolSize: [40, 40],\n            label: {\n              normal: {\n                show: true,\n                formatter(params) {\n                  return params.dataIndex + 1;\n                },\n                textStyle: {\n                  color: \"#fff\",\n                  fontSize: 9,\n                },\n              },\n            },\n            itemStyle: {\n              normal: {\n                show: true,\n                color: function (params) {\n                  return params.value[2] == 2 ? \"#FF0000\" : \"\t#32CD32\";\n                }, //标志颜色\n              },\n            },\n            zlevel: 1,\n            data: this.scatterData,\n          },\n          {\n            type: \"map\",\n            map: \"cityMap\",\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n              normal: {\n                show: true,\n              },\n              emphasis: {\n                show: true,\n                textStyle: {\n                  color: \"#fff\",\n                },\n              },\n            },\n            // roam: true,\n            itemStyle: {\n              normal: {\n                areaColor: \"#031525\",\n                borderColor: \"#3B5077\",\n              },\n              emphasis: {\n                areaColor: \"#2B91B7\",\n              },\n            },\n            animation: true,\n            data: this.mapData,\n          },\n        ],\n      };\n      myChart.setOption(option);\n      myChart.on(\"click\", function (param) {\n        // console.log(param);\n        //点击各个监测点事件\n        // if(param.componentSubType==\"scatter\"){\n        // }\n        var Area = param.data.adcode; //获取行政区划代码\n        var darwMapType = param.data.adcode; //获取地市名\n        that.getDatas(Area, darwMapType);\n      });\n    },\n    //请求后端拿数据\n    getPointList() {\n      getData().then((res) => {\n        this.pointList = res.data;\n        this.pointList.map((item) => {\n          this.scatterData.push({\n            name: item.pointName,\n            value: [item.longitude, item.latitude, item.isAlarm],\n          });\n        });\n        this.getDatas(410000, \"河南\");\n      });\n    },","html":"","externalScripts":"","updaterUID":"obd-o2TqHWXMh8TZC804MFxeSGgA2DZje6J","theme":"","layout":"","viewCount":0,"userName":"166******23","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfjfqQrNfl.png?v=1627024442232","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"166******23"}}