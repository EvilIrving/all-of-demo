{"status":0,"data":{"cid":"x_x36kOkap","authorUid":"obd-o2KaQJ9_Xf4UdOrP8h_WSCj5IPN5J6H","authorUserName":"q***9","title":"散点图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-14T02:03:46.000Z","lastUpdateTime":"2021-05-14T02:03:46.000Z","auth":2,"uid":"obd-o2KaQJ9_Xf4UdOrP8h_WSCj5IPN5J6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-14T02:03:46.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1528971808162-BkOXf61WX.json';\r\n\r\n/**\r\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\r\n\r\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\r\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\r\n\r\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\r\n\r\n并且加了pin气泡图标以示数值大小\r\n*/\r\nvar max = 6000,\r\n    min = 1;\r\nvar maxSize4Pin = 100,\r\n    minSize4Pin = 1;\r\nvar points = [\r\n    {\r\n        value: [118.31, 26.07, 500], //福建\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [113.98, 23.52, 500], //广东\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [113.46, 34.25, 500], //河南\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [112.29, 30.98, 500], //湖北\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [112.08, 27.79, 500], //湖南\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [120.26, 32.54, 500], //江苏\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [123.42, 41.29, 500], //辽宁\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [118.01, 36.37, 500], //山东\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [101.71, 24.84, 500], //云南\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [128.34, 47.05, 500], //黑龙江\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [120.15, 29.28, 500], //浙江\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [114.05, 22.55, 1000, '深圳'], //深圳\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [108.93, 34.27, 1000, '西安'], //西安\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [113.9, 35.3, 1000, '新乡'], //新乡\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n    {\r\n        value: [112.93, 28.23, 1000, '长沙'], //长沙\r\n        itemStyle: {\r\n            color: '#f34e2b',\r\n        },\r\n    },\r\n];\r\n// var uploadedDataURL = \"/asset/get/s/data-1482909892121-BJ3auk-Se.json\";\r\nmyChart.showLoading();\r\nlet index = -1;\r\n\r\n$.getJSON(uploadedDataURL, function (geoJson) {\r\n    echarts.registerMap('china', geoJson);\r\n    myChart.hideLoading();\r\n    option = {\r\n        backgroundColor: '#BAD0DB',\r\n        /*   title: {\r\n               top: 20,\r\n               text: '“困难人数” - 杭州市',\r\n               subtext: '',\r\n               x: 'center',\r\n               textStyle: {\r\n                   color: '#ccc'\r\n               }\r\n           },*/\r\n\r\n        // tooltip: {\r\n        //     trigger: 'item',\r\n        //     formatter: function(params) {\r\n        //         console.log(params)\r\n        //             return params.name + ' : ' + params.value[2];\r\n        //     }\r\n        // },\r\n        /*visualMap: {\r\n           min: 0,\r\n           max: 1000000,\r\n           right: 100,\r\n           seriesIndex: 1,\r\n           type: 'piecewise',\r\n           bottom: 100,\r\n           textStyle: {\r\n             color: '#FFFF'\r\n           },\r\n           splitList: [\r\n             {\r\n               gt: 50000,\r\n               color: '#F5222D',\r\n               label: '困难人数大于5万人'\r\n             }, //大于5万人\r\n             {\r\n               gte: 30000,\r\n               lte: 50000,\r\n               color: '#FA541C ',\r\n               label: '困难人数3-5万人'\r\n             }, //3-5万人\r\n             {\r\n               gte: 10000,\r\n               lte: 30000,\r\n               color: '#FA8C16',\r\n               label: '困难人数1-3万人'\r\n             }, //1-3万人\r\n             {\r\n               lte: 10000,\r\n               color: '#fbe1d6',\r\n               label: '困难人数小于1万人'\r\n             }\r\n           ]\r\n         },*/\r\n\r\n        geo: {\r\n            map: 'china',\r\n            aspectScale: 0.75, //长宽比\r\n            zoom: 1.1,\r\n            roam: false,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: {\r\n                        type: 'radial',\r\n                        x: 0.5,\r\n                        y: 0.5,\r\n                        r: 0.8,\r\n                        colorStops: [\r\n                            {\r\n                                offset: 0,\r\n                                color: '#09132c', // 0% 处的颜色\r\n                            },\r\n                            {\r\n                                offset: 1,\r\n                                color: '#274d68', // 100% 处的颜色\r\n                            },\r\n                        ],\r\n                        globalCoord: true, // 缺省为 false\r\n                    },\r\n                    shadowColor: 'rgb(58,115,192)',\r\n                    shadowOffsetX: 0,\r\n                    shadowOffsetY: 0,\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2AB8FF',\r\n                    borderWidth: 0,\r\n                    color: 'green',\r\n                    label: {\r\n                        show: false,\r\n                    },\r\n                },\r\n            },\r\n            regions: [\r\n                {\r\n                    name: '南海诸岛',\r\n                    itemStyle: {\r\n                        areaColor: 'rgba(0, 10, 52, 1)',\r\n\r\n                        borderColor: 'rgba(0, 10, 52, 1)',\r\n                        normal: {\r\n                            opacity: 0,\r\n                            label: {\r\n                                show: false,\r\n                                color: '#009cc9',\r\n                            },\r\n                        },\r\n                    },\r\n                },\r\n                {\r\n                    name: '新疆',\r\n                    itemStyle: {\r\n                        areaColor: 'red',\r\n                        color: 'red',\r\n                    },\r\n                },\r\n            ],\r\n        },\r\n        series: [\r\n            {\r\n                type: 'map',\r\n                roam: false,\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                        },\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: 'rgb(183,185,14)',\r\n                        },\r\n                    },\r\n                },\r\n\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgb(147, 235, 248)',\r\n                        borderWidth: 1,\r\n                        areaColor: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.8,\r\n                            colorStops: [\r\n                                {\r\n                                    offset: 0,\r\n                                    color: '#A8CDE5', // 0% 处的颜色\r\n                                },\r\n                                {\r\n                                    offset: 1,\r\n                                    color: '#77BAE1', // 100% 处的颜色\r\n                                },\r\n                            ],\r\n                            globalCoord: true, // 缺省为 false\r\n                        },\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: 'rgb(46,229,206)',\r\n                        //    shadowColor: 'rgb(12,25,50)',\r\n                        borderWidth: 0.1,\r\n                    },\r\n                },\r\n                zoom: 1.1,\r\n                //     roam: false,\r\n                map: 'china', //使用\r\n                // data: this.difficultData //热力图数据   不同区域 不同的底色\r\n            },\r\n            {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                showEffectOn: 'render',\r\n                zlevel: 1,\r\n                rippleEffect: {\r\n                    brushType: 'stroke',\r\n                },\r\n                hoverAnimation: true,\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        color: '#FFE400',\r\n                        fontWeight: 'bold',\r\n                        position: 'right',\r\n                        formatter: function (para) {\r\n                            console.log(para);\r\n                            if (para.data.value[2] == 1000) return para.data.value[3];\r\n                            else return '';\r\n                        },\r\n                        rich: {\r\n                            cnNum: {\r\n                                fontSize: 13,\r\n                                color: '#D4EEFF',\r\n                            },\r\n                        },\r\n                    },\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.5,\r\n                            colorStops: [\r\n                                {\r\n                                    offset: 0,\r\n                                    color: 'rgba(5,80,151,0.2)',\r\n                                },\r\n                                {\r\n                                    offset: 0.8,\r\n                                    color: 'rgba(5,80,151,0.8)',\r\n                                },\r\n                                {\r\n                                    offset: 1,\r\n                                    color: 'rgba(0,108,255,0.7)',\r\n                                },\r\n                            ],\r\n                            global: false, // 缺省为 false\r\n                        },\r\n                    },\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: function (val) {\r\n                    console.log(val);\r\n                    if (val[2] === 0) {\r\n                        return 0;\r\n                    }\r\n                    var a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n                    var b = maxSize4Pin - a * max;\r\n                    return a * val[2] + b * 1.2;\r\n                },\r\n                data: points,\r\n            },\r\n        ],\r\n    };\r\n    myChart.setOption(option, true);\r\n});\r\n","html":"","externalScripts":"","updaterUID":"obd-o2KaQJ9_Xf4UdOrP8h_WSCj5IPN5J6H","theme":"","layout":"","viewCount":0,"userName":"q***9","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_x36kOkap.png?v=1620957826503","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map"],"customTags":[],"updaterUserName":"q***9"}}