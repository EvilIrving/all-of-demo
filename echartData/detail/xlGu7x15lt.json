{"status":0,"data":{"cid":"xlGu7x15lt","authorUid":"obd-oMhbaFPMuo2KxgAwAP9UGKskFf_si2S","authorUserName":"L***k","title":"郑和下西洋（第一次）","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-09-18T12:48:08.000Z","lastUpdateTime":"2021-09-20T01:56:45.000Z","auth":2,"uid":"obd-oMhbaFPMuo2KxgAwAP9UGKskFf_si2S","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.0.0","versionCreateTime":"2021-09-20T01:56:45.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1631966550207-Svu8lMvv0.json\";\n\n\n\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('worldMap', geoJson);\n    var chinaGeoCoordMap = {\n        //第一次下西洋\n        \"刘家港\":[121.283048,31.52082],\n        \"麻喏八歇国\":[113.230179,-7.761742],\n        \n    };\n    var chinaDatas = [\n        [{\n            name: '刘家港',\n            value: 0\n        }],\n        [{\n            name: '麻喏八歇国',\n            value: 0\n        }],\n        \n    ];\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var dataItem = data[i];\n            //动线起始点\n            var fromCoord = chinaGeoCoordMap[dataItem[0].name];\n            //动线结束点\n            var toCoord = [113.230179,-7.761742];\n            //起始点与结束点重合的处理办法\n            if (fromCoord && toCoord) {\n                res.push([{\n                    coord: fromCoord,\n                    value: dataItem[0].value\n                }, {\n                    coord: toCoord,\n                }]);\n            }\n        }\n        return res;\n    };\n    \n    var series = [];\n    [['麻喏八歇国', chinaDatas]].forEach(function(item, i) {\n        console.log(item)\n        series.push({\n                type: 'lines',\n                zlevel: 5,\n                effect: {\n                    show: true,\n                    period: 4, //箭头指向速度，值越小速度越快\n                    trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                    symbol: 'arrow', //箭头图标\n                    symbolSize: 5, //图标大小\n                },\n                lineStyle: {\n                    normal: {\n                        width: 1, //尾迹线条宽度\n                        opacity: 1, //尾迹线条透明度\n                        curveness: .3 //尾迹线条曲直度\n                    }\n                },\n                data: convertData(item[1])\n            }, {\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                zlevel: 2,\n                rippleEffect: { //涟漪特效\n                    period: 1, //动画时间，值越小速度越快\n                    brushType: 'stroke', //波纹绘制方式 stroke, fill\n                    scale: 4 //波纹圆环最大限制，值越大波纹越大\n                },\n                label: {\n                    normal: {\n                        show: true,\n                        position: 'right', //显示位置\n                        offset: [5, 0], //偏移设置\n                        formatter: function(params) { //圆环显示文字\n                            return params.data.name;\n                        },\n                        fontSize: 13\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                symbol: 'circle',\n                symbolSize: function(val) {\n                    return 5 + val[2] * 5; //圆环大小\n                },\n                itemStyle: {\n                    normal: {\n                        show: false,\n                        color: '#f00'\n                    }\n                },\n                data: item[1].map(function(dataItem) {\n                    return {\n                        name: dataItem[0].name,\n                        value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\n                    };\n                }),\n            },\n            //被攻击点\n            {\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                zlevel: 2,\n                rippleEffect: {\n                    period: 4,\n                    brushType: 'stroke',\n                    scale: 4\n                },\n                label: {\n                    //设置被攻击点的标注要素（字体）\n                    // normal: {\n                    //     show: true,\n                    //     position: 'right',\n                    //     //offset:[5, 0],\n                    //     color: '#0f0',\n                    //     formatter: '{b}',\n                    //     textStyle: {\n                    //         color: \"#0ff\"\n                    //     }\n                    // },\n                    emphasis: {\n                        show: true,\n                        color: \"#f60\"\n                    }\n                },\n                //绘制尾点的图表\n                symbol: 'pin',\n                symbolSize: 50,\n                data: [{\n                    name: item[0],\n                    value: chinaGeoCoordMap[item[0]].concat([10]),\n                }],\n            }\n        );\n    });\n\n    option = {\n        tooltip: {\n            trigger: 'item',\n            backgroundColor: 'rgba(166, 200, 76, 0.82)',\n            borderColor: '#FFFFCC',\n            showDelay: 0,\n            hideDelay: 0,\n            enterable: true,\n            transitionDuration: 0,\n            extraCssText: 'z-index:100',\n            formatter: function(params, ticket, callback) {\n                //根据业务自己拓展要显示的内容\n                var res = \"\";\n                var name = params.name;\n                var value = params.value[params.seriesIndex + 1];\n                res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\n                return res;\n            }\n        },\n        backgroundColor: \"#013954\",\n        visualMap: { //图例值控制\n            min: 0,\n            max: 1,\n            calculable: true,\n            show: true,\n            color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        geo: {\n            map: 'worldMap',\n            zoom: 1.2,\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            roam: true, //是否允许缩放\n            itemStyle: {\n                normal: {\n                    color: 'rgba(51, 69, 89, .5)', //地图背景色\n                    borderColor: '#516a89', //省市边界线00fcff 516a89\n                    borderWidth: 1\n                },\n                emphasis: {\n                    color: 'rgba(37, 43, 61, .5)' //悬浮背景\n                }\n            }\n        },\n        series: series\n    };\n\n    myChart.setOption(option);\n});\n","html":"","externalScripts":"","updaterUID":"obd-oMhbaFPMuo2KxgAwAP9UGKskFf_si2S","theme":"","layout":"","viewCount":0,"userName":"L***k","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xlGu7x15lt.png?v=1631969288404","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","tooltip","visualMap"],"customTags":["geo","json","map"],"updaterUserName":"L***k"}}