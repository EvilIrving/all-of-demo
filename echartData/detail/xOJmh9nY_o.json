{"status":0,"data":{"cid":"xOJmh9nY_o","authorUid":"bd-2268903234","authorUserName":"神经质Dusty521","title":"窗口人员在线","description":"通过柱状图展示用户在线情况","latestVersion":3,"alwaysLatest":1,"createTime":"2018-11-28T13:33:46.000Z","lastUpdateTime":"2018-11-28T13:33:46.000Z","auth":2,"uid":"bd-2268903234","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-04T02:02:12.000Z","code":"//获取当前日期\nfunction getNowFormatDate() {\n    var date = new Date();\n    var seperator1 = \"/\";\n    var year = date.getFullYear();\n    var month = date.getMonth() + 1;\n    var strDate = date.getDate();\n    if (month >= 1 && month <= 9) {\n        month = \"0\" + month;\n    }\n    if (strDate >= 0 && strDate <= 9) {\n        strDate = \"0\" + strDate;\n    }\n    var currentdate = year + seperator1 + month + seperator1 + strDate;\n    return currentdate;\n}\n\n\nvar data = [];\n//开始时间和结束时间\nvar endTime = getNowFormatDate() + ' 18:00';\nvar startTime = getNowFormatDate() + ' 8:00';\n\n//Y 坐标的值\nvar categories = ['王伟', '李明', '张三', '李四', '王五']\n// 人员状态\nvar types = [{\n        name: '在线',\n        color: '#46BCFF'\n    },\n    {\n        name: '离线',\n        color: '#FF5959'\n    },\n    {\n        name: '暂停',\n        color: '#D9D9D9'\n    },\n    {\n        name: '延时服务在线',\n        color: '#00FAFC'\n    }\n];\n//服务端获取数据组装数据\n\n// data.push({\n//     name: typeItem.name,\n//     value: [\n//         index,\n//         baseTime,\n//         baseTime += duration,\n//         duration\n//     ],\n//     itemStyle: {\n//         normal: {\n//             color: typeItem.color\n//         }\n//     }\n// });\n\n\n//模拟数据\ndata = [{\n        name: '在线',\n        value: [0, '2018/12/4 8:00', '2018/12/4 9:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [0, '2018/12/4 9:12', '2018/12/4 9:30'],\n        itemStyle: {\n            normal: {\n                color: '#FF5959'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [0, '2018/12/4 9:30', '2018/12/4 10:30'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n    {\n        name: '延时服务在线',\n        value: [0, '2018/12/4 10:30', '2018/12/4 19:00'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    },\n\n    {\n        name: '在线',\n        value: [1, '2018/12/4 8:00', '2018/12/4 9:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [1, '2018/12/4 9:12', '2018/12/4 9:30'],\n        itemStyle: {\n            normal: {\n                color: '#FF5959'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [1, '2018/12/4 9:30', '2018/12/4 10:30'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n    {\n        name: '延时服务在线',\n        value: [1, '2018/12/4 10:30', '2018/12/4 12:00'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [1, '2018/12/4 14:00', '2018/12/4 18:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [1, '2018/12/4 12:00', '2018/12/4 14:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n\n\n    {\n        name: '在线',\n        value: [2, '2018/12/4 8:00', '2018/12/4 9:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [2, '2018/12/4 9:12', '2018/12/4 9:30'],\n        itemStyle: {\n            normal: {\n                color: '#FF5959'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [2, '2018/12/4 9:30', '2018/12/4 10:30'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n    {\n        name: '延时服务在线',\n        value: [2, '2018/12/4 10:30', '2018/12/4 12:00'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [2, '2018/12/4 14:00', '2018/12/4 18:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [2, '2018/12/4 12:00', '2018/12/4 14:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [3, '2018/12/4 8:00', '2018/12/4 12:00'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [3, '2018/12/4 12:00', '2018/12/4 13:30'],\n        itemStyle: {\n            normal: {\n                color: '#FF5959'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [3, '2018/12/4 13:30', '2018/12/4 14:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n    {\n        name: '延时服务在线',\n        value: [3, '2018/12/4 14:00', '2018/12/4 14:02'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [3, '2018/12/4 14:02', '2018/12/4 17:12'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [3, '2018/12/4 17:12', '2018/12/4 18:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n\n\n    {\n        name: '在线',\n        value: [4, '2018/12/4 8:00', '2018/12/4 9:00'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [4, '2018/12/4 9:00', '2018/12/4 10:30'],\n        itemStyle: {\n            normal: {\n                color: '#FF5959'\n            }\n        }\n    },\n    {\n        name: '暂停',\n        value: [4, '2018/12/4 10:30', '2018/12/4 11:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    },\n    {\n        name: '延时服务在线',\n        value: [4, '2018/12/4 11:00', '2018/12/4 13:00'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [4, '2018/12/4 13:00', '2018/12/4 14:00'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n    {\n        name: '离线',\n        value: [4, '2018/12/4 14:00', '2018/12/4 15:00'],\n        itemStyle: {\n            normal: {\n                color: '#D9D9D9'\n            }\n        }\n    }, {\n        name: '延时服务在线',\n        value: [4, '2018/12/4 15:00', '2018/12/4 16:00'],\n        itemStyle: {\n            normal: {\n                color: '#00FAFC'\n            }\n        }\n    }, {\n        name: '在线',\n        value: [4, '2018/12/4 16:00', '2018/12/4 18:00'],\n        itemStyle: {\n            normal: {\n                color: '#46BCFF'\n            }\n        }\n    },\n\n]\n\n\nfunction renderItem(params, api) {\n    var categoryIndex = api.value(0);\n    var start = api.coord([api.value(1), categoryIndex]);\n    var end = api.coord([api.value(2), categoryIndex]);\n    var height = api.size([0, 1])[1] * 0.6;\n\n    return {\n        type: 'rect',\n        shape: echarts.graphic.clipRectByRect({\n            x: start[0],\n            y: start[1] - height / 2,\n            width: end[0] - start[0],\n            height: height\n        }, {\n            x: params.coordSys.x,\n            y: params.coordSys.y,\n            width: params.coordSys.width,\n            height: params.coordSys.height\n        }),\n        style: api.style()\n    };\n}\n\noption = {\n    //提示框组件\n    tooltip: {\n        formatter: function(params) {\n            //拼接显示参数\n            return params.marker + params.name + ' : ' + params.value[1] + ' - ' + params.value[2];\n        }\n    },\n\n    title: {\n        text: '',\n        left: 'center'\n    },\n    //图例相关属性\n    legend: {\n        data: types,\n        selectedMode: false,\n    },\n    //区域缩放 （请勿修改）\n    dataZoom: [{\n        type: 'slider',\n        filterMode: 'weakFilter',\n        showDataShadow: false,\n        top: 400,\n        height: 10,\n        borderColor: 'transparent',\n        backgroundColor: '#e2e2e2',\n        handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', // jshint ignore:line\n        handleSize: 20,\n        handleStyle: {\n            shadowBlur: 6,\n            shadowOffsetX: 1,\n            shadowOffsetY: 2,\n            shadowColor: '#aaa'\n        },\n        labelFormatter: ''\n    }, {\n        type: 'inside',\n        filterMode: 'weakFilter'\n    }],\n    //图表高\n    grid: {\n        height: 300\n    },\n    //X轴属性\n    xAxis: {\n        type: 'time',\n        min: startTime,\n        max: endTime,\n        scale: true\n\n    },\n    //Y轴属性\n    yAxis: {\n        data: categories\n    },\n    series: [{\n            name: types[0].name,\n            type: 'bar',\n            data: [],\n            color: '#46BCFF'\n        },\n        {\n            name: types[1].name,\n            type: 'bar',\n            data: [],\n            color: '#FF5959'\n        },\n        {\n            name: types[2].name,\n            type: 'bar',\n            data: [],\n            color: '#D9D9D9'\n        },\n        {\n            name: types[3].name,\n            type: 'bar',\n            data: [],\n            color: '#00FAFC'\n        },\n        {\n            type: 'custom',\n            //开发者自己提供图形渲染的逻辑。这个渲染逻辑一般命名为 renderItem\n            renderItem: renderItem,\n            itemStyle: {\n                normal: {\n                    //图形透明度\n                    opacity: 1.0\n                }\n            },\n            encode: {\n                // 表示维度 1、2映射到 x 轴。\n                x: [1, 2],\n                y: 0,\n            },\n            data: data\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-2268903234","theme":"","layout":"","viewCount":214,"userName":"神经质Dusty521","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOJmh9nY_o.png?v=1543888932171","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-custom","title","tooltip"],"customTags":[],"updaterUserName":"神经质Dusty521"}}