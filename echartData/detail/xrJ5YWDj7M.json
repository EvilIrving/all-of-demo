{"status":0,"data":{"cid":"xrJ5YWDj7M","authorUid":"bd-1335944923","authorUserName":"锃***6","title":"地球lines多色","description":"为什么tooltip不好使呢","latestVersion":112,"alwaysLatest":1,"createTime":"2018-01-04T08:10:42.000Z","lastUpdateTime":"2021-12-13T05:55:10.000Z","auth":1,"uid":"bd-1335944923","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":112,"parentVersion":111,"echartsVersion":"3.8.5","versionCreateTime":"2021-12-13T05:55:10.000Z","code":"/**\r\n * @author liang\r\n * 3D的lines tooltip未开发，期待官方早点弄出来吧\r\n * github： https://github.com/Mying666/3dLines\r\n * 什么也没改不要点保存改动版本，谢谢\r\n * 什么也没改不要点保存改动版本，谢谢\r\n * 2018.12.12\r\n * 响应留言区好多小伙伴复制过去没法直接用，是少引入了一些脚本。\r\n * 单独给小白做了html的demo页，可以参考一下\r\n * 目前JSON名字并不能完全对上，有些地区无地图，大部分还是好使的\r\n */\r\n\r\n// 使用 echarts 绘制世界地图的实例作为纹理\r\nlet canvas = document.createElement('canvas');\r\nlet mapChart = echarts.init(canvas, null, {\r\n    width: 4096,\r\n    height: 2048\r\n});\r\nmapChart.setOption({\r\n    series: [{\r\n        type: 'map',\r\n        map: 'world',\r\n        // 绘制完整尺寸的 echarts 实例\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        boundingCoords: [\r\n            [-180, 90],\r\n            [180, -90]\r\n        ]\r\n    }]\r\n});\r\noption = {\r\n    title: {\r\n        text: '点击地球获取该区域地图',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    backgroundColor: '#7bc3ef',\r\n    tooltip: {\r\n        show: true\r\n    },\r\n    visualMap: [{\r\n        // show: false,\r\n        type: 'continuous',\r\n        seriesIndex: 0,\r\n        text: ['scatter3D'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        },\r\n        calculable: true,\r\n        max: 3000,\r\n        inRange: {\r\n            color: ['#87aa66', '#eba438', '#d94d4c']\r\n        }\r\n    }],\r\n    globe: {\r\n        baseTexture: mapChart,\r\n        environment: new echarts.graphic.LinearGradient(0, 1, 1, 1, [{\r\n  offset: 0, color: '#000000' // 天空颜色\r\n}, {\r\n  offset: 0, color: '#000000' // 地面颜色\r\n}, {\r\n  offset: 0, color: '#000000' // 地面颜色\r\n}], true),\r\n        // shading: 'lambert',\r\n        light: { // 光照阴影\r\n            main: {\r\n                color: '#fff', // 光照颜色\r\n                intensity: 1.2, // 光照强度\r\n                // shadowQuality: 'high', //阴影亮度\r\n                shadow: false, // 是否显示阴影\r\n                alpha: 40,\r\n                beta: -30\r\n            },\r\n            ambient: {\r\n                intensity: 0.5\r\n            }\r\n        },\r\n        viewControl: {\r\n            alpha: 30,\r\n            beta: 160,\r\n            // targetCoord: [116.46, 39.92],\r\n            autoRotate: true,\r\n            autoRotateAfterStill: 10,\r\n            distance: 240\r\n        }\r\n    },\r\n    series: [{\r\n        name: 'lines3D',\r\n        type: 'lines3D',\r\n        coordinateSystem: 'globe',\r\n        effect: {\r\n            show: true\r\n        },\r\n        blendMode: 'lighter',\r\n        lineStyle: {\r\n            width: 2\r\n        },\r\n        data: [],\r\n        silent: false\r\n    }]\r\n}\r\n// 随机数据\r\nfor (let i = 0; i < 500; i++) {\r\n    option.series[0].data = option.series[0].data.concat(rodamData())\r\n}\r\n\r\nfunction rodamData() {\r\n    let name = '随机点' + Math.random().toFixed(5) * 100000\r\n    // let longitude = Math.random() * 62 + 73\r\n    let longitude = 105.18\r\n    let longitude2 = Math.random() * 360 - 180\r\n    // let latitude = Math.random() * 50 + 3.52\r\n    let latitude = 37.51\r\n    let latitude2 = Math.random() * 180 - 90\r\n    return {\r\n        coords: [\r\n            [longitude2, latitude2],\r\n            [longitude, latitude]\r\n        ],\r\n        value: (Math.random() * 3000).toFixed(2)\r\n    }\r\n}\r\n// 添加地图详细canvas\r\n$('<canvas id=\"sMap\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: calc(100% + 30px); background: #333; z-index: -1\"></canvas>').appendTo($('#chart-panel'))\r\n// 双击返回地球\r\n$('#sMap').on('dblclick', () => {\r\n    $('#sMap').css('z-index', '-1')\r\n})\r\nlet sMap = echarts.init(document.getElementById('sMap'), null, {\r\n    width: $('#sMap').width(),\r\n    height: $('#sMap').height()\r\n})\r\n\r\n// 点击地球获取该区域地图\r\nmapChart.on('click', function(params) {\r\n    let name = params.name\r\n    let mapJson = 'https://raw.githubusercontent.com/Mying666/EC-JSON/gh-pages/json/' + name + '.json'\r\n    $('#sMap').css('z-index', '999')\r\n    sMap.showLoading()\r\n    $.getJSON(mapJson, geoJson => {\r\n        let data = []\r\n        geoJson.features.forEach(d => {\r\n            data.push({\r\n                name: d.properties.name,\r\n                value: (Math.random() * 3000).toFixed(2)\r\n            })\r\n        })\r\n        echarts.registerMap(name, geoJson);\r\n        sMap.setOption({\r\n            title: {\r\n                text: '双击返回上一层',\r\n                textStyle: {\r\n                    color: '#fff'\r\n                }\r\n            },\r\n            visualMap: [{\r\n                show: false,\r\n                type: 'continuous',\r\n                seriesIndex: 0,\r\n                text: ['scatter3D'],\r\n                textStyle: {\r\n                    color: '#fff'\r\n                },\r\n                calculable: true,\r\n                max: 3000,\r\n                inRange: {\r\n                    color: ['#87aa66', '#eba438', '#d94d4c']\r\n                }\r\n            }],\r\n            series: [{\r\n                type: 'map',\r\n                map: name,\r\n                // roam: true,\r\n                zoom: 1,\r\n                // 绘制完整尺寸的 echarts 实例\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                data: data\r\n            }]\r\n        });\r\n        sMap.hideLoading()\r\n    })\r\n});","html":"","externalScripts":"https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/map/js/world.js","updaterUID":"obd-oEO77t38z_o4ASQJpYyjbS4ybHigl45","theme":"","layout":"","viewCount":59755,"userName":"锃***6","commentCount":43,"starCount":119,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJ5YWDj7M.png?v=1639374910608","isCustomThumbnail":0,"builtinTags":["category-work","globe","series-lines3D","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"月***汐"}}