{"status":0,"data":{"cid":"xtmVPbUUep","authorUid":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","authorUserName":"h***9","title":"公司售电结构同期对比","description":"同期对比","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-15T06:49:27.000Z","lastUpdateTime":"2020-09-15T06:49:27.000Z","auth":1,"uid":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-15T06:49:27.000Z","code":"let echartData = {\n    inner: [\n        {\n            value: 31.86,\n            unit: '件',\n            name: '大工业'\n        },\n        {\n            value: 5.49,\n            unit: '件',\n            name: '非、工业'\n        },\n        {\n            value: 3.2,\n            unit: '件',\n            name: '非居民'\n        },\n        {\n            value: 3.65,\n            unit: '件',\n            name: '商业'\n        },\n        {\n            value: 1.22,\n            unit: '件',\n            name: '农业'\n        },\n         {\n            value: 11.83,\n            unit: '件',\n            name: '居民'\n        }\n    ],\n    outer: [\n        {\n            value: 32.76,\n            unit: '件',\n            name: '大工业'\n        },\n        {\n            value: 5.74,\n            unit: '件',\n            name: '非、工业'\n        },\n        {\n            value: 3.31,\n            unit: '件',\n            name: '非居民'\n        },\n        {\n            value: 4.42,\n            unit: '件',\n            name: '商业'\n        },\n        {\n            value: 1.31,\n            unit: '件',\n            name: '农业'\n        },\n         {\n            value: 10.51,\n            unit: '件',\n            name: '居民'\n        }\n    ]\n}\n\n// 获取图例数据\nvar arrName = getArrayValue(echartData.outer , \"name\");\n\nfunction getArrayValue(array, ke) {\n    var ke = ke || \"value\";\n    var res = [];\n    if (array) {\n        array.forEach(function(t) {\n            res.push(t[ke]);\n        });\n    }\n    return res;\n}\n\n\noption = {\n    \n     title: [{\n        text: '单位：亿千瓦时',\n        top: 'center',\n        left: '34.5%',\n        textStyle: {\n            fontSize: 10,\n            color:'#ffffff',\n            lineHeight: 26,\n            fontWeight: 400\n        }\n    }],\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n    },\n        color: ['#8a42ff', '#fc8d89', '#24FEB4', '#f48639', '#04c8ff', '#66ffcc', '#FC6060'],\n    legend: {\n        show: true,\n        top: \"center\",\n        left: '80%',\n        data: arrName,\n        itemWidth: 20,\n        itemHeight: 20,\n        padding: [0, 5],\n        itemGap: 25,\n        textStyle: {\n            color: '#fff'\n        },\n        formatter: function(name) {\n            return name + '          ' \n            // return \"{title|\" + name + \"}\\n{value|\" + (objData[name].value) + \"人}\"\n        },\n    },\n    series: [\n         //最外层圆环\n        {\n            name: '圆圈',\n            type: 'pie',\n            zlevel: 1,\n            silent: true,\n            radius: ['79%', '80%'],\n            center: [\"40%\", \"50%\"],\n            hoverAnimation: false,\n            color: \"#ffffff\",\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            data:[{\n                value: 1,\n                name: '',\n                 itemStyle:{\n                    normal: {\n                        color: '#ffffff'\n                    }\n                }\n            }]\n        },\n      \n        {\n            name: '2019年4月',\n            type: 'pie',\n            radius: ['50%', '75%'],\n            center: [\"40%\", \"50%\"],\n            startAngle: '240',\n            data: echartData.outer,\n            labelLine: {\n                normal: {\n                    length: 20,\n                    length2: 140,\n                    lineStyle: {\n                        color: '#e6e6e6'\n                    }\n                }\n            },\n            itemStyle: { // 此配置\n                normal: {\n                    borderWidth: 2,\n                    borderColor: '#fff',\n                },\n                emphasis: {\n                    borderWidth: 0,\n                    shadowBlur: 10,\n                    shadowOffsetX: 0,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n            label: {\n                normal: {\n                    position: 'inner',\n                    formatter: params => {\n                        return (\n                            params.value \n                        );\n                    },\n                    fontSize: 10,\n                    color: '#000',\n                    // padding: [0, -130, 25, -130],\n                }\n            },\n        },\n        \n        {\n            name: '2020年4月',\n            type: 'pie',\n            radius: ['25%', '50%'],\n            center: [\"40%\", \"50%\"],\n            itemStyle: { // 此配置\n               normal: {\n                    borderWidth: 2,\n                    borderColor: '#fff',\n                },\n                emphasis: {\n                    borderWidth: 0,\n                    shadowBlur: 10,\n                    shadowOffsetX: 0,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n            label: {\n                normal: {\n                    position: 'inner',\n                    formatter: params => {\n                        return (\n                            params.value \n                        );\n                    },\n                    fontSize: 10,\n                    color: '#000',\n                }\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            startAngle: '230',\n            data: echartData.inner\n        }\n    ]\n};\n\nvar timeTicket = null;\nvar count = 0;\ntimeTicket && clearInterval(timeTicket);\ntimeTicket = setInterval(function() {\n    var dataLength = option.series[1].data.length;\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 1\n    });\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 1,\n        dataIndex: count % dataLength\n    });\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 1,\n        dataIndex: count % dataLength,\n    });\n    count++;\n}, 1500);\nmyChart.on('mouseover', function(params) {\n    clearInterval(timeTicket);\n    var allDataIndex = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];\n    if (params.seriesIndex == 0) {\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 1,\n            dataIndex: allDataIndex\n        });\n        if (params.dataIndex == 0) {\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 1,\n                dataIndex: allDataIndex.splice(0, 4)\n            });\n        } else {\n            var arr1 = allDataIndex.splice(params.dataIndex * 3 + 1, 3);\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 1,\n                dataIndex: arr1\n            });\n        }\n    }\n});\nmyChart.on('mouseout', function(params) {\n    timeTicket && clearInterval(timeTicket);\n    myChart.dispatchAction({\n        type: 'downplay',\n    });\n    timeTicket = setInterval(function() {\n        var dataLength = option.series[1].data.length;\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 2\n        });\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 2,\n            dataIndex: count % dataLength\n        });\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 2,\n            dataIndex: count % dataLength,\n        });\n        count++;\n    }, 1500);\n});\n  \n \n","html":"","externalScripts":"","updaterUID":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","theme":"","layout":"","viewCount":92,"userName":"h***9","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xtmVPbUUep.png?v=1600152568154","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":["pie","tooltip"],"updaterUserName":"h***9"}}