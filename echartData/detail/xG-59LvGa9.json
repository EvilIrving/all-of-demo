{"status":0,"data":{"cid":"xG-59LvGa9","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-02-03T01:37:01.000Z","lastUpdateTime":"2021-02-03T01:37:01.000Z","auth":2,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-03T01:37:01.000Z","code":"var getnhname = ['教师','学生'];\r\nvar getnhvalue = [4,95];\r\nvar getflname = ['其他', '用餐支出', '用水支出', '用电支出'];\r\nvar getflvalue = [10,40,35,15];\r\n\r\n// 圆环值\r\nvar data1 = [];\r\nfor(var i = 0;i<getflname.length;i++){\r\n\tdata1.push({name:getflname[i],value:getflvalue[i]})\r\n}\r\n\r\n// 环内\r\nvar data2 = [];\r\nfor(var i = 0;i<getnhname.length;i++){\r\n\tdata2.push({name:getnhname[i],value:getnhvalue[i]})\r\n}\r\n\r\n// 圆环颜色\r\nvar color = [{\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: '#FDC48D' // 0% 处的颜色\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#EAC093' // 100% 处的颜色\r\n        }\r\n    ],\r\n}, {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: '#4A92FF' // 0% 处的颜色\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#75D0FF' // 100% 处的颜色\r\n        }\r\n    ],\r\n}, {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: '#7464F2' // 0% 处的颜色\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#7488FF' // 100% 处的颜色\r\n        }\r\n    ],\r\n}, {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n            offset: 0,\r\n            color: '#54C7C0' // 0% 处的颜色\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#93FFF3' // 100% 处的颜色\r\n        }\r\n    ],\r\n}, ]\r\n\r\n// 内环边框\r\nvar innerColor = ['#F1C191', '#AFD4FF']\r\nvar dataConsump = [];\r\nvar dataType = []\r\n\r\nfor (var i = 0; i < data1.length; i++) {\r\n    dataConsump.push({\r\n        value: data1[i].value,\r\n        name: data1[i].name, \r\n    });\r\n}\r\nfor (let i = 0; i < data2.length; i++) {\r\n    dataType.push({\r\n        name: data2[i].name,\r\n        value: data2[i].value,\r\n        itemStyle: {\r\n            shadowBlur: 7,\r\n            borderWidth: 2,\r\n            color: '#010818',\r\n            borderColor: innerColor[i],\r\n            shadowColor: innerColor[i]\r\n        },\r\n        // selected: i === 0\r\n    })\r\n}\r\n\r\nvar seriesOption = [{\r\n        name: '分类',\r\n        type: 'pie',\r\n        radius: ['0%', '50%'],\r\n        center: ['50%', '50%'],\r\n        label: {\r\n            position: 'inner',\r\n            color: '#C1F6FF',\r\n            formatter: function(params) {\r\n                return params.percent + '%' + '\\n' + '\\n' + params.name;\r\n            }\r\n\r\n        },\r\n        hoverOffset: 0,\r\n        selectedMode: true,\r\n        selectedOffset: 10,\r\n        itemStyle: {\r\n            borderColor: 'black',\r\n            borderWidth: 2,\r\n        },\r\n        data: dataType\r\n    },\r\n    {\r\n        name: '',\r\n        type: 'pie',\r\n        radius: ['60%', '70%'],\r\n        center: ['50%', '50%'],\r\n        color: 'transparent',\r\n        hoverAnimation: false,\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'transparent',\r\n                label: {\r\n                    show: true,\r\n                    position: 'outside',\r\n                    color: '#66799D',\r\n                    padding: [-2, -4, 0, -4],\r\n                    fontSize: 13,\r\n                    formatter: function(params) {\r\n                        var percent = 0;\r\n                        var total = 0;\r\n                        for (var i = 0; i < data1.length; i++) {\r\n                            total += data1[i].value;\r\n                        }\r\n                        percent = ((params.value / total) * 100).toFixed(0);\r\n                        if (params.name !== '') {\r\n                            return '{percent|' + percent + '%}\\n{hr|}\\n{name|' + params.name + '}';\r\n                        } else {\r\n                            return '';\r\n                        }\r\n                    },\r\n                    rich: {\r\n                        name: {\r\n                            color: \"#656565\",\r\n                            fontSize: 14,\r\n                            padding: [6, 5, 6, 0],\r\n                            align: 'left'\r\n                        },\r\n                        hr: {\r\n                            borderColor: 'rgba(102, 121, 157, 1)',\r\n                            width: '100%',\r\n                            borderWidth: 0.5,\r\n                            height: 0,\r\n                        },\r\n                        percent: {\r\n                            color: \"rgba(193, 246, 255, 1)\",\r\n                            fontSize: 14,\r\n                            padding: [6, 5, 6, 0],\r\n                            align: 'center'\r\n                        },\r\n                    }\r\n                },\r\n                labelLine: {\r\n                    length: 40,\r\n                    length2: 0,\r\n                    show: true,\r\n                    lineStyle: {\r\n                        color: 'rgba(102, 121, 157, 1)'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        data: dataConsump\r\n    }\r\n];\r\n\r\nvar num = 0\r\nconst seriesOption2 = data1.map((item, index) => {\r\n    num += item.value\r\n    const a = {\r\n        type: 'bar',\r\n        data: [, , , num],\r\n        coordinateSystem: 'polar',\r\n        z: 9999 - index,\r\n        name: '抢修项目',\r\n        roundCap: true,\r\n        color: color[index],\r\n        barGap: '-100%',\r\n           itemStyle: {\r\n            normal: {\r\n                // borderWidth: 6,\r\n                shadowBlur: 5,\r\n                // color: 'transparent',\r\n                // borderColor: color[i],\r\n                shadowColor: color[index]\r\n            }\r\n        }\r\n    }\r\n    return a\r\n})\r\n\r\n\r\noption = {\r\n    backgroundColor: '#010818',\r\n    color: color,\r\n    tooltip: {\r\n        show: false\r\n    },\r\n    legend: {\r\n        show: false,\r\n        icon: \"circle\",\r\n        orient: 'horizontal',\r\n        // x: 'left',\r\n        data: ['其他', '用餐支出', '用水支出', '用电支出'],\r\n        right: 340,\r\n        bottom: 150,\r\n        align: 'right',\r\n        textStyle: {\r\n            color: \"#C1F6FF\"\r\n        },\r\n        itemGap: 20\r\n    },\r\n    angleAxis: {\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        min: 0,\r\n        max: 100,\r\n        boundaryGap: ['0', '100'],\r\n        startAngle: 90\r\n    },\r\n    radiusAxis: {\r\n        type: 'category',\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        data: ['a', 'b', 'c','d'],\r\n        z: 10\r\n    },\r\n    polar: {\r\n        radius: '70%'\r\n    },\r\n    toolbox: {\r\n        show: false\r\n    },\r\n    series: [...seriesOption, ...seriesOption2]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":175,"userName":"m***h","commentCount":0,"starCount":16,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xG-59LvGa9.png?v=1612316221839","isCustomThumbnail":0,"builtinTags":["category-work","legend","polar","series-bar","series-pie","toolbox","tooltip"],"customTags":[],"updaterUserName":"m***h"}}