{"status":0,"data":{"cid":"xqQfZ8PLpY","authorUid":"obd-olGfOrxetmWVSHvURGPmfWchxFQhp0D","authorUserName":"2***工","title":"故障统计图","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-10-21T10:07:47.000Z","lastUpdateTime":"2021-10-22T03:13:03.000Z","auth":2,"uid":"obd-olGfOrxetmWVSHvURGPmfWchxFQhp0D","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2021-10-22T03:13:03.000Z","code":"var data = [1440, 1440, 1440, 1440, 1440, 1440, 1440];\nvar data1 = []; //告警\nvar data2 = []; //消警\nvar dataOne = [];\nvar dataTwo = [];\nvar dataThree = [];\nvar dataFour = [];\nvar dataFive = [];\nvar dataSix = [];\nvar dataSeven = [];\ngetData();\noption = {\n  title: {\n    text: '故障统计图',\n    left: 'center',\n  },\n  backgroundColor: '#fff',\n  tooltip: {\n    show: true,\n    type: 'axis',\n    formatter: function (params) {\n      console.log(params);\n      return params.name + '<br/>' + '告警时间:' + params.value + '</br>' + '消警时间:' ;\n    },\n  },\n  yAxis: {\n    show: true,\n    data: ['2021-10-01', '2021-10-02', '2021-10-03', '2021-10-04', '2021-10-05', '2021-10-06', '2021-10-07'],\n  },\n  xAxis: {\n    show: true,\n    // label: { //显示值的算法，有一定间距的显示\n    // \tshow: true,\n    //   color:'#8da5b2',\n    //   formatter:(params)=>{\n  \t\t//   return params.value[1]+'°C';\n    // \t}\n    // }\n  },\n  series: [\n    {\n      name: '',\n      type: 'bar',\n      tooltip: {\n        show: false,\n      },\n      z: 0, //图层值\n      barWidth: 1,\n      symbolOffset: [10, 12],\n      itemStyle: {\n        color: 'green',\n      },\n      data: data,\n    },\n    {\n      name: '异形柱状图',\n      type: 'pictorialBar', //异型柱状图\n      tooltip: {\n        show: false,\n      },\n      symbol: 'reat', //内部类型（方块，圆，svg，base64图片）\n      z: 1,\n      symbolSize: [5, 35], //size,单个symbol的大小\n      symbolOffset: [5, 0], //柱子的位置\n      symbolMargin: 3, //间隔\n      symbolRepeat: 'fixed', //是否重复symbol\n      symbolPosition: 'end',\n      itemStyle: {\n        color: 'red',\n        borderWidth: 12,\n        borderColor: '#fff', //边框颜色\n      },\n      data: data,\n    },\n  ],\n};\nrun();\n\nfunction getData() {\n  for (let i = 1; i < 10; i++) {\n    let dataone = {\n      //全部告警\n      startTime: '2021-10-01' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n      endTime: '',\n      min: i * 60 + i,\n    };\n    let datatwo = {\n      //全部消警\n      startTime: '2021-10-02' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n      endTime: '2021-10-03' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n      min: i * 60 + i,\n    };\n    let datathree = {\n      //部分消警\n      startTime: '2021-10-03' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n      endTime: i > 6 ? '2021-10-04' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i : '',\n      min: i * 60 + i,\n    };\n    if (i == 4) {\n      //1个告警，无消警\n      let datafour = {\n        startTime: '2021-10-04' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n        endTime: '',\n        min: i * 60 + i,\n      };\n      dataFour.push(datafour);\n    }\n    if (i == 5) {\n      //1个消警，无告警\n      let datafive = {\n        startTime: '2021-10-05' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n        endTime: '2021-10-06' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n        min: i * 60 + i,\n      };\n      dataFive.push(datafive);\n    }\n    if (i == 3 || i == 7) {\n      let dataseven = {\n        startTime: '2021-10-05' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n        endTime: '2021-10-06' + ' ' + '0' + i + ':' + '0' + i + ':' + '0' + i,\n        min: i * 60 + i,\n      };\n      dataSeven.push(dataseven);\n    }\n\n    dataOne.push(dataone);\n    dataTwo.push(datatwo);\n    dataThree.push(datathree);\n    // dataSix  //无告警\n  }\n}\nfunction run() {\n  dataOne.forEach((item, index) => {\n    let warnValue = [\n      !item.endTime ? item.min : '',\n      dataTwo[index] && !dataTwo[index].endTime ? dataTwo[index].min : '',\n      dataThree[index] && !dataThree[index].endTime ? dataThree[index].min : '',\n      dataFour[index] && !dataFour[index].endTime ? dataFour[index].min : '',\n      dataFive[index] && !dataFive[index].endTime ? dataFive[index].min : '',\n      dataSix[index] && !dataSix[index].endTime ? dataSix[index].min : '',\n      dataSeven[index] && !dataSeven[index].endTime ? dataSeven[index].min : '',\n    ];\n    let unwarnValue = [\n      item.endTime ? item.min : '',\n      dataTwo[index] && dataTwo[index].endTime ? dataTwo[index].min : '',\n      dataThree[index] && dataThree[index].endTime ? dataThree[index].min : '',\n      dataFour[index] && dataFour[index].endTime ? dataFour[index].min : '',\n      dataFive[index] && dataFive[index].endTime ? dataFive[index].min : '',\n      dataSix[index] && dataSix[index].endTime ? dataSix[index].min : '',\n      dataSeven[index] && dataSeven[index].endTime ? dataSeven[index].min : '',\n    ];\n    let warnTime1 = [\n      !item.endTime ? item.startTime : '',\n      dataTwo[index] && !dataTwo[index].endTime ? dataTwo[index].startTime : '',\n      dataThree[index] && !dataThree[index].endTime ? dataThree[index].startTime : '',\n      dataFour[index] && !dataFour[index].endTime ? dataFour[index].startTime : '',\n      dataFive[index] && !dataFive[index].endTime ? dataFive[index].startTime : '',\n      dataSix[index] && !dataSix[index].endTime ? dataSix[index].startTime : '',\n      dataSeven[index] && !dataSeven[index].endTime ? dataSeven[index].startTime : '',\n    ];\n    let warnTime2 = [\n      item.endTime ? item.startTime : '',\n      dataTwo[index] && dataTwo[index].endTime ? dataTwo[index].startTime : '',\n      dataThree[index] && dataThree[index].endTime ? dataThree[index].startTime : '',\n      dataFour[index] && dataFour[index].endTime ? dataFour[index].startTime : '',\n      dataFive[index] && dataFive[index].endTime ? dataFive[index].startTime : '',\n      dataSix[index] && dataSix[index].endTime ? dataSix[index].startTime : '',\n      dataSeven[index] && dataSeven[index].endTime ? dataSeven[index].startTime : '',\n    ];\n    let unwarnTime = [\n      item.endTime ? item.endTime : '',\n      dataTwo[index] && dataTwo[index].endTime ? dataTwo[index].endTime : '',\n      dataThree[index] && dataThree[index].endTime ? dataThree[index].endTime : '',\n      dataFour[index] && dataFour[index].endTime ? dataFour[index].endTime : '',\n      dataFive[index] && dataFive[index].endTime ? dataFive[index].endTime : '',\n      dataSix[index] && dataSix[index].endTime ? dataSix[index].endTime : '',\n      dataSeven[index] && dataSeven[index].endTime ? dataSeven[index].endTime : '',\n    ];\n    data1.push({\n      warn: warnValue,\n      time: warnTime1,\n      unTime: [],\n    });\n    data2.push({\n      unwarn: unwarnValue,\n      time: warnTime2,\n      unTime: unwarnTime,\n    });\n  });\n  console.log(data1,data2)\n  // 告警\n  echarts.util.each(data1, function (value, idx) {\n    option.series.push({\n      name: idx, //带有涟漪的散点图\n      type: 'effectScatter',\n      z: 3,\n      itemStyle: {\n        color: 'red',\n        opacity: 1,\n        borderWidth: 0,\n      },\n      data: value.warn,\n    });\n  });\n  // 消警\n  echarts.util.each(data2, function (value, idx) {\n    option.series.push({\n      name: idx, //带有涟漪的散点图\n      type: 'effectScatter',\n      z: 3,\n      itemStyle: {\n        color: '#333',\n        opacity: 1,\n        borderWidth: 0,\n      },\n      data: value.unwarn,\n    });\n  });\n}\n","html":"","externalScripts":"","updaterUID":"obd-olGfOrxetmWVSHvURGPmfWchxFQhp0D","theme":"","layout":"","viewCount":0,"userName":"2***工","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqQfZ8PLpY.png?v=1634872383520","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-effectScatter","series-pictorialBar","title","tooltip"],"customTags":[],"updaterUserName":"2***工"}}