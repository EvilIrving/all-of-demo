{"status":0,"data":{"cid":"xnzfpJZay","authorUid":"bd-3577715592","authorUserName":"明***好","title":"地图上结合柱状图","description":"地图上结合柱状图","latestVersion":1,"alwaysLatest":1,"createTime":"2019-10-24T06:48:36.000Z","lastUpdateTime":"2019-10-24T06:48:36.000Z","auth":2,"uid":"bd-3577715592","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-24T06:48:36.000Z","code":"var rawData = [{\n        name: '江苏',\n        value: 39\n    },\n    {\n        name: '浙江',\n        value: 52\n    },\n    {\n        name: '安徽',\n        value: 12\n    },\n    {\n        name: '福建',\n        value: 13\n    },\n    {\n        name: '江西',\n        value: 89\n    },\n    {\n        name: '山东',\n        value: 52\n    },\n    {\n        name: '河南',\n        value: 69\n    },\n    {\n        name: '湖北',\n        value: 52\n    },\n    {\n        name: '湖南',\n        value: 92\n    },\n    {\n        name: '广东',\n        value: 19\n    },\n    {\n        name: '广西',\n        value: 35\n    }\n];\nvar geoCoordMap = {\n    '江苏': {\n        id: '320000',\n        cp: [118.767413, 32.041544]\n    },\n    '浙江': {\n        id: '330000',\n        cp: [120.153576, 30.287459]\n    },\n    '安徽': {\n        id: '340000',\n        cp: [117.283042, 31.86119]\n    },\n    '福建': {\n        id: '350000',\n        cp: [119.306239, 26.075302]\n    },\n    '江西': {\n        id: '360000',\n        cp: [115.892151, 28.676493]\n    },\n    '山东': {\n        id: '370000',\n        cp: [117.000923, 36.675807]\n    },\n    '河南': {\n        id: '410000',\n        cp: [113.665412, 34.757975]\n    },\n    '湖北': {\n        id: '420000',\n        cp: [114.298572, 30.584355]\n    },\n    '湖南': {\n        id: '430000',\n        cp: [112.982279, 28.19409]\n    },\n    '广东': {\n        id: '440000',\n        cp: [113.280637, 23.125178]\n    },\n    '广西': {\n        id: '450000',\n        cp: [108.320004, 22.82402]\n    }\n};\n\noption = {　　\n    geo: { //地理坐标系\n        show: true,\n        map: 'china',\n        roam: false,\n        zoom: 1.12,\n        label: {\n            normal: {\n                show: false\n            },\n            emphasis: {\n                show: false\n            }\n        },\n        itemStyle: {\n            normal: {\n                areaColor: '#095c46',\n                borderColor: '#848c88'\n            },\n            emphasis: {\n                show: true,\n                areaColor: '#00beaf',\n                borderColor: '#ffffff'\n            }\n        }　　\n    },\n    　　series: []\n}\n\nfunction renderEachCity() {\n    var options = {\n        legend: [],\n        xAxis: [],\n        yAxis: [],\n        grid: [],\n        series: []\n    };\n    echarts.util.each(rawData, function(dataItem, idx) {　　\n        var geoCoord = geoCoordMap[dataItem.name].cp; //获取地理位置\n        　　　　　　　\n        var coord = myChart.convertToPixel('geo', geoCoord); //将地理位置转换成像素位置\n        　　\n        idx += '';　　\n        options.xAxis.push({\n            id: idx,\n            gridId: idx,\n            type: 'category',\n            name: dataItem.name,\n            nameStyle: {　　\n                color: '#ddd',\n                　　fontSize: 12\n            },\n            nameLocation: 'middle',\n            nameGap: 3,\n            splitLine: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            },\n            axisLabel: {\n                show: false\n            },\n            axisLine: {\n                show: false,\n                　　lineStyle: {\n                    color: '#bbb'　　\n                }\n            },\n            data: [dataItem.name],\n        });\n        options.yAxis.push({　　　　\n            id: idx,\n            　　　　gridId: idx,\n            　　　　show: false\n        });\n        options.grid.push({\n            id: idx,\n            width: 30,\n            height: dataItem.value / 2, //柱子高度根据数值 \n            left: coord[0] - 15,\n            top: coord[1] - dataItem.value / 2\n        });\n        options.series.push({\n            name: dataItem.name,\n            　　　type: 'bar',\n            　　　　　stack: 'bar' + idx,\n            　　　　　xAxisId: idx,\n            　　　　　yAxisId: idx,\n            　　　　　barWidth: 12,\n            　　　　　itemStyle: {　　　　　\n                normal: {　　　　　　\n                    color: '#FFAA00'　　　　　\n                }　　　　　\n            },\n            　　　　data: [dataItem.value]　　　　\n        });　　\n    });　　\n    myChart.setOption(options);\n}\nsetTimeout(function() {\n    renderEachCity();\n}, 1);","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3577715592","theme":"","layout":"","viewCount":383,"userName":"明***好","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnzfpJZay.png?v=1571899716482","isCustomThumbnail":1,"builtinTags":["category-work","geo","grid","series-bar"],"customTags":[],"updaterUserName":"明***好"}}