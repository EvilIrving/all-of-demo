{"status":0,"data":{"cid":"xdiMp7zkjB","authorUid":"obd-o2KTMIAzIrbE9Y5qbVWyEPVwrp7dh6n","authorUserName":"煜***计","title":"月规模","description":"中国地图","latestVersion":5,"alwaysLatest":0,"createTime":"2021-05-18T03:43:02.000Z","lastUpdateTime":"2021-05-18T03:43:02.000Z","auth":2,"uid":"obd-o2KTMIAzIrbE9Y5qbVWyEPVwrp7dh6n","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-18T07:04:53.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1621321225846-iifVsvtqF.json';\n\nvar nameMap = 'china';\n// 0表示未开发，1表示开发中\nvar data = [\n  { name: '北京', value: 1290 },\n  { name: '天津', value: 42 },\n  { name: '河北', value: 1 },\n  { name: '山西', value: 0 },\n  { name: '内蒙古', value: 0 },\n  { name: '辽宁', value: 0 },\n  { name: '吉林', value: 0 },\n  { name: '黑龙江', value: 0 },\n  { name: '上海', value: 1129 },\n  { name: '江苏', value: 399 },\n  { name: '浙江', value: 102 },\n  { name: '安徽', value: 1 },\n  { name: '福建', value: 299 },\n  { name: '江西', value: 302 },\n  { name: '山东', value: 1 },\n  { name: '河南', value: 1 },\n  { name: '湖北', value: 998 },\n  { name: '湖南', value: 480 },\n  { name: '重庆', value: 1580 },\n  { name: '四川', value: 372 },\n  { name: '贵州', value: 69 },\n  { name: '云南', value: 695 },\n  { name: '西藏', value: 0 },\n  { name: '陕西', value: 1 },\n  { name: '甘肃', value: 56 },\n  { name: '青海', value: 10 },\n  { name: '宁夏', value: 1 },\n  { name: '新疆', value: 0 },\n  { name: '广东', value: 1988 },\n  { name: '广西', value: 1860 },\n  { name: '海南', value: 14 },\n  { name: '香港', value: 879 },\n  { name: '澳门', value: 209 },\n  { name: '台湾', value: 0 },\n];\n\nvar geoCoordMap = {};\nvar convertData = function (data) {\n  var res = [];\n  for (var i = 0; i < data.length; i++) {\n    var geoCoord = geoCoordMap[data[i].name];\n    if (geoCoord) {\n      res.push({\n        name: data[i].name,\n        value: geoCoord.concat(data[i].value),\n      });\n    }\n  }\n  return res;\n};\n\n$.get(uploadedDataURL, function (gdMap) {\n  // debugger;\n  echarts.registerMap(nameMap, gdMap);\n  /*获取地图数据*/\n  myChart.showLoading();\n  var mapFeatures = echarts.getMap(nameMap).geoJson.features;\n  myChart.hideLoading();\n  mapFeatures.forEach(function (v) {\n    // 地区名称\n    var name = v.properties.name;\n    // 地区经纬度\n    geoCoordMap[name] = v.properties.center;\n  });\n  option = {\n    backgroundColor: '#0F1C3C',\n    title: [\n      {\n        top: '31.5%',\n        text: '月规模',\n        // subtext: '虚拟数据',\n        left: '105',\n        show: true,\n        textStyle: {\n          color: '#fff',\n        },\n      },\n    ],\n    tooltip: {\n      position: function (p) {\n        //其中p为当前鼠标的位置\n        return [p[0] + 10, p[1] - 10];\n      },\n      extraCssText: 'max-height:40px;',\n      triggerOn: 'mousemove|click',\n      formatter: function (e, t, n) {\n        if (typeof e.value[2] == 'undefined') {\n          if (e.value == '0') {\n            return e.name + \"：<span style='color: #999;'>未开发</span>\";\n          } else if (e.value == '1') {\n            return e.name + \"：<span style='color: blue;'>开发中</span>\";\n          } else {\n            return e.name + \"：<span style='color: red;'>\" + e.value + '</span> 万';\n          }\n        }\n        //有数量时，显示城市和当前城市所做项目数\n        else {\n          return e.name + \"：<span style='color: red;'>\" + e.value[2] + '</span> 万'; //params.value[2]  取出value值中的第三个值  前两个值是经纬度，第三个值是数量\n        }\n      },\n    },\n    visualMap: [\n      {\n        left: 90,\n        bottom: '20%',\n        min: 0,\n        max: 1000,\n        show: true,\n        //   text: ['High', 'Low'],\n        realtime: false,\n        calculable: false,\n        seriesIndex: [0],\n        orient: 'horizontal',\n        textStyle: {\n          color: 'rgba(175,224,254,.9)',\n        },\n        pieces: [\n          {\n            gt: 3,\n            label: '已开发',\n            color: '#134B1C',\n          },\n          {\n            gte: 1,\n            lte: 1,\n            label: '开发中',\n            color: '#4A4003',\n          },\n          {\n            gte: 0,\n            lte: 0,\n            label: '未开发',\n            color: '#00336C',\n          },\n        ],\n      },\n      {\n        left: 90,\n        // top: this.chinaBox / 2 + 52,\n        top: '30%',\n        min: 0,\n        max: 1000,\n        seriesIndex: 1,\n        show: true,\n        splitNumber: 4,\n        padding: [50, 20, 20, 20],\n        backgroundColor: 'rgba(255,255,255,.2)',\n        textStyle: {\n          color: 'rgba(175,224,254,.9)',\n        },\n        inRange: {\n          // color: ['#8B77FF', '#4FCCFF', '#6FE621', '#FFC760', '#FB497C'].reverse(),\n          symbolSize: [8, 15],\n          symbol: 'circle',\n        },\n        formatter: function (value) {\n          return '';\n        },\n        pieces: [\n          {\n            gt: 1000,\n            label: '1000万以上',\n            color: '#FB497C',\n          },\n          {\n            gte: 500,\n            lte: 1000,\n            label: '500-1000万',\n            color: '#FFC760',\n          },\n          {\n            gte: 300,\n            lt: 500,\n            label: '300-500万',\n            color: '#6FE621',\n          },\n          {\n            gt: 100,\n            lt: 300,\n            label: '100-300万',\n            color: '#4FCCFF',\n          },\n          {\n            lt: 100,\n            gt: 3,\n            label: '100万以下',\n            color: '#DAB2FF',\n          },\n        ],\n      },\n    ],\n    geo: {\n      // 背景地图\n      map: nameMap,\n      zoom: 1.2,\n      show: false, // 是否显示背景地图\n      roam: true,\n      label: {\n        normal: {\n          show: false,\n        },\n        emphasis: {\n          show: false,\n        },\n      },\n      // 默认背景\n      // itemStyle: {\n      //   normal: {\n      //     areaColor: '#032954',\n      //     borderColor: '#0C6075',\n      //   }\n      // }\n    },\n    series: [\n      {\n        // 地图块的相关信息\n        type: 'map',\n        map: nameMap,\n        zoom: 1.2,\n        label: {\n          normal: {\n            show: true,\n            textStyle: {\n              fontSize: 12,\n              fontWeight: 400,\n              color: 'rgb(255,255,255)',\n            },\n          },\n          // 文字hover颜色\n          emphasis: {\n            show: true, //是否在高亮状态下显示标签。\n            textStyle: {\n              color: '#ff0',\n            }, //高亮状态下的标签文本样式。\n          },\n        },\n        itemStyle: {\n          // 地图边框设置\n          normal: {\n            // areaColor: '#272235',\n            borderColor: 'rgba(175,224,254,.4)',\n            fontWeightL: 700,\n            borderWidth: 0.5,\n          },\n          // hover效果\n          emphasis: {\n            areaColor: {\n              type: 'linear',\n              x: 0,\n              y: 0,\n              x2: 0,\n              y2: 1,\n              colorStops: [\n                {\n                  offset: 0,\n                  color: '#00499B', // 0% 处的颜色\n                },\n                {\n                  offset: 1,\n                  color: '#00499B', // 100% 处的颜色\n                },\n              ],\n              globalCoord: false, // 缺省为 false\n            },\n          },\n        },\n        // 点击效果\n        select: {\n          itemStyle: {\n            areaColor: '#ccb32c',\n          },\n        },\n        data: data,\n      },\n      {\n        // 水波纹\n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        data: convertData(\n          data\n            .sort(function (a, b) {\n              return b.value - a.value;\n            })\n            .slice(0, 50)\n        ),\n        // symbolSize: function (val) {\n        //   return val[2] / 6;\n        // },\n        showEffectOn: 'render',\n        // symbolOffset: [-10, 10], //偏移\n        rippleEffect: {\n          period: 10, // 动画时间，值越小速度越快\n          scale: 4, // 波纹圆环最大限制，值越大波纹越大\n          brushType: 'fill', // 波纹绘制方式 stroke, fill\n        },\n        zlevel: 2,\n      },\n    ],\n  };\n  myChart.setOption(option, true);\n});\n","html":"","externalScripts":"","updaterUID":"obd-o2KTMIAzIrbE9Y5qbVWyEPVwrp7dh6n","theme":"","layout":"","viewCount":0,"userName":"煜***计","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xdiMp7zkjB.png?v=1621321493444","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"煜***计"}}