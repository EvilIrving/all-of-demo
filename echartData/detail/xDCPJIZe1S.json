{"status":0,"data":{"cid":"xDCPJIZe1S","authorUid":"obd-o2tLhbYnOqERGa1YoPhP0N-Uqvfwi6t","authorUserName":"X***1","title":"折线图与饼图的组合图","description":"在直角坐标系中绘制折线图的基础上，根据每个点来绘制饼图。只要看懂了原理，任意图表应该都可以组合起来！！！","latestVersion":1,"alwaysLatest":0,"createTime":"2022-01-09T08:17:47.000Z","lastUpdateTime":"2022-01-09T08:17:47.000Z","auth":2,"uid":"obd-o2tLhbYnOqERGa1YoPhP0N-Uqvfwi6t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-09T08:17:47.000Z","code":"var minPieRadius = 20;\nvar base = 10000;\n// 根据y轴数值得到饼图半径大小\nfunction getPieRadius(value) {\n    var pieRadius = Math.floor(value / (1.1 * base) * 40) > minPieRadius ? Math.floor(value / base * 40) : minPieRadius;\n    return pieRadius;\n}\n// 得到虚拟数据\nfunction getVirtulData() {\n    var date = +echarts.number.parseDate('2022-01-01');\n    var end = +echarts.number.parseDate('2022-01-10');\n    var dayTime = 3600 * 24 * 1000;\n    var data = [];\n    for (var time = date; time < end; time += dayTime) {\n        data.push([\n            echarts.format.formatTime('yyyy-MM-dd', time),\n            Math.floor((Math.random() + 0.1) * base)\n        ]);\n    }\n    return data;\n}\n// 根据虚拟数据得到饼图数据\nfunction getPieSeries(lineData, chart) {\n    return echarts.util.map(lineData, function (item, index) {\n        var center = chart.convertToPixel({seriesIndex: 0}, item);\n        return {\n            id: index + 'pie',\n            type: 'pie',\n            center: center,\n            label: {\n                normal: {\n                    formatter: '{c}',\n                    position: 'inside'\n                }\n            },\n            zlevel: 1,\n            radius: getPieRadius(item[1]),\n            data: [\n                {name: '工作', value: Math.round(Math.random() * 24)},\n                {name: '娱乐', value: Math.round(Math.random() * 24)},\n                {name: '睡觉', value: Math.round(Math.random() * 24)}\n            ]\n        };\n    });\n}\n\nvar lineData = getVirtulData();\n\noption = {\n    tooltip : {},\n    legend: {\n        data: ['工作', '娱乐', '睡觉'],\n        bottom: 20\n    },\n    grid: {\n        left: '10%',\n        right: '10%',\n        top:'10%',\n        bottom:'20%',\n    },\n    xAxis: {\n        type: 'category',\n        name: '日',\n        nameGap: 5,\n        axisLabel: {\n            color: '#000',\n            textStyle: {\n                fontSize: '13'\n            },\n        },\n        axisTick: {\n            show: true,\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#000',\n            }\n        },\n        splitLine: {\n            show: false\n        }\n    },\n    yAxis: {\n        type: 'value',\n        name: '步数',\n        nameGap: 10,\n        // scale: true,\n        nameTextStyle: {\n            fontSize: 13,\n        },\n        axisLabel: {\n            textStyle: {\n                fontSize: '13'\n            },\n        },\n        axisTick: {\n            show: true,\n        },\n        axisLine: {\n            show: true,\n            lineStyle: {\n                color: '#000',\n            }\n        },\n        splitLine: {\n            show: false,\n        }\n    },\n    series: [{\n        type: 'line',\n        symbolSize: 0,\n        lineStyle: {\n            color: '#000a',\n            width: 1,\n        },\n        data: lineData\n    }]\n};\n\nsetTimeout(function () {\n  myChart.setOption({\n    series: getPieSeries(lineData, myChart)\n  });\n}, 10);","html":"","externalScripts":"","updaterUID":"obd-o2tLhbYnOqERGa1YoPhP0N-Uqvfwi6t","theme":"","layout":"","viewCount":0,"userName":"X***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDCPJIZe1S.png?v=1641716267334","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","series-pie","tooltip"],"customTags":[],"updaterUserName":"X***1"}}