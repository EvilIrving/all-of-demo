{"status":0,"data":{"cid":"xKjXklTzuY","authorUid":"bd-251912376","authorUserName":"h***0","title":"最近N天每天的前10访问量接口情况","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-10T05:37:51.000Z","lastUpdateTime":"2020-07-10T05:37:51.000Z","auth":2,"uid":"bd-251912376","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-10T05:37:51.000Z","code":"var dataset = [\r\n    {\r\n        \"date\":\"2020-07-09\",\r\n        \"top1\":2291224,\r\n        \"top1_name\":\"cloud.generic\",\r\n        \"top2\":1046600,\r\n        \"top2_name\":\"heartbeat\",\r\n        \"top3\":848230,\r\n        \"top3_name\":\"/10a/v1/device/devicedetail\",\r\n        \"top4\":760854,\r\n        \"top4_name\":\"/SmartBulb/v1/device/devicedetail\",\r\n        \"top5\":253607,\r\n        \"top5_name\":\"/15a/v1/device/devicedetail\",\r\n        \"top6\":173738,\r\n        \"top6_name\":\"/inwallswitch/v1/device/devicedetail\",\r\n        \"top7\":152912,\r\n        \"top7_name\":\"/outdoorsocket15a/v1/device/devicedetail\",\r\n        \"top8\":143896,\r\n        \"top8_name\":\"getFirmwareUpdateInfoList\",\r\n        \"top9\":99133,\r\n        \"top9_name\":\"/131airPurifier/v1/device/deviceDetail\",\r\n        \"top10\":69172,\r\n        \"top10_name\":\"bypass\",\r\n        \"totalSum\":4866539,\r\n        \"otherSum\":809356\r\n    },\r\n    {\r\n        \"date\":\"2020-07-10\",\r\n        \"top1\":1762486,\r\n        \"top1_name\":\"cloud.generic\",\r\n        \"top2\":799123,\r\n        \"top2_name\":\"heartbeat\",\r\n        \"top3\":684676,\r\n        \"top3_name\":\"/10a/v1/device/devicedetail\",\r\n        \"top4\":624948,\r\n        \"top4_name\":\"/SmartBulb/v1/device/devicedetail\",\r\n        \"top5\":198458,\r\n        \"top5_name\":\"/15a/v1/device/devicedetail\",\r\n        \"top6\":126074,\r\n        \"top6_name\":\"/inwallswitch/v1/device/devicedetail\",\r\n        \"top7\":120893,\r\n        \"top7_name\":\"/outdoorsocket15a/v1/device/devicedetail\",\r\n        \"top8\":105994,\r\n        \"top8_name\":\"getFirmwareUpdateInfoList\",\r\n        \"top9\":79785,\r\n        \"top9_name\":\"/131airPurifier/v1/device/deviceDetail\",\r\n        \"top10\":64998,\r\n        \"top10_name\":\"bypass\",\r\n        \"totalSum\":3821454,\r\n        \"otherSum\":622452\r\n    }]\r\n\r\noption = {\r\n    \"color\":[\r\n        \"#e95464\",\r\n        \"#E87C25\",\r\n        \"#FCCE10\",\r\n        \"#69b076\",\r\n        \"#B5C334\",\r\n        \"#a69425\",\r\n        \"#bf783a\",\r\n        \"#cc7eb1\",\r\n        \"#758a99\",\r\n        \"#a0d8ef\"],\r\n    \"tooltip\":{\r\n        \"trigger\":\"axis\",\r\n        \"axisPointer\":{\r\n            \"type\":\"shadow\"\r\n        },\r\n        \"formatter\":(param) => {\r\n            // console.log(param)\r\n            let data = param[0].data\r\n            let date = param[0].name\r\n            let str = `<span style='font-weight:bold; font-size: 18px;'>${date}</span><br />总访问量：${data.totalSum}<br />`\r\n\r\n            for (let i = 0; i < param.length; i++) {\r\n                // let bar = param[i]\r\n                str += `${data['top' + (i + 1) + '_name']}：${data['top' + (i + 1)]}<br />`\r\n            }\r\n\r\n            str += `其他：${data.otherSum}`\r\n            return str\r\n        }\r\n    },\r\n    \"grid\":{\r\n        \"containLabel\":true,\r\n        \"left\":40,\r\n        \"right\":60,\r\n        \"bottom\":40,\r\n        \"top\":40\r\n    },\r\n    \"xAxis\":{\r\n        \"type\":\"value\",\r\n        \"name\":\"访问量\"\r\n    },\r\n    \"yAxis\":{\r\n        \"type\":\"category\"\r\n    },\r\n    \"dataset\":{\r\n        \"dimensions\":[\"date\"],\r\n        \"source\": dataset\r\n    },\r\n    \"series\":[]\r\n}\r\n\r\nfor (let i = 0; i < 10; i++) {\r\n    option.dataset.dimensions.push(`top${(i + 1)}`)\r\n    option.series.push({\r\n        type: 'bar',\r\n        cursor: 'default',\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'insideLeft',\r\n                color: '#000',\r\n                fontSize: 14,\r\n                textBorderColor: '#333',\r\n                textBorderWidth: 0,\r\n                formatter: (data) => {\r\n                    return `${data.value['top' + (i + 1) + '_name']}：${data.value['top' + (i + 1)]}`\r\n                }\r\n            }\r\n        },\r\n        itemStyle: {\r\n            barBorderRadius: [0, 50, 50, 0]\r\n        }\r\n    })\r\n}\r\n","html":"","externalScripts":"","updaterUID":"bd-251912376","theme":"","layout":"","viewCount":118,"userName":"h***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKjXklTzuY.png?v=1594359471532","isCustomThumbnail":1,"builtinTags":["category-work","dataset","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"h***0"}}