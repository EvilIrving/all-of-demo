{"status":0,"data":{"cid":"xJMNK4teFz","authorUid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","authorUserName":"l***y","title":"排行条形图-标签文字左对齐","description":"富文本；grip left与 axisLabel margin配合实现标签文字正常显示","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-25T07:39:35.000Z","lastUpdateTime":"2020-11-25T07:39:35.000Z","auth":2,"uid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-25T07:39:35.000Z","code":"var fontSize = (val) => {\r\n    return val * 100\r\n}\r\nvar colorRgba = (sHex) => {\r\n    // 十六进制颜色值的正则表达式\r\n    let reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/;\r\n    /* 16进制颜色转为RGB格式 */\r\n    let sColor = sHex.toLowerCase();\r\n    let alpha = 1;\r\n    if (sColor && reg.test(sColor)) {\r\n        if (sColor.length === 4 || sColor.length === 5) {\r\n            let sColorNew = \"#\";\r\n            for (let i = 1; i < sColor.length; i += 1) {\r\n                sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\r\n            }\r\n            sColor = sColorNew;\r\n        }\r\n        // 如果有透明度再执行\r\n        if (sColor.length === 9) {\r\n            alpha = (parseInt(\"0x\" + sColor.slice(7, 9)) / 255).toFixed(2);\r\n        }\r\n        //  处理六位的颜色值\r\n        let sColorChange = [];\r\n        for (let i = 1; i < 7; i += 2) {\r\n            sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\r\n        }\r\n        // console.log(\"rgba(\" + sColorChange.join(\",\") + \",\" + alpha + \")\");\r\n        return \"rgba(\" + sColorChange.join(\",\") + \",\" + alpha + \")\";\r\n    } else {\r\n        return sColor;\r\n    }\r\n}\r\nlet json = [{\r\n    name: \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\r\n    symbol: '正',\r\n    value: 40\r\n}, {\r\n    name: \"aabbbbbbbbbbbbb\",\r\n    symbol: '负',\r\n    value: 30\r\n}, {\r\n    name: \"cccccccccccccccccccccccccccc\",\r\n    symbol: '负',\r\n    value: 20\r\n}, {\r\n    name: \"ddddddd\",\r\n    symbol: '正',\r\n    value: 10\r\n}]\r\n\r\nlet color = ['#00feffb3', '#f08080b3']\r\nlet label = json.map((item) => item.name)\r\nconsole.log(label)\r\nlet data = []\r\nlet data1 = []\r\nfor (let i = 0; i < json.length; i++) {\r\n    let item = json[i]\r\n    data.push({\r\n        name: item.name,\r\n        value: item.value,\r\n        label: {\r\n            backgroundColor: item.symbol == '正' ? colorRgba(color[0]) : colorRgba(color[1])\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: item.symbol == '正' ? colorRgba(color[0]) : colorRgba(color[1])\r\n            }\r\n        }\r\n    })\r\n    data1.push({\r\n        name: item.name,\r\n        value: item.value + 1,\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: item.symbol == '正' ? colorRgba(color[0]) : colorRgba(color[1])\r\n            }\r\n        }\r\n    })\r\n}\r\noption = {\r\n    backgroundColor: '#012248',\r\n    grid: {\r\n        containLabel: true,\r\n        left: -fontSize(1)\r\n    },\r\n    xAxis: {\r\n        show: false,\r\n        type: 'value',\r\n        min: 0,\r\n        max: 50,\r\n    },\r\n    yAxis: [{\r\n        show: true,\r\n        type: 'category',\r\n        data: label,\r\n        inverse: true,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            // formatter: '{a|{value}}',\r\n            // rich: {\r\n            //   a: {\r\n            //   },\r\n            // },\r\n            align: 'left',\r\n            margin: fontSize(2.5),\r\n            color: '#fff',\r\n            fontSize: fontSize(0.13),\r\n        },\r\n    }, {\r\n        show: true,\r\n        type: 'category',\r\n        inverse: true,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n    }],\r\n    series: [{\r\n        name: '排行',\r\n        type: 'bar',\r\n        yAxisIndex: 0,\r\n        data: data,\r\n        barWidth: fontSize(0.06),\r\n        itemStyle: {\r\n            normal: {\r\n                barBorderRadius: fontSize(0.06),\r\n                /*  color: {\r\n                   type: 'linear',\r\n                   colorStops: [\r\n                     {\r\n                       offset: 0,\r\n                       color: 'rgba(0,77,167,1)'\r\n                     },\r\n                     {\r\n                       offset: 1,\r\n                       color: 'rgba(0,244,255,1)'\r\n                     }]\r\n                 }, */\r\n                shadowColor: colorRgba(color[1]),\r\n                shadowBlur: 5,\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                lineHeight: fontSize(0.4),\r\n                width: fontSize(0.4),\r\n                height: fontSize(0.4),\r\n                backgroundColor: 'rgba(255,255,255,0.1)',\r\n                borderRadius: fontSize(0.4),\r\n                formatter: '{a|{c}}',\r\n                distance: fontSize(0.2),\r\n                rich: {\r\n                    a: {\r\n                        align: 'center',\r\n                        color: '#fff',\r\n                        fontSize: fontSize(0.12),\r\n                        fontWeight: 'bolder',\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    }, {\r\n        name: '外边框',\r\n        type: 'bar',\r\n        data: data1,\r\n        yAxisIndex: 1,\r\n        barWidth: fontSize(0.10),\r\n        itemStyle: {\r\n            normal: {\r\n                barBorderRadius: fontSize(0.10),\r\n                borderRadius: fontSize(0.10),\r\n                borderWidth: 0.5,\r\n                color: 'transparent'\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n            }\r\n        },\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","theme":"","layout":"","viewCount":96,"userName":"l***y","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xJMNK4teFz.png?v=1606289975503","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar"],"customTags":[],"updaterUserName":"l***y"}}