{"status":0,"data":{"cid":"xOE3gLjkOg","authorUid":"bd-3658046543","authorUserName":"秦***1","title":"环形渐变色效果","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-09-10T10:14:40.000Z","lastUpdateTime":"2019-09-10T10:14:40.000Z","auth":2,"uid":"bd-3658046543","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-09-11T12:30:44.000Z","code":"option = {\r\n    backgroundColor: 'rgba(1, 17, 48, 0.8)',\r\n\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: 'center',\r\n        right: '10%',\r\n        textStyle: {\r\n            color: '#fff'\r\n        },\r\n        data: ['物损', '人伤', '死亡'],\r\n        formatter: name => {\r\n            let data = option.series[0].data;\r\n            let total = 0,\r\n                tarVal = 0;\r\n            data.map((ele, key) => {\r\n                total += Number(ele.value);\r\n                if (ele.name == name) {\r\n                    tarVal = Number(ele.value);\r\n                }\r\n            });\r\n            let p = 0;\r\n            if (total) {\r\n                p = ((tarVal / total) * 100).toFixed(0);\r\n            }\r\n            return `${name}${tarVal} (${p}%)`;\r\n        }\r\n    },\r\n    title: {\r\n        text: \"事故类型\",\r\n        x: '33%',\r\n        y: 'center',\r\n        textStyle: {\r\n            fontSize: 18,\r\n            fontWeight: 500,\r\n            color: \"rgba(255,255,255,1)\",\r\n            lineHeight: 25\r\n        }\r\n    },\r\n    series: [{\r\n        type: 'pie',\r\n        name: '',\r\n        center: [\"40%\", \"50%\"],\r\n        radius: ['45%', '70%'],\r\n        avoidLabelOverlap: false,\r\n        left: '10%',\r\n        itemStyle: {\r\n            normal: {\r\n\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n                formatter(obj) {\r\n\r\n                    return `{bigger|${obj.value}起}\\n{small|${obj.name}}`;\r\n                },\r\n                position: [\"30%\", \"50%\"]\r\n            },\r\n            emphasis: {\r\n                show: true,\r\n                textStyle: {\r\n\r\n                    color: \"#fff\",\r\n                    fontWeight: 'bold'\r\n                },\r\n                rich: {\r\n                    bigger: {\r\n                        fontSize: '30'\r\n                    },\r\n                    small: {\r\n                        fontSize: '20'\r\n                    }\r\n\r\n                }\r\n            }\r\n        },\r\n        labelLine: {\r\n            normal: {\r\n                show: true,\r\n                length: 20,\r\n                length2: 40\r\n            },\r\n            emphasis: {\r\n                show: true\r\n            }\r\n        },\r\n        data: [{\r\n                value: 335,\r\n                name: '物损',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                                // 0% 处的颜色   \r\n                                offset: 0,\r\n                                color: '#B4EC51'\r\n                            },\r\n                            {\r\n                                // 100% 处的颜色\r\n                                offset: 1,\r\n                                color: '#429321'\r\n                            }\r\n                        ], false)\r\n                    }\r\n                },\r\n\r\n            },\r\n            {\r\n                value: 310,\r\n                name: '人伤',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                                // 0% 处的颜色   \r\n                                offset: 0,\r\n                                color: '#FAD961'\r\n                            },\r\n                            {\r\n                                // 100% 处的颜色\r\n                                offset: 1,\r\n                                color: '#F76B1C'\r\n                            }\r\n                        ], false)\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                value: 234,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                                // 0% 处的颜色   \r\n                                offset: 0,\r\n                                color: '#F5515F'\r\n                            },\r\n                            {\r\n                                // 100% 处的颜色\r\n                                offset: 1,\r\n                                color: '#9F041B'\r\n                            }\r\n                        ], false)\r\n                    }\r\n                },\r\n                name: '死亡'\r\n            },\r\n        ]\r\n    }]\r\n};\r\nvar curIndex = -1;\r\n\r\n//增加高亮效果\r\nmyChart.on('click', 'series.pie', (params) => {\r\n        myChart.dispatchAction({\r\n          type: 'highlight',\r\n          seriesIndex: 0,\r\n          dataIndex: params.dataIndex\r\n        });\r\n        curIndex= params.dataIndex\r\n      });\r\n      myChart.on('mouseover','series.pie', (e) => {\r\n        //当检测到鼠标悬停事件，取消默认选中高亮\r\n        myChart.dispatchAction({\r\n          type: 'downplay',\r\n          seriesIndex: 0,\r\n          dataIndex: curIndex\r\n        });\r\n        if (this.curPieDataIndex != -1) {\r\n          //高亮显示悬停的那块\r\n          myChart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 0,\r\n            dataIndex: e.dataIndex\r\n          });\r\n        }\r\n\r\n      });\r\n      //检测鼠标移出后显示之前默认高亮的那块\r\n      myChart.on('mouseout','series.pie', (e)=> {\r\n        if (this.curPieDataIndex != -1) {\r\n          myChart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 0,\r\n            dataIndex: curIndex\r\n          });\r\n        }\r\n\r\n      });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","html":"","externalScripts":"","updaterUID":"bd-3658046543","theme":"","layout":"","viewCount":116,"userName":"秦***1","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOE3gLjkOg.png?v=1568205044557","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title"],"customTags":[],"updaterUserName":"秦***1"}}