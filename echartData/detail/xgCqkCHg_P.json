{"status":0,"data":{"cid":"xgCqkCHg_P","authorUid":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","authorUserName":"曹***灰","title":"饼图-轮播","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-17T10:30:43.000Z","lastUpdateTime":"2020-12-17T10:30:43.000Z","auth":2,"uid":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-17T10:30:43.000Z","code":"var _this = this;\n\nvar isSet = true; // 判断：当鼠标移上去的时候，自动高梁被取消\nvar charPie3currentIndex = 0;\n// 基于准备好的dom，初始化echarts实例\nlet myChart = echarts.init(document.getElementById(\"chart-panel\"));\n\nlet value = 45;\nlet title = '上市公司（授信企业）';\nlet companyName = \"YYYY公司模型预警（ZZHJ）\"\nvar scaleData = [{\n        \"count\": 92,\n        \"typeName\": \"上市公司（授信企业）股价连续三天跌停\",\n        \"prevId\": \"3052\",\n        \"brNo\": null,\n        \"brNm\": null,\n        \"prevFlag\": null,\n        \"custName\": null,\n        \"prevDate\": null,\n        \"prevRsn\": null\n    },\n    {\n        \"count\": 334,\n        \"typeName\": \"疑似授信客户未纳入现有集团管理\",\n        \"prevId\": \"3060\",\n        \"brNo\": null,\n        \"brNm\": null,\n        \"prevFlag\": null,\n        \"custName\": null,\n        \"prevDate\": null,\n        \"prevRsn\": null\n    },\n\n    {\n        \"count\": 92,\n        \"typeName\": \"上市公司（授信企业）股价连续三天跌停\",\n        \"prevId\": \"3052\",\n        \"brNo\": null,\n        \"brNm\": null,\n        \"prevFlag\": null,\n        \"custName\": null,\n        \"prevDate\": null,\n        \"prevRsn\": null\n    },\n    {\n        \"count\": 334,\n        \"typeName\": \"疑似授信客户未纳入现有集团管理\",\n        \"prevId\": \"3060\",\n        \"brNo\": null,\n        \"brNm\": null,\n        \"prevFlag\": null,\n        \"custName\": null,\n        \"prevDate\": null,\n        \"prevRsn\": null\n    },\n];\nconst chartPieColors = [\n    [{\n            offset: 0,\n            color: \"#59B5FF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#2263BD\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#FF9793\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#E7504C\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#AE60FA\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#6D32C1\" // 100% 处的颜色\n        }\n    ],\n\n    [{\n            offset: 0,\n            color: \"#A05447\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#E8684A\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#574DFF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#564DFE\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#00A5A3\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#00A9A7\" // 100% 处的颜色\n        }\n    ],\n\n    [{\n            offset: 0,\n            color: \"#004BC5\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#0583F0\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#00D887\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#00E7AB\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#7FACA7\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#BDEFDB\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#AE60FA\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#6D32C1\" // 100% 处的颜色\n        }\n    ],\n\n    [{\n            offset: 0,\n            color: \"#EFCE49\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#D79C12\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#FFB058\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#C56625\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#4ACC88\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#27A657\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#2C989E\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#27BCC9\" // 100% 处的颜色\n        }\n    ],\n    [{\n            offset: 0,\n            color: \"#8A98FF\" // 0% 处的颜色\n        },\n        {\n            offset: 1,\n            color: \"#2B36A8\" // 100% 处的颜色\n        }\n    ]\n]\nvar data = [];\nvar data1 = [];\n\n\nfor (var i = 0; i < scaleData.length; i++) {\n    // sum += scaleData[i].value\n\n    data.push({\n        value: scaleData[i].count,\n        name: scaleData[i].typeName,\n        prevId: scaleData[i].prevId,\n        itemStyle: {\n            normal: {\n                color: {\n                    type: \"linear\",\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: chartPieColors[i],\n                    global: false // 缺省为 false\n                },\n                opacity: 1,\n            }\n        }\n    });\n\n    data1.push({\n        value: scaleData[i].count,\n        name: scaleData[i].typeName,\n        prevId: scaleData[i].prevId,\n        itemStyle: {\n            normal: {\n                color: {\n                    type: \"linear\",\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: chartPieColors[i],\n                    global: false // 缺省为 false\n                },\n                opacity: 0.5,\n            }\n        }\n    });\n}\noption = {\n    backgroundColor: '#0a1a2a',\n    title: [{\n        // text: `${title}\\n${companyName}\\n${value}%`,\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            color: '#8c949a',\n            fontSize: 20,\n            fontWeight: 'normal',\n        }\n    }],\n    tooltip: {\n        trigger: 'item',\n        backgroundColor: 'rgba(0,0,0,0)',\n        position: ['40%', '45%'],\n        //  position: [50, 50],\n        textStyle: {\n            fontSize: 17,\n            align:\"center\",\n        },\n        formatter: function(params) {\n            let name = params.data.name,name2,name1;\n            if(name.length > 10){\n                name1 = name.slice(0,10)\n                name2 = name.slice(10,name.length)\n            }\n            return `${name1}<br/>${name2}    ${params.data.prevId} <br/>${params.data.value}`;\n        }\n    },\n    series: [{\n            name: '',\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: ['50%', '60%'],\n            center: ['50%', '50%'],\n            label: {\n                show: false,\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                },\n\n            },\n            tooltip: {\n                show: false,\n\n            },\n            data: data1\n        },\n        {\n            name: 'title',\n            type: 'pie',\n            radius: ['54%', '60%'],\n            center: ['50%', '50%'],\n            label: {\n                show: false,\n            },\n            labelLine: {\n                normal: {\n                    smooth: true,\n                    length: 10,\n                    lineStyle: {\n                        width: 1.5\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    shadowBlur: 15,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)',\n                }\n            },\n            data: data\n        }\n    ]\n};\n// 2、鼠标移动上去的时候的高亮动画\nmyChart.on(\"mouseover\", function(param) {\n    isSet = false;\n    clearInterval(_this.startCharts);\n    // 取消之前高亮的图形\n    myChart.dispatchAction({\n        type: \"downplay\",\n        seriesIndex: 0,\n        dataIndex: charPie3currentIndex,\n    });\n    // 高亮当前图形\n    myChart.dispatchAction({\n        type: \"highlight\",\n        seriesIndex: 0,\n        dataIndex: param.dataIndex,\n    });\n    // 显示 tooltip\n    myChart.dispatchAction({\n        type: \"showTip\",\n        seriesIndex: 0,\n        dataIndex: param.dataIndex,\n    });\n});\n// 3、自动高亮展示\nvar chartHover = function() {\n    var dataLen = option.series[0].data.length;\n    // 取消之前高亮的图形\n    myChart.dispatchAction({\n        type: \"downplay\",\n        seriesIndex: 1,\n        dataIndex: charPie3currentIndex,\n    });\n    charPie3currentIndex = (charPie3currentIndex + 1) % dataLen;\n    // 高亮当前图形\n    myChart.dispatchAction({\n        type: \"highlight\",\n        seriesIndex: 1,\n        dataIndex: charPie3currentIndex,\n    });\n    // 显示 tooltip\n    myChart.dispatchAction({\n        type: \"showTip\",\n        seriesIndex: 1,\n        dataIndex: charPie3currentIndex,\n    });\n};\n_this.startCharts = setInterval(chartHover, 5000);\n// 4、鼠标移出之后，恢复自动高亮\nmyChart.on(\"mouseout\", function(param) {\n    if (!isSet) {\n        _this.startCharts = setInterval(chartHover, 5000);\n        isSet = true;\n        myChart.dispatchAction({\n            type: \"downplay\",\n            seriesIndex: 1,\n            dataIndex: param.dataIndex,\n        });\n    }\n});","html":"","externalScripts":"","updaterUID":"obd-olLAU1BTSerG8y0U7GNm2DkGxr9dK0e","theme":"","layout":"","viewCount":35,"userName":"曹***灰","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgCqkCHg_P.png?v=1608201043374","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"曹***灰"}}