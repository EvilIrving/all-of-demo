{"status":0,"data":{"cid":"xTXhjudr6B","authorUid":"bd-2991937169","authorUserName":"爷***命","title":"地图下钻 + 条形统计图","description":"地图下钻+条形统计；实现条形统计图统计数据，点击地图或条形图下钻到对应的市区地图功能","latestVersion":3,"alwaysLatest":1,"createTime":"2019-07-04T04:03:52.000Z","lastUpdateTime":"2019-07-04T04:03:52.000Z","auth":2,"uid":"bd-2991937169","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-05T10:13:03.000Z","code":"// 小部分部分下一级市区因为没有上传地图，所以无法下钻。大部分可以正常跳转\n\nvar zhumadian = \"/asset/get/s/data-1562118579950-xXLfaPrXL.json\";\nvar zhoukou = \"/asset/get/s/data-1562118572274-v9xfaTwy5.json\";\nvar zhengzhou = \"/asset/get/s/data-1562118560176-EShp-n1M3.json\";\nvar xuchang = \"/asset/get/s/data-1562118551860-kjVYXRXie.json\";\nvar xinyang = \"/asset/get/s/data-1562118541540-1oHhC50T2.json\";\nvar xinxiang = \"/asset/get/s/data-1562118523296-25lVhSW-v.json\";\nvar shangqiu = \"/asset/get/s/data-1562118518920-oiGJ003Uo.json\";\nvar sanmenxia = \"/asset/get/s/data-1562118509577-7n9hCY3ms.json\";\nvar pingdingshan = \"/asset/get/s/data-1562118493063-2EXbyXPks.json\";\nvar nanyang = \"/asset/get/s/data-1562118482129-BF0-vIlyJ.json\";\nvar luoyang = \"/asset/get/s/data-1562118461353-wCQVj7-4u.json\";\nvar kaifeng = \"/asset/get/s/data-1562118436936-dm62fgITa.json\";\nvar jiaozuo = \"/asset/get/s/data-1562118423443-dsMnIHN5q.json\";\nvar henan = \"/asset/get/s/data-1562117497263-O6MV8S2ot.json\";\nvar anyang = \"/asset/get/s/data-1562117441591-aML_BHbjY.json\";\n\nvar nameMap = '河南省';\nvar mapData = [\n    {\n        name: '焦作市',\n        value: '598'\n    }, {\n        name: '开封市',\n        value: '2223'\n    }, {\n        name: '郑州市',\n        value: '637'\n    }, {\n        name: '周口市',\n        value: '885'\n    }, {\n        name: '许昌市',\n        value: '768'\n    }, {\n        name: '南阳市',\n        value: '1233'\n    }, {\n        name: '信阳市',\n        value: '1633'\n    }, {\n        name: '新乡市',\n        value: '1768'\n    }, {\n        name: '洛阳市',\n        value: '1233'\n    }, {\n        name: '河南省',\n        value: '3633'\n    }\n];\n\nvar seriesdata = [\n    // 左边地图\n    {\n        type: 'map',\n        map: nameMap,\n        aspectScale: 0.75,\n        left: '2%',\n        top: 10,\n        width: '60%',\n        height: '90%',\n        roam: false,\n        itemStyle: {\n            normal: {\n                areaColor: '#667aed',\n                borderColor: '#fff',\n                borderWidth: 1.5,\n                label: {\n                    show: true,\n                    color: '#fff',\n                },\n\n                emphasis: {\n                    label: {\n                        show: true\n                    }\n                }\n            }\n        },\n    },\n    //右边状图\n    {\n        name: '',\n        type: 'bar',\n        xAxisIndex: 0,\n        yAxisIndex: 0,\n        barWidth: '30%',\n        itemStyle: {\n            normal: {\n                color: '#f5b335',\n            }\n        },\n        label: {\n            normal: {\n                show: true,\n                position: \"right\",\n                textStyle: {\n                    color: \"#c23531\"\n                }\n            }\n        },\n        data: mapData\n    },\n\n];\nvar ynameMap = [];\nfor (var i = 0; i < 10; i++) {\n    ynameMap.push(seriesdata[1].data[i].name);\n}\n\nvar optionMap = {\n    backgroundColor: \"#00fa9a\",\n    grid: {\n        right: '5%',\n        bottom: '3%',\n        width: '25%',\n        height: '80%'\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: function (data) {\n            if (!isNaN(data.value)) {\n                return data.name + \"：\" + data.value;\n            }\n        },\n    },\n    xAxis: {\n        gridIndex: 0,\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        }\n    },\n    yAxis: {\n        gridIndex: 0,\n        interval: 0,\n        data: ynameMap,\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: true\n        },\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            show: false,\n            lineStyle: {\n                color: \"#c23531\"\n            }\n        }\n    },\n    series: seriesdata\n};\n\n$.get(henan, function (gdMap) {\n    echarts.registerMap(nameMap, gdMap);\n    myChart.setOption(optionMap, true);\n});\n\nconst clickCity = param => {\n    switch (param.name) {\n        case '河南省': city = henan ; break;\n        case '洛阳市': city = luoyang ; break;\n        case '新乡市': city = xinxiang ; break;\n        case '信阳市': city = xinyang ; break;\n        case '南阳市': city = nanyang ; break;\n        case '许昌市': city = xuchang ; break;\n        case '周口市': city = zhoukou ; break;\n        case '郑州市': city = zhengzhou ; break;\n        case '开封市': city = kaifeng ; break;\n        case '焦作市': city = jiaozuo ; break;\n        case '平顶山市': city = pingdingshan ; break;\n        case '驻马店市': city = zhumadian ; break;\n        case '三门峡市': city = sanmenxia ; break;\n        case '商丘市': city = shangqiu ; break;\n        case '安阳市': city = anyang ; break;\n    }\n    \n    $.get(city, function (gdMap) {\n        echarts.registerMap(nameMap, gdMap);\n        myChart.setOption(optionMap, true);\n    });\n};\n\nmyChart.on(\"click\", clickCity);\n","html":"","externalScripts":"","updaterUID":"bd-2991937169","theme":"","layout":"","viewCount":17662,"userName":"爷***命","commentCount":8,"starCount":34,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTXhjudr6B.png?v=1564999983988","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-map","tooltip"],"customTags":[],"updaterUserName":"爷***命"}}