{"status":0,"data":{"cid":"xNyZFhRviN","authorUid":"bd-436583279","authorUserName":"applezsz","title":"自定义tooltip中显示图表","description":"tooltip中显示图表","latestVersion":12,"alwaysLatest":1,"createTime":"2019-04-09T16:04:07.000Z","lastUpdateTime":"2019-04-09T16:04:07.000Z","auth":2,"uid":"bd-436583279","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":12,"parentVersion":9,"echartsVersion":"4.2.1","versionCreateTime":"2019-04-10T13:13:00.000Z","code":"function tooltipCharts(x, y, z, total) {\r\n    var myChart = echarts.init(document.getElementById('tooltipBarId'));\r\n    option = {\r\n        animation: false,\r\n        color: ['#16a474', '#1073b8', '#613086'],\r\n        title: {\r\n            text: total,\r\n            x: '34',\r\n            y: '57',\r\n            textStyle: {\r\n                fontWeight: 'normal',\r\n                fontSize: 34,\r\n                color: '#fff',\r\n                lineHeight: 1\r\n\r\n            }\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: \"{b}:{c}\"\r\n        },\r\n        legend: {\r\n            orient: 'vertical',\r\n            right: '10px',\r\n            y: \"center\",\r\n            data: ['大行资金面情绪指数', '中、小行资金面情绪指数', '非银行机构资金面情绪指数'],\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'pie',\r\n            center: [60, '50%'], //饼图的中心（圆心）坐标\r\n            radius: [30, 45], //饼图的半径\r\n            avoidLabelOverlap: false,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                },\r\n                emphasis: {\r\n                    show: false\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            data: [{\r\n                    value: x,\r\n                    name: '大行资金面情绪指数'\r\n                },\r\n                {\r\n                    value: y,\r\n                    name: '中、小行资金面情绪指数'\r\n                },\r\n                {\r\n                    value: z,\r\n                    name: '非银行机构资金面情绪指数'\r\n                }\r\n            ]\r\n        }]\r\n    };\r\n    myChart.setOption(option);\r\n}\r\nvar FXSIData = {\r\n    \"timeList\": [\"09:00\",\"09:15\", \"09:30\", \"09:45\", \"10:00\", \"10:15\", \"10:30\", \"10:45\", \"11:00\", \"11:15\", \"11:30\", \"11:45\", \"12:00\", \"12:15\", \"12:30\", \"12:45\", \"13:00\", \"13:15\", \"13:30\", \"13:45\", \"14:00\"],\r\n    \"dataList\": [{\r\n        \"value\": \"33\",\r\n        \"single\": [15, 10, 8]\r\n    }, {\r\n        \"value\": \"18\",\r\n        \"single\": [6, 3, 9]\r\n    }, {\r\n        \"value\": \"42\",\r\n        \"single\": [20, 16, 6]\r\n    }, {\r\n        \"value\": \"44\",\r\n        \"single\": [16, 14, 14]\r\n    }, {\r\n        \"value\": \"78\",\r\n        \"single\": [30, 20, 28]\r\n    }, {\r\n        \"value\": \"50\",\r\n        \"single\": [15, 15, 20]\r\n    }, {\r\n        \"value\": \"96\",\r\n        \"single\": [35, 30, 31]\r\n    }, {\r\n        \"value\": \"48\",\r\n        \"single\": [12, 6, 30]\r\n    }, {\r\n        \"value\": \"46\",\r\n        \"single\": [22, 20, 4]\r\n    }, {\r\n        \"value\": \"66\",\r\n        \"single\": [15, 15, 36]\r\n    }, {\r\n        \"value\": \"43\",\r\n        \"single\": [13, 17, 13]\r\n    }, {\r\n        \"value\": \"42\",\r\n        \"single\": [10, 22, 12]\r\n    }, {\r\n        \"value\": \"20\",\r\n        \"single\": [8, 8, 4]\r\n    }, {\r\n        \"value\": \"44\",\r\n        \"single\": [19, 10, 15]\r\n    }, {\r\n        \"value\": \"10\",\r\n        \"single\": [4, 5, 1]\r\n    }, {\r\n        \"value\": \"40\",\r\n        \"single\": [10, 12, 18]\r\n    }, {\r\n        \"value\": \"42\",\r\n        \"single\": [18, 8, 16]\r\n    }, {\r\n        \"value\": \"30\",\r\n        \"single\": [12, 8, 10]\r\n    }, {\r\n        \"value\": \"44\",\r\n        \"single\": [18, 12, 14]\r\n    }, {\r\n        \"value\": \"18\",\r\n        \"single\": [6, 6, 6]\r\n    }, {\r\n        \"value\": \"46\",\r\n        \"single\": [20, 10, 16]\r\n    }]\r\n}\r\n\r\nvar FXSIDataLength = FXSIData.dataList.length;\r\noption = {\r\n    color: ['#fff'],\r\n    grid: {\r\n        left: '1%',\r\n        right: '10%',\r\n        bottom: '3%',\r\n        top: '4%',\r\n        containLabel: true\r\n    },\r\n    tooltip: {\r\n        padding: 0,\r\n        trigger: 'axis',\r\n        enterable: true,\r\n        transitionDuration: 1,\r\n        textStyle: {\r\n            color: '#000',\r\n            decoration: 'none',\r\n        },\r\n        axisPointer: {\r\n            // 坐标轴指示器，坐标轴触发有效\r\n            type: \"line\", // 默认为直线，可选为：'line' | 'shadow'\r\n            label: {\r\n                show: true //显示横坐标文字背景\r\n            }\r\n        },\r\n        formatter: function(params) {\r\n            \r\n            console.log(params.data)\r\n\r\n            var tipHtml = '';\r\n\r\n            tipHtml = '<div>' +\r\n                '<div id=\"tooltipBarId\" style=\"height:120px;width:320px\"></div>' +\r\n                '</div>';\r\n\r\n            var lgBanks = params[0].data.single[0];\r\n            var smBanks = params[0].data.single[1];\r\n            var noBanks = params[0].data.single[2];\r\n            var total = params[0].data.value;\r\n\r\n            setTimeout(function() {\r\n                tooltipCharts(lgBanks, smBanks, noBanks, total);\r\n            }, 10);\r\n\r\n            return tipHtml;\r\n\r\n        },\r\n    },\r\n    dataZoom: {\r\n        startValue: FXSIData.timeList[FXSIData.timeList.length - 20],\r\n        endValue: FXSIData.timeList[FXSIData.timeList.length],\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        minInterval: 1,\r\n        splitNumber: 20,\r\n        axisLine: {\r\n            onZero: false,\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        data: FXSIData.timeList,\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        boundaryGap: false,\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    series: [{\r\n        name: 'uuu',\r\n        type: 'line',\r\n        lineStyle: {\r\n            normal: {\r\n                color: \"#fff\", // 线条颜色\r\n                width: 3\r\n            }\r\n        },\r\n        areaStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: 'rgb(121, 64, 147)'\r\n                }, {\r\n                    offset: 0.5,\r\n                    color: 'rgb(72, 75, 142)'\r\n                }, {\r\n                    offset: 1,\r\n                    color: 'rgb(18, 117, 161)'\r\n                }]),\r\n                shadowColor: 'rgba(0, 0, 0, 0.1)',\r\n                shadowBlur: 10\r\n            }\r\n        },\r\n        data: FXSIData.dataList\r\n    }]\r\n};\r\nsetTimeout(function() {\r\n\r\n    // 高亮当前图形\r\n    myChart.dispatchAction({\r\n        type: 'highlight',\r\n        seriesIndex: 0,\r\n        dataIndex: FXSIDataLength-1,\r\n    });\r\n    // 显示 tooltip\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 0,\r\n        dataIndex:FXSIDataLength-1\r\n    });\r\n    \r\n},1000);\r\nmyChart.on('mouseover', function (params) {\r\n    \r\n    console.log(params);\r\n    \r\n\r\n});","html":"","externalScripts":"","updaterUID":"bd-436583279","theme":"","layout":"","viewCount":37,"userName":"applezsz","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNyZFhRviN.png?v=1554901980138","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-line","tooltip"],"customTags":[],"updaterUserName":"applezsz"}}