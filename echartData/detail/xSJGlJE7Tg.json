{"status":0,"data":{"cid":"xSJGlJE7Tg","authorUid":"bd-1661529759","authorUserName":"l***o","title":"区域流向","description":"区域流向","latestVersion":2,"alwaysLatest":1,"createTime":"2017-04-06T02:58:49.000Z","lastUpdateTime":"2017-04-06T02:58:49.000Z","auth":2,"uid":"bd-1661529759","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.5.1","versionCreateTime":"2017-04-06T02:59:03.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1491362911797-SkuvE1zpe.json\";\n$.get(uploadedDataURL, function(chinaJson) {\n\t\techarts.registerMap('guangzhou', chinaJson);\n\t\t\n\t\tvar GZ_DATA_GEO_CoordMap = {\n\t\t\t\t'天河区': [113.368672,23.130389],\n\t\t\t\t'黄埔区': [113.466408,23.111777],\n\t\t\t\t'海珠区': [113.323254,23.089173],\n\t\t\t\t'越秀区': [113.272949,23.135441],\n\t\t\t\t'荔湾区': [113.250815,23.131453],\n\t\t\t\t'白云区': [113.278986,23.164151],\n\t\t\t\t'南沙区': [113.530511,22.808027],\n\t\t\t\t'花都区': [113.225806,23.412711],\n\t\t\t\t'增城区': [113.817106,23.267509],\n\t\t\t\t'从化区': [113.593464,23.555101],\n\t\t\t\t'番禺区': [113.391669,22.943615]\n\t\t}\n\n\t\tvar ZCData = [\n\t\t              [{name:'增城区'}, {name:'番禺区',value:95}],\n\t\t              [{name:'增城区'}, {name:'从化区',value:90}],\n\t\t              [{name:'增城区'}, {name:'天河区',value:80}],\n\t\t              [{name:'增城区'}, {name:'花都区',value:70}],\n\t\t              [{name:'增城区'}, {name:'南沙区',value:60}],\n\t\t              [{name:'增城区'}, {name:'白云区',value:50}],\n\t\t              [{name:'增城区'}, {name:'荔湾区',value:40}],\n\t\t              [{name:'增城区'}, {name:'越秀区',value:30}],\n\t\t              [{name:'增城区'}, {name:'海珠区',value:20}],\n\t\t              [{name:'增城区'}, {name:'增城区',value:10}],\n\t\t              [{name:'增城区'}, {name:'黄埔区',value:10}]\n\t\t          ];\n\n\t\tvar NSData = [\n\t\t              [{name:'南沙区'},{name:'黄埔区',value:95}],\n\t\t              [{name:'南沙区'},{name:'海珠区',value:90}],\n\t\t              [{name:'南沙区'},{name:'越秀区',value:80}],\n\t\t              [{name:'南沙区'},{name:'荔湾区',value:70}],\n\t\t              [{name:'南沙区'},{name:'天河区',value:60}],\n\t\t              [{name:'南沙区'},{name:'白云区',value:50}],\n\t\t              [{name:'南沙区'},{name:'花都区',value:40}],\n\t\t              [{name:'南沙区'},{name:'增城区',value:30}],\n\t\t              [{name:'南沙区'},{name:'从化区',value:20}],\n\t\t              [{name:'南沙区'},{name:'番禺区',value:10}]\n\t\t          ];\n\t\t          \n\t\tvar HZData = [\n\t\t              [{name:'海珠区'},{name:'黄埔区',value:95}],\n\t\t              [{name:'海珠区'},{name:'白云区',value:90}],\n\t\t              [{name:'海珠区'},{name:'越秀区',value:80}],\n\t\t              [{name:'海珠区'},{name:'荔湾区',value:70}],\n\t\t              [{name:'海珠区'},{name:'天河区',value:60}],\n\t\t              [{name:'海珠区'},{name:'南沙区',value:50}],\n\t\t              [{name:'海珠区'},{name:'花都区',value:40}],\n\t\t              [{name:'海珠区'},{name:'增城区',value:30}],\n\t\t              [{name:'海珠区'},{name:'从化区',value:20}],\n\t\t              [{name:'海珠区'},{name:'番禺区',value:10}]\n\t\t              ];\n\n\t\tvar CHData = [\n\t\t              [{name:'从化区'},{name:'黄埔区',value:95}],\n\t\t              [{name:'从化区'},{name:'白云区',value:90}],\n\t\t              [{name:'从化区'},{name:'越秀区',value:80}],\n\t\t              [{name:'从化区'},{name:'荔湾区',value:70}],\n\t\t              [{name:'从化区'},{name:'天河区',value:60}],\n\t\t              [{name:'从化区'},{name:'南沙区',value:50}],\n\t\t              [{name:'从化区'},{name:'花都区',value:40}],\n\t\t              [{name:'从化区'},{name:'增城区',value:30}],\n\t\t              [{name:'从化区'},{name:'海珠区',value:20}],\n\t\t              [{name:'从化区'},{name:'番禺区',value:10}]\n\t\t              ];\n\n\t\tvar HDData = [\n\t\t              [{name:'花都区'},{name:'黄埔区',value:95}],\n\t\t              [{name:'花都区'},{name:'白云区',value:90}],\n\t\t              [{name:'花都区'},{name:'越秀区',value:80}],\n\t\t              [{name:'花都区'},{name:'荔湾区',value:70}],\n\t\t              [{name:'花都区'},{name:'天河区',value:60}],\n\t\t              [{name:'花都区'},{name:'南沙区',value:50}],\n\t\t              [{name:'花都区'},{name:'从化区',value:40}],\n\t\t              [{name:'花都区'},{name:'增城区',value:30}],\n\t\t              [{name:'花都区'},{name:'海珠区',value:20}],\n\t\t              [{name:'花都区'},{name:'番禺区',value:10}]\n\t\t              ];\n\n\n\t\tvar planePath_gz = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\n\t\tvar convertData_gz = function (data) {\n\t\t    var res = [];\n\t\t    for (var i = 0; i < data.length; i++) {\n\t\t        var dataItem = data[i];\n\t\t        var fromCoord = GZ_DATA_GEO_CoordMap[dataItem[0].name];\n\t\t        var toCoord = GZ_DATA_GEO_CoordMap[dataItem[1].name];\n\t\t        if (fromCoord && toCoord) {\n\t\t            res.push({\n\t\t                fromName: dataItem[0].name,\n\t\t                fromValue : dataItem[1].value,\n\t\t                toName: dataItem[1].name,\n\t\t                coords: [fromCoord, toCoord]\n\t\t            });\n\t\t        }\n\t\t    }\n\t\t    return res;\n\t\t};\n\n\t\tvar color = ['#a6c84c', '#ffa022', '#46bee9','#ff3399','#D15FEE'];\n\t\tvar series = [];\n\t\t[['增城区', ZCData], ['南沙区', NSData], ['海珠区', HZData],['从化区', CHData],['花都区', HDData]].forEach(function (item, i) {\n\t\t    series.push({\n\t\t        name: item[0],\n\t\t        type: 'lines',\n\t\t        zlevel: 1,\n\t\t        effect: {\n\t\t        \tshow : true,\n\t\t\t\t\tperiod : 6,\n\t\t\t\t\ttrailLength : 0.7,\n\t\t\t\t\tcolor : '#fff',\n\t\t\t\t\tsymbolSize : 3,\n\t\t\t\t\tshadowBlur : 4.4\n\t\t        },\n\t\t        lineStyle: {\n\t\t            normal: {\n\t\t                color: color[i],\n\t\t                width: 0,\n\t\t                curveness: 0.2\n\t\t            }\n\t\t        },\n\t\t        data: convertData_gz(item[1])\n\t\t    },\n\t\t    {\n\t\t        name: item[0],\n\t\t        type: 'lines',\n\t\t        zlevel: 2,\n\t\t        symbol: ['none', 'arrow'],\n\t\t        symbolSize: 10,\n\t\t        effect: {\n\t\t            show: true,\n\t\t            period: 6,\n\t\t            trailLength: 0,\n\t\t            //symbol: planePath_gz,\n\t\t            symbolSize: 6\n\t\t        },\n\t\t        lineStyle: {\n\t\t            normal: {\n\t\t                color: color[i],\n\t\t                width: 1,\n\t\t                opacity: 0.5,\n\t\t                curveness: 0.2\n\t\t            }\n\t\t        },\n\t\t        data: convertData_gz(item[1])\n\t\t    },\n\t\t    {\n\t\t        name: item[0],\n\t\t        type: 'effectScatter',\n\t\t        coordinateSystem: 'geo',\n\t\t        zlevel: 2,\n\t\t        rippleEffect: {\n\t\t            brushType: 'stroke'\n\t\t        },\n\t\t        label: {\n\t\t            normal: {\n\t\t                show: (i == 0 ? true : false),\n\t\t                position: 'right',\n\t\t                formatter: '{b}'\n\t\t            }\n\t\t        },\n\t\t        symbolSize: function (val) {\n\t\t            return val[2] / 10;\n\t\t        },\n\t\t        itemStyle: {\n\t\t            normal: {\n\t\t                color: color[i]\n\t\t            }\n\t\t        },\n\t\t        data: item[1].map(function (dataItem) {\n\t\t            return {\n\t\t                name: dataItem[1].name,\n\t\t                value: GZ_DATA_GEO_CoordMap[dataItem[1].name].concat([dataItem[1].value])\n\t\t            };\n\t\t        })\n\t\t    });\n\t\t});\n\n\n\t\tvar GZ_DATA_TEST = {\n\t\t\t\ttooltip: {\n\t\t\t        trigger: 'item',\n\t\t\t        formatter: function (params) {\n\t\t\t        \tif (params.data.fromName) {\n\t\t\t        \t\treturn params.data.fromName + \" > \" + params.data.toName + \" <br/>流量数 : \" + params.data.fromValue;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\treturn params.name + \"<br/>流向广州人数：\" + params.value[2];\n\t\t\t\t\t\t}\n\t\t\t            \n\t\t\t        }\n\t\t\t    },\n\t\t\t    legend: {\n\t\t\t        orient: 'vertical',\n\t\t\t        top:'5%',\n\t\t\t        left: 'right',\n\t\t\t        data:['增城区', '南沙区', '海珠区','从化区','花都区'],\n\t\t\t        textStyle: {\n\t\t\t            color: '#fff'\n\t\t\t        },\n\t\t\t        selectedMode: 'mutipla',\n\t\t\t        bottom:'50%'\n\t\t\t    },\n\t\t\t\tvisualMap: {\n\t\t\t        min: 0,\n\t\t\t        max: 100,\n\t\t\t        calculable: true,\n\t\t\t        inRange: {\n\t\t\t            color: ['#50a3ba', '#eac736', '#d94e5d']\n\t\t\t        },\n\t\t\t        textStyle: {\n\t\t\t            color: '#fff'\n\t\t\t        },\n\t\t\t        bottom:\"10%\"\n\t\t\t    },\n\t\t\t    geo : {\n\t\t\t\t\tmap : 'guangzhou',\n\t\t\t\t\tlabel : {\n\t\t\t\t\t\temphasis : {\n\t\t\t\t\t\t\tshow : true,\n\t\t\t\t\t\t\ttextStyle : {\n\t\t\t\t\t\t\t\tcolor : '#fff'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\titemStyle : {\n\t\t\t\t\t\tnormal : {\n\t\t\t\t\t\t\tareaColor : '#171717',\n\t\t\t\t\t\t\tborderColor : '#48669B'\n\t\t\t\t\t\t},\n\t\t\t\t\t\temphasis : {\n\t\t\t\t\t\t\tareaColor : 'gray'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tseries : series\n\t\t\t};\n\n\n\t\tmyChart.setOption(GZ_DATA_TEST);\n\t});\n","html":"","externalScripts":"","updaterUID":"bd-1661529759","theme":"dark","layout":"","viewCount":3588,"userName":"l***o","commentCount":4,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSJGlJE7Tg.png?v=1491447543971","isCustomThumbnail":0,"builtinTags":["axisPointer","category-work","geo","legend","series-effectScatter","series-lines","tooltip","visualMap"],"customTags":[],"updaterUserName":"l***o"}}