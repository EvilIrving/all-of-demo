{"status":0,"data":{"cid":"xDfe9PgPgQ","authorUid":"bd-1879983178","authorUserName":"k***3","title":"北京人口分布24小时潮汐","description":"使用人口经纬度数据(由于平台最大上传为5M,数据筛减后从8时到21时人口潮汐)","latestVersion":17,"alwaysLatest":1,"createTime":"2019-01-03T07:47:56.000Z","lastUpdateTime":"2019-01-30T02:13:07.000Z","auth":2,"uid":"bd-1879983178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":17,"parentVersion":16,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-06T07:17:02.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1546499666218-RE8mF8aP8.json\";\n\nvar MapboxStyleDataURL = \"/asset/get/s/data-1546500855305-wBxWgJRZc.json\";\n\n\nmyChart.showLoading();\n\nvar option = {\n    baseOption: {\n        timeline: {\n            axisType: 'category',\n            orient: 'vertical',\n            autoPlay: true,\n            inverse: true,\n            playInterval: 300,\n            left: null,\n            right: 0,\n            top: null,\n            bottom: 50,\n            width: 55,\n            height: null,\n            label: {\n                normal: {\n                    textStyle: {\n                        color: '#fff'\n                    }\n                },\n                emphasis: {\n                    textStyle: {\n                        color: '#aaa'\n                    }\n                }\n            },\n            symbol: 'circle',\n            lineStyle: {\n                color: '#555'\n            },\n            checkpointStyle: {\n                color: '#bbb',\n                borderColor: '#777',\n                borderWidth: 2\n            },\n            controlStyle: {\n                normal: {\n                    color: '#666',\n                    borderColor: '#666'\n                },\n                emphasis: {\n                    color: '#aaa',\n                    borderColor: '#aaa'\n                }\n            },\n            data: []\n        },\n        title: {\n            text: \"北京人口分布24小时潮汐\",\n            textStyle: {\n                color: '#fff',\n                fontSize: 30\n            },\n            right: '5%'\n        },\n\n        visualMap: {\n            show: false,\n            calculable: true,\n            realtime: false,\n            inRange: {\n                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            },\n            outOfRange: {\n                colorAlpha: 0\n            }\n\n        },\n\n        maptalks3D: {\n            center: [116.368655, 39.917726],\n            zoom: 9,\n            pitch: 40,\n            urlTemplate: 'http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}',\n            // altitudeScale: 1,\n            postEffect: {\n                enable: true,\n                FXAA: {\n                    enable: true\n                }\n            },\n            light: {\n                main: {\n                    intensity: 1,\n                    shadow: true,\n                    shadowQuality: 'high'\n                },\n                ambient: {\n                    intensity: 0.\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            }\n        },\n        series: [{\n            type: 'bar3D',\n            shading: 'realistic',\n            coordinateSystem: 'maptalks3D',\n            silent: true,\n            barSize: 1.5,\n            silent: true\n        }]\n    },\n    options: [] //timeline所用的多个option存放处，读取数据后添加\n}\n\n$.getJSON(uploadedDataURL, function(linedata) { //读取24小时数据\n    myChart.hideLoading();\n    var timeline = [];\n    for (var n = 0; n < linedata.features.length; n++) { //对数据中每天数据整理后添加到options中，以便timeline使用\n        timedata = linedata.features[n].gridChart_list;\n        var data = []\n        var max = linedata.features[n].max;\n        for (var i = 0; i < timedata.length; i += 1) {\n            var _pheight = 1000;\n            loncol = timedata[i].lon //经度\n            latcol = timedata[i].lat //纬度\n            var _v = JSON.parse(timedata[i].values);\n            var value;\n            var value = _v[0] + _v[1] + _v[2]; //数组中值相加\n            count = value / 2;\n            data.push({\n                'value': [loncol, latcol, count]\n            })\n\n        }\n        timeline.push(linedata.features[n].time); //时间(0时到24时)\n\n        option.options.push({\n\n            visualMap: {\n                max: max / 2\n            },\n            series: [{\n                data: data\n            }]\n        });\n    }\n    option.baseOption.timeline.data = timeline; //时间轴\n\n    if (option && typeof option === \"object\") {\n        myChart.setOption(option, true);\n    }\n});","html":"","externalScripts":"https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js,http://echarts.baidu.com/resource/echarts-gl-latest/mapboxgl-token.js,http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js,https://libs.baidu.com/jquery/2.1.1/jquery.min.js,https://cdn.jsdelivr.net/npm/maptalks@0.39.3/dist/maptalks.min.js,https://deyihu.github.io/src/lib/echarts-gl.1.1.3.js?tdsourcetag=s_pctim_aiomsg","updaterUID":"bd-1879983178","theme":"default","layout":"","viewCount":18029,"userName":"k***3","commentCount":15,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDfe9PgPgQ.png?v=1546501678105","isCustomThumbnail":1,"builtinTags":["category-work","maptalks3D","series-bar3D","timeline","title","visualMap"],"customTags":[],"updaterUserName":"k***3"}}