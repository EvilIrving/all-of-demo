{"status":0,"data":{"cid":"xi5kSjVK55","authorUid":"bd-3959597918","authorUserName":"风***落","title":"各省数据合格率统计(动画效果更新)","description":"各省数据合格率统计(动画效果更新)","latestVersion":4,"alwaysLatest":1,"createTime":"2019-01-24T06:33:18.000Z","lastUpdateTime":"2019-01-24T06:33:18.000Z","auth":1,"uid":"bd-3959597918","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-29T08:43:15.000Z","code":"     var chart;\r\n     var yearDataList = \r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\tname: '湖北省',\r\n\t\t\t\t\t\tvalue: 424.98\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '湖南省',\r\n\t\t\t\t\t\tvalue: 330.66\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '河南省',\r\n\t\t\t\t\t\tvalue: 261.30\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '安徽省',\r\n\t\t\t\t\t\tvalue: 264.78\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '浙江省',\r\n\t\t\t\t\t\tvalue: 388.64\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '山东省',\r\n\t\t\t\t\t\tvalue: 165.08\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '广东省',\r\n\t\t\t\t\t\tvalue: 228.85\r\n\t\t\t\t\t}]\r\n\t\t\t\t;\r\n       \r\n     var data =JSON.parse(JSON.stringify(yearDataList)).sort(function (a, b) {\r\n\t\t\t\t\treturn a.value - b.value;\r\n\t\t\t\t})\r\n     \r\n       chart=  echarts.init(document.getElementById('chart-panel'))\r\n        option = {\r\n            color: ['#3398DB'],\r\n            title: {\r\n                text: '各省数据合格率统计',\r\n                //textStyle: {\r\n                //    color: '#fff'\r\n                //}\r\n            },\r\n            tooltip: {\r\n                trigger: 'axis',\r\n                axisPointer: {\r\n                    type: 'shadow'\r\n                },\r\n                formatter: \"{b} <br> 合格率: {c}%\"\r\n            },\r\n            /*legend: {\r\n                data: [date]\r\n            },*/\r\n            grid: {\r\n                left: '4%',\r\n                right: '4%',\r\n                bottom: '2%',\r\n                containLabel: true\r\n            },\r\n            xAxis: {\r\n                type: 'value',\r\n                boundaryGap: [0, 0.01],\r\n           \r\n                interval: 20,\r\n                axisLabel: {\r\n                    formatter: '{value}',\r\n                    textStyle: {\r\n                        //color: '#fff',  \r\n                        fontWeight: '80'\r\n                    }\r\n                }\r\n            },\r\n            yAxis: {\r\n                type: 'category',\r\n                data:data.map(function (item) {\r\n\t\t\t\t\treturn item.name\r\n\t\t\t\t}),\r\n                axisLabel: {\r\n                    show: true,\r\n                    interval: 0,\r\n                    rotate: 0,\r\n                    margin: 10,\r\n                    inside: false,\r\n                    textStyle: {\r\n                        //color: '#fff',\r\n                        fontWeight: '50'\r\n                    }\r\n                }\r\n            },animation:true,\r\n            animationDelayUpdate: function (idx) {\r\n                    // 越往后的数据延迟越大\r\n                    return idx * 200;\r\n                },\r\n                animationEasingUpdate:true,\r\n                animationDuration: function (idx) {\r\n                // 越往后的数据延迟越大\r\n                return idx * 200;\r\n            },\r\n            animationDelay: function (idx) {\r\n                // 越往后的数据延迟越大\r\n                return idx * 200;\r\n            },\r\n            series: [{\r\n                type: 'bar',\r\n                label: {\r\n\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\tshow: true,\r\n\t\t\t\t\t\t\tposition: \"inside\",\r\n\t\t\t\t\t\t\tdistance: 12,\r\n\t\t\t\t\t\t\tformatter: function (params) {\r\n\t\t\t\t\t\t\t\tvar stuNum = 0;\r\n\t\t\t\t\t\t\t\tdata.forEach(function (value, index, array) {\r\n\t\t\t\t\t\t\t\t\tif (params.name == value.name) {\r\n\t\t\t\t\t\t\t\t\t\tstuNum = value.value;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t// return stuNum + '{white|亿元}';\r\n\t\t\t\t\t\t\t\treturn stuNum;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\t\t\t\tfontSize: 12\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\trich: {\r\n\t\t\t\twhite: {\r\n\t\t\t\t\tcolor: \"#fff\",\r\n\t\t\t\t\talign: 'left',\r\n\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\tpadding: [0, 0]\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n                data:data\r\n            }]\r\n        };\r\n        chart.setOption(option);\r\n   \r\n    function refreshData(){\r\n        console.log(5)\r\n        //更新数据\r\n        var option = chart.getOption();\r\n    \r\n        yearDataList = \r\n\t\t\t\t\t[{\r\n\t\t\t\t\t\tname: '湖北省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '湖南省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '河南省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '安徽省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '浙江省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '山东省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tname: '广东省',\r\n\t\t\t\t\t\tvalue: Math.floor(Math.random(1)*90)\r\n\t\t\t\t\t}]\r\n   var data =JSON.parse(JSON.stringify(yearDataList)).sort(function (a, b) {\r\n\t\t\t\treturn a.value - b.value;\r\n\t\t\t})\r\n        option.series[0].data =data\r\n    \toption.yAxis[0].data =data.map(function (item) {\r\n\t\t\t\treturn item.name\r\n\t\t\t}),\r\n        chart.setOption(option); \r\n}\r\nsetTimeout(a,2000)\r\nfunction a(){\r\n     console.log(4)\r\n    refreshData()\r\n    setTimeout(a,2000)\r\n}","html":"","externalScripts":"","updaterUID":"bd-3959597918","theme":"","layout":"","viewCount":341,"userName":"风***落","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xi5kSjVK55.png?v=1593420196008","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":["柱状图"],"updaterUserName":"风***落"}}