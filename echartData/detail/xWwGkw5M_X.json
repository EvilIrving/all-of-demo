{"status":0,"data":{"cid":"xWwGkw5M_X","authorUid":"bd-1399818579","authorUserName":"a***2","title":"","description":"const","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-17T07:51:33.000Z","lastUpdateTime":"2020-09-17T07:51:33.000Z","auth":2,"uid":"bd-1399818579","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-17T07:51:33.000Z","code":"sourceData = [{\r\n        'name': '香港特别行政区',\r\n        'value': 40,\r\n        'extData': [1070, '#479c7f', 0, '']\r\n    },\r\n    {\r\n        'name': '天津市',\r\n        'value': 51,\r\n        'extData': [2105, '#48af54', 0, '']\r\n    },\r\n    {\r\n        'name': '上海市',\r\n        'value': 59,\r\n        'extData': [2965, '#53b440', 0, '']\r\n    },\r\n    {\r\n        'name': '甘肃省',\r\n        'value': 63,\r\n        'extData': [3375, '#67b52d', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '吉林省',\r\n        'value': 67,\r\n        'extData': [3744, '#8cc13f', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '内蒙古自治区',\r\n        'value': 70,\r\n        'extData': [4040, '#bbd337', 0, '']\r\n    },\r\n\r\n\r\n    {\r\n        'name': '陕西省',\r\n        'value': 81,\r\n        'extData': [5174, '#d2b130', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '辽宁省',\r\n        'value': 93,\r\n        'extData': [6317, '#da9c2d', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '湖北省',\r\n        'value': 95,\r\n        'extData': [6583, '#dc9e31', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '四川省',\r\n        'value': 124,\r\n        'extData': [9461, '#da9c2d', 0, '']\r\n    },\r\n    {\r\n        'name': '江苏省',\r\n        'value': 131,\r\n        'extData': [10140, '#ee5388', 0, '']\r\n    },\r\n\r\n    {\r\n        'name': '广东省',\r\n        'value': 152,\r\n        'extData': [12260, '#f62f90', 0, '']\r\n    }\r\n]\r\n\r\n\r\ngraphicData = [{\r\n    type: 'group',\r\n    left: 'center',\r\n    top: '60%',\r\n    bounding: 'raw', //重要，否则内容无法超过组\r\n    z: 100,\r\n    children: []\r\n}]\r\ngraphicScatter = {\r\n    type: 'circle',\r\n    shape: {\r\n        r: 2\r\n    },\r\n    style: {\r\n        fill: 'white'\r\n    },\r\n    z: 100\r\n}\r\ngraphicText = [{\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 10,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '韩国',\r\n        font: 'bold 16px Microsoft YaHei',\r\n        textAlign: 'center'\r\n    }\r\n}, {\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 40,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '5766例',\r\n        font: 'bold 14px Microsoft YaHei',\r\n        textAlign: 'center',\r\n\r\n    }\r\n}, {\r\n    type: 'text',\r\n    // left: 'center',\r\n    // top: 70,\r\n    z: 100,\r\n    style: {\r\n        fill: 'white',\r\n        text: '死亡36例',\r\n        font: 'bold 12px Microsoft YaHei',\r\n        textAlign: 'center'\r\n    }\r\n}]\r\ngraphicChildren = {\r\n    type: 'group',\r\n    // left: 'center',\r\n    // top: 'center',\r\n    position: [],\r\n    bounding: 'raw',\r\n    z: 100,\r\n    children: []\r\n\r\n}\r\n\r\nfunction convertData1() {\r\n    var maxScale = 1\r\n    var minScale = 0.1\r\n    var stepRadius = 2 * Math.PI / sourceData.length\r\n    var stepScale = (maxScale - minScale) / sourceData.length\r\n    for (var i = 0; i < sourceData.length; i++) {\r\n        sourceData[i].itemStyle = {\r\n            color: sourceData[i][\"extData\"][1],\r\n            borderWidth: 0\r\n        }\r\n        sourceData[i].label = {\r\n            show: i > 6 ? false : false,\r\n            position: i <= 5 ? \"outer\" : \"inside\",\r\n            // alignTo: \"labelLine\",\r\n            align: \"right\",\r\n            borderWidth: 1,\r\n            borderColor: \"red\",\r\n            alignTo: \"edge\",\r\n            margin: 650,\r\n            formatter: (a) => {\r\n                return a.data.extData[3]\r\n            }\r\n        }\r\n        sourceData[i].labelLine = {\r\n            show: i > 6 ? false : false,\r\n            // length: i <= 5 ? 5 * (i - 5) : 0,\r\n            // length2: i <= 5 ? 0 : 0,\r\n            lineStyle: {\r\n                type: \"dashed\"\r\n            }\r\n        }\r\n        var curRadius = (i + 0.5) * stepRadius\r\n        // var curArclen = 1\r\n        var curScale = i > 11 ? minScale + stepScale * (i) : 0.6 + stepScale * (i)\r\n        var startR = i > 11 ? sourceData[i][\"value\"] * 450 / sourceData.slice(-1)[0][\"value\"] * 0.95 : ((\r\n            sourceData[i][\"value\"] * 460 / sourceData.slice(-1)[0][\"value\"] + 20))\r\n        var curR = [startR, startR * (i > 33 ? 0.95 : (i > 11 ? 0.75 : 1.12)), startR * (i > 33 ? 0.95 : (i >\r\n            11 ? 0.8 : 1.17)) * (i > 33 ? 0.95 :\r\n            (i > 11 ? 0.8 : 1.17))]\r\n        var curPositions = []\r\n        var curChilds = []\r\n        var curCircles = []\r\n        for (var j = 0; j < 3; j++) {\r\n            var curX = Math.sin(curRadius) * curR[j]\r\n            var curY = -Math.cos(curRadius) * curR[j]\r\n            curPositions.push([curX, curY])\r\n            var curChild = JSON.stringify(graphicChildren)\r\n            curChild = JSON.parse(curChild)\r\n            curChild.position = [curX, curY]\r\n            curChild.rotation = i > 33 ? -((i + 0.5) / sourceData.length * 2 * Math.PI) : (i <= 11 ? -((i +\r\n                0.5) / sourceData.length * 2 * Math.PI) + Math.PI / 2 : 0)\r\n            curChild.scale = [curScale, curScale]\r\n            curgraphicText = JSON.parse(JSON.stringify(graphicText[j]))\r\n            curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? (i > 11 ? sourceData[i][\r\n                \"extData\"\r\n            ][0] + \"网点\" : \"\") : (j == 2 && i > 33 ? (sourceData[i][\r\n                \"extData\"\r\n            ][2] + \"个\") : (i <= 11 ? sourceData[i][\r\n                \"extData\"\r\n            ][3] : \"\")))\r\n            // curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? i > 11 ? sourceData[i][\r\n            //     \"extData\"\r\n            // ][0] + \"例\" : \"\" : i > 33 ? sourceData[i][\r\n            //     \"extData\"\r\n            // ][2] + \"例\" : \"\")\r\n            if (i <= 11) {\r\n                curgraphicText.style.fill = \"black\"\r\n                curgraphicText.style.textAlign = \"left\"\r\n            }\r\n            curChild.children = [curgraphicText]\r\n            curChilds.push(curChild)\r\n            // var curCircle = JSON.parse(JSON.stringify(graphicScatter))\r\n            // curCircle.position = [curX, curY]\r\n            // curCircles.push(curCircle)\r\n            // graphicData[0].children.push(curCircle)\r\n            graphicData[0].children.push(curChild)\r\n        }\r\n        console.log(i, sourceData[i][\"name\"], curRadius, curR, curPositions)\r\n    }\r\n\r\n    return sourceData\r\n}\r\n\r\n\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n    },\r\n    toolbox: {\r\n        show: true,\r\n        feature: {\r\n            mark: {\r\n                show: true\r\n            },\r\n            dataView: {\r\n                show: true,\r\n                readOnly: false\r\n            },\r\n            magicType: {\r\n                show: true,\r\n                type: ['pie', 'funnel']\r\n            },\r\n            restore: {\r\n                show: true\r\n            },\r\n            saveAsImage: {\r\n                show: true\r\n            }\r\n        }\r\n    },\r\n    graphic: graphicData,\r\n    series: [{\r\n        name: '银行网点个数',\r\n        type: 'pie',\r\n        radius: [20, 450],\r\n        center: ['50%', '60%'],\r\n        label: {\r\n            show: true\r\n        },\r\n        roseType: 'area',\r\n        data: convertData1(),\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1399818579","theme":"","layout":"","viewCount":73,"userName":"a***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWwGkw5M_X.png?v=1600329093462","isCustomThumbnail":0,"builtinTags":["category-work","graphic","series-pie","toolbox","tooltip"],"customTags":[],"updaterUserName":"a***2"}}