{"status":0,"data":{"cid":"x1OYKl5g72","authorUid":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","authorUserName":"d***懂","title":"自定义拐点折线图","description":"成交面积环比和成交均价环比走势图，包括预测未来三个月走势","latestVersion":4,"alwaysLatest":1,"createTime":"2020-06-04T06:32:17.000Z","lastUpdateTime":"2020-06-04T06:32:17.000Z","auth":2,"uid":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-04T07:36:09.000Z","code":" let seriesData = [\r\n     [-10.2, -74.5, 0],\r\n     [19.7, 1.1, 0],\r\n     [\"-6\", \"-4\", \"-2\", \"2\", \"3\", \"4\"]\r\n ]\r\n\r\n let type = [1, 1, 0] //1蓝色拐点，0红色拐点\r\n let symbolArr = [];\r\n let data = seriesData[1];\r\n type.forEach(function(v, i) {\r\n     symbolArr[i] = {\r\n         value: data[i],\r\n         symbolSize: 13,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: v == 1 ? '#1572E9' : '#E4007F',\r\n                 shadowBlur: 50,\r\n                 shadowColor: '#333'\r\n             }\r\n         }\r\n     };\r\n });\r\n\r\n //   大于12个月时预测未来三个月\r\n let priceData = seriesData[1];\r\n let priceDataFirst = []\r\n priceData.forEach((v, i) => {\r\n     if (i == priceData.length - 1) {\r\n         priceDataFirst.push(String(v))\r\n     } else {\r\n         priceDataFirst.push(null)\r\n     }\r\n })\r\n let priceLastNew = priceDataFirst.concat(seriesData[2]);\r\n\r\n //取最大值最小值\r\n let max1;\r\n let max2;\r\n let line1 = seriesData[0].map((data) => {\r\n     return Math.abs(data)\r\n })\r\n max1 = Math.max(...line1);\r\n let rightY = seriesData[1].concat(seriesData[2]);\r\n let line2 = rightY.map((data) => {\r\n     return Math.abs(data)\r\n })\r\n max2 = Math.max(...line2);\r\n\r\n let _series = [{\r\n         // name: '成交面积',\r\n         type: 'line',\r\n         smooth: true,\r\n         showSymbol: false,\r\n         lineStyle: {\r\n             normal: {\r\n                 width: 1\r\n             }\r\n         },\r\n         areaStyle: {\r\n             normal: {\r\n                 color: 'rgba(16,97,204,0.1)',\r\n                shadowColor: 'rgba(0, 0, 0, 0.1)',\r\n                 shadowBlur: 10\r\n             }\r\n         },\r\n         itemStyle: {\r\n             normal: {\r\n                 color: 'rgba(16,97,204,1)'\r\n             },\r\n             emphasis: {\r\n                 color: 'rgb(0,196,132)',\r\n                 borderColor: 'rgba(0,196,132,0.2)',\r\n                 extraCssText: 'box-shadow: 8px 8px 8px rgba(0, 0, 0, 1);',\r\n                 borderWidth: 1\r\n             }\r\n         },\r\n         data: seriesData[0]\r\n     },\r\n     {\r\n         // name:'成交均价',\r\n         type: 'line',\r\n         boundaryGap: false,\r\n         smooth: true,\r\n         yAxisIndex: 1,\r\n         data: seriesData[1],\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0ACAF3'\r\n             }\r\n         }\r\n     },\r\n     {\r\n         // name:'成交均价预测的3个月',\r\n         type: 'line',\r\n         boundaryGap: false,\r\n         smooth: true,\r\n         yAxisIndex: 1,\r\n         data: priceLastNew,\r\n         lineStyle: {\r\n             normal: {\r\n                 width: 1,\r\n                 type: 'dashed'\r\n             }\r\n         },\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0ACAF3'\r\n             }\r\n         }\r\n     },\r\n     // 设置拐点样式\r\n     {\r\n         label: {\r\n             show: false\r\n         },\r\n\r\n         type: 'effectScatter',\r\n         coordinateSystem: 'cartesian2d',\r\n         data: symbolArr, //2d坐标系\r\n         yAxisIndex: 1,\r\n         symbolSize: 0,\r\n         showEffectOn: 'render',\r\n         rippleEffect: {\r\n             brushType: 'stroke'\r\n         },\r\n         hoverAnimation: true\r\n     }\r\n ]\r\n\r\n option = {\r\n     backgroundColor:'#071729',\r\n     tooltip: {\r\n         show: true,\r\n         trigger: 'axis',\r\n         formatter: '<div><div>{b0}</div><div>成交面积环比：{c0}%</div><div>成交均价环比：{c1 }%</div></div>',\r\n         formatter: function(params) {\r\n             if (params.length > 1) {\r\n                 return `<div><div>${params[0].name}</div><div>成交面积环比：${params[0].value}%</div><div>成交均价环比：${params[1].value}%</div></div>`\r\n             } else {\r\n                 return `<div><div>${params[0].name}<div>成交均价环比：${params[0].value}%</div></div>`\r\n             }\r\n         }\r\n     },\r\n     grid: {\r\n         left: '5%',\r\n         right: '5%',\r\n         bottom: '13%',\r\n         top: '15%',\r\n         containLabel: true\r\n     },\r\n     xAxis: {\r\n         data: [\r\n             \"2019.07\",\r\n             \"2019.08\",\r\n             \"2019.09\",\r\n             \"2019.10\",\r\n             \"2019.11\",\r\n             \"2019.12\",\r\n         ],\r\n         boundaryGap: false,\r\n         axisLine: {\r\n             lineStyle: {\r\n                 color: \"rgba(0,160,233,0.25)\", //X轴文字颜色\r\n             },\r\n         },\r\n         axisLabel: {\r\n             textStyle: {\r\n                 color: \"#ccc\", //X轴文字颜色\r\n                 fontSize: 14\r\n             }\r\n         },\r\n         axisTick: {\r\n             show: false //隐藏X轴刻度\r\n         },\r\n     },\r\n     // yAxis: _yAxis,\r\n     yAxis: [{\r\n             type: 'value',\r\n             name: '面积%',\r\n             axisTick: {\r\n                 show: false\r\n             },\r\n             nameTextStyle: {\r\n                 color: '#ccc',\r\n                 fontSize: 13,\r\n                 padding: [0, 30, 0, 0]\r\n             },\r\n             splitLine: {\r\n                 show: false\r\n             },\r\n             axisLabel: {\r\n                 color: '#ccc',\r\n                 textStyle: {\r\n                     color: '#ccc',\r\n                     fontSize: 13\r\n                 }\r\n             },\r\n             axisLine: {\r\n                 lineStyle: {\r\n                     color: 'rgba(0,160,233,0.25)', //X轴文字颜色\r\n                     fontSize: 13\r\n                 }\r\n             },\r\n             nameTextStyle: {\r\n                 color: '#ccc',\r\n                 fontSize: '90%'\r\n             },\r\n             min: -Math.ceil(max1),\r\n             max: Math.ceil(max1)\r\n\r\n         },\r\n         {\r\n             type: 'value',\r\n             name: '均价%',\r\n             axisTick: {\r\n                 show: false\r\n             },\r\n             nameTextStyle: {\r\n                 color: '#ccc',\r\n                 fontSize: 13,\r\n                 padding: [0, 30, 0, 0]\r\n             },\r\n             splitLine: {\r\n                 show: false\r\n             },\r\n             axisLabel: {\r\n                 color: '#ccc',\r\n                 textStyle: {\r\n                     color: '#ccc',\r\n                     fontSize: 13\r\n                 }\r\n             },\r\n             axisLine: {\r\n                 lineStyle: {\r\n                     color: 'rgba(0,160,233,0.25)', //X轴文字颜色\r\n                     fontSize: 13\r\n                 }\r\n             },\r\n             nameTextStyle: {\r\n                 color: '#ccc',\r\n                 fontSize: '90%'\r\n             },\r\n             min: -Math.ceil(max2),\r\n             max: Math.ceil(max2)\r\n\r\n         }\r\n     ],\r\n     series: _series,\r\n\r\n };","html":"","externalScripts":"","updaterUID":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","theme":"","layout":"","viewCount":155,"userName":"d***懂","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1OYKl5g72.png?v=1591256169948","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-effectScatter","series-line","tooltip"],"customTags":[],"updaterUserName":"d***懂"}}