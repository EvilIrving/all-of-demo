{"status":0,"data":{"cid":"x-yem97S_e","authorUid":"bd-732371637","authorUserName":"g***f","title":"投资计划——不均匀数据轴（y）","description":"一个y轴数值不均匀分布的图表","latestVersion":2,"alwaysLatest":1,"createTime":"2020-11-18T09:13:15.000Z","lastUpdateTime":"2020-11-18T09:13:15.000Z","auth":2,"uid":"bd-732371637","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-19T02:12:44.000Z","code":"// 源数据(自己造的数据，所以处理的时候没有针对特殊进行处理)\nconst sourceData = [{\n        date: '2020-01-01',\n        amount: 1000000\n    },\n    {\n        date: '2020-02-01',\n        amount: 100000\n    },\n    {\n        date: '2020-03-01',\n        amount: 200000\n    },\n    {\n        date: '2020-04-01',\n        amount: 50000\n    },\n    {\n        date: '2020-05-01',\n        amount: 20000000\n    },\n    {\n        date: '2020-06-01',\n        amount: 300000000\n    },\n    {\n        date: '2020-07-01',\n        amount: 400000\n    },\n    {\n        date: '2020-08-01',\n        amount: 3000000000\n    },\n    {\n        date: '2020-09-01',\n        amount: 550000\n    },\n];\n\n// 定义数据间隔\nconst dataInterval = [0, 100000, 1000000, 10000000, 100000000, 1000000000, 2000000000, 3000000000];\n\n// 处理源数据\nconst investAmount = sourceData.map(item => {\n    const amount = item.amount;\n\n    // 寻找在数据间隔里小于amount的最大值\n    const min_v = Math.max(...dataInterval.filter(v => v <= amount));\n    // 寻找在数据间隔里大于amount的最小值\n    const max_v = Math.min(...dataInterval.filter(v => v > amount));\n\n    // 寻找 min_v 所在的下标\n    const index = dataInterval.findIndex(v => v === min_v);\n\n    // 计算该amount在y轴上应该展示的位置\n    const y_value = (((amount - min_v) / (max_v - min_v)) * 10) + index * 10;\n\n    return {\n        value: y_value,\n        realValue: amount,\n        date: item.date\n    };\n}).filter(x => x);\n\n// 配置\noption = {\n    title: {\n        text: '投资计划——不均匀数据轴（y）',\n        subtext: '点击查看代码讲解博客 \\n\\n 贴出地址以防万一：https://blog.csdn.net/s_y_w123/article/details/109801701',\n        sublink: 'https://blog.csdn.net/s_y_w123/article/details/109801701',\n        subtextStyle:{\n            color:'#5094D5',\n            fontSize:15,\n            fontWeight:'bold'\n        }\n    },\n    grid:{\n        top: '15%'\n    },\n    tooltip: {\n        show: true,\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow'\n        },\n        formatter: (v) => {\n            const date = v[0].data.date;\n            const value = v[0].data.realValue;\n            return `<div>\n                <span>日期：${date}</span><br>\n                <span>金额：${value / 10000}（万）</span>\n            </div>`\n        }\n    },\n    xAxis: {\n        type: 'category',\n        data: investAmount.map(item => item.date)\n    },\n    yAxis: {\n        type: 'value',\n        axisLabel: {\n            formatter: (v, i) => {\n                if (i === 0) {\n                    v = '0'\n                }\n                if (i === 1) {\n                    v = '10万'\n                }\n                if (i === 2) {\n                    v = '100万'\n                }\n                if (i === 3) {\n                    v = '1千万'\n                }\n                if (i === 4) {\n                    v = '1亿'\n                }\n                if (i === 5) {\n                    v = '10亿'\n                }\n                if (i === 6) {\n                    v = '20亿'\n                }\n                if (i === 7) {\n                    v = '30亿'\n                }\n                return v;\n            }\n        }\n    },\n    series: [{\n        name: '投资计划',\n        type: 'bar',\n        data: investAmount\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-732371637","theme":"","layout":"","viewCount":138,"userName":"g***f","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-yem97S_e.png?v=1605751964201","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":["bar","不均匀数据轴"],"updaterUserName":"g***f"}}