{"status":0,"data":{"cid":"x4N0_4aAjQ","authorUid":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","authorUserName":"h***9","title":"计划新开工和实际新开工","description":"变电容量  线路长度  新开和实际对比","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-15T06:56:25.000Z","lastUpdateTime":"2020-09-15T06:56:25.000Z","auth":1,"uid":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-15T06:56:25.000Z","code":"/*\n双向柱状图\nwx:yangtaoxf\n\n参考以下文章和作品，感谢相关作者\nhttps://gallery.echartsjs.com/editor.html?c=xL00juR_Rr&v=1\n*/\n\nlet data = {\n    female: {\n        name: '变电容量',\n        data: [ {\n            value: 210,\n            weight: 25,\n            label: '110Kv'\n        }, {\n            value: 303,\n            weight: 0,\n            label: '220Kv'\n        }, {\n            value: 0,\n            weight: 0,\n            label: '500Kv'\n        }]\n    },\n    male: {\n        name: '线路长度',\n        data: [{\n            value: 432.45,\n            weight: 172.76,\n            label: '110Kv'\n        }, {\n            value: 332.07,\n            weight: 157.05,\n            label: '220Kv'\n        }, {\n            value: 0,\n            weight: 0,\n            label: '500Kv'\n        }]\n    }\n};\nlet yAxisData = new Set();\nlet yAxisDataN = new Set();\nlet yAxisDataV = new Set();\nlet legendData = [];\n_.forEach(data, (d) => {\n    legendData.push(d.name);\n    _.forEach(d.data, (item) => {\n\n        if (d.name == '线路长度') {\n            yAxisDataN.add(item.label);\n        }\n        if (d.name == '变电容量') {\n            yAxisDataV.add(item.label);\n        }\n        // yAxisData.add(item.label);\n    });\n});\n\nlet top = 60;\nlet bottom = 60;\n\nyAxisData = [...yAxisData];\nyAxisDataN = [...yAxisDataN];\nyAxisDataV = [...yAxisDataV];\n\noption = {\n    tooltip: {\n        show: true,\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow'\n        }\n    },\n    legend: {\n        \"icon\": \"none\",\n        left: 'center',\n        top: 24,\n        orient: \"horizontal\",\n        itemWidth: 0, //图例标记的图形宽度\n        itemHeight: 0, //图例标记的图形高度\n        y: ' center',\n        borderRadius: 0,\n\n        formatter: (name) => {\n            if (name == data.female.name) {\n\n                return '{a|' + name + '}'\n            } else {\n                return '{b|' + name + '}'\n            }\n        },\n        textStyle: {\n            rich: {\n                a: {\n                    padding: [8, 15, 8, 15],\n                    align: 'center',\n                    backgroundColor: \"#ffffff\",\n\n                },\n                b: {\n                    padding: [8, 15, 8, 15],\n                    align: 'center',\n                    backgroundColor: \"#ffffff\"\n                }\n            }\n        },\n        data: legendData\n    },\n    grid: [{\n        left: '12%',\n        width: '34%',\n        containLabel: true,\n        bottom\n    }, {\n        left: '50%',\n        width: '0%',\n        top: top + 16\n    }, {\n        right: '12%',\n        width: '34%',\n        containLabel: true,\n        bottom\n    }].map(item => _.merge({\n        top\n    }, item)),\n    xAxis: [{\n        type: 'value',\n        inverse: true,\n        axisLabel: {\n            show: true\n        },\n        axisLine: {\n            show: true\n        },\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        }\n    }, {\n        gridIndex: 1,\n        show: false\n    }, {\n        gridIndex: 2,\n        type: 'value',\n        axisLabel: {\n            show: true\n        },\n        axisLine: {\n            show: true\n        },\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        }\n    }].map((item) => _.merge(item, {\n        axisLabel: {\n            color: '#fff',\n            margin: 8\n        },\n        splitLine: {\n            lineStyle: {\n                color: '#fff',\n                type: 'dashed'\n            }\n        },\n    })),\n    yAxis: [{\n\n            position: 'right',\n            axisLabel: {\n                color: '#fff',\n                show: true\n            },\n\n\n            axisLine: {\n                show: false\n            },\n            type: 'category',\n            inverse: false,\n\n            axisTick: {\n                show: false\n            },\n            data: yAxisDataN\n        },\n        {\n            gridIndex: 1,\n            position: 'center',\n            type: 'category',\n            axisLabel: {\n                show: false\n\n            },\n            axisLine: {\n                show: true\n            }\n        },\n        {\n            gridIndex: 2,\n            position: 'left',\n            axisLabel: {\n\n                color: `#fff`\n            },\n            axisLine: {\n                show: false\n            },\n            type: 'category',\n            inverse: false,\n\n            axisTick: {\n                show: false\n            },\n            data: yAxisDataV\n        }\n    ],\n    series: [{\n            name: _.get(data, 'female.name'),\n            label: {\nshow: false,\n                color: '#fff',\n                position: 'left'\n            },\n            itemStyle: {\n                color: '#238bf2',\n                barBorderRadius: [4, 0, 0, 4]\n            },\n            data: _.map(_.get(data, 'female.data'), d => d.value)\n        },\n        {\n            name: _.get(data, 'female.name'),\n            label: {\nshow: false,\n                color: '#fff',\n                position: 'left'\n            },\n            itemStyle: {\n                color: '#a0d0ff',\n                barBorderRadius: [4, 0, 0, 4]\n            },\n            data: _.map(_.get(data, 'female.data'), d => d.weight)\n        },\n\n        {\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            name: _.get(data, 'male.name'),\n            label: {\nshow: false,\n                color: '#fff',\n                position: 'right'\n            },\n            itemStyle: {\n                color: '#f9c807',\n                barBorderRadius: [0, 4, 4, 0]\n            },\n            data: _.map(_.get(data, 'male.data'), d => d.value)\n        },\n        {\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            name: _.get(data, 'male.name'),\n            label: {\nshow: false,\n                color: '#fff',\n                position: 'right'\n            },\n            itemStyle: {\n                color: '#ffeea9',\n                barBorderRadius: [0, 4, 4, 0]\n            },\n            data: _.map(_.get(data, 'male.data'), d => d.weight)\n        }\n    ].map(item => _.merge(item, {\n        type: 'bar',\n        barWidth: 11,\n        label: {\n            show: false,\n            fontFamily: 'Rubik-Medium',\n            fontSize: 14,\n            distance: 10\n        }\n    }))\n};\n\nvar loopIndex = 0;\n\nsetInterval(function() {\n    if (loopIndex > 3) {\n        loopIndex = 0;\n    }\n    myChart.dispatchAction({\n        type: \"showTip\",\n        seriesIndex: 0,\n        dataIndex: loopIndex\n    });\n    if (option.series[0].data[loopIndex] === \"\") {\n        myChart.dispatchAction({\n            type: \"showTip\",\n            seriesIndex: 2,\n            dataIndex: loopIndex\n        })\n    }\n    loopIndex++;\n}, 1000);","html":"","externalScripts":"https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.15/lodash.js","updaterUID":"obd-o-FCrL1ZPcXOLq4Irzgr1ZQ7OA-1ZAV","theme":"","layout":"","viewCount":47,"userName":"h***9","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4N0_4aAjQ.png?v=1600152985358","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":["bar"],"updaterUserName":"h***9"}}