{"status":0,"data":{"cid":"xrJn8mK_oM","authorUid":"bd-3591882659","authorUserName":"f***r","title":"热力图Heatmap-带边界的北京城市热力图","description":"热力图Heatmap-带边界的北京城市热力图","latestVersion":3,"alwaysLatest":1,"createTime":"2018-04-09T06:08:19.000Z","lastUpdateTime":"2018-04-09T06:08:19.000Z","auth":1,"uid":"bd-3591882659","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.0.4","versionCreateTime":"2018-04-09T06:30:22.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1523180637653-B1LvNDPof.json\";\r\n\r\n$.getJSON(uploadedDataURL, function(data) {\r\n\r\n    var points = [].concat.apply([], data.map(function(track) {\r\n        return track.map(function(seg) {\r\n            return seg.coord.concat([1]);\r\n        });\r\n    }));\r\n    myChart.setOption({\r\n        animation: false,\r\n        bmap: {\r\n            center: [116.404412, 39.914382],\r\n            zoom: 12,\r\n            roam: true\r\n        },\r\n        visualMap: {\r\n            show: false,\r\n            top: 'top',\r\n            min: 0,\r\n            max: 5,\r\n            seriesIndex: 0,\r\n            calculable: true,\r\n            inRange: {\r\n                color: ['blue', 'blue', 'green', 'yellow', 'red']\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'heatmap',\r\n            coordinateSystem: 'bmap',\r\n            data: points,\r\n            pointSize: 5,\r\n            blurSize: 6\r\n        }]\r\n    });\r\n\r\n    var bmap = myChart.getModel().getComponent('bmap').getBMap();\r\n\r\n    var county = ['北京市通州区', '北京市丰台区', '北京市顺义区', '北京市昌平区', '北京市西城区', '北京市东城区', '北京市密云县', '北京市大兴区', '北京市延庆县', '北京市平谷区', '北京市海淀区', '北京市朝阳区', '北京市门头沟区', '北京市石景山区', '北京市房山区', '北京市怀柔区'];\r\n\r\n    for (var i = 0; i < county.length; i++) {\r\n        var bdary = new BMap.Boundary();\r\n        bdary.get(county[i], function(rs) { //获取行政区域\r\n            //bmap.clearOverlays(); //清除地图覆盖物       \r\n            var count = rs.boundaries.length; //行政区域的点有多少个\r\n            if (count === 0) {\r\n                alert('未能获取当前输入行政区域');\r\n                return;\r\n            }\r\n            var pointArray = [];\r\n            for (var i = 0; i < count; i++) {\r\n                var ply = new BMap.Polygon(rs.boundaries[i], {\r\n                    strokeWeight: 2,\r\n                    strokeColor: \"#ff0000\"\r\n                }); //建立多边形覆盖物\r\n                bmap.addOverlay(ply); //添加覆盖物\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n    bmap.addControl(new BMap.MapTypeControl());\r\n});","html":"","externalScripts":"http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-3591882659","theme":"","layout":"","viewCount":309,"userName":"f***r","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJn8mK_oM.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":["Heatmap","热力图"],"updaterUserName":"f***r"}}