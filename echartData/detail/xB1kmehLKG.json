{"status":0,"data":{"cid":"xB1kmehLKG","authorUid":"bd-442035385","authorUserName":"小***了","title":"某人某月每一天各项活动占比","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-03-14T14:22:14.000Z","lastUpdateTime":"2018-03-14T14:22:14.000Z","auth":2,"uid":"bd-442035385","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.0.4","versionCreateTime":"2018-03-14T14:23:21.000Z","code":"var cellSize = [80, 80];\nvar pieRadius = 30;\nvar mydata = [\n    [10, 2, 0, 12],\n    [0, 1, 0, 23],\n    [0, 2, 0, 22],\n    [0, 2, 1.5, 20.5],\n    [0, 3, 1.5, 19.5],\n    [10, 1, 1.5, 11.5],\n    [0, 2, 1.5, 20.5],\n    [10, 2, 0, 12],\n    [0, 1, 0, 23],\n    [0, 4, 0, 20],\n    [0, 2, 1.5, 20.5],\n    [0, 1, 1.5, 21.5],\n    [9, 2, 1.5, 11.5],\n    [0, 5, 1.5, 17.5],\n    [10, 1, 0, 13],\n    [0, 5, 0, 19],\n    [0, 1, 0, 23],\n    [0, 1, 1.5, 21.5],\n    [0, 5, 1.5, 17.5],\n    [9, 2, 1.5, 11.5],\n    [0, 1, 1.5, 21.5],\n    [9, 1, 0, 14],\n    [0, 1, 0, 23],\n    [0, 3, 0, 21],\n    [0, 1, 1.5, 21.5],\n    [0, 4, 1.5, 18.5],\n    [10, 2, 1.5, 10.5],\n    [0, 4, 1.5, 18.5],\n    [10, 1, 0, 11],\n    [0, 4, 0, 20],\n    [0, 12, 0, 12]\n]\n\nfunction getVirtulData() {\n    var date = +echarts.number.parseDate('2017-12-01');\n    var end = +echarts.number.parseDate('2018-01-01');\n    var dayTime = 3600 * 24 * 1000;\n    var data = [];\n    for (var time = date; time < end; time += dayTime) {\n        data.push([\n            echarts.format.formatTime('yyyy-MM-dd', time),\n            Math.floor(Math.random() * 10000)\n        ]);\n    }\n    return data;\n}\n\nfunction getPieSeries(scatterData, chart) {\n    return echarts.util.map(scatterData, function(item, index) {\n        var center = chart.convertToPixel('calendar', item);\n        return {\n            id: index + 'pie',\n            type: 'pie',\n            center: center,\n            label: {\n                normal: {\n                    formatter: '{c}',\n                    position: 'inside'\n                }\n            },\n            radius: pieRadius,\n            data: [{\n                    name: '实习',\n                    value: mydata[index][0]\n                },\n                {\n                    name: '其余外出',\n                    value: mydata[index][1]\n                },\n                {\n                    name: '上课',\n                    value: mydata[index][2]\n                },\n                {\n                    name: '寝室',\n                    value: mydata[index][3]\n                }\n            ]\n        };\n    });\n}\n\nfunction getPieSeriesUpdate(scatterData, chart) {\n    return echarts.util.map(scatterData, function(item, index) {\n        var center = chart.convertToPixel('calendar', item);\n        return {\n            id: index + 'pie',\n            center: center\n        };\n    });\n}\n\nvar scatterData = getVirtulData();\n\noption = {\n    tooltip: {},\n    title:{\n        text:'2017年12月每天各项活动占比',\n        left:'center'\n    },\n    legend: {\n        data: ['实习', '其余外出', '上课', '寝室'],\n        bottom: 20\n    },\n    calendar: {\n        top: 'middle',\n        left: 'center',\n        orient: 'vertical',\n        cellSize: cellSize,\n        yearLabel: {\n            show: false,\n            textStyle: {\n                fontSize: 30\n            }\n        },\n        dayLabel: {\n            margin: 20,\n            firstDay: 1,\n            nameMap: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']\n        },\n        monthLabel: {\n            show: false\n        },\n        range: ['2017-12']\n    },\n    series: [{\n        id: 'label',\n        type: 'scatter',\n        coordinateSystem: 'calendar',\n        symbolSize: 1,\n        label: {\n            normal: {\n                show: true,\n                formatter: function(params) {\n                    return echarts.format.formatTime('dd', params.value[0]);\n                },\n                offset: [-cellSize[0] / 2 + 10, -cellSize[1] / 2 + 10],\n                textStyle: {\n                    color: '#000',\n                    fontSize: 14\n                }\n            }\n        },\n        data: scatterData\n    }]\n};\n\nif (!app.inNode) {\n    var pieInitialized;\n    setTimeout(function() {\n        pieInitialized = true;\n        myChart.setOption({\n            series: getPieSeries(scatterData, myChart)\n        });\n    }, 10);\n\n    app.onresize = function() {\n        if (pieInitialized) {\n            myChart.setOption({\n                series: getPieSeriesUpdate(scatterData, myChart)\n            });\n        }\n    };\n}","html":"","externalScripts":"","updaterUID":"bd-442035385","theme":"","layout":"","viewCount":4170,"userName":"小***了","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1kmehLKG.png?v=1521037401320","isCustomThumbnail":0,"builtinTags":["calendar","category-work","legend","series-pie","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"小***了"}}