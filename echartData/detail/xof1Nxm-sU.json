{"status":0,"data":{"cid":"xof1Nxm-sU","authorUid":"obd-oFgwdBv8Jx1Adj7QXrqoz44I8NOW35J","authorUserName":"l***尼","title":"在线率","description":"35%","latestVersion":3,"alwaysLatest":1,"createTime":"2020-12-08T03:00:34.000Z","lastUpdateTime":"2020-12-08T03:00:34.000Z","auth":2,"uid":"obd-oFgwdBv8Jx1Adj7QXrqoz44I8NOW35J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-08T07:08:47.000Z","code":"\r\nvar data = {\r\n    'name': '设备统计',\r\n    'value': [35],\r\n    'nAmount': 1566557.14\r\n};\r\nvar ydata = [{\r\n        name: '离线率',\r\n        value: 25\r\n    },\r\n    {\r\n        name: '在线率',\r\n        value: 32,\r\n        type: 'bar',\r\n        z: 10,\r\n        data: data.value,\r\n        showBackground: false,\r\n        backgroundStyle: {\r\n            color: \"blue\",\r\n            borderWidth: 10,\r\n            width: 10\r\n        },\r\n        coordinateSystem: 'polar',\r\n        barWidth: 30, //大的占比环\r\n        itemStyle: {\r\n            normal: {\r\n                opacity: 1,\r\n                color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{\r\n                    offset: 0,\r\n                    color: \"#FFCC1F\"\r\n                }, {\r\n                    offset: 1,\r\n                    color: \"#FFCC1F\"\r\n                }]),\r\n                shadowBlur: 5,\r\n                shadowColor: '#FFCC1F',\r\n            }\r\n        },\r\n    }\r\n];\r\n\r\nvar xdata = [\"离线率\", '在线率'];\r\nvar color = ['#00FDFA', '#00B1BF', '#00F7F8']\r\n\r\noption = {\r\n    backgroundColor: '#1F3A87',\r\n    title: {\r\n        text: '在线率',\r\n        textStyle: {\r\n            color: color[2],\r\n            fontSize: 20\r\n        },\r\n        subtext: data.value[0] + '%',\r\n        subtextStyle: {\r\n            color: color[2],\r\n            fontSize: 18\r\n        },\r\n        itemGap: 20,\r\n        left: 'center',\r\n        top: 'center'\r\n    },\r\n    graphic: [{ // 将旋转过的 group 整体定位右下角：\r\n        type: 'group',\r\n        left: 'center',\r\n        top: '80%',\r\n        // rotation: Math.PI / 4,\r\n        children: [{\r\n                type: 'circle',\r\n                left: 'center',\r\n                top: '80%',\r\n                style: {\r\n                    fill: '#fff',\r\n                    // text: data.name,\r\n                    font: '18px Microsoft YaHei'\r\n                },\r\n                shape: {\r\n                    cx: 20,\r\n                    cy: 30,\r\n                    r: 5\r\n                }\r\n            },\r\n            {\r\n                type: 'text',\r\n                left: \"25\",\r\n                style: {\r\n                    fill: '#777',\r\n                    text: [\"在线：\"+data.value[0] + '%'],\r\n                }\r\n            }\r\n        ]\r\n    }],\r\n    legend: {\r\n        orient: 'horizontal', //\"vertical\",\r\n        x: \"left\",\r\n        left: \"center\",\r\n        bottom: \"10%\",\r\n        data: xdata,\r\n        itemWidth: 20,\r\n        itemHeight: 14,\r\n        itemGap: 15,\r\n        textStyle: {\r\n            color: \"#fff\"\r\n        },\r\n        formatter: function(name) {\r\n            let count = '';\r\n            ydata.forEach(function(item) {\r\n                console.log(item);\r\n                if (item.name == name) {\r\n                    count = item.value;\r\n                }\r\n            });\r\n            return ' ' + name + ' ' + count + '%'\r\n        }\r\n    },\r\n    tooltip: {\r\n        formatter: function(params) {\r\n            return '<span style=\"color: #fff;\">离线占比：' + params.value + '%</span>';\r\n        }\r\n    },\r\n    angleAxis: {\r\n        max: 100,\r\n        clockwise: false, // 逆时针\r\n        // 隐藏刻度线\r\n        show: false,\r\n        startAngle: 110,\r\n    },\r\n    radiusAxis: {\r\n        type: 'category',\r\n        show: true,\r\n        axisLabel: {\r\n            show: false,\r\n        },\r\n        axisLine: {\r\n            show: false,\r\n\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n    },\r\n    polar: [{\r\n        center: ['50%', '50%'], //中心点位置\r\n        radius: '80%' //图形大小\r\n    }],\r\n    series: [{\r\n            name: '小环',\r\n            type: 'gauge',\r\n            splitNumber: 12,\r\n            radius: '33%', //中间装饰环\r\n            center: ['50%', '50%'],\r\n            startAngle: 0,\r\n            endAngle: 359.9999,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: true,\r\n                lineStyle: {\r\n                    color: \"#0BF4E4\",\r\n                    width: 3.5,\r\n                    shadowBlur: 1,\r\n                    shadowColor: color[1],\r\n                },\r\n                length: 20,\r\n                splitNumber: 3\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            detail: {\r\n                show: false\r\n            }\r\n        }, {\r\n            type: 'bar',\r\n            z: 10,\r\n            data: data.value,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                color: \"blue\",\r\n                borderWidth: 10,\r\n                width: 10\r\n            },\r\n            coordinateSystem: 'polar',\r\n            roundCap: true,\r\n            barWidth: 30, //大的占比环\r\n            itemStyle: {\r\n                normal: {\r\n                    opacity: 1,\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{\r\n                        offset: 0,\r\n                        color: \"#FFCC1F\"\r\n                    }, {\r\n                        offset: 1,\r\n                        color: \"#FFCC1F\"\r\n                    }]),\r\n                    shadowBlur: 5,\r\n                    shadowColor: '#FFCC1F',\r\n                }\r\n            },\r\n        },\r\n        {\r\n            type: 'pie',\r\n            name: '内层细圆环',\r\n            radius: ['41%', '38%'],\r\n            startAngle: 110,\r\n            hoverAnimation: false,\r\n            clockWise: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{\r\n                        offset: 0,\r\n                        color: \"#0BF4E4\"\r\n                    }, {\r\n                        offset: 1,\r\n                        color: \"#0BF4E4\"\r\n                    }]),\r\n                }\r\n            },\r\n            tooltip: {\r\n                show: false,\r\n            },\r\n            label: {\r\n                show: false\r\n            },\r\n            data: [100]\r\n        }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oFgwdBv8Jx1Adj7QXrqoz44I8NOW35J","theme":"","layout":"","viewCount":211,"userName":"l***尼","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xof1Nxm-sU.png?v=1607411327285","isCustomThumbnail":0,"builtinTags":["category-work","graphic","polar","series-bar","series-gauge","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"l***尼"}}