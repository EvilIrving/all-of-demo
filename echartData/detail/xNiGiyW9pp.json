{"status":0,"data":{"cid":"xNiGiyW9pp","authorUid":"bd-7382906384","authorUserName":"满***6","title":"渐变柱状图加折线图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-29T03:32:18.000Z","lastUpdateTime":"2020-04-29T03:32:18.000Z","auth":2,"uid":"bd-7382906384","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-29T03:32:18.000Z","code":"var xData = [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\"],\r\n    yData1 = [104, 56, 136, 86, 98, 86],\r\n    yData2 = [100, 206, 236, 106, 80, 160],\r\n    yData3 = [90, 106, 236, 96, 180, 100],\r\n    yData4 = [90, 56, 36, -6, -50, -70],\r\n    borderData = [],\r\n    legend = [\"本企业\", \"电力用户\", \"其他企业\", \"同比\"],\r\n    colorArr = [{\r\n            start: \"rgba(155, 101, 229,\",\r\n            end: \"rgba(18, 58, 86,0.5)\"\r\n        },\r\n        {\r\n            start: \"rgba(71, 173, 245,\",\r\n            end: \"rgba(18, 58, 86,0.5)\"\r\n        },\r\n        {\r\n            start: \"rgba(82, 249, 107,\",\r\n            end: \"rgba(18, 58, 86,0.5)\"\r\n        },\r\n        {\r\n            color: \"#00EAFF\"\r\n        }\r\n    ];\r\nvar normalColor = \"rgba(255,255,255,0.5)\";\r\n//   var fontSize = 20;\r\nlet seriesData = [];\r\nvar borderHeight = 4;\r\nxData.forEach(element => {\r\n    borderData.push(borderHeight);\r\n});\r\n[yData1, yData2, yData3, yData4].forEach((item, index) => {\r\n    var obj1 = {};\r\n    var obj2 = {};\r\n    if (index < 3) {\r\n        obj1 = {\r\n            name: legend[index],\r\n            type: \"bar\",\r\n            stack: legend[index],\r\n            data: item,\r\n            barWidth: \"15%\",\r\n            itemStyle: {\r\n                normal: {\r\n                    color: {\r\n                        type: \"linear\",\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 0,\r\n                        y2: 1,\r\n                        colorStops: [{\r\n                                offset: 0,\r\n                                color: colorArr[index].start + \"0.7)\"\r\n                            },\r\n                            {\r\n                                offset: 0.5,\r\n                                color: colorArr[index].start + \"0.3)\"\r\n                            },\r\n                            {\r\n                                offset: 1,\r\n                                color: colorArr[index].end\r\n                            }\r\n                        ],\r\n                        globalCoord: false\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        obj2 = {\r\n            name: \"\",\r\n            type: \"bar\",\r\n            stack: legend[index],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: colorArr[index].start + \"1)\"\r\n                }\r\n            },\r\n            data: borderData\r\n        };\r\n        seriesData.push(obj1);\r\n        seriesData.push(obj2);\r\n    } else {\r\n        var obj3 = {\r\n            name: legend[index],\r\n            type: \"line\",\r\n            yAxisIndex: 1,\r\n            smooth: false,\r\n            symbol: \"circle\",\r\n            symbolSize: 10,\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 2\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: colorArr[index].color,\r\n                    borderColor: \"#fff\",\r\n                    borderWidth: 1\r\n                }\r\n            },\r\n            data: item,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            }\r\n        };\r\n        seriesData.push(obj3);\r\n    }\r\n});\r\nconsole.log(seriesData);\r\noption = {\r\n    backgroundColor: \"#000\",\r\n    grid: {\r\n        left: \"3%\",\r\n        top: \"16%\",\r\n        right: \"3%\",\r\n        bottom: 0,\r\n        containLabel: true\r\n    },\r\n    legend: {\r\n        show: true,\r\n        icon: \"rect\",\r\n        itemWidth: 20,\r\n        itemHeight: 3,\r\n        right: \"15%\",\r\n        top: \"0%\",\r\n        textStyle: {\r\n            color: \"#fff\"\r\n        },\r\n        data: legend\r\n    },\r\n    tooltip: {\r\n        trigger: \"axis\",\r\n        formatter: function(params) {\r\n            var str = \"\";\r\n            for (var i = 0; i < params.length; i++) {\r\n                if (params[i].seriesName !== \"\") {\r\n                    str +=\r\n                        params[i].name +\r\n                        \":\" +\r\n                        params[i].seriesName +\r\n                        params[i].value +\r\n                        \"<br/>\";\r\n                }\r\n            }\r\n            return str;\r\n        }\r\n    },\r\n    xAxis: [{\r\n        type: \"category\",\r\n        data: xData,\r\n        axisPointer: {\r\n            type: \"shadow\"\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: normalColor,\r\n                fontSize: 12\r\n            }\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: normalColor\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    }],\r\n    yAxis: [{\r\n            type: \"value\",\r\n            name: \"亿千瓦时\",\r\n            nameTextStyle: {\r\n                color: normalColor,\r\n                fontSize: 12\r\n            },\r\n            // \"min\": 0,\r\n            // \"max\": 50,\r\n            axisLabel: {\r\n                formatter: \"{value}\",\r\n                textStyle: {\r\n                    color: normalColor,\r\n                    fontSize: 12\r\n                }\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: normalColor\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    type: \"dashed\",\r\n                    color: normalColor\r\n                }\r\n            }\r\n        },\r\n        {\r\n            type: \"value\",\r\n            name: \"%\",\r\n            nameTextStyle: {\r\n                color: normalColor,\r\n                fontSize: 12\r\n            },\r\n            min: -100,\r\n            max: 100,\r\n            axisLabel: {\r\n                formatter: \"{value}\",\r\n                textStyle: {\r\n                    color: normalColor,\r\n                    fontSize: 12\r\n                }\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: normalColor\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: true,\r\n                lineStyle: {\r\n                    type: \"dashed\",\r\n                    color: \"rgba(255,255,255,0.2)\"\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    series: seriesData\r\n};","html":"","externalScripts":"","updaterUID":"bd-7382906384","theme":"","layout":"","viewCount":17880,"userName":"满***6","commentCount":1,"starCount":49,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNiGiyW9pp.png?v=1588131138750","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"满***6"}}