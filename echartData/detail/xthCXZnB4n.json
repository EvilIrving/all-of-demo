{"status":0,"data":{"cid":"xthCXZnB4n","authorUid":"obd-oAl1pE6a8IK-V1VtIsMUNwEwQjmbQ7b","authorUserName":"西***的","title":"世界各国GDP总量前十位排名及占比","description":"by syx","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-23T01:20:27.000Z","lastUpdateTime":"2020-12-23T01:20:27.000Z","auth":2,"uid":"obd-oAl1pE6a8IK-V1VtIsMUNwEwQjmbQ7b","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-23T01:20:27.000Z","code":"var data = [{\r\n        \"time\": 2015,\r\n        \"data\": [{\r\n                \"name\": \"美国\",\r\n                \"value\": [18.22, 24.29, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"中国\",\r\n                \"value\": [11.02, 14.69, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"日本\",\r\n                \"value\": [4.39, 5.85, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [3.38, 4.51, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [2.9, 3.87, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [2.44, 3.25, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [2.1, 2.8, \"印度\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [1.83, 2.44, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1.55, 2.07, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"India\",\r\n                \"value\": [1.36, 1.81, \"俄罗斯\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2016,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [18.03, 23.69, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [11.23, 14.45, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Russia\",\r\n                \"value\": [4.38, 5.76, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [3.36, 4.42, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [2.86, 3.76, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [2.42, 3.18, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [1.82, 2.39, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [1.55, 2.04, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1.33, 1.75, \"俄罗斯\"]\r\n            },\r\n            {\r\n                \"name\": \"Mexico\",\r\n                \"value\": [1.05, 1.38, \"墨西哥\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2017,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [19.56, 24.18, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [13.17, 16.28, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [4.34, 5.37, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [3.59, 4.44, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [3.23, 3.99, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [2.59, 3.20, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Russia\",\r\n                \"value\": [1.93, 2.39, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1.68, 2.08, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Spain\",\r\n                \"value\": [1.31, 1.62, \"俄罗斯\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [1.2, 1.6, \"西班牙\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2018,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [20.51, 23.91, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [13.46, 15.69, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [5.07, 5.91, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [4.03, 4.7, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [2.81, 3.28, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [2.79, 3.25, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [2.09, 2.44, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1.73, 2.02, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Brazil\",\r\n                \"value\": [1.58, 1.84, \"俄罗斯\"]\r\n            },\r\n            {\r\n                \"name\": \"Mexico\",\r\n                \"value\": [1.25, 1.46, \"墨西哥\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2019,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [21.41, 24.61, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [15.54, 17.86, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [5.36, 6.16, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [4.42, 5.08, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [3.16, 3.63, \"印度\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [3.06, 3.52, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Brazil\",\r\n                \"value\": [3.02, 3.47, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [2.26, 2.6, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"India\",\r\n                \"value\": [2.26, 2.6, \"巴西\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1.91, 2.2, \"加拿大\"]\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n\r\n\r\nvar option = {\r\n    baseOption: {\r\n        animationDurationUpdate: 1000,\r\n        animationEasingUpdate: 'quinticInOut',\r\n        timeline: {\r\n            axisType: 'category',\r\n            orient: 'vertical',\r\n            autoPlay: true,\r\n            inverse: true,\r\n            playInterval: 5000,\r\n            left: null,\r\n            right: 5,\r\n            top: 20,\r\n            bottom: 20,\r\n            width: 46,\r\n            height: null,\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            symbol: 'none',\r\n            lineStyle: {\r\n                color: '#555'\r\n            },\r\n            checkpointStyle: {\r\n                color: '#bbb',\r\n                borderColor: '#777',\r\n                borderWidth: 1\r\n            },\r\n            controlStyle: {\r\n                showNextBtn: false,\r\n                showPrevBtn: false,\r\n                normal: {\r\n                    color: '#666',\r\n                    borderColor: '#666'\r\n                },\r\n                emphasis: {\r\n                    color: '#aaa',\r\n                    borderColor: '#aaa'\r\n                }\r\n            },\r\n            data: data.map(function(ele) {\r\n                return ele.time\r\n            })\r\n        },\r\n        backgroundColor: '#00809F',\r\n        title: {\r\n            text: '世界各国GDP总量前十位排名及占比',\r\n            subtext: 'GDP单位:万亿美元',\r\n            left: 'center',\r\n            top: 'top',\r\n            textStyle: {\r\n                fontSize: 25,\r\n                color: 'rgba(255,255,255, 0.9)'\r\n            }\r\n        },\r\n        tooltip: {\r\n            formatter: function(params) {\r\n                if ('value' in params.data) {\r\n                    return params.data.value[2] + ': ' + params.data.value[0];\r\n                }\r\n            }\r\n        },\r\n        grid: {\r\n            left: '12%',\r\n            right: '45%',\r\n            top: '70%',\r\n            bottom: 20\r\n        },\r\n        xAxis: {},\r\n        yAxis: {},\r\n        series: [{\r\n            id: 'map',\r\n            type: 'map',\r\n            mapType: 'world',\r\n            top: '10%',\r\n            bottom: '25%',\r\n            left: 10,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#5C5CAA',\r\n                    borderColor: '#FF6C48'\r\n                },\r\n                emphasis: {\r\n                    label: {\r\n                        show: true\r\n                    },\r\n                    areaColor: 'rgba(255,255,255, 0.5)'\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'bar',\r\n            type: 'bar',\r\n            tooltip: {\r\n                show: false\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'pie',\r\n            type: 'pie',\r\n            radius: ['8%', '20%'],\r\n            center: ['75%', '85%'],\r\n            roseType: 'radius',\r\n            tooltip: {\r\n                formatter: '{b} {d}%'\r\n            },\r\n            data: [],\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: 'rgba(0,0,0,0.3)',\r\n                    borderSize: 1\r\n                }\r\n            }\r\n        }]\r\n    },\r\n    options: []\r\n}\r\n\r\nfor (var i = 0; i < data.length; i++) {\r\n    //计算其余国家GDP\r\n    var restPercent = 100;\r\n    var restValue = 0;\r\n    data[i].data.forEach(function(ele) {\r\n        restPercent = restPercent - ele.value[1];\r\n    });\r\n    restValue = data[i].data[0].value[0] * (restPercent / data[i].data[0].value[1]);\r\n    console.log(restPercent);\r\n    console.log(restValue);\r\n    option.options.push({\r\n        visualMap: [{\r\n            dimension: 0,\r\n            left: 10,\r\n            itemWidth: 12,\r\n            min: data[i].data[9].value[0],\r\n            max: data[i].data[0].value[0],\r\n            text: ['High', 'Low'],\r\n            textStyle: {\r\n                color: '#ddd'\r\n            },\r\n            inRange: {\r\n                color: ['lightskyblue', 'yellow', 'orangered', 'red']\r\n            }\r\n        }],\r\n        xAxis: {\r\n            type: 'value',\r\n            boundaryGap: [0, 0.1],\r\n            axisLabel: {\r\n                show: false,\r\n            }\r\n        },\r\n        yAxis: {\r\n            type: 'category',\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#ddd'\r\n                }\r\n            },\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[2]\r\n            }).reverse()\r\n        },\r\n        series: [{\r\n            id: 'map',\r\n            data: data[i].data\r\n        }, {\r\n            id: 'bar',\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[0]\r\n            }).reverse(function(a, b) {\r\n                return a > b\r\n            })\r\n        }, {\r\n            id: 'pie',\r\n            data: data[i].data.map(function(ele) {\r\n                return {\r\n                    name: ele.value[2],\r\n                    value: ele.value\r\n                }\r\n            }).concat({\r\n                name: '其他国家',\r\n                value: restValue\r\n            }),\r\n        }]\r\n    })\r\n}\r\n\r\n","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"obd-oAl1pE6a8IK-V1VtIsMUNwEwQjmbQ7b","theme":"","layout":"","viewCount":112,"userName":"西***的","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xthCXZnB4n.png?v=1608686427664","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-map","series-pie","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"西***的"}}