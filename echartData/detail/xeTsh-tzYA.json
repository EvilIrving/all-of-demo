{"status":0,"data":{"cid":"xeTsh-tzYA","authorUid":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","authorUserName":"李***3","title":"上海飞往中转站","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-27T06:16:48.000Z","lastUpdateTime":"2020-09-27T06:16:48.000Z","auth":1,"uid":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-27T06:16:48.000Z","code":"function randomData() {\r\n    return Math.round(Math.random() * 10);\r\n}\r\n\r\n\r\nvar geoCoordMap2 = {\r\n    上海: [121.4648, 31.2891, 23123, 17453, 15343, 12193, 2678.5, 3256.6, 1900.8, 141.7, 2749.5, 55919],\r\n    尼日利亚: [-4.388361, 11.186148, 23123, 17453, 15343, 12187.9, 2075.8, 1000.1, 1774.2, 2084.7, 5987.8, 421209],\r\n    美国洛杉矶: [-118.24311, 34.052713, 23123, 17453, 15343, 12168.1, 5323.9, 3322.3, 1488.6, 2694.3, 5701.4, 541109],\r\n    香港邦泰: [114.195466, 22.282751, 23123, 17453, 15343, 11992.9, 1012, 192.9, 361.5, 2217, 449.7, 223109],\r\n    美国芝加哥: [-87.801833, 41.870975, 23123, 17453, 15343, 11944.1, 4616, 2724.3, 862.2, 1279.1, 2425.2, 511109],\r\n    加纳库马西: [-4.62829, 7.72415, 23123, 17453, 15343, 11783.8, 4417.9, 1589.9, 6144.6, 1453.5, 943.6, 422109],\r\n    英国曼彻斯特: [-1.657222, 51.886863, 23123, 17453, 15343, 11525.9, 5370.9, 2940.6, 1185.3, 3821.3, 104, 353109],\r\n    德国汉堡: [10.01959, 54.38474, 23123, 17453, 15343, 11320.4, 223.2, 1069.1, 6596, 936.7, 280.4, 431049],\r\n    哈萨克斯坦阿拉木图: [45.326912, 41.101891, 23123, 17453, 15343, 11317, 2745.4, 1850.9, 3383.2, 3530.8, 727.1, 254109],\r\n    俄罗斯伊尔库茨克: [89.116876, 67.757906, 23123, 17453, 15343, 11261.7, 4252.1, 1789.6, 2266.9, 1153.1, 5655.3, 191109],\r\n    巴西: [-48.678945, -10.493623, 23123, 17453, 15343, 11046.1, 285.5, 683.1, 2440, 1885.7, 694, 184309],\r\n    埃及达米埃塔: [31.815593, 31.418032, 23123, 17453, 15343, 10937.3, 2789.5, 3090.1, 1652.8, 232.9, 1776.7, 212409],\r\n    西班牙巴塞罗纳: [2.175129, 41.385064, 23123, 17453, 15343, 10431.5, 2156.8, 1435.9, 5850.1, 3007.8, 5016.3, 288039],\r\n    柬埔寨金边: [104.88659, 11.545469, 23123, 17453, 15343, 10431.5, 2156.8, 1435.9, 5850.1, 3007.8, 5016.3, 12909],\r\n    意大利米兰: [9.189948, 45.46623, 23123, 17453, 15343, 9732.8, 2865.1, 3416, 4292.1, 111.8, 4563.1, 349009],\r\n    乌拉圭蒙得维的亚: [-56.162231, -34.901113, 23123, 17453, 15343, 9309.4, 1240.4, 961.9, 1644.2, 2953.7, 1897.7, 222409],\r\n    莫桑比克马普托: [32.608571, -25.893473, 23123, 17453, 15343, 8705.2, 1115.3, 2409.1, 2974.7, 1880.4, 3210, 157409],\r\n    阿尔及利亚阿尔及尔: [3.054275, 36.753027, 23123, 17453, 15343, 8496.9, 2435.1, 66.3, 5730.2, 3027.7, 2178.4, 348363],\r\n    阿联酋迪拜: [55.269441, 25.204514, 23123, 17453, 15343, 8297.1, 1678, 3438.2, 3819.8, 2544.6, 2817.4, 522409],\r\n    匈牙利布达佩斯: [17.108519, 48.179162, 23123, 17453, 15343, 8131.1, 5166.6, 815.6, 4792.1, 2855.3, 160.2, 442309],\r\n    澳大利亚悉尼: [150.993137, -33.675509, 23123, 17453, 15343, 7864.7, 2952.7, 234.1, 1817.7, 624.6, 5397.2, 512209],\r\n    美国加州: [-121.910642, 41.38028, 23123, 17453, 15343, 7823, 1649.7, 2686.7, 2969.2, 1833.2, 4728.3, 516209],\r\n    澳大利亚墨尔本: [144.999416, -37.781726, 23123, 17453, 15343, 7608.7, 3675.7, 1821.2, 2990.2, 2895.4, 5655.9, 526409],\r\n    墨西哥: [-99.094092, 19.365711, 23123, 17453, 15343, 7250.9, 4350.9, 184.1, 6110.5, 330.8, 3529.8, 496409],\r\n    加拿大温哥华: [-123.023921, 49.311753, 23123, 17453, 15343, 6908.1, 4805.5, 120.2, 4052.3, 2623.4, 1092.5, 486409]\r\n};\r\n\r\n//飞机标签\r\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\n\r\n\r\nvar SHData2 = [\r\n    [{\r\n        name: \"上海\",\r\n        value: 2\r\n    }, {\r\n        name: \"英国曼彻斯特\"\r\n    }],\r\n    [{\r\n        name: \"英国曼彻斯特\",\r\n        value: 1\r\n    }, {\r\n        name: \"美国洛杉矶\"\r\n    }],\r\n    [{\r\n        name: \"上海\",\r\n        value: 2\r\n    }, {\r\n        name: \"柬埔寨金边\"\r\n    }],\r\n    [{\r\n        name: \"柬埔寨金边\",\r\n        value: 1\r\n    }, {\r\n        name: \"美国洛杉矶\"\r\n    }],\r\n    [{\r\n        name: \"美国洛杉矶\",\r\n        value: 2\r\n    }, {\r\n        name: \"美国洛杉矶\"\r\n    }]\r\n];\r\nvar ser = [];\r\nvar convertDataWorld = function(data) {\r\n    var res = [];\r\n    var dataItem = data[0];\r\n    var dataItem2 = data[2];\r\n    var fromCoord = geoCoordMap2[dataItem[0].name];\r\n    var toCoord = geoCoordMap2[dataItem[1].name];\r\n    if (fromCoord && toCoord) {\r\n        res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[0].value\r\n            },\r\n            {\r\n                coord: toCoord\r\n            }\r\n        ]);\r\n    }\r\n    var fromCoord2 = geoCoordMap2[dataItem2[0].name];\r\n    var toCoord2 = geoCoordMap2[dataItem2[1].name];\r\n    if (fromCoord2 && toCoord2) {\r\n        res.push([{\r\n                coord: fromCoord2,\r\n                value: dataItem2[0].value\r\n            },\r\n            {\r\n                coord: toCoord2\r\n            }\r\n        ]);\r\n    }\r\n    ser = series;\r\n    console.log(ser);\r\n    return res;\r\n};\r\nvar convertDataWorld2 = function(data) {\r\n    var res = [];\r\n    var dataItem = data[1];\r\n    var dataItem3 = data[3];\r\n    var fromCoord = geoCoordMap2[dataItem[0].name];\r\n    var toCoord = geoCoordMap2[dataItem[1].name];\r\n    if (fromCoord && toCoord) {\r\n        res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[0].value\r\n            },\r\n            {\r\n                coord: toCoord\r\n            }\r\n        ]);\r\n    }\r\n    var fromCoord3 = geoCoordMap2[dataItem3[0].name];\r\n    var toCoord3 = geoCoordMap2[dataItem3[1].name];\r\n    if (fromCoord3 && toCoord3) {\r\n        res.push([{\r\n                coord: fromCoord3,\r\n                value: dataItem3[0].value\r\n            },\r\n            {\r\n                coord: toCoord3\r\n            }\r\n        ]);\r\n    }\r\n    ser = series;\r\n    console.log(ser);\r\n    return res;\r\n};\r\n\r\n\r\n\r\nvar series = [];\r\n[\r\n    [\"上海\", SHData2]\r\n].forEach(function(item, i) {\r\n    series.push({\r\n            type: \"lines\",\r\n            zlevel: 2,\r\n            effect: {\r\n                show: true,\r\n                color: '#55aaff',\r\n                period: 5, //箭头指向速度，值越小速度越快\r\n                trailLength: 0, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                symbol: planePath, //箭头图标\r\n                symbolSize: 25 //图标大小\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#FF0000',\r\n                    width: 1, //尾迹线条宽度\r\n                    opacity: 0, //尾迹线条透明度\r\n                    curveness: -0.3 //尾迹线条曲直度\r\n                }\r\n            },\r\n            data: convertDataWorld(item[1])\r\n        }, {\r\n            type: \"effectScatter\",\r\n            coordinateSystem: \"geo\",\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                //涟漪特效\r\n                period: 4, //动画时间，值越小速度越快\r\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\r\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: \"right\", //显示位置\r\n                    offset: [5, 0], //偏移设置\r\n                    formatter: \"{b}\" //圆环显示文字\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            symbol: \"circle\",\r\n            symbolSize: function(val) {\r\n                return 10; //圆环大小\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                return {\r\n                    name: dataItem[0].name,\r\n                    value: geoCoordMap2[dataItem[0].name].concat([dataItem[0].value])\r\n                };\r\n            })\r\n        },\r\n        //起飞地\r\n        {\r\n            type: \"scatter\",\r\n            coordinateSystem: \"geo\",\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: \"stroke\",\r\n                scale: 4\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    color: \"red\",\r\n                    position: \"right\",\r\n                    formatter: \"{b}\",\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            symbol: \"pin\",\r\n            symbolSize: 30,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: \"red\",\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            data: [{\r\n                value: geoCoordMap2[item[0]].concat([2]),\r\n                visualMap: false\r\n            }]\r\n        });\r\n});\r\n[\r\n    [\"上海\", SHData2]\r\n].forEach(function(item, i) {\r\n    series.push({\r\n            type: \"lines\",\r\n            zlevel: 2,\r\n            effect: {\r\n                show: true,\r\n                color: '#55aaff',\r\n                period: 5, //箭头指向速度，值越小速度越快\r\n                trailLength: 0, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                symbol: planePath, //箭头图标\r\n                symbolSize: 25 //图标大小\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#FF0000',\r\n                    width: 1, //尾迹线条宽度\r\n                    opacity: 0, //尾迹线条透明度\r\n                    curveness: -0.3 //尾迹线条曲直度\r\n                }\r\n            },\r\n            data: convertDataWorld2(item[1])\r\n        }, {\r\n            type: \"effectScatter\",\r\n            coordinateSystem: \"geo\",\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                //涟漪特效\r\n                period: 4, //动画时间，值越小速度越快\r\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\r\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: \"right\", //显示位置\r\n                    offset: [5, 0], //偏移设置\r\n                    formatter: \"{b}\" //圆环显示文字\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            symbol: \"circle\",\r\n            symbolSize: function(val) {\r\n                return 10; //圆环大小\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                return {\r\n                    name: dataItem[0].name,\r\n                    value: geoCoordMap2[dataItem[0].name].concat([dataItem[0].value])\r\n                };\r\n            })\r\n        },\r\n        //起飞地\r\n        {\r\n            type: \"scatter\",\r\n            coordinateSystem: \"geo\",\r\n            zlevel: 2,\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: \"stroke\",\r\n                scale: 4\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    color: \"red\",\r\n                    position: \"right\",\r\n                    formatter: \"{b}\",\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            symbol: \"pin\",\r\n            symbolSize: 30,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: \"red\",\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    color: \"#FF6A6A\"\r\n                }\r\n            },\r\n            data: [{\r\n                value: geoCoordMap2[item[0]].concat([2]),\r\n                visualMap: false\r\n            }]\r\n        });\r\n});\r\nvar year = [\"上海--中转站\", \"中转站-洛杉矶\"];\r\noption = {\r\n    backgroundColor: '#ffffff',\r\n    baseOption: {\r\n        timeline: {\r\n            data: year,\r\n            axisType: 'category',\r\n            autoPlay: true,\r\n            playInterval: 2400,\r\n            left: '10%',\r\n            right: '10%',\r\n            bottom: '3%',\r\n            width: '80%',\r\n            //  height: null,\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#000000'\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#000000'\r\n                    }\r\n                }\r\n            },\r\n            data: year,\r\n            symbolSize: 10,\r\n            lineStyle: {\r\n                color: '#000000'\r\n            },\r\n            checkpointStyle: {\r\n                borderColor: '#000000',\r\n                borderWidth: 2\r\n            },\r\n            controlStyle: {\r\n                showNextBtn: true,\r\n                showPrevBtn: true,\r\n                normal: {\r\n                    color: '#000000',\r\n                    borderColor: '#000000'\r\n                },\r\n                emphasis: {\r\n                    color: '#aaa',\r\n                    borderColor: '#aaa'\r\n                }\r\n            },\r\n\r\n        },\r\n        animation: true,\r\n        animationDuration: 1000,\r\n        animationEasing: 'cubicInOut',\r\n        animationDurationUpdate: 1000,\r\n        animationEasingUpdate: 'cubicInOut',\r\n        grid: {\r\n            right: '1%',\r\n            top: '15%',\r\n            bottom: '10%',\r\n            width: '20%'\r\n        },\r\n        tooltip: {\r\n            trigger: \"item\",\r\n            backgroundColor: 'rgba(166, 200, 76, 0.82)',\r\n            borderColor: \"#FFFFCC\",\r\n            showDelay: 0,\r\n            hideDelay: 0,\r\n            enterable: true,\r\n            transitionDuration: 0,\r\n            extraCssText: \"z-index:100\",\r\n            formatter: function(params, ticket, callback) {\r\n                //根据业务自己拓展要显示的内容\r\n                if (params.seriesType == \"effectScatter\") {\r\n                    return \"地点：\" + params.data.name + \"，航班数：\" + params.data.value[12] +\r\n                        '<br/>' +\r\n                        '<br/>机型：A380' +\r\n                        '<br/>' +\r\n                        '<br/>总成本：' + params.data.value[11] +\r\n                        '<br/>' +\r\n                        '<br/>变动成本:' + params.data.value[2] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp航油成本:' + params.data.value[5] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分摊机务成本:' + params.data.value[6] +\r\n                        '<br/>' +\r\n                        '<br/>固定成本:' + params.data.value[3] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分摊折旧费用:' + params.data.value[7] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分摊租赁费用:' + params.data.value[8] +\r\n                        '<br/>' +\r\n                        '<br/>期间成本:' + params.data.value[4] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分摊财务费用:' + params.data.value[9] + '<br/>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp分摊管理费用:' + params.data.value[10];\r\n                } else if (params.seriesType == \"lines\") {\r\n                    return \"当前航线飞机数量: \" + params.data.value;\r\n                }\r\n                var res = \"\";\r\n                var name = params.name;\r\n                var value = params.value[params.seriesIndex + 1];\r\n                res = \"<span style='color:#fff;'> 目的地:\" + name + \"</span><br/>航班数:\" + params.data.value[12];\r\n                return res;\r\n            }\r\n        },\r\n        geo: {\r\n            map: 'world',\r\n            label: {\r\n                emphasis: {\r\n                    show: false\r\n                }\r\n            },\r\n            roam: false, //是否允许缩放\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'rgba(46, 63, 81, 127)', //地图背景色\r\n                    borderColor: '#445973', //省市边界线00fcff 516a89\r\n                    borderWidth: 1\r\n                },\r\n                emphasis: {\r\n                    color: 'rgba(35, 41, 58, 127)' //悬浮背景\r\n                }\r\n            },\r\n\r\n        },\r\n        visualMap: { //图例值控制\r\n            min: 0,\r\n            max: 2,\r\n            calculable: true,\r\n            show: true,\r\n            color: ['#f44336', '#fc9700', '#ffde00', '#3cfc01', '#00eaff'],\r\n            textStyle: {\r\n                color: '#000000'\r\n            }\r\n        },\r\n        options: []\r\n    },\r\n    calculable: true,\r\n    grid: {\r\n        left: '1.5%',\r\n        //right: '3%',\r\n        bottom: '10%',\r\n        containLabel: true\r\n    },\r\n\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: 'bottom',\r\n        left: 'right',\r\n        textStyle: {\r\n            color: '#fff'\r\n        },\r\n        selectedMode: 'single'\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        boundaryGap: true,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: \"#FF6A6A\"\r\n            },\r\n            margin: 15\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: \"#FF6A6A\"\r\n            }\r\n        }\r\n    }],\r\n    yAxis: [{\r\n        name: '）',\r\n        nameGap: 20,\r\n        nameTextStyle: {\r\n            color: '#454e72',\r\n            fontSize: 12,\r\n        },\r\n        type: 'value',\r\n\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n\r\n            textStyle: {\r\n                color: '#303765'\r\n            },\r\n            margin: 20\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: \"#1d203b\"\r\n            }\r\n        }\r\n    }],\r\n    options: [{\r\n        title: {\r\n            \"text\": \"上海飞往中转站\"\r\n        },\r\n        series: [\r\n            ser[0],\r\n            ser[1],\r\n            ser[2]\r\n        ]\r\n    }, {\r\n\r\n        title: {\r\n            \"text\": \"中转站飞往洛杉矶终点站\"\r\n        },\r\n        series: [\r\n            ser[3],\r\n            ser[4],\r\n            ser[5]\r\n        ]\r\n    }],\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","theme":"","layout":"","viewCount":128,"userName":"李***3","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xeTsh-tzYA.png?v=1601187408729","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"李***3"}}