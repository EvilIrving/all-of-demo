{"status":0,"data":{"cid":"x_3nq7Ejzk","authorUid":"obd-ojLk_2pAHP7KCJRpbl4LYAYeWcXLhEH","authorUserName":"哈***1","title":"地图","description":"远子","latestVersion":2,"alwaysLatest":0,"createTime":"2021-07-27T07:58:46.000Z","lastUpdateTime":"2021-10-13T01:36:39.000Z","auth":1,"uid":"obd-ojLk_2pAHP7KCJRpbl4LYAYeWcXLhEH","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.2","versionCreateTime":"2021-10-13T01:36:39.000Z","code":"    var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n    var geoCoordMap = {\r\n      哈尔滨市: [126.913318, 45.887674]\r\n    }\r\n    var customerBatteryCityData = [\r\n        {name: \"哈尔滨市\", value: 70}\r\n    ]\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n        echarts.registerMap('guangdong', geoJson);\r\n        option = {\r\n            backgroundColor: '#131C38',\r\n            tooltip: {\r\n                trigger: 'item',\r\n                show: true,\r\n                enterable: true,\r\n                textStyle:{\r\n                    fontSize:20,\r\n                    color: '#fff'\r\n                },\r\n                backgroundColor: 'rgba(0,2,89,0.8)',\r\n                formatter: '{b}<br />{c}'\r\n            },\r\n            geo: [\r\n              {\r\n                map: 'guangdong',\r\n                aspectScale: 0.9,\r\n                roam: false, // 是否允许缩放\r\n                zoom: 1.2, // 默认显示级别\r\n                layoutSize: '95%',\r\n                layoutCenter: ['55%', '50%'],\r\n                itemStyle: {\r\n                  normal: {\r\n                    areaColor: {\r\n                      type: 'linear-gradient',\r\n                      x: 0,\r\n                      y: 400,\r\n                      x2: 0,\r\n                      y2: 0,\r\n                      colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(37,108,190,0.3)' // 0% 处的颜色\r\n                      }, {\r\n                        offset: 1,\r\n                        color: 'rgba(15,169,195,0.3)' // 50% 处的颜色\r\n                      }],\r\n                      global: true // 缺省为 false\r\n                    },\r\n                    borderColor: '#4ecee6',\r\n                    borderWidth: 1\r\n                  },\r\n                  emphasis: {\r\n                    areaColor: {\r\n                      type: 'linear-gradient',\r\n                      x: 0,\r\n                      y: 300,\r\n                      x2: 0,\r\n                      y2: 0,\r\n                      colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(37,108,190,1)' // 0% 处的颜色\r\n                      }, {\r\n                        offset: 1,\r\n                        color: 'rgba(15,169,195,1)' // 50% 处的颜色\r\n                      }],\r\n                      global: true // 缺省为 false\r\n                    }\r\n                  }\r\n                },\r\n                emphasis: {\r\n                  itemStyle: {\r\n                    areaColor: '#0160AD'\r\n                  },\r\n                  label: {\r\n                    show: 0,\r\n                    color: '#fff'\r\n                  }\r\n                },\r\n                zlevel: 3\r\n              },\r\n              {\r\n                map: 'guangdong',\r\n                aspectScale: 0.9,\r\n                roam: false, // 是否允许缩放\r\n                zoom: 1.2, // 默认显示级别\r\n                layoutSize: '95%',\r\n                layoutCenter: ['55%', '50%'],\r\n                itemStyle: {\r\n                  normal: {\r\n                    borderColor: 'rgba(192,245,249,.6)',\r\n                    borderWidth: 2,\r\n                    shadowColor: '#2C99F6',\r\n                    shadowOffsetY: 0,\r\n                    shadowBlur: 120,\r\n                    areaColor: 'rgba(29,85,139,.2)'\r\n                  }\r\n                },\r\n                zlevel: 2,\r\n                silent: true\r\n              },\r\n              {\r\n                map: 'guangdong',\r\n                aspectScale: 0.9,\r\n                roam: false, // 是否允许缩放\r\n                zoom: 1.2, // 默认显示级别\r\n                layoutSize: '95%',\r\n                layoutCenter: ['55%', '51.5%'],\r\n                itemStyle: {\r\n                  // areaColor: '#005DDC',\r\n                  areaColor: 'rgba(0,27,95,0.4)',\r\n                  borderColor: '#004db5',\r\n                  borderWidth: 1\r\n                },\r\n                zlevel: 1,\r\n                silent: true\r\n              }\r\n            ],\r\n            series: [\r\n              // map\r\n              {\r\n                geoIndex: 0,\r\n                // coordinateSystem: 'geo',\r\n                showLegendSymbol: true,\r\n                type: 'map',\r\n                roam: true,\r\n                label: {\r\n                  normal: {\r\n                    show: false,\r\n                    textStyle: {\r\n                      color: '#fff'\r\n                    }\r\n                  },\r\n                  emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                      color: '#fff'\r\n                    }\r\n                  }\r\n                },\r\n    \r\n                itemStyle: {\r\n                  normal: {\r\n                    borderColor: '#2ab8ff',\r\n                    borderWidth: 1.5,\r\n                    areaColor: '#12235c'\r\n                  },\r\n                  emphasis: {\r\n                    areaColor: '#2AB8FF',\r\n                    borderWidth: 0,\r\n                    color: 'red'\r\n                  }\r\n                },\r\n                map: 'guangdong', // 使用\r\n                data: customerBatteryCityData\r\n                // data: this.difficultData //热力图数据   不同区域 不同的底色\r\n              },\r\n              // 柱状体的主干\r\n              {\r\n                type: 'lines',\r\n                zlevel: 5,\r\n                effect: {\r\n                  show: false,\r\n                  // period: 4, //箭头指向速度，值越小速度越快\r\n                  // trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                  // symbol: 'arrow', //箭头图标\r\n                  // symbol: imgDatUrl,\r\n                  symbolSize: 5 // 图标大小\r\n                },\r\n                lineStyle: {\r\n                  width: 20, // 尾迹线条宽度\r\n                  color: 'rgb(22,255,255, .6)',\r\n                  opacity: 1, // 尾迹线条透明度\r\n                  curveness: 0 // 尾迹线条曲直度\r\n                },\r\n                label: {\r\n                  show: 0,\r\n                  position: 'end',\r\n                  formatter: '245'\r\n                },\r\n                silent: true,\r\n                data: lineData()\r\n              },\r\n              // 柱状体的顶部\r\n              {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                geoIndex: 0,\r\n                zlevel: 5,\r\n                label: {\r\n                  show: true,\r\n                  formatter: function () {\r\n                    return `顶部label`\r\n                  },\r\n                  position: \"top\"\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: [20, 10],\r\n                itemStyle: {\r\n                  color: 'rgb(22,255,255, 1)',\r\n                  opacity: 1\r\n                },\r\n                silent: true,\r\n                data: scatterData()\r\n              },\r\n              // 柱状体的底部\r\n              {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                geoIndex: 0,\r\n                zlevel: 4,\r\n                label: {\r\n                  // 这儿是处理的\r\n                  formatter: '{b}',\r\n                  position: 'bottom',\r\n                  color: '#fff',\r\n                  fontSize: 12,\r\n                  distance: 10,\r\n                  show: true\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: [20, 10],\r\n                itemStyle: {\r\n                  // color: '#F7AF21',\r\n                  color: 'rgb(22,255,255, 1)',\r\n                  opacity: 1\r\n                },\r\n                silent: true,\r\n                data: scatterData2()\r\n              },\r\n              // 底部外框\r\n              {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                geoIndex: 0,\r\n                zlevel: 4,\r\n                label: {\r\n                  show: false\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: [40, 20],\r\n                itemStyle: {\r\n                    color: {\r\n                    type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [\r\n                        {\r\n                            offset: 0, color: 'rgb(22,255,255, 0)' // 0% 处的颜色\r\n                        }, \r\n                        {\r\n                            offset: .75, color: 'rgb(22,255,255, 0)' // 100% 处的颜色\r\n                        },\r\n                        {\r\n                            offset: .751, color: 'rgb(22,255,255, 1)' // 100% 处的颜色\r\n                        },\r\n                        {\r\n                            offset: 1, color: 'rgb(22,255,255, 1)' // 100% 处的颜色\r\n                        }\r\n                    ],\r\n                    global: false // 缺省为 false\r\n                },\r\n\r\n                  opacity: 1\r\n                },\r\n                silent: true,\r\n                data: scatterData2()\r\n              }\r\n            ]\r\n          }\r\n       myChart.setOption(option);\r\n    })\r\n\r\n      \r\n    // 动态计算柱形图的高度（定一个max）\r\n    function lineMaxHeight () {\r\n        const maxValue = Math.max(...customerBatteryCityData.map(item => item.value))\r\n        return 0.9/maxValue\r\n    }\r\n        // 柱状体的主干\r\n    function lineData () {\r\n        return customerBatteryCityData.map((item) => {\r\n          return {\r\n            coords: [geoCoordMap[item.name], [geoCoordMap[item.name][0], geoCoordMap[item.name][1] + item.value * lineMaxHeight()]]\r\n          }\r\n        })\r\n    }\r\n    // 柱状体的顶部\r\n    function scatterData () {\r\n        return customerBatteryCityData.map((item) => {\r\n          return [geoCoordMap[item.name][0], geoCoordMap[item.name][1] + item.value * lineMaxHeight()]\r\n        })\r\n    }\r\n    // 柱状体的底部\r\n    function scatterData2 () {\r\n        return customerBatteryCityData.map((item) => {\r\n          return {\r\n            name: item.name,\r\n            value: geoCoordMap[item.name]\r\n          }\r\n        })\r\n    }\r\n","html":"","externalScripts":"","updaterUID":"obd-ojCMvFT74TdvFZccx6Fr-HQTM0-LrDN","theme":"","layout":"","viewCount":0,"userName":"哈***1","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_3nq7Ejzk.png?v=1634088999733","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-lines","series-map","series-scatter","tooltip"],"customTags":[],"updaterUserName":"卢***0"}}