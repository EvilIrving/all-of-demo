{"status":0,"data":{"cid":"xClnDjgPFd","authorUid":"bd-7382906384","authorUserName":"满***6","title":"油表图-数值随着指针位置变动","description":"我太难了 用detail偏移试了好久，定位还是不准确，换个方法终于搞出来了","latestVersion":2,"alwaysLatest":1,"createTime":"2020-10-14T04:10:32.000Z","lastUpdateTime":"2020-10-14T04:10:32.000Z","auth":2,"uid":"bd-7382906384","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-14T04:11:33.000Z","code":"      let fontSize = 20; //字体大小\r\n      let textColor = \"#000\";\r\n      let nameTextColor = \"#000\";\r\n      let axisLineColor = \"#000\";\r\n      let nameColor = \"rgba(97, 104, 112,1)\";\r\n      let datas={\r\n        dataArr: [\r\n          {\r\n            // value: nowData||26589,\r\n            value: 39376,\r\n            name: \"\",\r\n          },\r\n        ],\r\n        min:23376,\r\n        max:43161,\r\n        unit: \"MW\",\r\n      };\r\n      var dataArr = datas.dataArr;\r\n      let nowData=dataArr[0].value;\r\n      let min = datas.min;\r\n      let max = datas.max;\r\n       let splitNumber=max-min;\r\n      let per = (dataArr[0].value - min) / (max - min);\r\n      let unit = datas.unit;\r\n      // let offsetX=(dataArr[0].value/max)*100;\r\n    //   let angle =  180 *(dataArr[0].value-min)/(max-min);\r\n      // angle=30;\r\n    //   let offsetY = 0;\r\n    //   let offsetX = 0;\r\n    //   let radius=120;\r\n    //   if (angle <= 90) {\r\n    //     offsetX = -(radius * (Math.abs(Math.cos(angle))));\r\n    //     offsetY = -radius * (Math.abs(Math.sin(angle)));\r\n    //   }else{\r\n    //     // offsetX = radius * (Math.abs(Math.sin(180-angle)));\r\n    //     // offsetY = -radius *  (Math.abs(Math.cos(180-angle)));\r\n    //     offsetX = radius * (Math.sin(180-angle));\r\n    //     offsetY = radius *  (Math.cos(180-angle));\r\n    //   }\r\n      // let offsetY=120*(Math.sin(angle));\r\n      // let offsetX=120*(Math.cos(angle));\r\n// alert(angle)\r\n    //   console.log(angle,\"offsetX=\",  offsetX,\"offsetY=\",  offsetY);\r\n      var color = new echarts.graphic.LinearGradient(\r\n        0,\r\n        0,\r\n        1,\r\n        0,\r\n        [\r\n          {\r\n            offset: 0,\r\n            color: \"#5c53d1\", // 0% 处的颜色\r\n          },\r\n          {\r\n            offset: 1,\r\n            color: \"#18c8ff\", // 100% 处的颜色\r\n          },\r\n        ],\r\n        false\r\n      );\r\n      var colorSet = [\r\n        [per, color],\r\n        [1, \"#413e54\"],\r\n      ];\r\n      let startAngle = 180;\r\n      let endAngle = 0;\r\n      let center = [\"50%\", \"63%\"];\r\n      option = {\r\n        tooltip: {\r\n          show: false,\r\n        },\r\n        series: [\r\n          {\r\n            type: \"gauge\",\r\n            radius: \"90%\",\r\n            startAngle,\r\n            endAngle,\r\n            center,\r\n            pointer: {\r\n              show: false,\r\n            },\r\n            // data: dataArr,\r\n            title: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n              lineStyle: {\r\n                color: colorSet,\r\n                width: 35,\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                opacity: 1,\r\n              },\r\n            },\r\n            axisTick: {\r\n              show: true,\r\n              splitNumber: 5,\r\n              length: 8,\r\n            },\r\n            splitLine: {\r\n              length: -8, //刻度节点线长度\r\n              lineStyle: {\r\n                width: 2,\r\n                color: \"rgba(255,255,255,.8)\",\r\n              }, //刻度节点线\r\n            },\r\n            axisLabel: {\r\n              show: false,\r\n            },\r\n            detail: {\r\n              show: 0,\r\n            },\r\n            animationDuration: 4000,\r\n          },\r\n          {\r\n            name: \"白色圈刻度\",\r\n            type: \"gauge\",\r\n            radius: \"80%\",\r\n            startAngle, //刻度起始\r\n            endAngle, //刻度结束\r\n            center,\r\n            min,\r\n            max,\r\n            splitNumber: 1,\r\n            z: 4,\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            splitLine: {\r\n              length: 16, //刻度节点线长度\r\n              lineStyle: {\r\n                width: 2,\r\n                color: \"#018DFF\",\r\n              }, //刻度节点线\r\n            },\r\n            axisLabel: {\r\n              formatter: function (v) {\r\n                if (v == min) {\r\n                  return `{min|${min}${unit}\\n最小}`;\r\n                } else {\r\n                  return `{max|${max}${unit}\\n最大}`;\r\n                }\r\n              },\r\n              rich: {\r\n                min: {\r\n                  // 下右上左\r\n                  padding: [0, 0, 80, -120],\r\n                  color: \"#000\",\r\n                  fontSize: fontSize,\r\n                  lineHeight: 30,\r\n                },\r\n                max: {\r\n                  // 下右上左\r\n                  padding: [0, -120, 80, 0],\r\n                  color: \"#000\",\r\n                  fontSize: fontSize,\r\n                  lineHeight: 30,\r\n                },\r\n              },\r\n            }, //刻度节点文字颜色\r\n            pointer: {\r\n              show: false,\r\n            //   width: 8,\r\n            //   length: \"90%\",\r\n            },\r\n            detail: {\r\n              show: false,\r\n            //   offsetCenter: [offsetX + \"%\",  offsetY + \"%\"],\r\n            // //   offsetCenter: [\"-15%\",  \"-110%\"],\r\n            //   formatter: function (value) {\r\n            //     return `{a|当前\\n${dataArr[0].value}${unit}}`;\r\n            //   },\r\n            //   rich: {\r\n            //     a: {\r\n            //       color: \"red\",\r\n            //       fontSize,\r\n            //     },\r\n            //   },\r\n              // 中间字体偏移量\r\n              // offsetCenter: ['0%', '0%'],\r\n            },\r\n            axisLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: colorSet,\r\n                width: 10,\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                opacity: 1,\r\n              },\r\n            },\r\n            data: dataArr,\r\n          },\r\n         {\r\n            name: '内部圈',\r\n            type: 'gauge',\r\n            z: 10,\r\n              center,\r\n            min,\r\n            max,\r\n            splitNumber: splitNumber,\r\n            radius: '120%',\r\n             startAngle, //刻度起始\r\n            endAngle, //刻度结束\r\n            axisLine: {\r\n                show: false,\r\n              lineStyle: {\r\n                color: colorSet,\r\n                // width: 10,\r\n                // shadowOffsetX: 0,\r\n                // shadowOffsetY: 0,\r\n                // opacity: 0,\r\n              },\r\n            },\r\n            \r\n            tooltip: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: true,\r\n                // padding:[-70,-90,0,0],\r\n                color:\"red\",\r\n                formatter:function(v){\r\n                    // console.log(\"vv\",v,\"当前数值\"+nowData)\r\n                    if(v==nowData){\r\n                        // alert(v)\r\n                        return \"当前数值\\n\"+nowData;\r\n                    }\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false,\r\n\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            itemStyle: {\r\n                show: false,\r\n            },\r\n            detail: {\r\n                show: false\r\n            },\r\n            title: { //标题\r\n                show: false,\r\n            },\r\n            data: [{\r\n                name: \"title\",\r\n                value: nowData,\r\n            }],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'rgba(145,207,255,1)'\r\n                }\r\n            },\r\n            pointer: {\r\n            show: true,\r\n              width: 8,\r\n              length: \"60%\",\r\n            },\r\n            animationDuration: 4000,\r\n        },\r\n        ],\r\n      };\r\n     ","html":"","externalScripts":"","updaterUID":"bd-7382906384","theme":"","layout":"","viewCount":205,"userName":"满***6","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xClnDjgPFd.png?v=1602648693272","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","tooltip"],"customTags":[],"updaterUserName":"满***6"}}