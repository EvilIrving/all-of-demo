{"status":0,"data":{"cid":"xK-A1GZUT","authorUid":"bd-900618179","authorUserName":"御***r","title":"3D地图  飞线 散点 柱状图  叠加柱状图","description":"可展示方向路径、数据分布、数值展示、数据映射","latestVersion":1,"alwaysLatest":1,"createTime":"2019-12-19T08:52:55.000Z","lastUpdateTime":"2019-12-19T08:52:55.000Z","auth":2,"uid":"bd-900618179","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-19T08:52:55.000Z","code":"// 全国经纬度\nvar geoCoordMap = {\n    '辽宁': [123.429092, 41.796768],\n    '吉林': [125.324501, 43.886841],\n    '黑龙江': [126.642464, 45.756966],\n    '北京': [116.405289, 39.904987],\n    '天津': [117.190186, 39.125595],\n    '内蒙古': [111.751990, 40.841490],\n    '宁夏': [106.232480, 38.486440],\n    '山西': [112.549248, 37.857014],\n    '河北': [114.502464, 38.045475],\n    '山东': [117.000923, 36.675808],\n    '河南': [113.665413, 34.757977],\n    '陕西': [108.948021, 34.263161],\n    '湖北': [114.298569, 30.584354],\n    '江苏': [118.76741, 32.041546],\n    '安徽': [115.782939, 33.869338],\n    '上海': [121.472641, 31.231707],\n    '湖南': [112.982277, 28.19409],\n    '江西': [115.892151, 28.676493],\n    '浙江': [120.15358, 30.287458],\n    '福建': [119.306236, 26.075302],\n    '广东': [113.28064, 23.125177],\n    '台湾': [121.5200760, 25.0307240],\n    '海南': [110.199890, 20.044220],\n    '广西': [108.320007, 22.82402],\n    '重庆': [106.504959, 29.533155],\n    '云南': [102.71225, 25.040609],\n    '贵州': [106.713478, 26.578342],\n    '四川': [104.065735, 30.659462],\n    '甘肃': [103.834170, 36.061380],\n    '青海': [101.777820, 36.617290],\n    '西藏': [91.11450, 29.644150],\n    '新疆': [87.616880, 43.826630],\n    '香港': [114.165460, 22.275340],\n    '澳门': [113.549130, 22.198750]\n}\n\n// 柱状图模拟数据  数据格式 [{name:名字,value:[lng,lat,数值]}]\nvar barData = [];\nvar barDatacp1 = [];\nvar barDatacp2 = [];\n\n// 模拟飞线数据[[[start.lng,start.lat,海拔高度],[end.lng,end.lat,海拔高度]]]\nvar flyLinesData = [];\nvar end = \"安徽\";\nvar endPoint = geoCoordMap[end];\nendPoint.push(2)\n\nfor (var key in geoCoordMap) {\n    var point1 = JSON.parse(JSON.stringify(geoCoordMap[key]));\n    var point2 = JSON.parse(JSON.stringify(geoCoordMap[key]));\n    var point3 = JSON.parse(JSON.stringify(geoCoordMap[key]));\n    point1[0] += 0.6;\n    point1.push(_random(100, 600));\n    point2.push(_random(100, 300));\n    point3.push(_random(100, 300))\n    barData.push({\n        'name': key,\n        'value': point1\n    })\n\n    barDatacp1.push({\n        'name': key,\n        'value': point2\n    })\n\n    barDatacp2.push({\n        'name': key,\n        'value': point3\n    })\n\n    var startPoint = geoCoordMap[key];\n    startPoint.push(2)\n    if (key != end) flyLinesData.push([startPoint, endPoint])\n}\n\n\noption = {\n    geo3D: {\n        map: 'china',\n        regionHeight: 1,\n        // 环境可配置为全景贴图 纯色 渐变色\n        environment: '#000',\n        itemStyle: {\n            areaColor: '#0e88de',\n            opacity: 1,\n            borderWidth: 0.4,\n            borderColor: '#00FFF8' // 地图边配色\n        },\n        label: {\n            textStyle: {\n                color: \"#dbde0e\",\n                backgroundColor: \"#000\",\n                padding: 5,\n                fontSize: 18\n            }\n        },\n        emphasis: {\n            label: {\n                show: false\n            },\n            itemStyle: {\n                areaColor: '#0edecb'\n            }\n        },\n        shading: 'lambert',\n        light: { //光照阴影\n            main: {\n                color: '#fff', //光照颜色\n                intensity: 1.2, //光照强度\n                //shadowQuality: 'high', //阴影亮度\n                shadow: true, //是否显示阴影\n                alpha: 55,\n                beta: 10\n\n            },\n            ambient: {\n                intensity: 0.3\n            }\n        }\n    },\n    series: [\n        // 3D飞线图\n        {\n            name: '飞线',\n            type: 'lines3D',\n            coordinateSystem: 'geo3D',\n            effect: {\n                show: true,\n                trailWidth: 4,\n                trailOpacity: 1,\n                trailLength: 0.2,\n                constantSpeed: null\n            },\n            // blendMode: 'lighter',\n            lineStyle: {\n                color: '#fcff0a',\n                width: 2,\n                opacity: 0.5\n            },\n            data: flyLinesData\n        },\n        // 3D气泡图 数值代表气泡高度\n        {\n            name: '气泡',\n            type: \"scatter3D\",\n            coordinateSystem: 'geo3D',\n            symbol: 'circle',\n            symbolSize: 14,\n            opacity: 1,\n            label: {\n                show: false,\n                formatter: '{b}'\n            },\n            itemStyle: {\n                // borderWidth: 0.5,\n                // borderColor: '#fff'//气泡边的颜色\n                color: '#09f5f5'\n            },\n            data: barData\n        },\n        // 叠加柱状图\n        {\n            name: 'c',\n            stack: 'cp',\n            type: \"bar3D\",\n            coordinateSystem: 'geo3D',\n            barSize: 0.6, //柱宽\n            bevelSize: 0.5, //倒角\n            label: {\n                textStyle: {\n                    color: \"#dbde0e\",\n                    backgroundColor: \"#000\",\n                    padding: 5,\n                    fontSize: 18\n                },\n                formatter: function(e) {\n                    return e.name + '：' + e.value[2]\n                }\n            },\n            itemStyle: {\n                color: '#f50997'\n            },\n            shading: 'lambert',\n            data: barDatacp1\n        },\n        // 叠加柱状图 叠加时每个叠加的柱宽最好设置不相同 不然会影响渲染效果和事件效果\n        {\n            name: 'p',\n            stack: 'cp',\n            type: \"bar3D\",\n            coordinateSystem: 'geo3D',\n            barSize: 0.7, //柱宽\n            bevelSize: 0.5, //倒角\n            label: {\n                textStyle: {\n                    color: \"#dbde0e\",\n                    backgroundColor: \"#000\",\n                    padding: 5,\n                    fontSize: 18\n                },\n                formatter: function(e) {\n                    return e.name + '：' + e.value[2]\n                }\n            },\n            itemStyle: {\n                color: '#095df5'\n            },\n            shading: 'lambert',\n            data: barDatacp2\n        },\n        // 如果同一经纬度需要展示不同柱图且不叠加  最好让改变此点经纬度让其发生一些偏移\n        {\n            type: \"bar3D\",\n            coordinateSystem: 'geo3D',\n            offset: 3,\n            barSize: 0.6, //柱宽\n            bevelSize: 0.5, //倒角\n            label: {\n                textStyle: {\n                    color: \"#dbde0e\",\n                    backgroundColor: \"#000\",\n                    padding: 5,\n                    fontSize: 18\n                },\n                formatter: function(e) {\n                    return e.name + '：' + e.value[2]\n                }\n            },\n            itemStyle: {\n                color: '#0ac0c1'\n            },\n            shading: 'lambert',\n            data: barData\n        }\n    ]\n};\n\nfunction _random(a, b) {\n    return Math.round(Math.random() * Math.abs(b - a) + a)\n}","html":"","externalScripts":"https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-900618179","theme":"","layout":"","viewCount":259,"userName":"御***r","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xK-A1GZUT.png?v=1576745575528","isCustomThumbnail":0,"builtinTags":["category-work","geo3D","series-bar3D","series-lines3D","series-scatter3D"],"customTags":[],"updaterUserName":"御***r"}}