{"status":0,"data":{"cid":"x08vB8bYB","authorUid":"bd-4161428444","authorUserName":"b***n","title":"象形柱图","description":"平均值","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-28T09:56:12.000Z","lastUpdateTime":"2019-11-28T09:56:12.000Z","auth":2,"uid":"bd-4161428444","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-28T09:56:12.000Z","code":"var chartData = [\r\n        {value: 0.7, name:'惠南'},\r\n        {value: 0.9, name:'三林'},\r\n        {value: 0.2, name:'张江'},\r\n        {value: 0.5, name:'高东'},\r\n        {value: 0.8, name:'高行'},\r\n        {value: 0.7, name:'金桥'},\r\n        {value: 0.9, name:'曹路'},\r\n        {value: 0.2, name:'唐镇'},\r\n        {value: 0.5, name:'合庆'},\r\n        {value: 0.8, name:'北蔡'},\r\n        {value: 0.7, name:'高桥'},\r\n        {value: 0.9, name:'川沙'},\r\n        {value: 0.2, name:'花木'},\r\n        {value: 0.5, name:'东明'},\r\n        {value: 0.8, name:'浦兴'}\r\n];\r\nvar itemData = [],\r\n    bgData = [];\r\n\r\n// 取出每一条数据value,作为显示数据\r\nchartData.forEach(function(items, index) {\r\n    itemData.push(items.value);\r\n});\r\n\r\n// 取出所有数据最大值,作为背景象形柱图数据\r\nchartData.forEach(function(items, index) {\r\n    bgData.push(Math.max.apply(null, itemData));\r\n});\r\n\r\nvar sum = eval(itemData.join(\"+\")); //eval方法求和公式\r\nconsole.log(\"dataValue求和值为：\"+sum);\r\nvar averageValue = Math.abs((sum / itemData.length * 100) / 100).toFixed(1); //求平均值\r\nconsole.log(\"dataValue求平均值为：\"+\"%c\"+averageValue, \"color:red\");\r\n\r\n    option = {\r\n        backgroundColor: '#000e46',\r\n        title : {\r\n            show:false\r\n        },\r\n        tooltip : {//提示框（悬浮框）\r\n            trigger: 'axis',\r\n            backgroundColor:'rgba(0,0,0,0.7)',\r\n            borderRadius:2,\r\n            axisPointer: {\r\n                type: \"shadow\"\r\n            },\r\n            textStyle: {\r\n                color: \"#fff\",\r\n                fontSize: 14\r\n            },\r\n            formatter: \"{a} <br/>{b}: {c}\"\r\n        },\r\n        legend: {\r\n            show: false\r\n        },\r\n        grid: {\r\n            x:40,\r\n            y:60,\r\n            x2:30,\r\n            y2:60,\r\n        },\r\n        xAxis : [\r\n            {\r\n                type: 'category',//种类是类目\r\n                axisLine:{\r\n                    lineStyle:{\r\n                        color:'#181970',\r\n                        width:1\r\n                    }\r\n                }, \r\n                axisTick:{ \r\n                    show:false, //坐标轴小标记\r\n                    inside:false, //小标记是否显示为在grid内部,默认在外部\r\n                    lineStyle: {\r\n                        color: '#3f5a8c', //小标记颜色\r\n                        width:2\r\n                    }\r\n                },\r\n                axisLabel: {//坐标轴标签\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#ffffff',\r\n                        fontSize: 16\r\n                    },\r\n                    /*formatter: '{value}'*/\r\n                    formatter:function(value){\r\n                        return value.split(\"\").join(\"\\n\");\r\n                    }\r\n                },\r\n                data: (function(data){\r\n                    var arr=[];\r\n                    data.forEach(function(items){\r\n                        arr.push(items.name);   \r\n                    });\r\n                    return arr;\r\n                })(chartData) //x轴data\r\n            }\r\n        ],//x轴   \r\n        yAxis : [\r\n            {                   \r\n                min: 0,\r\n                max: 1.0,\r\n                interval: 0.2,\r\n                axisTick:{\r\n                    show:false, //坐标轴小标记\r\n                    inside:false, //小标记是否显示为在grid内部,默认在外部\r\n                    lineStyle: {\r\n                        color: '#3f5a8c', //小标记颜色\r\n                        width:2\r\n                    }\r\n                },//坐标轴刻度\r\n                axisLine:{\r\n                    show:false,\r\n                },//坐标轴线\r\n                splitLine:{\r\n                    show: false,\r\n                     lineStyle:{\r\n                        color:'#181970',\r\n                        width:1\r\n                    }\r\n                },//轴向网格线\r\n                axisLabel: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#ffffff',\r\n                        fontSize: 16\r\n                    },\r\n                    formatter: '{value}'\r\n                } //坐标轴标签\r\n            }\r\n        ],//y轴 \r\n        animationEasing: 'elasticOut',\r\n        series: [{\r\n            name: '检查覆盖率',\r\n            type: 'pictorialBar', //象形柱图\r\n            symbol: 'rect',\r\n            symbolRepeat: true,\r\n            symbolSize:[16, 4],\r\n            symbolMargin: 2, //图形的两边间隔\r\n            itemStyle: {\r\n                normal:{\r\n                    //color:\"#fec85f\"\r\n                    color: function(params){ // 颜色定制显示（按顺序）console.log(params)\r\n                        var colorList= []; \r\n                        for(var i=0; i< chartData.length; i++){\r\n                            if(params.value > averageValue){\r\n                                colorList.push('#5878ff');\r\n                            }else{\r\n                                colorList.push('#ef9356');\r\n                            }//console.log(colorList);\r\n                            return colorList;\r\n                        }\r\n                        return colorList[params.dataIndex];\r\n                    }\r\n                }, \r\n            },\r\n            markLine: {\r\n                precision: 1, //标线数值的精度，在显示平均值线的时候有用（即小数点后第几位）\r\n                data : [\r\n                    {type : 'average', name: '平均值'}\r\n                ],\r\n                lineStyle: {\r\n                    normal: {\r\n                        type: 'dashed',\r\n                        color: '#ef4034',\r\n                        width: 2,\r\n                    },\r\n                },\r\n                label:{\r\n                    show: true,\r\n                    formatter:function(params){ //强制设置平均值\r\n                        var res = averageValue\r\n                        return res;\r\n                    }\r\n                }\r\n            },\r\n            data: itemData //数据\r\n        },\r\n        {\r\n            name: '',\r\n            type: 'pictorialBar',\r\n            symbol: 'rect',\r\n            symbolRepeat: true,\r\n            symbolSize:[16, 4],\r\n            symbolMargin: 2,\r\n            color:'#272762',\r\n            barGap : '-100%',\r\n            z: 1,\r\n            data: bgData //背景数据\r\n        }]\r\n    };","html":"","externalScripts":"","updaterUID":"bd-4161428444","theme":"","layout":"","viewCount":410,"userName":"b***n","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x08vB8bYB.png?v=1574934972921","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markLine","series-pictorialBar","title","tooltip"],"customTags":[],"updaterUserName":"b***n"}}