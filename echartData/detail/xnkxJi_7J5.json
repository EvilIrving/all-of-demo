{"status":0,"data":{"cid":"xnkxJi_7J5","authorUid":"obd-o-He_rlu8MGIgFNZUktrDyKlAyNNiAh","authorUserName":"爱***波","title":"地图数据轮播展示及鼠标事件控制","description":"轮播展示行政区域内各个点的数据，当鼠标进入时停止轮播，离开时接着轮播。","latestVersion":5,"alwaysLatest":0,"createTime":"2021-06-04T02:52:12.000Z","lastUpdateTime":"2021-06-04T02:52:12.000Z","auth":2,"uid":"obd-o-He_rlu8MGIgFNZUktrDyKlAyNNiAh","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":2,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-10T08:23:42.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1623313392107-yFmJKvlk0.json\";\nmyChart.showLoading();\nvar data = [];\n$.getJSON(uploadedDataURL, function (geoJson) {\n    echarts.registerMap('广州', geoJson);\n    data = geoJson.features.map((item) => {\n        return {\n            value: (Math.random() * 1000).toFixed(2),\n            name: item.properties.name,\n        };\n    });\n    myChart.hideLoading();\n    option = {\n        tooltip: {\n            backgroundColor: 'rgba(0,0,0,0)',\n            trigger: 'item',\n        },\n        legend: {\n            show: false,\n        },\n        series: [\n            {\n                tooltip: {\n                    trigger: 'item',\n                    formatter: function (item) {\n                        var tipHtml = '';\n                        tipHtml =\n                            '<div style=\"background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666\">' +\n                            '<div style=\"color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;\">' +\n                            item.data.name +\n                            '</div>' +\n                            '<div style=\"text-align:center;color:#494949;padding:8px 6px\">' +\n                            '<span style=\"font-size:18px;font-weight:bold;\">' +\n                            item.data.value +\n                            ' ' +\n                            '</span>' +\n                            '</div>' +\n                            '</div>';\n                        return tipHtml;\n                    },\n                },\n                name: '广州市数据',\n                type: 'map',\n                map: '广州', // 自定义扩展图表类型\n                aspectScale: 1,\n                zoom: 0.6, //缩放\n                showLegendSymbol: false,\n                label: {\n                    show: true,\n                    color: '#fff',\n                    fontSize: 10,\n                },\n                itemStyle: {\n                    areaColor: '#0E95F1',\n                    borderColor: '#e9e9e9',\n                    borderWidth: 1,\n                    shadowColor: '#0E95F1',\n                    shadowBlur: 20,\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                        fontSize: 10,\n                    },\n                    itemStyle: {\n                        areaColor: '#fff040',\n                        borderColor: '#fff',\n                        borderWidth: 1,\n                    },\n                },\n                layoutCenter: ['50%', '50%'],\n                layoutSize: '160%',\n                markPoint: {\n                    symbol: 'none',\n                },\n                data: data,\n            },\n        ],\n    };\n    myChart.setOption(option);\n\n    // 依次跳转显示 - begin\n    var arr = [\n        '花都区',\n        '从化区',\n        '增城区',\n        '黄埔区',\n        '白云区',\n        '天河区',\n        '越秀区',\n        '荔湾区',\n        '海珠区',\n        '番禺区',\n        '南沙区',\n    ];\n    var index = 0;\n    var timer = setInterval(function () {\n        index = index < arr.length ? index : 0;\n        showTips(arr[index++]);\n    }, 1000);\n\n    myChart.on('mouseover', function () {\n        clearInterval(timer);\n    });\n\n    myChart.on('mouseout', function () {\n        clearInterval(timer);\n        timer = setInterval(function () {\n            index = index < arr.length ? index : 0;\n            showTips(arr[index++]);\n        }, 1000);\n    });\n    // 依次跳转显示 - end\n});\n\nfunction showTips(name) {\n    data.forEach((item, i) => {\n        myChart.dispatchAction({\n            type: 'mapUnSelect',\n            seriesIndex: 0,\n            dataIndex: i,\n        });\n        if (item.name.includes(name)) {\n            myChart.dispatchAction({\n                type: 'showTip',\n                seriesIndex: 0,\n                dataIndex: i,\n            });\n            myChart.dispatchAction({\n                type: 'mapSelect',\n                seriesIndex: 0,\n                dataIndex: i,\n            });\n        }\n    });\n}\n","html":"","externalScripts":"","updaterUID":"obd-o-He_rlu8MGIgFNZUktrDyKlAyNNiAh","theme":"","layout":"","viewCount":0,"userName":"爱***波","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnkxJi_7J5.png?v=1623313422501","isCustomThumbnail":0,"builtinTags":["category-work","legend","markPoint","series-map","tooltip"],"customTags":[],"updaterUserName":"爱***波"}}