{"status":0,"data":{"cid":"xNnZJyh9xa","authorUid":"bd-1291963670","authorUserName":"7***6","title":"饼图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-23T05:47:11.000Z","lastUpdateTime":"2021-08-23T05:47:11.000Z","auth":2,"uid":"bd-1291963670","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-23T05:47:11.000Z","code":"var colorList = [\n    '#407AFB',\n    '#1791FF',\n    '#36B0FE',\n    '#6635EF',\n    '#73ACFF',\n    '#41CBAB',\n    '#7BDD43',\n    '#FFC653',\n    '#FF6519',\n    '#EE3939',\n    '#FFAFDA',\n    '#00FFFF',\n];\nconst colorArr = ['#49CCFFee', '#20D3ABee', '#FDD56Aee', '#7F9EECee'];\nconst colorAlpha = ['#49CCFF88', '#20D3AB88', '#FDD56A88', '#7F9EEC88'];\nvar seriesdata1 = [\n    {\n        name: '烟感报警器',\n        value: 13201,\n        percent:77.01,\n        itemStyle: {\n            normal: {\n                borderWidth: 5,\n                shadowBlur: 20,\n                borderColor: colorAlpha[0],\n                shadowColor: colorArr[0],\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                    {\n                        offset: 0,\n                        color: colorArr[0],\n                    },\n                    {\n                        offset: 1,\n                        color: colorAlpha[0],\n                    },\n                ]),\n            },\n        },\n    },\n    {\n        name: '消火栓报警',\n        value: 1290,\n        percent:15.12,\n        itemStyle: {\n            normal: {\n                borderWidth: 5,\n                shadowBlur: 20,\n                borderColor: colorAlpha[1],\n                shadowColor: colorArr[1],\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                    {\n                        offset: 0,\n                        color: colorArr[1],\n                    },\n                    {\n                        offset: 1,\n                        color: colorAlpha[1],\n                    },\n                ]),\n            },\n        },\n    },\n    {\n        name: '手动报警器',\n        value: 750,\n        percent:7.87,\n        itemStyle: {\n            normal: {\n                borderWidth: 5,\n                shadowBlur: 20,\n                borderColor: colorAlpha[2],\n                shadowColor: colorArr[2],\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                    {\n                        offset: 0,\n                        color: colorArr[2],\n                    },\n                    {\n                        offset: 1,\n                        color: colorAlpha[2],\n                    },\n                ]),\n            },\n        },\n    },\n    {\n        name: '声光报警器',\n        value: 180,\n        percent:7.87,\n        itemStyle: {\n            normal: {\n                borderWidth: 5,\n                shadowBlur: 20,\n                borderColor: colorAlpha[3],\n                shadowColor: colorArr[3],\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                    {\n                        offset: 0,\n                        color: colorArr[3],\n                    },\n                    {\n                        offset: 1,\n                        color: colorAlpha[3],\n                    },\n                ]),\n            },\n        },\n    },\n];\n\nvar objData = array2obj(seriesdata1, 'name');\n\n//将合计值转换为数组\nvar h = '1753';\narr = h.split('');\nm = '';\n\nfor (i = 0; i < arr.length; i++) {\n    m += '{a|' + arr[i] + '}';\n    if (i != arr.length - 1) {\n        m += '  ';\n    }\n}\n\noption = {\n    //backgroundColor: '#051F54',\n    grid: {\n        x: '30%',\n        y: '3',\n        x2: '5%',\n        y2: '5%',\n        borderWidth: 1,\n        borderColor: '#f0f0f0',\n    },\n    title: [\n        {\n            show: true,\n            text: '{a|设备状态}{b|数量}{c|占比}',\n            top: '45%',\n            left: '60%',\n            textStyle: {\n                rich: {\n                    a: {\n                        align: 'center',\n                        fontSize: 14,\n                        color: 'rgba(255,255,255,1)',\n                        width: 20,\n                        padding: [0, 0, 0, 20],\n                    },\n                    b: {\n                        align: 'center',\n                        fontSize: 14,\n                        color: 'rgba(255,255,255,1)',\n                        width: 5,\n                        padding: [0, 0, 0, 60],\n                    },\n                    c: {\n                        align: 'center',\n                        fontSize: 14,\n                        color: 'rgba(255,255,255,1)',\n                        width: 5,\n                        padding: [0, 0, 0, 45],\n                    },\n                },\n            },\n        },\n        {\n            text: '{b|总数：}' + m,\n            left: '70%',\n            top: '20%',\n            textAlign: 'center',\n            textStyle: {\n                fontWeight: 'normal',\n                fontSize: '15',\n                color: '#FFFFFF',\n                textAlign: 'center',\n                rich: {\n                    a: {\n                        fontSize: '24',\n                        fontWeight: 'bold',\n                        backgroundColor: 'rgba(56,89,255,0.2)',\n                        borderColor: 'rgba(56,211,255,1)',\n                        borderWidth: 1,\n                        padding: [6, 6, 6, 6],\n                        shadowColor: 'rgba(56,211,255,1)',\n                        shadowBlur: 3,\n                        borderRadius: 3,\n                    },\n                    b: {\n                        fontSize: '24',\n                        fontWeight: 'bold',\n                        padding: [6, 6, 6, 6],\n                        color: '#FFFFFF',\n                    },\n                },\n            },\n        },\n    ],\n    legend: {\n        show: true,\n        //icon: 'circle',\n        orient: 'vertical',\n        top: '50%',\n        left: '57%',\n        itemGap: 15,\n        itemWidth: 15,\n        itemHeight: 10,\n        data: seriesdata1,\n        formatter: function (name) {\n            console.log(objData[name])\n            return '{a|' + name + '}{b|' + objData[name].value.toFixed(0) + '}{c|' + objData[name].percent + '%}';\n        },\n        textStyle: {\n            rich: {\n                a: {\n                    align: 'center',\n                    fontSize: 14,\n                    color: 'rgba(255,255,255,1)',\n                    width: 60,\n                    //fontWeight: 600,\n                    padding: [0, 0, 0, 10],\n                },\n                b: {\n                    align: 'center',\n                    fontSize: 14,\n                    color: 'rgba(255,255,255,1)',\n                    width: 5,\n                    //fontWeight: 600,\n                    padding: [0, 0, 0, 40],\n                },\n                c: {\n                    align: 'center',\n                    fontSize: 14,\n                    color: 'rgba(255,255,255,1)',\n                    width: 5,\n                    //fontWeight: 600,\n                    padding: [0, 0, 0, 50],\n                },\n            },\n        },\n    },\n    series: {\n        type: 'pie',\n        center: ['30%', '50%'],\n        radius: ['25%', '50%'],\n        clockwise: true,\n        //startAngle: 50,\n        avoidLabelOverlap: true,\n        hoverOffset: 15,\n        itemStyle: {\n            normal: {\n                color: function (params) {\n                    return colorList[params.dataIndex];\n                },\n            },\n        },\n        label: {\n            show: true,\n            position: 'outside',\n            formatter: function (data) {\n                //console.log('data',data)\n                return (\n                    '{name|' +\n                    data.name  + ':'+\n                    '}' +\n                    ' {value|' + \n                    data.percent.toFixed(0) +\n                    '%}'\n                );\n            },\n            rich: { \n                name: {\n                    fontSize: 14, \n                    color: '#ffffff',\n                },\n                value: {\n                    fontSize: 14, \n                    color: '#ffffff',\n                },\n            },\n        },\n        labelLine: {\n            show: false,\n            normal: {\n                length: 10,\n                length2: 20,\n                align: 'right',\n                lineStyle: {\n                    width: 1,\n                },\n            },\n        },\n        data: seriesdata1,\n        seriesIndex: 0,\n    },\n};\n\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\n","html":"","externalScripts":"","updaterUID":"bd-1291963670","theme":"dark","layout":"","viewCount":0,"userName":"7***6","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNnZJyh9xa.png?v=1629697631163","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title"],"customTags":[],"updaterUserName":"7***6"}}