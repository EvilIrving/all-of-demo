{"status":0,"data":{"cid":"x0UlOUS_xj","authorUid":"bd-2083917125","authorUserName":"筱***5","title":"2020年云梦山游客来源山西省统计","description":"数据来自奇镜科技","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-11T14:40:26.000Z","lastUpdateTime":"2020-10-11T14:40:26.000Z","auth":2,"uid":"bd-2083917125","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-11T14:40:26.000Z","code":"\t\tvar name_title = \"2020年云梦山游客来源山西省统计\"\n\t\tvar subname = '数据来自奇镜科技'\n\t\tvar nameColor = \" rgb(55, 75, 113)\"\n\t\tvar name_fontFamily = '等线'\n\t\tvar subname_fontSize = 15\n\t\tvar name_fontSize = 18\n\t\tvar uploadedDataURL = \"/asset/get/s/data-1565332444721-GYAKd_Cx6.json\";\n\t\tvar nameMap = '山西省';\n\t\twindow.dataList = [{\n\t\t        name: \"太原市\",\n\t\t        value: 143\n\t\t    },\n\t\t    {\n\t\t        name: \"聊城市\",\n\t\t        value: 37\n\t\t    },\n\t\t    {\n\t\t        name: \"德州市\",\n\t\t        value: 23\n\t\t    },\n\t\t    {\n\t\t        name: \"阳泉市\",\n\t\t        value: 19\n\t\t    },\n\t\t    {\n\t\t        name: \"滨州市\",\n\t\t        value: 6\n\t\t    },\n\t\t    {\n\t\t        name: \"临汾市\",\n\t\t        value: 5\n\t\t    },\n\t\t    {\n\t\t        name: \"晋中市\",\n\t\t        value: 1\n\t\t    },\n\t\t];\n\t\tvar toolTipData = [{\n\t\t        name: \"太原市\",\n\t\t        value: 143\n\t\t    },\n\t\t    {\n\t\t        name: \"聊城市\",\n\t\t        value: 37\n\t\t    },\n\t\t    {\n\t\t        name: \"德州市\",\n\t\t        value: 23\n\t\t    },\n\t\t    {\n\t\t        name: \"阳泉市\",\n\t\t        value: 19\n\t\t    },\n\t\t    {\n\t\t        name: \"滨州市\",\n\t\t        value: 6\n\t\t    },\n\t\t    {\n\t\t        name: \"临汾市\",\n\t\t        value: 5\n\t\t    },\n\t\t    {\n\t\t        name: \"晋中市\",\n\t\t        value: 1\n\t\t    },\n\t\t];\n\t\tvar geoCoordMap = {};\n\t\tvar max = 2000,\n\t\t    min = 1; // todo \n\t\tvar maxSize4Pin = 100,\n\t\t    minSize4Pin = 40;\n\t\tvar convertData = function(data) {\n\t\t    console.log('data', data)\n\t\t    var res = [];\n\t\t    for (var i = 0; i < data.length; i++) {\n\t\t        var geoCoord = geoCoordMap[data[i].name];\n\t\t        if (geoCoord) {\n\t\t            res.push({\n\t\t                name: data[i].name,\n\t\t                value: geoCoord.concat(data[i].value),\n\t\t            });\n\t\t        }\n\t\t    }\n\t\t    console.log('res', res)\n\t\t    return res;\n\t\t};\n\n\n\t\t$.get(uploadedDataURL, function(gdMap) {\n\t\t    echarts.registerMap(nameMap, gdMap);\n\t\t    /*获取地图数据*/\n\t\t    myChart.showLoading();\n\t\t    var mapFeatures = echarts.getMap(nameMap).geoJson.features;\n\t\t    myChart.hideLoading();\n\t\t    mapFeatures.forEach(function(v) {\n\t\t        // 地区名称\n\t\t        var name = v.properties.name;\n\t\t        // 地区经纬度\n\t\t        geoCoordMap[name] = v.properties.cp;\n\n\t\t    });\n\t\t    console.log(geoCoordMap)\n\t\t    //GDP\n\t\t    var optionMap = {\n\t\t        title: {\n\t\t            text: name_title,\n\t\t            subtext: subname,\n\t\t            x: 'center',\n\t\t            textStyle: {\n\t\t                color: nameColor,\n\t\t                fontFamily: name_fontFamily,\n\t\t                fontSize: name_fontSize\n\t\t            },\n\t\t            subtextStyle: {\n\t\t                fontSize: subname_fontSize,\n\t\t                fontFamily: name_fontFamily\n\t\t            }\n\t\t        },\n\t\t        backgroundColor: \"#fff\",\n\t\t        grid: {\n\t\t            // left:'2%',\n\t\t            right: '10%',\n\t\t            bottom: '3%',\n\t\t            width: '20%',\n\t\t            height: '50%'\n\t\t        },\n\t\t        tooltip: {\n\t\t            // triggerOn: \"click\",\n\t\t            // formatter: function(e, t, n) {\n\t\t            //     return '.5' == e.value ? e.name + \"：\" : e.seriesName +\n\t\t            //         \"<br />\" + e.name + \"：\" + (e.value ? e.value : 0) + '人'\n\t\t            // }\n\t\t            formatter: function(params) {\n\t\t                if (typeof(params.value)[2] == \"undefined\") {\n\t\t                    var toolTiphtml = ''\n\t\t                    for (var i = 0; i < toolTipData.length; i++) {\n\t\t                        if (params.name == toolTipData[i].name) {\n\t\t                            toolTiphtml += toolTipData[i].name + ':' + toolTipData[i].value + '人'\n\t\t                        }\n\t\t                    }\n\t\t                    return toolTiphtml;\n\t\t                } else {\n\t\t                    var toolTiphtml = ''\n\t\t                    for (var i = 0; i < toolTipData.length; i++) {\n\t\t                        if (params.name == toolTipData[i].name) {\n\t\t                            toolTiphtml += toolTipData[i].name + ':' + toolTipData[i].value + '人'\n\t\t                        }\n\t\t                    }\n\t\t                    return toolTiphtml;\n\t\t                }\n\t\t            }\n\t\t        },\n\t\t        // visualMap: {\n\t\t        //     min: 0,\n\t\t        //     max: 1000,\n\t\t        //     left: 26,\n\t\t        //     bottom: 30,\n\t\t        //     showLabel: !0,\n\t\t        //     text: [\"高\", \"低\"],\n\t\t        //     pieces: [{\n\t\t        //         gt: 200,\n\t\t        //         label: \"> 200人\",\n\t\t        //         color: \"#7f1100\"\n\t\t        //     }, {\n\t\t        //         gte: 100,\n\t\t        //         lte: 200,\n\t\t        //         label: \"100 - 200人\",\n\t\t        //         color: \"#ff5428\"\n\t\t        //     }, {\n\t\t        //         gte: 50,\n\t\t        //         lt: 100,\n\t\t        //         label: \"50 - 100人\",\n\t\t        //         color: \"#ff8c71\"\n\t\t        //     }, {\n\t\t        //         gt: 1,\n\t\t        //         lt: 50,\n\t\t        //         label: \"1 - 50人\",\n\t\t        //         color: \"#ffd768\"\n\t\t        //     }, {\n\t\t        //         value: 0,\n\t\t        //         color: \"#ffffff\"\n\t\t        //     }],\n\t\t        //     show: !0\n\t\t        // },\n\t\t        visualMap: [{\n\t\t                show: true,\n\t\t                min: 1,\n\t\t                max: 1000,\n\t\t                left: 'left',\n\t\t                top: 'bottom',\n\t\t                text: ['高', '低'], // 文本，默认为数值文本\n\t\t                calculable: true,\n\t\t                seriesIndex: [0],\n\t\t                inRange: {\n\t\t                    color: ['#74add1', '#ffd768', '#ff8c71', '#ff5428', '#7f1100']\n\n\t\t                },\n\t\t            },\n\t\t            {\n\t\t                show: true,\n\t\t                min: 1,\n\t\t                max: 1000,\n\t\t                left: 'left',\n\t\t                top: 'bottom',\n\t\t                text: ['高', '低'], // 文本，默认为数值文本\n\t\t                calculable: true,\n\t\t                seriesIndex: [1],\n\t\t                inRange: {\n\t\t                    color: ['#0b9df0', '#74add1', '#ffd768', '#ff8c71', '#ff5428', '#7f1100']\n\n\t\t                },\n\t\t            }\n\t\t        ],\n\t\t        toolbox: {\n\t\t            show: true,\n\t\t            orient: 'vertical',\n\t\t            left: 'right',\n\t\t            top: 'center',\n\t\t            feature: {\n\t\t                saveAsImage: {}\n\t\t            }\n\t\t        },\n\t\t        geo: {\n\t\t            show: true,\n\t\t            map: nameMap,\n\t\t            label: {\n\t\t                normal: {\n\t\t                    show: true\n\t\t                },\n\t\t                emphasis: {\n\t\t                    show: false,\n\t\t                }\n\t\t            },\n\t\t            roam: true,\n\t\t            itemStyle: {\n\t\t                normal: {\n\t\t                    areaColor: '#ffffff',\n\t\t                    borderColor: '#3B5077',\n\t\t                },\n\t\t                emphasis: {\n\t\t                    areaColor: '#2B91B7',\n\t\t                }\n\t\t            }\n\t\t        },\n\t\t        series: [{\n\t\t                name: \"十一游客来源\",\n\t\t                type: 'map',\n\t\t                map: nameMap,\n\t\t                // aspectScale: 0.75, //长宽比\n\t\t                // left: '2%',\n\t\t                // // right: '35%',\n\t\t                // top: 10,\n\t\t                // width: '90%',\n\t\t                // height: '90%',\n\t\t                roam: false,\n\t\t                // itemStyle: {\n\t\t                //     normal: {\n\t\t                //         areaColor: '#fff',\n\t\t                //         borderColor: '#00effc',\n\t\t                //         borderWidth: 1.5,\n\t\t                //         label: {\n\t\t                //             show: true,\n\t\t                //             color: '#fff',\n\t\t                //         },\n\n\t\t                //         emphasis: {\n\t\t                //             label: {\n\t\t                //                 show: true\n\t\t                //             }\n\t\t                //         }\n\t\t                //     }\n\t\t                // },\n\t\t                geoIndex: 0,\n\t\t                data: window.dataList\n\t\t            },\n\t\t            {\n\t\t                name: '点',\n\t\t                type: 'scatter',\n\t\t                coordinateSystem: 'geo',\n\t\t                symbol: 'pin', //气泡\n\t\t                symbolSize: function(val) {\n\t\t                    var a = (maxSize4Pin - minSize4Pin) / (max - min);\n\t\t                    var b = minSize4Pin - a * min;\n\t\t                    b = maxSize4Pin - a * max;\n\t\t                    // return  val[2] ;\n\t\t                    return a * val[2] + b;\n\t\t                },\n\t\t                label: {\n\t\t                    normal: {\n\t\t                        formatter: function(obj) {\n\t\t                            return obj.data.value[2];\n\t\t                        },\n\t\t                        show: true,\n\t\t                        textStyle: {\n\t\t                            color: '#fff',\n\t\t                            fontSize: 9,\n\t\t                        }\n\t\t                    }\n\t\t                },\n\t\t                itemStyle: {\n\t\t                    normal: {\n\t\t                        color: '#F62157', //标志颜色\n\t\t                    }\n\t\t                },\n\t\t                zlevel: 6,\n\t\t                data: convertData(window.dataList),\n\t\t            },\n\t\t        ]\n\n\t\t    };\n\t\t    myChart.setOption(optionMap, true);\n\t\t});","html":"","externalScripts":"","updaterUID":"bd-2083917125","theme":"","layout":"","viewCount":219,"userName":"筱***5","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0UlOUS_xj.png?v=1602427226260","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","title","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"筱***5"}}