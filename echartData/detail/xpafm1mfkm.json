{"status":0,"data":{"cid":"xpafm1mfkm","authorUid":"bd-3456896728","authorUserName":"7***0","title":"历史调用规则成功次数Top5","description":"历史调用规则成功次数Top5","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-01T03:04:56.000Z","lastUpdateTime":"2021-12-01T03:04:56.000Z","auth":2,"uid":"bd-3456896728","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-01T03:04:56.000Z","code":"data = [\n    {\n        name: '通讯接口测试',\n        value: 100,\n    },\n    {\n        name: '第三方接口',\n        value: 75,\n    },\n    {\n        name: '计算分摊结果',\n        value: 50,\n    },\n    {\n        name: '机票价格',\n        value: 25,\n    },\n];\narrName = getArrayValue(data, 'name');\narrValue = getArrayValue(data, 'value');\nsumValue = 133.33;\nobjData = array2obj(data, 'name');\noptionData = getData(data);\n\nfunction getArrayValue(array, key) {\n    var key = key || 'value';\n    var res = [];\n    if (array) {\n        array.forEach(function (t) {\n            res.push(t[key]);\n        });\n    }\n    return res;\n}\n\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\n\nfunction inr(i) {\n    return 35 - i * 10 + '%';\n}\nfunction outr(i) {\n    return 40 - i * 10 + '%';\n}\n\nfunction getData(data) {\n    var res = {\n        series: [],\n        yAxis: [],\n    };\n    for (let i = 0; i < data.length; i++) {\n        res.series.push({\n            name: '',\n            type: 'pie',\n            clockWise: true, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            radius: [inr(i), outr(i)],\n            center: ['50%', '55%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                borderRadius: 100,\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n            },\n            data: [\n                {\n                    value: data[i].value,\n                    name: data[i].name,\n                },\n                {\n                    value: sumValue - data[i].value,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n        res.series.push({\n            name: '',\n            type: 'pie',\n            silent: true,\n            z: 1,\n            clockWise: true, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            radius: [inr(i), outr(i)],\n            center: ['50%', '55%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                borderRadius: 100,\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n            },\n            data: [\n                {\n                    value: 7.5,\n                    itemStyle: {\n                        color: '#F0F0F0',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n                {\n                    value: 2.5,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n    }\n    return res;\n}\n\noption = {\n    backgroundColor: '#fff',\n    title: {\n        text: '历史调用规则成功次数Top5',\n        top: '30%',\n        left: '25%',\n    },\n    legend: {\n        show: true,\n        icon: 'none',\n        top: 'center',\n        top: '35.5%',\n\n        left: '29%',\n        data: arrName,\n        width: 300,\n        padding: [0, 16],\n        itemGap: 29,\n        formatter: function (name) {\n            return '{title|' + name + '} {value|' + objData[name].value + '次}';\n        },\n\n        textStyle: {\n            rich: {\n                title: {\n                    fontSize: 14,\n                    lineHeight: 20,\n                    color: 'rgb(0, 0, 0)',\n                    width: 130,\n                    fontWeight: 'bold',\n                },\n                value: {\n                    fontSize: 14,\n                    lineHeight: 20,\n                    width: 40,\n                    color: '#495057',\n                    align: 'right',\n                },\n            },\n        },\n    },\n    tooltip: {\n        show: true,\n        trigger: 'item',\n        formatter: '{b}:{c}',\n    },\n    color: ['#4A9DEB', '#4A9DEB', '#4A9DEB', '#4A9DEB', '#4A9DEB'],\n    xAxis: [\n        {\n            show: false,\n        },\n    ],\n    series: optionData.series,\n};\n","html":"","externalScripts":"","updaterUID":"bd-3456896728","theme":"","layout":"","viewCount":0,"userName":"7***0","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpafm1mfkm.png?v=1638327896964","isCustomThumbnail":1,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"7***0"}}