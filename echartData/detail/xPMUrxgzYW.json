{"status":0,"data":{"cid":"xPMUrxgzYW","authorUid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","authorUserName":"叫***e","title":"","description":"上下联动并自动滚动播放","latestVersion":2,"alwaysLatest":0,"createTime":"2022-01-05T01:53:17.000Z","lastUpdateTime":"2022-01-05T07:46:17.000Z","auth":2,"uid":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-05T07:46:17.000Z","code":"let  IndexGlobe = null;\nlet datas = {\n    \tdatas_line:{\n    \t\tcolors:['rgba(255, 201, 13', 'rgba(52, 249, 177', 'rgba(255, 69, 69', 'rgba(255, 114, 0'],    \t\t\n    \t\tlineX:[\"测试1\", \"测试2\",\"测试3\", \"测试4\", \"测试5\", \"测试6\",\"测试7\",\"测试8\"],\n        \tnames:[\"2020\",\t\"2021\"],\n        \tvalue:[\n        \t       [100,90,90,80,70,60,50,40],\n        \t       [99,89,109,69,59,48,39,95]]\n      \n    \t},\n    \tdatas_bar:{\n    \t\tcolors: [\"rgba(56, 223, 238, 1)\",\"rgba(125, 56, 238, 1)\"],\n        \tlineX:[\"测试1\", \"测试2\",\"测试3\", \"测试4\", \"测试5\", \"测试6\",\"测试7\",\"测试8\"],\n        \tnames:[\"2020\",\t\"2021\"],\n        \tvalue:[[21,21,16,95,14,11,32,34],\n        \t       [34,33,27,25,23,19,39,40]]\n        \n       \n    \t}\n    }\nlet seriesArr = [];\n\tlet legendArr = [];\n\tlegendArr.push({\n\t    top: '0%',\n\t    data: datas.datas_line.names,\n\t    textStyle: {\n\t        fontSize: 14,\n\t        color: 'F1F1F3'\n\t    },\n\t    left: '70',\n\t    itemWidth:10,\n\t    itemHeight:10\n\t})\n\t\n\tlegendArr.push({\n\t    top:\"0%\",\n\t    data: datas.datas_bar.names,\n\t    textStyle: {\n\t        fontSize: 14,\n\t        color: 'F1F1F3'\n\t    },\n\t    left: '70',\n\t    itemWidth:10,\n\t    itemHeight:10\n\t})\n\t\n\t\n\tdatas.datas_line.value.forEach(function(data,index){\n\t\tseriesArr.push({\n\t\t\t name: datas.datas_line.names[index],\n\t\t        type: 'line',\n\t\t        xAxisIndex: 1,\n\t\t         yAxisIndex: 1,\n\t\t        color: datas.datas_line.colors[index] + ',1)',\n\t\t        symbolSize: 0,\n\t\t         symbol: 'circle',\n\t\t        smooth: false,\n\t\t        areaStyle: {\n\t\t            normal: {\n\t\t                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n\t\t                    offset: 0,\n\t\t                    color: datas.datas_line.colors[index] + ', 0.3)'\n\t\t                }, {\n\t\t                    offset: 0.8,\n\t\t                    color: datas.datas_line.colors[index] + ', 0)'\n\t\t                }], false),\n\t\t                shadowColor: 'rgba(0, 0, 0, 0.1)',\n\t\t                shadowBlur: 10\n\t\t            }\n\t\t        },\n\t\t       \n\t\t        data: datas.datas_line.value[index],\n\t\t            label: {\n                show: true,\n                position: 'top',\n                textStyle: {\n                    color: '#ffffff',\n                },\n                 formatter:function(result){\n                  \n                    if(result.dataIndex == IndexGlobe){\n                        return result.value\n                    }else {\n                        return \"\"\n                    }\n                }\n            },\n\t\t    })\n\t\t})\n\tdatas.datas_bar.value.forEach(function(data,index){\n\t\tseriesArr.push({\n            name: datas.datas_bar.names[index],\n            type: 'bar',\n            barWidth: '15',\n            itemStyle: {\n                normal: {\n                    color: datas.datas_bar.colors[index],\n                    barBorderRadius: [12, 12, 0, 0],\n                },\n            },\n            data:data,\n             label: {\n                show: true,\n                position: 'top',\n                textStyle: {\n                    color: '#ffffff',\n                },\n                 formatter:function(result){\n                \n                    if(result.dataIndex == IndexGlobe){\n                        return result.value\n                    }else {\n                        return \"\"\n                    }\n                }\n            },\n        })\n\t})\n\t\n\t\n\t\n\t option = {\n\t  backgroundColor:\"rgba(0,0,0,1)\",\n            tooltip: {\n                trigger: 'axis',\n                axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n                },\n                backgroundColor  : 'rgba(0,0,0,0.7)',\n\t\t        textStyle:{\n\t\t        \tcolor:\"#ffffff\"\n\t\t        },\n\t\t        borderWidth :0,\n\t\t        formatter:function(params){\n\t\t        debugger\n\t\t        let html = \"\";\n\t\t        html += params[0].name + \"\\n\";\n\t\t        debugger\n         for(let i = 0;i<datas.datas_line.names.length;i++){\n          \thtml+= \"<div>\"+ datas.datas_line.names[i] +\": \"+datas.datas_line.value[i][params[0].dataIndex] + \"</div>\"\n          }\n\t\t         html+=\"<div style='margin-top:10px'></div>\"\n\t\t         for(let j = 0;j<datas.datas_bar.names.length;j++){\n          \thtml+=   \"<div>\" +datas.datas_bar.names[j] +\": \"+datas.datas_bar.value[j][params[0].dataIndex]+ \"</div>\"\n          }\n\t\t          IndexGlobe = params[0].dataIndex;\n\t\t         myChart.setOption(option)\n\t\t         return html\n\t\t        },\n            },\n            axisPointer: {\n                link: [\n                   {\n                      // 表示所有 xAxisIndex 为 0、3、4 和 yAxisName 为 'someName' 的坐标轴联动。\n                      xAxisIndex: [0, 1],\n                      yAxisName: 'someName',\n                   },\n                  \n                ],\n             },\n            dataZoom: [{\n\t\t        show: false,\n\t\t        height: 0,\n\t\t        xAxisIndex: [0, 1],\n\t\t        bottom: 30,\n\t\t        \n\t\t        \"start\": 0,\n\t\t        \"end\": 40,\n\t\t      \n\t\t        handleStyle: {\n\t\t            color: \"rgba(0,0,0,0)\",\n\t\t        },\n\t\t        textStyle:{\n\t\t            color:\"rgba(204,187,225,0)\",\n\t\t        },\n\t\t        fillerColor:\"rgba(67,55,160,0)\",\n\t\t        borderColor: \"rgba(204,187,225,0)\",\n\n\t\t    },{\n\t\t        show: false,\n\t\t        height: 0,\n\t\t        xAxisIndex: [0, 1],\n\t\t        bottom: 30,\n\t\t        \n\t\t        \"start\": 0,\n\t\t        \"end\": 20,\n\t\t      \n\t\t        handleStyle: {\n\t\t            color: \"rgba(0,0,0,0)\",\n\t\t        },\n\t\t        textStyle:{\n\t\t            color:\"rgba(204,187,225,0)\",\n\t\t        },\n\t\t        fillerColor:\"rgba(67,55,160,0)\",\n\t\t        borderColor: \"rgba(204,187,225,0)\",\n\n\t\t    }],\n\t\t    legend: legendArr,\n\t\t    grid: [{\n\t\t        top: '50',\n\t\t        left: '4%',\n\t\t        right: '4%',\n\t\t        bottom: '50%',\n\t\t        containLabel: true\n\t\t    },{\n\t\t        top: '55%',\n\t\t        left: '4%',\n\t\t        right: '4%',\n\t\t        bottom: '25',\n\t\t        containLabel: true\n\t\t    }\n\t\t           ],\n            xAxis: [\n\t\t\t\t\t{\n\t\t\t\t\t    type: 'category',\n\t\t\t\t\t    data:datas.datas_line.lineX ,\n\t\t\t\t\t    axisLabel: {\n\t\t\t\t\t         textStyle: {\n\t\t\t\t\t            color: '#7CAAFB',\n\t\t\t\t\t            fontSize:12\n\t\t\t\t\t        },\n\t\t\t\t\t        interval:0\n\t\t\t\t\t\n\t\t\t\t\t    },\n\t\t\t\t\t     splitLine: {\n\t\t\t\t\t         show:true,\n\t\t\t\t\t        lineStyle: {\n\t\t\t\t\t            color: '#2883E0'\n\t\t\t\t\t        }\n\t\t\t\t\t    },\n\t\t\t\t\t\n\t\t\t\t\t    axisLine: {\n\t\t\t\t\t        \tshow:true,\n\t\t\t\t\t        lineStyle: {\n\t\t\t\t\t            color: '#2883E0'\n\t\t\t\t\t        }\n\t\t\t\t\t    }\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t    type: 'category',\n\t\t\t\t\t    gridIndex: 1, \n\t\t\t\t\t    data:datas.datas_bar.lineX ,\n\t\t\t\t\t    axisLabel: {\n\t\t\t\t\t         textStyle: {\n\t\t\t\t\t            color: '#7CAAFB',\n\t\t\t\t\t            fontSize:12\n\t\t\t\t\t        },\n\t\t\t\t\t        interval:0\n\t\t\t\t\t    },\n\t\t\t\t\t     splitLine: {\n\t\t\t\t\t         show:true,\n\t\t\t\t\t        lineStyle: {\n\t\t\t\t\t            color: '#2883E0'\n\t\t\t\t\t        }\n\t\t\t\t\t    },\n\t\t\t\t\t\n\t\t\t\t\t    axisLine: {\n\t\t\t\t\t        \tshow:true,\n\t\t\t\t\t        lineStyle: {\n\t\t\t\t\t            color: '#2883E0'\n\t\t\t\t\t        }\n\t\t\t\t\t    }\n\t\t\t\t\t}\n                    ],\n            yAxis:[ {\n                type: 'value',\n                axisLabel: {\n\t\t\t         textStyle: {\n\t\t\t            color: '#7CAAFB',\n\t\t\t            fontSize:12\n\t\t\t        },\n                 },\n\t\t\t     splitLine: {\n\t\t\t         show:true,\n\t\t\t        lineStyle: {\n\t\t\t            color: '#2883E0'\n\t\t\t        }\n\t\t\t    },\n\t\t\t    axisLine: {\n\t\t\t        show:true,\n\t\t\t        lineStyle: {\n\t\t\t            color: '#2883E0'\n\t\t\t        }\n\t\t\t    }\n            } ,{\n                type: 'value',\n                gridIndex: 1,\n                axisLabel: {\n\t\t\t         textStyle: {\n\t\t\t            color: '#7CAAFB',\n\t\t\t            fontSize:12\n\t\t\t        },\n                 },\n\t\t\t     splitLine: {\n\t\t\t         show:true,\n\t\t\t        lineStyle: {\n\t\t\t            color: '#2883E0'\n\t\t\t        }\n\t\t\t    },\n\t\t\t    axisLine: {\n\t\t\t        show:true,\n\t\t\t        lineStyle: {\n\t\t\t            color: '#2883E0'\n\t\t\t        }\n\t\t\t    }\n            }],\n            series:seriesArr\n};\n\t\n\n   \n    var timeOut=null\n    myChart.on('mouseover',stop);\n    myChart.on('mouseout',goMove);\n    autoMove()\n    function autoMove(){\n       timeOut = setInterval(() => {\n           \n            if (Number(option.dataZoom[0].end)  > 100) {\n                option.dataZoom[0].end = 40;\n                option.dataZoom[0].start = 0;\n            } else {\n                option.dataZoom[0].end = option.dataZoom[0].end + 1 *  (100 / option.series[0].data.length);\n                option.dataZoom[0].start = option.dataZoom[0].start + 1 *  (100 / option.series[0].data.length);\n            }\n            myChart.setOption(option);\n        }, 2500);\n    }\n        //停止滚动\n      function stop(){\n          clearInterval(timeOut)\n      }\n        //继续滚动\n       function goMove(){\n          autoMove()\n         \n        }\n\n","html":"","externalScripts":"","updaterUID":"obd-o2Uq48DS8VVe30Eo4Mzq2csfOGk3560","theme":"","layout":"","viewCount":0,"userName":"叫***e","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPMUrxgzYW.png?v=1641368777543","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"叫***e"}}