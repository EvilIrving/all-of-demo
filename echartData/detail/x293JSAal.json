{"status":0,"data":{"cid":"x293JSAal","authorUid":"bd-1610942177","authorUserName":"i***t","title":"趋势数据缺失自动填充","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-02-16T03:15:37.000Z","lastUpdateTime":"2020-02-16T03:15:37.000Z","auth":2,"uid":"bd-1610942177","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-16T03:15:37.000Z","code":"\nvar data = {\"success\":1,\"data\":{\"conf_id\":\"0001847\",\"start_time\":1581755859000,\"type\":\"mediaworker\",\"option\":6,\"info\":[{\"name\":\"PlfmMedia_recv_privideo_bitrate\",\"description\":\"主视频(接收)-合成\",\"data\":[[1581755810809,null],[1581755873042,688.4],[1581755935275,132.75],[1581755997508,160.81],[1581756059741,null],[1581756121974,null],[1581756184207,693.78],[1581756246440,null],[1581756308673,700.89],[1581756370906,702.87],[1581756433139,null],[1581756495372,411.12],[1581756557605,null],[1581756619838,null],[1581756682071,417.55],[1581756744304,397.52],[1581756806537,403.12],[1581756868770,412.28],[1581756931003,null],[1581756993236,null],[1581757055469,498.05],[1581757117702,424.86],[1581757179935,415.96],[1581757242168,483.59],[1581757304401,null],[1581757366634,436.74],[1581757428867,488.84],[1581757491100,null],[1581757553333,411.46],[1581757615566,414.62],[1581757677799,406.09],[1581757740032,407.05],[1581757802265,409.09],[1581757864498,497.65],[1581757926731,408.21],[1581757988964,405.43],[1581758051197,491.64],[1581758113430,405.84],[1581758175663,406.02],[1581758237896,484.8],[1581758300129,null],[1581758362362,406.81],[1581758424595,489.14],[1581758486828,404.3],[1581758549061,409.66],[1581758611294,405.24],[1581758673527,408.17],[1581758735760,409.48],[1581758797993,615.48],[1581758860226,401.3],[1581758922459,407.95],[1581758984692,403.7],[1581759046925,402.8],[1581759109158,406.51],[1581759171391,488.91],[1581759233624,409.98],[1581759295857,410.11],[1581759358090,402.59],[1581759420323,487.38],[1581759482556,408.31],[1581759544789,null],[1581759607022,null],[1581759669255,410.09],[1581759731488,406.49],[1581759793721,402.0],[1581759855954,412.54],[1581759918187,405.76],[1581759980420,405.01],[1581760042653,407.27],[1581760104886,405.57],[1581760167119,408.52],[1581760229352,409.16],[1581760291585,409.97],[1581760353818,490.37],[1581760416051,414.48],[1581760478284,413.77],[1581760540517,null],[1581760602750,414.45],[1581760664983,410.62],[1581760727216,null],[1581760789449,null],[1581760851682,406.65],[1581760913915,411.27],[1581760976148,455.48],[1581761038381,407.27],[1581761100614,null],[1581761162847,null],[1581761225080,449.43],[1581761287313,420.59],[1581761349546,420.6],[1581761411779,485.47]]},{\"name\":\"PlfmMedia_recv_assvideo_bitrate\",\"description\":\"辅视频(接收)\",\"data\":null},{\"name\":\"PlfmMedia_recv_audio_bitrate\",\"description\":\"音频(接收)-混音\",\"data\":[[1581755810809,null],[1581755873042,19.91],[1581755935275,16.8],[1581755997508,24.16],[1581756059741,null],[1581756121974,21.97],[1581756184207,23.0],[1581756246440,null],[1581756308673,25.87],[1581756370906,19.56],[1581756433139,null],[1581756495372,24.54],[1581756557605,null],[1581756619838,null],[1581756682071,21.95],[1581756744304,21.77],[1581756806537,18.8],[1581756868770,20.01],[1581756931003,null],[1581756993236,null],[1581757055469,23.04],[1581757117702,21.3],[1581757179935,24.33],[1581757242168,20.65],[1581757304401,null],[1581757366634,19.21],[1581757428867,20.74],[1581757491100,null],[1581757553333,20.34],[1581757615566,20.3],[1581757677799,21.21],[1581757740032,20.98],[1581757802265,21.57],[1581757864498,21.04],[1581757926731,21.7],[1581757988964,20.85],[1581758051197,20.79],[1581758113430,21.57],[1581758175663,20.89],[1581758237896,20.62],[1581758300129,null],[1581758362362,21.07],[1581758424595,20.8],[1581758486828,20.63],[1581758549061,17.54],[1581758611294,19.13],[1581758673527,17.98],[1581758735760,18.8],[1581758797993,19.45],[1581758860226,16.88],[1581758922459,19.26],[1581758984692,21.04],[1581759046925,16.95],[1581759109158,20.79],[1581759171391,18.86],[1581759233624,19.32],[1581759295857,21.15],[1581759358090,18.56],[1581759420323,20.02],[1581759482556,20.48],[1581759544789,null],[1581759607022,null],[1581759669255,22.74],[1581759731488,22.64],[1581759793721,18.8],[1581759855954,21.28],[1581759918187,18.91],[1581759980420,20.14],[1581760042653,21.27],[1581760104886,20.76],[1581760167119,21.63],[1581760229352,25.15],[1581760291585,24.43],[1581760353818,23.61],[1581760416051,24.97],[1581760478284,24.05],[1581760540517,null],[1581760602750,22.92],[1581760664983,23.06],[1581760727216,null],[1581760789449,null],[1581760851682,25.0],[1581760913915,24.05],[1581760976148,23.59],[1581761038381,25.2],[1581761100614,null],[1581761162847,null],[1581761225080,25.3],[1581761287313,null],[1581761349546,24.73],[1581761411779,25.62]]}],\"mt_e164\":\"0512121887324\",\"end_time\":1581761460000}}\nvar xData = [];var yData=[];\nvar shD = data.data.info[0].data\n\nfor(let t in shD){\n    xData.push(shD[t][0]);\n    yData.push(shD[t][1]);\n}\n\n\n\noption = {\n   \n    title: {\n        text: 'Awesome Chart'\n    },\n    xAxis: {\n        data: xData\n    },\n    yAxis: {},\n   \n    series: [\n    //趋势填充线    （推荐）\n    {\n        type: 'line',\n         smooth: true,\n\n        color:\"#bbb\",\n        data:yData,\n         connectNulls :true //此属性满足自动填充\n    }\n    \n    //原始线\n    ,{\n        type: 'line',\n         smooth: true,\n         color:\"#67CBFF\",\n        data:(yData),\n        lineStyle:{\n          //type:\"dashed\"\n        }\n    }\n    //null反转填充0线\n    ,{\n        type: 'line',\n         smooth: true,\n         color:\"#ccc\",\n        data:reNullToZero(yData), //null转换为0 区分\n        lineStyle:{\n          type:\"dashed\"\n        }\n    }\n    ],\n    \n    tooltip: {\n        trigger: 'axis'\n    }\n};\n\n\n\nfunction nullInFull(a){\n    //todo\n    a = [...a]\n   let m = Object.entries(a).filter(x => x[1])\n\n    for (let i = 0; i < m.length - 1; i++) {\n  const el = m[i]\n  const next = m[i + 1]\n      if (next[0] - el[0] > 1) {\n        let percent = (next[1] - el[1]) / (next[0] - el[0])\n        for (let num = +el[0] + 1; num < +next[0]; num++) {\n          a[num] = percent + a[num - 1]\n        }\n      }\n    }\n    console.log(a);\n    return a;\n}\n\nfunction reNullToZero( a){\n\nlet b = a.map(x => x === null ? NaN : x)\n\nlet x = [...b.slice(1), 1]\nlet y = [1, ...b.slice(0, b.length - 1)]\n\nlet c = b.map((item, i) => item * x[i] * y[i])\n\nlet result = a.map((x, i) => isNaN(c[i]) ? x * 1 : null)\nconsole.log(result)\nreturn result\n}","html":"","externalScripts":"","updaterUID":"bd-1610942177","theme":"","layout":"","viewCount":147,"userName":"i***t","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x293JSAal.png?v=1581822938001","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title","tooltip"],"customTags":[],"updaterUserName":"i***t"}}