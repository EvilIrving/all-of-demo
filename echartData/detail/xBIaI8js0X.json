{"status":0,"data":{"cid":"xBIaI8js0X","authorUid":"bd-101698999","authorUserName":"Z***8","title":"文曲星词典猜数字游戏","description":"文曲星词典猜数字游戏\n1A1B 解释：1A 代表有一个数字相同且位置相同，1B 代表有一个数字相同位置不同","latestVersion":1,"alwaysLatest":1,"createTime":"2019-05-30T08:18:32.000Z","lastUpdateTime":"2019-05-30T08:18:32.000Z","auth":2,"uid":"bd-101698999","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-30T08:18:32.000Z","code":"// 准备一个 4 位数字（存在数组里）\nvar secretNumList = (function() {\n    var numList = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    var res = [];\n    for (var i = 0; i < 4; i++) {\n        res.push(numList.splice(Math.round(Math.random() * (numList.length - 1)), 1)[0]);\n    }\n    return res;\n})();\n\n// 8 次机会\nvar times = 8;\n\n// 提示信息列表，用于存放猜数记录\nmsgList = ['请猜1个四位数字（数字不重复）：', ''];\n\n// 输入框、提示框生成函数（ 4个方块数字框 + 提示框）\nfunction graphicObj(arr, msg) {\n    var res = [];\n    for (var i = 0; i < 4; i++) {\n        res.push({\n            type: 'group',\n            id: 'textGroup' + i,\n            left: 50 + i * 60,\n            top: 50,\n            children: [{\n                    type: 'rect',\n                    z: 100,\n                    left: 'center',\n                    top: 'center',\n                    shape: {\n                        width: 40,\n                        height: 50\n                    },\n                    style: {\n                        fill: '#fff',\n                        stroke: '#999',\n                        lineWidth: 2,\n                        shadowBlur: 8,\n                        shadowOffsetX: 3,\n                        shadowOffsetY: 3,\n                        shadowColor: 'rgba(0,0,0,0.3)'\n                    }\n                },\n                {\n                    type: 'text',\n                    z: 100,\n                    top: 'middle',\n                    left: 'center',\n                    style: {\n                        text: typeof(arr[arr.length - 4 + i]) === 'undefined' ? '' : arr[arr.length - 4 + i],\n                        font: '20px \"STHeiti\", sans-serif'\n                    }\n                }\n            ]\n        });\n    }\n    res.push({\n        type: 'text',\n        z: 100,\n        top: '50',\n        left: '400',\n        style: {\n            text: msg,\n            font: '20px \"STHeiti\", sans-serif'\n        }\n    });\n    return res;\n}\n\n\nvar categoryX = ['0', '1', '2'];\nvar categoryY = ['0', '1', '2', '3'];\n\n// 准备 heatmap 的按钮数据，用 '-1' 作为退格按钮、'-2'作为猜数按钮 \nvar btnData = (function() {\n    var res = [];\n    for (i = 0; i < 3; i++) {\n        for (j = 0; j < 4; j++) {\n            if (j > 0) {\n                res.push([i, j, '' + (j * 3 + i - 2)]);\n            } else {\n                res.push([i, j, '' + (0 - i)]);\n            }\n\n        }\n    }\n    return res;\n})();\n\n// 准备一个数组存放输入框内的数组\nvar inputList = [];\n\n\n// option设置，通过自定义标签把 '-1'，'-2'换成 '←' 和 '猜'\nfunction getOption() {\n    option = {\n        title: {\n            text: '文曲星词典猜数字游戏'\n        },\n        tooltip: {\n            show: false\n        },\n        grid: {\n            width: '30%',\n            height: '60%',\n            left: '10px',\n            top: '30%'\n        },\n        xAxis: {\n            show: false,\n            type: 'category',\n            data: categoryX,\n            splitArea: {\n                show: true\n            }\n        },\n        yAxis: {\n            show: false,\n            type: 'category',\n            data: categoryY,\n            splitArea: {\n                show: true\n            }\n        },\n        graphic: graphicObj(inputList, msgList),\n        series: [{\n            id: 'btnPanel',\n            type: 'heatmap',\n            label: {\n                normal: {\n                    show: true,\n                    formatter: function(params) {\n                        if (params.data[2] < 0) {\n                            return params.data[2] == -1 ? '⬅' : '猜';\n                        }\n                        return params.data[2]\n                    }\n                }\n            },\n            data: btnData\n        }]\n    };\n    return option;\n}\n\n// 渲染图表\nmyChart.setOption(getOption());\n\n// 点击热力图时调用 btnClick 函数\nmyChart.on('click', function(params) {\n    if (params.seriesId === 'btnPanel' && times > 0) {\n        btnClick(params.data[2]);\n    }\n});\n\n// 按钮点击响应函数\nfunction btnClick(btnID) {\n    if (btnID === '-1') {\n        inputList.pop();\n    } else if (btnID === '-2') {\n        return inputList.length === 4 ? guess(inputList) : alert('请先填入 4 个数字再猜！');\n    } else {\n        inputList.length === 4 ? inputList[3] = btnID : inputList.push(btnID);\n    }\n    myChart.setOption({\n        graphic: graphicObj(inputList, msgList.join('\\n'))\n    });\n\n}\n\n// 猜数函数\nfunction guess(arr) {\n    if (arr.length != 4) {\n        return alert('请猜4位数字');\n    }\n    var info;\n    var A = 0;\n    var B = 0;\n    times--;\n    for (var i = 0; i < 4; i++) {\n        if (secretNumList.indexOf(arr[i]) === i) {\n            A++;\n        } else if (secretNumList.indexOf(arr[i]) != -1) {\n            B++;\n        }\n    }\n    if (A === 4) {\n        info = arr.join('') + '  猜中了！！！';\n        times = 0;\n    } else {\n        info = arr.join('') + '  ' + A + 'A' + B + 'B , 你还有' + times + '次机会...';\n    }\n    msgList.push(info);\n    inputList = [];\n    myChart.setOption({\n        graphic: graphicObj(inputList, msgList.join('\\n'))\n    });\n}","html":"","externalScripts":"/dep/echarts/map/js/world.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-101698999","theme":"","layout":"","viewCount":349,"userName":"Z***8","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBIaI8js0X.png?v=1559204312375","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","series-heatmap","title","tooltip"],"customTags":[],"updaterUserName":"Z***8"}}