{"status":0,"data":{"cid":"x6Rr6yQFb","authorUid":"bd-623649287","authorUserName":"l***c","title":"银河·折线组合","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-11-09T07:41:20.000Z","lastUpdateTime":"2019-11-09T07:41:20.000Z","auth":2,"uid":"bd-623649287","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-11T04:28:12.000Z","code":"const type = [\"疾病分期\", \"药物治疗\", \"放射治疗\", \"检查结果\"];\n\nconst jianyanData = [\n  [\"2019-9-1\", -10],\n  [\"2019-9-10\", 100],\n  [\"2019-10-1\", -13],\n  [\"2019-10-10\", 31],\n  [\"2019-10-20\", 42],\n  [\"2019-10-30\", 34],\n  [\"2019-11-1\", 55],\n  [\"2019-11-15\", 24],\n  [\"2019-12-1\", 89]\n];\n\n// 按“检验结果”的最大数值范围，切割为四份\nlet interval = Math.floor(Math.max(...jianyanData.map(item => item[1])) / 4);\n// XXX: 如果最大值为负数，可能存在问题\nif (interval <= 0) interval = 1\n\noption = {\n  xAxis: {\n    type: \"time\",\n    axisPointer: {\n        show: true,\n    }\n  },\n  yAxis: {\n    type: \"value\",\n    name: \"检验结果\",\n    // 强制切分，不然 formatter 获取不到对应 value\n    interval,\n    // 不显示刻度\n    axisTick: { show: false },\n    axisLabel: {\n      // 使用 -10x 表示固定项目，大于 0 的标识检验结果\n      formatter(value) {\n        if (value < 0) {\n          const index = value / -interval - 1;\n          if (index >= 0 && index < type.length) return type[index];\n        }\n      }\n    },\n    boundaryGap: 0.1\n  },\n  tooltip: {\n    backgroundColor: 'rgba(245, 245, 245, 0.8)',\n    borderWidth: 1,\n    borderColor: '#ccc',\n    padding: 10,\n    textStyle: {\n        color: '#000'\n    },\n    extraCssText: 'width: 170px',\n    formatter: '{c}'\n  },\n  series: [\n    // 疾病分期\n    {\n      data: [[\"2019-10-01\", -interval], [\"2019-10-15\", -interval], [\"2019-11-07\", -interval]]\n    },\n    // 药物治疗\n    {\n      data: [[\"2019-9-1\", -interval * 2], [\"2019-10-1\", -interval * 2]]\n    },\n    {\n      data: [[\"2019-9-15\", -interval * 2], [\"2019-10-15\", -interval * 2]]\n    },\n    // 放射治疗\n    {\n      data: [[\"2019-10-3\", -interval * 3], [\"2019-10-10\", -interval * 3]]\n    },\n    // 检查结果\n    {\n      data: [[\"2019-10-10\", -interval * 4]]\n    },\n    {\n      data: [[\"2019-10-10\", -interval * 4]],\n      // 单个时间范围重叠计算\n      symbolOffset: [5, 0]\n    },\n    {\n      data: [[\"2019-10-10\", -interval * 4]],\n      // 单个时间范围重叠计算 * 2\n      symbolOffset: [10, 0]\n    },\n    // 检验结果\n    {\n      data: jianyanData\n    }\n  ].map(v => {\n    // 如果数据中的所有 y 轴数据都相同，认定为特定项\n    // 或者通过数据的 type 或者 index 判断？\n    const isType = v.data.every(v1 => v.data.every(v2 => v1[1] === v2[1]));\n    const style = { symbolSize: 10, lineStyle: { width: 4 } };\n\n    return {\n      ...v,\n      type: \"line\",\n      ...(isType ? style : null)\n    };\n  })\n};\n","html":"","externalScripts":"","updaterUID":"bd-623649287","theme":"","layout":"","viewCount":103,"userName":"l***c","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6Rr6yQFb.png?v=1573446492195","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","tooltip"],"customTags":[],"updaterUserName":"l***c"}}