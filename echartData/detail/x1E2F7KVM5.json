{"status":0,"data":{"cid":"x1E2F7KVM5","authorUid":"obd-oE_7R2C3DvXcp12OuvL41OcBaW1qH4v","authorUserName":"v***v","title":"双轴柱状折线图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-28T07:31:54.000Z","lastUpdateTime":"2021-12-28T07:31:54.000Z","auth":2,"uid":"obd-oE_7R2C3DvXcp12OuvL41OcBaW1qH4v","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-28T07:31:54.000Z","code":"let colors = ['#00adff', '#ff5722'];\nlet yNameOne = '售出（kg）';\nlet yNameTwo = '比例（%）';\nlet xData = ['苹果', '香蕉', '橘子'];\nlet yData = {\n    one: [5, 2, 7],\n    two: [52, 39, 68],\n};\nlet splitNumber = 5; // 分割段\n//计算最大值\nfunction calMax(arr) {\n    let min = Math.min.apply(null, arr);\n    let max = Math.max.apply(null, arr);\n    let interval = (max - min) / splitNumber; // 平均值\n    max = Math.ceil(max + interval); // 向上取整\n    return max;\n}\n\n//计算最小值\nfunction calMin(arr) {\n    let min = Math.min.apply(null, arr);\n    let max = Math.max.apply(null, arr);\n    let interval = (max - min) / splitNumber; // 平均值\n    min = min > 0 ? min : Math.floor(min - interval); // 向下取整\n    // console.log(min, max, interval);\n    return min;\n}\noption = {\n    backgroundColor:\"#000a40\",\n    title: {\n        text: 'title',\n        top: '0',\n        x: 'center',\n        textStyle: { color: '#000', fontSize: '20', fontWeight: 'bold' },\n    },\n    color: colors,\n    grid: {\n        top: '7%',\n        bottom: '5%',\n        left: '80',\n        right: '80',\n    },\n    legend: {\n        top: '2%',\n        textStyle: {\n            color: '#00ffff',\n            margin: '10',\n        },\n    },\n    toolbox: {\n        feature: {\n            saveAsImage: {\n                backgroundColor: '#243a55',\n            },\n        },\n        iconStyle: {\n            borderColor: '#fff',\n            fontSize: '22px',\n        },\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { type: 'shadow' },\n    },\n    xAxis: {\n        type: 'category',\n        axisTick: { show: false },\n        axisLabel: {\n            textStyle: { color: '#fff', fontSize: 14 },\n            rotate: 0,//倾斜度\n        },\n        axisLine: {\n            show: true,\n            lineStyle: { color: '#fff' },\n        },\n        data: xData,\n    },\n    yAxis: [\n        {\n            name: yNameOne,\n            type: 'value',\n            position: 'left',\n            min: 0,\n            max: calMax(yData.one),\n            splitNumber: splitNumber,\n            interval:\n                (calMax(yData.one) - (calMin(yData.one) > 0 ? 0 : calMin(yData.one))) / splitNumber,\n            splitLine: {\n                lineStyle: { type: 'dashed', color: '#707070' },\n            },\n            axisLabel: {\n                // formatter: '{value}mm',\n                formatter: function (value, index) {\n                    return (value + '').indexOf('.') != -1 ? value.toFixed(1) : value;\n                },\n                textStyle: { color: colors[0], fontSize: 14 },\n            },\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: colors[0],\n                    width: 2,\n                },\n            },\n            axisTick: { show: false },\n        },\n        {\n            name: yNameTwo,\n            type: 'value',\n            position: 'right',\n            min: 0,\n            max: calMax(yData.two),\n            splitNumber: splitNumber,\n            interval:\n                (calMax(yData.two) - (calMin(yData.two) < 0 ? calMin(yData.two) : 0)) / splitNumber,\n            splitLine: { show: false },\n            axisLabel: {\n                // formatter: '{value}°C',\n                formatter: function (value, index) {\n                    return (value + '').indexOf('.') != -1 ? value.toFixed(1) : value;\n                    //return parseInt(value) + '%';\n                },\n                textStyle: { color: colors[1], fontSize: 14 },\n            },\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: colors[1],\n                    width: 2,\n                },\n            },\n            axisTick: { show: false },\n        },\n    ],\n    series: [\n        {\n            name: yNameOne,\n            type: 'bar',\n            barWidth: '30%',\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: true, //开启显示\n                        position: 'top', //在上方显示\n                        textStyle: {\n                            //数值样式\n                            color: colors[0],\n                            fontSize: 12,\n                            fontWeight: 400,\n                        },\n                    },\n                },\n            },\n            data: yData.one,\n        },\n        {\n            name: yNameTwo,\n            type: 'line',\n            symbol: 'circle',\n            symbolSize: 8,\n            yAxisIndex: 1,\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: true, //开启显示\n                        position: 'top', //在上方显示\n                        textStyle: {\n                            //数值样式\n                            color: colors[1],\n                            fontSize: 12,\n                            fontWeight: 400,\n                        },\n                    },\n                },\n            },\n            data: yData.two,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oE_7R2C3DvXcp12OuvL41OcBaW1qH4v","theme":"","layout":"","viewCount":0,"userName":"v***v","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1E2F7KVM5.png?v=1640676714155","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"v***v"}}