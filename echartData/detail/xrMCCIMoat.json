{"status":0,"data":{"cid":"xrMCCIMoat","authorUid":"bd-2662104931","authorUserName":"新新点灯9789","title":"水利知识图谱","description":"简单的水利知识图谱之二，才疏学浅，欢迎批评指正","latestVersion":2,"alwaysLatest":1,"createTime":"2019-03-26T08:01:41.000Z","lastUpdateTime":"2019-03-26T08:01:41.000Z","auth":2,"uid":"bd-2662104931","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-26T08:07:02.000Z","code":"var size = 50; //节点大小\n\n\nvar listdata = []; //节点数组\nvar links = []; //链接数组\nvar legendes = [\"对象属性\", \"关联对象\", \"所属类别\", \"对象\"];\nvar texts = []; //链接数组\n\n\nvar legendes_json = {\n    对象属性: \"对象属性\",\n    关联对象: \"关联对象\",\n    所属类别: \"所属类别\",\n    对象: \"对象\"\n};\n\nvar property_cat_json = {\n    对象属性: \"对象属性\",\n    工程建设情况: \"在建\",\n    工程规模: \"大型\",\n    建成时间: \"2011/10/01\",\n    归口管理部门: \"xx部门\",\n    水电站代码: \"6000026\",\n    水电站所在位置: \"湖北省-宜昌市\",\n    水电站类型: \"xx式水电站\",\n};\n\nvar property_cat = [\"对象属性\", \"在建\", \"大型\", \"2011/10/01\", \"xx部门\", \"6000026\", \"湖北省-宜昌市\", \"xx式水电站\"]\nvar property_rel_cat = [\"对象属性\", \"工程建设情况\", \"工程规模\", \"建成时间\", \"管理部门\", \"水电站代码\", \"水电站所在位置\", \"水电站类型\"]\nvar rel_obj_cat_json = {\n    \"关联对象\": \"关联对象\",\n    \"位于,重庆至宜昌\": \"长江重庆\",\n    \"属于，三峡枢纽水库\": \"三峡枢纽水库\",\n    \"所在,宜宾至宜昌\": \"宜宾至宜昌\"\n};\nvar rel_obj_cat = [\"关联对象\", \"宜宾至宜昌\", \"重庆至宜昌区间\", \"三峡枢纽水库\"];\nvar rel_obj_rel_cat = [\"关联对象\", \"位于\", \"属于\", \"所在\"]\nvar cat_name_cat_json = {\n    所属类别: \"所属类别\",\n    AD: \"AD\",\n    BAS: \"BAS\",\n    HYST: \"HYST\",\n    RES: \"RES\",\n    WIUN: \"WIUN\",\n    WRZ: \"WRZ\"\n}\nvar cat_name_cat = [\"所属类别\", \"AD\", \"WIUN\", \"RES\", \"BAS\", \"WRZ\", \"HYST\"]\n\nvar obj_name_cat_json = {\n    对象: \"三峡水电站\"\n}\nvar obj_name_cat = [\"三峡水电站\"]\n\n\nfunction setData(json, n) {\n    var i = 0;\n    for (var p in json) {\n        listdata.push({\n            x: i * 50,\n            y: size + i * 10,\n            \"name\": p,\n            \"showName\": json[p],\n            \"symbolSize\": size,\n            \"category\": n,\n            \"draggable\": \"true\",\n            formatter: function(params) {\n                return params.data.showName\n            }\n        });\n        i++;\n    }\n}\n\nfunction setLinkData(json, relarr, title) {\n    if (relarr !== \"\") {\n        var i = 0;\n        for (var p in json) {\n            links.push({\n                \"source\": p,\n                \"target\": title,\n                \"value\": relarr[i],\n                lineStyle: {\n                    normal: {\n                        // text: relarr[i],\n                        color: 'source'\n                    }\n                }\n            });\n            i++;\n        }\n    } else {\n        for (var p2 in json) {\n            links.push({\n                \"source\": p2,\n                \"target\": title,\n                \"value\": \"\",\n                lineStyle: {\n                    normal: {\n                        color: 'source'\n                    }\n                }\n            });\n        }\n    }\n}\n\nfor (var i = 0; i < legendes.length; i++) {\n    texts.push({\n        \"name\": legendes[i]\n    })\n}\n\nsetData(property_cat_json, 0);\nsetData(rel_obj_cat_json, 1);\nsetData(cat_name_cat_json, 2);\nsetData(obj_name_cat_json, 3);\n\nsetLinkData(property_cat_json, property_rel_cat, property_cat[0]);\nsetLinkData(rel_obj_cat_json, rel_obj_rel_cat, rel_obj_cat[0]);\nsetLinkData(cat_name_cat_json, \"\", cat_name_cat[0]);\nsetLinkData(legendes_json, \"\", legendes[3]);\n\noption = {\n    title: {\n        text: \"水利信息知识图谱\",\n        top: \"top\",\n        left: \"left\",\n        textStyle: {\n            color: '#000000'\n        }\n    },\n    tooltip: {\n        formatter: '{b}'\n    },\n    toolbox: {\n        show: true,\n        feature: {\n            restore: {\n                show: true\n            },\n            magicType: {\n                show: true,\n                type: ['force', 'chord']\n            },\n            saveAsImage: {\n                show: true\n            }\n        }\n    },\n    backgroundColor: '#f7f7f7',\n    legend: {\n        data: legendes,\n        textStyle: {\n            color: '#000000'\n        },\n        icon: 'circle',\n        type: 'scroll',\n        orient: 'vertical',\n        left: 10,\n        top: 20,\n        bottom: 20,\n        itemWidth: 10,\n        itemHeight: 10\n    },\n    animationDuration: 1000,\n    animationEasingUpdate: 'quinticInOut',\n    series: [{\n        name: '知识图谱',\n        type: 'graph',\n        layout: 'force',\n        force: {\n            repulsion: 200,\n            gravity: 0.02,\n            edgeLength: 90,\n            layoutAnimation: true,\n        },\n        data: listdata,\n        links: links,\n        categories: texts,\n        roam: true,\n        nodeScaleRatio: 0, //鼠标漫游缩放时节点的相应缩放比例，当设为0时节点不随着鼠标的缩放而缩放\n        focusNodeAdjacency: false, //是否在鼠标移到节点上的时候突出显示节点以及节点的边和邻接节点。\n        lineStyle: {\n            normal: {\n                opacity: 0.5,\n                width: 1.5,\n                curveness: 0\n            }\n        },\n        label: {\n            normal: {\n                show: true,\n                position: 'inside',\n                textStyle: { //标签的字体样式\n                    color: '#000000', //字体颜色\n                    fontWeight: 'normal', //'normal'标准'bold'粗的'bolder'更粗的'lighter'更细的或100 | 200 | 300 | 400...\n                    fontSize: \"12\" //字体大小\n                },\n                formatter: function(params) {\n                    return params.data.showName //此处为label转换 并转换颜色\n                },\n                fontSize: 18,\n                fontStyle: '600',\n            }\n        },\n        edgeLabel: {\n            normal: {\n                show: true,\n                textStyle: {\n                    fontSize: 12\n                },\n                formatter: \"{c}\"\n            }\n        }\n    }],\n    color: ['#ff7f50', '#6dadd1', '#9765a8', '#91c7ae', '#772cdc',\n        '#ff69b4', '#ba55d3', '#cd5c5c', '#ffa500', '#40e0d0',\n        '#1e90ff', '#ff6347', '#7b68ee', '#00fa9a', '#ffd700',\n        '#6b8e23', '#ff00ff', '#3cb371', '#b8860b', '#30e0e0'\n    ] //自定义调色板\n};","html":"","externalScripts":"","updaterUID":"bd-2662104931","theme":"","layout":"","viewCount":217,"userName":"新新点灯9789","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrMCCIMoat.png?v=1553587623006","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"新新点灯9789"}}