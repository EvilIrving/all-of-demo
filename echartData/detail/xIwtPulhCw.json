{"status":0,"data":{"cid":"xIwtPulhCw","authorUid":"obd-oFuGzh3qDQ_8baI2OSl0JyrsbbH7E5q","authorUserName":"岁***y","title":"智慧通行","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2021-07-27T02:20:58.000Z","lastUpdateTime":"2021-07-27T03:31:44.000Z","auth":2,"uid":"obd-oFuGzh3qDQ_8baI2OSl0JyrsbbH7E5q","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-27T03:31:44.000Z","code":"var names = ['正常', '维护', '建设中', '关闭'];\nvar values1 = [257, 142, 125, 120];\nvar values2 = [222, 231, 157, 120];\nvar colorList = ['#FAFC01', '#FF288D', '#01C4C6', '#41FD58'];\nvar data1 = [],\n    data2 = [],\n    t1 = 0,\n    t2 = 0,\n    data3 = [],\n    data4 = [];\nnames.forEach((v, i) => {\n    data1.push({ name: names[i], value: values1[i] });\n    data2.push({ name: names[i], value: values2[i] });\n    t1 += values1[i];\n    t2 += values2[i];\n});\nvalues1.forEach((v, i) => {\n    data3.push(Number((values1[i] * 100) / t1).toFixed(2));\n    data4.push(Number((values2[i] * 100) / t2).toFixed(2));\n});\nconsole.log(data3 + '|' + data4);\ndata1.reverse();\ndata2.reverse();\n// 公用调整\nvar itemStyle = {\n    normal: {\n        borderColor: '#0A1934',\n        borderWidth: 5,\n        color: function (params) {\n            return colorList[params.dataIndex];\n        },\n    },\n};\nvar textStyle = {\n    color: '#fff',\n    fontSize: 30,\n    fontWeight: 100,\n};\nvar legendTextStyle = {\n    rich: {\n        title: {\n            color: '#fff',\n            fontSize: 12,\n            fontWeight: 100,\n            fontFamily: 'HuaKang',\n            width: '100px',\n            padding: [0, 10, 0, 10],\n        },\n        value: {\n            color: '#fff',\n            fontSize: 12,\n            fontWeight: 100,\n            fontFamily: 'HuaKang',\n            padding: [0, 0, 0, 10],\n        },\n        zhanbi: {\n            color: '#fff',\n            fontSize: 12,\n            fontWeight: 100,\n            fontFamily: 'HuaKang',\n            padding: [0, 10, 0, 0],\n        },\n        unit: {\n            color: '#fff',\n            fontSize: 12,\n            fontWeight: 100,\n            fontFamily: 'HuaKang',\n            padding: [0, 30, 0, 0],\n        },\n        percent: {\n            color: '#fff',\n            fontSize: 12,\n            fontWeight: 100,\n            fontFamily: 'HuaKang',\n            padding: [0, 0, 0, 0],\n        },\n    },\n};\nvar leftCenter = ['25.5%', '30%'],\n    rightCenter = ['74.5%', '30%'],\n    radius1 = ['15%', '20%'], // 饼图\n    radius3 = ['30%', '31%']; // 线圈\nvar option = {\n    backgroundColor: '#0A1934',\n    legend: [\n        {\n            data: names,\n            icon: 'vertical',\n            left: '10%',\n            bottom: '10%',\n            orient: 'vertical',\n            itemGap: 20,\n            itemWidth: 12,\n            itemHeight: 12,\n            formatter: function (val) {\n                let index = names.indexOf(val);\n                return `{title|${val}}{value|${data1[index].value}}{unit|个}{zhanbi|占比}{percent|${data3[index]}}{unit|%}`;\n            },\n            textStyle: legendTextStyle,\n        },\n        {\n            data: names,\n            icon: 'vertical',\n            left: '61%',\n            bottom: '10%',\n            orient: 'vertical',\n            itemGap: 20,\n            itemWidth: 12,\n            itemHeight: 12,\n            formatter: function (val) {\n                let index = names.indexOf(val);\n                return `{title|${val}}{value|${values2[index]}}{unit|个}{zhanbi|占比}{percent|${data4[index]}}{unit|%}`;\n            },\n            textStyle: legendTextStyle,\n        },\n    ],\n    tooltip: {\n        trigger: 'item',\n    },\n    title: [\n        {\n            text: '充电站',\n            x: '21%',\n            y: '28%',\n            textStyle: textStyle,\n        },\n        {\n            text: '充电桩',\n            x: '70%',\n            y: '28%',\n            textStyle: textStyle,\n        },\n    ],\n    series: [\n        // 左饼图\n        {\n            // 饼图圈\n            type: 'pie',\n            zlevel: 3,\n            radius: radius1,\n            center: leftCenter,\n            itemStyle: itemStyle,\n            labelLine: {\n                show: false,\n                normal: {\n                    length: 5,\n                    length2: 0,\n                    lineStyle: {\n                        color: 'transparent',\n                    },\n                },\n            },\n            label: {\n                normal: {\n                    formatter: (params) => {\n                        return '●';\n                    },\n                },\n            },\n            data: data1,\n        },\n        {\n            // 最外圆圈\n            type: 'pie',\n            zlevel: 1,\n            silent: true, //取消高亮\n            radius: radius3,\n            center: leftCenter,\n            itemStyle: {\n                normal: {\n                    color: function (params) {\n                        return colorList[params.dataIndex];\n                    },\n                },\n            },\n            labelLine: {\n                show: false,\n                normal: {\n                    length: 10,\n                    length2: 0,\n                    lineStyle: {\n                        color: 'transparent',\n                    },\n                },\n            },\n            label: {\n                show: true,\n            },\n            data: data1,\n        },\n\n        // 右饼图\n        {\n            // 饼图圈\n            type: 'pie',\n            zlevel: 3,\n            radius: radius1,\n            center: rightCenter,\n            itemStyle: itemStyle,\n            labelLine: {\n                show: false,\n                normal: {\n                    length: 5,\n                    length2: 0,\n                    lineStyle: {\n                        color: 'transparent',\n                    },\n                },\n            },\n            label: {\n                normal: {\n                    formatter: (params) => {\n                        return '●';\n                    },\n                },\n            },\n            data: data2,\n        },\n        {\n            // 线圆圈\n            type: 'pie',\n            zlevel: 1,\n            silent: true, //取消高亮\n            radius: radius3,\n            center: rightCenter,\n            itemStyle: {\n                normal: {\n                    color: function (params) {\n                        return colorList[params.dataIndex];\n                    },\n                },\n            },\n            labelLine: {\n                show: false,\n                normal: {\n                    length: 10,\n                    length2: 0,\n                    lineStyle: {\n                        color: 'transparent',\n                    },\n                },\n            },\n            label: { show: true, normal: { formatter: (params) => data4[params.dataIndex]+'%' } },\n            data: data2,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oFuGzh3qDQ_8baI2OSl0JyrsbbH7E5q","theme":"","layout":"","viewCount":0,"userName":"岁***y","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIwtPulhCw.png?v=1627356705047","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"岁***y"}}