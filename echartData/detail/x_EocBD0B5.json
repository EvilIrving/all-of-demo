{"status":0,"data":{"cid":"x_EocBD0B5","authorUid":"bd-2680668432","authorUserName":"C***酱","title":"带有顶部装饰的pie","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-22T12:46:28.000Z","lastUpdateTime":"2020-06-22T12:46:28.000Z","auth":2,"uid":"bd-2680668432","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-30T08:00:11.000Z","code":"const colors = [\"#1576d2\", \"#d14a82\", \"#26c1f2\", \"#a166ff\", \"#9C2BB6\"]\r\nconst radius = [0.5, 0.75]\r\nconst data = [{\r\n        name: 'Mon',\r\n        value: 182\r\n    },\r\n    {\r\n        name: 'Tue',\r\n        value: 191\r\n    },\r\n    {\r\n        name: 'Wed',\r\n        value: 234\r\n    },\r\n    {\r\n        name: 'Thu',\r\n        value: 290\r\n    },\r\n    {\r\n        name: 'Fri',\r\n        value: 330\r\n    },\r\n]\r\nconst sum = data.reduce((prev, curr) => {\r\n    curr._start = prev\r\n    curr._end = prev + curr.value\r\n    return curr._end\r\n}, 0)\r\n\r\nfunction renderItem(params, api) {\r\n    const ceilAngle = Math.PI / 100 // 装饰的显示角度\r\n    const coordSys = params.coordSys\r\n    const coordRadius = coordSys.r\r\n    const val = api.value(0)\r\n    const index = api.value(1)\r\n    const r0 = coordRadius * radius[0]\r\n    const r = coordRadius * radius[1]\r\n    const startAngle = (data[index]._start * Math.PI * 2) / sum - Math.PI / 2\r\n    const endAngle = (data[index]._end * Math.PI * 2) / sum - Math.PI / 2\r\n    return {\r\n        type: \"group\",\r\n        children: [{\r\n            type: 'sector',\r\n            shape: {\r\n                cx: coordSys.cx,\r\n                cy: coordSys.cy,\r\n                r,\r\n                r0,\r\n                startAngle: startAngle,\r\n                endAngle: endAngle\r\n            },\r\n            style: api.style({\r\n                fill: colors[index],\r\n                opacity: 0.5\r\n            })\r\n        }, {\r\n            type: 'sector',\r\n            shape: {\r\n                cx: coordSys.cx,\r\n                cy: coordSys.cy,\r\n                r,\r\n                r0,\r\n                startAngle: val === 0 ? endAngle : endAngle - ceilAngle,\r\n                endAngle: endAngle\r\n            },\r\n            style: api.style({\r\n                fill: colors[index]\r\n            })\r\n        }]\r\n    }\r\n}\r\n\r\noption = {\r\n    color: colors,\r\n    angleAxis: {\r\n        type: 'category',\r\n        show: false\r\n    },\r\n    radiusAxis: {\r\n        show: false\r\n    },\r\n    polar: {\r\n        radius: \"100%\"\r\n    },\r\n    series: [{\r\n        type: 'custom',\r\n        data: data,\r\n        renderItem: renderItem,\r\n        coordinateSystem: 'polar',\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"bd-2680668432","theme":"","layout":"","viewCount":98,"userName":"C***酱","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_EocBD0B5.png?v=1593504011227","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-custom"],"customTags":[],"updaterUserName":"C***酱"}}