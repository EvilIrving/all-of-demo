{"status":0,"data":{"cid":"x3o1-94Rvt","authorUid":"bd-90050728","authorUserName":"刘***6","title":"山东地图下钻","description":"山东地图下钻到县一级","latestVersion":2,"alwaysLatest":1,"createTime":"2019-08-28T07:25:01.000Z","lastUpdateTime":"2019-08-28T07:25:01.000Z","auth":2,"uid":"bd-90050728","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-28T07:38:31.000Z","code":"\nvar convertData = function(){\n    var res = [];\n    for(let index in shiGeoCoordMap){\n        res.push(\n            {\n                name:shiGeoCoordMap[index].name,\n                value:shiGeoCoordMap[index].value\n            }    \n        );\n    }\n    return res;\n}\n\nvar convertXianData = function(data){\n    var mapJson = data.features;\n    var res = [];\n    for(let index in mapJson){\n        res.push(\n            {\n                name:mapJson[index].properties.name,\n                value:mapJson[index].properties.center\n            }    \n        );\n    }\n    return res;\n};\n\noption={\n    geo:{\n        show:true,\n        map:'shandong',\n        label:{\n            normal:{\n                show:false\n            },\n            emphasis:{\n                show:false,\n            }\n        }\n    },\n    series:[\n        {\n            name:'涟漪散点',\n            type:'effectScatter',\n            coordinateSystem:'geo',\n            data:convertData(),\n            label:{\n                normal:{\n                    show:true,\n                    formatter:'{b}',\n                    position:'right'\n                }\n            }\n        },    \n    ]\n};\nlet shandongOption = option;\n\nmyChart.on('click',function(params){\n    echarts.registerMap(params.name,shandong[params.name]);\n    option={\n        geo:{\n            show:true,\n            map:params.name,\n            roam:true,\n        },\n        series:[\n            {\n                name:'县级散点',\n                type:'effectScatter',\n                coordinateSystem:'geo',\n                data:convertXianData(shandong[params.name]),\n                label:{\n                    normal:{\n                        show:true,\n                        formatter:'{b}',\n                        position:'right'\n                    }\n                }\n            }    \n        ]\n    };\n    myChart.clear();\n    myChart.setOption(option);\n});\nmyChart.getZr().on('click',params=>{\n    let pointInPixel = [params.offsetX, params.offsetY];\n    if (!myChart.containPixel('geo', pointInPixel)) {\n        //let xIndex = myChart.convertFromPixel({ seriesIndex: 0 }, [params.offsetX, params.offsetY])[0];\n        \n        \n        myChart.clear();\n        myChart.setOption(shandongOption);\n    }   \n});\n\n\n\n\n","html":"","externalScripts":"https://gallery.echartsjs.com/asset/get/s/data-1566970916860-cwFZaRQbO.js,https://gallery.echartsjs.com/asset/get/s/data-1566972935480-qTBa4Kj7E.js,https://gallery.echartsjs.com/asset/get/s/data-1566974461266-XuSKDpb7P.js","updaterUID":"bd-90050728","theme":"","layout":"","viewCount":700,"userName":"刘***6","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3o1-94Rvt.png?v=1566977911953","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter"],"customTags":[],"updaterUserName":"刘***6"}}