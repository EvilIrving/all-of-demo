{"status":0,"data":{"cid":"xB1cqcMvBM","authorUid":"bd-53374760","authorUserName":"coffee11168","title":"省市专利情况","description":"data from CAIP","latestVersion":2,"alwaysLatest":1,"createTime":"2018-01-25T08:51:29.000Z","lastUpdateTime":"2018-01-25T08:51:29.000Z","auth":2,"uid":"bd-53374760","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2018-01-26T08:41:57.000Z","code":"\nvar geoCoordMap = {\n    \"西安\":[108.95359,34.267518],\n\"雁塔\":[108.954816,34.228829],\n\"碑林\":[108.946972,34.263032],\n\"未央\":[108.953182,34.299297],\n\"长安\":[108.913575,34.164695],\n\"新城\":[108.967219,34.272934],\n\"灞桥\":[109.07085,34.279015],\n\"高陵\":[109.094706,34.541226],\n\"莲湖\":[108.950637,34.271061],\n\"阎良\":[109.232619,34.668335],\n\"临潼\":[109.220554,34.37291],\n\"鄠邑\":[108.611571,34.114989],\n\"周至\":[108.228573,34.169839],\n\"蓝田\":[109.329952,34.157778],\n\"宝鸡\":[107.245006,34.368678],\n\"渭滨\":[107.161521,34.361527],\n\"金台\":[107.153218,34.382289],\n\"陈仓\":[107.375445,34.356308],\n\"扶风\":[107.906699,34.381794],\n\"岐山\":[107.627564,34.449507],\n\"眉县\":[107.756557,34.280563],\n\"千阳\":[107.13878,34.648474],\n\"凤翔\":[107.406797,34.527821],\n\"凤县\":[106.522538,33.916866],\n\"陇县\":[106.870884,34.89873],\n\"麟游\":[107.799906,34.683862],\n\"太白\":[107.325338,34.064339],\n\"咸阳\":[108.715691,34.33623],\n\"渭城\":[108.742912,34.367889],\n\"秦都\":[108.712639,34.335842],\n\"长武\":[107.805531,35.212373],\n\"兴平\":[108.496721,34.306091],\n\"三原\":[108.947201,34.623457],\n\"彬县\":[108.0839,35.049651],\n\"礼泉\":[108.43171,34.48751],\n\"乾县\":[108.24587,34.534357],\n\"泾阳\":[108.84907,34.532893],\n\"旬邑\":[108.340139,35.118146],\n\"永寿\":[108.148304,34.698214],\n\"武功\":[108.20673,34.266199],\n\"淳化\":[108.587044,34.805112],\n\"铜川\":[108.951107,34.903559],\n\"宜君\":[109.123488,35.404485],\n\"耀州\":[108.986375,34.916013],\n\"王益\":[109.082021,35.07574],\n\"印台\":[109.106103,35.120717],\n\"渭南\":[109.477759,34.526339],\n\"临渭\":[109.516711,34.505352],\n\"蒲城\":[109.592584,34.961492],\n\"大荔\":[109.948432,34.803364],\n\"富平\":[109.187145,34.757921],\n\"合阳\":[110.155374,35.243853],\n\"潼关\":[110.253071,34.550695],\n\"华州\":[109.782751,34.502233],\n\"华阴\":[110.098735,34.572061],\n\"澄城\":[109.938652,35.196836],\n\"白水\":[109.597158,35.183732],\n\"延安\":[109.501131,36.657779],\n\"宝塔\":[109.495912,36.591103],\n\"子长\":[109.681506,37.148833],\n\"志丹\":[108.775026,36.828077],\n\"延长\":[110.018798,36.585417],\n\"安塞\":[109.335915,36.870928],\n\"富县\":[109.386291,35.993443],\n\"延川\":[110.20022,36.883942],\n\"吴起\":[108.182847,36.933403],\n\"甘泉\":[109.357569,36.282636],\n\"洛川\":[109.438806,35.768517],\n\"宜川\":[110.175324,36.056538],\n\"黄陵\":[109.269558,35.585363],\n\"黄龙\":[109.846897,35.590475],\n\"榆林\":[110.745971,37.458561],\n\"榆阳\":[109.727434,38.282811],\n\"神木\":[110.505581,38.848872],\n\"定边\":[107.607629,37.60047],\n\"靖边\":[108.800969,37.605237],\n\"米脂\":[110.190398,37.76144],\n\"横山\":[109.300202,37.968415],\n\"吴堡\":[110.745971,37.458561],\n\"绥德\":[110.269615,37.509221],\n\"佳县\":[110.498039,38.025491],\n\"府谷\":[111.073868,39.034206],\n\"子洲\":[110.041678,37.616774],\n\"清涧\":[110.127968,37.094767],\n\"汉中\":[107.02971,33.072645],\n\"汉台\":[107.038309,33.073634],\n\"洋县\":[107.552117,33.228817],\n\"西乡\":[107.772819,32.989321],\n\"镇巴\":[107.901402,32.542965],\n\"城固\":[107.340399,33.162638],\n\"南郑\":[106.942791,33.006012],\n\"略阳\":[106.163136,33.333269],\n\"勉县\":[106.679562,33.159541],\n\"宁强\":[106.263521,32.835684],\n\"留坝\":[106.927174,33.623905],\n\"佛坪\":[107.997301,33.530647],\n\"安康\":[109.03593,32.690514],\n\"汉滨\":[109.033557,32.701137],\n\"汉阴\":[108.514982,32.898963],\n\"镇坪\":[109.533268,31.889699],\n\"平利\":[109.368851,32.395186],\n\"旬阳\":[109.371756,32.839933],\n\"白河\":[110.118933,32.81482],\n\"石泉\":[108.254359,33.044548],\n\"紫阳\":[108.540783,32.52594],\n\"宁陕\":[108.320956,33.316162],\n\"岚皋\":[108.908825,32.312831],\n\"商洛\":[109.924943,33.880181],\n\"商州\":[109.947619,33.869081],\n\"商南\":[110.88801,33.53819],\n\"镇安\":[109.159389,33.429495],\n\"柞水\":[109.120703,33.691993],\n\"山阳\":[109.888618,33.538088],\n\"丹凤\":[110.334104,33.701881],\n\"洛南\":[110.154755,34.097084],\n};\n\nvar data = [\n    {name:\"西安\",value:252},\n{name:\"雁塔\",value:253},\n{name:\"碑林\",value:254},\n{name:\"未央\",value:255},\n{name:\"长安\",value:256},\n{name:\"新城\",value:257},\n{name:\"灞桥\",value:258},\n{name:\"高陵\",value:259},\n{name:\"莲湖\",value:260},\n{name:\"阎良\",value:261},\n{name:\"临潼\",value:262},\n{name:\"鄠邑\",value:263},\n{name:\"周至\",value:264},\n{name:\"蓝田\",value:265},\n{name:\"宝鸡\",value:266},\n{name:\"渭滨\",value:267},\n{name:\"金台\",value:268},\n{name:\"陈仓\",value:269},\n{name:\"扶风\",value:270},\n{name:\"岐山\",value:271},\n{name:\"眉县\",value:272},\n{name:\"千阳\",value:273},\n{name:\"凤翔\",value:274},\n{name:\"凤县\",value:275},\n{name:\"陇县\",value:276},\n{name:\"麟游\",value:277},\n{name:\"太白\",value:278},\n{name:\"咸阳\",value:279},\n{name:\"渭城\",value:280},\n{name:\"秦都\",value:281},\n{name:\"长武\",value:282},\n{name:\"兴平\",value:283},\n{name:\"三原\",value:284},\n{name:\"彬县\",value:285},\n{name:\"礼泉\",value:286},\n{name:\"乾县\",value:287},\n{name:\"泾阳\",value:288},\n{name:\"旬邑\",value:289},\n{name:\"永寿\",value:290},\n{name:\"武功\",value:291},\n{name:\"淳化\",value:292},\n{name:\"铜川\",value:293},\n{name:\"宜君\",value:294},\n{name:\"耀州\",value:295},\n{name:\"王益\",value:296},\n{name:\"印台\",value:297},\n{name:\"渭南\",value:298},\n{name:\"临渭\",value:299},\n{name:\"蒲城\",value:300},\n{name:\"大荔\",value:301},\n{name:\"富平\",value:302},\n{name:\"合阳\",value:303},\n{name:\"潼关\",value:304},\n{name:\"华州\",value:305},\n{name:\"华阴\",value:306},\n{name:\"澄城\",value:307},\n{name:\"白水\",value:308},\n{name:\"延安\",value:309},\n{name:\"宝塔\",value:310},\n{name:\"子长\",value:311},\n{name:\"志丹\",value:312},\n{name:\"延长\",value:313},\n{name:\"安塞\",value:314},\n{name:\"富县\",value:315},\n{name:\"延川\",value:316},\n{name:\"吴起\",value:317},\n{name:\"甘泉\",value:318},\n{name:\"洛川\",value:319},\n{name:\"宜川\",value:320},\n{name:\"黄陵\",value:321},\n{name:\"黄龙\",value:322},\n{name:\"榆林\",value:323},\n{name:\"榆阳\",value:324},\n{name:\"神木\",value:325},\n{name:\"定边\",value:326},\n{name:\"靖边\",value:327},\n{name:\"米脂\",value:328},\n{name:\"横山\",value:329},\n{name:\"吴堡\",value:330},\n{name:\"绥德\",value:331},\n{name:\"佳县\",value:332},\n{name:\"府谷\",value:333},\n{name:\"子洲\",value:334},\n{name:\"清涧\",value:335},\n{name:\"汉中\",value:336},\n{name:\"汉台\",value:337},\n{name:\"洋县\",value:338},\n{name:\"西乡\",value:339},\n{name:\"镇巴\",value:340},\n{name:\"城固\",value:341},\n{name:\"南郑\",value:342},\n{name:\"略阳\",value:343},\n{name:\"勉县\",value:344},\n{name:\"宁强\",value:345},\n{name:\"留坝\",value:346},\n{name:\"佛坪\",value:347},\n{name:\"安康\",value:348},\n{name:\"汉滨\",value:349},\n{name:\"汉阴\",value:350},\n{name:\"镇坪\",value:351},\n{name:\"平利\",value:352},\n{name:\"旬阳\",value:353},\n{name:\"白河\",value:354},\n{name:\"石泉\",value:355},\n{name:\"紫阳\",value:356},\n{name:\"宁陕\",value:357},\n{name:\"岚皋\",value:358},\n{name:\"商洛\",value:359},\n{name:\"商州\",value:360},\n{name:\"商南\",value:361},\n{name:\"镇安\",value:362},\n{name:\"柞水\",value:363},\n{name:\"山阳\",value:364},\n{name:\"丹凤\",value:365},\n{name:\"洛南\",value:366},\n];\n\nvar convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nvar convertedData = [\n    convertData(data),\n    convertData(data.sort(function (a, b) {\n        return b.value - a.value;\n    }).slice(0, 6))\n];\n\n\noption = {\n    backgroundColor: '#404a59',\n    animation: true,\n    animationDuration: 1000,\n    animationEasing: 'cubicInOut',\n    animationDurationUpdate: 1000,\n    animationEasingUpdate: 'cubicInOut',\n   tooltip: {\n        trigger: 'item',\n        formatter: function(params) {\n            return params.name + ' 发明专利: ' + params.value[2];\n        }\n    },\n   \n    title: [\n       {\n        text: '陕西省2017年企业发明专利分析图',\n        subtext: 'data from CAIP',\n        sublink: '',\n        left: 'center',\n        textStyle: {\n            color: '#000000',\n            size: 10,\n        }\n    },\n    \n        {\n            id: 'statistic',\n            right: 120,\n            top: 40,\n            width: 100,\n            textStyle: {\n                color: '#fff',\n                fontSize: 16\n            }\n        }\n    ],\n    toolbox: {\n        iconStyle: {\n            normal: {\n                borderColor: '#fff'\n            },\n            emphasis: {\n                borderColor: '#b1e4ff'\n            }\n        },\n        feature: {\n            dataZoom: {},\n            brush: {\n                type: ['rect', 'polygon', 'clear']\n            },\n            saveAsImage : {show: true}\n        }\n    },\n    brush: {\n        outOfBrush: {\n            color: '#abc'\n        },\n        brushStyle: {\n            borderWidth: 2,\n            color: 'rgba(0,0,0,0.2)',\n            borderColor: 'rgba(0,0,0,0.5)',\n        },\n        seriesIndex: [0, 1],\n        throttleType: 'debounce',\n        throttleDelay: 300,\n        geoIndex: 0\n    },\n    geo: {\n        map: '陕西',\n        left: '10',\n        right: '35%',\n        center: [108, 35.5],\n        zoom: 5,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true,\n        mapStyle: {\n            styleJson:\n\n                [{\n                        \"featureType\": \"water\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n\n                        }\n                    },\n                    {\n                        \"featureType\": \"land\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"boundary\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"railway\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"lightness\": 20,\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n\n                        }\n                    },\n\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"labels\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"poi\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"green\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"color\": \"#056197\",\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"subway\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"manmade\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"local\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"labels\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"boundary\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"color\": \"#029fd4\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"building\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"saturation\": -100\n                        }\n                    },\n                    {\n                        \"featureType\": \"label\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n\n                        }\n                    }\n                ]\n        }\n    },\n    grid: {\n        right: 40,\n        top: 100,\n        bottom: 40,\n        width: '30%'\n    },\n    xAxis: {\n        type: 'value',\n        scale: true,\n        position: 'top',\n        boundaryGap: false,\n        splitLine: {show: false},\n        axisLine: {show: false},\n        axisTick: {show: false},\n        axisLabel: {margin: 2, textStyle: {color: '#aaa'}},\n    },\n    yAxis: {\n        type: 'category',\n        name: 'TOP 20',\n        nameGap: 16,\n        axisLine: {show: false, lineStyle: {color: '#ddd'}},\n        axisTick: {show: false, lineStyle: {color: '#ddd'}},\n        axisLabel: {interval: 0, textStyle: {color: '#ddd'}},\n        data: []\n    },\n    series : [\n        {\n            name: '2017陕西专利情况统计汇总',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertedData[0],\n            symbolSize: function (val) {\n                return Math.max(val[2] / 20, 8);\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: false\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#ddb926'\n                }\n            }\n        },\n        {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: convertedData[1],\n            symbolSize: function (val) {\n                return Math.max(val[2] / 20, 2);\n            },\n            showEffectOn: 'emphasis',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#f4e925',\n                    shadowBlur: 2,\n                    shadowColor: '#333'\n                }\n            },\n            zlevel: 1\n        },\n        {\n            id: 'bar',\n            zlevel: 2,\n            type: 'bar',\n            symbol: 'none',\n            itemStyle: {\n                normal: {\n                    color: '#ddb926'\n                }\n            },\n            data: []\n        }\n    ]\n};\n\n\nmyChart.on('brushselected', renderBrushed);\n\n// myChart.setOption(option);\n\nsetTimeout(function () {\n    myChart.dispatchAction({\n        type: 'brush',\n        areas: [\n            {\n                geoIndex: 0,\n                brushType: 'polygon',\n                coordRange: [[108.531376,34.202873],[108.521027,34.067096],[108.521027,34.067096],[109.406397,34.058483],[109.506432,34.13788],[109.339707,34.562282],[109.376501,34.719093],[109.135037,34.712446],[108.791237,34.320305],[108.624512,34.243945]]\n            }\n        ]\n    });\n}, 0);\n\n\nfunction renderBrushed(params) {\n    var mainSeries = params.batch[0].selected[0];\n\n    var selectedItems = [];\n    var categoryData = [];\n    var barData = [];\n    var maxBar = 30;\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < mainSeries.dataIndex.length; i++) {\n        var rawIndex = mainSeries.dataIndex[i];\n        var dataItem = convertedData[0][rawIndex];\n        var pmValue = dataItem.value[2];\n\n        sum += pmValue;\n        count++;\n\n        selectedItems.push(dataItem);\n    }\n\n    selectedItems.sort(function (a, b) {\n        return a.value[2] - b.value[2];\n    });\n\n    for (var i = 0; i < Math.min(selectedItems.length, maxBar); i++) {\n        categoryData.push(selectedItems[i].name);\n        barData.push(selectedItems[i].value[2]);\n    }\n\n    this.setOption({\n        yAxis: {\n            data: categoryData\n        },\n        xAxis: {\n            axisLabel: {show: !!count}\n        },\n        title: {\n            id: 'statistic',\n            text: count ? '平均: ' + (sum / count).toFixed(4) : ''\n        },\n        series: {\n            id: 'bar',\n            data: barData\n        }\n    });\n}","html":"","externalScripts":"/dep/echarts/map/js/china.js,/dep/echarts/latest/extension/bmap.min.js,http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM","updaterUID":"bd-53374760","theme":"","layout":"","viewCount":573,"userName":"coffee11168","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1cqcMvBM.png?v=1516956117909","isCustomThumbnail":0,"builtinTags":["brush","category-work","dataZoom","geo","grid","series-bar","series-effectScatter","series-scatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"coffee11168"}}