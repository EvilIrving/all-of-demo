{"status":0,"data":{"cid":"xHk7xGg577","authorUid":"bd-34533374","authorUserName":"m***g","title":"风险城市分布图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-07-16T10:22:35.000Z","lastUpdateTime":"2018-07-16T10:22:35.000Z","auth":2,"uid":"bd-34533374","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-16T10:22:35.000Z","code":"\r\nvar mapName = 'china'\r\n    \r\nvar data = [\r\n    {name: '杭州', pName: '浙江', value: [120.219375, 30.259244, 125]},\r\n    {name: '宁波', pName: '浙江', value: [121.579006, 29.885259, 55]},\r\n    {name: '合肥', pName: '安徽', value: [117.282699, 31.866942, 36]},\r\n    {name: \"黄山市\", pName: '安徽', value: [118.29357, 29.734435, 125]},\r\n    {name: '南京', pName: '江苏', value: [118.778074, 32.057236, 78]},\r\n    {name: '苏州', pName: '江苏', value: [120.619907, 31.317987, 69]},\r\n    {name: '成都', pName: '四川', value: [104.067923, 30.679943, 100]},\r\n    {name: '广东', pName: '广东', value: [113.394818, 23.408004, 36]},\r\n    {name: '深圳', pName: '广东', value: [114.025974, 22.546054, 58]}\r\n]\r\n    \r\nvar provinces = [\r\n    {name:\"北京\"},\r\n    {name:\"天津\"},\r\n    {name:\"河北\"},\r\n    {name:\"山西\"},\r\n    {name:\"内蒙古\"},\r\n    {name:\"辽宁\"},\r\n    {name:\"吉林\"},\r\n    {name:\"黑龙江\"},\r\n    {name:\"上海\"},\r\n    {name:\"江苏\"},\r\n    {name:\"浙江\"},\r\n    {name:\"安徽\"},\r\n    {name:\"福建\"},\r\n    {name:\"江西\"},\r\n    {name:\"山东\"},\r\n    {name:\"河南\"},\r\n    {name:\"湖北\"},\r\n    {name:\"湖南\"},\r\n    {name:\"重庆\"},\r\n    {name:\"四川\"},\r\n    {name:\"贵州\"},\r\n    {name:\"云南\"},\r\n    {name:\"西藏\"},\r\n    {name:\"陕西\"},\r\n    {name:\"甘肃\"},\r\n    {name:\"青海\"},\r\n    {name:\"宁夏\"},\r\n    {name:\"新疆\"},\r\n    {name:\"广东\"},\r\n    {name:\"广西\"},\r\n    {name:\"海南\"},\r\n];\r\n\r\nprovinces.forEach(item => {\r\n    item.value = data\r\n                    .filter(item2 => item2.pName === item.name)\r\n                    .reduce((pre, curr) => curr.value[2]+pre, 0)\r\n})\r\n\r\nprovinces.sort((a, b) => {\r\n    return b.value - a.value\r\n})\r\n\r\nconsole.log(provinces)\r\n    \r\nvar colors = ['#f15a24', '#f47b28', '#f89d2c', '#fcaa2f', '#fccc21'].reverse()\r\n    \r\n\r\nvar max = provinces[0].value,\r\n    min = 0;\r\n\r\noption = {\r\n    title: {\r\n        text: '风险城市分布图',\r\n        x: 'center',\r\n        textStyle: {\r\n            color: \"#999\",\r\n            fontSize: 24\r\n        }\r\n    },\r\n    \r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function(params){\r\n            var toolTiphtml = ''\r\n\r\n            for(var i = 0;i<data.length;i++){\r\n                if(params.name==data[i].name){\r\n                    toolTiphtml += data[i].name+' : ' + data[i].value[2]\r\n                }\r\n            }\r\n            return toolTiphtml\r\n           \r\n        }\r\n    },\r\n \r\n    visualMap: {\r\n        show: true,\r\n        min: 0,\r\n        max: max,\r\n        text: ['高', '低'],\r\n        calculable: true,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n            color: ['#ddfdfe', '#2686e2']\r\n        }\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: '#3B5077',\r\n            },\r\n            emphasis: {\r\n                // 鼠标滑过展示的区域颜色\r\n                areaColor: 'pink',\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n            name: '散点',\r\n            \r\n            type: 'scatter',\r\n            \r\n            coordinateSystem: 'geo',\r\n            \r\n            data: data,\r\n            \r\n            // 散点大小\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            \r\n            // 散点旁边的文案\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    color: '#000',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false\r\n                }\r\n            },\r\n            \r\n            // 散点的样式\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'yellow'\r\n                }\r\n            }\r\n        },\r\n        {\r\n            type: 'map',\r\n            map: mapName,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            \r\n           \r\n            data: provinces\r\n        },\r\n        \r\n        {\r\n            name: 'Top 5',\r\n            \r\n            silent: true,\r\n            \r\n            type: 'effectScatter',\r\n            \r\n            coordinateSystem: 'geo',\r\n            \r\n            data: data.slice(0, 5),\r\n            \r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n\r\n            \r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n \r\n            \r\n            itemStyle: {\r\n               \r\n                normal: {\r\n                    color: function(val) {\r\n                        return colors[val.dataIndex]\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n    ]\r\n};\r\nmyChart.setOption(option);","html":"","externalScripts":"","updaterUID":"bd-34533374","theme":"","layout":"","viewCount":208,"userName":"m***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHk7xGg577.png?v=1531736555534","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"m***g"}}