{"status":0,"data":{"cid":"xMvZJN8l4O","authorUid":"bd-1833292178","authorUserName":"和***长","title":"timeline-markpoint","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-07-30T08:46:44.000Z","lastUpdateTime":"2019-07-30T08:46:44.000Z","auth":1,"uid":"bd-1833292178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-30T09:49:06.000Z","code":"var data0 = [0, 0, 0, 0, 0, 0, 0]\nvar data = [60, 85, 110, 160, 90, 80, 190]\nvar xdata = ['06-02', '06-03', '06-04', '06-05', '06-06', '06-07', '06-08']\nvar color = ['#EAEAEA', '#454545', '#000000']\n// 定义变量xIndex 表示X轴序号, Ymonth 表示柱状图的label值\nvar xIndex,Ymonth\n\n\nvar markArr = [],\n    temObj = null;\ndata.forEach(function(v, i) {\n        \n        temObj = {\n            value: v,\n            xAxis: i,\n            yAxis: v\n        }\n\n    markArr.push(temObj)\n});\n\noption = {\n    // backgroundColor: color[2],\n    // 关闭提示框, 替换为柱状图的点击事件\n    tooltip: {\n        trigger: \"none\"\n    },\n \n    grid: {\n        left: \"10%\",\n        top: \"35%\",\n        bottom: \"10%\",\n        right: \"10%\",\n        containLabel: true\n    },\n     dataZoom: [{\n            type: 'slider',\n            show: true,\n            height: 20,\n            left: '10%',\n            right: '10%',\n            bottom: '6%',\n            start: 50,\n            end: 100,\n            textStyle: {\n                 color:'rgba(0,0,0,.7)',\n                fontSize: 12,\n            },\n        }, {\n            type: 'inside'\n        }\n\n    ],\n    xAxis: {\n        data: xdata,\n        type: 'category',\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            color:'rgba(0,0,0,.7)',\n            // color: color[1],\n            fontSize: 14,\n            margin: 20\n        }\n    },\n    yAxis: {\n        type: 'value',\n        splitNumber: 4,\n        interval: 50,\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color:'rgba(0,0,0,.7)',\n                // color: color[1],\n                type: 'dashed'\n            }\n        },\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            color:'rgba(0,0,0,.7)',\n            // color: color[1],\n            fontSize: 14\n        }\n    },\n    series: [{\n            type: 'bar',\n            barWidth: 2,\n            data: data,\n           \n           color:'rgba(0,0,0,.7)',\n            label: {\n                show: true,\n                position: 'top',\n                // 标签刻度值位置\n                offset: [0, -15],\n                fontSize: 16,\n                formatter: function(params) {\n                    // 判断收益是否大于0, 或者是否对应当前数据\n                    if(params.value === 0 || params.value !== Ymonth) {\n                        return ''\n                    } else {\n                        return params.value\n                    }\n                }\n            },\n            markPoint:{\n                symbol:'rect',\n                symbolSize:[100,50],\n                symbolOffset:[0, '-50%'],\n                itemStyle:{\n                    normal:{\n                        color:'rgba(0,0,0,.3)',\n                    }\n                },\n                label:{\n                    show:true,\n                    color:'rgba(0,0,0,1)',\n                    formatter:'xxxxxx{c}%'\n                },\n                data:markArr\n            }\n        },\n        // 俩散点图作为圆柱端点\n        {\n            type: 'scatter',\n            symbolSize: 8,\n            itemStyle: {\n                borderWidth: 2.5,\n                borderColor: color[0],\n                color: color[2],\n                opacity: 1\n            },\n            silent: true,\n            data: data0\n        },\n        // {\n        //     type: 'scatter',\n        //     symbolSize: 8,\n        //     itemStyle: {\n        //         borderWidth: 2.5,\n        //         borderColor: color[0],\n        //         color: color[2],\n        //         opacity: 1\n        //     },\n        //     silent: true,\n        //     data: data\n        // }\n\n    ]\n}\n\n// 给每条数据的热区增加点击事件\nmyChart.getZr().on('click', function(params) {\n    var pointInPixel= [params.offsetX, params.offsetY]\n    if (myChart.containPixel('grid', pointInPixel)) {\n        var pointInGrid = myChart.convertFromPixel({seriesIndex: 0}, pointInPixel)\n        // X轴序号\n        xIndex = pointInGrid[0]\n        // 获取当前图表的option\n        var op = myChart.getOption()\n        // 获得图表中我们想要的数据\n        Ymonth = op.series[0].data[xIndex]\n        // console.log('点击了第' + xIndex + '条数据')\n        myChart.setOption({\n            xAxis: [{\n                axisLabel: {\n                    color: function(value, index) {\n                        return index === xIndex ? color[0] : color[1]\n                    }\n                }\n            }]\n        })\n    }\n})","html":"","externalScripts":"","updaterUID":"bd-1833292178","theme":"","layout":"","viewCount":201,"userName":"和***长","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xMvZJN8l4O.png?v=1564480146372","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","markPoint","series-bar","series-scatter","tooltip"],"customTags":[],"updaterUserName":"和***长"}}