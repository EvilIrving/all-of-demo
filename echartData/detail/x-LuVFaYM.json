{"status":0,"data":{"cid":"x-LuVFaYM","authorUid":"bd-1173760549","authorUserName":"R***v","title":"网络攻击图","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2019-12-21T10:15:40.000Z","lastUpdateTime":"2019-12-21T10:15:40.000Z","auth":2,"uid":"bd-1173760549","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-24T11:54:23.000Z","code":"var geoCoordMap = {\n    上海: [121.4648, 31.2891],\n    美国洛杉矶: [-118.24311, 34.052713],\n    香港邦泰: [114.195466, 22.282751],\n    美国芝加哥: [-87.801833, 41.870975],\n    美国加州: [-121.910642, 41.38028],\n    澳大利亚墨尔本: [144.999416, -37.781726],\n    墨西哥: [-99.094092, 19.365711],\n    加拿大温哥华: [-123.023921, 49.311753]\n};\nvar BJData = [\n    [{name:\"美国洛杉矶\",value:2370}, {name: \"上海\"}],\n    [{name: \"香港邦泰\",value: 7000}, {name: \"上海\"}],\n    [{name: \"美国芝加哥\",value: 2350}, {name: \"上海\"}],\n    [{name: \"美国加州\",value: 3590}, {name: \"上海\"}],\n    [{name: \"澳大利亚墨尔本\",value: 3590}, {name: \"上海\"}],\n    [{name: \"墨西哥\",value: 4000}, {name: \"上海\"}],\n    [{name: \"加拿大温哥华\",value: 5000}, {name: \"上海\"}]\n];\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (fromCoord && toCoord) {\n            res.push({\n                fromName: dataItem[0].name,\n                toName: dataItem[1].name,\n                coords: [fromCoord, toCoord],\n                value: dataItem[0].value\n            });\n        }\n    }\n    return res;\n};\n\nvar series = [];\n[\n    [\"上海\", BJData]\n].forEach(function(item, i) {\n    series.push({\n            name: item[2],\n            type: \"lines\",\n            zlevel: 2,\n            effect: {\n                show: true,\n                // color: \"#ffffff\",\n                period: 4, //箭头指向速度，值越小速度越快\n                trailLength: 0.05, //特效尾迹长度[0,1]值越大，尾迹越长重\n                symbol: \"arrow\", //箭头图标\n                symbolSize: 5 //图标大小\n            },\n            lineStyle: {\n                normal: {\n                    width: 1, //尾迹线条宽度\n                    opacity: 0.05, //尾迹线条透明度\n                    curveness: 0.3 //尾迹线条曲直度\n                }\n            },\n            label: {\n                normal: {\n                    show: false,\n                    position: 'middle',\n                    formatter: '{b}'\n                }\n            },\n            data: convertData(item[1])\n        }, {\n            type: \"effectScatter\",\n            coordinateSystem: \"geo\",\n            zlevel: 2,\n            rippleEffect: {\n                //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: \"right\", //显示位置\n                    offset: [5, 0], //偏移设置\n                    formatter: \"{b}\", //圆环显示文字\n                    textStyle: {\n                        color: \"red\"\n                    }\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: \"circle\",\n            symbolSize: function(val) {\n                return 4 + val[2] / 1000; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: false\n                }\n            },\n            data: item[1].map(function(dataItem) {\n                return {\n                    name: dataItem[0].name,\n                    value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])\n                };\n            })\n        },\n        //被攻击点\n        {\n            type: \"effectScatter\",\n            coordinateSystem: \"geo\",\n            zlevel: 3,\n            rippleEffect: {\n                //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: \"right\",\n                    color: \"#00ffff\",\n                    formatter: \"{b}\",\n                    textStyle: {\n                        color: \"#00ffff\"\n                    }\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: \"circle\",\n            symbolSize: 15,\n            itemStyle: {\n                normal: {\n                    show: false,\n                }\n            },\n            data: [{\n                name: item[0],\n                // concat([10000])决定图例的颜色\n                value: geoCoordMap[item[0]].concat([10000])\n            }]\n        }\n    );\n});\n\noption = {\n    backgroundColor: '#1B2631',\n    tooltip: {\n        trigger: \"item\",\n        formatter: function(params, ticket, callback) {\n            if (params.seriesType == \"effectScatter\") {\n                return params.marker+params.data.name + \"\" + params.data.value[2];\n            } else if (params.seriesType == \"lines\") {\n                return params.data.fromName + \" -> \" + params.data.toName + \"<br />\" + params.data.value;\n            } else {\n                return params.name;\n            }\n        }\n        // backgroundColor: \"#1540a1\",\n        // borderColor: \"#FFFFCC\",\n        // showDelay: 0,\n        // hideDelay: 0,\n        // enterable: true,\n        // transitionDuration: 0,\n        // extraCssText: \"z-index:100\",\n        // formatter: function(params, ticket, callback) {\n        //     //根据业务自己拓展要显示的内容\n        //     var res = \"\";\n        //     var name = params.name;\n        //     var value = params.value[params.seriesIndex + 1];\n        //     res =\n        //         \"<span style='color:#fff;'>\" +\n        //         name +\n        //         \"</span><br/>数据：\" +\n        //         value;\n        //     return res;\n        // }\n    },\n    legend: {\n        show: true,\n        orient: 'vertical',\n        top: 'bottom',\n        left: 'right',\n        data: ['北京 Top10', '上海 Top10', '广州 Top10'],\n        textStyle: {\n            color: '#fff'\n        },\n        selectedMode: 'single'\n    },\n    visualMap: {\n        //图例值控制\n        min: 0,\n        max: 10000,\n        show: true,\n        calculable: true,\n        // 图例颜色\n        color: [\"#0bc7f3\", \"red\", \"#FFFF00\"],\n        textStyle: {\n            color: \"#fff\"\n        },\n    },\n    geo: {\n        map: \"world\",\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true, //是否允许缩放\n        layoutCenter: [\"50%\", \"50%\"], //地图位置\n        layoutSize: \"180%\",\n        itemStyle: {\n            normal: {\n                color: \"#000\", //地图背景色\n                borderColor: \"#5bc1c9\" //省市边界线\n            },\n            emphasis: {\n                color: \"rgba(37, 43, 61, .5)\" //悬浮背景\n            }\n        }\n    },\n\n    series: series\n};","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-1173760549","theme":"","layout":"","viewCount":1418,"userName":"R***v","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-LuVFaYM.png?v=1582545263801","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","tooltip","visualMap"],"customTags":[],"updaterUserName":"R***v"}}