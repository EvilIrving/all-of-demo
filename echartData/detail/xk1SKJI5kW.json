{"status":0,"data":{"cid":"xk1SKJI5kW","authorUid":"bd-3966635089","authorUserName":"s***C","title":"堆叠图数据循环","description":"1111","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-09T10:46:43.000Z","lastUpdateTime":"2020-06-09T10:46:43.000Z","auth":2,"uid":"bd-3966635089","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-09T10:46:43.000Z","code":"let sData = [\r\n     {\r\n        name: '注意',\r\n        data: [20],\r\n        color: '#e12424'\r\n      }, {\r\n        name: '警告',\r\n        data: [30],\r\n        color: '#ff9805'\r\n      }, {\r\n        name: '危险',\r\n        data: [50],\r\n        color: '#12cbf6'\r\n      }\r\n]\r\nlet series = []\r\nsData.forEach((item)=>{\r\n        series.push({\r\n            type: 'bar',\r\n            name: item.name,\r\n            stack: '2',\r\n            label: {\r\n                normal: {\r\n                    show:true,\r\n                    position: 'inside',\r\n                    formatter: '{c}%',\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 16\r\n                    }\r\n                }\r\n            },\r\n            barWidth: 40,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: item.color\r\n                }\r\n            },\r\n            data: item.data\r\n    \r\n        }) \r\n})\r\n// console.log('series',series)\r\noption = {\r\n    backgroundColor: '#091034',\r\n    legend: {\r\n        top:'0',\r\n        data: ['注意', '警告', '危险'],\r\n        textStyle: {\r\n            color: '#ccc'\r\n        }\r\n    },\r\n    grid: {\r\n        containLabel: true,\r\n        left: 10,\r\n        right: 10,\r\n    },\r\n    tooltip: {},\r\n    xAxis: {\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLabel:{\r\n            show:false\r\n        }\r\n\r\n    },\r\n    yAxis: {\r\n        data: ['告警等级'],\r\n        axisLabel: {\r\n            fontSize: 16,\r\n            color: '#fff'\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    series:\r\n    series\r\n    //  [{\r\n    //     type: 'bar',\r\n    //     name: '注意',\r\n    //     stack: '2',\r\n    //     label: {\r\n    //         normal: {\r\n    //             show:true,\r\n    //             position: 'inside',\r\n    //             formatter:function(params){\r\n    //                 let total = 200\r\n    //                 let percent = 0\r\n                    \r\n    //                  for (var i = 0; i < 3; i++) {\r\n    //                          total += Number(series[i].data); //总值的问题（总值要等于点量的图例的值）\r\n    //                       }\r\n    //                 percent = ((params.value / total) * 100).toFixed(0) + '%';\r\n    //                 return percent\r\n    //                  },\r\n    //             textStyle: {\r\n    //                 color: '#fff',\r\n    //                 fontSize: 16\r\n    //             }\r\n    //         }\r\n    //     },\r\n    //     barWidth: 40,\r\n    //     itemStyle: {\r\n    //         normal: {\r\n    //             color: '#3694ff'\r\n    //         },\r\n    //     },\r\n    //     data: [10]\r\n    // }, {\r\n    //     type: 'bar',\r\n    //     name: '危险',\r\n    //     stack: '2',\r\n    //     label: {\r\n    //         normal: {\r\n    //             show:true,\r\n    //             position: 'inside',\r\n    //             formatter: '{c}%',\r\n    //             textStyle: {\r\n    //                 color: '#fff',\r\n    //                 fontSize: 16\r\n    //             }\r\n    //         }\r\n    //     },\r\n    //     barWidth: 40,\r\n    //     itemStyle: {\r\n    //         normal: {\r\n    //             color: '#e02020'\r\n    //         }\r\n    //     },\r\n    //     data: [30]\r\n    // }, {\r\n    //     type: 'bar',\r\n    //     name: '警告',\r\n    //     stack: '2',\r\n    //     label: {\r\n    //         normal: {\r\n    //             show:true,\r\n    //             position: 'inside',\r\n    //             formatter: '{c}%',\r\n    //             textStyle: {\r\n    //                 color: '#fff',\r\n    //                 fontSize: 16\r\n    //             }\r\n    //         }\r\n    //     },\r\n    //     barWidth: 40,\r\n    //     itemStyle: {\r\n    //         normal: {\r\n    //             color: '#f7b500'\r\n    //         }\r\n    //     },\r\n    //     data: [30]\r\n    // }]\r\n}","html":"","externalScripts":"","updaterUID":"bd-3966635089","theme":"","layout":"","viewCount":239,"userName":"s***C","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xk1SKJI5kW.png?v=1591699603326","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"s***C"}}