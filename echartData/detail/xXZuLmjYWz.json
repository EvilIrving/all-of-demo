{"status":0,"data":{"cid":"xXZuLmjYWz","authorUid":"bd-1027481994","authorUserName":"銭***","title":"矿石填充","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-04-23T09:01:40.000Z","lastUpdateTime":"2019-04-23T09:01:40.000Z","auth":2,"uid":"bd-1027481994","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-04-30T16:16:12.000Z","code":"var data = {\r\n    \"masterRoomCnt\": 7000,\r\n    \"receiveRoomCnt\": 5000,\r\n    \"title\": \"年 Kg\"\r\n}\r\nvar textData, receiveRoomCnt, masterRoomCnt, faultRoomCnt, titleText;\r\n\r\nreceiveRoomCnt = data.receiveRoomCnt;\r\nmasterRoomCnt = data.masterRoomCnt;\r\nfaultRoomCnt = 0;\r\ntextData = receiveRoomCnt + masterRoomCnt;\r\ntitleText = data.title;\r\n\r\nvar faultMax = Math.max.call(receiveRoomCnt, masterRoomCnt, faultRoomCnt);\r\nfaultMax = faultMax * 1.2;\r\nvar circleData = function(val) {\r\n    let total = faultMax;\r\n    let count = val;\r\n    let shadeCount;\r\n    let noneCount = faultMax * 0.25;\r\n    if (val > total) {\r\n        count = total;\r\n        shadeCount = 0;\r\n    } else if (val == 0) {\r\n        total = 1;\r\n        shadeCount = total * 0.75;\r\n        count = 0;\r\n        noneCount = total * 0.25\r\n    } else {\r\n        shadeCount = total - val;\r\n    }\r\n    return {\r\n        count: count,\r\n        shadeCount: shadeCount,\r\n        noneCount: noneCount,\r\n    }\r\n};\r\n\r\nplaceHolderStyle = {\r\n    normal: {\r\n        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n            offset: 0,\r\n            color: '#181977'\r\n        }, {\r\n            offset: 1,\r\n            color: '#02013B'\r\n        }])\r\n    }\r\n};\r\n\r\noption = {\r\n    backgroundColor: '#0B1A32',\r\n    color: ['#88B3FD', '#2C58C8'],\r\n    title: {\r\n        text: titleText,\r\n        x: 'center',\r\n        y: 'center',\r\n        textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 30,\r\n            fontWeight: 'normal'\r\n        },\r\n        subtextStyle: {\r\n            color: \"rgba(255,255,255,.45)\",\r\n            fontSize: 14,\r\n            fontWeight: 'normal'\r\n        }\r\n    },\r\n    tooltip: {\r\n        show: false,\r\n        trigger: 'item'\r\n    },\r\n    legend: {\r\n        type: 'scroll',\r\n        orient: 'vertical',\r\n        left: '51%',\r\n        top: '26%',\r\n        itemWidth: 10,\r\n        itemHeight: 5,\r\n        itemGap: 30,\r\n        textStyle: {\r\n            color: ['#1bbcfa', '#5beca0'],\r\n            fontSize: 12\r\n        },\r\n        data: ['矿石' + masterRoomCnt + 't', '毛石' + receiveRoomCnt + 't']\r\n    },\r\n    series: [{\r\n        name: '矿石' + masterRoomCnt + 't',\r\n        type: 'pie',\r\n        clockWise: false,\r\n        radius: ['40%', '45%'],\r\n        center: ['50%', '50%'],\r\n        hoverAnimation: false, //鼠标移入变大\r\n        itemStyle: {\r\n            normal: {\r\n                label: {\r\n                    show: false\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                }\r\n            }\r\n        },\r\n        data: [{\r\n                value: circleData(masterRoomCnt).count,\r\n                name: '矿石',\r\n                itemStyle: {\r\n\r\n                    color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                        offset: 0,\r\n                        color: '#88B3FD'\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#57FCE9'\r\n                    }])\r\n                }\r\n            },\r\n            {\r\n                value: circleData(masterRoomCnt).shadeCount,\r\n                name: '',\r\n                itemStyle: placeHolderStyle\r\n            },\r\n            {\r\n                value: circleData(masterRoomCnt).noneCount,\r\n                name: '',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'none',\r\n                        borderColor: 'none'\r\n                    }\r\n                }\r\n            }\r\n        ]\r\n    }, {\r\n        name: '毛石' + receiveRoomCnt + 't',\r\n        type: 'pie',\r\n        clockWise: false,\r\n        hoverAnimation: false,\r\n        radius: ['30%', '35%'],\r\n        center: ['50%', '50%'],\r\n        itemStyle: {\r\n            normal: {\r\n                label: {\r\n                    show: false\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                }\r\n            }\r\n        },\r\n        data: [{\r\n                value: circleData(receiveRoomCnt).count,\r\n                name: '毛石',\r\n                itemStyle: {\r\n\r\n                    color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                        offset: 0,\r\n                        color: '#2C58C8'\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#665AFA'\r\n                    }])\r\n                }\r\n            },\r\n            {\r\n                value: circleData(receiveRoomCnt).shadeCount,\r\n                name: '',\r\n                itemStyle: placeHolderStyle\r\n            },\r\n            {\r\n                value: circleData(receiveRoomCnt).noneCount,\r\n                name: '',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'none',\r\n                        borderColor: 'none'\r\n                    }\r\n                }\r\n            }\r\n        ]\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1027481994","theme":"","layout":"","viewCount":111,"userName":"銭***","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xXZuLmjYWz.png?v=1556640972880","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"銭***"}}