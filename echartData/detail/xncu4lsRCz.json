{"status":0,"data":{"cid":"xncu4lsRCz","authorUid":"bd-2461361090","authorUserName":"鍙***0","title":"全国各省客运作业站点数统计","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-04T08:08:00.000Z","lastUpdateTime":"2020-06-04T08:08:00.000Z","auth":2,"uid":"bd-2461361090","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-04T08:08:00.000Z","code":"sourceData = [\n {'name': '西藏自治区', 'value': 1, 'extData': [1023, '#cfee69', 0, '']},\n {'name': '天津市', 'value': 4, 'extData': [1070, '#d0ed6a', 0, '']},\n {'name': '北京市', 'value': 5, 'extData': [1179, '#d0eb6a', 0, '']},\n {'name': '新疆维吾尔自治区', 'value': 5, 'extData': [2105, '#d3db6d', 0, '']},\n {'name': '青海省区', 'value': 6, 'extData': [2364, '#d4d76e', 0, '']},\n {'name': '上海市', 'value': 7, 'extData': [2965, '#d6cd70', 0, '']},\n {'name': '黑龙江省', 'value': 8, 'extData': [3237, '#d7c871', 0, '']},\n {'name': '云南省', 'value': 8, 'extData': [3375, '#d7c671', 0, '']},\n {'name': '内蒙古自治区', 'value': 9, 'extData': [3467, '#d8c472', 0, '']},\n {'name': '陕西省', 'value': 10, 'extData': [3744, '#d9bf73', 0, '']},\n {'name': '山西省', 'value': 10, 'extData': [4005, '#dabb74', 0, '']},\n {'name': '重庆市', 'value': 11, 'extData': [4040, '#daba74', 0, '']},\n {'name': '吉林省', 'value': 11, 'extData': [4510, '#dbb275', 0, '']},\n {'name': '海南省', 'value': 12, 'extData': [4777, '#dcae76', 0, '']},\n {'name': '甘肃省', 'value': 13, 'extData': [5024, '#ddaa77', 0, '']},\n {'name': '贵州省', 'value': 16, 'extData': [5174, '#dea778', 0, '']},\n {'name': '安徽省', 'value': 20, 'extData': [5179, '#dea778', 0, '']},\n {'name': '河南省', 'value': 23, 'extData': [5463, '#dfa279', 0, '']},\n {'name': '河北省', 'value': 23, 'extData': [5469, '#dfa279', 0, '']},\n {'name': '四川省', 'value': 23, 'extData': [6317, '#e1947b', 0, '']},\n {'name': '湖南省', 'value': 27, 'extData': [6445, '#e2917c', 0, '']},\n {'name': '湖北省', 'value': 27, 'extData': [6583, '#e28f7c', 0, '']},\n {'name': '江西省', 'value': 28, 'extData': [7172, '#e4857e', 0, '']},\n {'name': '广东省', 'value': 28, 'extData': [8533, '#e96e83', 0, '']},\n {'name': '广西壮族自治区', 'value': 30, 'extData': [9370, '#ec6086', 0, '']},\n {'name': '山东省', 'value': 30, 'extData': [9461, '#ec5e86', 0, '']},\n {'name': '浙江省', 'value': 32, 'extData': [9612, '#ed5c87', 0, '']},\n {'name': '辽宁省', 'value': 33, 'extData': [10140, '#ee5388', 0, '']},\n {'name': '福建省', 'value': 35, 'extData': [11558, '#f33b8d', 0, '']},\n {'name': '江苏省', 'value': 35, 'extData': [12260, '#f62f90', 0, '']}]\n\n\ngraphicData = [{\n    type: 'group',\n    left: 'center',\n    top: '60%',\n    bounding: 'raw', //重要，否则内容无法超过组\n    z: 100,\n    children: []\n}]\ngraphicScatter = {\n    type: 'circle',\n    shape: {\n        r: 2\n    },\n    style: {\n        fill: 'white'\n    },\n    z: 100\n}\ngraphicText = [{\n    type: 'text',\n    // left: 'center',\n    // top: 10,\n    z: 100,\n    style: {\n        fill: 'white',\n        text: '韩国',\n        font: 'bold 16px Microsoft YaHei',\n        textAlign: 'center'\n    }\n}, {\n    type: 'text',\n    // left: 'center',\n    // top: 40,\n    z: 100,\n    style: {\n        fill: 'white',\n        text: '5766例',\n        font: 'bold 14px Microsoft YaHei',\n        textAlign: 'center',\n\n    }\n}, {\n    type: 'text',\n    // left: 'center',\n    // top: 70,\n    z: 100,\n    style: {\n        fill: 'white',\n        text: '死亡36例',\n        font: 'bold 12px Microsoft YaHei',\n        textAlign: 'center'\n    }\n}]\ngraphic_total_Text = [{\n    type: 'text',\n    right: -220,\n    bottom: 500,\n    z: 100,\n    style: {\n        fill: 'black',\n        text: '数据时间2018年1月',\n        font: 'bold 12px Microsoft YaHei',\n        textAlign: 'right'\n    }\n}, {\n    type: 'text',\n    right: -220,\n    bottom: 475,\n    z: 100,\n    style: {\n        fill: 'black',\n        text: '中国有586个客运作业站点',\n        font: 'bold 18px Microsoft YaHei',\n        textAlign: 'right',\n\n    }\n}]\ngraphicChildren = {\n    type: 'group',\n    // left: 'center',\n    // top: 'center',\n    position: [],\n    bounding: 'raw',\n    z: 100,\n    children: []\n\n}\n\nfunction convertData1() {\n    var maxScale = 1\n    var minScale = 0.1\n    var stepRadius = 2 * Math.PI / sourceData.length\n    var stepScale = (maxScale - minScale) / sourceData.length\n    for (var i = 0; i < sourceData.length; i++) {\n        sourceData[i].itemStyle = {\n            color: sourceData[i][\"extData\"][1],\n            borderWidth: 0\n        }\n        sourceData[i].label = {\n            show: i > 6 ? false : false,\n            position: i <= 5 ? \"outer\" : \"inside\",\n            // alignTo: \"labelLine\",\n            align: \"right\",\n            borderWidth: 1,\n            borderColor: \"red\",\n            alignTo: \"edge\",\n            margin: 650,\n            formatter: (a) => {\n                return a.data.extData[3]\n            }\n        }\n        sourceData[i].labelLine = {\n            show: i > 6 ? false : false,\n            // length: i <= 5 ? 5 * (i - 5) : 0,\n            // length2: i <= 5 ? 0 : 0,\n            lineStyle: {\n                type: \"dashed\"\n            }\n        }\n        var curRadius = (i + 0.5) * stepRadius\n        // var curArclen = 1\n        var curScale = i > 11 ? minScale + stepScale * (i) : 0.6 + stepScale * (i)\n        var startR = i > 11 ? sourceData[i][\"value\"] * 450 / sourceData.slice(-1)[0][\"value\"] * 0.95 : ((\n            sourceData[i][\"value\"] * 460 / sourceData.slice(-1)[0][\"value\"] + 20))\n        var curR = [startR, startR * (i > 33 ? 0.95 : (i > 11 ? 0.75 : 1.12)), startR * (i > 33 ? 0.95 : (i >\n            11 ? 0.8 : 1.17)) * (i > 33 ? 0.95 :\n            (i > 11 ? 0.8 : 1.17))]\n        var curPositions = []\n        var curChilds = []\n        var curCircles = []\n        for (var j = 0; j < 3; j++) {\n            var curX = Math.sin(curRadius) * curR[j]\n            var curY = -Math.cos(curRadius) * curR[j]\n            curPositions.push([curX, curY])\n            var curChild = JSON.stringify(graphicChildren)\n            curChild = JSON.parse(curChild)\n            curChild.position = [curX, curY]\n            curChild.rotation = i > 33 ? -((i + 0.5) / sourceData.length * 2 * Math.PI) : (i <= 11 ? -((i +\n                0.5) / sourceData.length * 2 * Math.PI) + Math.PI / 2 : 0)\n            curChild.scale = [curScale, curScale]\n            curgraphicText = JSON.parse(JSON.stringify(graphicText[j]))\n            curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? (i > 11 ? sourceData[i][\"value\"] + \"站点\" : \"\") : (j == 2 && i > 33 ? (sourceData[i][\n                \"extData\"\n            ][2] + \"个\") : (i <= 11 ? sourceData[i][\n                \"extData\"\n            ][3] : \"\")))\n            // curgraphicText.style.text = j == 0 ? sourceData[i][\"name\"] : (j == 1 ? i > 11 ? sourceData[i][\n            //     \"extData\"\n            // ][0] + \"例\" : \"\" : i > 33 ? sourceData[i][\n            //     \"extData\"\n            // ][2] + \"例\" : \"\")\n            if (i <= 11) {\n                curgraphicText.style.fill = \"black\"\n                curgraphicText.style.textAlign = \"left\"\n            }\n            curChild.children = [curgraphicText]\n            curChilds.push(curChild)\n            // var curCircle = JSON.parse(JSON.stringify(graphicScatter))\n            // curCircle.position = [curX, curY]\n            // curCircles.push(curCircle)\n            // graphicData[0].children.push(curCircle)\n            graphicData[0].children.push(curChild)\n        }\n        console.log(i, sourceData[i][\"name\"], curRadius, curR, curPositions)\n    }\n    for (var m = 0; m < 3 * 2; m++) {\n        var cur_total_text = graphic_total_Text[m]\n        graphicData[0].children.push(cur_total_text)\n    }\n    return sourceData\n}\n\n\n\noption = {\n    title: {\n        text: '全国各省客运作业站点数统计',\n        // subtext: '纯属虚构',\n        left: 'center',\n        textStyle: {\n            //color: \"red\",\n            fontSize: 38\n        },\n        //backgroundColor: \"rgb(199,16,16)\",\n        top: \"2%\"\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: '{a} <br/>{b} : {c} ({d}%)'\n    },\n    // legend: {\n    //     left: 'center',\n    //     top: 'bottom',\n    //     data: ['rose1', 'rose2', 'rose3', 'rose4', 'rose5', 'rose6', 'rose7', 'rose8']\n    // },\n    toolbox: {\n        show: true,\n        feature: {\n            mark: {\n                show: true\n            },\n            dataView: {\n                show: true,\n                readOnly: false\n            },\n            magicType: {\n                show: true,\n                type: ['pie', 'funnel']\n            },\n            restore: {\n                show: true\n            },\n            saveAsImage: {\n                show: true\n            }\n        }\n    },\n    graphic: graphicData,\n    series: [{\n        name: '客运作业站点数',\n        type: 'pie',\n        radius: [20, 450],\n        center: ['50%', '60%'],\n        label: {\n            show: true\n        },\n        roseType: 'area',\n        data: convertData1(),\n        rich: {\n            a: {\n                color: 'white',\n                lineHeight: 10\n            },\n            b: {\n                backgroundColor: {\n                    image: 'xxx/xxx.jpg'\n                },\n                height: 40\n            },\n            x: {\n                fontSize: 18,\n                fontFamily: 'Microsoft YaHei',\n                borderColor: '#449933',\n                borderRadius: 4\n            }\n        }\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-2461361090","theme":"","layout":"","viewCount":199,"userName":"鍙***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xncu4lsRCz.png?v=1591258080592","isCustomThumbnail":0,"builtinTags":["category-work","graphic","series-pie","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"鍙***0"}}