{"status":0,"data":{"cid":"xWK8KVnMQe","authorUid":"bd-2136137468","authorUserName":"h***4","title":"地图修改1","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2019-01-06T12:15:38.000Z","lastUpdateTime":"2019-01-06T12:15:38.000Z","auth":2,"uid":"bd-2136137468","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-07T06:24:22.000Z","code":"function randomData() {\n    return Math.round(Math.random()*300);\n}\nvar worlddata=[\n                {name: 'Afghanistan', value: randomData()},\n                {name: 'Angola', value: randomData()},\n                {name: 'Albania', value: randomData()},\n                {name: 'United Arab Emirates', value: randomData()},\n                {name: 'Argentina', value: randomData()},\n                {name: 'Armenia', value: randomData()},\n                {name: 'French Southern and Antarctic Lands', value: randomData()},\n                {name: 'Australia', value: randomData()},\n                {name: 'Austria', value: randomData()},\n                {name: 'Azerbaijan', value: randomData()},\n                {name: 'Burundi', value: randomData()},\n                {name: 'Belgium', value: randomData()},\n                {name: 'Benin', value: randomData()},\n                {name: 'Burkina Faso', value: randomData()},\n                {name: 'Bangladesh', value: randomData()},\n                {name: 'Bulgaria', value: randomData()},\n                {name: 'The Bahamas', value: randomData()},\n                {name: 'Bosnia and Herzegovina', value: randomData()},\n                {name: 'Belarus', value: randomData()},\n                {name: 'Belize', value: randomData()},\n                {name: 'Bermuda', value: randomData()},\n                {name: 'Bolivia', value: randomData()},\n                {name: 'Brazil', value: randomData()},\n                {name: 'Brunei', value: randomData()},\n                {name: 'Bhutan', value: randomData()},\n                {name: 'Botswana', value: randomData()},\n                {name: 'Central African Republic', value: randomData()},\n                {name: 'Canada', value: randomData()},\n                {name: 'Switzerland', value: randomData()},\n                {name: 'Chile', value: randomData()},\n                {name: 'China', value:randomData()},\n                {name: 'Ivory Coast', value: randomData()},\n                {name: 'Cameroon', value:randomData()},\n                {name: 'Democratic Republic of the Congo', value: randomData()},\n                {name: 'Republic of the Congo', value: randomData()},\n                {name: 'Colombia', value: randomData()},\n                {name: 'Costa Rica', value: randomData()},\n                {name: 'Cuba', value: randomData()},\n                {name: 'Northern Cyprus', value: randomData()},\n                {name: 'Cyprus', value: randomData()},\n                {name: 'Czech Republic', value: randomData()},\n                {name: 'Germany', value: randomData()},\n                {name: 'Djibouti', value: randomData()},\n                {name: 'Denmark', value: randomData()},\n                {name: 'Dominican Republic', value:randomData()},\n                {name: 'Algeria', value: randomData()},\n                {name: 'Ecuador', value: randomData()},\n                {name: 'Egypt', value:randomData()},\n                {name: 'Eritrea', value: randomData()},\n                {name: 'Spain', value:randomData()},\n                {name: 'Estonia', value: randomData()},\n                {name: 'Ethiopia', value: randomData()},\n                {name: 'Finland', value: randomData()},\n                {name: 'Fiji', value: randomData()},\n                {name: 'Falkland Islands', value: randomData()},\n                {name: 'France', value: randomData()},\n                {name: 'Gabon', value: randomData()},\n                {name: 'United Kingdom', value: randomData()},\n                {name: 'Georgia', value:randomData()},\n                {name: 'Ghana', value: randomData()},\n                {name: 'Guinea', value: randomData()},\n                {name: 'Gambia', value: randomData()},\n                {name: 'Guinea Bissau', value: randomData()},\n                {name: 'Equatorial Guinea', value: randomData()},\n                {name: 'Greece', value: randomData()},\n                {name: 'Greenland', value: randomData()},\n                {name: 'Guatemala', value: randomData()},\n                {name: 'French Guiana', value:randomData()},\n                {name: 'Guyana', value: randomData()},\n                {name: 'Honduras', value: randomData()},\n                {name: 'Croatia', value:randomData()},\n                {name: 'Haiti', value: randomData()},\n                {name: 'Hungary', value: randomData()},\n                {name: 'Indonesia', value: randomData()},\n                {name: 'India', value:randomData()},\n                {name: 'Ireland', value:randomData()},\n                {name: 'Iran', value:randomData()},\n                {name: 'Iraq', value: randomData()},\n                {name: 'Iceland', value: randomData()},\n                {name: 'Israel', value: randomData()},\n                {name: 'Italy', value: randomData()},\n                {name: 'Jamaica', value: randomData()},\n                {name: 'Jordan', value: randomData()},\n                {name: 'Japan', value: randomData()},\n                {name: 'Kazakhstan', value:randomData()},\n                {name: 'Kenya', value: randomData()},\n                {name: 'Kyrgyzstan', value: randomData()},\n                {name: 'Cambodia', value: randomData()},\n                {name: 'South Korea', value: randomData()},\n                {name: 'Kosovo', value: randomData()},\n                {name: 'Kuwait', value: randomData()},\n                {name: 'Laos', value: randomData()},\n                {name: 'Lebanon', value: randomData()},\n                {name: 'Liberia', value: randomData()},\n                {name: 'Libya', value: randomData()},\n                {name: 'Sri Lanka', value: randomData()},\n                {name: 'Lesotho', value: randomData()},\n                {name: 'Lithuania', value: randomData()},\n                {name: 'Luxembourg', value: randomData()},\n                {name: 'Latvia', value: randomData()},\n                {name: 'Morocco', value:randomData()},\n                {name: 'Moldova', value: randomData()},\n                {name: 'Madagascar', value: randomData()},\n                {name: 'Mexico', value: randomData()},\n                {name: 'Macedonia', value: randomData()},\n                {name: 'Mali', value:randomData()},\n                {name: 'Myanmar', value: randomData()},\n                {name: 'Montenegro', value:randomData()},\n                {name: 'Mongolia', value: randomData()},\n                {name: 'Mozambique', value: randomData()},\n                {name: 'Mauritania', value: randomData()},\n                {name: 'Malawi', value:randomData()},\n                {name: 'Malaysia', value: randomData()},\n                {name: 'Namibia', value: randomData()},\n                {name: 'New Caledonia', value: randomData()},\n                {name: 'Niger', value: randomData()},\n                {name: 'Nigeria', value: randomData()},\n                {name: 'Nicaragua', value: randomData()},\n                {name: 'Netherlands', value: randomData()},\n                {name: 'Norway', value: randomData()},\n                {name: 'Nepal', value: randomData()},\n                {name: 'New Zealand', value: randomData()},\n                {name: 'Oman', value: randomData()},\n                {name: 'Pakistan', value:randomData()},\n                {name: 'Panama', value: randomData()},\n                {name: 'Peru', value: randomData()},\n                {name: 'Philippines', value:randomData()},\n                {name: 'Papua New Guinea', value: randomData()},\n                {name: 'Poland', value: randomData()},\n                {name: 'Puerto Rico', value: randomData()},\n                {name: 'North Korea', value: randomData()},\n                {name: 'Portugal', value: randomData()},\n                {name: 'Paraguay', value:randomData()},\n                {name: 'Qatar', value: randomData()},\n                {name: 'Romania', value:randomData()},\n                {name: 'Russia', value: randomData()},\n                {name: 'Rwanda', value: randomData()},\n                {name: 'Western Sahara', value: randomData()},\n                {name: 'Saudi Arabia', value: randomData()},\n                {name: 'Sudan', value:randomData()},\n                {name: 'South Sudan', value: randomData()},\n                {name: 'Senegal', value:randomData()},\n                {name: 'Solomon Islands', value:randomData()},\n                {name: 'Sierra Leone', value: randomData()},\n                {name: 'El Salvador', value: randomData()},\n                {name: 'Somaliland', value: randomData()},\n                {name: 'Somalia', value: randomData()},\n                {name: 'Republic of Serbia', value: randomData()},\n                {name: 'Suriname', value: randomData()},\n                {name: 'Slovakia', value: randomData()},\n                {name: 'Slovenia', value: randomData()},\n                {name: 'Sweden', value:randomData()},\n                {name: 'Swaziland', value: randomData()},\n                {name: 'Syria', value: randomData()},\n                {name: 'Chad', value: randomData()},\n                {name: 'Togo', value: randomData()},\n                {name: 'Thailand', value:randomData()},\n                {name: 'Tajikistan', value: randomData()},\n                {name: 'Turkmenistan', value: randomData()},\n                {name: 'East Timor', value: randomData()},\n                {name: 'Trinidad and Tobago', value: randomData()},\n                {name: 'Tunisia', value:randomData()},\n                {name: 'Turkey', value: randomData()},\n                {name: 'United Republic of Tanzania', value:randomData()},\n                {name: 'Uganda', value: randomData()},\n                {name: 'Ukraine', value: randomData()},\n                {name: 'Uruguay', value: randomData()},\n                {name: 'United States of America', value: randomData()},\n                {name: 'Uzbekistan', value:randomData()},\n                {name: 'Venezuela', value: randomData()},\n                {name: 'Vietnam', value:randomData()},\n                {name: 'Vanuatu', value: randomData()},\n                {name: 'West Bank', value: randomData()},\n                {name: 'Yemen', value: randomData()},\n                {name: 'South Africa', value: randomData()},\n                {name: 'Zambia', value: randomData()},\n                {name: 'Zimbabwe', value: randomData()}\n            ];\nvar geoCoordMap = {\n    上海: [121.4648, 31.2891],\n    尼日利亚: [-4.388361, 11.186148],\n    美国洛杉矶: [-118.24311, 34.052713],\n    香港邦泰: [114.195466, 22.282751],\n    美国芝加哥: [-87.801833, 41.870975],\n    加纳库马西: [-4.62829, 7.72415],\n    英国曼彻斯特: [-1.657222, 51.886863],\n    德国汉堡: [10.01959, 54.38474],\n    哈萨克斯坦阿拉木图: [45.326912, 41.101891],\n    俄罗斯伊尔库茨克: [89.116876, 67.757906],\n    巴西: [-48.678945, -10.493623],\n    埃及达米埃塔: [31.815593, 31.418032],\n    西班牙巴塞罗纳: [2.175129, 41.385064],\n    柬埔寨金边: [104.88659, 11.545469],\n    意大利米兰: [9.189948, 45.46623],\n    乌拉圭蒙得维的亚: [-56.162231, -34.901113],\n    莫桑比克马普托: [32.608571, -25.893473],\n    阿尔及利亚阿尔及尔: [3.054275, 36.753027],\n    阿联酋迪拜: [55.269441, 25.204514],\n    匈牙利布达佩斯: [17.108519, 48.179162],\n    澳大利亚悉尼: [150.993137, -33.675509],\n    美国加州: [-121.910642, 41.38028],\n    澳大利亚墨尔本: [144.999416, -37.781726],\n    墨西哥: [-99.094092, 19.365711],\n    加拿大温哥华: [-123.023921, 49.311753]\n};\nvar BJData = [\n    [{\n        name: \"尼日利亚\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"美国洛杉矶\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"香港邦泰\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"美国芝加哥\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"加纳库马西\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"英国曼彻斯特\",\n        value: 0\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"德国汉堡\",\n        value: 6280\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"哈萨克斯坦阿拉木图\",\n        value: 7255\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"俄罗斯伊尔库茨克\",\n        value: 8125\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"巴西\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"埃及达米埃塔\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"西班牙巴塞罗纳\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"柬埔寨金边\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"意大利米兰\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"乌拉圭蒙得维的亚\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"莫桑比克马普托\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"阿尔及利亚阿尔及尔\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"阿联酋迪拜\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"匈牙利布达佩斯\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"澳大利亚悉尼\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"美国加州\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"澳大利亚墨尔本\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"墨西哥\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }],\n    [{\n        name: \"加拿大温哥华\",\n        value: 3590\n    }, {\n        name: \"上海\"\n    }]\n];\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (fromCoord && toCoord) {\n            res.push([{\n                    coord: fromCoord,\n                    value: dataItem[0].value\n                },\n                {\n                    coord: toCoord\n                }\n            ]);\n        }\n    }\n    return res;\n};\nvar convertData2 = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[1].name];\n        var toCoord = geoCoordMap[dataItem[0].name];\n        if (fromCoord && toCoord) {\n            res.push([{\n                    coord: fromCoord,\n                    value: dataItem[0].value\n                },\n                {\n                    coord: toCoord\n                }\n            ]);\n        }\n    }\n    return res;\n};\n\nvar series = [];\n[\n    [\"上海\", BJData]\n].forEach(function(item, i) {\n    series.push(\n        {\n            name: '',\n            type: 'map',\n            geoIndex: 0,\n            mapType: 'world',\n            layoutCenter: [\"50%\", \"50%\"], //地图位置\n            layoutSize: \"100%\",\n            roam: true,\n            itemStyle:{\n                emphasis:{label:{show:true}}\n            },\n            data:worlddata\n        },\n        {\n            type: \"lines\",\n            zlevel: 2,\n            effect: {\n                show: true,\n                color: \"#0bc7f3\",\n                period: 4, //箭头指向速度，值越小速度越快\n                trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                symbol: \"arrow\", //箭头图标\n                symbolSize: 5 //图标大小\n            },\n            lineStyle: {\n                normal: {\n                    width: 1, //尾迹线条宽度\n                    opacity: 0, //尾迹线条透明度\n                    curveness: 0.3 //尾迹线条曲直度\n                }\n            },\n\n            data: convertData(item[1])\n        }, {\n            type: \"lines\",\n            zlevel: 2,\n            effect: {\n                show: true,\n                color:'#FF0000',\n                period: 4, //箭头指向速度，值越小速度越快\n                trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                symbol: \"arrow\", //箭头图标\n                symbolSize: 5 //图标大小\n            },\n            lineStyle: {\n                normal: {\n                    width: 1, //尾迹线条宽度\n                    opacity: 0, //尾迹线条透明度\n                    curveness: -0.3 //尾迹线条曲直度\n                }\n            },\n\n            data: convertData2(item[1])\n        },{\n            type: \"effectScatter\",\n            coordinateSystem: \"geo\",\n            zlevel: 2,\n            rippleEffect: {\n                //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\n            },\n            label: {\n                normal: {\n                    show: true,\n                    color: \"#0bc7f3\",\n                    position: \"right\", //显示位置\n                    offset: [5, 0], //偏移设置\n                    formatter: \"{b}\" //圆环显示文字\n                },\n                emphasis: {\n                    show: true,\n                    color: \"#FF6A6A\"\n                }\n            },\n            symbol: \"circle\",\n            symbolSize: function(val) {\n                return 4 + val[2] / 1000; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: true,\n                   color: \"#0bc7f3\",\n                },\n                emphasis: {\n                    show: true,\n                    color: \"#FF6A6A\"\n                }\n            },\n            data: item[1].map(function(dataItem) {\n                return {\n                    name: dataItem[0].name,\n                    value: geoCoordMap[dataItem[0].name].concat([100]),\n                    visualMap: false\n                };\n            })\n        },\n        //被攻击点\n        {\n            type: \"scatter\",\n            coordinateSystem: \"geo\",\n            zlevel: 2,\n            rippleEffect: {\n                period: 4,\n                brushType: \"stroke\",\n                scale: 4\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: \"right\",\n                    color: \"#00ffff\",\n                    formatter: \"{b}\",\n                    textStyle: {\n                        color: \"red\",\n                    }\n                },\n                emphasis: {\n                    show: true,\n                    color: \"#FF6A6A\"\n                }\n            },\n            symbol: \"pin\",\n            symbolSize: 30,\n            itemStyle: {\n                normal: {\n                    show: true,\n                    color: \"red\",\n                },\n                emphasis: {\n                    show: true,\n                    color: \"#FF6A6A\"\n                }\n            },\n            data: [{\n                name: item[0],\n                value: geoCoordMap[item[0]].concat([100]),\n                visualMap: false\n            }]\n        }\n    );\n});\n\noption = {\n    backgroundColor: '#000',\n    tooltip: {\n        trigger: \"item\",\n        backgroundColor: \"#1540a1\",\n        borderColor: \"#FFFFCC\",\n        showDelay: 0,\n        hideDelay: 0,\n        enterable: true,\n        transitionDuration: 0,\n        extraCssText: \"z-index:100\",\n        formatter: function(params, ticket, callback) {\n            //根据业务自己拓展要显示的内容\n            var res = \"\";\n            var name = params.name;\n            var value = params.value[params.seriesIndex + 1];\n            res =\n                \"<span style='color:#fff;'>\" +\n                name +\n                \"</span><br/>数据：\" +\n                value;\n            return res;\n        }\n    },\n    visualMap: {\n        //图例值控制\n        show:false,\n        type: 'piecewise',\n        pieces: [\n            {max: 80,color:'red'}, \n            {min: 80, max: 120,color:'yellow'},\n            {min: 120,color:'green'}\n        ],\n        calculable: true,\n        // inRange: {\n        //     color: ['#ffffff', '#E0DAFF', '#ADBFFF', '#9CB4FF', '#6A9DFF', '#3889FF']\n        // }\n    },\n    geo: {\n        map: \"world\",\n        show:true,\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true, //是否允许缩放\n        layoutCenter: [\"50%\", \"50%\"], //地图位置\n        layoutSize: \"120%\",\n        itemStyle: {\n            normal: {\n                show:'true',\n                color: \"#04284e\", //地图背景色\n                borderColor: \"#5bc1c9\" //省市边界线\n            },\n            emphasis: {\n                show:'true',\n                color: \"rgba(37, 43, 61, .5)\" //悬浮背景\n            }\n        }\n    },\n\n    series: series\n};","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-2136137468","theme":"","layout":"","viewCount":1443,"userName":"h***4","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWK8KVnMQe.png?v=1546842262936","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-map","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"h***4"}}