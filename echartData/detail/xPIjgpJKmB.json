{"status":0,"data":{"cid":"xPIjgpJKmB","authorUid":"bd-3553659272","authorUserName":"你***来","title":"世界散点地图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-03-21T08:23:09.000Z","lastUpdateTime":"2021-03-21T08:23:09.000Z","auth":2,"uid":"bd-3553659272","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-21T08:23:09.000Z","code":"var mapName = 'world';\r\nvar data = [\r\n    {name:\"加拿大\",value:199},\r\n    {name:\"利比亚\",value:42},\r\n    {name:\"俄罗斯\",value:102},\r\n];\r\n\r\nvar geoCoordMap = {\r\n    '芬兰': [24.909912, 60.169095], \r\n    '美国': [-100.696295, 33.679979], \r\n    '日本': [139.710164, 35.706962], \r\n    '韩国': [126.979208, 37.53875], \r\n    '瑞士': [7.445147, 46.956241],\r\n    '东南亚': [117.53244, 5.300343], \r\n    '澳大利亚': [135.193845, -25.304039], \r\n    '德国': [13.402393, 52.518569], \r\n    '英国': [-0.126608, 51.208425], \r\n    '加拿大': [-102.646409, 59.994255],\r\n    '利比亚': [13.07, 32.49],\r\n    '俄罗斯': [37.35, 55.45],\r\n};\r\n\r\n// /*获取地图数据*/\r\n// myChart.showLoading();\r\n// var mapFeatures = echarts.getMap(mapName).geoJson.features;\r\n// myChart.hideLoading();\r\n// mapFeatures.forEach(function(v) {\r\n//     // 地区名称\r\n//     var name = v.properties.name;\r\n//     // 地区经纬度\r\n//     geoCoordMap[name] = v.properties.cp;\r\n\r\n// });\r\nconsole.log(geoCoordMap)\r\nconsole.log(data)\r\nvar max = 480,\r\n    min = 9; // todo\r\nvar maxSize4Pin = 100,\r\n    minSize4Pin = 20;\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\noption = {\r\n    backgroundColor:\"rgb(18,40,109)\",\r\n    tooltip: {\r\n        padding: 0,\r\n        enterable: true,\r\n        transitionDuration: 1,\r\n        textStyle: {\r\n            color: '#000',\r\n            decoration: 'none',\r\n        },\r\n        // position: function (point, params, dom, rect, size) {\r\n        //   return [point[0], point[1]];\r\n        // },\r\n        formatter: function(params) {\r\n            // console.log(params)\r\n            \r\n            return '';\r\n        }\r\n\r\n    },\r\n\r\n    visualMap: {\r\n        show: false,\r\n        min: 0,\r\n        max: 200,\r\n        left: '10%',\r\n        top: 'bottom',\r\n        calculable: true,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n            color: ['#04387b', '#467bc0'] // 蓝绿\r\n        }\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            }\r\n        },\r\n        roam: false,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#023677',\r\n                borderColor: '#1180c7',\r\n            },\r\n            emphasis: {\r\n                areaColor: '#4499d0',\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n        name: '散点',\r\n        type: 'scatter',\r\n        coordinateSystem: 'geo',\r\n        data: convertData(data),\r\n        // symbolSize: function(val) {\r\n        //     return val[2] / 10;\r\n        // },\r\n        symbolSize:10,\r\n        label: {\r\n            normal: {\r\n                formatter: '{b}',\r\n                position: 'right',\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: true\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#fff'\r\n            }\r\n        }\r\n    },\r\n        {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 6,\r\n        },\r\n        {\r\n            name: 'Top 5',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 10)),\r\n            // symbolSize: function(val) {\r\n            //     return val[2] / 10;\r\n            // },\r\n            symbolSize:10,\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'left',\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'yellow',\r\n                    shadowBlur: 10,\r\n                    shadowColor: 'yellow'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        },\r\n\r\n    ]\r\n};\r\n\r\n","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-3553659272","theme":"","layout":"","viewCount":47,"userName":"你***来","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPIjgpJKmB.png?v=1616314990168","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"你***来"}}