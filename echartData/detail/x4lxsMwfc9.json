{"status":0,"data":{"cid":"x4lxsMwfc9","authorUid":"obd-olwfQE5AIFppxSjWQjpOa0Lr4XVgV0X","authorUserName":"晨***g","title":"2021年6月至11月中国各省迁入规模指数","description":"数据来源：百度地图迁徙大数据","latestVersion":4,"alwaysLatest":0,"createTime":"2021-12-23T17:15:49.000Z","lastUpdateTime":"2021-12-24T13:02:17.000Z","auth":2,"uid":"obd-olwfQE5AIFppxSjWQjpOa0Lr4XVgV0X","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-24T13:02:17.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\n\n//geoCoordMap把所有可能出现的城市加到数组里面\nvar geoCoordMap = {\n   '台湾': [121.5135, 25.0308],\n        '黑龙江': [127.9688, 45.368],\n        '内蒙古': [110.3467, 41.4899],\n        \"吉林\": [125.8154, 44.2584],\n        '北京': [116.4551, 40.2539],\n        \"辽宁\": [123.1238, 42.1216],\n        \"河北\": [114.4995, 38.1006],\n        \"天津\": [117.4219, 39.4189],\n        \"山西\": [112.3352, 37.9413],\n        \"陕西\": [109.1162, 34.2004],\n        \"甘肃\": [103.5901, 36.3043],\n        \"宁夏\": [106.3586, 38.1775],\n        \"青海\": [101.4038, 36.8207],\n        \"新疆\": [87.9236, 43.5883],\n        \"西藏\": [91.11, 29.97],\n        \"四川\": [103.9526, 30.7617],\n        \"重庆\": [108.384366, 30.439702],\n        \"山东\": [117.1582, 36.8701],\n        \"河南\": [113.4668, 34.6234],\n        \"江苏\": [118.8062, 31.9208],\n        \"安徽\": [117.29, 32.0581],\n        \"湖北\": [114.3896, 30.6628],\n        \"浙江\": [119.5313, 29.8773],\n        \"福建\": [119.4543, 25.9222],\n        \"江西\": [116.0046, 28.6633],\n        \"湖南\": [113.0823, 28.2568],\n        \"贵州\": [106.6992, 26.7682],\n        \"云南\": [102.9199, 25.4663],\n        \"广东\": [113.12244, 23.009505],\n        \"广西\": [108.479, 23.1152],\n        \"海南\": [110.3893, 19.8516],\n        '上海': [121.4648, 31.2891],\n};\n\n//2021年6月数据\nvar d1 = {\n  \"北京\":9.05052204,\n\"天津\":3.92028768,\n\"河北\":10.73002572,\n\"山西\":3.34639728,\n\"内蒙古\":2.91309696,\n\"辽宁\":2.69073144,\n\"吉林\":1.6808634,\n\"黑龙江\":1.61795772,\n\"上海\":7.93951524,\n\"江苏\":12.2640264,\n\"浙江\":8.44190748,\n\"安徽\":6.53845068,\n\"福建\":2.26123812,\n\"江西\":3.45522672,\n\"山东\":7.14317184,\n\"河南\":7.14545496,\n\"湖北\":3.95608968,\n\"湖南\":4.08370572,\n\"广东\":4.67931708,\n\"广西\":2.3671494,\n\"海南\":0.69278544,\n\"重庆\":3.6254142,\n\"四川\":5.13962172,\n\"贵州\":2.77389792,\n\"云南\":2.15026272,\n\"西藏\":0.23261256,\n\"陕西\":4.2088464,\n\"甘肃\":2.17053216,\n\"青海\":0.77125068,\n\"宁夏\":0.96929028,\n\"新疆\":0.74181204,\n\n};\n\n//2021年7月数据\nvar d2 = {\n  \"北京\":9.741935 ,\n\"天津\":3.999605,\n\"河北\":11.057467,\n\"山西\":3.587433,\n\"内蒙古\":3.557756,\n\"辽宁\":3.443353,\n\"吉林\":2.009240,\n\"黑龙江\":2.044932,\n\"上海\":7.969637,\n\"江苏\":11.824112,\n\"浙江\":9.281147,\n\"安徽\":6.608140,\n\"福建\":2.851768,\n\"江西\":4.022693,\n\"山东\":7.852845,\n\"河南\":7.310172,\n\"湖北\":4.691720,\n\"湖南\":5.268870,\n\"广东\":8.546639,\n\"广西\":3.481855,\n\"海南\":0.849754,\n\"重庆\":4.117990,\n\"四川\":5.766991,\n\"贵州\":3.565835,\n\"云南\":2.424167,\n\"西藏\":0.322657,\n\"陕西\":4.812726,\n\"甘肃\":2.725447,\n\"青海\":1.128460,\n\"宁夏\":1.138793,\n\"新疆\":0.870588,\n\n};\n//2021年8月数据\nvar d3 = {\n  \"北京\":5.139172,\n\"天津\":2.800756,\n\"河北\":6.839648,\n\"山西\":2.124990,\n\"内蒙古\":2.132363,\n\"辽宁\":1.576780,\n\"吉林\":1.143143,\n\"黑龙江\":0.982337,\n\"上海\":4.470977,\n\"江苏\":6.066385,\n\"浙江\":7.543651,\n\"安徽\":6.557530,\n\"福建\":1.375357,\n\"江西\":3.614770,\n\"山东\":6.191631,\n\"河南\":6.500660,\n\"湖北\":4.097262,\n\"湖南\":4.659241,\n\"广东\":7.952960,\n\"广西\":3.305033,\n\"海南\":0.662604,\n\"重庆\":3.400999,\n\"四川\":4.665783,\n\"贵州\":2.538416,\n\"云南\":1.786429,\n\"西藏\":0.177751,\n\"陕西\":3.388929,\n\"甘肃\":1.855020,\n\"青海\":0.581436,\n\"宁夏\":0.857603,\n\"新疆\":0.609417,\n\n};\n//2021年9月数据\nvar d4 = {\n   \"北京\":8.281195,\n\"天津\":3.570042,\n\"河北\":9.760658,\n\"山西\":2.935193,\n\"内蒙古\":2.658364,\n\"辽宁\":2.672514,\n\"吉林\":1.565057,\n\"黑龙江\":1.282203,\n\"上海\":6.665289,\n\"江苏\":10.929422,\n\"浙江\":7.543651,\n\"安徽\":6.557530,\n\"福建\":1.375357,\n\"江西\":3.614770,\n\"山东\":6.191631,\n\"河南\":6.500660,\n\"湖北\":4.097262,\n\"湖南\":4.659241,\n\"广东\":7.952960,\n\"广西\":3.305033,\n\"海南\":0.662604,\n\"重庆\":3.400999,\n\"四川\":4.665783,\n\"贵州\":2.538416,\n\"云南\":1.786429,\n\"西藏\":0.177751,\n\"陕西\":3.388929,\n\"甘肃\":1.855020,\n\"青海\":0.581436,\n\"宁夏\":0.857603,\n\"新疆\":0.609417,\n\n};\n//2021年10月数据\nvar d5 = {\n   \"北京\":9.705319,\n\"天津\":4.228173,\n\"河北\":10.427531,\n\"山西\":3.433588,\n\"内蒙古\":2.745203,\n\"辽宁\":2.667921,\n\"吉林\":1.401407,\n\"黑龙江\":0.848343,\n\"上海\":9.175092,\n\"江苏\":14.532200,\n\"浙江\":9.931267,\n\"安徽\":7.956216,\n\"福建\":1.801825,\n\"江西\":4.442418,\n\"山东\":7.306980,\n\"河南\":7.537206,\n\"湖北\":4.922597,\n\"湖南\":5.209752,\n\"广东\":11.243226,\n\"广西\":3.802966,\n\"海南\":0.831546,\n\"重庆\":4.371120,\n\"四川\":5.935429,\n\"贵州\":2.882450,\n\"云南\":2.235667,\n\"西藏\":0.190719,\n\"陕西\":3.847203,\n\"甘肃\":1.893152,\n\"青海\":0.604204,\n\"宁夏\":0.888209,\n\"新疆\":0.468777,\n\n   \n};\n//2021年11月数据\nvar d6 = {\n   \"北京\":4.861435,\n\"天津\":2.968592,\n\"河北\":7.182381,\n\"山西\":2.218224,\n\"内蒙古\":1.642898,\n\"辽宁\":1.513698,\n\"吉林\":0.996508,\n\"黑龙江\":0.637499 ,\n\"上海\":6.884707,\n\"江苏\":10.728221,\n\"浙江\":6.701477,\n\"安徽\":5.735002,\n\"福建\":2.017402,\n\"江西\":2.531659,\n\"山东\":5.177871,\n\"河南\":4.769751,\n\"湖北\":3.215995,\n\"湖南\":3.543758,\n\"广东\":7.578236,\n\"广西\":2.862588,\n\"海南\":0.782878,\n\"重庆\":2.178561,\n\"四川\":3.174336,\n\"贵州\":2.178076,\n\"云南\":1.753390,\n\"西藏\":0.101572,\n\"陕西\":2.439946,\n\"甘肃\":0.849541,\n\"青海\":0.249058,\n\"宁夏\":0.444608,\n\"新疆\":0.248687,\n\n};\n\nvar colors = [\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\n];\nvar colorIndex = 0;\n$(function() {\n    var year = [\"2021.06\", \"2021.07\", \"2021.08\", \"2021.09\", \"2021.10\", \"2021.11\"];\n    var mapData = [\n        [],\n        [],\n        [],\n        [],\n        [],\n        []\n    ];\n\n    /*柱子Y名称*/\n    var categoryData = [];\n    var barData = [];\n\n    for (var key in geoCoordMap) {\n        mapData[0].push({\n            \"year\": '2021.06',\n            \"name\": key,\n            \"value\": d1[key],\n        });\n        mapData[1].push({\n            \"year\": '2021.07',\n            \"name\": key,\n            \"value\": d2[key],\n        });\n        mapData[2].push({\n            \"year\": '2021.08',\n            \"name\": key,\n            \"value\": d3[key],\n        });\n        mapData[3].push({\n            \"year\": '2021.09',\n            \"name\": key,\n            \"value\": d4[key],\n        });\n        mapData[4].push({\n            \"year\": '2021.10',\n            \"name\": key,\n            \"value\": d5[key],\n        });\n        mapData[5].push({\n            \"year\": '2021.11',\n            \"name\": key,\n            \"value\": d6[key],\n        });\n    \n    }\n\n    for (var i = 0; i < mapData.length; i++) {\n        mapData[i].sort(function sortNumber(a, b) {\n            return a.value - b.value\n        });\n        barData.push([]);\n        categoryData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            barData[i].push(mapData[i][j].value);\n            categoryData[i].push(mapData[i][j].name);\n        }\n    }\n\n    $.getJSON(uploadedDataURL, function(geoJson) {\n\n        echarts.registerMap('china', geoJson);\n        var convertData = function(data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value)\n                    });\n                }\n            }\n            return res;\n        };\n        \n        optionXyMap01 = {\n            timeline: {\n                data: year,\n                axisType: 'category',\n                autoPlay: true,\n                playInterval: 3000,\n                left: '10%',\n                right: '10%',\n                bottom: '3%',\n                width: '80%',\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbolSize: 10,\n                lineStyle: {\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n\n            },\n            baseOption: {\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '1%',\n                    top: '15%',\n                    bottom: '10%',\n                    width: '20%'\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\n                        }\n                    }\n                },\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887],\n                    label: {\n                        emphasis: {\n                            show: false\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [{\n                                    offset: 0,\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\n                                }, {\n                                    offset: 1,\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\n                                }],\n                                globalCoord: false // 缺省为 false\n                            },\n                            shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0\n                        }\n                    }\n                },\n            },\n            options: []\n\n        };\n\n        for (var n = 0; n < year.length; n++) {\n            optionXyMap01.options.push({\n                backgroundColor: '#013954',\n                title:\n                    [{\n                            text: '2021年6月至11月中国各省迁入规模指数',\n                            subtext: '数据来源：百度地图迁徙大数据',\n                            sublink: 'https://qianxi.baidu.com/',\n                            left: '5%',\n                            top: '5%',\n                            textStyle: {\n                                color: '#fff',\n                                fontSize:25\n                            }\n                        },\n                        {\n                            id: 'statistic',\n                            text: year[n] + \"迁入规模指数\",\n                            left: '75%',\n                            top: '5%',\n                            textStyle: {\n                                color: '#fff',\n                                fontSize: 15\n                            }\n                        }\n                    ],\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false\n                    },\n                    axisLine: {\n                        show: false\n                    },\n                    axisTick: {\n                        show: false\n                    },\n                    axisLabel: {\n                        margin: 2,\n                        textStyle: {\n                            color: '#aaa'\n                        }\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    //  name: 'TOP 20',\n                    nameGap: 16,\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    data: categoryData[n]\n                },\n\n                series: [\n                    //地图\n                    {\n                        type: 'map',\n                        map: 'china',\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: false, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: false\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff'\n                                }\n                            }\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7'\n                            }\n                        },\n                        animation: false,\n                        data: mapData\n                    },\n                    //地图中闪烁的点\n                    {\n                        //  name: 'Top 5',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(mapData[n].sort(function(a, b) {\n                            return b.value - a.value;\n                        }).slice(0, 40)),\n                        symbolSize: function(val) {\n                            return val[2] *5;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke'\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                                shadowBlur: 10,\n                                shadowColor: colors[colorIndex][n]\n                            }\n                        },\n                        zlevel: 1\n                    },\n                    //柱状图\n                    {\n                        zlevel: 1.5,\n                        type: 'bar',\n                        symbol: 'none',\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n]\n                            }\n                        },\n                        data: barData[n]\n                    }\n                ]\n            })\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});\n\n","html":"","externalScripts":"","updaterUID":"obd-olwfQE5AIFppxSjWQjpOa0Lr4XVgV0X","theme":"","layout":"","viewCount":0,"userName":"晨***g","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4lxsMwfc9.png?v=1640350938065","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"晨***g"}}