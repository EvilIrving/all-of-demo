{"status":0,"data":{"cid":"xRauPXqUwy","authorUid":"obd-oCjhaXFbRoGEF9SHhuXZpbFC4UN2l3W","authorUserName":"188******75","title":"圆柱","description":"shopping","latestVersion":3,"alwaysLatest":0,"createTime":"2021-09-30T02:00:33.000Z","lastUpdateTime":"2021-09-30T02:05:47.000Z","auth":2,"uid":"obd-oCjhaXFbRoGEF9SHhuXZpbFC4UN2l3W","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-30T02:05:47.000Z","code":"let nameList=[]\nlet valueList=[]\nlet series=[]\nlet legend=[]\nlet barWidth=26\nlet barGap=0\nlet colorList=['#02C0EA','#FF9826','#6ACC29','#9833FF']\nlet chartObj={\n      series:[{name:\"当前资源\",data:[269,500,400,170]},{name:\"其他资源\",data:[39,50,40,100]},{name:\"资源\",data:[15,200,80,60]}],\n      chartList:['通信','网络','能源','建筑']\n    }\n    //颜色转化为rgba\nfunction colorRgba(str,alpha){\n    let reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n    var sColor = str.toLowerCase();\n    if(sColor=='transparent'){\n        return 'transparent'\n    }\n    if(sColor && reg.test(sColor)){\n        if(sColor.length === 4){\n            var sColorNew = \"#\";\n                for(let i=1; i<4; i+=1){\n                    sColorNew += sColor.slice(i,i+1).concat(sColor.slice(i,i+1));       \n                }\n                sColor = sColorNew;\n        }\n        //处理六位的颜色值\n        var sColorChange = [];\n        for(let i=1; i<7; i+=2){\n            sColorChange.push(parseInt(\"0x\"+sColor.slice(i,i+2)));       \n        }\n        return \"rgba(\" + sColorChange.join(\",\") +','+alpha+ \")\";\n    }else{\n        return sColor;       \n    }\n}\n\n      if (chartObj.series&&chartObj.series.length) {\n          chartObj.series.forEach((item, index) => {\n          legend.push({\n              name:item.name, \n              itemStyle:{\n                color:colorList[index]\n              }})\n            series.push({\n                  name:'',//\"柱顶部\"index\n                  type: \"pictorialBar\",\n                  symbolSize: [barWidth,barWidth*0.4],\n                  symbolOffset: [(-0.5*(chartObj.series.length-1)+index+(-0.5)*barGap*0.01*(chartObj.series.length-1)+barGap*0.01*index)*barWidth, -barWidth*0.2],\n                  // symbolOffset: [(-0.5*(this.chartObj.series.length-1)+index)*this.barWidth, -this.barWidth*0.2],\n                  z: 12,\n                  itemStyle: {\n                      color:(params)=>{\n                        return colorList[index];\n                      },                    \n                  },\n                  tooltip:{\n                    show:false\n                  },\n                  symbolPosition: \"end\",\n                  data: item.data,\n                }),\n              series.push({\n                  name: item.name,//\"柱底部\"\n                  type: \"pictorialBar\",\n                  symbolSize: [barWidth, barWidth*0.4],//柱子底部宽高\n                  //柱子底部圆移动的宽度和移动的间距\n                  symbolOffset: [(-0.5*(chartObj.series.length-1)+index+(-0.5)*barGap*0.01*(chartObj.series.length-1)+barGap*0.01*index)*barWidth,barWidth*0.2],\n                  z: 12,\n                  tooltip:{\n                    show:false\n                  },\n                  itemStyle: {\n                      color:(params)=>{\n                        return colorList[index];\n                      },                   \n                  },\n                  data:item.data,\n                }),\n              series.push({\n                type: \"bar\",\n                name:item.name,                    \n                itemStyle: {\n                    // borderRadius: [ 0, 0,13,13],\n                    color:(params)=>{\n                      return new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                        {\n                          offset: 1,\n                          color:colorRgba(colorList[index],1),\n                        },\n                        {\n                          offset: 0.2,\n                          color:colorRgba(colorList[index],0.3),\n                        },\n                        {\n                          offset: 0,\n                          color:'transparent',\n                        }\n                      ]);\n                    },                                          \n                },\n                z: 16,\n                silent: true,\n                label: {\n                    show: true,\n                    position: \"top\",\n                    offset:[0,4],               \n                    distance: 10,\n                    textStyle: {\n                      color: colorList[index],\n                      fontSize:16,\n                    },\n                    // formatter: function (a, b) {\n                    //   return a.value==0?'':a.value;\n                    // },                  \n                },\n                barWidth: barWidth,\n                barMaxWidth:barWidth*3,\n                barGap:barGap+'%', // Make series be overlap\n                data: item.data,\n              })\n          })\n      }\n\n      option = {\n        // backgroundColor: \"#061326\",\n        title: {\n          text: \"\",\n          top: 20,\n          left: \"center\",\n          textStyle: {\n            color: \"#fff\",\n            fontSize: 20,\n          },\n        },\n        tooltip: {\n          show:true,\n          trigger: 'axis',\n          backgroundColor:'rgba(116,176,222,0.3)',\n          extraCssText:'box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;',\n          borderWidth:0,\n          confine:false,\n          appendToBody:true,\n          formatter:(params)=>{\n            ////console.log(params,'---paramsshopping')\n            let result =\"<div style='margin-bottom:5px;'>\"+params[0].name+\"</div>\"\n            params.forEach((item,index)=>{\n               \n              var dotHtml = `<span style=\"display:inline-block;margin-right:5px;border-radius:50%;width:10px;height:10px;background:${colorList[index]}\"></span>`\n              result += \"<div style='display:flex;align-items:center;margin-bottom:5px'>\"+dotHtml +item.seriesName+(item.seriesName?\"<span style='display:inline-block;margin-right:6px;'></span>\":'')+item.data+\"</div>\"})\n            return result\n          },\n          //轴触发提示才有效\n          axisPointer:{\n            type:'shadow',\n            shadowStyle:{\n              color:'rgba(35,49,77,0.3)',\n            },\n          },\n          textStyle:{\n            color:\"#fff\",\n          } \n        },\n        grid: {\n          top:40,\n          left: 5,\n          right:5,\n          bottom:16,\n          containLabel:true//包括文本，居中\n        },\n        legend: {\n            show:true,\n            data:legend,\n            selectedMode:false,\n            type: 'scroll',\n            icon:'circle',\n            itemHeight:16,  \n            textStyle:{\n              color:\"#C3E3F9\",\n            }           \n         },\n        xAxis: {\n          data:chartObj.chartList,\n          type: \"category\",\n            axisLine: {\n              show: true,\n              lineStyle:{\n                color:\"#2B72A1\",    \n              }\n            },\n            axisLabel: {\n                color:\"#87CCFF\",              \n            },\n            splitLine: {\n              show: false,\n            },\n            axisTick: {\n              show: false,\n            },\n          interval: 0,\n        },\n       yAxis: [\n          {\n            type: \"value\",\n            name:'单位',\n            nameGap:20,\n            nameTextStyle: {\n                align: 'center',\n                color: \"#2869A9\",\n            },\n            splitNumber: 4,\n            splitLine: {\n              show: true,\n              lineStyle: {\n                color: \"rgba(255,255,255,0.1)\",\n              },\n            },\n            axisLine: {\n              show: false,\n            },\n            axisLabel: {\n              margin: 10,\n              color: \"#2869A9\",\n              \n            },\n            axisTick: {\n              show: true,\n              lineStyle: {\n                color: \"#2869A9\",\n              },\n            },\n          },\n        ],\n        series:series,\n        // series: [\n        //   {\n        //     name: \"柱顶部\",\n        //     type: \"pictorialBar\",\n        //     symbolSize: [barWidth, 10],\n        //     symbolOffset: [-barWidth/2,0],\n        //     z: 12,\n        //     itemStyle: {\n        //       normal: {\n        //         color:(params)=>{\n        //           return colorList[0];\n        //         },\n        //       },\n        //     },\n        //     symbolPosition: \"end\",\n        //     data:chartObj.series[0].data,\n        //   },\n        //   {\n        //     name: \"柱底部\",\n        //     type: \"pictorialBar\",\n        //     symbolSize: [barWidth, 10],\n        //      symbolOffset: [-barWidth/2,0],\n        //     z: 12,\n        //     itemStyle: {\n        //       normal: {\n        //         color:(params)=>{\n        //           return colorList[0];\n        //         },\n        //       },\n        //     },\n        //     data:chartObj.series[0].data,\n        //   },\n        //   {\n        //     type: \"bar\",\n        //     name:\"当前资源\",\n        //     itemStyle: {\n        //       normal: {\n        //         // borderRadius: [ 0, 0,13,13],\n        //         color:(params)=>{\n        //           return new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n        //             {\n        //               offset: 1,\n        //               color: colorList[0],\n        //             },\n        //             {\n        //               offset: 0,\n        //               color:'transparent',\n        //             }\n        //           ]);\n        //         },\n        //         opacity: 0.8,\n        //       },\n        //     },\n        //     z: 16,\n        //     label: {\n        //       show: true,\n        //       position: \"top\",\n        //       fontSize: 16,\n        //     },\n        //     silent: true,\n        //     barWidth: 26,\n        //     barGap: \"0\", // Make series be overlap\n        //     data: chartObj.series[0].data,\n        //   },\n        //   {\n        //     name: \"柱顶部\",\n        //     type: \"pictorialBar\",\n        //      symbolSize: [barWidth, 10],\n        //      symbolOffset: [barWidth/2,0],\n        //     z: 12,\n        //     itemStyle: {\n        //       normal: {\n        //         color:(params)=>{\n        //           return colorList[0];\n        //         },\n        //       },\n        //     },\n           \n        //     symbolPosition: \"end\",\n        //     data: chartObj.series[1].data,\n        //   },\n        //   {\n        //     name: \"柱底部\",\n        //     type: \"pictorialBar\",\n        //      symbolSize: [barWidth, 10],\n        //      symbolOffset: [barWidth/2,0],\n        //     z: 12,\n        //     itemStyle: {\n        //       normal: {\n        //         color:(params)=>{\n        //           return colorList[0];\n        //         },\n        //       },\n        //     },\n        //     data:chartObj.series[1].data,\n        //   },\n        //   {\n        //     type: \"bar\",\n        //     name:\"其他资源\",\n        //     itemStyle: {\n        //       normal: {\n        //         // borderRadius: [ 0, 0,13,13],\n        //         color:(params)=>{\n        //           return new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n        //             {\n        //               offset: 1,\n        //               color: colorList[0],\n        //             },\n        //             {\n        //               offset: 0,\n        //               color:'transparent',\n        //             }\n        //           ]);\n        //         },\n        //         opacity: 0.8,\n        //       },\n        //     },\n        //     z: 16,\n        //      label: {\n        //       show: true,\n        //       position: \"top\",\n        //       fontSize: 16,\n        //     },\n        //     silent: true,\n        //     barWidth: 26,\n        //     barGap: \"0\", // Make series be overlap\n        //     data: chartObj.series[1].data,\n        //   },\n        // ],\n      };\n","html":"","externalScripts":"","updaterUID":"obd-oCjhaXFbRoGEF9SHhuXZpbFC4UN2l3W","theme":"","layout":"","viewCount":0,"userName":"188******75","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xRauPXqUwy.png?v=1632967547206","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pictorialBar","title","tooltip"],"customTags":[],"updaterUserName":"188******75"}}