{"status":0,"data":{"cid":"x0jCdJFX_F","authorUid":"obd-o2LT5SPsRm62u1sF90rM6cs58MmkP66","authorUserName":"j***9","title":"","description":"","latestVersion":5,"alwaysLatest":0,"createTime":"2021-09-17T09:47:01.000Z","lastUpdateTime":"2021-09-22T01:33:55.000Z","auth":2,"uid":"obd-o2LT5SPsRm62u1sF90rM6cs58MmkP66","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-22T01:33:55.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\nlet value = 55.33;\nlet color = ['#fdd56a', '#fdb36a', '#fd866a', '#73ddff', '#73acff', '#34c98e', '#ef4f2e'];\nlet list = [\n    {\n        name: '站前1标',\n        icon: 'circle',\n        value: 10,\n    },\n    {\n        name: '站前2标',\n        icon: 'circle',\n        value: 15,\n    },\n    {\n        name: '站前3标',\n        icon: 'circle',\n        value: 12,\n    },\n    {\n        name: '站前4标',\n        icon: 'circle',\n        value: 8,\n    },\n    {\n        name: '站前5标',\n        icon: 'circle',\n        value: 16,\n    },\n    {\n        name: '站前6标',\n        icon: 'circle',\n        value: 24,\n    },\n    {\n        name: '站前7标',\n        icon: 'circle',\n        value: 18,\n    },\n];\noption = {\n    // backgroundColor: '#061740',\n\n    legend: {\n        type: 'plain',\n        right: 0,\n        bottom: '10%',\n        x: 'center',\n        data: list,\n        itemWidth: 16,\n        itemHeight: 16,\n        itemGap: 10,\n        icon: 'roundRect',\n        textStyle: {\n            color: '#333',\n            padding: [10, 1, 10, 0],\n        },\n        selectedMode: false,\n    },\n    series: [\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((90 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#fdcb9b',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((180 + angle) * Math.PI) / 180,\n                        endAngle: ((270 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#fdcb9b',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((270 + -angle) * Math.PI) / 180,\n                        endAngle: ((40 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#fdcb9b',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((90 + -angle) * Math.PI) / 180,\n                        endAngle: ((220 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#fdcb9b',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 90 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#fdcb9b', //粉\n                        fill: '#fdcb9b',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5', //绿点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 270 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#fdcb9b', //绿\n                        fill: '#fdcb9b',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: '吃猪肉频率',\n            type: 'pie',\n            radius: ['58%', '35%'],\n            silent: true,\n            clockwise: true,\n            startAngle: 180,\n            z: 0,\n            zlevel: 0,\n            color: color,\n            itemStyle: {\n                normal: {\n                    borderColor: 'rgba(255,255,255)',\n                    borderWidth: '15',\n                },\n            },\n            label: {\n                normal: {\n                    position: 'inside',\n                    formatter: function (params) {\n                        return params.percent + '%';\n                    },\n\n                    color: '#fff',\n                    fontSize: 10,\n                },\n            },\n            data: list,\n        },\n        {\n            type: 'pie',\n            zlevel: 3,\n            silent: true,\n            radius: ['30%', '31%'],\n            //  center: [index * 34 + 15.5 + '%', '45%'],\n            label: {\n                normal: {\n                    show: true,\n                    position: 'center',\n                    color: '#4c4a4a',\n                    formatter: '{total|' +178 + '}' + '\\n\\r' + '{active|总数}',\n                    rich: {\n                        total: {\n                            fontSize: 35,\n                            fontFamily: '微软雅黑',\n                            color: '#454c5c',\n                        },\n                        active: {\n                            fontFamily: '微软雅黑',\n                            fontSize: 16,\n                            color: '#6c7a89',\n                            lineHeight: 30,\n                        },\n                    },\n                },\n                emphasis: {\n                    //中间文字显示\n                    show: true,\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                },\n            },\n            data: dotArr(),\n        },\n    ],\n};\n\nfunction dotArr() {\n    let dataArr = [];\n    for (var i = 0; i < 80; i++) {\n        if (i % 2 === 0) {\n            dataArr.push({\n                name: (i + 1).toString(),\n                value: 1,\n                itemStyle: {\n                    normal: {\n                        color: '#0CD3DB',\n                        borderWidth: 1,\n                        borderColor: '#0CD3DB',\n                    },\n                },\n            });\n        } else {\n            dataArr.push({\n                name: (i + 1).toString(),\n                value: 2,\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                        borderColor: 'rgba(0,0,0,0)',\n                    },\n                },\n            });\n        }\n    }\n    return dataArr;\n}\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\n\nfunction draw() {\n    angle = angle + 3;\n    myChart.setOption(option, true);\n    //window.requestAnimationFrame(draw);\n}\n\nsetInterval(function () {\n    //用setInterval做动画感觉有问题\n    draw();\n}, 100);\n","html":"","externalScripts":"","updaterUID":"obd-o2LT5SPsRm62u1sF90rM6cs58MmkP66","theme":"","layout":"","viewCount":0,"userName":"j***9","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0jCdJFX_F.png?v=1632274435893","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie"],"customTags":[],"updaterUserName":"j***9"}}