{"status":0,"data":{"cid":"xFKNcru2yI","authorUid":"obd-oDlaxer9yKZ1NJHDp0MH98WZjrYze1C","authorUserName":"l***9","title":"饼图tooltip自动滚动示例","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-06-04T09:47:19.000Z","lastUpdateTime":"2021-06-04T09:47:19.000Z","auth":2,"uid":"obd-oDlaxer9yKZ1NJHDp0MH98WZjrYze1C","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-09T05:46:51.000Z","code":"//具体数据调用api获取\r\n              var pieData = [\r\n                  {value: 335, name: '美食'},\r\n                  {value: 310, name: '汽车服务'},\r\n                  {value: 234, name: '酒店'},\r\n                  {value: 135, name: '公司企业'},\r\n                  {value: 1548, name: '休闲娱乐'},\r\n                  {value: 335, name: '生活服务'},\r\n                  {value: 310, name: '丽人'},\r\n                  {value: 234, name: '医疗'},\r\n                  {value: 135, name: '教育培训'},\r\n                  {value: 1548, name: '其他'},\r\n              ];\r\n\r\n\r\n              option = {\r\n                  title: {\r\n                      show: false,\r\n                      text: '饼图程序调用高亮示例',\r\n                      left: 'center'\r\n                  },\r\n                  width: '45%',\r\n\r\n                  color:['#24a0ff','#0964ad','#dfebff','#8dc9fd','#0e4270','#24a0ff','#0964ad','#dfebff','#8dc9fd','#0e4270'],\r\n                  tooltip: {\r\n                      trigger: 'item',\r\n                      formatter: '{b} : {c} ({d}%)'\r\n                  },\r\n                  legend: [{\r\n                      id: \"stock-model1\",\r\n                      icon: 'circle',\r\n                      itemGap: 15,\r\n                      itemWidth: 9,\r\n                      type: 'scroll',\r\n                      orient: 'vertical',\r\n                      top: 'center',\r\n                      // right: '130px',\r\n                      left: '43%',\r\n                      data: ['美食', '汽车服务', '酒店', '公司企业', '休闲娱乐'\r\n                      ],\r\n                      formatter: function (name) {\r\n                          // pieData是饼图的数组数据\r\n                          let data = pieData;\r\n                          let total = 0;\r\n                          let tarValue = 0;\r\n                          for (let i = 0, l = data.length; i < l; i++) {\r\n                              total += parseInt(data[i].value);\r\n                              if (data[i].name == name) {\r\n                                  tarValue = data[i].value;\r\n                              }\r\n                          }\r\n                          var arr = [\r\n                              '{name|'+name+'}','{value|'+((tarValue/total)*100).toFixed(0)+'%}'\r\n                          ]\r\n                          return arr.join('');\r\n                      },\r\n                      itemStyle:{\r\n                          borderRadius: 20,\r\n\r\n                      },\r\n                      textStyle:{\r\n                          rich:{\r\n                              name:{\r\n                                  fontSize:14,\r\n                                  fontFamily: 'Alibaba PuHuiTi Regular',\r\n                                  color: '#FFFFFF',\r\n                                  fontWeight: 400,\r\n                                  // verticalAlign:'top',\r\n                                  // align:'center',\r\n                                  // padding:[0,0,28,0]\r\n                                  width: 66\r\n                              },\r\n                              value:{\r\n                                  fontSize:14,\r\n                                  fontFamily: 'Alibaba PuHuiTi Regular',\r\n                                  color: '#FFFFFF',\r\n                                  fontWeight: 400,\r\n                                  // align:'center',\r\n                                  // padding:[0,10,0,0],\r\n                                  // lineHeight:25\r\n                                  align: \"right\",\r\n                                  width: 26\r\n                              }\r\n                          }\r\n                      }\r\n                  },{\r\n                      id: \"stock-model2\",\r\n                      icon: 'circle',\r\n                      itemGap: 15,\r\n                      itemWidth: 9,\r\n                      type: 'scroll',\r\n                      orient: 'vertical',\r\n                      top: 'center',\r\n                      // right: 'right',\r\n                      left: '75%',\r\n                      data: ['生活服务', '丽人', '医疗', '教育培训', '其他'\r\n                      ],\r\n                      formatter: function (name) {\r\n                          // pieData是饼图的数组数据\r\n                          let data = pieData;\r\n                          let total = 0;\r\n                          let tarValue = 0;\r\n                          for (let i = 0, l = data.length; i < l; i++) {\r\n                              total += parseInt(data[i].value);\r\n                              if (data[i].name == name) {\r\n                                  tarValue = data[i].value;\r\n                              }\r\n                          }\r\n                          var arr = [\r\n                              '{name|'+name+'}','{value|'+((tarValue/total)*100).toFixed(0)+'%}'\r\n                          ]\r\n                          return arr.join('');\r\n                      },\r\n                      textStyle:{\r\n                          rich:{\r\n                              name:{\r\n                                  fontSize:14,\r\n                                  fontFamily: 'Alibaba PuHuiTi Regular',\r\n                                  color: '#FFFFFF',\r\n                                  fontWeight: 400,\r\n                                  // verticalAlign:'top',\r\n                                  // align:'center',\r\n                                  // padding:[0,0,28,0]\r\n                                  width: 66\r\n                              },\r\n                              value:{\r\n                                  fontSize:14,\r\n                                  fontFamily: 'Alibaba PuHuiTi Regular',\r\n                                  color: '#FFFFFF',\r\n                                  fontWeight: 400,\r\n                                  // align:'center',\r\n                                  // padding:[0,10,0,0],\r\n                                  // lineHeight:25\r\n                                  align: \"right\",\r\n                                  width: 26\r\n                              }\r\n                          }\r\n                      }\r\n                  }],\r\n                  series: [\r\n                      {\r\n                          name: '访问来源',\r\n                          type: 'pie',\r\n                          radius: ['40%', '70%'],\r\n                          // radius: '55%',\r\n                          center: ['50%', '50%'],\r\n                          label: {\r\n                              normal: {\r\n                                  position: 'inner',\r\n                                  show : false\r\n                              }\r\n                          },\r\n                          selectedMode: true,\r\n                          selectedOffset: 10,\r\n                          data: pieData,\r\n                          emphasis: {\r\n                              // scaleSize: 15,//放大效果\r\n                              itemStyle: {\r\n                                  // borderColor: 'rgb(255,255,255)',\r\n                                  // borderWidth: 3,\r\n                              }\r\n                          }\r\n                      }\r\n                  ]\r\n              };\r\n\r\n              app.currentIndex = -1;\r\n\r\n              setInterval(function () {\r\n                  var dataLen = option.series[0].data.length;\r\n                  // 取消之前高亮的图形\r\n                  myChart.dispatchAction({\r\n                      type: 'downplay',\r\n                      seriesIndex: 0,\r\n                      dataIndex: app.currentIndex\r\n                  });\r\n                  app.currentIndex = (app.currentIndex + 1) % dataLen;\r\n\r\n                  // 高亮当前图形\r\n                  myChart.dispatchAction({\r\n                      type: 'select',\r\n                      seriesIndex: 0,\r\n                      dataIndex: app.currentIndex\r\n                  });\r\n\r\n                  // 显示 tooltip\r\n                  myChart.dispatchAction({\r\n                      type: 'showTip',\r\n                      seriesIndex: 0,\r\n                      dataIndex: app.currentIndex\r\n                  });\r\n\r\n                  myChart.dispatchAction({\r\n                      type: 'legendScroll',\r\n                      scrollDataIndex: app.currentIndex,\r\n                      legendId: 'stock-model',\r\n                  });\r\n              }, 1000);\r\n\r\n            //   option && myChart.setOption(option);","html":"","externalScripts":"","updaterUID":"obd-oDlaxer9yKZ1NJHDp0MH98WZjrYze1C","theme":"","layout":"","viewCount":0,"userName":"l***9","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xFKNcru2yI.png?v=1623217611322","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"l***9"}}