{"status":0,"data":{"cid":"xAxIhQBaKd","authorUid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","authorUserName":"林***影","title":"3/4圆进度条","description":"3/4圆进度条","latestVersion":3,"alwaysLatest":0,"createTime":"2021-08-18T07:36:45.000Z","lastUpdateTime":"2021-08-18T07:48:02.000Z","auth":1,"uid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-18T07:48:02.000Z","code":"//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nconst getCirlPoint = (x0, y0, r, angle) => {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n};\n\nconst getLine = ({ name, endAngle, stroke }) => {\n    return {\n        name,\n        type: 'custom',\n        coordinateSystem: 'none',\n        renderItem: function (params, api) {\n            return {\n                type: 'arc',\n                shape: {\n                    cx: api.getWidth() / 2,\n                    cy: api.getHeight() / 2,\n                    r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                    startAngle: (270 * Math.PI) / 180,\n                    endAngle: (endAngle * Math.PI) / 180,\n                },\n                style: {\n                    stroke,\n                    fill: 'transparent',\n                    lineWidth: 1.5,\n                },\n                silent: true,\n            };\n        },\n        data: [0],\n    };\n};\n\nconst getDot = ({ name, circleR, endAngle, circleColor, text, textColor, x, y }) => {\n    return {\n        name,\n        type: 'custom',\n        coordinateSystem: 'none',\n        renderItem: function (params, api) {\n            let x0 = api.getWidth() / 2;\n            let y0 = api.getHeight() / 2;\n            let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n            let point = getCirlPoint(x0, y0, r, endAngle);\n            return {\n                type: 'group',\n                children: [\n                    {\n                        type: 'circle',\n                        shape: {\n                            cx: point.x,\n                            cy: point.y,\n                            r: circleR,\n                        },\n                        style: {\n                            stroke: circleColor,\n                            fill: circleColor,\n                        },\n                        silent: true,\n                    },\n                    {\n                        type: 'text',\n                        style: {\n                            text,\n                            fill: textColor,\n                            x: point.x + x,\n                            y: point.y + y,\n                            fontSize: 20,\n                        },\n                    },\n                ],\n            };\n        },\n        data: [0],\n    };\n};\n\noption = {\n    backgroundColor: '#061740',\n    series: [],\n};\n\nconst progress = 100; // -89.99 - 180\n\noption.series.push(\n    getLine({\n        name: '背景圈',\n        endAngle: 180,\n        stroke: '#cccccc',\n    })\n);\noption.series.push(getLine({ name: '进度圈', endAngle: progress, stroke: '#ff0000' }));\noption.series.push(\n    getDot({\n        name: '进度圈点',\n        circleR: 4,\n        endAngle: progress,\n        circleColor: '#ff0000',\n        text: '',\n        textColor: '',\n        x: 0,\n        y: 0,\n    })\n);\noption.series.push(\n    getDot({\n        name: '点1',\n        circleR: 6,\n        endAngle: -90,\n        circleColor: '#ff0000',\n        text: '项目立项',\n        textColor: '#ffffff',\n        x: -10,\n        y: -40,\n    })\n);\noption.series.push(\n    getDot({\n        name: '点2',\n        circleR: 6,\n        endAngle: -22.5,\n        circleColor: '#ff0000',\n        text: '项目实施',\n        textColor: '#ffffff',\n        x: 20,\n        y: -12,\n    })\n);\noption.series.push(\n    getDot({\n        name: '点3',\n        circleR: 6,\n        endAngle: 45,\n        circleColor: '#ff0000',\n        text: '项目结题',\n        textColor: '#ffffff',\n        x: 20,\n        y: -10,\n    })\n);\noption.series.push(\n    getDot({\n        name: '点4',\n        circleR: 6,\n        endAngle: 112.5,\n        circleColor: '#ccc',\n        text: '成果培育',\n        textColor: '#ffffff',\n        x: 0 - '成果培育'.length * 20,\n        y: 20,\n    })\n);\noption.series.push(\n    getDot({\n        name: '点5',\n        circleR: 6,\n        endAngle: 180,\n        circleColor: '#cc',\n        text: '成果申报',\n        textColor: '#ffffff',\n        x: 0 - ('成果申报'.length + 1) * 20,\n        y: -10,\n    })\n);\n","html":"","externalScripts":"","updaterUID":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","theme":"","layout":"","viewCount":0,"userName":"林***影","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xAxIhQBaKd.png?v=1629272882199","isCustomThumbnail":0,"builtinTags":["category-work","series-custom"],"customTags":[],"updaterUserName":"林***影"}}