{"status":0,"data":{"cid":"xKW0GMGJhk","authorUid":"bd-90050728","authorUserName":"刘***6","title":"两个地图之间飞线效果","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2019-08-28T09:26:13.000Z","lastUpdateTime":"2019-08-28T09:26:13.000Z","auth":2,"uid":"bd-90050728","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-28T09:44:11.000Z","code":"//从省会城市基础地理坐标数据,转换 为散点图的系列数据;\nvar convertProvinceData = function() {\n    var res = [];\n    for (let key in provinceGeoCoordMap) {\n         res.push({\n             name: key,\n             value: provinceGeoCoordMap[key],\n         });\n    }\n    return res;\n};\n//从山东地图中的地理坐标数据转换为 散点图的系列数据;\nvar mapJson = echarts.getMap('shandong').geoJson.features;\nvar convertCityData = function(){\n    \n    var res = [];\n    for(let index in mapJson){\n        res.push(\n            {\n                name:mapJson[index].properties.name,\n                value:mapJson[index].properties.center\n            }    \n        );\n    }\n    console.log(JSON.stringify(res));\n    return res;\n}\n\nvar data = [\n  [\n      [116.405285,39.904989],[117.000923,36.675807]\n  ],\n  [\n      [117.190182,39.125596],[120.355173,36.082982]\n  ],\n  [\n      [114.502461,38.045474],[118.047648,36.814939]\n  ],\n  [\n      [112.549248,37.857014],[117.557964,34.856424]\n  ],\n  [\n      [111.670801,40.818311],[118.66471,37.434564]\n  ],\n  [\n      [123.429096,41.796767],[121.391382,37.539297]\n  ],\n  [\n      [126.642464,45.756967],[119.107078,36.70925]\n  ],\n  [\n      [121.472644,31.231706],[116.587245,35.415393]\n  ],\n  [\n      [118.767413,32.041544],[117.129063,36.194968]\n  ],\n  [\n      [119.306239,26.075302],[122.116394,37.509691]\n  ],\n];\n//从两个地图的的地理坐标 转换为飞线数据\nvar convertData = function(){\n    var res = [];\n    for(let index in data){\n\t    var from = myChart.convertToPixel({geoIndex:0},data[index][0]);\n\t    from = myChart.convertFromPixel('grid',from);\n\t    var to = myChart.convertToPixel({geoIndex:1},data[index][1]);\n\t    to = myChart.convertFromPixel('grid',to);\n        res.push({\n            coords:[from,to]\n        });\n    }\n\t  \n      return res;\n};\n\n\n\n\n\noption = {\n    title: {\n        text: '平面飞线图'\n    },\n    grid:{\n        \n    },\n    xAxis: {\n        type:'value',\n        show:false,\n        min:0,\n        max:100,\n        position:'top'\n    },\n    yAxis: {\n        type:'value',\n        show:false,\n        min:0,\n        max:100,\n        inverse:true\n    },\n    geo:[\n       {\n            id:'china',\n            map:'china',\n            roam:false,\n            center:[127,20],\n            zoom:0.6,\n        },\n        {\n            id:'shandong',\n            map:'shandong',\n            roam:false,\n            center: [113.97, 39.01],\n            zoom:0.5,\n            \n        }\n    ],\n    series:[\n        {\n            id:'zuobiao',\n            name:'省会坐标',\n            type:'scatter',\n            geoIndex:0,\n            coordinateSystem:'geo',\n            symbol:'circle',\n            symbolSize:function(val){\n                return 10;\n            },\n            data:convertProvinceData(),\n            label:{\n                normal:{\n                    show:true,\n                    formatter:function(params){\n                        return params.data.name;\n                    },\n                    position:'right'\n                },\n            },\n            itemStyle:{\n                normal:{\n                    color:'#F62157'\n                }  \n            },\n        },    \n        {\n            id:'cityzuobiao',\n            name:'地市坐标',\n            type:'scatter',\n            geoIndex:1,\n            coordinateSystem:'geo',\n            symbol:'circle',\n            symbolSize:function(val){\n                return 10;\n            },\n            data:convertCityData(),\n            label:{\n                normal:{\n                    show:true,\n                    formatter:function(params){\n                        return params.data.name;\n                    },\n                    position:'right'\n                },\n            },\n            itemStyle:{\n                normal:{\n                    color:'#F62157'\n                }  \n            },\n        },    \n    ]\n};\nif(!app.inNode){\n    setTimeout(function() {\n        myChart.setOption({\n            series: [\n                {\n                    id:'feixian',\n                    type:'lines',\n                    coordinateSystem:'cartesian2d',\n                    xAxisIndex:0,\n                    yAxisIndex:0,\n                    /*data:[\n                        {\n                            coords:[\n                                [0,0],[40,40]    \n                            ]\n                        }    \n                    ],*/\n                    data: convertData(),\n                    effect: {\n                        show: true,\n                        trailLength: 0,\n                        symbol: 'arrow',\n                        color: '#00FFFF',\n                        symbolSize: 8\n                    },\n                    lineStyle:{\n                        curveness:0.6\n                    }\n                }\n            ]\n        });\n        \n    }, 10);\n    \n}\n","html":"","externalScripts":"/dep/echarts/map/js/china.js,https://gallery.echartsjs.com/asset/get/s/data-1566958417505-FcloeE6NL.js,https://gallery.echartsjs.com/asset/get/s/data-1566970916860-cwFZaRQbO.js","updaterUID":"bd-90050728","theme":"","layout":"","viewCount":2079,"userName":"刘***6","commentCount":1,"starCount":21,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKW0GMGJhk.png?v=1566985451578","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-lines","series-scatter","title"],"customTags":[],"updaterUserName":"刘***6"}}