{"status":0,"data":{"cid":"xHk8oNXbff","authorUid":"bd-2573924606","authorUserName":"小***o","title":"模拟攻击图","description":"基于百度地图的模拟攻击图","latestVersion":2,"alwaysLatest":1,"createTime":"2017-12-15T10:31:58.000Z","lastUpdateTime":"2017-12-15T10:31:58.000Z","auth":2,"uid":"bd-2573924606","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2018-03-07T10:13:21.000Z","code":"var geoCoordMap = {\r\n    '宝安区':[113.888821,22.560663],\r\n    '南山区':[113.935121,22.538606],\r\n    '福田区':[114.059878,22.527924],\r\n    '罗湖区':[114.138551,22.555724],\r\n    '龙华区':[114.04148,22.75794],\r\n    '盐田区':[114.242126,22.563172],\r\n    '坪山区':[114.35366,22.715809],\r\n    '龙岗区':[114.252474,22.72701]\r\n};\r\n//模拟数据\r\nvar attackedData1 = [\r\n    [{ name: '南山区' }, { name: '宝安区', value: 95 }],\r\n    [{ name: '南山区' }, { name: '福田区', value: 90 }],\r\n    [{ name: '南山区' }, { name: '罗湖区', value: 80 }],\r\n    [{ name: '南山区' }, { name: '龙华区', value: 70 }],\r\n    [{ name: '南山区' }, { name: '盐田区', value: 50 }],\r\n    [{ name: '南山区' }, { name: '坪山区', value: 40 }],\r\n    [{ name: '南山区' }, { name: '龙岗区', value: 30 }]\r\n];\r\nvar planePath = 'path://M410.642 383.967l-119.088 42.143c-34.382 12.167-47.186-3.357-27.037-35.227l219.78-347.616c19.906-31.486 52.821-31.872 72.969 0l219.78 347.617c19.906 31.486 8.045 47.642-27.037 35.227l-119.088-42.143-89.078 559.012c-11.632 72.997-30.474 73.105-42.123 0l-89.078-559.012z';\r\n /**\r\n * lines的数据格式化\r\n *\r\n * @param    {object}  geoData     中心城市对应的地理坐标数据\r\n * @param    {object}  data        \r\n * @param    {boolean}  origin  false(default)-> 中心点作为终点;true -> 中心点作为起点;\r\n * @returns  {object} {origin:起点，destination:终点，coord：对应的坐标}\r\n *\r\n */\r\nfunction convertLinesData(geoData, data, origin) {\r\n    var tGeoDt = [];\r\n    var centerName,therName;\r\n    var i = 0, \r\n    len = data.length;\r\n    if (origin) {\r\n        for (i; i < len; i++) {\r\n            centerName = data[i][0].name;\r\n            otherName= data[i][1].name;\r\n            if (centerName != otherName) {\r\n                tGeoDt.push({\r\n                    origin:centerName,\r\n                    destination:otherName,\r\n                    coords: [geoData[centerName], geoData[otherName]]//[起点，终点]\r\n                });\r\n                \r\n            }\r\n        }\r\n    } else {\r\n        for (i; i < len; i++) {\r\n            centerName = data[i][0].name;\r\n            otherName= data[i][1].name;\r\n            if (centerName != otherName) {\r\n                tGeoDt.push({\r\n                    origin:otherName,\r\n                    destination:centerName,\r\n                    coords: [geoData[otherName], geoData[centerName]]//[起点，终点]\r\n                });\r\n                \r\n            }\r\n        }\r\n    }\r\n    return tGeoDt;\r\n}\r\n\r\n/**\r\n * scatter的数据格式化\r\n *\r\n * @param    {object}  geoData     中心城市对应的地理坐标数据\r\n * @param    {object}  data        \r\n * @param    {string}  centerName    中心点\r\n * @returns  {object}\r\n *\r\n */\r\nfunction convertScatterData(geoData, data, centerName) {\r\n    var tGeoDt = [];\r\n    for (var i = 0, len = data.length; i < len; i++) {\r\n        var tName = data[i][1].name\r\n        if (centerName != tName) {\r\n            tGeoDt.push({\r\n                name: tName,\r\n                value: [geoData[tName][0],geoData[tName][1],data[i][1].value]\r\n            });\r\n        }\r\n\r\n    }\r\n    tGeoDt.push({\r\n        name: centerName,\r\n        value: geoData[centerName],\r\n        symbolSize: 15,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ff0000',\r\n                borderColor: '#000'\r\n            }\r\n        }\r\n    });\r\n    return tGeoDt;\r\n}\r\n \r\n//多个被攻击点颜色设置\r\nvar color = ['#ffffff', '#ffa022', '#46bee9'];\r\nvar series = [];\r\n[['南山区', attackedData1]].forEach(function (item, i) {\r\n    series.push(\r\n        //设置尾迹效果\r\n        {\r\n            name: item[0],\r\n            type: 'lines',\r\n             coordinateSystem: 'bmap',\r\n            zlevel: 1,\r\n            //线特效的配置\r\n            effect: {\r\n                show: true,\r\n                //特效动画的时间\r\n                period: 6,\r\n                //特效尾迹的长度\r\n                trailLength: 0.7,\r\n                //特效尾迹的顔色\r\n                color: '#fff',\r\n                symbolSize: 3\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: color[i],\r\n                    width: 0,\r\n                    //边的曲度\r\n                    curveness: 0.2\r\n                }\r\n            },\r\n            data: convertLinesData(geoCoordMap, item[1])\r\n        },\r\n        //设置飞机图标\r\n        {\r\n            name: item[0],\r\n            //用于带有起点和终点信息的线数据的绘制\r\n            type: 'lines',\r\n             coordinateSystem: 'bmap',\r\n            zlevel: 2,\r\n            //线两端的标记类型\r\n            symbol: ['none', 'none'],\r\n            symbolSize: 10,\r\n            effect: {\r\n                show: true,\r\n                period: 6,\r\n                trailLength: 0,\r\n                //特效图形的标记\r\n                symbol: planePath,\r\n                symbolSize: 15\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#00ffff',\r\n                    width: 1,\r\n                    opacity: 0.6,\r\n                    curveness: 0.2\r\n                }\r\n            },\r\n            data: convertLinesData(geoCoordMap, item[1])\r\n        },\r\n        {\r\n            name: item[0],\r\n            //带有涟漪特效动画\r\n            type: 'effectScatter',\r\n            //该系列使用的坐标系\r\n            coordinateSystem: 'bmap',\r\n            zlevel: 2,\r\n            //涟漪特效相关配置\r\n            rippleEffect: {\r\n                //波纹的绘制方式\r\n                brushType: 'stroke'\r\n            },\r\n            //图形上的文本标签\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    formatter: '{b}'\r\n                }\r\n            },\r\n            symbolSize: function (val) {\r\n                return val[2] / 5; ////比例\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    color: color[i]\r\n                }\r\n            },\r\n            data: convertScatterData(geoCoordMap, item[1], item[0])\r\n        }\r\n    );\r\n}); \r\nconsole.log(series);\r\nvar option = {\r\n    title: {\r\n        text: '深圳市攻击图 - 基于百度地图',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    bmap: {\r\n        center: [114.059781,22.65369], // 中心位置坐标\r\n        zoom: 11, // 地图缩放比例\r\n        roam: true, // 开启用户缩放\r\n        mapStyle: {\r\n            'styleJson': [{\r\n                'featureType': 'water',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'color': '#031628'\r\n                }\r\n            }, {\r\n                'featureType': 'land',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#000102'\r\n                }\r\n            }, {\r\n                'featureType': 'highway',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }, {\r\n                'featureType': 'arterial',\r\n                'elementType': 'geometry.fill',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'arterial',\r\n                'elementType': 'geometry.stroke',\r\n                'stylers': {\r\n                    'color': '#0b3d51'\r\n                }\r\n            }, {\r\n                'featureType': 'local',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'railway',\r\n                'elementType': 'geometry.fill',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'railway',\r\n                'elementType': 'geometry.stroke',\r\n                'stylers': {\r\n                    'color': '#08304b'\r\n                }\r\n            }, {\r\n                'featureType': 'subway',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'lightness': -70\r\n                }\r\n            }, {\r\n                'featureType': 'building',\r\n                'elementType': 'geometry.fill',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'all',\r\n                'elementType': 'labels.text.fill',\r\n                'stylers': {\r\n                    'color': '#857f7f'\r\n                }\r\n            }, {\r\n                'featureType': 'all',\r\n                'elementType': 'labels.text.stroke',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'building',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#022338'\r\n                }\r\n            }, {\r\n                'featureType': 'green',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#062032'\r\n                }\r\n            }, {\r\n                'featureType': 'boundary',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'color': '#465b6c'\r\n                }\r\n            }, {\r\n                'featureType': 'manmade',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'color': '#022338'\r\n                }\r\n            }, {\r\n                'featureType': 'label',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            },{\r\n                    \"featureType\": \"district\",\r\n                    \"elementType\": \"labels.text.fill\",\r\n                    \"stylers\": {\r\n                              \"color\": \"#ffffffff\"\r\n                    }\r\n          },\r\n          {\r\n                    \"featureType\": \"district\",\r\n                    \"elementType\": \"labels.text.stroke\",\r\n                    \"stylers\": {\r\n                              \"color\": \"#ff0000ff\"\r\n                    }\r\n          }]\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,http://api.map.baidu.com/api?v=2.0&ak=5GsYVQEmdBDm11zrpw5cdg89ch5O0pgz","updaterUID":"bd-2573924606","theme":"","layout":"","viewCount":103,"userName":"小***o","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHk8oNXbff.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"小***o"}}