{"status":0,"data":{"cid":"x29VmrBMPR","authorUid":"obd-ojo2UCsOoa8oFys9pVbk1xkiMtyAPEo","authorUserName":"安***c","title":"多类型切割占比环形图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-09-29T09:26:10.000Z","lastUpdateTime":"2021-09-29T09:31:45.000Z","auth":2,"uid":"obd-ojo2UCsOoa8oFys9pVbk1xkiMtyAPEo","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-29T09:31:45.000Z","code":";(function(Number) {\n    // 乘法\n    Number.prototype.mul = function(arg, acc) {\n        var m = 0\n        var s1 = this.toString()\n        var s2 = arg.toString()\n        try {\n            m += s1.split('.')[1].length\n        } catch (e) {\n            // console.log('catch mul', e);\n        }\n        try {\n            m += s2.split('.')[1].length // m是累加结果\n        } catch (e) {\n            // console.log(e)\n        }\n        var result = (Number(s1.replace('.', '')) * Number(s2.replace('.', ''))) / Math.pow(10, m)\n        // 小数位数处理\n        if (acc) {\n            return Number(Number(result).toFixed(parseInt(acc)))\n        } else {\n            return result\n        }\n    }\n})(Number)\nlet titleData = [];\nlet seriesData = [];\nlet total = 0;\nlet percent_total = [0];\nlet render_data = [\n    { bq_bm: '105', value: 19, percent: 0.06, key: '儿童' },\n    { bq_bm: '100', value: 76, percent: 0.27, key: '青少年' },\n    { bq_bm: '103', value: 57, percent: 0.20, key: '中年' },\n    { bq_bm: '102', value: 29, percent: 0.10, key: '老年' },\n     { bq_bm: '', value: 12, percent: 0.04, key: '成年' },\n    { bq_bm: '', value: 91, percent: 0.33, key: '其他' },\n];\nfor (const item of render_data) {\n      total += item.value ? item.value : 0\n  }\nrender_data.forEach((item,index)=>{\n    percent_total.push(percent_total[index] + item.value)\n    titleData.push({\n            text: '(' + item.percent.mul(100) + '%)' + '\\n\\n\\n\\n\\n',\n            left: index * 10 +9.8 + '%',\n            top: '41%',\n            textAlign: 'center',\n            textStyle: {\n                fontSize: '10',\n                color: '#fff',\n                fontWeight: '200',\n            },\n            subtext: `${item.value}`,\n            subtextStyle: {\n                fontSize: '12',\n                color: 'F0FFFF',\n                fontWeight: '200',\n                verticalAlign: 'top',\n                ellipsis: '...',\n            },\n        });\n        titleData.push({\n                        text: '__',\n                        left: index * 10 + 9.9 + '%',\n                        bottom: '50%',\n                        textAlign: 'center',\n                        textStyle: {\n                            color: '#8DFFD5',\n                            fontWeight: 'blod',\n                        },\n                    })\n            seriesData.push(\n                {\n                    type: 'pie',\n                    clockWise: false, // 逆时针\n                    radius: ['40', '70'],\n                    startAngle: (percent_total[index] / total) * 360 + 90,\n\n                    center: [index * 10 + 10 + '%', '40%'],\n                    hoverAnimation: false,\n                    label: {\n                        normal: {\n                            position: 'center',\n                        },\n                    },\n                    data: [\n                        {\n                            value: item.value,\n                            name: '-',\n                            itemStyle: {\n                                normal: {\n                                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#81DB93',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#3AC1F3',\n                                        },\n                                    ]),\n                                },\n                            },\n                            label: {\n                                normal: {\n                                    show: false,\n                                },\n                            },\n                        },\n                        {\n                            value: total - item.value,\n                            name: item.key,\n                            tooltip: {\n                                show: true,\n                            },\n                            itemStyle: {\n                                normal: {\n                                    color: '#244f82',\n                                },\n                            },\n                            label: {\n                                normal: {\n                                    formatter: item.value,\n                                    textStyle: {\n                                        fontSize: 12,\n                                        color: '#fff',\n                                    },\n                                },\n                            },\n                        },\n                    ],\n                },\n                /* 中间的小圆环--虚点 */\n                {\n                    name: '',\n                    z: 5,\n                    type: 'pie',\n                    cursor: 'default',\n                    radius: ['37.5', '37.5'],\n                    center: [index * 10 + 10 + '%', '40%'],\n                    hoverAnimation: false,\n                    legendHoverLink: false,\n                    labelLine: {\n                        normal: {\n                            show: false,\n                        },\n                    },\n                    data: [\n                        {\n                            value: 100,\n                            itemStyle: {\n                                borderWidth: 1,\n                                borderColor: {\n                                    type: 'linear',\n                                    x: 1,\n                                    y: 1,\n                                    x2: 0,\n                                    y2: 0,\n                                    colorStops: [\n                                        {\n                                            offset: 0,\n                                            color: '#81DB93', // 0% 处的颜色\n                                        },\n                                        {\n                                            offset: 0.3,\n                                            color: '#164AA5', // 33% 处的颜色\n                                        },\n                                        {\n                                            offset: 0.6,\n                                            color: '#81db93', // 66% 处的颜色\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#164AA5', // 100% 处的颜色\n                                        },\n                                    ],\n                                },\n                                borderType: 'dashed',\n                            },\n                        },\n                    ],\n                },\n            )\n})\n\noption = {\n    backgroundColor: '#182932',\n    title: titleData,\n    series: seriesData,\n};\n","html":"","externalScripts":"","updaterUID":"obd-ojo2UCsOoa8oFys9pVbk1xkiMtyAPEo","theme":"","layout":"","viewCount":0,"userName":"安***c","commentCount":1,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x29VmrBMPR.png?v=1632907570739","isCustomThumbnail":1,"builtinTags":["category-work","series-pie","title"],"customTags":["分割占比","切割","多比例","环形","相同"],"updaterUserName":"安***c"}}