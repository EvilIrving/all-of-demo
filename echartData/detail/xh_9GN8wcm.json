{"status":0,"data":{"cid":"xh_9GN8wcm","authorUid":"obd-o0WODJB5q2Z7mQ4dF189_ukQARQl6Fk","authorUserName":"帅***点","title":"地图","description":"应用:\n    项目-舆情\n    后台管理系统\n链接地址:\n    http://pc.wangjiangwei.top/01-private_jobs/01-popular_feelings/code/pages/index.html\ncanvans画布尺寸\n    width: 1560px;\n    height: 1246px;","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-05T07:17:47.000Z","lastUpdateTime":"2020-06-05T07:17:47.000Z","auth":2,"uid":"obd-o0WODJB5q2Z7mQ4dF189_ukQARQl6Fk","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-05T07:24:09.000Z","code":"/* canvans画布尺寸\r\n    width: 1560px;\r\n    height: 1246px;\r\n    \r\n    css:\r\n    \r\n    \r\n    \t.download_box{\r\n    \t\tposition: relative;\r\n    \t\t// z-index: 2;\r\n    \t}\r\n    \t.download_boxs{\r\n    \t\tposition: absolute;\r\n    \t\tright: 20px;\r\n    \t\ttop: 20px;\r\n    \t}\r\n        \r\n    \t.float_r_btn_nam{\r\n    \t\tfont-size:18px;\r\n    \t\tfont-family:PingFang SC;\r\n    \t\tfont-weight:500;\r\n    \t\tline-height:30px;\r\n    \t\tcolor:rgba(166,166,166,1);\r\n    \t\topacity:1;\r\n    \t}\r\n    \r\n    \t.float_r_btn_down{\r\n    \t\t// width: 54px;\r\n    \t\t// height: 58px;\r\n    \t}\r\n    \t\r\n    \t.map_wrap{}//无样式，只是语义化名称\r\n    \r\n    html:\r\n    \r\n\t\t<div class=\"map_wrap relative\">\r\n\t\t\t<div id=\"map_container\" style=\"height: 1246px;\"></div>\r\n\t\t\t<div class=\"download_box download_boxs\" onclick='downloadFileByBase64(down_map_base64, \"监测范围\")'>\r\n\t\t\t\t<div class=\" flex_c\">\r\n\t\t\t\t\t<!-- 54 * 58 -->\r\n\t\t\t\t\t<img src=\"../img/down.png\" alt=\"\" class=\"float_r_btn_img float_r_btn_down\">\r\n\t\t\t\t\t<span class=\"float_r_btn_nam\">下载</span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\tjs:\r\n    \r\n    \tvar down_map_base64 = '';\r\n    \r\n    \tfunction map_echarts(){\r\n    \t\t// echarts\r\n    \t\tvar dom = document.getElementById(\"map_container\");\r\n    \t\tif(!dom){\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \r\n    \t\tvar myChart = echarts.init(dom);\r\n    \t\tvar app = {};\r\n    \t\toption = null;\r\n    \t\tif (option && typeof option === \"object\") {\r\n    \t\t    myChart.setOption(option, true);\r\n    \t\t}\r\n    \t\t// console.log('map myChart', myChart);\r\n    \t\t// console.log('map myChart.getDataURL ', myChart.getDataURL);\r\n    \t\t// console.log('map myChart.getDataURL() ', myChart.getDataURL());\r\n    \t\tsetTimeout(function() { \r\n    \t\t\tconsole.log('map myChart', myChart);\r\n    \t\t\tdown_map_base64 = myChart.getDataURL?myChart.getDataURL():myChart;\r\n    \t\t},1*1000);\r\n    \t}\r\n    \tmap_echarts();\r\n    \t\r\n    \tfunction down_map(){\r\n    \t\t// alert(123);\r\n    \t\tif(!down_map_base64){\r\n    \t\t\t// aler('空值');\r\n    \t\t\taler('地图图片未生成');\r\n    \t\t\treturn;\r\n    \r\n    \t\t}\r\n    \t\tdownloadFileByBase64(down_map_base64);\r\n    \t}\r\n    \r\n    \tfunction dataURLtoBlob(dataurl) {\r\n    \t    var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n    \t        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n    \t    while (n--) {\r\n    \t        u8arr[n] = bstr.charCodeAt(n);\r\n    \t    }\r\n    \t    return new Blob([u8arr], { type: mime });\r\n    \t}\r\n    \t \r\n    \tfunction downloadFile(url,name='123'){\r\n    \t    var a = document.createElement(\"a\")\r\n    \t    a.setAttribute(\"href\",url)\r\n    \t    a.setAttribute(\"download\",name)\r\n    \t    a.setAttribute(\"target\",\"_blank\")\r\n    \t    let clickEvent = document.createEvent(\"MouseEvents\");\r\n    \t    clickEvent.initEvent(\"click\", true, true);  \r\n    \t    a.dispatchEvent(clickEvent);\r\n    \t}\r\n    \t \r\n    \tfunction downloadFileByBase64(base64,name){\r\n    \t    var myBlob = dataURLtoBlob(base64)\r\n    \t    var myUrl = URL.createObjectURL(myBlob)\r\n    \t    downloadFile(myUrl,name)\r\n    \t}\r\n*/\r\noption = {\r\n    title: {\r\n        text: '监测范围',\r\n        text: '{a| } 监测范围', // 富文本\r\n        top: 25,\r\n        textStyle: {\r\n            fontSize: 26,\r\n            fontWeight: 'normal',\r\n            lineHeight: 27,\r\n            verticalAlign: 'center',\r\n            rich: {\r\n                a: {\r\n                    width: 4,\r\n                    height: 27,\r\n                    // lineHeight: 27,\r\n                    backgroundColor: '#5d71cd',\r\n                    verticalAlign: 'center',\r\n                    // borderRadius: 8,\r\n                },\r\n                b: {\r\n                    width: 13,\r\n                },\r\n            },\r\n        },\r\n    },\r\n\r\n\r\n\r\n\r\n    // 提示框组件 tooltip\r\n    tooltip: {\r\n        // trigger: 'item',\r\n        // formatter 提示框浮层内容格式器，支持字符串模板和回调函数两种形式。\r\n        // 地图 : {a}（系列名称），{b}（区域名称），{c}（合并数值）, {d}（无）\r\n        formatter: '{a}（系列名称），{b}（区域名称），{c}（合并数值）, {d}（无）',\r\n        formatter: function(params, ticket, callback) {\r\n            // return params.seriesName+'<br />'+params.name+'：'+params.value\r\n            return `\r\n\t\t            \t\r\n            \t<div class='map_tooltip_box'>\r\n            \t\t<div class='map_tooltip_title ta_c'>${params.name}</div>\r\n            \t\t<div class='map_tooltip_tip'>文章总数: 55555</div>\r\n            \t\t<div class='map_tooltip_infos flex flex_wrap'>\r\n            \t\t\t<div class='map_tooltip_info flex flex_align_c'>\r\n            \t\t\t\t<div class='map_tooltip_info_point map_tooltip_info_point_wx'></div>\r\n            \t\t\t\t<div class='map_tooltip_info_txt'>微信公众号: 1220</div>\r\n            \t\t\t</div>\r\n            \t\t\t<div class='map_tooltip_info flex flex_align_c'>\r\n            \t\t\t\t<div class='map_tooltip_info_point map_tooltip_info_point_user'></div>\r\n            \t\t\t\t<div class='map_tooltip_info_txt'>客户端: 6532</div>\r\n            \t\t\t</div>\r\n            \t\t\t<div class='map_tooltip_info flex flex_align_c'>\r\n            \t\t\t\t<div class='map_tooltip_info_point map_tooltip_info_point_wb'></div>\r\n            \t\t\t\t<div class='map_tooltip_info_txt'>微博: 1546</div>\r\n            \t\t\t</div>\r\n            \t\t\t<div class='map_tooltip_info flex flex_align_c'>\r\n            \t\t\t\t<div class='map_tooltip_info_point map_tooltip_info_point_web'></div>\r\n            \t\t\t\t<div class='map_tooltip_info_txt'>网站: 4565</div>\r\n            \t\t\t</div>\r\n            \t\t</div>\r\n            \t</div>\r\n\r\n            `;\r\n        },\r\n\r\n        // extraCssText 额外附加到浮层的 css 样式\r\n        extraCssText: 'box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);',\r\n    },\r\n\r\n    // legend 图例组件 - 图例: 例如柱状图颜色对应解释\r\n    legend: {\r\n        orient: 'vertical',\r\n        left: 'left',\r\n        data: ['文章总数'],\r\n\r\n        textStyle: {\r\n            // fontWeight: 'bold',\r\n            fontSize: 15,\r\n        },\r\n\r\n    },\r\n\r\n\r\n    // backgroundColor: 'red',\r\n    legend: {\r\n        show: true,\r\n        selectedMode: false,\r\n\r\n        // orient: 'vertical',\r\n        icon: 'none',\r\n\r\n        // itemWidth : 236,// 图标的宽度\r\n        itemGap: 100, // 172 158 150 default: 10 , 图例每项之间的间隔。横向布局时为水平间隔，纵向布局时为纵向间隔。\r\n        // width: 236*4+172*3,\r\n        // height: 134,// 无效\r\n        top: 134 / 2 + 110, // 20 '20%' 'top', 'middle', 'bottom'\r\n        top: 110,\r\n        left: 77,\r\n\r\n\r\n\r\n        formatter: function(name) {\r\n            console.log('map legend formatter', arguments);\r\n            // return 'Legend formatter  ' + name;\r\n            return `{top|\\n}{name|${name}}\\n{num|614}`;\r\n        },\r\n        textStyle: {\r\n            // backgroundColor: 'red',// 背景图片无效\r\n            borderRadius: 16, // 背景图片无效\r\n            rich: {\r\n                top: {\r\n                    height: 15,\r\n                },\r\n                name: {\r\n                    // width: '100%',\r\n                    // width: 236,\r\n                    // width: 200,\r\n                    width: 236 - 30, // 容器总宽度减去padding\r\n\r\n                    // height: 134,\r\n                    // backgroundColor: 'red',\r\n\r\n                    // width:'96px',\r\n                    height: 45,\r\n                    fontSize: 32,\r\n                    fontFamily: 'PingFang SC',\r\n                    // fontWeight:'bold',\r\n                    // lineHeight: 45,\r\n                    // verticalAlign: 'bottom',\r\n                    color: 'rgba(255,255,255,1)',\r\n                    // margin: [11,0,0,0],// 无效, 无此参数\r\n                    padding: [0, 0, 0, 24],\r\n\r\n                },\r\n                num: {\r\n                    height: 70,\r\n                    fontSize: 45,\r\n                    fontFamily: 'PingFang SC',\r\n                    fontWeight: 'bold',\r\n                    color: 'rgba(255,255,255,1)',\r\n                    padding: [0, 0, 0, 80],\r\n                },\r\n            },\r\n        },\r\n        data: [{\r\n                name: '公众号',\r\n\r\n                // formatter 无效\r\n                formatter: function(name) {\r\n                    return 'legend data formatter ' + name;\r\n                },\r\n\r\n                textStyle: {\r\n                    width: 236,\r\n                    height: 134,\r\n                    // borderColor: 'red',\r\n                    // lineHeight: 134,\r\n                    // backgroundImg: 'url(../img/img 47@2x.png)',\r\n                    backgroundColor: {\r\n                        image: '../img/img 47@2x.png',\r\n                        image: '../img/img 471@2x.png',\r\n                        // 本地生成图片有跨域问题, 请放到线上查看, 或者转化成base64 \r\n                        image: 'http://pc.wangjiangwei.top/01-private_jobs/01-popular_feelings/code/img/img 471@2x.png',\r\n\r\n                    },\r\n                    backgroundColor: '#0FCA8A',\r\n                    // borderRadius: 50, // 背景图片无效\r\n                    color: 'blue',\r\n                },\r\n            },\r\n            {\r\n                name: '微博',\r\n                textStyle: {\r\n                    width: 236,\r\n                    height: 134,\r\n                    backgroundColor: {\r\n                        image: '../img/img 42@2x.png',\r\n                        image: '../img/img 472@2x.png',\r\n                        // 本地生成图片有跨域问题, 请放到线上查看, 或者转化成base64 \r\n                        image: 'http://pc.wangjiangwei.top/01-private_jobs/01-popular_feelings/code/img/img 472@2x.png',\r\n                    },\r\n                    backgroundColor: '#F8A7A7',\r\n                },\r\n            },\r\n            {\r\n                name: '客户端',\r\n                textStyle: {\r\n                    width: 236,\r\n                    height: 134,\r\n                    backgroundColor: {\r\n                        image: '../img/img 43@2x.png',\r\n                    },\r\n                    backgroundColor: '#4996F7',\r\n                },\r\n            },\r\n            {\r\n                name: '网站',\r\n                textStyle: {\r\n                    width: 236,\r\n                    height: 134,\r\n                    backgroundColor: {\r\n                        image: '../img/img 44@2x.png',\r\n                    },\r\n                    backgroundColor: '#FAAF3A',\r\n                },\r\n            },\r\n        ],\r\n\r\n        // textStyle:{\r\n        // \t// fontWeight: 'bold',\r\n        // \tfontSize: 15,\r\n        // },\r\n    },\r\n\r\n\r\n    // color 调色盘颜色列表。如果系列没有设置颜色，则会依次循环从该列表中取颜色作为系列颜色。\r\n    // color: ['#C3D5E6'],\r\n\r\n\r\n    // visualMap: {\r\n    //     // min: 0,\r\n    //     // max: 2500,\r\n    //     // left: 'left',\r\n    //     // top: 'bottom',\r\n    //     // text: ['高', '低'], // 文本，默认为数值文本\r\n    //     // calculable: true,\r\n\r\n    //     color: ['#C3D5E6'],\r\n    //     // inRange: {\r\n    //     //     color: ['#C3D5E6'],\r\n    //     // },\r\n    // },\r\n    // // toolbox 工具栏\r\n    // toolbox: {\r\n    //     show: true,\r\n    //     orient: 'vertical',\r\n    //     left: 'right',\r\n    //     top: 'center',\r\n    //     // feature: {\r\n    //     //     mark: { show: true },\r\n    //     //     dataView: { show: true, readOnly: false },\r\n    //     //     restore: { show: true },\r\n    //     //     saveAsImage: { show: true }\r\n    //     // }\r\n    // },\r\n\r\n    // toolbox: {\r\n    //     feature: {\r\n    //         saveAsImage: {\r\n    //         \tname:'下载',\r\n    //         \ttitle:'下载',\r\n    //         }\r\n    //     }\r\n    // },\r\n\r\n    series: [{\r\n            // name: '地图 serie_name',\r\n            type: 'map',\r\n            name: '公众号',\r\n\r\n            zoom: 1, // number 当前视角的缩放比例。\r\n            // aspectScale: 0.75,// number这个参数用于 scale 地图的长宽比。 最终的 aspect 的计算方式是：geoBoundingRect.width / geoBoundingRect.height * aspectScale\r\n\r\n            top: 340,\r\n            // bottom: 0,\r\n            // left: 0,\r\n            // right: 0,\r\n\r\n            // showLegendSymbol 在图例相应区域显示图例的颜色标识（系列标识的小圆点），存在 legend 组件时生效\r\n            showLegendSymbol: false,\r\n\r\n            mapType: 'china',\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    // areaColor:\"#CF362F\",\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    // borderWidth: .5,//区域边框宽度\r\n                    borderColor: '#FFFFFF', //区域边框颜色\r\n                    areaColor: \"#C3D5E6\", //区域颜色\r\n                },\r\n                emphasis: {\r\n                    // borderWidth: .10,\r\n                    // borderColor: '#CF362F',\r\n                    areaColor: \"#5A66CA\", //区域颜色\r\n                }\r\n            },\r\n            data: [\r\n                // { name: '北京', \r\n                //    \tvalue: [\r\n                //     \t{\r\n                //     \t\tname: '微信公众号',\r\n                //     \t\tvalue: 123,\r\n                //     \t},\r\n                //     \t{\r\n                //     \t\tname: '微博',\r\n                //     \t\tvalue: 123,\r\n                //     \t},\r\n                //     \t{\r\n                //     \t\tname: '客户端',\r\n                //     \t\tvalue: 123,\r\n                //     \t},\r\n                //     \t{\r\n                //     \t\tname: '网站',\r\n                //     \t\tvalue: 123,\r\n                //     \t},\r\n                //     ] \r\n                // },\r\n                {\r\n                    name: '北京',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '天津',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '上海',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '重庆',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '河北',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '河南',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '云南',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '辽宁',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '黑龙江',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '湖南',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '安徽',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '山东',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '新疆',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '江苏',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '浙江',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '江西',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '湖北',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '广西',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '甘肃',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '山西',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '内蒙古',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '陕西',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '吉林',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '福建',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '贵州',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '广东',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '青海',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '西藏',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '四川',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '宁夏',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '海南',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '台湾',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '香港',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: '澳门',\r\n                    value: Math.round(Math.random() * 1000)\r\n                },\r\n                {\r\n                    name: \"南海诸岛\",\r\n                    value: 0,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            opacity: 0,\r\n                            label: {\r\n                                show: false\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n            ]\r\n        },\r\n\r\n        {\r\n            type: 'map',\r\n            name: '微博',\r\n        },\r\n        {\r\n            type: 'map',\r\n            name: '客户端',\r\n        },\r\n        {\r\n            type: 'map',\r\n            name: '网站',\r\n        },\r\n    ],\r\n};","html":"","externalScripts":"","updaterUID":"obd-o0WODJB5q2Z7mQ4dF189_ukQARQl6Fk","theme":"","layout":"","viewCount":1415,"userName":"帅***点","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xh_9GN8wcm.png?v=1591341467347","isCustomThumbnail":1,"builtinTags":["category-work","legend","series-map","title","tooltip"],"customTags":[],"updaterUserName":"帅***点"}}