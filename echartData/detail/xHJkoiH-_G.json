{"status":0,"data":{"cid":"xHJkoiH-_G","authorUid":"bd-3902973793","authorUserName":"xiangcaozhu","title":"温度计","description":"温度计","latestVersion":4,"alwaysLatest":1,"createTime":"2018-02-26T08:55:50.000Z","lastUpdateTime":"2018-02-26T08:55:50.000Z","auth":2,"uid":"bd-3902973793","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.8.0","versionCreateTime":"2018-02-26T09:03:29.000Z","code":"var value = 41.0;\r\nvar kd = [];\r\n// 刻度使用柱状图模拟，短设置3，长的设置5；构造一个数据\r\nfor (var i = 0, len = 130; i <= len; i++) {\r\n    if (i > 100 || i < 30) {\r\n        kd.push('0')\r\n    } else {\r\n        if (i % 5 === 0) {\r\n            kd.push('5');\r\n        } else {\r\n            kd.push('3');\r\n        }\r\n    }\r\n\r\n}\r\nconsole.log(kd)\r\n// 因为柱状初始化为0，温度存在负值，所以，原本的0-100，改为0-130，0-30用于表示负值\r\nfunction getData(value) {\r\n    return [value + 30];\r\n}\r\nvar data = getData(value);\r\nvar mercuryColor = '#fd4d49';\r\nvar borderColor = '#fd4d49';\r\n\r\noption = {\r\n    title: {\r\n        text: '温度计',\r\n        show: false\r\n    },\r\n    yAxis: [{\r\n        show: false,\r\n        min: 0,\r\n        max: 130,\r\n    }, {\r\n        show: false,\r\n        data: [],\r\n        min: 0,\r\n        max: 130,\r\n    }],\r\n    xAxis: [{\r\n        show: false,\r\n        data: []\r\n    }, {\r\n        show: false,\r\n        data: []\r\n    }, {\r\n        show: false,\r\n        data: []\r\n    }, {\r\n        show: false,\r\n        min: -110,\r\n        max: 100,\r\n\r\n    }],\r\n    series: [{\r\n        name: '条',\r\n        type: 'bar',\r\n        // 对应上面XAxis的第一个对象配置\r\n        xAxisIndex: 0,\r\n        data: data,\r\n        barWidth: 18,\r\n        itemStyle: {\r\n            normal: {\r\n                color: mercuryColor,\r\n                barBorderRadius: 0,\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top',\r\n                formatter: function(param) {\r\n                    // 因为柱状初始化为0，温度存在负值，所以，原本的0-100，改为0-130，0-30用于表示负值\r\n                    return param.value - 30 + '°C';\r\n                },\r\n                textStyle: {\r\n                    color: '#ccc',\r\n                    fontSize: '10',\r\n                }\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白框',\r\n        type: 'bar',\r\n        xAxisIndex: 1,\r\n        barGap: '-100%',\r\n        data: [129],\r\n        barWidth: 28,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ffffff',\r\n                barBorderRadius: 50,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外框',\r\n        type: 'bar',\r\n        xAxisIndex: 2,\r\n        barGap: '-100%',\r\n        data: [130],\r\n        barWidth: 38,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                barBorderRadius: 50,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 0,\r\n        symbolSize: 48,\r\n        itemStyle: {\r\n            normal: {\r\n                color: mercuryColor,\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 1,\r\n        symbolSize: 60,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ffffff',\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        xAxisIndex: 2,\r\n        symbolSize: 70,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '刻度',\r\n        type: 'bar',\r\n        yAxisIndex: 1,\r\n        xAxisIndex: 3,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                distance: 5,\r\n                color: '#525252',\r\n                fontSize: 10,\r\n                formatter: function(params) {\r\n                    // 因为柱状初始化为0，温度存在负值，所以，原本的0-100，改为0-130，0-30用于表示负值\r\n                    if (params.dataIndex > 100 || params.dataIndex < 30) {\r\n                        return '';\r\n                    } else {\r\n                        if (params.dataIndex % 5 === 0) {\r\n                            return params.dataIndex - 30;\r\n                        } else {\r\n                            return '';\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        barGap: '-100%',\r\n        data: kd,\r\n        barWidth: 1,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                barBorderRadius: 10,\r\n            }\r\n        },\r\n        z: 0\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-3902973793","theme":"","layout":"","viewCount":12585,"userName":"xiangcaozhu","commentCount":3,"starCount":83,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJkoiH-_G.png?v=1519635809924","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter","title"],"customTags":[],"updaterUserName":"xiangcaozhu"}}