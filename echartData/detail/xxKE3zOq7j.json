{"status":0,"data":{"cid":"xxKE3zOq7j","authorUid":"obd-oMLbfwM7lRUCiBfrIF3uVAHIPC9Qa2u","authorUserName":"t***1","title":"饼图 自动播放动画+阴影效果","description":"如果需要可自行修改","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-15T05:01:04.000Z","lastUpdateTime":"2021-12-15T05:01:04.000Z","auth":2,"uid":"obd-oMLbfwM7lRUCiBfrIF3uVAHIPC9Qa2u","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-12-15T05:01:04.000Z","code":"let index = 0;\nvar colorList = ['#DF3AB9', '#18C79C', '#8555F9', '#F09228'];\nvar data = [\n    {\n        name: '持续加固（加固改造）',\n        value: 41,\n        number: 502.4,\n    },\n    {\n        name: '新建',\n        value: 92,\n        number: 302.1,\n    },\n    {\n        name: '改建',\n        value: 20,\n        number: 502.9,\n    },\n    {\n        name: '扩建',\n        value: 2,\n        number: 666.0,\n    },\n];\n// 自动播放函数\nfunction autoPlay() {\n    var timer = setInterval(function () {\n        console.log(index);\n        myChart.dispatchAction({\n            type: 'hideTip',\n            seriesIndex: 0,\n            dataIndex: index,\n        });\n        // 显示提示框\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: index,\n        });\n        // 取消高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: index === 0 ? 5 : index - 1,\n        });\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: index,\n        });\n        index++;\n        if (index > 5) {\n            index = 0;\n        }\n    }, 3000);\n}\nautoPlay();\nvar newData = [];\n// 加阴影效果\nfor (var i = 0; i < data.length; i++) {\n    newData.push({\n        value: data[i].value,\n        name: data[i].name,\n        itemStyle: {\n            normal: {\n                // borderWidth: 0,\n                shadowBlur: 15,\n                // borderRadius: 1,\n                // borderColor: colorList[i],\n                shadowColor: colorList[i],\n            },\n        },\n    });\n}\noption = {\n    title: {\n        text: '建设性质',\n        left: '24%',\n        top: 'center',\n        // x: 'left',\n        // y: 'center',\n        textStyle: {\n            fontSize: 24,\n        },\n    },\n    tooltip: {\n        trigger: 'item',\n    },\n    legend: {\n        type: 'scroll',\n        orient: 'vertical',\n        right: '15%',\n        top: 'center',\n        //  itemGap: 40,\n        selectedMode: true,\n        icon: 'pin',\n        // shadowBlur:20,\n        // shadowColor:\"#000\",\n        textStyle: {\n            rich: {\n                a: {\n                    color: '#666666',\n                    fontSize: 14,\n                    fontWeight: 500,\n                    width: 30,\n                    padding: [0, 0, 25, 2],\n                },\n                b0: {\n                    // color: colorList[0],\n                    color: '#666666',\n                    fontSize: 14,\n                    fontWeight: 500,\n                    height: 20,\n                    padding: [0, 30, 8, 4],\n                },\n                b1: {\n                    // color:  colorList[1],\n                    fontSize: 20,\n                    padding: [0, 30, 0, 40],\n                },\n                b2: {\n                    // color:  colorList[2],\n                    fontSize: 20,\n                    padding: [0, 30, 0, 40],\n                },\n                b3: {\n                    // color:  colorList[3],\n                    fontSize: 20,\n                    padding: [0, 30, 0, 40],\n                },\n            },\n        },\n        formatter: function (name) {\n            let title = '';\n            var total = 0;\n            var target;\n            var index;\n            var number;\n            for (var i = 0, l = data.length; i < l; i++) {\n                if (data[i].name == name) {\n                    target = data[i].value;\n                    number = data[i].number;\n                    title = data[i].label;\n                    index = i < 6 ? i : 5;\n                }\n            }\n            return `{a| ${name}\\n}{b0| ${target}个   (${number}亿元)}`;\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            center: ['30%', '50%'],\n            radius: ['50%', '70%'],\n            clockwise: true,\n            avoidLabelOverlap: true,\n            hoverOffset: 2,\n            tooltip: {\n                trigger: 'item',\n                formatter: function (params) {\n                    return params.name + '：' + params.value + '个<br>占比：' + params.percent.toFixed(1) + '%';\n                },\n                backgroundColor: '#f3f3f3',\n                textStyle: {\n                    color: '#666666',\n                    fontSize: 14,\n                    fontWeight: 500,\n                },\n                padding: [10, 20],\n                extraCssText: 'box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);',\n            },\n            emphasis: {\n                itemStyle: {\n                    borderColor: '#f3f3f3',\n                    borderWidth: 5,\n                },\n            },\n            //启用鼠标放上去放大效果，这个挺好的\n            itemStyle: {\n                normal: {\n                    color: function (params) {\n                        return colorList[params.dataIndex];\n                    },\n                    // shadowBlur: 20,\n                    // shadowColor: function (params) {\n                    //     return colorListShadow[params.dataIndex];\n                    // },\n                },\n            },\n            label: {\n                show: false,\n                position: 'outside',\n                formatter: '{a|{b}：{d}%}\\n{hr|}',\n                rich: {\n                    hr: {\n                        backgroundColor: 't',\n                        borderRadius: 1,\n                        width: 1,\n                        height: 1,\n                        padding: [1, 1, 0, -4],\n                    },\n                    a: {\n                        padding: [-15, 7, -10, 7],\n                    },\n                },\n            },\n            labelLine: {\n                normal: {\n                    length: 10,\n                    length2: 15,\n                    lineStyle: {\n                        width: 1,\n                    },\n                },\n            },\n            data: newData,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oMLbfwM7lRUCiBfrIF3uVAHIPC9Qa2u","theme":"","layout":"","viewCount":0,"userName":"t***1","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xxKE3zOq7j.png?v=1639544464370","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"t***1"}}