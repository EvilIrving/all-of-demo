{"status":0,"data":{"cid":"x84SuYYBuM","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"旋转饼状图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-25T03:42:17.000Z","lastUpdateTime":"2020-09-25T03:42:17.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-25T03:42:17.000Z","code":"let num = 0;\r\nlet value = 60;\r\noption = {\r\n    backgroundColor: '#142468',\r\n    title: {\r\n        text: '{a|迟到人数}{c|\\n}{c|' + value + '}',\r\n        textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 40,\r\n            fontWeight: '100',\r\n            rich: {\r\n                a: {\r\n                    fontSize: 48,\r\n                    color: '#29EEF3'\r\n                },\r\n\r\n                c: {\r\n                    fontSize: 40,\r\n                    lineHeight: 75,\r\n                    color: '#ffffff',\r\n                    // padding: [5,0]\r\n                }\r\n            }\r\n        },\r\n        x: \"center\",\r\n        y: \"center\"\r\n    },\r\n    series: [{\r\n            type: 'pie',\r\n            zlevel: 1,\r\n            silent: true,\r\n            /*\r\n            radius\r\n            饼图的半径。可以为如下类型：\r\n            number：直接指定外半径值。\r\n            string：例如，'20%'，表示外半径为可视区尺寸（容器高宽中较小一项）的 20% 长度。\r\n            Array.<number|string>：数组的第一项是内半径，第二项是外半径。每一项遵从上述 number string 的描述。\r\n            */\r\n            radius: ['97%', '98%'],\r\n            hoverAnimation: false,\r\n            //color: \"rgba(88,142,197,0.5)\",\r\n            color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#9933FF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#00CCFF' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n            // animation:false,    //charts3 no\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            data: [1]\r\n        },\r\n        {\r\n            type: 'pie',\r\n            zlevel: 2,\r\n            silent: true,\r\n            radius: ['90%', '91%'],\r\n            startAngle: 90,\r\n            hoverAnimation: false,\r\n            // animation:false,    //charts3 no\r\n            color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#9933FF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#00CCFF' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            data: _pie2()\r\n        },\r\n        {\r\n            type: 'pie',\r\n            zlevel: 3,\r\n            silent: true,\r\n            radius: ['83%', '84%'],\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            data: _pie3()\r\n        },\r\n        {\r\n            type: 'pie',\r\n            zlevel: 4,\r\n            silent: true,\r\n            radius: ['60%', '75%'],\r\n            color: [\"#fc8d89\", \"#46d3f3\", \"rgba(203,203,203,0.9)\"],\r\n            startAngle: 50,\r\n            hoverAnimation: false,\r\n            // animation:false,    //charts3 no\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            data: [1, 2, 3],\r\n\r\n        },\r\n        {\r\n            name: \"\",\r\n            type: 'custom',\r\n            zlevel: 7,\r\n\r\n            coordinateSystem: \"none\",\r\n            renderItem: function(params, api) {\r\n                return {\r\n                    type: 'arc',\r\n                    shape: {\r\n                        cx: api.getWidth() / 2, // 图形元素的中心在父节点坐标系（以父节点左上角为原点）中的横坐标值。\r\n                        cy: api.getHeight() / 2, // 图形元素的中心在父节点坐标系（以父节点左上角为原点）中的纵坐标值。\r\n                        r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.6, // 外半径。\r\n                        startAngle: (0 + num) * Math.PI / 180, // 开始弧度。\r\n                        endAngle: (1 + num) * Math.PI / 180, // 结束弧度。\r\n                        clockwise: true, //是否顺时针。\r\n                    },\r\n\r\n                    style: {\r\n                        // #00CEF3\r\n                        stroke: \"#fff\",\r\n                        fill: \"transparent\",\r\n                        shadowBlur: 5, //阴影\r\n                        shadowOffsetX: 15,\r\n                        shadowOffsetY: 15,\r\n                        shadowColor: '#000',\r\n                        lineWidth: 15,\r\n\r\n                    },\r\n                    silent: true\r\n                };\r\n            },\r\n            data: [0]\r\n        },\r\n    ]\r\n};\r\n\r\nfunction _pie1() {\r\n    let dataArr = [];\r\n    for (var i = 0; i < 8; i++) {\r\n\r\n        dataArr.push({\r\n            name: (i + 1).toString(),\r\n            value: 20,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"rgba(88,142,197,0.4)\",\r\n                    borderWidth: 0,\r\n                    borderColor: \"rgba(0,0,0,0)\"\r\n                }\r\n            }\r\n        })\r\n\r\n    }\r\n    return dataArr\r\n\r\n}\r\n\r\nfunction _pie2() {\r\n    let dataArr = [];\r\n    let _color = {\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 0,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0,\r\n            color: '#9933FF' // 0% 处的颜色\r\n        }, {\r\n            offset: 1,\r\n            color: '#00CCFF' // 100% 处的颜色\r\n        }],\r\n        global: false // 缺省为 false\r\n    }\r\n    for (var i = 0; i < 16; i++) {\r\n        if (i % 4 === 0) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 50,\r\n                itemStyle: {\r\n                    normal: {\r\n                        //color: \"rgba(88,142,197,0.5)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else if (i % 4 === 1) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 2,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(88,142,197,0)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else if (i % 4 === 2) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 20,\r\n                itemStyle: {\r\n                    normal: {\r\n                        //color: \"rgba(88,142,197,0.2)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 2,\r\n                itemStyle: {\r\n                    normal: {\r\n                        //color: \"rgba(0,0,0,0)\",\r\n                        color: \"rgba(88,142,197,0)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n    return dataArr\r\n\r\n}\r\n\r\nfunction _pie3() {\r\n    let dataArr = [];\r\n    for (var i = 0; i < 100; i++) {\r\n        if (i % 2 === 0) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 25,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgb(126,190,255)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 20,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n    return dataArr\r\n\r\n}\r\n\r\nfunction _pieData(data) {\r\n    let _data = data;\r\n    let dataArr = [];\r\n    for (var i = 0; i < 5; i++) {\r\n        if (i === 2) {\r\n            let dt = (data[0].unit) ? 25 : (Number(data[0].value));\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: dt,\r\n                itemStyle: {\r\n                    normal: {\r\n\r\n                        color: new echarts.graphic.LinearGradient(0, 1, 1, 0, [{\r\n                            offset: 0,\r\n                            color: 'rgb(147,187,216)'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#588ec5'\r\n                        }]),\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0.4)\"\r\n\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            let dta = (data[0].unit) ? 25 : (1 - Number(data[0].value)) / 4;\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: dta,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n    //console.log(dataArr)\r\n    return dataArr\r\n}\r\n\r\n\r\n//鼠标事件：'click'，'dblclick'，'mousedown'，'mouseup'，'mouseover'，'mouseout'，'globalout'。\r\n\r\nmyChart.on('mouseover', function(params) {\r\n    stopTimer();\r\n});\r\n\r\nmyChart.on('mouseout', function(params) {\r\n    startTimer();\r\n});\r\n\r\n\r\nvar timer;\r\n\r\nfunction doing() {\r\n    let option = myChart.getOption();\r\n    option.series[1].startAngle = option.series[1].startAngle - 1;\r\n    //option.series[2].startAngle = option.series[2].startAngle - 1;\r\n    //option.series[6].data[0].value = option.series[6].data[0].value + 1;\r\n    myChart.setOption(option);\r\n\r\n}\r\n\r\nfunction startTimer() {\r\n\r\n    timer = setInterval(doing, 100);\r\n\r\n}\r\n\r\nfunction stopTimer() {\r\n\r\n    clearInterval(timer);\r\n\r\n    xzTimer = null;\r\n\r\n}\r\n\r\nfunction numb() {\r\n    num = num + 5\r\n    // myChart.setOption(option, true)\r\n}\r\nsetInterval(function() {\r\n    numb()\r\n}, 100);\r\nsetTimeout(startTimer, 500);\r\n/*\r\nwindow.onload = function() {\r\n    setTimeout(startRotate, 500);\r\n}\r\n*/","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":3391,"userName":"S***l","commentCount":0,"starCount":19,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x84SuYYBuM.png?v=1601005337493","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"S***l"}}