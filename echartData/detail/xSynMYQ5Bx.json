{"status":0,"data":{"cid":"xSynMYQ5Bx","authorUid":"bd-3776989542","authorUserName":"纤锐","title":"Support only vertical drag","description":"使用隐藏的图形元素实现了仅能垂直拖拽","latestVersion":4,"alwaysLatest":1,"createTime":"2017-01-04T07:49:39.000Z","lastUpdateTime":"2017-01-04T07:49:39.000Z","auth":1,"uid":"bd-3776989542","publishedVersion":1,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.3.2","versionCreateTime":"2017-01-04T07:49:39.000Z","code":"var symbolSize = 20;\nvar data = [\n    ['一月', 5],\n    ['二月', 10],\n    ['三月', 15],\n    ['一月', 7],\n    ['二月', 12],\n    ['三月', 2]\n];\nvar data1;\n\noption = {\n    title: {\n        text: 'Support only vertical drag'\n    },\n    tooltip: {\n        triggerOn: 'none',\n        formatter: function(params) {\n            return 'X: ' + params.name + '<br>Y: ' + params.data.toFixed(2);\n        }\n    },\n    grid: {},\n    xAxis: {\n        type: 'category',\n        data: ['一月', '二月', '三月']\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series: [{\n        id: 'a',\n        type: 'line',\n        smooth: true,\n        symbolSize: symbolSize,\n        data: [5, 10, 15],\n        label: {\n            normal: {\n                show: true,\n                position: 'right',\n                formatter: function(params) {\n                    return params.data.toFixed(2);\n                }\n            }\n        }\n    }, {\n        id: 'b',\n        type: 'line',\n        smooth: true,\n        symbolSize: symbolSize,\n        data: [7, 12, 2],\n        label: {\n            normal: {\n                show: true,\n                position: 'right',\n                formatter: function(params) {\n                    return params.data.toFixed(2);\n                }\n            }\n        }\n    }]\n};\n\n\nif (!app.inNode) {\n    setTimeout(function() {\n        // Add shadow circles (which is not visible) to enable drag.\n        myChart.setOption({\n            graphic: echarts.util.map(data, function(item, dataIndex) {\n                return {\n                    type: 'circle',\n                    position: myChart.convertToPixel('grid', item),\n                    shape: {\n                        cx: 0,\n                        cy: 0,\n                        r: symbolSize / 2\n                    },\n                    invisible: true,\n                    draggable: true,\n                    ondrag: echarts.util.curry(onPointDragging, dataIndex),\n                    onmousemove: echarts.util.curry(showTooltip, dataIndex),\n                    onmouseout: echarts.util.curry(hideTooltip, dataIndex),\n                    z: 100\n                };\n            })\n        });\n    }, 0);\n\n    window.addEventListener('resize', updatePosition);\n}\n\n\nfunction updatePosition() {\n    myChart.setOption({\n        graphic: echarts.util.map(data, function(item, dataIndex) {\n            return {\n                position: myChart.convertToPixel('grid', item)\n            };\n        })\n    });\n}\n\nfunction showTooltip(dataIndex) {\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: dataIndex\n    });\n}\n\nfunction hideTooltip(dataIndex) {\n    myChart.dispatchAction({\n        type: 'hideTip'\n    });\n}\n\nfunction onPointDragging(dataIndex, dx, dy) {\n    data[dataIndex][1] = myChart.convertFromPixel('grid', this.position)[1];\n\n    var temp = [\n        [],\n        []\n    ];\n    for (var i = 0; i < 3; i++) {\n        temp[0].push(data[i][1]);\n    }\n    for (var i = 3; i < 6; i++) {\n        temp[1].push(data[i][1]);\n    }\n\n    // Update data\n    myChart.setOption({\n        series: [{\n            id: 'a',\n            data: temp[0]\n        }, {\n            id: 'b',\n            data: temp[1]\n        }]\n    });\n    updatePosition();\n}","html":"","externalScripts":"","updaterUID":"bd-3776989542","theme":"","layout":"","viewCount":1081,"userName":"纤锐","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSynMYQ5Bx.png?v=1483516179739","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","series-line","title","tooltip"],"customTags":[],"updaterUserName":"纤锐"}}