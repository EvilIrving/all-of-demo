{"status":0,"data":{"cid":"xfGK_cQJC3","authorUid":"bd-3492896087","authorUserName":"l***1","title":"日历坐标结合饼图","description":"日历坐标,每个日期中放一个饼图","latestVersion":1,"alwaysLatest":1,"createTime":"2020-08-31T09:23:19.000Z","lastUpdateTime":"2020-08-31T09:23:19.000Z","auth":2,"uid":"bd-3492896087","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-31T09:23:19.000Z","code":"//获取scatter的data,用于左上角,日的显示\nvar scatterData = getScatterDate();\n\nfunction getScatterDate() {\n    //时间戳\n    var startTime = +echarts.number.parseDate('2020-08-01');\n    var endTime = +echarts.number.parseDate('2020-09-01');\n    var dayTime = 3600 * 24 * 1000;\n    var data = [];\n    for (var time = startTime; time < endTime; time += dayTime) {\n        //['2020-08-01','01']\n        data.push([\n            echarts.format.formatTime('yyyy-MM-dd', time),\n            echarts.format.formatTime('dd', time)\n        ]);\n    }\n    return data;\n}\n//series的数据初始设置scatter\nlet seriesData = [{ //日期\n    id: 'label',\n    type: 'scatter',\n    coordinateSystem: 'calendar',\n    symbolSize: 1,\n    label: {\n        normal: {\n            show: true,\n            formatter: function(params) {\n                return params.value[1]\n            },\n            offset: [-30, -30],\n            textStyle: {\n                color: color2,\n                fontSize: 14\n            }\n        }\n    },\n    data: scatterData\n}, ]\n//series后续设置pie\nfunction getPieSeries() {\n    scatterData.map(function(item, index) {\n        //转换坐标系上的点到像素坐标值,转换的结果为像素坐标值\n        var center = myChart.convertToPixel('calendar', item);\n        let seriesItem = {\n            id: index + 'pie',\n            type: 'pie',\n            center: center,\n            label: {\n                normal: {\n                    formatter: '{c}',\n                    position: 'inside'\n                }\n            },\n            radius: 30,\n            data: [{\n                    name: '未通行',\n                    value: Math.round(Math.random() * 100),\n                    itemStyle: {\n                        color: '#8c8c8c'\n                    },\n                },\n                {\n                    name: '正常',\n                    value: Math.round(Math.random() * 100),\n\n                    itemStyle: {\n                        color: '#9bca63'\n                    },\n                },\n                {\n                    name: '异常',\n                    value: Math.round(Math.random() * 100),\n                    itemStyle: {\n                        color: '#c23531'\n                    },\n                },\n                {\n                    name: '稽查处异常',\n                    value: Math.round(Math.random() * 100),\n                    itemStyle: {\n                        color: '#fd7903'\n                    },\n                }\n            ]\n        };\n        seriesData.push(seriesItem)\n    })\n}\nvar color1 = '#0a0b58';\nvar color2 = '#edebf3';\noption = {\n    backgroundColor: color1,\n    legend: {\n        data: ['未通行', '正常', '异常', '稽查处异常'],\n        bottom: 20,\n        textStyle: {\n            color: color2,\n        }\n    },\n    calendar: { //日历坐标\n        top: 'middle',\n        left: 'center',\n        orient: 'vertical',\n        cellSize: [80, 80],\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: color1\n            }\n        },\n        yearLabel: {\n            show: false,\n            textStyle: {\n                fontSize: 30\n            }\n        },\n        dayLabel: {\n            margin: 20,\n            firstDay: 1,\n            color: color2,\n            nameMap: ['星期日', '星期一', '星期二', '星期三', '星期四', '星期五', '星期六']\n        },\n        monthLabel: {\n            show: false\n        },\n        range: ['2020-08'],\n        itemStyle: {\n            color: color1,\n            borderColor: '#2b2e6c'\n        }\n    },\n    series: seriesData\n};\nsetTimeout(function() {\n    getPieSeries()\n    myChart.setOption(option)\n}, 10);","html":"","externalScripts":"","updaterUID":"bd-3492896087","theme":"","layout":"","viewCount":886,"userName":"l***1","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfGK_cQJC3.png?v=1598865800104","isCustomThumbnail":0,"builtinTags":["calendar","category-work","legend","series-pie","series-scatter"],"customTags":[],"updaterUserName":"l***1"}}