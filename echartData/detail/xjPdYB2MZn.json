{"status":0,"data":{"cid":"xjPdYB2MZn","authorUid":"obd-ojok0alWTQPs_TXsuxZyvC6hqlv3kE5","authorUserName":"h***鸦","title":"行业趋势>关键指标>细分市场","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-10-22T07:13:47.000Z","lastUpdateTime":"2021-02-20T08:34:54.000Z","auth":2,"uid":"obd-ojok0alWTQPs_TXsuxZyvC6hqlv3kE5","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-20T06:31:21.000Z","code":"// Echarts图表配置\r\nlet xData = function() {\r\n    let data = [];\r\n    let monthEn = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n    for (let i = 0; i < 12; i++) {\r\n        data.push(`${monthEn[i]}-19`);\r\n    }\r\n    for (let i = 0; i < 12; i++) {\r\n        data.push(`${monthEn[i]}-20`);\r\n    }\r\n    return data;\r\n}();\r\nlet data = {\r\n    data1: [709, 1917, 2455, 2610, 1719, 1433, 1544, 3285, 5208, 3372, 2484, 4078, 709, 1917, 2455, 2610, 1719, 1433, 1544, 3285, 5208, 3372, 2484, 4078],\r\n    data2: [327, 1776, 507, 1200, 800, 482, 204, 1390, 1001, 951, 381, 220, 327, 1776, 507, 1200, 800, 482, 204, 1390, 1001, 951, 381, 220]\r\n}\r\nlet totalData = function() {\r\n    let total = [];\r\n    if (data.data1.length != data.data2.length) {\r\n        alert('两组数据不匹配')\r\n        return;\r\n    }\r\n    data.data1.map((num, index) => {\r\n        total.push(num + data.data2[index])\r\n    })\r\n    return total;\r\n}();\r\n\r\noption = {\r\n    backgroundColor: \"#fff\",\r\n    \"title\": {\r\n        \"text\": \"行业趋势>关键指标>细分市场\",\r\n        x: \"center\",\r\n\r\n        textStyle: {\r\n            color: '#666',\r\n            fontSize: '22'\r\n        },\r\n    },\r\n    \"tooltip\": {\r\n        \"trigger\": \"axis\",\r\n        \"axisPointer\": {\r\n            \"type\": \"shadow\",\r\n            textStyle: {\r\n                color: \"#fff\"\r\n            }\r\n\r\n        },\r\n    },\r\n    \"grid\": {\r\n        borderWidth: 0,\r\n        top: 80,\r\n        bottom: 80,\r\n        left: 80,\r\n        right: 80,\r\n        textStyle: {\r\n            color: \"#fff\"\r\n        }\r\n    },\r\n    \"legend\": {\r\n        x: 'center',\r\n        top: '8%',\r\n        textStyle: {\r\n            color: '#90979c',\r\n        },\r\n        \"data\": ['高端美妆', '其他', '美妆行业整体']\r\n    },\r\n    \"calculable\": true,\r\n    \"xAxis\": [{\r\n        \"type\": \"category\",\r\n        \"axisLine\": {\r\n            lineStyle: {\r\n                color: '#90979c'\r\n            }\r\n        },\r\n        \"splitLine\": {\r\n            \"show\": false\r\n        },\r\n        \"axisTick\": {\r\n            \"show\": false\r\n        },\r\n        \"splitArea\": {\r\n            \"show\": false\r\n        },\r\n        \"axisLabel\": {\r\n            \"interval\": 0,\r\n            \"rotate\": -90\r\n        },\r\n        \"data\": xData,\r\n    }],\r\n    \"yAxis\": [{\r\n        \"type\": \"value\",\r\n        \"splitLine\": {\r\n            \"show\": false\r\n        },\r\n        \"axisLine\": {\r\n            lineStyle: {\r\n                color: '#90979c'\r\n            }\r\n        },\r\n        \"axisTick\": {\r\n            \"show\": false\r\n        },\r\n        \"axisLabel\": {\r\n            \"interval\": 0,\r\n        },\r\n        \"splitArea\": {\r\n            \"show\": false\r\n        },\r\n    }],\r\n    \"series\": [{\r\n        \"name\": \"高端美妆\",\r\n        \"type\": \"bar\",\r\n        \"stack\": \"总量\",\r\n        \"barMaxWidth\": 35,\r\n        \"barGap\": \"10%\",\r\n        \"itemStyle\": {\r\n            \"normal\": {\r\n                \"color\": \"rgba(255,144,128,1)\",\r\n                \"label\": {\r\n                    \"show\": true,\r\n                    \"textStyle\": {\r\n                        \"color\": \"#fff\"\r\n                    },\r\n                    \"position\": \"inside\",\r\n                    formatter: function(p) {\r\n                        // console.log(p)\r\n                        return p.value > 0 ? (((p.value / totalData[p.dataIndex]).toFixed(4) *\r\n                            100).toString().slice(0, 5) + '%') : '';\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"data\": data.data1,\r\n    }, {\r\n        \"name\": \"其他\",\r\n        \"type\": \"bar\",\r\n        \"stack\": \"总量\",\r\n        \"itemStyle\": {\r\n            \"normal\": {\r\n                \"color\": \"rgba(0,191,183,1)\",\r\n                \"barBorderRadius\": 0,\r\n                \"label\": {\r\n                    \"show\": true,\r\n                    \"position\": \"inside\",\r\n                    formatter: function(p) {\r\n                        return p.value > 0 ? (((p.value / totalData[p.dataIndex]).toFixed(4) *\r\n                            100).toString().slice(0, 5) + '%') : '';\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"data\": data.data2\r\n    }, {\r\n        \"name\": \"美妆行业整体\",\r\n        \"type\": \"line\",\r\n        \"stack\": \"总量\", // 可以让折线图在柱状图上方 注释点落在柱状图顶端中心\r\n        \"symbolSize\": 10,\r\n        \"symbol\": 'circle',\r\n        \"itemStyle\": {\r\n            \"normal\": {\r\n                \"color\": \"rgba(252,230,48,1)\",\r\n                \"barBorderRadius\": 0,\r\n                \"label\": {\r\n                    \"show\": true,\r\n                    \"position\": \"top\",\r\n                    formatter: function(p) {\r\n                        return p.value > 0 ? (p.value) : '';\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"data\": totalData\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"obd-ojok0alWTQPs_TXsuxZyvC6hqlv3kE5","theme":"dark","layout":"","viewCount":177,"userName":"h***鸦","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjPdYB2MZn.png?v=1613802681572","isCustomThumbnail":0,"builtinTags":[],"customTags":[],"updaterUserName":"h***鸦"}}