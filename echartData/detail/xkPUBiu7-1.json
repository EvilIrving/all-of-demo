{"status":0,"data":{"cid":"xkPUBiu7-1","authorUid":"bd-171648521","authorUserName":"绿***绿","title":"嵌套饼图","description":"","latestVersion":7,"alwaysLatest":1,"createTime":"2019-08-22T03:52:06.000Z","lastUpdateTime":"2019-08-22T03:52:06.000Z","auth":2,"uid":"bd-171648521","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-09T01:35:09.000Z","code":"let placeHolderStyle = { //设置透明伞形\n    normal: {\n        color: 'transparent',\n\n        label: {\n            show: false\n        },\n        labelLine: {\n            show: false\n        }\n    },\n\n};\nlet dataPie = [{\n        name: '机柜',\n        value: 60\n    },\n    {\n        name: '服务器',\n        value: 40\n    },\n    {\n        name: '路由器',\n        value: 45\n    },\n    {\n        name: '交换机',\n        value: 55\n    },\n    {\n        name: 'PDU',\n        value: 35\n    },\n];\nlet dataColor = [{\n        os1: '#4f91f0',\n        os2: '#1955a9'\n    },\n    {\n        os1: '#3e79cd',\n        os2: '#4be0ff'\n    },\n    {\n        os1: '#36d7e7',\n        os2: '#226c96'\n    },\n    {\n        os1: '#22aae0',\n        os2: '#5abae0'\n    },\n    {\n        os1: '#41d7cd',\n        os2: '#01abff'\n    },\n];\nlet legendData = [],\n    seriesData = [],\n    total = 0,\n    radiusValue = 100;\nfor (var i = 0; i < dataPie.length; i++) {\n    total += dataPie[i].value\n    legendData.push(dataPie[i].name);\n    console.log(radiusValue - 10 * i - 2 + '%', radiusValue - 10 * i + '%')\n    seriesData.push({\n        type: 'pie',\n        clockWise: false, //饼图的扇区是否是顺时针排布\n        radius: [radiusValue - 10 * i - 1 + '%', radiusValue - 10 * i + '%'],\n        center: ['35%', '50%'],\n        label: {\n            normal: {\n                show: false //隐藏引导线标识\n            }\n        },\n        hoverAnimation: false, //关闭 hover 在扇区上的放大动画效果\n        startAngle: 90, //起始角度\n        data: [{\n                value: dataPie[i].value,\n                name: dataPie[i].name,\n                itemStyle: {\n                    normal: {\n                        borderWidth: 5,\n                        borderColor: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: dataColor[i].os1,\n                        }, {\n                            offset: 1,\n                            color: dataColor[i].os2,\n                        }]),\n                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: dataColor[i].os1\n                        }, {\n                            offset: 1,\n                            color: dataColor[i].os2\n                        }])\n                    }\n                }\n            },\n            { //透明伞形\n                value: 100 - dataPie[i].value,\n                tooltip: {\n                    show: false\n                },\n                itemStyle: { //设置透明伞形\n                    normal: {\n                        color: 'transparent', //伞形颜色\n                        label: {\n                            show: false\n                        },\n\n                    },\n\n                }\n            },\n        ]\n    });\n\n\n}\noption = {\n    backgroundColor: '#021228',\n    title: {\n        text: '设备类型',\n        x: '28.5%',\n        y: 'center',\n        textStyle: {\n            fontWeight: 'normal',\n            fontSize: 12,\n            color: \"#419ece\",\n        }\n    },\n    grid: {\n        left: '5px', // 与容器左侧的距离\n        right: '5px', // 与容器右侧的距离\n        top: '5px', // 与容器顶部的距离\n        bottom: '5px', // 与容器底部的距离\n    },\n    tooltip: {\n        trigger: 'item',\n        show: true,\n        formatter: \"{b} : <br/>{d}%\",\n        backgroundColor: 'rgba(0,0,0,0.7)', // 背景\n        padding: [8, 10], //内边距\n        extraCssText: 'box-shadow: 0 0 3px rgba(255, 255, 255, 0.4);', //添加阴影\n    },\n    legend: {\n        type: 'scroll',\n        orient: 'vertical', //竖排\n        icon: 'circle', //形状\n        right: '50px',\n        top: '10px',\n        itemGap: 20,\n        pageIconColor: \"#00f6ff\",\n        pageTextStyle:{\n            color:\"#fff\"\n        },\n        textStyle: {\n            color: '#419ece', // color: '#fft' 文字颜色随图例颜色\n            // align: 'right',\n            rich: {\n                yellow: {\n                    color: '#00b5f3',\n                    fontWeight: \"bold\"\n\n                },\n                blue: {\n                    color: '#4be1ff',\n                    align: 'right',\n\n                },\n            }\n        },\n        formatter: function(name) {\n\n            let target, percent;\n            for (let i = 0; i < dataPie.length; i++) {\n                if (dataPie[i].name === name) {\n                    target = dataPie[i].value;\n                    percent = Math.round(((target / total) * 100));\n                }\n            }\n            let arr = [' {blue|' + name + '}', percent + '% ' + ' {yellow|' + target + '}', ];\n            return arr\n\n        },\n        data: legendData,\n\n    },\n    series: seriesData\n};","html":"","externalScripts":"","updaterUID":"bd-171648521","theme":"","layout":"","viewCount":130,"userName":"绿***绿","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xkPUBiu7-1.png?v=1594258509423","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"绿***绿"}}