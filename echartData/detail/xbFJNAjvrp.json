{"status":0,"data":{"cid":"xbFJNAjvrp","authorUid":"bd-101897118","authorUserName":"q***e","title":"占比 饼图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2019-04-03T01:18:06.000Z","lastUpdateTime":"2019-04-03T01:18:06.000Z","auth":2,"uid":"bd-101897118","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-07T12:55:23.000Z","code":"    let data = [{\n        \"name\": \"Ⅰ类\",\n        \"value\": 10\n    }, {\n        \"name\": \"Ⅱ类\",\n        \"value\": 35\n    }, {\n        \"name\": \"Ⅲ类\",\n        \"value\": 20\n    }, {\n        \"name\": \"Ⅳ类\",\n        \"value\": 20\n    }, {\n        \"name\": \"Ⅴ类\",\n        \"value\": 10\n    }, {\n        \"name\": \"劣Ⅴ类\",\n        \"value\": 5\n    }];\n\n    let startAngle = -3.6 * data[0].value / 2\n    option = {\n        backgroundColor: '#03152e',\n        \"color\": [\"#68cffe\", \"#49a1fe\", \"#65c233\", \"#f2b71d\", \"#9600e2\", \"#e73f60\", \"#9f9f9f\"],\n        \"legend\": {\n            \"bottom\": 0,\n            \"itemGap\": 10,\n            \"itemWidth\": 12,\n            \"itemHeight\": 12,\n            //\"data\": [\"Ⅰ类\", \"Ⅱ类\", \"Ⅲ类\", \"Ⅳ类\", \"Ⅴ类\", \"劣Ⅴ类\"],\n            \"symbolKeepAspect\": false,\n            \"textStyle\": {\n                \"color\": \"#57a6ff\"\n            },\n            \"icon\": \"circle\"\n        },\n        tooltip: {},\n        \"series\": [{\n            \"name\": \"\",\n            \"type\": \"pie\",\n            startAngle: startAngle,\n            hoverOffset: 20,\n            \"radius\": [\"45%\", \"70%\"],\n            \"center\": [\"45%\", \"45%\"],\n            \"label\": {\n                \"color\": \"#57a6ff\",\n                \"formatter\": \"{b}：{c}%\"\n            },\n            \"itemStyle\": {\n                \"normal\": {\n                    \"shadowColor\": \"rgba(0,0,0,0.4)\",\n                    \"shadowBlur\": 15\n                },\n                emphasis: {\n                    borderColor: '#03152e',\n                    borderWidth: 10\n                }\n            },\n            \"labelLine\": {\n                \"lineStyle\": {\n                    \"color\": \"#57a6ff\",\n                    \"width\": 1.5\n                }\n            },\n            \"data\": data\n        }]\n    }\n\n    var timeTicket = null;\n\n    function autohover(myChart, dataLength, time) {\n        var count = 0;\n\n        function startFn() {\n\n            rotateFn();\n\n            setTimeout(function() {\n                myChart.dispatchAction({\n                    type: 'downplay',\n                    seriesIndex: 0, //serieIndex的索引值   可以触发多个\n                });\n                myChart.dispatchAction({\n                    type: 'highlight',\n                    seriesIndex: 0,\n                    dataIndex: (count) % dataLength\n                });\n                myChart.dispatchAction({\n                    type: 'showTip',\n                    seriesIndex: 0,\n                    dataIndex: (count) % dataLength\n                });\n                count++;\n            }, 10);\n\n\n\n\n        }\n        timeTicket && clearInterval(timeTicket);\n        timeTicket = setInterval(startFn, time);\n\n        myChart.on('mouseover', function(params) {\n            clearInterval(timeTicket);\n        });\n\n        myChart.on('mouseout', function(params) {\n            timeTicket && clearInterval(timeTicket);\n            timeTicket = setInterval(startFn, time);\n        });\n    }\n\n    autohover(myChart, 6, 1000);\n\n    let startIdx = 5;\n\n    function rotateFn() {\n        if (startIdx > data.length - 1) {\n            startIdx = 0;\n        }\n        let curVal = data[startIdx].value;\n\n\n        let nextVal = startIdx + 1 > data.length - 1 ? data[0].value : data[startIdx + 1].value;\n\n\n        nextVal = isNaN(nextVal) ? 0 : nextVal;\n        curVal = isNaN(curVal) ? 0 : curVal;\n\n        let val = (nextVal + curVal) / 2\n        startIdx++;\n\n        val = isNaN(val) ? 0 : val;\n        //startAngle -= 360;\n        startAngle += (3.6 * val);\n        startAngle = startAngle > 36000 ? startAngle - 36000 : startAngle;\n        console.log(startAngle);\n        myChart.setOption({\n            series: [{\n                \"type\": \"pie\",\n                startAngle: startAngle\n            }]\n        });\n\n    }\n\n    //setInterval(rotateFn, 1000);","html":"","externalScripts":"","updaterUID":"bd-101897118","theme":"","layout":"","viewCount":325,"userName":"q***e","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xbFJNAjvrp.png?v=1581080123112","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"q***e"}}