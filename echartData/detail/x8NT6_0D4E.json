{"status":0,"data":{"cid":"x8NT6_0D4E","authorUid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","authorUserName":"宁***群","title":"仪器表—动态传值更新","description":"仪器表—可动态传值更新，数据清晰，简便","latestVersion":2,"alwaysLatest":0,"createTime":"2021-08-17T03:41:17.000Z","lastUpdateTime":"2021-08-17T09:06:04.000Z","auth":2,"uid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-17T09:06:04.000Z","code":"\n\nvar dataset = {\n    max: 300,\n    value: 103,\n    // text: '全校承担本科教学任务的教授比率'\n}\n\nvar series = [\n    { type: 'gauge' }    \n]\n\n\noption = {\n\n    // backgroundColor: '#FFFFFF',\n\n    title: [{\n                show: dataset.text?true:false,\n                text: dataset.text?dataset.text:'仪器表',\n\n                bottom: '6%',\n\n                x: 'center',\n\n                borderColor: '#1598FF',\n\n                borderWidth: 1,\n\n                borderRadius: 15,\n\n                backgroundColor: '#1598FF',\n\n                padding: [7, 14],\n\n                textStyle: {\n\n                    fontWeight: 'bold',\n\n                    fontSize: 13,\n\n                    color: '#fff'\n\n                }\n\n            }],\n\n    angleAxis: {\n\n        show: false,\n\n        max: dataset.max * 360 / 270, //-45度到225度，二者偏移值是270度除360度\n\n        type: 'value',\n\n        startAngle: 225, //极坐标初始角度\n\n        splitLine: {\n\n            show: false\n\n        }\n\n    },\n\n    barMaxWidth: 20, //圆环宽度\n\n    radiusAxis: {\n\n        show: false,\n\n        type: 'category',\n\n    },\n\n    //圆环位置和大小\n\n    polar: {\n\n        center: ['50%', '50%'],\n\n        radius: '120%'\n\n    },\n\n    series: [{\n\n            type: 'bar',\n\n            data: [{ //上层圆环，显示数据\n\n                value: dataset.value,\n\n                itemStyle: {\n\n                    color: '#1598FF',\n\n                },\n\n            }],\n\n            barGap: '-100%', //柱间距离,上下两层圆环重合\n\n            coordinateSystem: 'polar',\n\n            roundCap: true, //顶端圆角\n\n            z: 3 //圆环层级，同zindex\n\n        },\n\n        { //下层圆环，显示最大值\n\n            type: 'bar',\n\n            data: [{\n\n                value: dataset.max,\n\n                itemStyle: {\n\n                    color: '#1598FF',\n\n                    opacity: 0.2,\n\n                    borderWidth: 0,\n\n                },\n\n            }],\n\n            barGap: '-100%',\n\n            coordinateSystem: 'polar',\n\n            roundCap: true,\n\n            z: 1\n\n        },\n\n        //仪表盘\n\n        {\nmax: dataset.max,\n            type: series[0].type, // 'gauge'\n\n            startAngle: 225, //起始角度，同极坐标\n\n            endAngle: -45, //终止角度，同极坐标\n\n            axisLine: {\n\n                show: false,\n\n            },\n\n            splitLine: {\n\n                show: false\n\n            },\n\n            axisTick: {\n\n                show: false\n\n            },\n\n            axisLabel: {\n\n                show: false\n\n            },\n\n            splitLabel: {\n\n                show: false\n\n            },\n\n            pointer: { // 分隔线\n\n                shadowColor: 'auto', //默认透明\n\n                shadowBlur: 5,\n\n                length: '50%',\n\n                width: \"2\",\n\n            },\n\n            itemStyle: {\n\n                color: '#1598FF',\n\n                borderColor:\"#1598FF\",\n\n                borderWidth: 6\n\n            },\n\n            detail: {\n\n                formatter: function(params) {\n                    // return dataset.value + '%';\n                    var percent = (dataset.value/dataset.max)*100\n                    return percent.toFixed(2) + '%';\n\n                },\n\n                color: '#1598FF',\n                fontSize: 30,\n                offsetCenter: [0, '50%'],\n                \n                // 边框\n                fontWeight: 'bolder',\n                borderWidth: 1,\n                borderRadius: 5,\n                borderColor: '#1598FF',\n                width: 100,\n                // 阴影\n                shadowBlur: 5,\n                shadowColor: '#1598FF',\n                shadowOffsetX: 0,\n                shadowOffsetY: 1,\n                // 文字\n                // textBorderColor: '#fff',\n                fontFamily: 'Arial',\n                \n                rich: {}\n            },\n\n            title:  {\n\n                show: false\n\n            },\n\n            data: [{\n                // 主要响应数据\n                value: dataset.value,\n\n            }]\n\n        },{\n\n            name: '外部刻度',\n\n            type: series[0].type, // 'gauge'\n\n            //  center: ['20%', '50%'],\n\n            radius: '73%',\n\n            min: 0, //最小刻度\n\n            max: dataset.max, //最大刻度\n\n            splitNumber: 10, //刻度数量\n\n            startAngle: 225,\n\n            endAngle: -45,\n\n            axisLine: {\n\n                show: true,\n\n                lineStyle: {\n\n                    width: 1,\n\n                    color: [\n\n                        [1, 'rgba(0,0,0,0)']\n\n                    ]\n\n                }\n\n            }, //仪表盘轴线\n\n            axisLabel: {\n\n                show: false,\n\n                color: '#4d5bd1',\n\n                distance: 25,\n\n            }, //刻度标签。\n\n            axisTick: {\n\n                show: true,\n\n                splitNumber: 7,\n\n                lineStyle: {\n\n                    color: '#C7CBCF', //用颜色渐变函数不起作用\n\n                    width: 2,\n\n                },\n\n                length: -8\n\n            }, //刻度样式\n\n            splitLine: {\n\n                show: false,\n\n                length: -20,\n\n                lineStyle: {\n\n                    color: '#C7CBCF', //用颜色渐变函数不起作用\n\n                }\n\n            }, //分隔线样式\n\n            detail: {\n\n                show: false\n\n            },\n\n            pointer: {\n\n                show: false\n\n            }\n\n        },{//指针外环\n\n                \"type\": 'pie',\n\n                \"hoverAnimation\": false,\n\n                \"legendHoverLink\": false,\n\n                \"radius\": ['10%', '15%'],\n\n                \"z\": 10,\n\n                \"label\": {\n\n                    \"normal\": {\n\n                        \"show\": false\n\n                    }\n\n                },\n\n                \"labelLine\": {\n\n                    \"normal\": {\n\n                        \"show\": false\n\n                    }\n\n                },\n\n                \"data\": [{\n\n                    \"value\": 100,\n\n                    itemStyle: {\n\n                        normal: {\n\n                            color: \"#1598FF\",\n\n                        }\n\n                    }\n\n                }]\n\n            },\n\n            {//指针内环\n\n                \"type\": 'pie',\n\n                \"hoverAnimation\": false,\n\n                \"legendHoverLink\": false,\n\n                \"radius\": ['0%', '10%'],\n\n                \"z\": 10,\n\n                \"label\": {\n\n                    \"normal\": {\n\n                        \"show\": false\n\n                    }\n\n                },\n\n                \"labelLine\": {\n\n                    \"normal\": {\n\n                        \"show\": false\n\n                    }\n\n                },\n\n                \"data\": [{\n\n                    \"value\": dataset.max,\n\n                    itemStyle: {\n\n                        normal: {\n\n                            color: \"#FFFFFF\"\n\n                        }\n\n                    }\n\n                }]\n\n            }\n\n    ]\n\n};\n\nsetInterval(function () {\n    // option.series[0].data[0].value = (Math.random() * 100).toFixed(2) - 0;\n    dataset.value = Math.ceil(Math.random()*(dataset.max))\n    option.series[0].data[0].value = dataset.value\n    option.series[2].data[0].value = dataset.value\n    \n    // option.title[0].show = true\n    // option.title[0].text = 'Value: '+dataset.value\n    myChart.setOption(option, true);\n},2000);\n\n\n","html":"","externalScripts":"","updaterUID":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","theme":"","layout":"","viewCount":0,"userName":"宁***群","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8NT6_0D4E.png?v=1629191164776","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"宁***群"}}