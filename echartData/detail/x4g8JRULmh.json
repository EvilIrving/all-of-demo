{"status":0,"data":{"cid":"x4g8JRULmh","authorUid":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","authorUserName":"l***l","title":"不同等级的年龄分布","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-23T02:16:06.000Z","lastUpdateTime":"2020-04-23T02:16:06.000Z","auth":2,"uid":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-23T02:16:06.000Z","code":"  var totalData = [{\n      level: \"低\",\n      ageIndex: \"30-39岁\",\n      value: 5546\n  }, {\n      level: \"高\",\n      ageIndex: \"60-69岁\",\n      value: 12957\n  }, {\n      level: \"中\",\n      ageIndex: \"60-69岁\",\n      value: 51984\n  }, {\n      level: \"中\",\n      ageIndex: \"15-19岁\",\n      value: 7\n  }, {\n      level: \"低\",\n      ageIndex: \"70-79岁\",\n      value: 461\n  }, {\n      level: \"中\",\n      ageIndex: \"70-79岁\",\n      value: 38182\n  }, {\n      level: \"高\",\n      ageIndex: \"15-19岁\",\n      value: 3\n  }, {\n      level: \"中\",\n      ageIndex: \"50-59岁\",\n      value: 14993\n  }, {\n      level: \"中\",\n      ageIndex: \"20-29岁\",\n      value: 185\n  }, {\n      level: \"低\",\n      ageIndex: \"60-69岁\",\n      value: 48335\n  }, {\n      level: \"高\",\n      ageIndex: \"40-49岁\",\n      value: 426\n  }, {\n      level: \"高\",\n      ageIndex: \"50-59岁\",\n      value: 3402\n  }, {\n      level: \"中\",\n      ageIndex: \"30-39岁\",\n      value: 1072\n  }, {\n      level: \"低\",\n      ageIndex: \"80岁以上\",\n      value: 9\n  }, {\n      level: \"高\",\n      ageIndex: \"20-29岁\",\n      value: 29\n  }, {\n      level: \"中\",\n      ageIndex: \"40-49岁\",\n      value: 2126\n  }, {\n      level: \"高\",\n      ageIndex: \"80岁以上\",\n      value: 14304\n  }, {\n      level: \"低\",\n      ageIndex: \"15-19岁\",\n      value: 81\n  }, {\n      level: \"高\",\n      ageIndex: \"30-39岁\",\n      value: 217\n  }, {\n      level: \"低\",\n      ageIndex: \"20-29岁\",\n      value: 939\n  }, {\n      level: \"低\",\n      ageIndex: \"50-59岁\",\n      value: 47775\n  }, {\n      level: \"高\",\n      ageIndex: \"70-79岁\",\n      value: 12111\n  }, {\n      level: \"中\",\n      ageIndex: \"80岁以上\",\n      value: 17282\n  }, {\n      level: \"低\",\n      ageIndex: \"40-49岁\",\n      value: 8341\n  }]\n\n  var orderTotalData = ['高', '中', '低']\n  var riskMap = {\n      high: totalData.filter(x => {\n          return x.level === orderTotalData[0]\n      }),\n      middle: totalData.filter(x => {\n          return x.level === orderTotalData[1]\n      }),\n      low: totalData.filter(x => {\n          return x.level === orderTotalData[2]\n      })\n  }\n  var ageGroup = ['0岁', '1-4岁', '5-9岁', '10-14岁', '15-19岁', '20-29岁', //\n      '30-39岁', '40-49岁', '50-59岁', '60-69岁', '70-79岁', '80岁以上'\n  ]\n  var ageGroupReverse = ageGroup.slice(0).reverse()\n  var riskAgeMap = {\n      high: [],\n      middle: [],\n      low: []\n  }\n  ageGroupReverse.forEach(x => {\n      var h = 0\n      riskMap.high.forEach(item => {\n          if (item.ageIndex === x) {\n              h = item.value\n          }\n      })\n      riskAgeMap.high.push(h)\n      var m = 0\n      riskMap.middle.forEach(item => {\n          if (item.ageIndex === x) {\n              m = item.value\n          }\n      })\n      riskAgeMap.middle.push(m)\n      var l = 0\n      riskMap.low.forEach(item => {\n          if (item.ageIndex === x) {\n              l = item.value\n          }\n      })\n      riskAgeMap.low.push(l)\n  })\n  var maxLst = []\n  var sortDesc = function(x, y) {\n      return y - x\n  }\n  var riskAgeMapBeforeSort = riskAgeMap\n  maxLst.push(riskAgeMap.high.sort(sortDesc)[0])\n  maxLst.push(riskAgeMap.middle.sort(sortDesc)[0])\n  maxLst.push(riskAgeMap.low.sort(sortDesc)[0])\n  var max = maxLst.sort(sortDesc)[0]\n\n  var labelData = []\n  var indicator = []\n  for (var i = 0; i < ageGroup.length; ++i) {\n      labelData.push({\n          value: 1,\n          name: ageGroup[i],\n          tooltip: {\n              formatter: function(params) {\n                  return ''\n              }\n          }\n      })\n      indicator.push({\n          name: ageGroup[i],\n          max: max\n      })\n  }\n\n  option = {\n      title: {\n          text: '不同等级的年龄分布',\n          left: 'center',\n          textStyle: {\n              fontSize: 18,\n              fontWeight: 700\n          },\n          zlevel: 10\n      },\n      tooltip: {\n          trigger: 'item',\n          position:['50%','20%'],\n          formatter: (params) => {\n              var result = ''\n              var ageGroupData = [...params.value]\n              var ageGroupName = [...ageGroupReverse]\n              if (ageGroupData.length) {\n                  result += params.name\n                  ageGroupData.forEach((item, index) => {\n                      result += `<br/>${ageGroupName[index]} : ${Number(item).toLocaleString()}`\n                  })\n              }\n              return result\n          }\n      },\n      legend: {\n          data: orderTotalData,\n          left: 'left',\n          orient: 'vertical',\n          zlevel: 10,\n          selected: {\n              '高': true,\n              '中': false,\n              '低': false\n          }\n      },\n      radar: {\n          shape: 'circle',\n          scale: true,\n          indicator: indicator.reverse(),\n          center: ['50%', '50%'],\n          radius: '60%',\n          startAngle: 105,\n          name: {\n              show: true,\n              color: 'transparent'\n          },\n          axisLine: {\n              lineStyle: {\n                  color: 'rgba(65, 217, 199, 1)',\n                  opacity: 0.2\n              }\n          },\n          splitLine: {\n              lineStyle: {\n                  color: 'rgba(65, 217, 199, 1)',\n                  opacity: 0.2\n              }\n          },\n          splitArea: {\n              areaStyle: {\n                  color: 'rgba(65, 217, 199, 0.1)',\n                  opacity: 1,\n                  shadowBlur: 45,\n                  shadowColor: 'rgba(0,0,0,.5)',\n                  shadowOffsetX: 0,\n                  shadowOffsetY: 15\n              }\n          }\n      },\n      series: [{\n              type: 'radar',\n              data: [{\n                      value: riskAgeMapBeforeSort.low,\n                      name: orderTotalData[2]\n                  },\n                  {\n                      value: riskAgeMapBeforeSort.middle,\n                      name: orderTotalData[1]\n                  },\n                  {\n                      value: riskAgeMapBeforeSort.high,\n                      name: orderTotalData[0]\n                  }\n              ],\n              zlevel: 2,\n              z: 4\n          },\n          {\n              type: 'pie',\n              data: labelData,\n              radius: ['65%', '85%'],\n              zlevel: -1,\n              name: '',\n              itemStyle: {\n                  normal: {\n                      color: '#22C3AA',\n                      borderColor: 'white'\n                  }\n              },\n              label: {\n                  normal: {\n                      position: 'inside'\n                  }\n              }\n          }\n      ]\n  };","html":"","externalScripts":"","updaterUID":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","theme":"","layout":"","viewCount":594,"userName":"l***l","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4g8JRULmh.png?v=1587608167066","isCustomThumbnail":0,"builtinTags":["category-work","legend","radar","series-pie","series-radar","title","tooltip"],"customTags":[],"updaterUserName":"l***l"}}