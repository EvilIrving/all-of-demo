{"status":0,"data":{"cid":"x_DmR07G6K","authorUid":"bd-1101197343","authorUserName":"名***取","title":"厦门优芽网络科技有限公司","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-12-29T09:25:23.000Z","lastUpdateTime":"2018-12-29T09:25:23.000Z","auth":2,"uid":"bd-1101197343","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-05T05:33:25.000Z","code":"// note: 设置灰色背景色的长度的逻辑不够好，请自行调整\nvar honorData = [\n    {name: \"校级\", data: [100, 92, 150, 200, 50]},\n    {name: \"区县级\",data: [500, 920, 500, 50, 0]},\n    {name: \"市级\",data: [90, 50, 102, 50, 100]},\n    {name: \"国家级\",data: [100, 121, 92, 50, 0]}\n];\nvar legendData = [],\n    sumArray = [],\n    honorXAxisData = [\"科技创新\", \"艺术活动\", \"体育比赛\", \"优势科目\", \"先进个人\"];\nvar maxArray = [];\nvar sumData1 = null;\nvar sumData2 = null;\nvar sumData3 = null;\nvar sumData4 = null;\nvar sumData5 = null;\nhonorData.map(function(a, b) {\n    legendData.push(a.name);\n    a.data.map(function(x, y) {\n        switch (y) {\n            case 0:\n                sumData1 += x;\n                break;\n            case 1:\n                sumData2 += x;\n                break;\n            case 2:\n                sumData3 += x;\n                break;\n            case 3:\n                sumData4 += x;\n                break;\n            case 4:\n                sumData5 += x;\n                break;\n        }\n    });\n});\nmaxArray.push(sumData1, sumData2, sumData3, sumData4, sumData5);\n// 设置灰色背景色的长度\nvar isMax = maxArray.sort(function(a, b) {\n    return b - a\n})[0] * 1.1;\nvar bjData1 = [isMax, isMax, isMax, isMax, isMax];\nvar bjData2 = [isMax + 20, isMax + 20, isMax + 20, isMax + 20, isMax + 20];\nvar option = {\n    tooltip: {\n        trigger: \"axis\",\n        axisPointer: {\n            type: \"none\"\n        },\n        // show: true,\n        // backgroundColor: '#fff',\n        borderColor: \"#ddd\",\n        textStyle: {\n            // color: '#3c3c3c',\n            fontSize: 16\n        },\n        formatter: function(p) {\n            var relVal = p[0].name;\n            var sum = 0;\n            for (var z = 0; z < p.length; z++) {\n                if (!(p[z].seriesName == 1001 || p[z].seriesName == 1000)) {\n                    sum += p[z].value;\n                }\n            }\n            for (var i = 0; i < p.length; i++) {\n                if (!(p[i].seriesName == 1001 || p[i].seriesName == 1000)) {\n                    relVal += \"<br>\" + p[i].marker + p[i].seriesName + \" \" + p[i].value + \" \" + \"(\" + ((100 * parseFloat(p[i].value)) / parseFloat(sum)).toFixed(2) + \"%)\";\n                }\n            }\n            return relVal;\n        }\n    },\n    backgroundColor: \"#ffffff\",\n    color: [\"#ec407a\", \"#26aaff\", \"#7156ff\", \"#05ce91\", \"#efefef\", \"#eef2f7\"],\n    legend: {\n        data: legendData,\n        x: \"center\",\n        y: \"bottom\",\n        itemWidth: 20,\n        itemHeight: 20,\n        itemGap: 30, // 例间距\n        padding: 30,\n        textStyle: {\n            color: \"#666666\",\n            fontSize: 16\n        }\n    },\n    grid: {\n        left: \"10%\",\n        right: \"10%\",\n        bottom: \"5%\",\n        top: \"5%\",\n        containLabel: true\n    },\n    xAxis: [{\n            type: \"value\",\n            show: false\n        },\n        {\n            type: \"value\",\n            show: false\n        }\n    ],\n    yAxis: [{\n            type: \"category\",\n            axisLine: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            },\n            axisLabel: {\n                color: \"#333333\",\n                fontSize: 16, // 文字大小\n                fontWeight: 400,\n                interval: 0\n            },\n            offset: 20,\n            data: honorXAxisData\n        },\n        {\n            type: \"category\",\n            axisLine: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            },\n            axisLabel: {\n                color: \"#fff\",\n                fontSize: 36,\n                fontWeight: 300,\n                interval: 0\n            }\n        }\n    ],\n    series: [{\n            name: \"校级\",\n            type: \"bar\",\n            barWidth: 20,\n            stack: \"总量\",\n            itemStyle: {\n                normal: {\n                    show: true,\n                    barBorderRadius: [30, 0, 0, 30]\n                }\n            },\n            zlevel: 10,\n            data: honorData[0].data\n        },\n        {\n            name: \"区县级\",\n            type: \"bar\",\n            barWidth: 20,\n            stack: \"总量\",\n            zlevel: 10,\n            data: honorData[1].data\n        },\n        {\n            name: \"市级\",\n            type: \"bar\",\n            stack: \"总量\",\n            barWidth: 20,\n            zlevel: 10,\n            data: honorData[2].data\n        },\n        {\n            name: \"国家级\",\n            type: \"bar\",\n            barWidth: 20,\n            stack: \"总量\",\n            zlevel: 10,\n            data: honorData[3].data\n        },\n        {\n            name: \"1000\",\n            type: \"bar\",\n            barGap: \"-100%\",\n            barWidth: 20,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [30, 30, 30, 30]\n                }\n            },\n            xAxisIndex: 0,\n            // yAxisIndex: 1,\n            data: bjData1,\n            emphasis: {\n                itemStyle: {\n                    color: '#efefef'\n                }\n            },\n            zlevel: 5\n        },\n        // {\n        //     name: \"1001\",\n        //     type: \"bar\",\n        //     barGap: \"-120%\",\n        //     barWidth: 30,\n        //     itemStyle: {\n        //         normal: {\n        //             barBorderRadius: [30, 30, 30, 30]\n        //         }\n        //     },\n        //     // xAxisIndex: 0,\n        //     yAxisIndex: 1,\n        //     data: bjData2,\n        //     emphasis: {\n        //         itemStyle: {\n        //             color: '#eef2f7'\n        //         }\n        //     },\n        //     zlevel: 0\n        // }\n    ]\n}","html":"","externalScripts":"","updaterUID":"bd-1101197343","theme":"","layout":"","viewCount":2955,"userName":"名***取","commentCount":0,"starCount":17,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_DmR07G6K.png?v=1559712805782","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"名***取"}}