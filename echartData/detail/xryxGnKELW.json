{"status":0,"data":{"cid":"xryxGnKELW","authorUid":"bd-1377353452","authorUserName":"wei笑_","title":"测试","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2017-07-25T09:14:47.000Z","lastUpdateTime":"2017-07-25T09:14:47.000Z","auth":2,"uid":"bd-1377353452","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.6.2","versionCreateTime":"2017-07-25T09:18:49.000Z","code":"\n\nvar originData = [\n    {\n        income: 20078,\n        strategyName: '其他',\n        stage: '01',\n        y: '初步接触',\n        strategy: '00'\n    },\n    {\n        income: 4760,\n        strategyName: '其他',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '00'\n    },\n    {\n        income: 18050,\n        strategyName: '其他',\n        stage: '03',\n        y: '方案设计',\n        strategy: '00'\n    },\n    {\n        income: 4494.5,\n        strategyName: '其他',\n        stage: '04',\n        y: '立项审批',\n        strategy: '00'\n    },\n    {\n        income: 2540,\n        strategyName: '其他',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '00'\n    },\n    {\n        income: 104.7,\n        strategyName: '其他',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '00'\n    },\n    {\n        income: 574,\n        strategyName: '其他',\n        stage: '07',\n        y: '合同执行',\n        strategy: '00'\n    },\n    {\n        income: 1160,\n        strategyName: '公开招投标',\n        stage: '01',\n        y: '初步接触',\n        strategy: '01'\n    },\n    {\n        income: 6330,\n        strategyName: '公开招投标',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '01'\n    },\n    {\n        income: 27820,\n        strategyName: '公开招投标',\n        stage: '03',\n        y: '方案设计',\n        strategy: '01'\n    },\n    {\n        income: 17813.9,\n        strategyName: '公开招投标',\n        stage: '04',\n        y: '立项审批',\n        strategy: '01'\n    },\n    {\n        income: 10480,\n        strategyName: '公开招投标',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '01'\n    },\n    {\n        income: 2075.5,\n        strategyName: '公开招投标',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '01'\n    },\n    {\n        income: 5889.4,\n        strategyName: '公开招投标',\n        stage: '07',\n        y: '合同执行',\n        strategy: '01'\n    },\n    {\n        income: 0,\n        strategyName: '邀标',\n        stage: '07',\n        y: '合同执行',\n        strategy: '02'\n    },\n    {\n        income: 0,\n        strategyName: '邀标',\n        stage: '01',\n        y: '初步接触',\n        strategy: '02'\n    },\n    {\n        income: 0,\n        strategyName: '邀标',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '02'\n    },\n    {\n        income: 950,\n        strategyName: '邀标',\n        stage: '03',\n        y: '方案设计',\n        strategy: '02'\n    },\n    {\n        income: 45,\n        strategyName: '邀标',\n        stage: '04',\n        y: '立项审批',\n        strategy: '02'\n    },\n    {\n        income: 270,\n        strategyName: '邀标',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '02'\n    },\n    {\n        income: 128,\n        strategyName: '邀标',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '02'\n    },\n    {\n        income: 0,\n        strategyName: '单一来源采购',\n        stage: '01',\n        y: '初步接触',\n        strategy: '03'\n    },\n    {\n        income: 0,\n        strategyName: '单一来源采购',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '03'\n    },\n    {\n        income: 2338,\n        strategyName: '单一来源采购',\n        stage: '03',\n        y: '方案设计',\n        strategy: '03'\n    },\n    {\n        income: 80,\n        strategyName: '单一来源采购',\n        stage: '04',\n        y: '立项审批',\n        strategy: '03'\n    },\n    {\n        income: 1085,\n        strategyName: '单一来源采购',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '03'\n    },\n    {\n        income: 406,\n        strategyName: '单一来源采购',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '03'\n    },\n    {\n        income: 298,\n        strategyName: '单一来源采购',\n        stage: '07',\n        y: '合同执行',\n        strategy: '03'\n    },\n    {\n        income: 0,\n        strategyName: '竞争性谈判',\n        stage: '04',\n        y: '立项审批',\n        strategy: '04'\n    },\n    {\n        income: 0,\n        strategyName: '竞争性谈判',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '04'\n    },\n    {\n        income: 0,\n        strategyName: '竞争性谈判',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '04'\n    },\n    {\n        income: 0,\n        strategyName: '竞争性谈判',\n        stage: '01',\n        y: '初步接触',\n        strategy: '04'\n    },\n    {\n        income: 100,\n        strategyName: '竞争性谈判',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '04'\n    },\n    {\n        income: 200,\n        strategyName: '竞争性谈判',\n        stage: '03',\n        y: '方案设计',\n        strategy: '04'\n    },\n    {\n        income: 33.7,\n        strategyName: '竞争性谈判',\n        stage: '07',\n        y: '合同执行',\n        strategy: '04'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '01',\n        y: '初步接触',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '03',\n        y: '方案设计',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '04',\n        y: '立项审批',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '询价',\n        stage: '07',\n        y: '合同执行',\n        strategy: '05'\n    },\n    {\n        income: 0,\n        strategyName: '政府补贴',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '06'\n    },\n    {\n        income: 0,\n        strategyName: '政府补贴',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '06'\n    },\n    {\n        income: 0,\n        strategyName: '政府补贴',\n        stage: '07',\n        y: '合同执行',\n        strategy: '06'\n    },\n    {\n        income: 0,\n        strategyName: '政府补贴',\n        stage: '01',\n        y: '初步接触',\n        strategy: '06'\n    },\n    {\n        income: 800,\n        strategyName: '政府补贴',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '06'\n    },\n    {\n        income: 100,\n        strategyName: '政府补贴',\n        stage: '03',\n        y: '方案设计',\n        strategy: '06'\n    },\n    {\n        income: 6700,\n        strategyName: '政府补贴',\n        stage: '04',\n        y: '立项审批',\n        strategy: '06'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '01',\n        y: '初步接触',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '03',\n        y: '方案设计',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '04',\n        y: '立项审批',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: 'PPP',\n        stage: '07',\n        y: '合同执行',\n        strategy: '07'\n    },\n    {\n        income: 0,\n        strategyName: '直接签约',\n        stage: '01',\n        y: '初步接触',\n        strategy: '08'\n    },\n    {\n        income: 0,\n        strategyName: '直接签约',\n        stage: '02',\n        y: '沟通建议',\n        strategy: '08'\n    },\n    {\n        income: 0,\n        strategyName: '直接签约',\n        stage: '04',\n        y: '立项审批',\n        strategy: '08'\n    },\n    {\n        income: 536,\n        strategyName: '直接签约',\n        stage: '03',\n        y: '方案设计',\n        strategy: '08'\n    },\n    {\n        income: 500,\n        strategyName: '直接签约',\n        stage: '05',\n        y: '投标阶段',\n        strategy: '08'\n    },\n    {\n        income: 61.9,\n        strategyName: '直接签约',\n        stage: '06',\n        y: '签约阶段',\n        strategy: '08'\n    },\n    {\n        income: 40.2,\n        strategyName: '直接签约',\n        stage: '07',\n        y: '合同执行',\n        strategy: '08'\n    }\n];\nvar zeroSymbol = 'path://M275.4324649926712,11.016971593238729 L313.4325555220882,11.016971593238729 L313.4325555220882,383.0169422244129 L275.4324649926712,383.0169422244129 L275.4324649926712,11.016971593238729 z';\nvar symbol = 'diamond';\n\n\nvar yNames = [];\nvar xNames = [];\n\nvar seriesMap = {};\n\n_.each(originData, function (item) {\n    if (yNames.indexOf(item.y) < 0) {\n        yNames.push(item.y);\n    }\n    if (xNames.indexOf(item.strategyName) < 0) {\n        xNames.push(item.strategyName);\n    }\n\n    seriesMap[item.y] = seriesMap[item.y] || {\n        name: item.y,\n        dataMap: {}\n    };\n\n    seriesMap[item.y].dataMap[item.strategyName] = item.income;\n});\n\nvar series = [];\n\n_.each(seriesMap, function (seriesItem) {\n\n    var data = [];\n\n    _.each(xNames, function (x) {\n        var value = seriesItem.dataMap[x] || 0;\n        var item = {\n            name: seriesItem.name,\n            value: [\n                xNames.indexOf(x), yNames.indexOf(seriesItem.name),\n                value\n            ]\n        };\n\n        if (value <= 0) {\n            item.symbol = zeroSymbol;\n            item.symbolSize = [2,5];\n            item.itemStyle={\n                normal:{\n                    color:'#517ed1'\n                }\n            }\n        }\n        data.push(item);\n    });\n\n    series.push({\n        name: seriesItem.name,\n        type: 'scatter',\n        data: data,\n        symbol: symbol,\n        symbolSize: function (val) {\n            return Math.pow(val[2], 0.25);\n        }\n    });\n});\n\n\n\n\nconsole.log(seriesMap);\nconsole.log(series);\noption = {\n    title: {\n        text: 'Punch Card of Github',\n        link: 'https://github.com/pissang/echarts-next/graphs/punch-card'\n    },\n\ntooltip:{\n    show:true\n},\n    grid: {\n        left: 2,\n        bottom: 10,\n        right: 10,\n        containLabel: true\n    },\n    xAxis: {\n        type: 'category',\n        data: xNames,\n        boundaryGap: false,\n        axisLine: {\n            lineStyle:{\n                type:'dashed'\n            }\n        }\n    },\n    yAxis: {\n        type: 'category',\n        data: yNames,\n         axisLine: {\n            lineStyle:{\n                type:'dashed'\n            }\n        }\n    },\n    series: series\n};","html":"","externalScripts":"https://lodash.com/vendor/cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js","updaterUID":"bd-1377353452","theme":"","layout":"","viewCount":105,"userName":"wei笑_","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryxGnKELW.png?v=1500974329440","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"wei笑_"}}