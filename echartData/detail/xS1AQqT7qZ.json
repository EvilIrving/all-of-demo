{"status":0,"data":{"cid":"xS1AQqT7qZ","authorUid":"bd-2215764494","authorUserName":"p***g","title":"Global wind visualization","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2017-09-11T08:32:37.000Z","lastUpdateTime":"2017-09-11T08:32:37.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.7.1","versionCreateTime":"2017-09-11T08:41:24.000Z","code":"$.getJSON('/asset/get/s/data-1505118307697-S1nD_67qb.json', function (windData) {\n    var p = 0;\n    var maxMag = 0;\n    var minMag = Infinity;\n    var data = [];\n    for (var j = 0; j < windData.ny; j++) {\n        for (var i = 0; i < windData.nx; i++, p++) {\n            var vx = windData.data[p][0];\n            var vy = windData.data[p][1];\n            var mag = Math.sqrt(vx * vx + vy * vy);\n            // 数据是一个一维数组\n            // [ [经度, 维度，向量经度方向的值，向量维度方向的值] ]\n            data.push([\n                i / windData.nx * 360 - 180,\n                j / windData.ny * 180 - 90,\n                vx,\n                vy,\n                mag\n            ]);\n            maxMag = Math.max(mag, maxMag);\n            minMag = Math.min(mag, minMag);\n        }\n    }\n    data.reverse();\n    \n    myChart.setOption(option = {\n        backgroundColor: '#333',\n        visualMap: {\n            left: 'center',\n            min: minMag,\n            max: maxMag,\n            dimension: 4,\n            inRange: {\n                // color: ['green', 'yellow', 'red']\n                        color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            },\n            realtime: false,\n            calculable: true,\n            textStyle: {\n                color: '#fff'\n            },\n            orient: 'horizontal'\n        },\n        geo: {\n            map: 'world',\n            left: 0,\n            right: 0,\n            top: 0,\n            zoom: 1,\n            silent: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#323c48',\n                    borderColor: '#111'\n                }\n            }\n        },\n        series: {\n            type: 'custom',\n            coordinateSystem: 'geo',\n            data: data,\n            // silent: true,\n            encode: {\n                x: 0,\n                y: 0\n            },\n            renderItem: function (params, api) {\n                var x = api.value(0), y = api.value(1), dx = api.value(2), dy = api.value(3);\n                var start = api.coord([Math.max(x - dx / 5, -180), Math.max(y - dy / 5, -90)]);\n                var end = api.coord([Math.min(x + dx / 5, 180), Math.min(y + dy / 5, 90)]);\n                return {\n                    type: 'line',\n                    shape: {\n                        x1: start[0], y1: start[1],\n                        x2: end[0], y2: end[1]\n                    },\n                    style: {\n                        lineWidth: 0.5,\n                        stroke: api.visual('color')\n                    }\n                }\n            },\n            progressive: 2000\n        }\n    })\n});","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-2215764494","theme":"","layout":"","viewCount":360,"userName":"p***g","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xS1AQqT7qZ.png?v=1505119284494","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-custom","visualMap"],"customTags":[],"updaterUserName":"p***g"}}