{"status":0,"data":{"cid":"xK6NMo03Pu","authorUid":"obd-oAV1MjlH0o2jxJOz4DO_gr7p_LMwF7S","authorUserName":"g***1","title":"pie1","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-05-31T10:44:20.000Z","lastUpdateTime":"2021-05-31T10:44:20.000Z","auth":2,"uid":"obd-oAV1MjlH0o2jxJOz4DO_gr7p_LMwF7S","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-01T02:59:33.000Z","code":"let dashedPic =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM8AAAAOBAMAAAB6G1V9AAAAD1BMVEX////Kysrk5OTj4+TJycoJ0iFPAAAAG0lEQVQ4y2MYBaNgGAMTQQVFOiABhlEwCugOAMqzCykGOeENAAAAAElFTkSuQmCC';\nlet color = ['#FF8700', '#ffc300', '#00e473', '#009DFF', '#0034ff'];\nlet chartData = [\n    {\n        name: '早1发',\n        value: 40083,\n        unit: '列',\n    },\n    {\n        name: '正点发',\n        value: 33974,\n        unit: '列',\n    },\n    {\n        name: '晚2发',\n        value: 15400,\n        unit: '列',\n    },\n    {\n        name: '早点',\n        value: 11021,\n        unit: '列',\n    },\n    {\n        name: '晚点',\n        value: 30696,\n        unit: '列',\n    },\n];\nlet arrName = [];\nlet arrValue = [];\nlet sum = 0;\nlet pieSeries = [],\n    lineYAxis = [];\n\n// 数据处理\nchartData.forEach((v, i) => {\n    arrName.push(v.name);\n    arrValue.push(v.value);\n    sum = sum + v.value;\n});\n\n// 图表option整理\nchartData.forEach((v, i) => {\n    pieSeries.push({\n        name: '沪昆线到达晚点情况',\n        type: 'pie',\n        clockWise: false,\n        hoverAnimation: false,\n        radius: [60 - i * 10 + '%', 61.5 - i * 10 + '%'],\n        center: ['40%', '50%'],\n        label: {\n            show: false,\n        },\n        itemStyle: {\n            borderRadius: 20,\n        },\n        data: [\n            {\n                value: v.value,\n                name: v.name,\n                 itemStyle: {\n                    normal: {\n                        borderWidth: 5,\n                        borderColor:color[i]\n                    }\n                }\n            },\n            {\n                value: sum - v.value,\n                name: '',\n                itemStyle: {\n                    color: 'rgba(0,0,0,0)',\n                },\n            },\n        ],\n    });\n    pieSeries.push({\n        name: '',\n        type: 'pie',\n        silent: true,\n        z: 1,\n        clockWise: false, //顺时加载\n        hoverAnimation: false, //鼠标移入变大\n        radius: [60 - i * 10 + '%', 61.5 - i * 10 + '%'],\n        center: ['40%', '50%'],\n        label: {\n            show: false,\n        },\n        itemStyle: {\n            borderCap: 'round',\n            borderJoin: 'round',\n        },\n        data: [\n            {\n                value: 7.5,\n                itemStyle: {\n                    color: '#E3F0FF',\n                },\n            },\n            {\n                value: 2.5,\n                name: '',\n                itemStyle: {\n                    color: 'rgba(0,0,0,0)',\n                },\n            },\n        ],\n    });\n    v.percent = ((v.value / sum) * 100).toFixed(1) + '%';\n    lineYAxis.push({\n        value: i,\n        textStyle: {\n            rich: {\n                circle: {\n                    color: color[i],\n                    padding: [0, 5],\n                },\n            },\n        },\n    });\n});\n\noption = {\n    backgroundColor: '#fff',\n    color: color,\n    grid: {\n        top: '17%',\n        bottom: '57%',\n        left: '40%',\n        containLabel: false,\n    },\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                formatter: function (params) {\n                    let item = chartData[params];\n                    console.log(item);\n                    return (\n                        '{circle|●}{name|' +\n                        item.name +\n                        '}{bd||}{percent|' +\n                        item.percent +\n                        '}{value|' +\n                        item.value +\n                        '}{unit|列}'\n                    );\n                },\n                interval: 0,\n                inside: true,\n                textStyle: {\n                    color: '#333',\n                    fontSize: 14,\n                    rich: {\n                        line: {\n                            width: 170,\n                            height: 10,\n                            backgroundColor: { image: dashedPic },\n                        },\n                        name: {\n                            color: '#666',\n                            fontSize: 14,\n                        },\n                        bd: {\n                            color: '#ccc',\n                            padding: [0, 5],\n                            fontSize: 14,\n                        },\n                        percent: {\n                            color: '#333',\n                            fontSize: 14,\n                        },\n                        value: {\n                            color: '#333',\n                            fontSize: 16,\n                            fontWeight: 500,\n                            padding: [0, 0, 0, 20],\n                        },\n                        unit: {\n                            fontSize: 14,\n                        },\n                    },\n                },\n                show: true,\n            },\n            data: lineYAxis,\n        },\n    ],\n    xAxis: [\n        {\n            show: false,\n        },\n    ],\n    series: pieSeries,\n};\n","html":"","externalScripts":"","updaterUID":"obd-oAV1MjlH0o2jxJOz4DO_gr7p_LMwF7S","theme":"","layout":"","viewCount":0,"userName":"g***1","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xK6NMo03Pu.png?v=1622516373449","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-pie"],"customTags":[],"updaterUserName":"g***1"}}