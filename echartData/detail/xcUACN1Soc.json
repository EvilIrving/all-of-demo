{"status":0,"data":{"cid":"xcUACN1Soc","authorUid":"obd-oj9Mv0nf0p70mxuwPz3FHClAQoVeXDj","authorUserName":"f***儿","title":"echarts地图实现热力图及散点图效果","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-09-03T08:59:06.000Z","lastUpdateTime":"2021-09-03T10:11:10.000Z","auth":1,"uid":"obd-oj9Mv0nf0p70mxuwPz3FHClAQoVeXDj","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.0.2","versionCreateTime":"2021-09-03T10:11:10.000Z","code":"var mapName = 'china'\r\nvar data = [\r\n    {name:\"北京\",value:0},\r\n    {name:\"天津\",value:42},\r\n    {name:\"河北\",value:102},\r\n    {name:\"山西\",value:81},\r\n    {name:\"内蒙古\",value:147},\r\n    ];\r\n    \r\nvar geoCoordMap = {\"台湾\":[121.509062,25.044332],\"河北\":[114.502461,38.045474],\"山西\":[112.549248,37.857014],\"内蒙古\":[111.670801,40.818311],\"辽宁\":[123.429096,41.796767],\"吉林\":[125.3245,43.886841],\"黑龙江\":[126.642464,45.756967],\"江苏\":[118.767413,32.041544],\"浙江\":[120.153576,30.287459],\"安徽\":[117.283042,31.86119],\"福建\":[119.306239,26.075302],\"江西\":[115.892151,28.676493],\"山东\":[117.000923,36.675807],\"河南\":[113.665412,34.757975],\"湖北\":[114.298572,30.584355],\"湖南\":[112.982279,28.19409],\"广东\":[113.280637,23.125178],\"广西\":[108.320004,22.82402],\"海南\":[110.33119,20.031971],\"四川\":[104.065735,30.659462],\"贵州\":[106.713478,26.578343],\"云南\":[102.712251,25.040609],\"西藏\":[91.132212,29.660361],\"陕西\":[108.948024,34.263161],\"甘肃\":[103.823557,36.058039],\"青海\":[101.778916,36.623178],\"宁夏\":[106.278179,38.46637],\"新疆\":[87.617733,43.792818],\"北京\":[116.405285,39.904989],\"天津\":[117.190182,39.125596],\"上海\":[121.472644,31.231706],\"重庆\":[106.504962,29.533155],\"香港\":[114.173355,22.320048],\"澳门\":[113.54909,22.198951]};\r\nvar toolTipData = [ \r\n    {name:\"北京\",value:[{name:\"车辆数\",value:95},{name:\"司机数\",value:82}]},\r\n    {name:\"天津\",value:[{name:\"车辆数\",value:22},{name:\"司机数\",value:20}]},\r\n    {name:\"河北\",value:[{name:\"车辆数\",value:60},{name:\"司机数\",value:42}]},\r\n    {name:\"山西\",value:[{name:\"车辆数\",value:40},{name:\"司机数\",value:41}]},\r\n    {name:\"内蒙古\",value:[{name:\"车辆数\",value:23},{name:\"司机数\",value:24}]},\r\n\r\n];\r\n\r\n\r\nvar max = 480,\r\n    min = 9; // todo \r\nvar maxSize4Pin = 100,\r\n    minSize4Pin = 20;\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\nvar planePath = 'path://M683.436973 788.16173H317.495351c-28.86573 0-52.279351-23.164541-52.279351-51.753514V296.627892c0-28.575135 23.413622-51.739676 52.279351-51.739676h39.202595v12.938379c0 35.715459 29.267027 64.678054 65.356108 64.678054h156.824216c36.075243 0 65.34227-28.962595 65.342271-64.678054v-12.938379h39.216432c28.86573 0 52.265514 23.164541 52.265513 51.753514v439.794162c0 28.575135-23.399784 51.739676-52.265513 51.739676zM631.143784 425.970162H369.747027a26.015135 26.015135 0 0 0-26.125838 25.876757 26.015135 26.015135 0 0 0 26.139676 25.876757H631.143784a26.015135 26.015135 0 0 0 26.139675-25.876757 26.015135 26.015135 0 0 0-26.153513-25.876757z m0 90.554811H369.747027a26.015135 26.015135 0 0 0-26.125838 25.876757 26.015135 26.015135 0 0 0 26.139676 25.862919H631.143784a26.015135 26.015135 0 0 0 26.139675-25.876757 26.015135 26.015135 0 0 0-26.153513-25.876757z m0 90.540973H369.747027a26.015135 26.015135 0 0 0-26.125838 25.876757 26.015135 26.015135 0 0 0 26.139676 25.876756H631.143784a26.015135 26.015135 0 0 0 26.139675-25.876756 26.015135 26.015135 0 0 0-26.153513-25.876757z m-78.419027-310.451892H448.207568c-28.879568 0-52.279351-23.164541-52.279352-51.739676s23.399784-51.739676 52.279352-51.739675h104.544864c28.86573 0 52.279351 23.164541 52.279352 51.753513 0 28.561297-23.413622 51.725838-52.279352 51.725838z';\r\n\r\noption = {\r\n    backgroundColor: '#070827', \r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function (params) {\r\n            const i = params.dataIndex\r\n            if(toolTipData[i]?.value[0].name){\r\n                const car = toolTipData[i].value[0]\r\n                const driver = toolTipData[i].value[1]\r\n                const htm = `\r\n                <div class=\"tool-tip\">\r\n                   <div>${ car.name} : ${ car.value}</div>\r\n                   <div>${ driver.name} : ${ driver.value}</div>\r\n                </div>\r\n                `\r\n                return htm\r\n            }else{\r\n                return null\r\n            }\r\n         \r\n        }\r\n    },\r\n    visualMap: {\r\n        show: true,\r\n        min: 0,\r\n        max: 200,\r\n        left: '10%',\r\n        top: 'bottom',\r\n        calculable: true,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n            color: ['rgba(0, 107, 255, 0.2)','rgba(0, 107, 255, 0.8)', ] // 蓝\r\n        }\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            }\r\n        },\r\n        roam: false,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: 'rgba(0, 107, 255, 0.3)',\r\n                borderColor: '#006BFF',\r\n                borderWidth:2,\r\n            },\r\n            emphasis: {\r\n                areaColor: '#4499d0',\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n            name: '中心白色图标',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbol: planePath,\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            symbolKeepAspect:true,\r\n       \r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#FFFFFF'\r\n                }\r\n            },\r\n            zlevel: 6\r\n        },\r\n        {\r\n            type: 'map',\r\n            map: mapName,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#006BFF',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n       \r\n        {\r\n            name: '图标红色背景',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n             symbolSize: function(val) {\r\n                return val[2] /6;\r\n            },\r\n            symbolKeepAspect:true,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#E26851'\r\n                }\r\n            },\r\n        \r\n            zlevel: 5\r\n        },\r\n\r\n    ]\r\n};\r\n\r\n\r\n\r\n","html":"","externalScripts":"https://www.makeapie.com/dep/echarts/map/js/china.js","updaterUID":"obd-oj9Mv0nf0p70mxuwPz3FHClAQoVeXDj","theme":"","layout":"","viewCount":0,"userName":"f***儿","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcUACN1Soc.png?v=1630663870930","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","visualMap"],"customTags":[],"updaterUserName":"f***儿"}}