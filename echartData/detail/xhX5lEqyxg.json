{"status":0,"data":{"cid":"xhX5lEqyxg","authorUid":"bd-3195553279","authorUserName":"戈***凉","title":"中国地图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-14T01:59:02.000Z","lastUpdateTime":"2021-12-14T01:59:02.000Z","auth":2,"uid":"bd-3195553279","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-14T01:59:02.000Z","code":"/*\n喜欢作品的可以关注csdn https://blog.csdn.net/qq_47410017\n*/\n\n    //定义一个全局变量，用来统计每个省有几个市\n    let num = 0;\n    //1.中国地图\n    var chinaMap = \"/asset/get/s/data-1621947890604-aSx9ZxNx1.json\";\n    //2.台湾省地图\n    var taiWanMap = \"/asset/get/s/data-1621947975053-R-8DyOg0e.json\";\n    //3.海南省地图\n    var haiNanMap = \"/asset/get/s/data-1621948145271-68eCc32D3.json\";\n    //4.安徽省地图\n    var anHuiMap = \"/asset/get/s/data-1621948188732-TXl0sSFuy.json\";\n    //5.江西省地图\n    var jiangXiMap = \"/asset/get/s/data-1621948233209--fwwE8_l7.json\";\n    //6.湖南省地图\n    var huNanMap = \"/asset/get/s/data-1621948319356-HrpXRrJ6l.json\";\n    //7.云南省地图\n    var yunNanMap = \"/asset/get/s/data-1621948345350-4CVpSWQSK.json\";\n    //8.贵州省地图\n    var guiZhouMap = \"/asset/get/s/data-1621948396733-Udi6XAEgw.json\";\n    //9.广东省地图\n    var guangDongMap = \"/asset/get/s/data-1621948441031-pLiWmoZet.json\";\n    //10.福建省地图\n    var fuJianMap = \"/asset/get/s/data-1621948490541-XH7VxL7oj.json\";\n    //11.浙江省地图\n    var zheJiangMap = \"/asset/get/s/data-1621948532095-VbosDul6I.json\";\n    //12.江苏省地图\n    var jiangSuMap = \"/asset/get/s/data-1621948565021-s3yTJP3Zl.json\";\n    //13.四川省地图\n    var siChuanMap = \"/asset/get/s/data-1621948609883-izF8OEpk9.json\";\n    //14.重庆市市地图\n    var chongQingMap = \"/asset/get/s/data-1621948631044-2W6Sgh1H-.json\";\n    //15.湖北省地图\n    var huBeiMap = \"/asset/get/s/data-1621948649243-GxqNlvJU5.json\";\n    //16.河南省地图\n    var heNanMap = \"/asset/get/s/data-1621948703170-imaQv84Cd.json\";\n    //17.山东省地图\n    var shanDongMap = \"/asset/get/s/data-1621948716835-cOtdSmaJo.json\";\n    //18.吉林省地图\n    var jiLinMap = \"/asset/get/s/data-1621948723748-c4ZOa5KTk.json\";\n    //19.辽宁省地图\n    var liaoNingMap = \"/asset/get/s/data-1621948731460-_efUVEzY0.json\";\n    //20.天津市市地图\n    var tianJinMap = \"/asset/get/s/data-1621948739174-L2C2t_F5t.json\";\n    //21.北京市市地图\n    var beiJingMap = \"/asset/get/s/data-1621948858020-sL_9-nzvY.json\";\n    //22.河北省地图\n    var heBeiMap = \"/asset/get/s/data-1621948873563-JNgr5paiY.json\";\n    //23.山西省地图\n    var shanXiMap = \"/asset/get/s/data-1621948883641-gFXuKdbe9.json\";\n    //24.陕西省地图\n    var shanXi2Map = \"/asset/get/s/data-1621948892136-f9xS_1lzo.json\";\n    //25.宁夏回族自治区省地图\n    var ningXiaMap = \"/asset/get/s/data-1621948903314-2dSyFDeNM.json\";\n    //26.青海省地图\n    var qingHaiMap = \"/asset/get/s/data-1621948912616-JofrNyZIQ.json\";\n    //27.西藏自治区地图\n    var xiZangMap = \"/asset/get/s/data-1621948923877-Gr55e-l4V.json\";\n    //28.黑龙江省地图\n    var heiLongJiangMap = \"/asset/get/s/data-1621948931666-7RFUheW7w.json\";\n    //29.内蒙古自治区地图\n    var neimengGuMap = \"/asset/get/s/data-1621948941132-gcGpDlAy3.json\";\n    //30.甘肃省地图\n    var ganSuMap = \"/asset/get/s/data-1621948952287-fhag8An8k.json\";\n    //31.新疆维吾尔自治区省地图\n    var xinJiangMap = \"/asset/get/s/data-1621948963218-CwFnOzi4B.json\";\n    //32.广西壮族自治区地图\n    var guangxiMap = \"/asset/get/s/data-1621948972207-pHKfjk3Zs.json\";\n    //设置初始地图\n    var mapname = chinaMap;\n    //设置省份的json 这里注意名字要和中国地图上的名字一致\n    var mapJson = [\n        {\n            name: \"台湾省\",\n            json: taiWanMap,\n        },\n        {\n            name: \"海南省\",\n            json: haiNanMap,\n        },\n        {\n            name: \"安徽省\",\n            json: anHuiMap,\n        },\n        {\n            name: \"江西省\",\n            json: jiangXiMap,\n        },\n        {\n            name: \"湖南省\",\n            json: huNanMap,\n        },\n        {\n            name: \"云南省\",\n            json: yunNanMap,\n        },\n        {\n            name: \"贵州省\",\n            json: guiZhouMap,\n        },\n        {\n            name: \"广东省\",\n            json: guangDongMap,\n        },\n        {\n            name: \"福建省\",\n            json: fuJianMap,\n        },\n        {\n            name: \"浙江省\",\n            json: zheJiangMap,\n        },\n        {\n            name: \"江苏省\",\n            json: jiangSuMap,\n        },\n        {\n            name: \"四川省\",\n            json: siChuanMap,\n        },\n        {\n            name: \"重庆市\",\n            json: chongQingMap,\n        },\n        {\n            name: \"湖北省\",\n            json: huBeiMap,\n        },\n        {\n            name: \"河南省\",\n            json: heNanMap,\n        },\n        {\n            name: \"山东省\",\n            json: shanDongMap,\n        },\n        {\n            name: \"吉林省\",\n            json: jiLinMap,\n        },\n        {\n            name: \"辽宁省\",\n            json: liaoNingMap,\n        },\n        {\n            name: \"天津市\",\n            json: tianJinMap,\n        },\n        {\n            name: \"北京市\",\n            json: beiJingMap,\n        },\n        {\n            name: \"河北省\",\n            json: heBeiMap,\n        },\n        {\n            name: \"山西省\",\n            json: shanXiMap,\n        },\n        {\n            name: \"陕西省\",\n            json: shanXi2Map,\n        },\n        {\n            name: \"宁夏回族自治区\",\n            json: ningXiaMap,\n        },\n        {\n            name: \"青海省\",\n            json: qingHaiMap,\n        },\n        {\n            name: \"西藏自治区\",\n            json: xiZangMap,\n        },\n        {\n            name: \"黑龙江省\",\n            json: heiLongJiangMap,\n        },\n        {\n            name: \"内蒙古自治区\",\n            json: neimengGuMap,\n        },\n        {\n            name: \"甘肃省\",\n            json: ganSuMap,\n        },\n        {\n            name: \"新疆维吾尔自治区\",\n            json: xinJiangMap,\n        },\n        {\n            name: \"广西壮族自治区\",\n            json: guangxiMap,\n        },\n    ];\n    //提取自动播放的代码\n    function timing() {\n        // 取消高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: index,\n        });\n        // 高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: index + 1,\n        });\n        index++;\n        //判断长度是否和城市的长度一样，如果一样重新播放\n        if (index > num) {\n            index = -1;\n        }\n    }\n    //加载时的文字提示\n    myChart.showLoading({ text: '正在加载数据' });  //增加等待提示\n    //设置开始位置（播放的位置）\n    let index = -1;\n    //定时播放\n    var timer = setInterval(function () {\n        //调用定时播放代码\n        timing()\n    }, 1500);\n    //鼠标移入\n    myChart.on('mousemove', function (e) {\n        //取消定时\n        clearInterval(timer);\n        //取消高亮\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n        });\n        //高亮鼠标移入的位置\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: e.dataIndex,\n        });\n\n    });\n    //鼠标移出\n    myChart.on('mouseout', function (e) {\n        //取消定时\n        clearInterval(timer);\n        //取消高亮\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: e.dataIndex,\n        });\n        //重新开始定时播放\n        timer = setInterval(function () {\n            //调用定时播放代码\n            timing()\n        }, 1500);\n    });\n    //点击事件\n    myChart.on('click', function (e) {\n        //过滤 这里是es6语法 filter函数可以看成是一个过滤函数，返回符合条件的元素的数组\n        var chooseName = mapJson.filter((item) => {\n            //我们根据名字来判断是否选择一种\n            return item.name == e.name;\n        });\n        //这里的chooseName是一个数组，我们需要获取到json 有兴趣可以打印\n        //{name: \"新疆维吾尔自治区\", json: \"json/新疆维吾尔自治区.json\"}\n        mapname = chooseName[0].json;\n\n        //添加一个返回按键\n        $('<div class=\"back\">返回中国地图</div>').appendTo(\n            $('#chart-panel')\n        );\n        //给返回按键设置样式\n        $('.back').css({\n            position: 'absolute',//绝对地位\n            left: '20px',//设置位置\n            top: '20px',//设置位置\n            color: 'pink',//设置字体颜色\n            'font-size': '20px',//设置字体大小\n            cursor: 'pointer',//变小手\n        });\n        //设置返回按钮的点击事件\n        $('.back').click(function () {\n            //地图重新设置为中国地图\n            mapname = chinaMap;\n            //隐藏按钮\n            $('.back').css({\n                opacity:0,\n            });\n            //绘制地图\n            mapInit();\n            //重新开始定时播放\n            timer = setInterval(function () {\n                //调用定时播放代码\n                timing()\n            }, 1500);\n        });\n        //绘制地图\n        mapInit();\n        //定时播放\n        timer = setInterval(function () {\n            //调用定时播放代码\n            timing()\n        }, 1500);\n    });\n    //设置初始化时间\n    setTimeout(function () {\n        mapInit();\n    }, 500);\n\n\n    //创建地图\n    var mapInit = () => {\n        //调用中国地图（同步）\n        $.getJSON(mapname, function (geoJson) {\n            //获取到长度（每个省里有几个市）\n            num = geoJson.features.length;\n            //调用我们通过json对象注册的地图\n            echarts.registerMap('China', geoJson);\n            //文件加载的动画\n            myChart.hideLoading();\n            //判断是否为祖国地图\n            if (mapname === chinaMap) {\n                //设置小黄点\n                var geoCoordMap = {\n                    '台湾': [122,23],\n                    '黑龙江': [129,51],\n                    '内蒙古': [110.3467, 41.4899],\n                    \"吉林\": [125.8154, 44.2584],\n                    '北京市': [116.4551, 40.2539],\n                    \"辽宁\": [123.1238, 42.1216],\n                    \"河北\": [114.4995, 38.1006],\n                    \"天津\": [117.4219, 39.4189],\n                    \"山西\": [112.3352, 37.9413],\n                    \"陕西\": [109.1162, 34.2004],\n                    \"甘肃\": [103.5901, 36.3043],\n                    \"宁夏\": [106.3586, 38.1775],\n                    \"青海\": [101.4038, 36.8207],\n                    \"新疆\": [87.9236, 43.5883],\n                    \"西藏\": [88.388277,31.56375],\n                    \"四川\": [103.9526, 30.7617],\n                    \"重庆\": [108.384366, 30.439702],\n                    \"山东\": [117.1582, 36.8701],\n                    \"河南\": [113.4668, 34.6234],\n                    \"江苏\": [118.8062, 31.9208],\n                    \"安徽\": [117.29, 32.0581],\n                    \"湖北\": [114.3896, 30.6628],\n                    \"浙江\": [119.5313, 29.8773],\n                    \"福建\": [119.4543, 25.9222],\n                    \"江西\": [116.0046, 28.6633],\n                    \"湖南\": [113.0823, 28.2568],\n                    \"贵州\": [106.6992, 26.7682],\n                    \"云南\": [102.9199, 25.4663],\n                    \"广东\": [113.12244, 23.009505],\n                    \"广西\": [108.479, 23.1152],\n                    \"海南\": [110.3893, 19.8516],\n                    '上海': [121.4648, 31.2891],\n                };\n                //设置每个区域的值\n                var data = [\n                    {name:\"台湾\",value:1},\n                    {name:\"北京\",value:2},\n                    {name:\"天津\",value:3},\n                    {name:\"河北\",value:4},\n                    {name:\"山西\",value:5},\n                    {name:\"内蒙古\",value:6},\n                    {name:\"辽宁\",value:7},\n                    {name:\"吉林\",value:8},\n                    {name:\"黑龙江\",value:9},\n                    {name:\"上海\",value:10},\n                    {name:\"江苏\",value:11},\n                    {name:\"浙江\",value:12},\n                    {name:\"安徽\",value:13},\n                    {name:\"福建\",value:14},\n                    {name:\"江西\",value:15},\n                    {name:\"山东\",value:16},\n                    {name:\"河南\",value:17},\n                    {name:\"湖北\",value:18},\n                    {name:\"湖南\",value:19},\n                    {name:\"重庆\",value:20},\n                    {name:\"四川\",value:21},\n                    {name:\"贵州\",value:22},\n                    {name:\"云南\",value:23},\n                    {name:\"西藏\",value:24},\n                    {name:\"陕西\",value:25},\n                    {name:\"甘肃\",value:26},\n                    {name:\"青海\",value:27},\n                    {name:\"宁夏\",value:28},\n                    {name:\"新疆\",value:29},\n                    {name:\"广东\",value:30},\n                    {name:\"广西\",value:31},\n                    {name:\"海南\",value:32},\n                ];\n                //给每个地区赋值\n                var convertData = function (data) {\n                    //定义一个数组\n                    var res = [];\n                    //循环遍历每个区域值\n                    for (var i = 0; i < data.length; i++) {\n                        //获取坐标\n                        var geoCoord = geoCoordMap[data[i].name];\n                        //判断是否有坐标\n                        if (geoCoord) {\n                            //往数组里设置值\n                            res.push({\n                                name: data[i].name,\n                                value: geoCoord.concat(data[i].value)\n                            });\n                        }\n                    }\n                    return res;\n                };\n            }else{\n                //这里不为中国地图所以先不设置（后面需要对市区进行标记在设置）\n\n                //设置小黄点\n                var geoCoordMap = {\n\n                };\n                //设置每个区域的值\n                var data = [\n\n                ];\n                //给每个地区赋值\n                convertData = function (data) {\n                    var res = [];\n                    for (var i = 0; i < data.length; i++) {\n                        var geoCoord = geoCoordMap[data[i].name];\n                        if (geoCoord) {\n                            res.push({\n                                name: data[i].name,\n                                value: geoCoord.concat(data[i].value)\n                            });\n                        }\n                    }\n                    return res;\n                };\n            }\n\n\n            //地图开始\n            option = {\n                //设置背景颜色\n                backgroundColor: '#020933',\n                geo: {\n                    map: 'China',//地图为刚刚设置的China\n                    aspectScale:0.75, //长宽比\n                    zoom:1.1,//当前视角的缩放比例\n                    roam: false,//是否开启鼠标缩放和平移漫游。默认不开启。如果只想要开启缩放或者平移，可以设置成 'scale' 或者 'move'。设置成 true 为都开启\n                    itemStyle: {//地图区域的多边形 图形样式\n                        normal: {\n                            areaColor: '#013C62',//地区颜色\n                            shadowColor: '#182f68',//阴影颜色\n                            shadowOffsetX: 0,//阴影偏移量\n                            shadowOffsetY: 25,//阴影偏移量\n                        },\n                        emphasis: {\n                            areaColor: '#2AB8FF',//地区颜色\n                            label: {\n                                show: false,//是否在高亮状态下显示标签\n                            },\n                        },\n                    },\n                },\n                series: [//数据系列\n                    {\n                        type: 'map',//地图类型\n                        //地图上文字\n                        label: {\n                            normal: {\n                                show: true,//是否显示标签\n                                textStyle: {\n                                    color: '#fff',\n                                },\n                            },\n                            emphasis: {\n                                textStyle: {\n                                    color: '#fff',\n                                },\n                            },\n                        },\n                        //地图区域的多边形 图形样式\n                        itemStyle: {\n                            normal: {\n                                borderColor: '#2ab8ff',\n                                borderWidth: 1.5,\n                                areaColor: '#12235c',\n                            },\n                            emphasis: {\n                                areaColor: '#2AB8FF',\n                                borderWidth: 0,\n                            },\n                        },\n                        zoom: 1.2,//当前视角的缩放比例\n                        //是否开启鼠标缩放和平移漫游。默认不开启。如果只想要开启缩放或者平移，可以设置成 'scale' 或者 'move'。设置成 true 为都开启\n                        roam: false,\n                        map: 'China', //使用中国地图\n\n                    },\n                    {\n\n                        //设置为分散点\n                        type: 'scatter',\n                        //series坐标系类型\n                        coordinateSystem: 'geo',\n                        //设置图形 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\n                        symbol: 'pin',\n                        // //标记的大小，可以设置成诸如 10 这样单一的数字，也可以用数组分开表示宽和高，例如 [20, 10] 表示标记宽为20，高为10\n                        symbolSize: [40,40],\n                        //气泡字体设置\n                        label: {\n                            normal: {\n                                show: true,//是否显示\n                                textStyle: {\n                                    color: '#fff',//字体颜色\n                                    fontSize: 8,//字体大小\n                                },\n                                //返回气泡数据\n                                formatter (value){\n                                    return value.data.value[2]\n                                }\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: '#1E90FF', //标志颜色\n                            }\n                        },\n                        //给区域赋值\n                        data: convertData(data),\n                        showEffectOn: 'render',//配置何时显示特效。可选：'render' 绘制完成后显示特效。'emphasis' 高亮（hover）的时候显示特效。\n                        rippleEffect: {//涟漪特效相关配置。\n                            brushType: 'stroke'//波纹的绘制方式，可选 'stroke' 和 'fill'\n                        },\n                        hoverAnimation: true,//是否开启鼠标 hover 的提示动画效果。\n                        zlevel: 1//所属图形的 zlevel 值\n                    },\n                ],\n            };\n            myChart.setOption(option);\n        });\n    };","html":"","externalScripts":"","updaterUID":"bd-3195553279","theme":"","layout":"","viewCount":0,"userName":"戈***凉","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhX5lEqyxg.png?v=1639447142557","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter"],"customTags":[],"updaterUserName":"戈***凉"}}