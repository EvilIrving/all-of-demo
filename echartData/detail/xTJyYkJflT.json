{"status":0,"data":{"cid":"xTJyYkJflT","authorUid":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","authorUserName":"187*****210","title":"双柱状图 数据堆叠 类目轴 时间轴","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-16T05:48:44.000Z","lastUpdateTime":"2020-10-16T05:48:44.000Z","auth":1,"uid":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-16T05:48:44.000Z","code":"\r\nvar color=['#5472d3',\"#6f42c1\",\"#fc4150\",\"#ff9100\",\"#00785d\",\"#009afe\",\"#0d47a1\",\"#310581\",'#c50010',\r\n    \"#c56200\",'#03b88f','#bfbfbe'];\r\nvar data = [];\r\nvar name=[];\r\n\r\nfunction randomData() {\r\n    now = new Date(+now + oneDay);\r\n    value = value + Math.random() * 21 - 10;\r\n    return {\r\n        name: now.toString(),\r\n        value: [\r\n        [now.getFullYear(), now.getMonth() + 1, now.getDate()].join(\"/\"),\r\n        Math.round(value),Math.round(value)\r\n        ]\r\n    };\r\n}\r\n \r\nvar now = +new Date(2020, 9, 0);\r\nvar oneDay = 24 * 3600 * 1000;\r\nvar value = Math.random() * 1000;\r\nfor (var i = 0; i < 30; i++) {\r\n    data.push(randomData());\r\n}\r\nvar data1=[];\r\ndata.map(function(e){\r\n    data1.push({name:e.value[0],value:e.value[1]})\r\n     name.push(e.value[0])\r\n})\r\nvar Data=[];\r\nfor(var i=0;i<10;i++){\r\n    Data.push({name:'设备类'+i,value:data})\r\n}\r\n\r\nvar series=[];\r\nData.map(function(d,i){\r\n    series.push({\r\n            name: d.name,\r\n            type: 'bar',\r\n            barWidth:'50%',\r\n            stack: '维修',\r\n            itemStyle: {\r\n                normal: {\r\n                    color:color[i]\r\n                }\r\n            },\r\n            data: data1\r\n        })\r\n        series.push({\r\n            name: d.name,\r\n            type: 'bar',\r\n            barWidth:'50%',\r\n            stack: '成本',\r\n            xAxisIndex: 1,\r\n            yAxisIndex: 1,\r\n            itemStyle: {\r\n                normal: {\r\n                    color:color[i]\r\n                }\r\n            },\r\n            data: data\r\n        })\r\n})\r\n\r\nvar xAxis=[];\r\nvar yAxis=[];\r\nfor(var i=0;i<2;i++){\r\n    xAxis.push({\r\n        type: 'category',\r\n        data:name,\r\n        interval:0,\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#515562',\r\n                fontSize:12,\r\n            },\r\n            formatter: function (value) {\r\n                return new Date(value).format(\"dd\");\r\n            },\r\n        },\r\n        splitLine: {\r\n            show:true,\r\n            lineStyle: {\r\n                color:\"#c9cfec\"\r\n            }\r\n        },\r\n    })\r\n    yAxis.push({\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#515562',\r\n                fontSize:12,\r\n            },\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color:\"#c9cfec\"\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show:false,\r\n        },\r\n       \r\n    })\r\n    if(i==1){\r\n        xAxis[1].type='time',\r\n        xAxis[1].interval=oneDay,\r\n        xAxis[1].gridIndex=1;\r\n        yAxis[1].gridIndex=1;\r\n    }\r\n}\r\n\r\n\r\noption = {\r\n    backgroundColor: \"#ffffff\",\r\n        title: [{\r\n        text: \"设备运维计划维修统计(大修)\",\r\n        left: \"3%\",\r\n        top: '7%',\r\n        textStyle: {\r\n          fontSize: 16\r\n        },\r\n      },{\r\n        text: \"设备运维计划成本统计(大修)\",\r\n        left: \"3%\",\r\n        top: '54%',\r\n        textStyle: {\r\n          fontSize: 16\r\n        },\r\n      }],\r\n    legend: {\r\n        top:'2%',\r\n        left:'10%',\r\n        right:'10%',\r\n        icon:\"rect\",\r\n        itemWidth: 19,\r\n        itemHeight: 12,\r\n        orient: \"horizontal\",\r\n        textStyle: {\r\n          color: \"#000931\",\r\n          fontSize: 14\r\n        }\r\n    },\r\n    tooltip: {\r\n    trigger: 'axis',\r\n    show:true,\r\n},\r\ntoolbox: [{\r\n        top:'7%',\r\n        right:25,\r\n        show: true,\r\n        iconStyle:{\r\n            borderColor:'#626366'\r\n        },\r\n        feature: {\r\n            magicType: {\r\n                type: ['line', 'bar'],\r\n            },\r\n            restore: {},\r\n            saveAsImage: {}\r\n        }\r\n    },{\r\n        top:'54%',\r\n        right:25,\r\n        show: true,\r\n        iconStyle:{\r\n            borderColor:'#626366'\r\n        },\r\n        feature: {\r\n            magicType: {\r\n                type: ['line', 'bar'],\r\n            },\r\n            restore: {},\r\n            saveAsImage: {}\r\n        }\r\n    }],\r\n    grid: [{\r\n        left: '60',\r\n        right: '30',\r\n        height:'38%',\r\n        top: '10%',\r\n    },\r\n    {\r\n        left: '60',\r\n        right: '30',\r\n        height:'38%',\r\n        top:'57%',    }\r\n    ],\r\n    xAxis:xAxis ,\r\n    yAxis:yAxis,\r\n    series: series\r\n};\r\n\r\nDate.prototype.format = function (fmt) {\r\n    var o = {\r\n        \"M+\": this.getMonth() + 1, //月份\r\n        \"d+\": this.getDate(), //日\r\n        \"h+\": this.getHours(), //小时\r\n        \"m+\": this.getMinutes(), //分\r\n        \"s+\": this.getSeconds(), //秒\r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), //季度\r\n        \"S\": this.getMilliseconds() //毫秒\r\n    };\r\n    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n    for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n}","html":"","externalScripts":"","updaterUID":"obd-oAD15Tez19emHF-R8Hg9lEk1LgCak7t","theme":"","layout":"","viewCount":621,"userName":"187*****210","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTJyYkJflT.png?v=1602827324623","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"187*****210"}}