{"status":0,"data":{"cid":"xFNPVqgDlA","authorUid":"bd-3225273598","authorUserName":"冷***_","title":"YYYYMMDD版本生产测试进度看板","description":"YYYYMMDD版本生产测试计划看板","latestVersion":6,"alwaysLatest":0,"createTime":"2021-07-26T09:36:20.000Z","lastUpdateTime":"2021-07-28T06:39:31.000Z","auth":2,"uid":"bd-3225273598","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-28T06:39:31.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\nvar geoCoordMap = {\r\n'上海': [121.4648, 31.2891],\r\n'新疆': [86.9236, 41.5883],\r\n'甘肃': [103.9901, 36.3043],\r\n'江苏': [120.2062, 32.9208],\r\n'广西': [108.479, 24.1152],\r\n'江西': [116.0046, 28.6633],\r\n'安徽': [117.29, 32.0581],\r\n'内蒙古': [111.4124, 41.4901],\r\n'黑龙江': [127.9688, 46.868],\r\n'天津': [117.4219, 39.4189],\r\n'山西': [112.3352, 37.9413],\r\n'广东': [114.5107, 23.8196],\r\n'四川': [103.9526, 30.7617],\r\n'西藏': [91.1865, 30.1465],\r\n'云南': [101.9199, 25.0663],\r\n'浙江': [119.5313, 29.8773],\r\n'湖北': [113.0896, 31.3628],\r\n'辽宁': [123.1238, 42.1216],\r\n'山东': [117.1582, 36.8701],\r\n'河北': [115.4995, 38.6006],\r\n'福建': [118.0543, 26.5222],\r\n'青海': [97.4038, 35.8207],\r\n'陕西': [109.1162, 34.2004],\r\n'贵州': [106.6992, 26.7682],\r\n'河南': [113.4668, 34.6234],\r\n'重庆': [107.7539, 30.1904],\r\n'宁夏': [106.3586, 38.1775],\r\n'吉林': [125.8154, 44.2584],\r\n'湖南': [111.8823, 28.2568],\r\n'海南': [109.8500, 19.7028],\r\n'北京': [116.4551, 40.4539],\r\n\r\n};\r\nvar mapData_pro =[\r\n    {name: \"新疆\", value: 200}, {name: \"西藏\",value: 30 }, \r\n         {name: \"宁夏\", value: 50}, {name: \"甘肃\",value: 30}, \r\n         {name: \"云南\", value: 30}, {name: \"陕西\",value: 30}, \r\n         {name: \"青海\", value: 30}, {name: \"贵州\",value: 30}, \r\n         {name: \"福建\", value: 220}, {name: \"江西\",value: 30}, \r\n         {name: \"四川\", value: 210}, {name: \"江苏\",value: 140}, \r\n         {name: \"安徽\", value: 30}, {name: \"浙江\",value: 333}, \r\n         {name: \"海南\", value: 500},  {name: \"天津\", value: 300}, {name: \"重庆\", value: 200}, \r\n         {name: \"广东\", value: 300}, {name: \"广西\", value: 10 }, \r\n         {name: \"湖南\", value: 200}, {name: \"湖北\", value: 300},\r\n         {name: \"河南\", value: 129}, {name: \"河北\", value: 390},\r\n         {name: \"山东\", value: 200}, {name: \"山西\",value: 60}, \r\n         {name: \"黑龙江\",value: 400}, {name: \"吉林\", value: 201}, \r\n         {name: \"辽宁\", value: 30}, {name: \"内蒙古\", value: 490 }\r\n]\r\nvar mapData_test =[\r\n    {name: \"北京\", value: 400,},{name: \"上海\", value: 350}]\r\nlet barWidth = 18;\r\n//地图数据全部\r\nvar mapData_All =mapData_pro.concat(mapData_test)\r\n/*柱子Y名称*/\r\nvar categoryData = [];\r\nvar barData = [];\r\nbarData.push([]);\r\ncategoryData.push([]);\r\nmapData_All.sort(function sortNumber(a,b){return a.value-b.value});\r\nfor (var j = 0; j < mapData_All.length ;j++) {\r\n        barData[0].push(mapData_All[j].value);\r\n        categoryData[0].push(mapData_All[j].name);\r\n}\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n        $('body').css({\r\n        'background': 'url(https://corgixuoos.oss-cn-shanghai.aliyuncs.com/soc/0623%E4%BF%AE%E6%94%B9%E5%A4%A7%E5%B1%8F-%E6%95%B4%E4%BD%93-Recovered.png) repeat-y', //'#2a6d87',\r\n        'position':'fixed',\r\n       'top': 0,\r\n       'left': 0,\r\n       'width':'100%',\r\n       'height':'100%',\r\n       'background-size': 'cover',\r\n     '-webkit-background-size': 'cover',\r\n     '-o-background-size': 'cover',\r\n     'background-position': 'center 0',\r\n        //'writing-mode': 'vertical-rl'\r\n    });\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        optionXyMap01 = {\r\n            timeline: {\r\n                show:false,\r\n                data: [\"2020-01\"],\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 5000,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '3%',\r\n                width: '80%',\r\n                //  height: null,\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#777',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {\r\n                    right: '2%',\r\n                    top: '10%',\r\n                    bottom: '10%',\r\n                    width: '18%'\r\n                },\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                        }\r\n                    }\r\n                },\r\n                visualMap: {\r\n                    seriesIndex: [1],\r\n                    show :true,\r\n                    min: 0,\r\n                    max: 300,\r\n                     calculable: true,\r\n                     colorLightness: [0.8, 100],\r\n                    // color: ['#c05050','#e5cf0d','#5ab1ef'],\r\n                     dimension:0,\r\n                },\r\n                legend: {\r\n                show: true,\r\n                bottom: '15%',\r\n                left: '12%',\r\n                orient: 'vertical',\r\n                padding: 20,\r\n                // backgroundColor: 'rgba(236,246,255,0.30)',\r\n                borderWidth: 1,\r\n                // borderColor: '#e9f3fb',\r\n                itemGap: 0,\r\n                itemWidth: 20,\r\n                itemHeight: 20,\r\n                symbolKeepAspect: false,\r\n                inactiveColor: '#999999',\r\n                textStyle: {\r\n                    fontSize: 16,\r\n                },\r\n                data: [{\r\n                    name: '生产测试省份',\r\n                    icon: 'pin'\r\n                }, {\r\n                    name: '生产冒烟省份',\r\n                    icon: 'pin'\r\n                }],\r\n            },\r\n                geo: {\r\n                    roam: false, //是否允许缩放\r\n                    show: true,\r\n                    map: 'china',\r\n                    zoom: 1,\r\n                    center: [113.83531246, 34.0267395887],\r\n                },\r\n                \r\n            },\r\n            backgroundColor: '#cbcdd6',\r\n            color:['green','#F8B44F'],\r\n            options: []\r\n\r\n        };\r\n            var statistic_name = \"各省测试进度排名\";\r\n            var titleName =\"YYYYMMDD版本生产测试进度看板\";\r\n            optionXyMap01.options.push({\r\n                title: [{\r\n                         text:titleName,\r\n                         //subtext: '   ',\r\n                        //  left: '25%',\r\n                        //  top: '1%',\r\n                         textStyle: {\r\n                             color: '#000000',\r\n                            fontSize: 25\r\n                         }\r\n                    },\r\n                    {\r\n                        id: 'statistic',\r\n                        text: statistic_name,\r\n                        left: '75%',\r\n                        top: '3%',\r\n                        textStyle: {\r\n                            color: '#000000',\r\n                            fontSize: 16\r\n                        }\r\n                    }\r\n                ],\r\n                xAxis: {\r\n                    type: 'value',\r\n                    scale: true,\r\n                    position: 'top',\r\n                    min: 0,\r\n                    boundaryGap: false,\r\n                    splitLine: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        show: false\r\n                    },\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLabel: {\r\n                        margin: 1,\r\n                        textStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'category',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#000000'\r\n                        }\r\n                    },\r\n                    data: categoryData[0]\r\n                },\r\n                series: [\r\n                    //未知作用\r\n                    {\r\n                        //文字和标志\r\n                        name: 'light',\r\n                        type: 'scatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData_All),\r\n                        symbolSize: function(val) {\r\n                            return 6;\r\n                        },\r\n                        label: {\r\n                            normal: {\r\n                                \r\n                                 show: true,\r\n                                 position: \"bottom\", //显示位置\r\n                                 offset: [0, 0], //偏移设置\r\n                                 color: \"#000000\",\r\n                                 formatter: \"{b}\", //圆环显示文字\r\n                                 fontWeight: \"bold\",\r\n                                 fontSize: 11\r\n                            },\r\n                             emphasis: {\r\n                                 show: false\r\n                             },\r\n                        },\r\n                        itemStyle: {\r\n                             color :'transparent',\r\n                        }\r\n                    },\r\n                    //地图\r\n                    {\r\n                        type: 'map',\r\n                        map: 'china',\r\n                        geoIndex: 0,\r\n                        data: mapData_All\r\n                    },\r\n                    //各省测试进度柱状图\r\n                    {\r\n                        zlevel: 1,\r\n                        type: 'bar',\r\n                        barWidth,\r\n                        barMaxWidth: 10,\r\n                        symbol: 'none',\r\n                         itemStyle: {\r\n                            normal: {\r\n                                \tlabel: {\r\n\t\t\t\t\t\t\t\t\tshow: true, //开启显示\r\n\t\t\t\t\t\t\t\t\tposition: 'inside', //在上方显示\r\n\t\t\t\t\t\t\t\t\ttextStyle: { //数值样式\r\n\t\t\t\t\t\t\t\t\t\tfontSize: 10\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n                            }\r\n                        },\r\n                        barBorderRadius: [0, 30, 30, 0],//柱状角成椭圆形\r\n                        data:barData[0],\r\n\r\n                    },\r\n                    //分隔\r\n                    // { \r\n                    //     type: 'pictorialBar',\r\n                    //     itemStyle: {\r\n                    //         color: '#000'\r\n                    //     },\r\n                    //     symbolRepeat: 'fixed',\r\n                    //     symbolMargin: 4,\r\n                    //     symbol: 'roundRect',\r\n                    //     symbolClip: true,\r\n                    //     symbolSize: [2, 18],\r\n                    //     symbolPosition: 'start',\r\n                    //     symbolOffset: [0, 0],\r\n                    //     data: list,\r\n                    //     z: 2,\r\n                    //     animationEasing: 'elasticOut'\r\n                    // },\r\n                    //生产测试省份\r\n                    {\r\n        name: '生产冒烟省份',\r\n        type: 'scatter',\r\n        coordinateSystem: 'geo',\r\n        data: convertData(mapData_test),\r\n        symbol: 'pin',\r\n        symbolSize: function(val) {\r\n            return val[1];\r\n        },\r\n        symbolOffset: [10, 10],\r\n        label: {\r\n            show:true,\r\n            position: 'inside',\r\n            // color:'#333',\r\n            formatter: function(params) {\r\n                return params.value[2];\r\n            },\r\n        }},\r\n                    //生产冒烟省分\r\n                    {\r\n        name: '生产测试省份',\r\n        type: 'scatter',\r\n        coordinateSystem: 'geo',\r\n        data: convertData(mapData_pro),\r\n        symbol: 'pin',\r\n        symbolSize: function(val) {\r\n            return val[1];\r\n        },\r\n        symbolOffset: [10,10],\r\n        label: {\r\n            show:true,\r\n            position: 'inside',\r\n            // color:'#333',\r\n            formatter: function(params) {\r\n                return params.value[2];\r\n            },\r\n        }\r\n    },\r\n                ]\r\n            });\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n\r\n\r\n\r\n","html":"","externalScripts":"","updaterUID":"bd-3225273598","theme":"","layout":"","viewCount":0,"userName":"冷***_","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xFNPVqgDlA.png?v=1627454372067","isCustomThumbnail":0,"builtinTags":["calendar","category-work","legend","series-pie","series-scatter"],"customTags":[],"updaterUserName":"冷***_"}}