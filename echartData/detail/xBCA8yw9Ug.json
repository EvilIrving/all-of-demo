{"status":0,"data":{"cid":"xBCA8yw9Ug","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"测试测试","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-24T03:59:57.000Z","lastUpdateTime":"2020-11-24T03:59:57.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-24T03:59:57.000Z","code":"var name1 = '广西医科大学'\r\nvar name2 = '其他大学'\r\n\r\nvar data1 = [{\r\n        name: '学院',\r\n        value: 3079\r\n    },\r\n    {\r\n        name: '专业',\r\n        value: 100079\r\n    }, {\r\n        name: '附属医院',\r\n        value: 1879\r\n    }, {\r\n        name: 'ESI前1%学科',\r\n        value: 50000000079\r\n    }, {\r\n        name: '国家重点学科',\r\n        value: 79\r\n    }, {\r\n        name: '广西一流学科',\r\n        value: 8879\r\n    },\r\n    {\r\n        name: '第四轮评估A/B/C',\r\n        value: 6079\r\n    },\r\n    {\r\n        name: '总在校人数',\r\n        value: 400079\r\n    },\r\n    {\r\n        name: '本科生',\r\n        value: 300079\r\n    },\r\n    {\r\n        name: '硕士研究生',\r\n        value: 12079\r\n    },\r\n    {\r\n        name: '博士生',\r\n        value: 5079\r\n    },\r\n    {\r\n        name: '留学生',\r\n        value: 20079\r\n    }, {\r\n        name: '高职生',\r\n        value: 20079\r\n    },\r\n    {\r\n        name: '教工',\r\n        value: 30079\r\n    },\r\n    {\r\n        name: '专任教师',\r\n        value: 10079\r\n    },\r\n    {\r\n        name: '高层次人才',\r\n        value: 1579\r\n    }, {\r\n        name: '国家实验室含重点',\r\n        value: 3079\r\n\r\n    }, {\r\n        name: '国家重大科研项目',\r\n        value: 2079\r\n\r\n    }, {\r\n        name: '生师比',\r\n        value: 15079\r\n    }\r\n\r\n];\r\n\r\n\r\n\r\nvar data2 = [{\r\n        name: '学院',\r\n        value: 4000\r\n\r\n    }, {\r\n        name: '专业',\r\n        value: 12000\r\n\r\n    }, {\r\n        name: '附属医院',\r\n        value: 3000\r\n\r\n    }, {\r\n        name: 'ESI前1%学科',\r\n        value: 3500\r\n\r\n    }, {\r\n        name: '国家重点学科',\r\n        value: 5000\r\n\r\n    }, {\r\n        name: '广西一流学科',\r\n        value: 7000\r\n\r\n    }, {\r\n        name: '第四轮评估A/B/C',\r\n        value: 5000\r\n\r\n    }, {\r\n        name: '总在校人数',\r\n        value: 450000\r\n\r\n    }, {\r\n        name: '本科生',\r\n        value: 350000\r\n\r\n    }, {\r\n        name: '硕士研究生',\r\n        value: 10000\r\n\r\n    }, {\r\n        name: '博士生',\r\n        value: 2000\r\n\r\n    }, {\r\n        name: '留学生',\r\n        value: 40000\r\n\r\n    }, {\r\n        name: '高职生',\r\n        value: 10000\r\n\r\n    }, {\r\n        name: '教工',\r\n        value: 80\r\n\r\n    }, {\r\n        name: '专任教师',\r\n        value: 40000\r\n\r\n    }, {\r\n        name: '高层次人才',\r\n        value: 10000000\r\n\r\n    }, {\r\n        name: '国家实验室含重点',\r\n        value: 5000\r\n\r\n    }, {\r\n        name: '国家重大科研项目',\r\n        value: 50000\r\n\r\n    }, {\r\n        name: '生师比',\r\n        value: 20000\r\n\r\n    }\r\n\r\n];\r\n\r\nlet data1New = []\r\nlet data2New = []\r\nlet largeColorRight = {\r\n    type: 'linear',\r\n    x: 1,\r\n\r\n    y: 0,\r\n\r\n    x2: 0,\r\n\r\n    y2: 0,\r\n\r\n    colorStops: [{\r\n\r\n        offset: 0,\r\n\r\n        color: 'rgba(0, 204, 255, 1)'\r\n\r\n    }, {\r\n\r\n        offset: 1,\r\n\r\n        color: 'rgba(101, 105, 255, 1)'\r\n\r\n    }]\r\n\r\n}\r\n\r\nlet largeColorLeft = {\r\n\r\n    type: 'linear',\r\n\r\n    x: 0,\r\n\r\n    y: 0,\r\n\r\n    x2: 1,\r\n\r\n    y2: 0,\r\n\r\n    colorStops: [{\r\n\r\n        offset: 0,\r\n\r\n        color: 'rgba(0, 204, 255, 1)'\r\n\r\n    }, {\r\n\r\n        offset: 1,\r\n\r\n        color: 'rgba(101, 105, 255, 1)'\r\n\r\n    }]\r\n\r\n}\r\n\r\nlet normalColor = {\r\n\r\n    type: 'linear',\r\n\r\n    x: 0,\r\n\r\n    y: 0,\r\n\r\n    x2: 0,\r\n\r\n    y2: 1,\r\n\r\n    colorStops: [{\r\n\r\n        offset: 0,\r\n\r\n        color: 'rgba(0, 204, 255, 0.3)'\r\n\r\n    }, {\r\n\r\n        offset: 1,\r\n\r\n        color: 'rgba(101, 105, 255, 0.3)'\r\n\r\n    }]\r\n\r\n}\r\n\r\n\r\n\r\ndata1.map((item, index) => {\r\n\r\n    let isLarge = data1[index].value > data2[index].value\r\n\r\n    data1New.push({\r\n        name: data1[index].name,\r\n        value: data1[index].value,\r\n\r\n        itemStyle: {\r\n\r\n            normal: {\r\n\r\n                color: isLarge ? largeColorRight : normalColor\r\n\r\n            }\r\n\r\n        }\r\n\r\n    })\r\n\r\n    data2New.push({\r\n        name: data2[index].name,\r\n        value: data2[index].value,\r\n\r\n        itemStyle: {\r\n\r\n            normal: {\r\n\r\n                color: isLarge ? normalColor : largeColorLeft\r\n\r\n            }\r\n\r\n        }\r\n\r\n    })\r\n\r\n})\r\n\r\ngetArrByKey = (data, k) => {\r\n\r\n    let key = k || \"value\";\r\n\r\n    let res = [];\r\n\r\n    if (data) {\r\n\r\n        data.forEach(function(t) {\r\n\r\n            res.push(t[key]);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    return res;\r\n\r\n};\r\n\r\noption = {\r\n    backgroundColor: '#fff',\r\n    grid: [{\r\n            show: true,\r\n            left: '2%',\r\n            top: '0%',\r\n            bottom: '8%',\r\n            width: '39%',\r\n        },\r\n        {\r\n            show: true,\r\n            left: '50%',\r\n            top: '0%',\r\n            bottom: '8%',\r\n            width: '0%',\r\n        }, {\r\n            show: true,\r\n            right: '2%',\r\n            top: '0%',\r\n            bottom: '8%',\r\n            width: '40%',\r\n        }\r\n    ],\r\n    tooltip: {\r\n        show: true,\r\n        formatter: function(params) {\r\n            return params.seriesName + '<br>' + params.name + '：' + params.value.toFixed(2) / 100\r\n        }\r\n    },\r\n    xAxis: [{\r\n            type: 'log',\r\n            inverse: true,\r\n            axisLine: {\r\n                show: true\r\n            },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                formatter: function(value) {\r\n                    return value / 100;\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: true\r\n            }\r\n        },\r\n\r\n        {\r\n            gridIndex: 1,\r\n            show: true,\r\n        },\r\n        {\r\n            gridIndex: 2,\r\n            show: true,\r\n            type: 'log',\r\n            inverse: false,\r\n            axisLine: {\r\n                show: true\r\n            },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                formatter: function(value) {\r\n                    return value / 100;\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: true\r\n            }\r\n        }\r\n    ],\r\n    yAxis: [{\r\n            gridIndex: 0,\r\n            triggerEvent: true,\r\n            show: true,\r\n            inverse: true,\r\n            data: data1,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            gridIndex: 1,\r\n            type: 'category',\r\n            inverse: true,\r\n            position: 'center',\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: true,\r\n                interval: 0,\r\n                align: 'auto',\r\n                verticalAlign: 'middle',\r\n                textStyle: {\r\n                    color: 'rgba(195, 240, 255, 1)',\r\n                    fontSize: 16,\r\n                    align: 'center',\r\n                },\r\n                // 坐标轴刻度标签换行处理\r\n                formatter: function(params) {\r\n                    var newParamsName = '' // 最终拼接成的字符串\r\n                    var paramsNameNumber = params.length // 实际标签的个数\r\n                    var provideNumber = 16 // 每行能显示的字的个数\r\n                    var rowNumber = Math.ceil(paramsNameNumber / provideNumber) // 换行的话，需要显示几行，向上取整\r\n                    if (paramsNameNumber > provideNumber) {\r\n                        /** 循环每一行,p表示行 */\r\n                        for (var p = 0; p < rowNumber; p++) {\r\n                            var tempStr = '' // 表示每一次截取的字符串\r\n                            var start = p * provideNumber // 开始截取的位置\r\n                            var end = start + provideNumber // 结束截取的位置\r\n                            // 此处特殊处理最后一行的索引值\r\n                            if (p === rowNumber - 1) {\r\n                                // 最后一次不换行\r\n                                tempStr = params.substring(start, paramsNameNumber)\r\n                            } else {\r\n                                // 每一次拼接字符串并换行\r\n                                tempStr = params.substring(start, end) + '\\n'\r\n                            }\r\n                            newParamsName += tempStr // 最终拼成的字符串\r\n                        }\r\n                    } else {\r\n                        //将旧标签的值赋给新标签\r\n                        newParamsName = params\r\n                    }\r\n                    return newParamsName\r\n                }\r\n\r\n            },\r\n            data: getArrByKey(data1, 'name'),\r\n        },\r\n        {\r\n            gridIndex: 2,\r\n            triggerEvent: true,\r\n            show: true,\r\n            inverse: true,\r\n            data: data1,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            }\r\n        }\r\n    ],\r\n\r\n    series: [{\r\n            name: name1,\r\n            type: 'bar',\r\n            gridIndex: 0,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                barBorderRadius: 4,\r\n            },\r\n            xAxisIndex: 0,\r\n            yAxisIndex: 0,\r\n            data: data1New,\r\n            barWidth: 20,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: 'rgba(59, 126, 170, 1)',\r\n                    barBorderRadius: 4\r\n                },\r\n            },\r\n            label: {\r\n                show: false,\r\n            }\r\n\r\n        },\r\n\r\n        {\r\n            name: name2,\r\n            type: 'bar',\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            gridIndex: 2,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n\r\n                barBorderRadius: 4,\r\n\r\n            },\r\n            data: data2New,\r\n            barWidth: 20,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: 'rgba(59, 126, 170, 1)',\r\n                    barBorderRadius: 4\r\n\r\n                },\r\n            },\r\n            label: {\r\n                show: false\r\n            }\r\n\r\n        }\r\n    ]\r\n\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":72,"userName":"衰***命","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBCA8yw9Ug.png?v=1606190397959","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"衰***命"}}