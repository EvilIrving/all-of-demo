{"status":0,"data":{"cid":"xkyNkqkk9p","authorUid":"bd-289164046","authorUserName":"c***8","title":"排名","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-06-24T06:18:46.000Z","lastUpdateTime":"2021-06-24T06:18:46.000Z","auth":2,"uid":"bd-289164046","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2021-06-25T05:19:14.000Z","code":"//参考：https://www.makeapie.com/editor.html?c=xqjNqqjc_U\nvar datas = [\n    { ranking: 1, station: '车站1', value: 131744 },\n    { ranking: 2, station: '车站2', value: 104970 },\n    { ranking: 3, station: '车站3', value: 29034 },\n    { ranking: 4, station: '车站4', value: 23489 },\n    { ranking: 5, station: '车站5', value: 18203 }\n];\nvar seriesName = '出站量';\n\nfunction contains(arr, dst) {\n    var i = arr.length;\n    while ((i -= 1)) {\n        if (arr[i] == dst) {\n            return i;\n        }\n    }\n    return false;\n}\nvar attackSourcesColor = [\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#EB3B5A' },\n        { offset: 1, color: '#FE9C5A' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#FA8231' },\n        { offset: 1, color: '#FFD14C' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#F7B731' },\n        { offset: 1, color: '#FFEE96' },\n    ]),\n    new echarts.graphic.LinearGradient(0, 1, 1, 1, [\n        { offset: 0, color: '#395CFE' },\n        { offset: 1, color: '#2EC7CF' },\n    ]),\n];\nvar attackSourcesColor1 = [\n    '#EB3B5A',\n    '#FA8231',\n    '#F7B731',\n    '#3860FC',\n    '#1089E7',\n    '#F57474',\n    '#56D0E3',\n    '#1089E7',\n    '#F57474',\n    '#1089E7',\n    '#F57474',\n    '#F57474',\n];\nvar rankings = [];\nvar stationData = [];\nvar values = [];\n\ndatas.forEach(function (it, index) {\n    rankings.push(it.ranking);\n    stationData.push(it.station);\n    values.push(it.value);\n});\n\nfunction dataFormat(data) {\n    var arr = [];\n    data.forEach(function (item, i) {\n        let itemStyle = {\n            color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i],\n        };\n        arr.push({\n            value: item,\n            itemStyle: itemStyle,\n        });\n    });\n    return arr;\n}\n\noption = {\n    backgroundColor: '#000',\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow',\n        },\n    },\n    legend: {\n        textStyle: {\n            //图例文字的样式\n            fontSize: 10,\n            color: '#fff',\n        },\n        data: [seriesName],\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true,\n    },\n    xAxis: {\n        type: 'value',\n        splitLine: {\n            show: false,\n        },\n        axisLabel: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false,\n        },\n    },\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            data: stationData,\n            axisLabel: {\n                margin: 30,\n                fontSize: 10,\n                align: 'left',\n                padding: [2, 0, 0, 0],\n                color: '#000',\n                rich: {\n                    nt1: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[0],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        lineHeight: '5',\n                        padding: [0, 1, 2, 1],\n                        // padding:[0,0,2,0],\n                    },\n                    nt2: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[1],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                    },\n                    nt3: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[2],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                    },\n                    nt: {\n                        color: '#fff',\n                        backgroundColor: attackSourcesColor1[3],\n                        width: 13,\n                        height: 13,\n                        fontSize: 10,\n                        align: 'center',\n                        lineHeight: 3,\n                        borderRadius: 100,\n                        padding: [0, 1, 2, 1],\n                        lineHeight: 5,\n                    },\n                },\n                formatter: function (value, index) {\n                    index = contains(stationData, value) + 1;\n                    if (index - 1 < 3) {\n                        return ['{nt' + index + '|' + index + '}'].join('\\n');\n                    } else {\n                        return ['{nt|' + index + '}'].join('\\n');\n                    }\n                },\n            },\n        },\n        {\n            type: 'category',\n            inverse: true,\n            offset: -10,\n            position: 'left',\n            axisTick: 'none',\n            axisLine: 'none',\n            show: true,\n            axisLabel: {\n                interval: 0,\n                color: ['#fff'],\n                align: 'left',\n                verticalAlign: 'bottom',\n                lineHeight: 32,\n                fontSize: 10,\n            },\n            data: dataFormat(stationData),\n        },\n    ],\n    series: [\n        {\n            zlevel: 1,\n            name: seriesName,\n            type: 'bar',\n            barWidth: 15,\n            data: dataFormat(values),\n            align: 'center',\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 10,\n                },\n            },\n            label: {\n                show: true,\n                fontSize: 10,\n                color: '#fff',\n                textBorderWidth: 2,\n                padding: [2, 0, 0, 0],\n            },\n        },\n        {\n            name: seriesName,\n            type: 'bar',\n            barWidth: 15,\n            barGap: '-100%',\n            data: [200000, 200000, 200000, 200000, 200000, 200000],\n            itemStyle: {\n                normal: {\n                    color: '#05325F',\n                    //width:\"100%\",\n                    fontSize: 10,\n                    barBorderRadius: 30,\n                },\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-289164046","theme":"","layout":"","viewCount":0,"userName":"c***8","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xkyNkqkk9p.png?v=1624598354119","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"c***8"}}