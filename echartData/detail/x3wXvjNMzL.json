{"status":0,"data":{"cid":"x3wXvjNMzL","authorUid":"obd-oFx66cI7fBZ8DeVhgELO6zqq4se6p5w","authorUserName":"z***d","title":"成员试试动态总览\n(每10分钟累计发生次数)","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-10T08:23:50.000Z","lastUpdateTime":"2020-12-10T08:23:50.000Z","auth":2,"uid":"obd-oFx66cI7fBZ8DeVhgELO6zqq4se6p5w","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-10T09:17:48.000Z","code":"let color = [\"#83a1c5\", \"#45d7ff\", \"#286eff\", \"#0130fd\", \"#b98c3e\", \"#ec5a26\"];\nlet legend = [\n    ['{w|睡意}', '{w|视觉疲劳}', '{w|脑力疲劳}'],\n    ['{w|思维活动}', '{w|情绪波动}', '{w|脑力负荷}']\n];\nlet data = {\n    people: ['艇员1', '艇员2', '艇员3', '艇员4', '艇员5', '艇员6', ],\n    sleep: ['1', '4', '7', '10', '13', '16'],\n    visual: ['4', '7', '10', '13', '16', '19'],\n    mental: ['7', '10', '13', '16', '19', '22'],\n    thought: ['10', '13', '16', '19', '22', '25'],\n    mood: ['13', '16', '19', '22', '25', '28'],\n    mentalLoad: ['16', '19', '22', '25', '28', '31']\n};\nlet max = 0;\nfunction getMax() {\n    let sleep = Math.max(...data.sleep);\n    let visual = Math.max(...data.visual);\n    let mental = Math.max(...data.mental);\n    let thought = Math.max(...data.thought);\n    let mood = Math.max(...data.mood);\n    let mentalLoad = Math.max(...data.mentalLoad);\n    let max = sleep > visual ? sleep :\n        visual > mental ? visual :\n        mental > thought ? mental :\n        thought > mood ? thought :\n        mood > mentalLoad ? mood : mentalLoad;\n    max = Math.floor(max * 1.2);\n    return max;\n}\nmax = getMax();\nfunction getBg() {\n    let bg = [];\n    for (let i = 0; i < data.sleep.length; i++) {\n        bg.push(Math.floor(max * 1.2));\n    }\n    return bg;\n}\n\noption = {\n    backgroundColor: '#031930',\n    title: {\n        text: '成员试试动态总览\\n(每10分钟累计发生次数)',\n        textStyle: {\n            color: '#82a1c4',\n            lineHeight: 28\n        },\n        textAlign: 'center',\n        left: '50%',\n        top: 40,\n    },\n    legend: [{\n        data: legend[0],\n        orient: 'horizontal',\n        itemWidth: 10,\n        itemHeight: 10,\n        textStyle: {\n            color: '#82a1c4',\n            rich: {\n                w: {\n                    width: 48\n                }\n            }\n        },\n        top: '6%',\n        left: '70%',\n        selectedMode: false\n    }, {\n        data: legend[1],\n        orient: 'horizontal',\n        itemWidth: 10,\n        itemHeight: 10,\n        textStyle: {\n            color: '#82a1c4',\n            rich: {\n                w: {\n                    width: 48\n                }\n            }\n        },\n        top: '8%',\n        left: '70%',\n        selectedMode: false\n    }],\n    grid: {\n        top: '14%'\n    },\n    xAxis: [{\n        type: 'category',\n        axisLine: {\n            show: true,\n            lineStyle: {\n                color: '#015092'\n            }\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: true,\n            color: '#82a1c4'\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#015092',\n                opacity: 0.6,\n                type: 'dotted'\n            }\n        },\n        // 刻度内容\n        data: data.people\n    }, { //柱状背景\n        show: false,\n        type: 'category',\n        data: data.people\n    }],\n    yAxis: {\n        type: 'value',\n        axisLine: {\n            lineStyle: {\n                show: true,\n                color: '#015092',\n            }\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: true,\n            color: '#82a1c4',\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#015092',\n                opacity: 1,\n                type: 'dotted'\n            }\n        },\n        max: 40 > max ? 40 : max\n    },\n    series: [{\n        name: legend[0][0],\n        type: 'bar',\n        data: data.sleep,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        name: legend[0][1],\n        type: 'bar',\n        data: data.visual,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        name: legend[0][2],\n        type: 'bar',\n        data: data.mental,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        name: legend[1][0],\n        type: 'bar',\n        data: data.thought,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        name: legend[1][1],\n        type: 'bar',\n        data: data.mood,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        name: legend[1][2],\n        type: 'bar',\n        data: data.mentalLoad,\n        itemStyle: {\n            barBorderRadius: [20, 20, 0, 0]\n        },\n        barWidth: 12,\n        silent: true,\n        xAxisIndex: 0\n    }, {\n        // 背景\n        type: 'bar',\n        data: getBg(),\n        itemStyle: {\n            color: '#03203d'\n        },\n        barWidth: 120,\n        zlevel: -1,\n        silent: true,\n        xAxisIndex: 1\n    }],\n    color: color\n};\n\n\n// 模拟数据\nfunction vdata() {\n    for (let i = 0; i < data.people.length; i++) {\n        data.sleep[i] = Math.floor(Math.random() * 40 + 1);\n        data.visual[i] = Math.floor(Math.random() * 40 + 1);\n        data.mental[i] = Math.floor(Math.random() * 40 + 1);\n        data.thought[i] = Math.floor(Math.random() * 40 + 1);\n        data.mood[i] = Math.floor(Math.random() * 40 + 1);\n        data.mentalLoad[i] = Math.floor(Math.random() * 40 + 1);\n    }\n    option.series[0].data = data.sleep;\n    option.series[1].data = data.visual;\n    option.series[2].data = data.mental;\n    option.series[3].data = data.thought;\n    option.series[4].data = data.mood;\n    option.series[5].data = data.mentalLoad;\n    max = getMax();\n    option.yAxis.max = 40 > max ? 40 : max;\n    option.series[6].data = getBg();\n    myChart.setOption(option, true);\n}\n\nsetInterval(function() {\n    vdata();\n}, 2000);","html":"","externalScripts":"","updaterUID":"obd-oFx66cI7fBZ8DeVhgELO6zqq4se6p5w","theme":"","layout":"","viewCount":129,"userName":"z***d","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3wXvjNMzL.png?v=1607588630749","isCustomThumbnail":1,"builtinTags":["category-work","grid","legend","series-bar","title"],"customTags":[],"updaterUserName":"z***d"}}