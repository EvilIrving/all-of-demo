{"status":0,"data":{"cid":"xO-8fgut9F","authorUid":"bd-1839720448","authorUserName":"哆***嗦","title":"自动轮播动态数据饼图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-04-13T11:47:04.000Z","lastUpdateTime":"2020-04-13T11:47:04.000Z","auth":2,"uid":"bd-1839720448","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":2,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-14T06:06:53.000Z","code":" var arr=[{\r\n                 name: '火灾',\r\n                 value: 34\r\n             },\r\n             {\r\n                 name: '电气',\r\n                 value: 89\r\n             },\r\n             {\r\n                 name: '可燃气体',\r\n                 value: 57\r\n             },\r\n             {\r\n                 name: '消防电源',\r\n                 value: 100\r\n             }\r\n         ];\r\n         \r\n option = {\r\n     \r\n     color: ['#FFA620', '#FD4144', '#24FEB4', '#2DB8FB', '#9E43DE', '#FFF049', '#FC6060'],\r\n     legend: {\r\n         show: true, // 是否显示图列\r\n         left: 'center',\r\n         top: 'bottom',\r\n         textStyle: {\r\n             color: '#fff',\r\n             fontSize: 20\r\n         },\r\n         data: ['火灾', '电气', '可燃气体', '消防电源']\r\n     },\r\n     series: [{\r\n         name: '访问来源',\r\n         type: 'pie',\r\n         center: ['50%', '50%'],\r\n         radius: ['50%', '75%'],\r\n         avoidLabelOverlap: false,\r\n         hoverOffset: 24, // 高亮扇区的偏移距离。\r\n         label: {\r\n             show: false,\r\n             position: 'center'\r\n         },\r\n         emphasis: {\r\n             label: {\r\n                 show: true,\r\n                 color: '#fff',\r\n                 fontSize: 36,\r\n                 formatter: `{b}\\n\\n{d}%`\r\n             }\r\n         },\r\n         labelLine: {\r\n             show: true\r\n         },\r\n         data: arr\r\n     }]\r\n }\r\n\r\n var currentIndex = -1\r\n console.log(option)\r\n//  let myChart = echarts.getInstanceByDom(document.getElementById(\"chart-panel\"))\r\n var dataLen = option.series[0].data.length\r\nvar timer=0;\r\n setInterval(() => {\r\n    \r\n     console.log(123)\r\n     //  计时器增加\r\n     timer++;\r\n    if (timer==5) {\r\n        for(let index in arr){\r\n        arr[index].value=(Math.random()*50+100).toFixed(0);\r\n        }\r\n        myChart.setOption({\r\n            series: [{\r\n                data: arr\r\n            }]\r\n        })\r\n        timer=1;\r\n    }\r\n     // 取消之前高亮的图形\r\n     myChart.dispatchAction({\r\n         type: 'downplay',\r\n         seriesIndex: 0,\r\n         dataIndex: currentIndex\r\n     })\r\n     currentIndex = (currentIndex + 1) % dataLen\r\n     // 高亮当前图形\r\n     myChart.dispatchAction({\r\n         type: 'highlight',\r\n         seriesIndex: 0,\r\n         dataIndex: currentIndex\r\n     })\r\n     // 显示 tooltip\r\n     myChart.dispatchAction({\r\n         type: 'showTip',\r\n         seriesIndex: 0,\r\n         dataIndex: currentIndex\r\n     })\r\n    \r\n }, 1000)","html":"","externalScripts":"","updaterUID":"bd-1839720448","theme":"","layout":"","viewCount":1982,"userName":"哆***嗦","commentCount":1,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xO-8fgut9F.png?v=1586844413376","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie"],"customTags":["动态","轮播","饼图"],"updaterUserName":"哆***嗦"}}