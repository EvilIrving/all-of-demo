{"status":0,"data":{"cid":"xVL4GbCSDQ","authorUid":"bd-1895925720","authorUserName":"心***阔","title":"四川省-常住人口","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2019-01-08T13:22:53.000Z","lastUpdateTime":"2019-01-08T13:22:53.000Z","auth":1,"uid":"bd-1895925720","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-28T03:27:37.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1572199013532-gAXEhSWz.json\";\n\n\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\n//var uploadedDataURL = \"/asset/get/s/data-1482909892121-BJ3auk-Se.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('jiangxi', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '成都市':[104.0815300000,30.6558230000],\n        '绵阳市':[104.6855600000,31.4736630000],\n        '自贡市':[104.7844450000,29.3455850000],\n         '攀枝花市':[101.7255440000,26.5880340000],\n         '泸州市':[105.4485260000,28.8776680000],\n       '德阳市':[104.4044170000,31.1331160000],\n        '广元市':[105.8504190000,32.4416170000],\n        '遂宁市':[105.5994240000,30.5390970000],\n       '内江市':[105.0645910000,29.5858860000],\n         '乐山市':[103.7725400000,29.5579400000],\n        '资阳市':[104.6344370000,30.1349560000],\n         '宜宾市':[104.6494030000,28.7580070000],\n         '南充市':[106.1175040000,30.8437830000],\n         '达州市':[107.4745920000,31.2143070000],\n         '雅安市':[103.0495390000,30.0167920000],\n         '阿坝藏族羌族自治州':[102.2311860000,31.9056090000],\n         '甘孜藏族自治州':[101.9685450000,30.0552780000],\n         '凉山彝族自治州':[102.2735020000,27.8877520000],\n         '广安市':[106.6395540000,30.4617470000],\n         '巴中市':[106.7515820000,31.8728890000],\n         '眉山市':[103.8565670000,30.0825270000],\n    }\n    var data = [\n        {name: '成都市', value: 390},\n        {name: '绵阳市', value: 158},\n        {name: '自贡市', value: 252},\n        {name: '攀枝花市', value: 99},\n        {name: '泸州市', value: 189},\n        {name: '德阳市', value: 52},\n        {name: '广元市', value: 158},\n        {name: '遂宁市', value: 152},\n        {name: '内江市', value: 189},\n        {name: '乐山市', value: 160},\n        {name: '资阳市', value: 80},\n        {name: '宜宾市', value: 180},\n        {name: '南充市', value: 190},\n        {name: '达州市', value: 290},\n        {name: '阿坝藏族羌族自治州', value: 190},\n        {name: '甘孜藏族自治州', value: 190},\n        {name: '凉山彝族自治州', value: 290},\n        {name: '广安市', value: 290},\n        {name: '巴中市', value: 290},\n        {name: '眉山市', value: 290},\n    ];\n    var max = 480, min = 9; // todo \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\n\n    option = {\n        backgroundColor: '#fff',\n        title: {\n            top:20,\n            text: '四川省',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n        tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n     /*   legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n             data:['pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },*/\n            legend: {\n        orient: 'vertical',\n        y: 'bottom',\n        x:'right',\n        data:['pm2.5'],\n        textStyle: {\n            color: '#fff'\n        }\n    }, \n        // visualMap: {\n        //     show: false,\n        //     min: 0,\n        //     max: 500,\n        //     left: 'left',\n        //     top: 'bottom',\n        //     text: ['高', '低'], // 文本，默认为数值文本\n        //     calculable: true,\n        //     seriesIndex: [1],\n        //     inRange: {\n        //         // color: ['#3B5077', '#031525'] // 蓝黑\n        //         // color: ['#ffc0cb', '#800080'] // 红紫\n        //         // color: ['#3C3B3F', '#605C3C'] // 黑绿\n        //         //color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n        //          //color: ['#23074d', '#cc5333'] // 紫红\n        //         // color: ['#00467F', '#A5CC82'] // 蓝绿\n        //         // color: ['#1488CC', '#2B32B2'] // 浅蓝\n        //         // color: ['#00467F', '#A5CC82'] // 蓝绿\n        //         // color: ['#00467F', '#A5CC82'] // 蓝绿\n        //         // color: ['#00467F', '#A5CC82'] // 蓝绿\n        //         // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n        //     }\n        // },\n        // toolbox: {\n        //     show: true,\n        //     orient: 'vertical',\n        //     left: 'right',\n        //     top: 'center',\n        //     feature: {\n        //             dataView: {readOnly: false},\n        //             restore: {},\n        //             saveAsImage: {}\n        //             }\n        // },\n        geo: {\n            show: true,\n            map: 'jiangxi',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: false,\n            itemStyle: {\n                normal: {\n                    areaColor: 'transparent',\n                    borderColor: '#000',\n                    borderWidth: 2,\n                    // shadowColor: 'rgba(63, 218, 255, 0.5)',\n                    // shadowBlur: 30\n                },\n                emphasis: {\n                    areaColor: '#2B91B7',\n                }\n            }\n        },\n        series : [\n      {\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            // data: convertData(data),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: false\n                },\n                emphasis: {\n                    show: false\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F4E925'\n                }\n            }\n        },\n        //  {\n        //     type: 'map',\n        //     map: 'jiangxi',\n        //     geoIndex: 0,\n        //     aspectScale: 0.75, //长宽比\n        //     showLegendSymbol: false, // 存在legend时显示\n        //     label: {\n        //         normal: {\n        //             show: false\n        //         },\n        //         emphasis: {\n        //             show: false,\n        //             textStyle: {\n        //                 color: '#fff'\n        //             }\n        //         }\n        //     },\n        //     roam: true,\n        //     itemStyle: {\n        //         normal: {\n        //             areaColor: '#031525',\n        //             borderColor: '#FFFFFF',\n        //         },\n        //         emphasis: {\n        //             areaColor: '#2B91B7'\n        //         }\n        //     },\n        //     animation: false,\n        //     data: data\n        // },\n        // {\n        //     name: 'Top 5',\n        //     type: 'effectScatter',\n        //     coordinateSystem: 'geo',\n        //     data: convertData(data.sort(function (a, b) {\n        //         return b.value - a.value;\n        //     }).slice(0, 5)),\n        //     symbolSize: function (val) {\n        //         return val[2] / 10;\n        //     },\n        //     showEffectOn: 'render',\n        //     rippleEffect: {\n        //         brushType: 'stroke'\n        //     },\n        //     hoverAnimation: true,\n        //     label: {\n        //         normal: {\n        //             formatter: '{b}',\n        //             position: 'right',\n        //             show: false\n        //         }\n        //     },\n        //     itemStyle: {\n        //         normal: {\n        //             color: '#F4E925',\n        //             shadowBlur: 10,\n        //             shadowColor: '#05C3F9'\n        //         }\n        //     },\n        //     zlevel: 1\n        // },\n         \n    ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-464297331","theme":"","layout":"","viewCount":1182,"userName":"心***阔","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xVL4GbCSDQ.png?v=1572233257290","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"m***n"}}