{"status":0,"data":{"cid":"xHvRc65yxl","authorUid":"bd-2956842748","authorUserName":"天使第一二","title":"带有收缩的--象形柱状图pictorialBar","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-02-26T10:49:29.000Z","lastUpdateTime":"2019-02-26T10:49:29.000Z","auth":2,"uid":"bd-2956842748","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-02-26T11:36:13.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1551157482870-q6hT30rbC.png\";\r\nvar bgImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAF+CAYAAADNzDlVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAilJREFUeNrs1rENwjAURdEfC0pmQAwBDfuwE8wDDSULIGagTGEcFNHQpfPXseT0V0ryzrA/XzcRsWt3HX2fsd1XSRITc8O2JIn5RZVIdsr87mU54xT0TBL1/Sms2uPd7qPXivvp+PfKpfuGBAkStPxMf7muLXe43FiO5ViO5VjOsAoSxHIsx3Isx3Isx3KGVZAglmM5lmM5lmM5liMFQYJYjuVYjuVYjuVYTpAgQSzHcizHcizHcoZVkCCWYzmWYzmWYzmWM6yCBLEcy7Ecy7Ecy7GcIEGCWI7lWI7lWI7lDKsgQYJYjuVYjuVYjuUMqyBBLMdyLMdyLMdyLGdYBQliOZZjOZZjOZZjOUGCBLEcy7Ecy7EcyxlWQYJYjuVYjuVYjuVYzrAKEsRyLMdyLMdyLMdypCBIEMuxHMuxHMuxnGEVJEgQy7Ecy7Ecy7GcYRUkiOVYjuVYjuVYjuUMqyBBLMdyLMdyLMdyLCdIkCCWYzmWYzmWYznDKkgQy7Ecy7Ecy7EcyxlWQYJYjuVYjuVYjuVYjhQECWI5lmM5lmM5ljOsggQJYjmWYzmWYzmWM6yCBLEcy7Ecy7Ecy7GcYRUkiOVYjuVYjuVYjuUECRLEcizHcizHcixnWAUJYjmWYzmWYzmWYznDKkgQy7Ecy7Ecy7Ecy5GCIEEsx3Isx3Isx3IsJ0iQIJZjOZZjOZZjOcMqSBDLsRzLsRzL9Wy5odZqhwQJWn4+AgwApGqd0LftHcgAAAAASUVORK5CYII=';\r\nvar fillImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAF+CAYAAADNzDlVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABFhJREFUeNrs3U+O1DgUgHHblUFzhb7GCCHNtnfMFUasOA9HYEWfAQlpZq6AEOIIdPcFZgMVe5L6Q6pLzQjFLZK2fpZSKbVioQ8n9b68+Dnxz39fXYYYrkIIF+Fxt5the5kagQkHhtepEZhvUCk01tLh3Gul3aZQwovxSwMwn8cfhW74+Lul66jJawgQIEB1QJfDdj1s5ZFvI8NzLsfluByX43KAlmzjKRdyTkYIEJeb6XK5JC7H5bhchculmLmcOASoAqjPGyMEiMtVuFyMhctxOS5X4XKlRC4nDgECBIjLLeVyXSnpqhQux+W43FyXi/Jy4hCgKqC+74wQIC5XkZdLKcvLcTkuV+FyOScuJw4Bmt/MlwPE5WprH4LaBy7H5WpcbvjgcuIQIECAuByXe0iXy4eJtOONXilx2NJh238PIYbpmPP9qvpc7O5YU+r351/KB9hyAl7C3WPO9+vqs3O5hkZocrn9H+PJwdP3Y87h/n9sNX24HKBFgLaesQLiclUul9Q+yMvJy1Xl5bLaB3EIUE3biVzvGSsgLjfb5Yb7ci7H5bhchcvFWLicOAQIECAux+W43P1QXcmpuWuotbyc2gdxCFBF29c+FHk5QFzOfDl5OS63jMsFtQ/iECBAgLgcl+Ny34PqcoMrot+cFkzEWIbtuN9/H0/R/yuyWFGf2zR8vBiLIHa5hTsFE3FGkcWifT4Pey63fqDt9hemsOYWSylGaM2t++P6zWUjS7KNuZGX1pdbO5S83Mqb9eXEIUC1gfV4r2GEAP08IHk5LsfluNzkcsEzVnEIULXLFS4HiMvNdrnh+uFyXI7LVbhcTN7hJQ4BqnU5eTlAXG6+y/XbjstxOS5X4XJ93nA5cQhQrcupYwXE5Wa7XLRWMJfjclUuV6wVLA4BAgSIyy3ncl0p6aoULsfluNxcl4vRM1ZxCBAgQFxuybWC25ov1+Wc2nK543tOj/tpeYxpOz9mzX3GERpd7uI4PWZcGuO8Hf82vSr07n5FfW7TZrPlcuIQoAqgL19+NUKAuFyFyw1xyDPWVbtci9dQY/Pl+o7LiUOA5rdD7cPGCAHicubLcTkut4jLmS8nDgF6CJdT+wCIy3kfK5fjcsu43HA/xOXEIUCVLnffhAYjBIjL/ZjLZevLcTkuV+Vyyfpy4hCgKqCvX58YIUBcbr7Lxd8/vb1u6Gf7hstxuZ/tcp6xikOAAAHicubLPYz2BHk5LsfluJzA+tja7hlrr/YBEJeb63Lx2cd38nJcjstVuFyyvpw4BAgQIC7H5bgcl3u0Lpd77/AShwBVNGuSAOJylS739MNf7blcSv1+uFI+LFmbT5avzbv/gOmY8/2q+lzc+ZWbqvZPK76OS9duvrNfV5/2XG4YMS4nDgECBIjLcbmHdLmGzjh5OS7H5cShxoGsLweIy1W63G/v/+FyXI7LVbic+XLiECBAgLgcl+NyXI7LrcXlYilFHAIEaH77T4ABAKzsRPWz+TQ7AAAAAElFTkSuQmCCgg';\r\nvar chartData = [{\r\n        name: '镇江',\r\n        value: 800,\r\n        grade: 1\r\n    },\r\n    {\r\n        name: '九江',\r\n        value: 720,\r\n        grade: 2\r\n    },\r\n    {\r\n        name: '黄石',\r\n        value: 680,\r\n        grade: 3\r\n    },\r\n    {\r\n        name: '大理',\r\n        value: 520,\r\n        grade: 4\r\n    },\r\n    {\r\n        name: '贵阳',\r\n        value: 460,\r\n        grade: 5\r\n    },\r\n    {\r\n        name: '深圳',\r\n        value: 380,\r\n        grade: 6\r\n    },\r\n    {\r\n        name: '广东',\r\n        value: 320,\r\n        grade: 7\r\n    },\r\n    {\r\n        name: '南通',\r\n        value: 300,\r\n        grade: 8\r\n    },\r\n    {\r\n        name: '青海',\r\n        value: 298,\r\n        grade: 9\r\n    },\r\n];\r\n\r\nvar bgData = [];\r\nvar itemData = [];\r\n// 取出每一条数据value,作为显示数据\r\nchartData.forEach(function(items, index) {\r\n    itemData.push(items.value);\r\n})\r\n// 取出所有数据最大值,作为背景象形柱图数据\r\nchartData.forEach(function(items, index) {\r\n    bgData.push({\r\n        name: items.name,\r\n        value: Math.max.apply(null, itemData)\r\n    });\r\n})\r\n// 所有数据最大值\r\nvar maxValue = Math.max.apply(null, itemData);\r\n// 字体 distance放大参数\r\nvar scale = 1;\r\n//富文本配置\r\nvar rich = {\r\n    white: {\r\n        color: \"#fff\",\r\n        align: 'left',\r\n        fontSize: 10 * scale,\r\n        padding: [0, 0]\r\n    },\r\n};\r\nvar option = {\r\n    backgroundColor: '#FFF',\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'shadow'\r\n        },\r\n        formatter: function(param) {\r\n            //alert(param.data.grade);\r\n            //alert(JSON.stringify(param));\r\n            var str = \"\";\r\n            str = param[0].data.name + \":\" + param[1].data.value +\r\n                \"</br>排名：\" + chartData[param[0].dataIndex].grade;\r\n            return str;\r\n        },\r\n    },\r\n    grid: {\r\n        left: '3%',\r\n        right: '6%',\r\n        bottom: '3%',\r\n        containLabel: true\r\n    },\r\n    yAxis: [{\r\n        type: 'category',\r\n        data: (function(data) {\r\n            var arr = [];\r\n            data.forEach(function(items) {\r\n                arr.push(items.name);\r\n            });\r\n            return arr;\r\n        })(chartData),\r\n\r\n        boundaryGap: ['20%', '20%'],\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                fontSize: 10 * scale,\r\n                color: '#3fdaff'\r\n            },\r\n            formatter: function(value) {\r\n                if (value != null && value != undefined) {\r\n                    var valueLength = value.length;\r\n                    if (valueLength > 5) {\r\n                        value = value.substring(0, 5) + \"...\";\r\n                    }\r\n                }\r\n                return value;\r\n            }\r\n        }\r\n    }],\r\n    xAxis: [{\r\n        type: 'value',\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n            inside: true,\r\n            length: 10 * scale,\r\n            lineStyle: {\r\n                color: '#0b5263'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#0b5263',\r\n                fontSize: 10 * scale\r\n            },\r\n            formatter: function(value) {\r\n                if (value != null && value != undefined) {\r\n                    var valueLength = value.length;\r\n                    if (valueLength > 5) {\r\n                        value = value.substring(0, 5) + \"...\";\r\n                    }\r\n                }\r\n                return value;\r\n            }\r\n        },\r\n    }],\r\n    dataZoom: [ //给x轴设置滚动条\r\n        {\r\n            start: 0, //默认为0\r\n            end: 8, //默认为100\r\n            type: 'slider',\r\n            show: true,\r\n            orient: \"vertical\",\r\n            //xAxisIndex: [0],\r\n            handleSize: 0, //滑动条的 左右2个滑动条的大小\r\n            width: 15,\r\n            left: 10, //左边的距离\r\n            top: 10, //上边的距离\r\n            bottom: 30, //下边的距离\r\n            handleColor: '#99ADC7', //h滑动图标的颜色\r\n            handleStyle: {\r\n                borderColor: \"#99ADC7\",\r\n                borderWidth: \"0\",\r\n                shadowBlur: 0,\r\n                background: \"#FFF\",\r\n                shadowColor: \"#ddd\",\r\n            },\r\n            fillerColor: '#99ADC7', //选中范围的填充颜色\r\n            borderColor: \"#DBDBDB\", //边框颜色\r\n            backgroundColor: '#FFF', //两边未选中的滑动条区域的颜色\r\n            showDataShadow: false, //是否显示数据阴影 默认auto\r\n            showDetail: false, //即拖拽时候是否显示详细数值信息 默认true\r\n            handleIcon: 'M-292,322.2c-3.2,0-6.4-0.6-9.3-1.9c-2.9-1.2-5.4-2.9-7.6-5.1s-3.9-4.8-5.1-7.6c-1.3-3-1.9-6.1-1.9-9.3c0-3.2,0.6-6.4,1.9-9.3c1.2-2.9,2.9-5.4,5.1-7.6s4.8-3.9,7.6-5.1c3-1.3,6.1-1.9,9.3-1.9c3.2,0,6.4,0.6,9.3,1.9c2.9,1.2,5.4,2.9,7.6,5.1s3.9,4.8,5.1,7.6c1.3,3,1.9,6.1,1.9,9.3c0,3.2-0.6,6.4-1.9,9.3c-1.2,2.9-2.9,5.4-5.1,7.6s-4.8,3.9-7.6,5.1C-285.6,321.5-288.8,322.2-292,322.2z',\r\n            filterMode: 'filter',\r\n        },\r\n        //下面这个属性是里面拖到\r\n        {\r\n            type: 'inside',\r\n            show: true,\r\n            //xAxisIndex: [0],\r\n            orient: \"vertical\",\r\n            start: 0, //默认为1\r\n            end: 8, //默认为100\r\n        },\r\n    ],\r\n    series: [\r\n        //背景\r\n        {\r\n            name: 'bg',\r\n            type: 'pictorialBar',\r\n            barWidth: '45%',\r\n            // barGap: '0%',\r\n            silent: true,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                    position: \"top\",\r\n                    distance: 20 * scale,\r\n                    formatter: function(params) {\r\n                        var stuNum = 0;\r\n                        chartData.forEach(function(value, index, array) {\r\n                            if (params.name == value.name) {\r\n                                stuNum = value.value;\r\n                            }\r\n                        })\r\n                        return stuNum + '{white| 人}';\r\n                    },\r\n                    textStyle: {\r\n                        color: \"#ffc72b\",\r\n                        fontSize: 10 * scale\r\n                    },\r\n                    rich: rich\r\n                }\r\n            },\r\n            symbol: 'image://' + bgImg,\r\n            symbolClip: false,\r\n            symbolBoundingData: maxValue,\r\n            symbolSize: ['100%', 20],\r\n            data: bgData,\r\n            \"symbolRepeat\": \"fixed\",\r\n        },\r\n        {\r\n            name: '数据',\r\n            type: 'pictorialBar',\r\n            barWidth: '45%',\r\n            barGap: '-100%',\r\n            data: chartData,\r\n            z: 3,\r\n            symbol: 'image://' + fillImg,\r\n            symbolClip: true,\r\n            symbolBoundingData: maxValue,\r\n            symbolSize: ['100%', 20],\r\n            \"symbolRepeat\": \"fixed\",\r\n        },\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-2956842748","theme":"","layout":"","viewCount":50,"userName":"天使第一二","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHvRc65yxl.png?v=1551180973424","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"天使第一二"}}