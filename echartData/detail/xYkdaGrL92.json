{"status":0,"data":{"cid":"xYkdaGrL92","authorUid":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","authorUserName":"J***x","title":"象形柱状图加关系图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-06T06:28:39.000Z","lastUpdateTime":"2021-01-06T06:28:39.000Z","auth":2,"uid":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-06T06:28:39.000Z","code":"let dataArray = {\n    dataNum: [\n        { name: '受理', data: [20, 30, 40, 40, 60, 70]},\n        { name: '办结', data: [30, 50, 40, 50, 20, 70]},\n        { name: '即将逾期', data: [40, 60, 10, 50, 60, 70]},\n        { name: '逾期', data: [10, 30, 40, 20, 60, 70]},\n    ],\n    name: [20,30,40,50,60,70],\n    score: [2, 3, 4, 5, 4, 6]\n}\n\nlet links = dataArray.score.map( (item, i) => ({ source: i, target: i + 1 }));\n\nlet color = [\n    [{ offset: 0, color: '#dff7ff' },{ offset: 0.07, color: '#4ad2ff' }, { offset: 1, color: 'rgba(74, 210, 255, .1)' }],\n    [{ offset: 0, color: '#ffffff' },{ offset: 0.07, color: '#29ff60' }, { offset: 1, color: 'rgba(41, 255, 96, .1)' }],\n    [{ offset: 0, color: '#fffdef' },{ offset: 0.07, color: '#ffd83e' }, { offset: 1, color: 'rgba(255, 216, 62, .1)' }],\n    [{ offset: 0, color: '#ffeaea' },{ offset: 0.07, color: '#ff5676' }, { offset: 1, color: 'rgba(255, 86, 118, .1)' }],\n]\nlet color2 = ['#4ad9ff', '#4ad2ff', '#29ff60', '#ffd83e', '#ff5676' ]\n\n    // series\nlet series = dataArray.dataNum.map((v,i) => ({\n    name: v.name,\n    type: 'pictorialBar',\n    symbol: 'path://M32.000,0.000 L64.000,800.000 L0.000,800.000 L32.000,0.000 Z',\n    // 是否裁剪图形\n    symbolClip: false,\n    barWidth: 10,\n    // 间隔\n    barGap: '10%',\n    data: v.data,\n    itemStyle: {\n        color: params => {\n            return new echarts.graphic.LinearGradient(0, 0, 0, 1, color[i])\n        }\n    }\n}))\n\n// 插入关系图配置\nseries.splice(0, 0, {\n    // 第二坐标轴，即右边\n    yAxisIndex: 1,\n    name:'满意度评分',\n    type: 'graph',\n    layout: 'none',\n    coordinateSystem: 'cartesian2d',\n    symbolSize: 50,\n    // 文字显示\n    label: { \n        show: true,\n        formatter: params => { \n            return params.value\n        },\n        textStyle: {\n            align: 'center', fontSize: 14, color: '#fff'\n        }\n    },\n    // 关系轴样式\n    edgeSymbol: ['circle', 'arrow'],\n    edgeSymbolSize: [4,10],\n    data: dataArray.score,\n    links: links,\n    lineStyle: { color: color[0] }\n})\n\nlet getLegend = dataArray.dataNum.map((v, i) =>({\n    name: v.name,\n    textStyle: { \n        fontSize: 14,\n        color: '#fff'\n    }\n})) \n// legend\nlet legend = [{\n    name: '满意度评分',\n    data: ['满意度评分'],\n    textStyle: { \n        fontSize: 14,\n        color: '#fff'\n    },\n    right: 300,\n    top: 6,\n},{\n    data: getLegend,\n    right: 20,\n    top: 6,\n    itemGap: 15\n}]\n\n\n// tooltip\nlet tooltip = {\n    trigger: 'axis',\n    textStyle: { fontSize: 18 },\n    axisPointer: { type: 'cross', label: { backgroundColor: '#283b56' } },\n    formatter: v => {\n        let [a, b, c, d, e] = v\n        return `\n            <div class='u-p-2'>\n                <div>满意度评分：${a.value}</div>\n                <div class='u-mt-2'>受理：${b.value}</div>\n                <div class='u-mt-2'>办结：${c.value}</div>\n                <div class='u-mt-2'>即将逾期：${d.value}</div>\n                <div class='u-mt-2'>逾期：${e.value}</div>\n            </div>\n        `\n    }\n}\n\n// grid\nlet grid = { top: '15%', left: '10%', right: '5%', bottom: '24%' }\n\n// xAxis\nlet xAxis = {\n    type: 'category',\n    boundaryGap: true,\n    data: dataArray.name,\n    axisLine: { lineStyle: { color: 'rgba(0,129,251,1)' } },\n    axisLabel: {\n        textStyle: { fontSize: 16, color: '#bdcbfd' },\n        rotate: 0\n    },\n    axisTick: { show: false }, //坐标轴刻度\n}\n\n// yAxis\nlet yAxis =[{\n    name: '工单量（件）',\n    type: 'value', scale: true, min: 0,\n    nameTextStyle: { color: '#81b1ff', fontSize: 12, padding: [0, 0, 0, 80]},\n    boundaryGap: [0.2, 0.2],\n    splitLine: { show: false },\n    axisLine: { lineStyle: { color: 'rgba(0,129,251,1)' } },\n    axisLabel: { textStyle: { fontSize: 16, color: '#bdcbfd' } }\n},{\n    name: '评分',\n    // 隐藏第二坐标轴\n    show: false\n}]\n\n// 渲染\noption = { tooltip, grid, xAxis, yAxis, series, legend, color: color2,backgroundColor: 'rgba(0,0,0,.8)' }\n\n","html":"","externalScripts":"","updaterUID":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","theme":"","layout":"","viewCount":96,"userName":"J***x","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYkdaGrL92.png?v=1609914519660","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-graph","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"J***x"}}