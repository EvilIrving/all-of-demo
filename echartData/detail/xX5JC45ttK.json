{"status":0,"data":{"cid":"xX5JC45ttK","authorUid":"obd-oEZ_5QIXj0M0iAp8XBpMaIFmcHqS24i","authorUserName":"雨***图","title":"XXX Hong Kong Latency Ranking","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-24T07:28:05.000Z","lastUpdateTime":"2020-04-24T07:28:05.000Z","auth":2,"uid":"obd-oEZ_5QIXj0M0iAp8XBpMaIFmcHqS24i","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-24T07:28:05.000Z","code":"myChart.showLoading();\r\n\r\nvar geoCoordMap = {\r\n    \"Store-222\": [114.154527, 22.248614],\r\n    \"Store-323\": [114.171552, 22.296108],\r\n    \"Store-1024\": [114.138628, 22.338379],\r\n    \"Store-vip\": [114.143703, 22.500478],\r\n    \"Store-987\": [113.964351, 22.381489],\r\n    \"Store-438\": [114.159874, 22.331216],\r\n    \"Store-630\": [114.168684, 22.444209],\r\n    \"Store-6732\": [113.976737, 22.393006],\r\n    \"Store-410\": [114.196315, 22.336025],\r\n    \"Store-239\": [114.156604, 22.282287],\r\n    \"Store-672\": [114.169249, 22.318697],\r\n    \"Store-1876\": [114.24899, 22.262842],\r\n};\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataName = data[i].name;\r\n        for (var key in geoCoordMap) {\r\n            var geoCoord = geoCoordMap[key];\r\n            if (dataName.indexOf(key) > -1) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value),\r\n                    visualMap: true,\r\n                });\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n};\r\nvar max = 100; //期望生成的最小值\r\nvar min = 20; //期望生成的最大值\r\nvar randomData = [{\r\n        name: \"Store-222\",\r\n        value: Math.floor(Math.random() * (200 - 140 + 1) + 140),\r\n    },\r\n    {\r\n        name: \"Store-323\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-1024\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-vip\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-987\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-438\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-630\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-6732\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-410\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-239\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-672\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n    {\r\n        name: \"Store-1876\",\r\n        value: Math.floor(Math.random() * (max - min + 1) + min),\r\n    },\r\n];\r\nvar NumDescSort = function(a, b) {\r\n    return a.value - b.value;\r\n};\r\nrandomData = randomData.sort(NumDescSort);\r\nconsole.log(convertData(randomData));\r\n\r\n//获取服务器的IP地址\r\n// var urlPath = window.document.location.href;  //浏览器显示地址 http://10.15.5.83:5555/ISV/demo.aspx?a=1&b=2\r\n// var docPath = window.document.location.pathname; //文件在服务器相对地址 /ISV/demo.aspx\r\n// var index = urlPath.indexOf(docPath);\r\n// var serverPath = urlPath.substring(0, index);//服务器地址 http://10.15.5.83:5555\r\n\r\n//官方地址https://echarts.apache.org/examples/data/asset/geo/HK.json\r\n// $.get(`${serverPath}/api/HK.json`, function (geoJson) {\r\n$.get('https://echarts.apache.org/examples/data/asset/geo/HK.json', function(geoJson) {\r\n    myChart.hideLoading();\r\n\r\n    echarts.registerMap(\"HK\", geoJson);\r\n\r\n    myChart.setOption(\r\n        (option = {\r\n            backgroundColor: \"#404a59\",\r\n            title: [{\r\n                    text: \"XXX Hong Kong Store Network Overview\",\r\n                    x: \"center\",\r\n                    y: \"top\",\r\n                    textStyle: {\r\n                        fontSize: 15,\r\n                        color: \"#fff\"\r\n                    },\r\n                },\r\n                {\r\n                    text: 'Store-222 anomaly detection',\r\n                    top: \"10%\",\r\n                    left: 20,\r\n                    textStyle: {\r\n                        color: \"#FB977F\",\r\n                        fontSize: 15,\r\n                    },\r\n                }\r\n            ],\r\n            tooltip: {\r\n                trigger: \"item\",\r\n                formatter: \"{b}<br/>{c} (p / km2)\",\r\n            },\r\n            visualMap: {\r\n                calculable: true,\r\n                inRange: {\r\n                    color: [\"#50a3ba\", \"#eac736\", \"#FC021D\"],\r\n                },\r\n                textStyle: {\r\n                    color: \"#fff\",\r\n                },\r\n            },\r\n            geo: {\r\n                map: \"HK\",\r\n                top: 130,\r\n                left: \"12%\",\r\n                bottom: \"14%\",\r\n                zoom: 1.3,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: \"#000\",\r\n                        areaColor: \"#036880\",\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: \"#2a333d\",\r\n                    },\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        color: \"#10A7CB\",\r\n                        fontSize: 11,\r\n                    },\r\n                    emphasis: {\r\n                        color: \"#878787\",\r\n                        fontSize: 11,\r\n                    },\r\n                },\r\n            },\r\n            grid: [{\r\n                right: 40,\r\n                top: '10%',\r\n                bottom: 40,\r\n                width: \"28%\",\r\n            }, ],\r\n            xAxis: [{\r\n                position: \"top\",\r\n                type: \"value\",\r\n                boundaryGap: false,\r\n                axisLabel: {\r\n                    formatter: \"{value} ms\",\r\n                    textStyle: {\r\n                        color: \"#c3dbff\", //更改坐标轴文字颜色\r\n                        fontSize: 10, //更改坐标轴文字大小\r\n                    },\r\n                },\r\n                splitLine: {\r\n                    show: false,\r\n                },\r\n                axisLine: {\r\n                    show: false,\r\n                },\r\n                axisTick: {\r\n                    show: false,\r\n                },\r\n            }, ],\r\n            yAxis: [{\r\n                type: \"category\",\r\n                data: [],\r\n                axisTick: {\r\n                    alignWithLabel: true,\r\n                },\r\n            }, ],\r\n            series: [{\r\n                    z: 1,\r\n                    type: \"effectScatter\",\r\n                    legendHoverLink: true,\r\n                    coordinateSystem: \"geo\",\r\n                    data: convertData(randomData),\r\n                    symbolSize: 10,\r\n                    showEffectOn: \"render\",\r\n                    rippleEffect: {\r\n                        brushType: \"stroke\",\r\n                    },\r\n                    hoverAnimation: true,\r\n                    label: {\r\n                        normal: {\r\n                            formatter: \"{b}\",\r\n                            position: \"left\",\r\n                            textStyle: {\r\n                                color: \"#FFD857\",\r\n                                fontSize: 13,\r\n                            },\r\n\r\n                            show: true,\r\n                        },\r\n                        emphasis: {\r\n                            formatter: \"{b}\",\r\n                            show: true,\r\n                        },\r\n                    },\r\n                    tooltip: {\r\n                        formatter: function(v) {\r\n                            return v.name + \" : \" + v.data.value[2] + \" ms\";\r\n                        },\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#f4e925\",\r\n                            shadowBlur: 50,\r\n                            shadowColor: \"#EE0000\",\r\n                        },\r\n                    },\r\n                    visualMap: true,\r\n                    zlevel: 1,\r\n                },\r\n                {\r\n                    type: \"bar\",\r\n                    visualMap: false,\r\n                    tooltip: {\r\n                        formatter: function(v) {\r\n                            return v.data.name + \" : \" + v.data.value + \" ms\";\r\n                        },\r\n                    },\r\n                    // \"itemStyle\": {\"normal\": {\"color\": \"#fd7270\",\"barBorderWidth\": 1,\"barBorderColor\": \"#e06462\"}},\r\n                    label: {\r\n                        normal: {\r\n                            show: true,\r\n                            formatter: \"{b}\",\r\n                            position: \"insideLeft\",\r\n                            textStyle: {\r\n                                color: \"#FFFFFF\",\r\n                                fontSize: 13,\r\n                            },\r\n                        },\r\n                        emphasis: {\r\n                            show: true,\r\n                        },\r\n                    },\r\n                    data: randomData,\r\n                },\r\n            ],\r\n        })\r\n    );\r\n});","html":"","externalScripts":"","updaterUID":"obd-oEZ_5QIXj0M0iAp8XBpMaIFmcHqS24i","theme":"","layout":"","viewCount":842,"userName":"雨***图","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xX5JC45ttK.png?v=1587713285804","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"雨***图"}}