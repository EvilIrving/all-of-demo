{"status":0,"data":{"cid":"xuxzITMEj6","authorUid":"obd-olIpngb4U9r3ilV9Oqv1UVaiJ-9xg0E","authorUserName":"R***X","title":"地图阴影,tooltip轮播,触摸不同颜色设置","description":"","latestVersion":4,"alwaysLatest":0,"createTime":"2021-12-27T08:36:51.000Z","lastUpdateTime":"2021-12-27T11:46:03.000Z","auth":2,"uid":"obd-olIpngb4U9r3ilV9Oqv1UVaiJ-9xg0E","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-27T11:46:03.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1640589484383-TgctXdaF8.png';\n\nvar mapName = 'china';\nvar data = [\n    { name: '天津', value: 4075 },\n    { name: '湖北', value: 500 },\n    { name: '湖南', value: 3212 },\n    { name: '江西', value: 5000 },\n    { name: '甘肃', value: 550 },\n    { name: '浙江', value: 1233 },\n];\n\nvar geoCoordMap = {};\n\n/*获取地图数据*/\n\nvar mapFeatures = echarts.getMap(mapName).geoJson.features;\nmapFeatures.forEach(function (item) {\n    // 地区名称\n    var name = item.properties.name;\n    // 地区经纬度\n    geoCoordMap[name] = item.properties.cp;\n});\n\nvar max = 4000;\n\nvar pointData = []\n\nfor (var i = 0; i < data.length; i++) {\n    var geoCoord = geoCoordMap[data[i].name];\n    if (geoCoord) {\n        pointData.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value),\n        });\n    }\n}\n\n\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow',\n        },\n    },\n    grid: {\n        // show: true,\n        right: '10%',\n        top: 5,\n        bottom: '10%',\n        left: '10%',\n    },\n    geo: [\n        {\n            map: mapName,\n            zlevel: -1,\n            zoom: 1.0,\n            silent: true,\n            layoutCenter: ['50%', '50%'],\n            layoutSize: '100%',\n            roam: false,\n            itemStyle: {\n                normal: {\n                    borderColor: 'rgba(192,245,249,.8)',\n                    borderWidth: 3,\n                    shadowColor: '#6FFDFF',\n                    shadowOffsetY: 0,\n                    shadowBlur: 10,\n                    // areaColor: 'rgba(29,85,139,.6)',\n                },\n            },\n            label: {\n                normal: {\n                    //静态的时候展示样式\n                    show: false, //是否显示地图省份得名称\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 12,\n                        fontFamily: 'Arial',\n                    },\n                },\n                emphasis: {\n                    //动态展示的样式\n                    show: false,\n                    color: '#fff',\n                },\n            },\n        },\n        {\n            show: true,\n            map: mapName,\n            zoom: 1.0,\n            layoutCenter: ['50%', '50%'],\n            layoutSize: '100%',\n            label: {\n                normal: {\n                    //静态的时候展示样式\n                    show: false, //是否显示地图省份得名称\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 12,\n                        fontFamily: 'Arial',\n                    },\n                },\n                emphasis: {\n                    //动态展示的样式\n                    color: '#fff',\n                },\n            },\n\n            blur: {\n                label: { show: true, color: '#000' },\n            },\n            roam: false, // 是否开启鼠标滚轮缩放\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                    },\n                    color: '#fff',\n                    borderColor: '#32CBE0',\n                    borderWidth: 1.5,\n                    areaColor: {\n                        type: 'linear-gradient',\n                        x: 0,\n                        y: 1000,\n                        x2: 0,\n                        y2: 0,\n                        colorStops: [\n                            {\n                                offset: 0.5,\n                                color: '#0D59C1', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: '#53C9C7', // 100% 处的颜色\n                            },\n                        ],\n                        global: true, // 缺省为 false\n                    },\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                    },\n                    borderWidth: 3,\n                    borderColor: 'rgba(255, 230, 175,0.8)',\n                    shadowColor: 'rgba(255, 230, 175,0.5)',\n                    shadowBlur: 30,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 12,\n                        backgroundColor: 'transparent',\n                    },\n                    areaColor: new echarts.graphic.LinearGradient(\n                        0,\n                        0,\n                        0,\n                        1,\n                        [\n                            {\n                                offset: 0,\n                                color: '#1cfbfe',\n                            },\n                            {\n                                offset: 1,\n                                color: '#3348e7',\n                            },\n                        ],\n                        false\n                    ),\n                },\n            },\n        },\n        {\n            type: 'map',\n            map: mapName,\n            zlevel: -2,\n            zoom: 1.0,\n            layoutCenter: ['50%', '51.4%'],\n            layoutSize: '100%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n                normal: {\n                    borderColor: 'rgba(35, 161, 184,0.5)',\n                    shadowColor: 'rgba(35, 161, 184,0.8)',\n                    shadowOffsetY: 5,\n                    shadowBlur: 15,\n                    areaColor: '#257AB2',\n                },\n            },\n        },\n        {\n            type: 'map',\n            map: mapName,\n            zlevel: -3,\n            zoom: 1.0,\n            layoutCenter: ['50%', '52.4%'],\n            layoutSize: '100%',\n            roam: false,\n            silent: true,\n            itemStyle: {\n                normal: {\n                    borderColor: 'rgba(7, 65, 117,0.5)',\n                    shadowColor: 'rgba(7, 65, 117,0.8)',\n                    shadowOffsetY: 15,\n                    shadowBlur: 8,\n                    areaColor: '#0A2763',\n                },\n            },\n        },\n    ],\n    series: [\n        {\n            type: 'map',\n            layoutCenter: ['50%', '50%'],\n            layoutSize: '100%',\n            label: {\n                normal: {\n                    //静态的时候展示样式\n                    show: false, //是否显示地图省份得名称\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 12,\n                    },\n                },\n                emphasis: {\n                    //动态展示的样式\n                    color: '#fff',\n                },\n            },\n            // geoIndex: 0,\n            map: mapName,\n            tooltip: {\n                trigger: 'item',\n                backgroundColor: 'transparent',\n                borderColor: 'transparent',\n                extraCssText: 'z-index:100;color:#fff;',\n                confine: true, //是否将 tooltip 框限制在图表的区域内\n                formatter: function (params, ticket, callback) {\n                    //根据业务自己拓展要显示的内容\n                    var res = '';\n                    var name = params.name;\n                    var count = params.value ? params.value : 0;\n                    res = `<div style=\"box-shadow: 0 0 10px #3BD9D9; padding: 10px; position: absolute; top: 0; left:0;  border-radius: 4px; border: 1px solid #04b9ff; background: linear-gradient(to bottom,  #51bfd4 0%,rgba(35,90,178,.8) 100%);\">\n                             <div style='color:#F4BD59; font-size: 14px;'>${name}</div>\n                             <div style=\"display: flex; align-items: center;padding-top: 6px;\">\n                              <div style=\"height: 6px; width: 6px; border-radius: 50%; background:#F4BD59; margin-right: 10px;\"></div> <span style='color:#fff;font-size: 12px;margin-right: 20px;'>tooltip</span><span style=\"font-size: 12px;font-family: 'PangMenZhengDao'\">${count}</span>\n                             </div>\n                          </div>`;\n                    return res;\n                },\n            },\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                    },\n                    color: '#fff',\n                    borderColor: '#32CBE0',\n                    borderWidth: 1.5,\n                    areaColor: {\n                        type: 'linear-gradient',\n                        x: 0,\n                        y: 1000,\n                        x2: 0,\n                        y2: 0,\n                        colorStops: [\n                            {\n                                offset: 0.5,\n                                color: '#0D59C1', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: '#53C9C7', // 100% 处的颜色\n                            },\n                        ],\n                        global: true, // 缺省为 false\n                    },\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                    },\n                    borderWidth: 3,\n                    borderColor: 'rgba(255, 230, 175,0.8)',\n                    shadowColor: 'rgba(255, 230, 175,0.5)',\n                    shadowBlur: 30,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 12,\n                        backgroundColor: 'transparent',\n                    },\n                    areaColor: new echarts.graphic.LinearGradient(\n                        0,\n                        0,\n                        0,\n                        1,\n                        [\n                            {\n                                offset: 0,\n                                color: '#1cfbfe',\n                            },\n                            {\n                                offset: 1,\n                                color: '#3348e7',\n                            },\n                        ],\n                        false\n                    ),\n                },\n            },\n            data: data,\n        },\n        {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            rippleEffect: {\n                brushType: 'fill',\n            },\n            label: {\n                show: true,\n                color: '#fff',\n                formatter: function (obj) {\n                    return obj.name;\n                },\n            },\n            symbolSize: function (val) {\n                var value = val[2];\n                if (value < max) {\n                    return 15;\n                }\n                return 20;\n            },\n            showEffectOn: 'render', //加载完毕显示特效\n            itemStyle: {\n                normal: {\n                    color: '#FEBE13', // 圆点的颜色\n                    shadowBlur: 10,\n                    shadowColor: '#333',\n                },\n            },\n            zlevel: 6,\n            data: pointData,\n        },\n        {\n            type: 'custom',\n            coordinateSystem: 'geo',\n            renderItem: function (params, api) {\n                //具体实现自定义图标的方法\n                return {\n                    type: 'image',\n                    style: {\n                        image: uploadedDataURL, // 自定义的图片地址\n                        x:\n                            api.coord([pointData[params.dataIndex].value[0], pointData[params.dataIndex].value[1]])[0] -\n                            6, // 数据的设置\n                        y:\n                            api.coord([pointData[params.dataIndex].value[0], pointData[params.dataIndex].value[1]])[1] -\n                            34,\n                    },\n                };\n            },\n            zlevel: 10,\n            data: pointData,\n        },\n    ],\n};\n\nvar count = 0;\nvar timer = null;\nvar chart = echarts.init(document.getElementById('chart-panel'));\nvar dataLength = option.series[0].data.length;\ntimer && clearInterval(timer);\ntimer = setInterval(() => {\n    chart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n    });\n    chart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: count % dataLength,\n    });\n    chart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: count % dataLength,\n    });\n    count++;\n}, 3000);\nchart.on('mouseover', function (params) {\n    clearInterval(timer);\n    chart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n    });\n    chart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n    });\n    chart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n    });\n});\nchart.on('mouseout', function (params) {\n    timer && clearInterval(timer);\n    timer = setInterval(function () {\n        chart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n        });\n        chart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: count % dataLength,\n        });\n        chart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: count % dataLength,\n        });\n        count++;\n    }, 3000);\n});\n","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-olIpngb4U9r3ilV9Oqv1UVaiJ-9xg0E","theme":"","layout":"","viewCount":0,"userName":"R***X","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xuxzITMEj6.png?v=1640605563513","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-custom","series-effectScatter","series-map","tooltip"],"customTags":[],"updaterUserName":"R***X"}}