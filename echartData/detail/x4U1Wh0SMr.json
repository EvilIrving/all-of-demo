{"status":0,"data":{"cid":"x4U1Wh0SMr","authorUid":"bd-1839088506","authorUserName":"K***锁","title":"石家庄市第二医院新华医疗集团（草稿）","description":"显示各社区就诊人数","latestVersion":1,"alwaysLatest":1,"createTime":"2019-07-11T01:52:28.000Z","lastUpdateTime":"2019-07-11T01:52:28.000Z","auth":2,"uid":"bd-1839088506","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-11T01:52:28.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1562809498447-cNgQ9Iswh.json\";\n\n// 集团内各医院坐标\nvar geoCoordMap = {\n    '石家庄市第二医院': [114.47697, 38.052536],\n    '革新': [114.481869, 38.056937],\n    '赵陵铺镇卫生院': [114.489795, 38.101993],\n    '大郭镇卫生院': [114.41203, 38.085278],\n    '杜北乡卫生院': [114.444291, 38.132607],\n    '西三庄乡卫生院': [114.480454, 38.089162],\n    '东焦': [114.47697, 38.059882],\n    '宁安': [114.487631, 38.057334],\n    '学府路社区卫生服务站': [114.479551, 38.1448]\n}\n// 各地区数据\nvar mydata = [{\n    name: '石家庄市第二医院',\n    value: '35'\n}, {\n    name: '革新',\n    value: '23'\n}, {\n    name: '赵陵铺镇卫生院',\n    value: '4'\n}, {\n    name: '大郭镇卫生院',\n    value: '5'\n}, {\n    name: '杜北乡卫生院',\n    value: '7'\n}, {\n    name: '西三庄乡卫生院',\n    value: '5'\n}, {\n    name: '东焦',\n    value: '4'\n}, {\n    name: '宁安',\n    value: '2'\n}, {\n    name: '学府路社区卫生服务站',\n    value: '4'\n}];\n\n// 数据转换\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nmyChart.showLoading()\n\n$.ajax({\n    url: uploadedDataURL,\n    async: false,\n    dataType: 'json',\n    success: function(data) {\n        echarts.registerMap('xhq', data);\n\n        myChart.hideLoading();\n\n        option = {\n            backgroundColor: '#151b53',\n            tooltip: {\n                formatter: function(e) {\n                    if (typeof(e.value)[2] == \"undefined\") {\n                        return e.name;\n                    } else {\n                        return '就诊人数<br>' + e.name + ':' + e.value[2] + '人';\n                    }\n\n                }\n            },\n            geo: {\n                map: 'xhq',\n                show: true,\n                // label: {\n                //     show: false,\n                //     formatter: function(value) {\n                //         return value.value[2]\n                //     },\n                //     color: '#fff',\n                //     emphasis: {\n                //         show: false\n                //     }\n                // },\n                itemStyle: {\n                    normal: {\n                        areaColor: '#172260',\n                        borderColor: '#216ca7',\n                        borderWidth: 1,\n                        shadowColor: '#216ca7',\n                        shadowBlur: 1\n                    }\n                },\n                zoom: 1.2,\n            },\n            series: [{\n                    type: 'map',\n                    map: 'xhq',\n                    geoIndex: 1,\n                    aspectScale: 0.75, //长宽比\n                    zoom: 1.2,\n                    label: {\n                        show: true,\n                        textStyle: {\n                            fontSize: 16,\n                            color: '#216ca7'\n                        },\n                        emphasis: {\n                            show: true,\n                            textStyle: {\n                                fontSize: 30,\n                                color: '#216ca7'\n                            }\n                        }\n                    },\n                    roam: false,\n                    itemStyle: {\n                        normal: {\n                            areaColor: 'transparent',\n                            borderColor: 'transparent',\n                            borderWidth: 1\n                        },\n                        emphasis: {\n                            areaColor: '#C9E6FF',\n                            shadowColor: '#5AB2FE',\n                            shadowBlur: 20\n                        }\n                    },\n                    data: convertData(mydata),\n                },\n                {\n                    name: '就诊人数',\n                    type: 'effectScatter',\n                    coordinateSystem: 'geo',\n                    showEffectOn: 'render',\n                    rippleEffect: {\n                        brushType: 'stroke'\n                    },\n                    hoverAnimation: true,\n                    symbolSize: function(val) {\n                        var num = val[2];\n                        if (num < 10) {\n                            return 10\n                        } else if (num > 30) {\n                            return 30;\n                        } else {\n                            return num\n                        }\n                    },\n                    // label: {\n                    //     normal: {\n                    //         show: true,\n                    //         formatter: function(value) {\n                    //             return value.value[2]\n                    //         },\n                    //         textStyle: {\n                    //             color: '#fff',\n                    //             fontSize: 12,\n                    //         }\n                    //     }\n                    // },\n                    label: {\n                        normal: {\n                            formatter: '{b}',\n                            position: 'bottom',\n                            show: true,\n                            textStyle: {\n                                fontSize: 12,\n                            }\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            color: '#216ca7', //标志颜色\n                        },\n                    },\n                    zlevel: 6,\n                    data: convertData(mydata),\n                }\n            ]\n        }\n        myChart.setOption(option);\n    }\n})\n// 指定图表的配置项和数据","html":"","externalScripts":"","updaterUID":"bd-1839088506","theme":"","layout":"","viewCount":635,"userName":"K***锁","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4U1Wh0SMr.png?v=1562809949057","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","tooltip"],"customTags":[],"updaterUserName":"K***锁"}}