{"status":0,"data":{"cid":"xrkbORe_A-","authorUid":"bd-1603263893","authorUserName":"小***了","title":"bmap+echarts","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2017-11-02T02:09:45.000Z","lastUpdateTime":"2017-11-02T02:09:45.000Z","auth":2,"uid":"bd-1603263893","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.7.2","versionCreateTime":"2017-11-02T02:09:45.000Z","code":"var data = [{\r\n        COMPANY: '0001',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0002',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0003',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0004',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0005',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0006',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0007',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0008',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0009',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0010',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0011',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0012',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0013',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0014',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0015',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0016',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0017',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0018',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0019',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0020',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0021',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0022',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0023',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0024',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0025',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0026',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0027',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0028',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0029',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        name: '0030',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0031',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0032',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0033',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0034',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    }, {\r\n        COMPANY: '0035',\r\n        DJYCS: 0,\r\n        GZPYCS: 0,\r\n        CZPYCS: 0,\r\n        QXYCS: 0,\r\n        DQGZYCS: 0\r\n    },\r\n\r\n];\r\nvar geoCoordMap = {\r\n    \"0001\": [113.22, 33.00],\r\n    \"0002\": [118.28, 33.97],\r\n    \"0003\": [119.28, 26.11],\r\n    \"0004\": [119.58, 32.16],\r\n    \"0005\": [98.50, 39.74],\r\n    \"0006\": [118.68, 24.89],\r\n    \"0007\": [125.32, 43.83],\r\n    \"0008\": [113.84, 30.67],\r\n    \"0009\": [104.41, 30.86],\r\n    \"0010\": [112.46, 23.06],\r\n    \"0011\": [113.32, 23.11],\r\n    \"0012\": [119.92, 32.46],\r\n    \"0013\": [120.25, 31.61],\r\n    \"0014\": [113.33, 39.50],\r\n    \"0015\": [106.38, 38.99],\r\n    \"0016\": [107.38, 38.55],\r\n    \"0017\": [113.39, 34.79],\r\n    \"0018\": [103.84, 36.08],\r\n    \"0019\": [117.21, 39.10],\r\n    \"0020\": [109.01, 33.62],\r\n    \"0021\": [129.52, 42.92],\r\n    \"0022\": [122.82, 45.63],\r\n    \"0023\": [123.40, 41.83],\r\n    \"0024\": [111.77, 36.58],\r\n    \"0025\": [116.96, 33.67],\r\n    \"0026\": [82.97, 41.72],\r\n    \"0027\": [109.61, 39.35],\r\n    \"0028\": [126.54, 45.81],\r\n    \"0029\": [84.88, 45.59],\r\n    \"0030\": [117.95, 40.96],\r\n    \"0031\": [121.61, 38.91],\r\n    \"0032\": [112.73, 37.70],\r\n    \"0033\": [117.39, 32.93],\r\n    \"0034\": [117.26, 31.83],\r\n    \"0035\": [122.96, 39.66],\r\n\r\n};\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i][\"COMPANY\"]];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i][\"COMPANY\"],\r\n                value: geoCoord.concat(data[i][\"DJYCS\"], data[i][\"GZPYCS\"], data[i][\"CZPYCS\"], data[i][\"QXYCS\"], data[i][\"DQGZYCS\"])\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\noption = {\r\n    title: {\r\n        text: '',\r\n        left: 'center'\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function(params) {\r\n            var res = \"<div style='width: 196px;border: 1px solid #737373;'><div style='width: 100%;height: 28px;background-color: #eee;border-bottom: 1px solid #dedede;'><span style='color: #010101;font-size: 12px;line-height: 28px;font-weight: bold;'>\" + params.data.name + \"分公司</span></div>\";\r\n            res += \"<div class=\\\"hint-content\\\"><div style='width: 100%;height: 28px;background-color: #fff;border-bottom: 1px solid #dedede;'><div style='float: left;color: #333;font-size: 12px;line-height: 28px;'>DJ异常数：</div><div style='height: 20px;margin-top: 4px;min-width: 40px;float: right;color: #666;font-size: 12px;line-height: 20px;'>\" + params.data.value[2] + \"</div></div>\";\r\n            res += \"<div class=\\\"hint-content\\\"><div style='width: 100%;height: 28px;background-color: #fff;border-bottom: 1px solid #dedede;'><div style='float: left;color: #333;font-size: 12px;line-height: 28px;'>GZ异常数：</div><div style='height: 20px;margin-top: 4px;min-width: 40px;float: right;color: #666;font-size: 12px;line-height: 20px;'>\" + params.data.value[3] + \"</div></div>\";\r\n            res += \"<div class=\\\"hint-content\\\"><div style='width: 100%;height: 28px;background-color: #fff;border-bottom: 1px solid #dedede;'><div style='float: left;color: #333;font-size: 12px;line-height: 28px;'>CZ异常数：</div><div style='height: 20px;margin-top: 4px;min-width: 40px;float: right;color: #666;font-size: 12px;line-height: 20px;'>\" + params.data.value[4] + \"</div></div>\";\r\n            res += \"<div class=\\\"hint-content\\\"><div style='width: 100%;height: 28px;background-color: #fff;border-bottom: 1px solid #dedede;'><div style='float: left;color: #333;font-size: 12px;line-height: 28px;'>QX异常数：</div><div style='height: 20px;margin-top: 4px;min-width: 40px;float: right;color: #666;font-size: 12px;line-height: 20px;'>\" + params.data.value[5] + \"</div></div>\";\r\n            res += \"<div class=\\\"hint-content\\\"><div style='width: 100%;height: 28px;background-color: #fff;'><div style='float: left;color: #333;font-size: 12px;line-height: 28px;'>DQ异常数：</div><div style='height: 20px;margin-top: 4px;min-width: 40px;float: right;color: #666;font-size: 12px;line-height: 20px;'>\" + params.data.value[6] + \"</div></div>\";\r\n            res += \"</div></div>\"\r\n            return res\r\n        },\r\n        backgroundColor: \"rgba(0,0,0,0)\",\r\n        borderWidth: 0\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        left: '40',\r\n        bottom: '40',\r\n        data: ['正常', '异常'],\r\n        textStyle: {\r\n            color: '#666'\r\n        },\r\n        icon: 'circle',\r\n        borderColor: '#aaa',\r\n        borderWidth: 1,\r\n        padding: 10,\r\n        borderRadius: 6,\r\n        backgroundColor: \"#fff\",\r\n        itemWidth: 8,\r\n        itemHeight: 8,\r\n    },\r\n    bmap: {\r\n        center: [104.114129, 35.550339],\r\n        zoom: 6,\r\n        roam: true,\r\n        mapStyle: {\r\n            'styleJson': [{\r\n                'featureType': 'water', //水\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'color': '#fff'\r\n                }\r\n            }, {\r\n                'featureType': 'land', //土地\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#fff'\r\n                }\r\n            }, {\r\n                'featureType': 'highway', //公路\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }, {\r\n                'featureType': 'arterial',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }, {\r\n                'featureType': 'arterial',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }, {\r\n                'featureType': 'local',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                        //\t\t\t\t\t\t\t\t'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'railway',\r\n                'elementType': 'all',\r\n                //\t\t\t\t\t\t\t'elementType': 'geometry.fill',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                        //\t\t\t\t\t\t\t\t'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'railway',\r\n                'elementType': 'geometry.stroke',\r\n                'stylers': {\r\n                    'color': '#08304b'\r\n                }\r\n            }, {\r\n                'featureType': 'subway',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'lightness': -70\r\n                }\r\n            }, {\r\n                'featureType': 'building',\r\n                'elementType': 'geometry.fill',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'all',\r\n                'elementType': 'labels.text.fill',\r\n                'stylers': {\r\n                    'color': '#857f7f'\r\n                }\r\n            }, {\r\n                'featureType': 'all',\r\n                'elementType': 'labels.text.stroke',\r\n                'stylers': {\r\n                    'color': '#000000'\r\n                }\r\n            }, {\r\n                'featureType': 'building',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#022338'\r\n                }\r\n            }, {\r\n                'featureType': 'green',\r\n                'elementType': 'geometry',\r\n                'stylers': {\r\n                    'color': '#062032'\r\n                }\r\n            }, {\r\n                'featureType': 'boundary',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'color': '#465b6c'\r\n                }\r\n            }, {\r\n                'featureType': 'manmade',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }, {\r\n                'featureType': 'label',\r\n                'elementType': 'all',\r\n                'stylers': {\r\n                    'visibility': 'off'\r\n                }\r\n            }]\r\n        }\r\n    },\r\n    series: [{\r\n        name: '正常',\r\n        type: 'scatter',\r\n        coordinateSystem: 'bmap',\r\n        data: convertData(data),\r\n        symbolSize: 8,\r\n        label: {\r\n            normal: {\r\n                formatter: '{b}',\r\n                position: 'bottom',\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: true\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'purple'\r\n            }\r\n        }\r\n    }, {\r\n        name: '异常',\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'bmap',\r\n        data: convertData(data.sort(function(a, b) {\r\n            return b.value - a.value;\r\n        }).slice(0, 5)),\r\n        symbolSize: 10,\r\n        showEffectOn: 'render',\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n        hoverAnimation: true,\r\n        label: {\r\n            normal: {\r\n                formatter: '{b}',\r\n                position: 'right',\r\n                show: true\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ff0000',\r\n                shadowBlur: 10,\r\n                shadowColor: '#333'\r\n            }\r\n        },\r\n        zlevel: 1\r\n    }]\r\n};\r\n\r\nfunction getYCdata(data) {\r\n    var YCdata = []\r\n    for (var i = 0; i < data.length; i++) {\r\n        if ((data[i].DJYCS + data[i].GZPYCS + data[i].CZPYCS + data[i].QXYCS + data[i].DQGZYCS) > 0) {\r\n            var geoCoord = geoCoordMap[data[i][\"COMPANY\"]];\r\n            if (geoCoord) {\r\n                YCdata.push({\r\n                    name: data[i][\"COMPANY\"],\r\n                    value: geoCoord.concat(data[i][\"DJYCS\"], data[i][\"GZPYCS\"], data[i][\"CZPYCS\"], data[i][\"QXYCS\"], data[i][\"DQGZYCS\"])\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return YCdata;\r\n}\r\n\r\nfunction getZCdata(data) {\r\n    var ZCdata = []\r\n    for (var i = 0; i < data.length; i++) {\r\n        if ((data[i].DJYCS + data[i].GZPYCS + data[i].CZPYCS + data[i].QXYCS + data[i].DQGZYCS) == 0) {\r\n            var geoCoord = geoCoordMap[data[i][\"COMPANY\"]];\r\n            if (geoCoord) {\r\n                ZCdata.push({\r\n                    name: data[i][\"COMPANY\"],\r\n                    value: geoCoord.concat(data[i][\"DJYCS\"], data[i][\"GZPYCS\"], data[i][\"CZPYCS\"], data[i][\"QXYCS\"], data[i][\"DQGZYCS\"])\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return ZCdata;\r\n}","html":"","externalScripts":"http://api.map.baidu.com/getscript?v=2.0&ak=f9tSrSwnyl2RCqTWHwja8QCq9nh1H01S,/dep/echarts/latest/extension/bmap.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-1603263893","theme":"","layout":"","viewCount":210,"userName":"小***了","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrkbORe_A-.png?v=1509588585455","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"小***了"}}