{"status":0,"data":{"cid":"xzV2-az6Co","authorUid":"obd-o2KLM4A9lvYYe340Aks_RVjCFF0U463","authorUserName":"M***菔","title":"全货机航班动态","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2020-07-20T09:17:14.000Z","lastUpdateTime":"2020-07-20T09:17:14.000Z","auth":2,"uid":"obd-o2KLM4A9lvYYe340Aks_RVjCFF0U463","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-05T01:04:44.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1596589418370-i0oW0darx.jpg\";\r\n\r\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\nvar bgIcon = '/asset/get/s/data-1593933762711-IHRMda0Rg.png';\r\n\r\n// 郑州 中心点坐标\r\nvar city = '郑州';\r\nvar zhengzhou = [113.649, 34.7577778];\r\n\r\nvar geoCoordMap = {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"杭州\": [120.44332, 30.240977],\r\n    \"无锡\": [120.439564, 31.508458],\r\n    \"泉州\": [118.598632, 24.807175],\r\n    \"南京\": [118.88331, 31.736424],\r\n    \"南昌\": [115.919301, 28.865286],\r\n    \"深圳\": [113.821705, 22.638172],\r\n    \"新疆\": [87.9236, 43.5883],\r\n    \"淮安\": [119.137859, 33.795129]\r\n};\r\n\r\nvar geoCoordEMap = {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"杭州\": [120.44332, 30.240977],\r\n    \"无锡\": [120.439564, 31.508458],\r\n    \"泉州\": [118.598632, 24.807175],\r\n    \"南京\": [118.88331, 31.736424],\r\n    \"南昌\": [115.919301, 28.865286],\r\n    \"深圳\": [113.821705, 22.638172],\r\n    \"淮安\": [119.137859, 33.795129]\r\n};\r\n\r\nvar geoCoordArray = [\r\n    {\r\n        key: 1,\r\n        start: '杭州',\r\n        end: '郑州',\r\n        route: '杭州-郑州-杭州',\r\n        num: 'O36922/O36989',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 2,\r\n        start: '郑州',\r\n        end: '杭州',\r\n        route: '杭州-郑州-杭州',\r\n        num: 'O36990',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 3,\r\n        start: '泉州',\r\n        end: '无锡',\r\n        num: 'I99862',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 4,\r\n        start: '无锡',\r\n        end: '郑州',\r\n        num: 'I99862',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 5,\r\n        start: '南京',\r\n        end: '郑州',\r\n        num: 'CF9092',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 6,\r\n        start: '新疆',\r\n        end: '郑州',\r\n        num: 'CF9092',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 7,\r\n        start: '南昌',\r\n        end: '郑州',\r\n        num: 'HT3810',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 8,\r\n        start: '深圳',\r\n        end: '郑州',\r\n        route: '深圳-郑州',\r\n        num: 'O36879',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    },\r\n    {\r\n        key: 9,\r\n        start: '淮安',\r\n        end: '郑州',\r\n        num: 'I99872',\r\n        type: 'B733',\r\n        fly: '[19]05:30',\r\n        to: '[19]06:01',\r\n        remark: '公司计划延误'\r\n    }\r\n];\r\n\r\nvar geoCoordEArray = [{\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"杭州\": [120.44332, 30.240977]\r\n}, {\r\n    \"杭州\": [120.44332, 30.240977],\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"杭州 \": [120.44332, 30.240977]\r\n}, {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"无锡\": [120.439564, 31.508458],\r\n    \"泉州\": [118.598632, 24.807175]\r\n}, {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"南京\": [118.88331, 31.736424]\r\n}, {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"南昌\": [115.919301, 28.865286]\r\n}, {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"深圳\": [113.821705, 22.638172]\r\n}, {\r\n    \"郑州\": [113.858976, 34.532204],\r\n    \"淮安\": [119.137859, 33.795129]\r\n}];\r\n\r\n\r\nvar colors = [\"#FF8C00\",\"#FFFFFF\"];\r\n    \r\n$(function() {\r\n\r\n\t// 基于准备好的dom，初始化echarts实例\r\n    // var myChart = echarts.init(document.getElementById('echartsId'));\r\n    var mapIData = [];\r\n\r\n    // 地图数据坐标 航线 组装\r\n    for (var dataItem of geoCoordArray) {\r\n        mapIData.push({\r\n            name: dataItem.start == city ? '': dataItem.start, //城市名称\r\n            value: geoCoordMap[dataItem.start], //城市坐标\r\n            num: dataItem.num, //航班号\r\n            key: dataItem.key, //航班号\r\n            route: dataItem.route,\r\n            type: dataItem.type,\r\n            fly: dataItem.fly,\r\n            to: dataItem.to,\r\n            remark: dataItem.remark,\r\n            coords: [geoCoordMap[dataItem.start], geoCoordMap[dataItem.end]] //航线路径点\r\n        });\r\n    }\r\n\r\n    //加载地图\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n        $('body').css({\r\n            'background': 'url(/asset/get/s/data-1596589418370-i0oW0darx.jpg) repeat-y', //'#2a6d87',\r\n            'position': 'fixed',\r\n            'top': 0,\r\n            'left': 0,\r\n            'width': '100%',\r\n            'height': '100%',\r\n            'background-size': 'cover',\r\n            '-webkit-background-size': 'cover',\r\n            '-o-background-size': 'cover',\r\n            'background-position': 'center 0',\r\n            //'writing-mode': 'vertical-rl'\r\n        });\r\n\r\n        //注册地图组件\r\n        echarts.registerMap('china', geoJson);\r\n\r\n        option = {\r\n            title: {\r\n                text: '全货机航班动态',\r\n                //subtext: '',\r\n                left: 'center',\r\n                top: '1%',\r\n                textStyle: {\r\n                    color: '#fff',\r\n                    fontSize: 32\r\n                }\r\n            },\r\n            tooltip : {\r\n                show: true,\r\n                trigger: 'item',\r\n                triggerOn: 'mousemove|click',\r\n                enterable: true,\r\n                formatter:function(params, ticket, callback){\r\n                    if(params.seriesType==\"lines\"){\r\n                        return '航线：'+params.data.route+'<br/><hr/>航班：'+params.data.num+'<br/><hr/>机型：'+params.data.type;\r\n                    }else{\r\n                        return params.name;\r\n                    }\r\n                }\r\n            },\r\n            geo: { //地理坐标系组件。\r\n                show: true,\r\n                map: 'china',\r\n                roam: true,\r\n                silent: true,\r\n                zoom: 1,\r\n                left: 'center', //left 的值可以是像 20 这样的具体像素值，可以是像 '20%' 这样相对于容器高宽的百分比，也可以是 'left', 'center', 'right'\r\n                layoutCenter: ['50%', '50%'],\r\n                center: [113.83531246, 34.0267395887],\r\n                label: {\r\n                    emphasis: {\r\n                        show: true\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(147, 235, 248, 1)',\r\n                        borderWidth: 1,\r\n                        areaColor: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.8,\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                            }],\r\n                            globalCoord: false // 缺省为 false\r\n                        },\r\n                        shadowColor: 'rgba(128, 217, 248, 1)',\r\n                        // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                        shadowOffsetX: -2,\r\n                        shadowOffsetY: 2,\r\n                        shadowBlur: 10\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#389BB7',\r\n                        borderWidth: 0\r\n                    }\r\n                }\r\n            },\r\n            // 多彩色线条样式 -- 屏蔽后为白色\r\n            // visualMap: {\r\n            //     min: 0,\r\n            //     max: 20,\r\n            //     left: 'left',\r\n            //     top: 'bottom',\r\n            //     text: ['高', '低'],\r\n            //     textStyle:{\r\n            //         color:'white'\r\n            //     },\r\n            //     calculable: true,\r\n            //     colorLightness: [0.8, 100],\r\n            //     color: ['#c05050','#e5cf0d','#5ab1ef'],\r\n            //     dimension: 3\r\n            // },\r\n            series: [\r\n                    //地图点的动画效果\r\n                    {\r\n                        //  name: 'Top 5',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        effectType: 'ripple',\r\n                        zlevel: 1,\r\n                        symbolSize: 6,\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: { //涟漪特效\r\n        \t\t\t\t\tperiod: 4, //动画时间，值越小速度越快\r\n        \t\t\t\t\tbrushType: 'stroke', //波纹绘制方式 stroke, fill\r\n        \t\t\t\t\tscale: 4 //波纹圆环最大限制，值越大波纹越大\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                fontSize: 14,\r\n                                fontWeight: 'bold',\r\n                                position: 'right',\r\n                                show: true,\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[0],\r\n                                shadowBlur: 10,\r\n                                shadowColor: colors[0]\r\n                            }\r\n                        },\r\n                        data: mapIData\r\n                    },\r\n        \t\t\t//被攻击点\r\n        \t\t\t{\r\n        \t\t\t\ttype: 'scatter',\r\n        \t\t\t\tcoordinateSystem: 'geo',\r\n        \t\t\t\tzlevel: 2,\r\n        \t\t\t\trippleEffect: {\r\n        \t\t\t\t\tperiod: 4,\r\n        \t\t\t\t\tbrushType: 'stroke',\r\n        \t\t\t\t\tscale: 4\r\n        \t\t\t\t},\r\n        \t\t\t\tlabel: {\r\n        \t\t\t\t\tnormal: {\r\n                                \"show\": true,\r\n                                position: 'right',\r\n                                formatter: function(params) {\r\n                                    return '{div|'+city+'}'\r\n                                },\r\n                                verticalAlign: \"bottom\",\r\n                                rich: {\r\n                                    div: {\r\n                                        height: 28,\r\n                                        fontSize: 14,\r\n                                        lineHeight: 8,\r\n                                        //疑似 下 右 上 左\r\n                                        padding: [3, -10, 3, 10],\r\n                                        color: \"#FFFFFF\",\r\n                                        backgroundColor: {\r\n                                            image: bgIcon\r\n                                        }\r\n                                    }\r\n                                }\r\n        \t\t\t\t\t},\r\n        \t\t\t\t\temphasis: {\r\n        \t\t\t\t\t\tshow: true\r\n        \t\t\t\t\t}\r\n        \t\t\t\t},\r\n        \t\t\t\tsymbol: 'pin',  //ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\r\n        \t\t\t\tsymbolSize: 40,\r\n\t\t\t\t\t\tcolor: \"#00BFFF\",\r\n        \t\t\t\tdata: [{\r\n        \t\t\t\t\tvalue: zhengzhou\r\n        \t\t\t\t}],\r\n        \t\t\t},\r\n                    //地图线的动画效果\r\n                    {\r\n                        type: 'lines',\r\n                        zlevel: 2,\r\n                        // polyline:true,\r\n                        effect: {\r\n                            show: true,\r\n                            period: 12, //箭头指向速度，值越小速度越快\r\n                            trailLength: 0, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                            symbol: planePath, //箭头图标\r\n                            symbolSize: 12, //图标大小\r\n                            color: '#64f2ff'\r\n                        },\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: colors[1],\r\n                                width: 2, //线宽。\r\n                                type: 'solid', //线的类型。可选：'solid'，'dashed'，'dotted'\r\n                                opacity: 0.8, //线条透明度\r\n                                curveness: 0 //线条曲直度 0 - 0.01\r\n                            }\r\n                        },\r\n                        label: {\r\n                            show: true,\r\n                            position: 'middle',\r\n                            verticalAlign: 'middle',\r\n                            formatter: function(params) {\r\n                                return params.data.num\r\n                            }\r\n                        },\r\n                        data: mapIData\r\n                    }\r\n                ]\r\n        };\r\n\r\n        myChart.setOption(option);\r\n                \r\n        // 航线 点击 效果\r\n        // myChart.on('click', 'series.lines', function () {\r\n        //     //alert(11111);\r\n        //     // series name 为 'uuu' 的系列中的图形元素被 'mouseover' 时，此方法被回调。\r\n        // });\r\n        \r\n        myChart.resize();\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-o2KLM4A9lvYYe340Aks_RVjCFF0U463","theme":"","layout":"","viewCount":170,"userName":"M***菔","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xzV2-az6Co.png?v=1596589485014","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"M***菔"}}