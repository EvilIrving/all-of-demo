{"status":0,"data":{"cid":"xSJnXOtfD7","authorUid":"bd-3225273598","authorUserName":"冷***_","title":"饼柱混搭时间轴","description":"饼图混合条形图搭配时间轴的使用，数据自定义。","latestVersion":2,"alwaysLatest":1,"createTime":"2018-08-28T08:30:27.000Z","lastUpdateTime":"2018-08-28T08:30:27.000Z","auth":2,"uid":"bd-3225273598","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.1.0","versionCreateTime":"2018-08-28T08:33:13.000Z","code":"var dataMap = {};\r\n\r\nfunction dataFormatter(obj) {  \r\n    var pList = ['广东', '河南', '河北', '陕西', '广西', '其他'];  \r\n    var temp;  \r\n    for (var year = 201808; year <= 201812; year++) {    \r\n        var max = 0;    \r\n        var sum = 0;    \r\n        temp = obj[year];    \r\n        for (var i = 0, l = temp.length; i < l; i++) {      \r\n            max = Math.max(max, temp[i]);      \r\n            sum += temp[i];      \r\n            obj[year][i] = {        \r\n                name: pList[i],\r\n                        value: temp[i]      \r\n            }    \r\n        }    \r\n        obj[year + 'max'] = Math.floor(max / 100) * 100;    \r\n        obj[year + 'sum'] = sum;  \r\n    }  \r\n    return obj;\r\n}\r\n\r\ndataMap.data = dataFormatter({  \r\n    201808: [150, 200, 100, 100, 200, 50],\r\n      201809: [0, 0, 0, 0, 0, 0, 0],\r\n      201810: [0, 0, 0, 0, 0, 0],\r\n      201811: [0, 0, 0, 0, 0],\r\n      201812: [0, 0, 0, 0, 0],\r\n});\r\n\r\ndataMap.dataGD = dataFormatter({  \r\n    201808: [150],\r\n      201809: [0],\r\n      201810: [0],\r\n      201811: [0],\r\n      201812: [0],\r\n});\r\n\r\ndataMap.dataHN = dataFormatter({  \r\n    201808: [200],\r\n    201809: [0],\r\n    201810: [0],\r\n    201811: [0],\r\n    201812: [0],\r\n\r\n});\r\n\r\ndataMap.dataHB = dataFormatter({  \r\n    201808: [100],\r\n    201809: [0],\r\n    201810: [0],\r\n    201811: [0],\r\n    201812: [0],\r\n});\r\n\r\ndataMap.dataSX = dataFormatter({  \r\n    201808: [100],\r\n    201809: [0],\r\n    201810: [0],\r\n    201811: [0],\r\n    201812: [0],\r\n});\r\ndataMap.dataGX = dataFormatter({  \r\n    201808: [200],\r\n    201809: [0],\r\n    201810: [0],\r\n    201811: [0],\r\n    201812: [0],\r\n});\r\ndataMap.dataQT = dataFormatter({  \r\n    201808: [50],\r\n    201809: [0],\r\n    201810: [0],\r\n    201811: [0],\r\n    201812: [0],\r\n});\r\noption = {\r\n    baseOption: {\r\n        timeline: {\r\n            axisType: 'category',\r\n                   // realtime: false,\r\n                   // loop: false,\r\n                  autoPlay: false,\r\n                   // currentIndex: 2,\r\n                  playInterval: 1000,\r\n                   // controlStyle: {\r\n                   //     position: 'left'\r\n                   // },\r\n                  data: ['8月', '9月', '10月', '11月', '12月'],\r\n        },\r\n            title: [{\r\n            text: \"迁转省份目标\",\r\n            subtext: '800万户',\r\n            left: 'center',\r\n            top: '15%',\r\n            padding: [24, 0],\r\n            textStyle: {\r\n\r\n                fontSize: 18 * 1,\r\n                align: 'center'\r\n            }\r\n        }],\r\n        calculable: true,\r\n        grid: {\r\n            top: '50%',\r\n            bottom: 80,\r\n            containLabel: true\r\n        },\r\n\t\t\t tooltip: {\r\n\t\t\ttrigger: 'axis',\r\n\t\t\taxisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n\t\t\t\ttype: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n\t\t\t}\r\n\t\t},\r\n        xAxis: [\r\n        {\r\n            type: 'value',\r\n            boundaryGap: [0, 0.01],\r\n            axisLabel: {\r\n                //\tformatter: '{value}%',\r\n                textStyle: {\r\n                    //color: '#fff',  \r\n                    fontWeight: '80'\r\n                }\r\n            }\r\n\r\n                  \r\n        }],\r\n        yAxis: [{\r\n            'type': 'category',\r\n            'data': ['广东', '河南', '河北', '陕西', '广西', '其他']      \r\n        }],\r\n        series: [{\r\n            name: '生产量',\r\n            type: 'bar'\r\n        },{\r\n            name: '生产量占比',\r\n            type: 'pie',\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'outside',\r\n                    formatter: '{b} : {c} ({d}%)'\r\n\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        fontSize: '15',\r\n                        fontWeight: 'normal'\r\n                    }\r\n                }\r\n            },\r\n            radius: ['30%', '40%'],\r\n            center: ['50%', '25%'],\r\n\r\n                  \r\n        }    ]  \r\n    },\r\n      options: [    {       // title: {text: '1998年能源生产量与结构'},\r\n              \r\n        series: [        {\r\n            data: dataMap.data['201808']\r\n        },          {\r\n            data: [          {\r\n                name: '广东',\r\n                value: dataMap.dataGD['201808sum']\r\n            },            {\r\n                name: '河南',\r\n                value: dataMap.dataHN['201808sum']\r\n            },            {\r\n                name: '河北',\r\n                value: dataMap.dataHB['201808sum']\r\n            },            {\r\n                name: '陕西',\r\n                value: dataMap.dataSX['201808sum']\r\n            },            {\r\n                name: '广西',\r\n                value: dataMap.dataGX['201808sum']\r\n            },            {\r\n                name: '其他',\r\n                value: dataMap.dataQT['201808sum']\r\n            }        ]\r\n        }      ]    \r\n    },      {         \r\n        series: [        {\r\n            data: dataMap.data['201809']\r\n        },          {\r\n            data: [          {\r\n                name: '广东',\r\n                value: dataMap.dataGD['201809sum']\r\n            },            {\r\n                name: '河南',\r\n                value: dataMap.dataHN['201809sum']\r\n            },            {\r\n                name: '河北',\r\n                value: dataMap.dataHB['201809sum']\r\n            },            {\r\n                name: '陕西',\r\n                value: dataMap.dataSX['201809sum']\r\n            },            {\r\n                name: '广西',\r\n                value: dataMap.dataGX['201809sum']\r\n            },            {\r\n                name: '其他',\r\n                value: dataMap.dataQT['201809sum']\r\n            }        ]\r\n        }      ]    \r\n    },      {          \r\n        series: [        {\r\n            data: dataMap.data['201810']\r\n        },          {\r\n            data: [          {\r\n                name: '广东',\r\n                value: dataMap.dataGD['201810sum']\r\n            },            {\r\n                name: '河南',\r\n                value: dataMap.dataHN['201810sum']\r\n            },            {\r\n                name: '河北',\r\n                value: dataMap.dataHB['201810sum']\r\n            },            {\r\n                name: '陕西',\r\n                value: dataMap.dataSX['201810sum']\r\n            },            {\r\n                name: '广西',\r\n                value: dataMap.dataGX['201810sum']\r\n            },            {\r\n                name: '其他',\r\n                value: dataMap.dataQT['201810sum']\r\n            }        ]\r\n        }      ]    \r\n    },      {        \r\n        series: [        {\r\n            data: dataMap.data['201811']\r\n        },          {\r\n            data: [          {\r\n                name: '广东',\r\n                value: dataMap.dataGD['201811sum']\r\n            },            {\r\n                name: '河南',\r\n                value: dataMap.dataHN['201811sum']\r\n            },            {\r\n                name: '河北',\r\n                value: dataMap.dataHB['201811sum']\r\n            },            {\r\n                name: '陕西',\r\n                value: dataMap.dataSX['201811sum']\r\n            },            {\r\n                name: '广西',\r\n                value: dataMap.dataGX['201811sum']\r\n            },            {\r\n                name: '其他',\r\n                value: dataMap.dataQT['201811sum']\r\n            }        ]\r\n        }      ]    \r\n    },      {           \r\n        series: [        {\r\n            data: dataMap.data['201812']\r\n        },          {\r\n            data: [          {\r\n                name: '广东',\r\n                value: dataMap.dataGD['201812sum']\r\n            },            {\r\n                name: '河南',\r\n                value: dataMap.dataHN['201812sum']\r\n            },            {\r\n                name: '河北',\r\n                value: dataMap.dataHB['201812sum']\r\n            },            {\r\n                name: '陕西',\r\n                value: dataMap.dataSX['201812sum']\r\n            },            {\r\n                name: '广西',\r\n                value: dataMap.dataGX['201812sum']\r\n            },            {\r\n                name: '其他',\r\n                value: dataMap.dataQT['201812sum']\r\n            }        ]\r\n        }      ]    \r\n    },   ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-3225273598","theme":"","layout":"","viewCount":570,"userName":"冷***_","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSJnXOtfD7.png?v=1535445193180","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-pie","timeline","title","tooltip"],"customTags":[],"updaterUserName":"冷***_"}}