{"status":0,"data":{"cid":"xhuMLCp1eR","authorUid":"obd-o2Tg3Z0qgyf-YlCelI7haSC5h1hZeB4","authorUserName":"老***具","title":"可以根据值变色的仪表盘","description":"根据社区的作品基础上改的.\n在社区找了很久找不到可以根据值变色的模版.于是用环柱图试着改了下 .希望能提供帮助","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-03T07:41:34.000Z","lastUpdateTime":"2021-06-03T07:41:34.000Z","auth":2,"uid":"obd-o2Tg3Z0qgyf-YlCelI7haSC5h1hZeB4","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-03T07:41:34.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\nlet value = 55.33;\noption = {\n    backgroundColor: '',\n    title: {\n        text: '{a|' + '噪声' + '\\n\\n}' + '{c|' + value + '}',\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            rich: {\n                a: {\n                    fontSize: 16,\n                    color: '#3DABFF',\n                },\n                c: {\n                    fontSize: 20,\n                    color: 'black',\n                    // padding: [5,0]\n                },\n            },\n        },\n    },\n    angleAxis: {\n        show: false,\n    },\n    radiusAxis: {\n        type: 'category',\n        show: false,\n        data: [0, 0, 0, '周四'],\n    },\n    polar: {},\n\n    series: [\n        {\n            name: '',\n            type: 'gauge',\n            radius: '78%',\n            center: ['50%', '50%'],\n            startAngle: 0,\n            endAngle: 359.9,\n            zlevel: 1,\n            splitNumber: 8,\n            hoverAnimation: true,\n            axisTick: {\n                show: false,\n            },\n            splitLine: {\n                length: '21%',\n                lineStyle: {\n                    width: 2,\n                    color: '#0B1234',\n                },\n            },\n            axisLabel: {\n                show: false,\n            },\n            pointer: {\n                show: false,\n            },\n            axisLine: {\n                lineStyle: {\n                    opacity: 0,\n                },\n            },\n            detail: {\n                show: false,\n            },\n            data: [\n                {\n                    value: 0,\n                    name: '',\n                },\n            ],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.82,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((90 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.82,\n                        startAngle: ((180 + angle) * Math.PI) / 180,\n                        endAngle: ((270 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n\n        {\n            type: 'bar',\n            data: [0, 0, 0, value],\n            coordinateSystem: 'polar',\n            stack: 'a',\n            itemStyle: {\n                normal: {\n                    //这里是重点\n                    color: function (params) {\n                        if (params.value > 0 && params.value <= 50) {\n                            return 'red';\n                        } else return 'green';\n                    },\n                },\n            },\n        },\n        {\n            type: 'bar',\n            data: [0, 0, 0, 100 - value],\n            coordinateSystem: 'polar',\n            stack: 'a',\n        },\n    ],\n};\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\n\nsetInterval(function () {\n    angle = angle + 3;\n    myChart.setOption(option, true);\n}, 100);\n","html":"","externalScripts":"","updaterUID":"obd-o2Tg3Z0qgyf-YlCelI7haSC5h1hZeB4","theme":"","layout":"","viewCount":0,"userName":"老***具","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhuMLCp1eR.png?v=1622706094423","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-custom","series-gauge","title"],"customTags":["gauge变色"],"updaterUserName":"老***具"}}