{"status":0,"data":{"cid":"xo4Tgp6nD3","authorUid":"bd-4286708132","authorUserName":"L***h","title":"结合图","description":"项目需要---记录","latestVersion":3,"alwaysLatest":0,"createTime":"2021-06-15T06:31:39.000Z","lastUpdateTime":"2021-06-30T02:01:36.000Z","auth":2,"uid":"bd-4286708132","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-30T02:01:36.000Z","code":"var data = [\n        [20, 30, 40, 20],\n        [20, 30, 40, 20],\n        [20, 30, 40, 20],\n    ],\n    legendData = ['实际质量损失率', '质量损失率目标', '实际质量损失额'],\n    xAxisData = ['本部', '子公司', '中车成都', '中车广东'],\n    colorArr = ['#3082FF', '#E0F0FF', '#FEAF1B'],\n    barWidth = '40%';\nvar seriesData = [];\nvar toalData = [];\nvar html = 'aa';\nvar yAxisName = '';\nvar yAxisData = [\n    {\n        name: yAxisName,\n        nameTextStyle: {\n            color: '#4B525E',\n            fontSize: 12,\n            fontFamily: 'PingFang',\n        },\n        type: 'value',\n        axisLabel: {\n            //坐标轴刻度标签的相关设置。\n            interval: 0, //设置为 1，表示『隔一个标签显示一个标签』\n            textStyle: {\n                color: '#4B525E',\n                fontStyle: 'normal',\n                fontFamily: 'PingFang',\n                fontSize: 12,\n            },\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#E6EAF3',\n            },\n        },\n        splitLine: {\n            show: false,\n        },\n    },\n];\nlegendData.forEach((item, i) => {\n    if (html == 'aa') {\n        yAxisData[0].name = '%';\n        gridTop = '27%';\n        yAxisData.push({\n            name: '万元',\n            nameTextStyle: {\n                color: '#4B525E',\n                fontSize: 12,\n                fontFamily: 'PingFang',\n            },\n            type: 'value',\n            axisLabel: {\n                //坐标轴刻度标签的相关设置。\n                interval: 0, //设置为 1，表示『隔一个标签显示一个标签』\n                textStyle: {\n                    color: '#4B525E',\n                    fontStyle: 'normal',\n                    fontFamily: 'PingFang',\n                    fontSize: 12,\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#E6EAF3',\n                },\n            },\n            splitLine: {\n                show: false,\n            },\n        });\n        legend = {\n            width: 8,\n            height: 8,\n            itemGap: 6,\n            padding: [10, 8],\n            fontSize: 12,\n        };\n        if (i < 2) {\n            seriesData.push({\n                name: legendData[i],\n                type: 'bar',\n                stack: '总量',\n                barWidth: barWidth,\n                data: data[i],\n            });\n        } else {\n            seriesData.push({\n                name: legendData[i],\n              yAxisIndex: 1,\n                type: 'line',\n                symbolSize: 10,\n                symbol: 'circle',\n                lineStyle: {\n                    normal: {\n                        color: colorArr[i],\n                        width: 2,\n                        shadowBlur: 3,\n                        shadowColor: 'rgba(0,0,0,0.2)',\n                        shadowOffsetY: 10,\n                    },\n                },\n                data: data[i],\n            });\n        }\n    } else {\n        seriesData.push({\n            name: legendData[i],\n            type: 'bar',\n            stack: '总量',\n            barWidth: barWidth,\n            data: data[i],\n        });\n    }\n});\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n        },\n        formatter: function (obj) {\n            if (html == 'aa') {\n                var str = '';\n                var total = 0;\n                str = obj[0].name + '月<br />';\n                obj.map((item, i) => {\n                    if (item.seriesName == '实际质量损失率') {\n                        if (i == 0) {\n                            let subStr = item.marker + item.seriesName + '：' + item.value + '%' + '<br />';\n                            str += subStr;\n                        }\n                        total += Number(item.value);\n                    }\n                    if (item.seriesName == '实际质量损失额') {\n                        let subStr = item.marker + item.seriesName + '：' + item.value + '万元' + '<br />';\n                        str += subStr;\n                    }\n                    if (item.seriesName == '质量损失率目标') {\n                        total += Number(item.value);\n                        str += item.marker + item.seriesName + ':' + total + '%' + '<br />';\n                    }\n                });\n                return str;\n            } else {\n                var str = '';\n                var total = 0;\n                str = obj[0].name + '<br />';\n                obj.map((item) => {\n                    let subStr = item.marker + item.seriesName + '：' + item.value + '人' + '<br />';\n                    str += subStr;\n                    total += parseInt(item.value);\n                });\n                str += '总人数：' + total + '人';\n                return str;\n            }\n        },\n    },\n    legend: {\n        itemWidth: 10,\n        itemHeight: 10,\n        padding: [10, 20],\n        backgroundColor: '#F9F9F9',\n        borderRadius: 20,\n        // 大小 和位置 文字样式\n        itemGap: 8,\n        x: 'center',\n        top: 10,\n        textStyle: {\n            fontSize: 12,\n            color: '#5D6C8E',\n            fontFamily: 'PingFang',\n        },\n        data: legendData,\n    },\n    color: colorArr,\n    grid: {\n        left: '3%',\n        right: '4%',\n        top: '24%',\n        bottom: '3%',\n        containLabel: true,\n    },\n    xAxis: [\n        {\n            type: 'category',\n            axisLine: {\n                lineStyle: {\n                    color: '#E6EAF3',\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                //坐标轴刻度标签的相关设置。\n                interval: 0, //设置为 1，表示『隔一个标签显示一个标签』\n                margin: 15,\n                textStyle: {\n                    color: '#4B525E',\n                    fontStyle: 'normal',\n                    fontFamily: 'PingFang',\n                    fontSize: 12,\n                },\n            },\n            data: xAxisData,\n        },\n    ],\n    yAxis:yAxisData,\n    series: seriesData,\n};\n","html":"","externalScripts":"","updaterUID":"bd-4286708132","theme":"","layout":"","viewCount":0,"userName":"L***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xo4Tgp6nD3.png?v=1625018496757","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"L***h"}}