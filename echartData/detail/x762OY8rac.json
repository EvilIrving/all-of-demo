{"status":0,"data":{"cid":"x762OY8rac","authorUid":"bd-2248245480","authorUserName":"x***8","title":"自定义legend、默认选中, 高亮选中legend","description":"legend点击绑定样式突出显示","latestVersion":4,"alwaysLatest":0,"createTime":"2021-10-14T15:15:22.000Z","lastUpdateTime":"2021-10-14T16:12:17.000Z","auth":2,"uid":"bd-2248245480","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-14T16:12:17.000Z","code":"var color = ['#0CD2E6', '#3751E6', '#FFC722', '#886EFF', '#008DEC', '#114C90', '#00BFA5'];\n\nvar title = '自定义legend、默认选中';\nvar legend = ['A需求类型', 'B需求类型', 'C需求类型', 'D需求类型', 'E需求类型', '其他'];\n\nvar seriesData = [\n    { name: 'A需求类型', value: 30, selected: true },\n    { name: 'B需求类型', value: 10, selected: false },\n    { name: 'C需求类型', value: 15, selected: false },\n    { name: 'D需求类型', value: 23, selected: false },\n    { name: 'E需求类型', value: 10, selected: false },\n    { name: '其他', value: 12, selected: false },\n];\n\nvar option = {\n    backgroundColor: 'pink',\n    color: color,\n    title: {\n        top: 20,\n        text: title,\n        textStyle: {\n            fontSize: 20,\n            color: '#DDEEFF',\n        },\n    },\n    grid: {\n        top: '15%',\n        left: 0,\n        right: '1%',\n        bottom: 5,\n        containLabel: true,\n    },\n    legend: {\n        orient: 'vertical',\n        top: 'center',\n        right: 50,\n        textStyle: {\n            align: 'left',\n            verticalAlign: 'middle',\n            rich: {\n                name: {\n                    color: 'red',\n                    fontSize: 10,\n                },\n                value: {\n                    color: 'red',\n                    fontSize: 10,\n                },\n                rate: {\n                    color: 'red',\n                    fontSize: 10,\n                },\n                gray: {\n                    color: 'rgba(114,114,114, 0.39)',\n                },\n            },\n        },\n        formatter: (name) => {\n            if (seriesData.length) {\n                const item = seriesData.filter((item) => item.name === name)[0];\n\n                if (!item.selected) {\n                    return `{gray|${name}：}{gray| ${item.value}} {gray| ${item.value}%}`;\n                } else {\n                    return `{name|${name}：}{value| ${item.value}} {rate| ${item.value}%}`;\n                }\n            }\n        },\n        data: legend,\n    },\n    series: [\n        {\n            name: '需求类型占比',\n            type: 'pie',\n            center: ['50%', '50%'],\n            radius: ['45%', '65%'],\n            legendHoverLink: false, // 禁用legend的hover\n            label: {\n                normal: {\n                    show: false,\n                    position: 'center',\n                    formatter: '{value|{c}}\\n{label|{b}}',\n                    rich: {\n                        value: {\n                            padding: 5,\n                            align: 'center',\n                            verticalAlign: 'middle',\n                            fontSize: 32,\n                        },\n                        label: {\n                            align: 'center',\n                            verticalAlign: 'middle',\n                            fontSize: 16,\n                        },\n                    },\n                },\n                emphasis: {\n                    show: true,\n                    textStyle: {\n                        fontSize: '12',\n                    },\n                },\n            },\n            labelLine: {\n                show: false,\n                length: 0,\n                length2: 0,\n            },\n            emphasis: {\n                scale: true,\n                scaleSize: 30,\n                itemStyle: {\n                    borderColor: 'pink',\n                    borderWidth: 20,\n                },\n            },\n            data: seriesData,\n        },\n    ],\n};\n\nmyChart.setOption(option);\ngetDefaultSelected(myChart);\n\nfunction getDefaultSelected(myChart) {\n    let index = 0;\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: 0,\n    });\n\n    myChart.on('legendselectchanged', function (params) {\n        console.log(params.name);\n        for (var i = 0; i < seriesData.length; i++) {\n            seriesData[i].selected = false;\n            myChart.dispatchAction({\n                type: 'downplay',\n                seriesIndex: 0,\n                dataIndex: i,\n            });\n        }\n        const idx = seriesData.findIndex((el) => el.name == params.name);\n        if (idx !== -1) {\n            console.log('下标', seriesData);\n            seriesData[idx].selected = true;\n        }\n\n        myChart.setOption({\n            legend: { selected: { [params.name]: true } },\n        });\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: idx,\n        });\n    });\n}\n","html":"","externalScripts":"","updaterUID":"bd-2248245480","theme":"","layout":"","viewCount":0,"userName":"x***8","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x762OY8rac.png?v=1634227937198","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title"],"customTags":[],"updaterUserName":"x***8"}}