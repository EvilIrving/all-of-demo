{"status":0,"data":{"cid":"xZ_Y5bxnM-","authorUid":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","authorUserName":"y***i","title":"双向柱状图","description":"双向柱状图","latestVersion":3,"alwaysLatest":1,"createTime":"2020-07-11T10:06:32.000Z","lastUpdateTime":"2020-07-11T10:06:32.000Z","auth":2,"uid":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-26T23:14:28.000Z","code":"/*\n双向柱状图\nwx:yangtaoxf\n\n参考以下文章和作品，感谢相关作者\nhttps://gallery.echartsjs.com/editor.html?c=xL00juR_Rr&v=1\n*/\n\nlet data = {\n    female: {\n        name: '女性',\n        data: [{\n            value: 22,\n            weight: 30,\n            label: '小于1岁'\n        }, {\n            value: 23,\n            weight: 30,\n            label: '1 ～ 9 岁'\n        }, {\n            value: 4,\n            weight: 30,\n            label: '10 ～ 19 岁'\n        }, {\n            value: 56,\n            weight: 30,\n            label: '20 ～ 29 岁'\n        }, {\n            value: 32,\n            weight: 30,\n            label: '30 ～ 39 岁'\n        }, {\n            value: 5,\n            weight: 30,\n            label: '40 ～ 49 岁'\n        }, {\n            value: 9,\n            weight: 30,\n            label: '50 ～ 59 岁'\n        }, {\n            value: 48,\n            weight: 30,\n            label: '大于60岁'\n        }]\n    },\n    male: {\n        name: '男性',\n        data: [{\n            value: 5,\n            weight: 30,\n            label: '小于1岁'\n        }, {\n            value: 19,\n            weight: 30,\n            label: '1 ～ 9 岁'\n        }, {\n            value: 23,\n            weight: 30,\n            label: '10 ～ 19 岁'\n        }, {\n            value: 43,\n            weight: 30,\n            label: '20 ～ 29 岁'\n        }, {\n            value: 34,\n            weight: 30,\n            label: '30 ～ 39 岁'\n        }, {\n            value: 53,\n            weight: 30,\n            label: '40 ～ 49 岁'\n        }, {\n            value: 12,\n            weight: 30,\n            label: '50 ～ 59 岁'\n        }, {\n            value: 34,\n            weight: 30,\n            label: '大于60岁'\n        }]\n    }\n};\nlet yAxisData = new Set();\nlet yAxisDataN = new Set();\nlet yAxisDataV = new Set();\nlet legendData = [];\n_.forEach(data, (d) => {\n    legendData.push(d.name);\n    _.forEach(d.data, (item) => {\n\n        if (d.name == '男性') {\n            yAxisDataN.add(item.label);\n        }\n        if (d.name == '女性') {\n            yAxisDataV.add(item.label);\n        }\n        // yAxisData.add(item.label);\n    });\n});\n\nlet top = 60;\nlet bottom = 60;\n\nyAxisData = [...yAxisData];\nyAxisDataN = [...yAxisDataN];\nyAxisDataV = [...yAxisDataV];\n\noption = {\n    tooltip: {\n        show: true,\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow'\n        }\n    },\n    legend: {\n        \"icon\": \"none\",\n        left: 'center',\n        top: 24,\n        orient: \"horizontal\",\n        itemWidth: 0, //图例标记的图形宽度\n        itemHeight: 0, //图例标记的图形高度\n        y: ' center',\n        borderRadius: 0,\n\n        formatter: (name) => {\n            if (name == data.female.name) {\n\n                return '{a|' + name + '}'\n            } else {\n                return '{b|' + name + '}'\n            }\n        },\n        textStyle: {\n            rich: {\n                a: {\n                    padding: [8, 15, 8, 15],\n                    align: 'center',\n                    backgroundColor: \"#238bf2\",\n\n                },\n                b: {\n                    padding: [8, 15, 8, 15],\n                    align: 'center',\n                    backgroundColor: \"#f9c807\"\n                }\n            }\n        },\n        data: legendData\n    },\n    grid: [{\n        left: '12%',\n        width: '34%',\n        containLabel: true,\n        bottom\n    }, {\n        left: '50%',\n        width: '0%',\n        top: top + 16\n    }, {\n        right: '12%',\n        width: '34%',\n        containLabel: true,\n        bottom\n    }].map(item => _.merge({\n        top\n    }, item)),\n    xAxis: [{\n        type: 'value',\n        inverse: true,\n        axisLabel: {\n            show: true\n        },\n        axisLine: {\n            show: true\n        },\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: true\n        }\n    }, {\n        gridIndex: 1,\n        show: false\n    }, {\n        gridIndex: 2,\n        type: 'value',\n        axisLabel: {\n            show: true\n        },\n        axisLine: {\n            show: true\n        },\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: true\n        }\n    }].map((item) => _.merge(item, {\n        axisLabel: {\n            color: '#949AA8',\n            margin: 8\n        },\n        splitLine: {\n            lineStyle: {\n                color: '#E0E0E0',\n                type: 'dashed'\n            }\n        },\n    })),\n    yAxis: [{\n\n            position: 'right',\n            axisLabel: {\n                color: '#262C41',\n                show: true\n            },\n\n\n            axisLine: {\n                show: false\n            },\n            type: 'category',\n            inverse: false,\n\n            axisTick: {\n                show: false\n            },\n            data: yAxisDataN\n        },\n        {\n            gridIndex: 1,\n            position: 'center',\n            type: 'category',\n            axisLabel: {\n                show: false\n\n            },\n            axisLine: {\n                show: true\n            }\n        },\n        {\n            gridIndex: 2,\n            position: 'left',\n            axisLabel: {\n\n                color: `#262C41`\n            },\n            axisLine: {\n                show: false\n            },\n            type: 'category',\n            inverse: false,\n\n            axisTick: {\n                show: false\n            },\n            data: yAxisDataV\n        }\n    ],\n    series: [{\n            name: _.get(data, 'female.name'),\n            label: {\n                color: '#767676',\n                position: 'left'\n            },\n            itemStyle: {\n                color: '#238bf2',\n                barBorderRadius: [4, 0, 0, 4]\n            },\n            data: _.map(_.get(data, 'female.data'), d => d.value)\n        },\n        {\n            name: _.get(data, 'female.name'),\n            label: {\n                color: '#767676',\n                position: 'left'\n            },\n            itemStyle: {\n                color: '#a0d0ff',\n                barBorderRadius: [4, 0, 0, 4]\n            },\n            data: _.map(_.get(data, 'female.data'), d => d.weight)\n        },\n\n        {\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            name: _.get(data, 'male.name'),\n            label: {\n                color: '#767676',\n                position: 'right'\n            },\n            itemStyle: {\n                color: '#f9c807',\n                barBorderRadius: [0, 4, 4, 0]\n            },\n            data: _.map(_.get(data, 'male.data'), d => d.value)\n        },\n        {\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            name: _.get(data, 'male.name'),\n            label: {\n                color: '#9c9c9c',\n                position: 'right'\n            },\n            itemStyle: {\n                color: '#ffeea9',\n                barBorderRadius: [0, 4, 4, 0]\n            },\n            data: _.map(_.get(data, 'male.data'), d => d.weight)\n        }\n    ].map(item => _.merge(item, {\n        type: 'bar',\n        barWidth: 11,\n        label: {\n            show: true,\n            fontFamily: 'Rubik-Medium',\n            fontSize: 14,\n            distance: 10\n        }\n    }))\n};","html":"","externalScripts":"https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.15/lodash.js","updaterUID":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","theme":"","layout":"","viewCount":14316,"userName":"y***i","commentCount":5,"starCount":62,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZ_Y5bxnM-.png?v=1595805269156","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"y***i"}}