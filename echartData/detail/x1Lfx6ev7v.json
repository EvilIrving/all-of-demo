{"status":0,"data":{"cid":"x1Lfx6ev7v","authorUid":"bd-1933118133","authorUserName":"J***航","title":"深层水平位移","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-08-22T02:53:54.000Z","lastUpdateTime":"2019-08-22T02:53:54.000Z","auth":2,"uid":"bd-1933118133","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-22T02:58:17.000Z","code":"var data_array=\t[\r\n\t\t\t\t {\"2019/8/12 08:00:00\":[{\"x1\":14,\"y1\":10,\"x2\":25,\"y2\":22},{\"x1\":17,\"y1\":29,\"x2\":25,\"y2\":42},\r\n\t\t\t\t {\"x1\":27,\"y1\":9,\"x2\":5,\"y2\":2},{\"x1\":15,\"y1\":29,\"x2\":5,\"y2\":2},{\"x1\":7,\"y1\":21,\"x2\":25,\"y2\":2},\r\n\t\t\t\t {\"x1\":37,\"y1\":19,\"x2\":15,\"y2\":12},{\"x1\":27,\"y1\":22,\"x2\":15,\"y2\":42},{\"x1\":27,\"y1\":22,\"x2\":25,\"y2\":12},\r\n\t\t\t\t {\"x1\":47,\"y1\":29,\"x2\":25,\"y2\":22},{\"x1\":27,\"y1\":21,\"x2\":25,\"y2\":21},{\"x1\":37,\"y1\":23,\"x2\":45,\"y2\":32},\r\n\t\t\t\t {\"x1\":7,\"y1\":39,\"x2\":25,\"y2\":32},{\"x1\":13,\"y1\":20,\"x2\":35,\"y2\":20},{\"x1\":47,\"y1\":24,\"x2\":35,\"y2\":22},\r\n\t\t\t\t {\"x1\":13,\"y1\":49,\"x2\":35,\"y2\":2},{\"x1\":15,\"y1\":25,\"x2\":45,\"y2\":19}]}\r\n\t\t\t\t];\r\n\r\n//当前选中的时间\r\nvar current_check_time = \"\";\r\n\r\n//X轴显示的数据\r\nvar x_rate_data = [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30];\r\n\r\n// 总时间数组\r\nvar timeData = [];\r\n\r\n//总配置项数组\r\nvar data_option = [];\r\n\r\nfor (var i = 0; i < data_array.length; i++) {\r\n\t\tvar single_x1_data = [];\r\n\t\tvar single_x2_data = [];\r\n\t\tvar single_y1_data = [];\r\n\t\tvar single_y2_data = [];\r\n\t\tvar json_data = data_array[i];\r\n\t\t//获取所有的时间\r\n\t\tfor (var key in json_data) {\r\n\t\t\ttimeData.push(key);\r\n\t\t\tvar singleData = json_data[key];\r\n\t\t\tfor (var j = 0; j < singleData.length; j++) {\r\n\t\t\t\tsingle_x1_data.push(singleData[j].x1);\r\n\t\t\t\tsingle_y1_data.push(singleData[j].y1);\r\n\t\t\t\tsingle_x2_data.push(singleData[j].x2);\r\n\t\t\t\tsingle_y2_data.push(singleData[j].y2)\r\n\t\t\t}\r\n\t\t\tdata_option.push(setSingleOption(single_x1_data, single_y1_data,single_x2_data,single_y2_data));\r\n\t\t}\r\n}\r\n\r\ntimeData = timeData.map(function(str) {\r\n\treturn str.replace('2019/', '');\r\n});\r\n\r\n//当前选中时间\r\nvar current_check_time = timeData[timeData.length - 1];\r\n\r\n\r\nvar option={\r\n\t\tbaseOption: {\r\n\t\t\ttimeline: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 36,\r\n\t\t\t\tright: 36,\r\n\t\t\t\tlineStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\tlabel: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\ttype: 'slider',\r\n\t\t\t\taxisType: 'category',\r\n\t\t\t\tcurrentIndex: data_array.length - 1,\r\n\t\t\t\tloop: false,\r\n\t\t\t\tsymbol: 'circle',\r\n\t\t\t\tsymbolSize: 10,\r\n\t\t\t\tdata: timeData,\r\n\t\t\t\tcontrolStyle: {\r\n\t\t\t\t\tshowPlayBtn: false,\r\n\t\t\t\t\titemSize: 12,\r\n\t\t\t\t\tcolor: '#000000',\r\n\t\t\t\t\tborderColor: '#000000'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\toptions: data_option\r\n\t\r\n};\r\n\r\nfunction drawChecekedCharts(dom){\r\n\t// 基于准备好的dom，初始化echarts实例\r\n\tvar myChart = echarts.init(document.getElementById(dom));\r\n\tmyChart.setOption(option);\r\n}\r\n\r\n\r\n\r\nfunction setSingleOption(single_x1_data, single_y1_data,single_x2_data,single_y2_data) {\r\n\t// 单个配置项\r\n\tvar singleOption = {\r\n\t\ttitle: {\r\n\t\t\ttext: '深层水平位移',\r\n\t\t\tx: 'center',\r\n\t\t\ttextStyle: {\r\n\t\t\t\tcolor: '#000000'\r\n\t\t\t}\r\n\t\t},\r\n\t\ttooltip: {\r\n\t\t\ttrigger: 'axis',\r\n\t\t\tformatter: function(params, ticket, callback) {\r\n\t\t\t\tvar htmlStr = '';\r\n\t\t\t\t\tvar zhtml=\"\";\r\n\t\t\t\t\tvar xhtml=\"\";\r\n\t\t\t\tfor (var i = 0; i < params.length; i++) {\r\n\t\t\t\t\tvar param = params[i];\r\n\t\t\t\t\tvar xName = param.name; //x轴的名称\r\n\t\t\t\t\tvar seriesName = param.seriesName; //图例名称\r\n\t\t\t\t\tvar value = param.value; //y轴值\r\n\t\t\t\t\tvar color = param.color; //图例颜色\r\n\t\t\t\t\t\r\n\t\t\t\t\txName = \"当前深度:\" + xName + \"米\";\r\n\t\t\t\t\tif (i === 0) {\r\n\t\t\t\t\t\t//htmlStr += current_check_time + '<br/>'; //当前选中时间\r\n\t\t\t\t\t\thtmlStr += xName + '<br/>'; // 当前深度\r\n\t\t\t\t\t\thtmlStr += current_check_time + '<br/>'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t  \r\n\t\t\t\t\tvar singleText= '<div>';\r\n\t\t\t\t\t    //为了保证和原来的效果一样，这里自己实现了一个点的效果\r\n\t\t\t\t    \tsingleText +=\r\n\t\t\t\t\t\t'<span style=\"margin-right:5px;display:inline-block;width:10px;height:10px;border-radius:5px;background-color:' +\r\n\t\t\t\t\t\tcolor + ';\"></span>';\r\n\t\t\t\t\t    //圆点后面显示的文本\r\n\t\t\t\t\t    singleText += seriesName + '：' + value;\r\n\t\t\t\t\t    singleText += '</div>';\r\n                    \r\n                    if(i%2==0){\r\n                        \r\n                        zhtml+=singleText;\r\n                        \tif(i==2){\r\n\t\t\t\t\t           zhtml += \"08/13 08:00:00\" + '<br/>'\r\n\t\t\t\t             }\r\n                    }else{\r\n                        xhtml+=singleText;\r\n                    }\r\n                 \r\n\t\t\t\t}\r\n\t\t\t\t htmlStr=htmlStr+zhtml+xhtml;\r\n\t\t\t\t\r\n\t\t\t\treturn htmlStr;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlegend: {\r\n\t\t\tdata: ['x_当前值', 'x_对比值','y_当前值','y_对比值'],\r\n\t\t    orient:'horizontal',\r\n\t\t    x:'center',\r\n\t\t    y:'top',\r\n\t\t    padding: 35   \r\n\t\t},\r\n\t\taxisPointer: {\r\n\t\t\tlink: {\r\n\t\t\t\txAxisIndex: 'all'\r\n\t\t\t}\r\n\t\t},\r\n\t\tgrid: [{\r\n\t\t\tleft: 50,\r\n\t\t\tright: 50,\r\n\t\t\theight: '30%'\r\n\t\t}, {\r\n\t\t\tleft: 50,\r\n\t\t\tright: 50,\r\n\t\t\ttop: '55%',\r\n\t\t\theight: '30%'\r\n\t\t}],\r\n\t\txAxis: [{\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tname: '深度(m)',\r\n\t\t\t\tnameGap: 5,\r\n\t\t\t\tnameTextStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\tboundaryGap: false,\r\n\t\t\t\taxisLine: {\r\n\t\t\t\t\tonZero: false,\r\n\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\ttype: 'solid',\r\n\t\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdata: x_rate_data\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tgridIndex: 1,\r\n\t\t\t\tname: '深度(m)',\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tnameGap: 5,\r\n\t\t\t\tnameTextStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\tboundaryGap: false,\r\n\t\t\t\taxisLine: {\r\n\t\t\t\t\tonZero: false,\r\n\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\ttype: 'solid',\r\n\t\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdata: x_rate_data\r\n\t\t\t}\r\n\t\t],\r\n\t\tyAxis: [{\r\n\t\t\t\tname: 'x_位移量(mm)',\r\n\t\t\t\tnameGap: 20,\r\n\t\t\t\tnameTextStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\ttype: 'value',\r\n\t\t\t\taxisLine: {\r\n\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tmax: 50,\r\n\t\t\t\tmin: -50\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tgridIndex: 1,\r\n\t\t\t\tnameGap: 30,\r\n\t\t\t\tname: 'y_位移量(mm)',\r\n\t\t\t\tnameTextStyle: {\r\n\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t},\r\n\t\t\t\ttype: 'value',\r\n\t\t\t\taxisLine: {\r\n\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\tcolor: '#000000'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tmax: 50,\r\n\t\t\t\tmin: -50,\r\n\t\t\t\tinverse: false\r\n\t\t\t}\r\n\t\t],\r\n\t\tseries: [{\r\n\t\t\t\tname: 'x_当前值',\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tsymbolSize: 8,\r\n\t\t\t\thoverAnimation: true,\r\n\t\t\t\tdata: single_x1_data,\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\tcolor: '#c23531',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'x_对比值',\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tsymbolSize: 8,\r\n\t\t\t\thoverAnimation: true,\r\n\t\t\t\tdata: single_x2_data,\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\tcolor: '#2f4554'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'y_当前值',\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\txAxisIndex: 1,\r\n\t\t\t\tyAxisIndex: 1,\r\n\t\t\t\tsymbolSize: 8,\r\n\t\t\t\thoverAnimation: true,\r\n\t\t\t\tdata: single_y1_data,\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\tcolor: '#61a0a8'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'y_对比值',\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\txAxisIndex: 1,\r\n\t\t\t\tyAxisIndex: 1,\r\n\t\t\t\tsymbolSize: 8,\r\n\t\t\t\thoverAnimation: true,\r\n\t\t\t\tdata: single_y2_data,\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\tlineStyle: {\r\n\t\t\t\t\t\t\tcolor: '#d48265'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\treturn singleOption;\r\n}","html":"","externalScripts":"","updaterUID":"bd-1933118133","theme":"","layout":"","viewCount":1564,"userName":"J***航","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1Lfx6ev7v.png?v=1566442697335","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","timeline","title","tooltip"],"customTags":[],"updaterUserName":"J***航"}}