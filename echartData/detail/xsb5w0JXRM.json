{"status":0,"data":{"cid":"xsb5w0JXRM","authorUid":"bd-4014751412","authorUserName":"s***尘","title":"杭州地域分布情况","description":"对各个地域的数据分布进行展示","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-21T09:34:45.000Z","lastUpdateTime":"2020-12-21T09:34:45.000Z","auth":2,"uid":"bd-4014751412","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-21T09:34:45.000Z","code":"var hzmap = \"/asset/get/s/data-1600654938067-ihlSWG_62.json\";\n\nvar yhmap = \"/asset/get/s/data-1600653263643-JkbhAV0A0.json\";\n\nvar xsmap = \"/asset/get/s/data-1600653259674-GTpBwKU4O.json\";\n\nvar xhmap = \"/asset/get/s/data-1600653255389-pxTPxjzUc.json\";\n\nvar xcmap = \"/asset/get/s/data-1600653251697-QvFmjFcKd.json\";\n\nvar tlmap = \"/asset/get/s/data-1600653248319-E3YPA5Tlm.json\";\n\nvar scmap = \"/asset/get/s/data-1600653244513-l3K2yAhTB.json\";\n\nvar lamap = \"/asset/get/s/data-1600653223414-5FrpixnXN.json\";\n\nvar jgmap = \"/asset/get/s/data-1600653218036-gjxivnBmR.json\";\n\nvar jdmap = \"/asset/get/s/data-1600653212836-Fys3xysTL.json\";\n\nvar gsmap = \"/asset/get/s/data-1600653207131-SD-0mAm2J.json\";\n\nvar fymap = \"/asset/get/s/data-1600653202961-133VfVqOm.json\";\n\nvar camap = \"/asset/get/s/data-1600653199148-QX4sdweja.json\";\n\nvar bjmap = \"/asset/get/s/data-1600653191497-Jb5ggdJc0.json\";\n\n\nvar mapname = hzmap\nvar mapJson = [{\n        name: \"滨江区\",\n        json: bjmap\n    },\n    {\n        name: \"淳安县\",\n        json: camap\n    },\n    {\n        name: \"富阳区\",\n        json: fymap\n    },\n    {\n        name: \"拱墅区\",\n        json: gsmap\n    },\n    {\n        name: \"建德市\",\n        json: jdmap\n    },\n    {\n        name: \"江干区\",\n        json: jgmap\n    },\n    {\n        name: \"临安区\",\n        json: lamap\n    },\n    {\n        name: \"上城区\",\n        json: scmap\n    },\n    {\n        name: \"桐庐县\",\n        json: tlmap\n    },\n    {\n        name: \"下城区\",\n        json: xcmap\n    },\n    {\n        name: \"西湖区\",\n        json: xhmap\n    },\n    {\n        name: \"萧山区\",\n        json: xsmap\n    },\n    {\n        name: \"余杭区\",\n        json: yhmap\n    }\n]\n\nvar mapDate = [{\n        name: '江干区',\n        value: [120.185, 30.274, 29999]\n    },\n    {\n        name: '拱墅区',\n        value: [120.182, 30.351, 29999]\n    },\n    {\n        name: '西湖区',\n        value: [120.091, 30.27, 29999]\n    },\n    {\n        name: '滨江区',\n        value: [120.21, 30.209, 29999]\n    },\n    {\n        name: '萧山区',\n        value: [120.254, 30.159, 29999]\n    },\n    {\n        name: '余杭区',\n        value: [120.295, 30.427, 29999]\n    },\n    {\n        name: '富阳区',\n        value: [119.956, 30.05, 29999]\n    },\n    {\n        name: '桐庐县',\n        value: [119.675, 29.784, 29999]\n    },\n    {\n        name: '淳安县',\n        value: [119.058, 29.613, 29999]\n    },\n    {\n        name: '建德市',\n        value: [119.28, 29.464, 29999]\n    },\n    {\n        name: '临安区',\n        value: [119.712, 30.227, 29999]\n    },\n    {\n        name: '钱塘新区',\n        value: [120.485, 30.284, 29999]\n    }\n];\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\nmyChart.showLoading();\nlet index = -1;\nvar timer = setInterval(function() {\n    // 隐藏提示框\n    myChart.dispatchAction({\n        type: 'hideTip',\n        seriesIndex: 0,\n        dataIndex: index\n    });\n    // 显示提示框\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: index + 1\n    });\n    // 取消高亮指定的数据图形\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: index\n    });\n    // 高亮指定的数据图形\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: index + 1\n    });\n    index++;\n    if (index > 13) {\n        index = -1;\n    }\n}, 2000);\n\n\nmyChart.on('mousemove', function(e) {\n    clearInterval(timer);\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0\n    });\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    });\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    });\n}); //---------------------------------------------鼠标移入静止播放\nmyChart.on('mouseout', function(e) {\n    clearInterval(timer);\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    }); //鼠标移出后先把上次的高亮取消\n    timer = setInterval(function() {\n        // 隐藏提示框\n        myChart.dispatchAction({\n            type: 'hideTip',\n            seriesIndex: 0,\n            dataIndex: index\n        });\n        // 显示提示框\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: index + 1\n        });\n        // 取消高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: index\n        });\n        // 高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: index + 1\n        });\n        index++;\n        if (index > 13) {\n            index = -1;\n        }\n    }, 2000);\n});\nmyChart.on('click', function(e) {\n    console.log(e)\n    var chooseName = mapJson.filter(item => {\n        return item.name == e.name\n    })\n    console.log(chooseName)\n    mapname = chooseName[0].json\n\n    console.log(mapname, '选择地图')\n\n    mapDate = []\n    $('<div class=\"back\">返回杭州市</div>').appendTo(\n        $('#chart-panel')\n    );\n\n    $('.back').css({\n        'position': 'absolute',\n        'left': '17px',\n        'top': '25px',\n        'color': 'rgb(222,222,222)',\n        'font-size': '15px',\n        cursor: 'pointer',\n        'z-index': '100'\n    })\n    $('.back').click(function() {\n        mapname = hzmap\n        mapDate = [{\n                name: '江干区',\n                value: [120.185, 30.274, 100]\n            },\n            {\n                name: '拱墅区',\n                value: [120.182, 30.351, 200]\n            },\n            {\n                name: '西湖区',\n                value: [120.091, 30.27, 29999]\n            },\n            {\n                name: '滨江区',\n                value: [120.21, 30.209, 29999]\n            },\n            {\n                name: '萧山区',\n                value: [120.254, 30.159, 29999]\n            },\n            {\n                name: '余杭区',\n                value: [120.295, 30.427, 29999]\n            },\n            {\n                name: '富阳区',\n                value: [119.956, 30.05, 29999]\n            },\n            {\n                name: '桐庐县',\n                value: [119.675, 29.784, 29999]\n            },\n            {\n                name: '淳安县',\n                value: [119.058, 29.613, 29999]\n            },\n            {\n                name: '建德市',\n                value: [119.28, 29.464, 29999]\n            },\n            {\n                name: '临安区',\n                value: [119.712, 30.227, 29999]\n            },\n            {\n                name: '钱塘新区',\n                value: [120.485, 30.284, 29999]\n            }\n        ];\n        $('.back').css({\n            'position': 'absolute',\n            'left': '17px',\n            'top': '-25px',\n            'color': 'rgb(222,222,222)',\n            'font-size': '15px',\n            cursor: 'pointer',\n            'z-index': '100'\n        })\n\n        mapInit()\n    })\n    mapInit()\n})\nsetTimeout(function() {\n    mapInit()\n}, 1000);\nvar mapInit = () => {\n    console.log('我来了', mapname)\n    $.getJSON(mapname, function(geoJson) {\n        echarts.registerMap('hanzhou', geoJson);\n        myChart.hideLoading();\n        option = {\n            backgroundColor: '#336699',\n            title: {\n                top: 20,\n                text: '杭州市',\n                subtext: '',\n                x: 'center',\n                textStyle: {\n                    color: '#ccc'\n                }\n            },\n\n            // tooltip: {\n            //     trigger: 'item',\n            //     formatter: function(params) {\n            //         console.log(params)\n            //             return params.name + ' : ' + params.value[2];\n            //     }\n            // },\n            visualMap: {\n                min: 0,\n                max: 1000000,\n                right: 100,\n                seriesIndex: 1,\n                type: 'piecewise',\n                bottom: 100,\n                textStyle: {\n                    color: '#FFFF'\n                },\n                splitList: [{\n                        gt: 50000,\n                        color: '#F5222D',\n                        label: '困难人数大于5万人'\n                    }, //大于5万人\n                    {\n                        gte: 30000,\n                        lte: 50000,\n                        color: '#FA541C ',\n                        label: '困难人数3-5万人'\n                    }, //3-5万人\n                    {\n                        gte: 10000,\n                        lte: 30000,\n                        color: '#FA8C16',\n                        label: '困难人数1-3万人'\n                    }, //1-3万人\n                    {\n                        lte: 10000,\n                        color: '#fbe1d6',\n                        label: '困难人数小于1万人'\n                    }\n                ]\n            },\n            geo: {\n                map: 'hanzhou',\n                aspectScale: 0.75, //长宽比\n                zoom: 1.1,\n                roam: false,\n                itemStyle: {\n                    normal: {\n                        //\n                        areaColor: '#013C62',\n                        shadowColor: '#000000',\n                        shadowOffsetX: 0,\n                        shadowOffsetY: 25\n                    },\n                    emphasis: {\n                        areaColor: '#2AB8FF',\n                        borderWidth: 0,\n                        color: 'green',\n                        label: {\n                            show: false\n                        }\n                    }\n                }\n            },\n            series: [{\n                    type: 'map',\n                    roam: true,\n                    label: {\n                        normal: {\n                            show: true,\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        },\n                        emphasis: {\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        }\n                    },\n\n                    itemStyle: {\n                        //地图颜色配置\n                        normal: {\n                            borderColor: \"rgba(147, 235, 248, 1)\",\n                            borderWidth: 1,\n                            areaColor: {\n                                type: \"radial\",\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [{\n                                        offset: 0,\n                                        color: \"rgba(147, 235, 248, 0)\", // 0% 处的颜色\n                                    },\n                                    {\n                                        offset: 1,\n                                        color: \"rgba(147, 235, 248, .2)\", // 100% 处的颜色\n                                    },\n                                ],\n                                globalCoord: false, // 缺省为 false\n                            },\n                            shadowColor: \"rgba(128, 217, 248, 1)\",\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10,\n                        },\n                        emphasis: {\n                            areaColor: \"#389BB7\", //选中地图颜色\n                            borderWidth: 0,\n                        },\n                    },\n                    zoom: 1.1,\n                    roam: false,\n                    map: 'hanzhou' //使用\n                    // data: this.difficultData //热力图数据   不同区域 不同的底色\n                },\n                {\n                    type: 'effectScatter',\n                    coordinateSystem: 'geo',\n                    showEffectOn: 'render',\n                    rippleEffect: {\n                        period: 15,\n                        scale: 4,\n                        brushType: 'fill'\n                    },\n                    hoverAnimation: true,\n                    itemStyle: {\n                        normal: {\n                            color: '#ffff',\n                            shadowBlur: 10,\n                            shadowColor: '#333'\n                        }\n                    },\n                    data: mapDate\n                }\n\n            ]\n        };\n        myChart.setOption(option);\n    });\n}","html":"","externalScripts":"","updaterUID":"bd-4014751412","theme":"","layout":"","viewCount":81,"userName":"s***尘","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xsb5w0JXRM.png?v=1608543285864","isCustomThumbnail":0,"builtinTags":["category-work","geo","graphic","series-effectScatter"],"customTags":[],"updaterUserName":"s***尘"}}