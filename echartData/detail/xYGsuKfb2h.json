{"status":0,"data":{"cid":"xYGsuKfb2h","authorUid":"bd-1638105085","authorUserName":"1***m","title":"利差图","description":"利差图","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-06T10:05:27.000Z","lastUpdateTime":"2019-08-06T10:05:27.000Z","auth":2,"uid":"bd-1638105085","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-06T10:05:27.000Z","code":"// 导入json数据\nvar uploadedDataURL = \"/asset/get/s/data-1565084062534--7WUBrRFR.json\";\n$.getJSON(uploadedDataURL, function(geoJson) {\n    // 数据\n    let data = geoJson.rows\n    console.log(data)\n    // 设置右轴格式\n    let obj = {\n        name: '利差(右轴)',\n        type: 'line',\n        yAxisIndex: 1,\n        smooth: true,\n        symbol: 'none',\n        sampling: 'average',\n        itemStyle: {\n            color: 'transparent'\n        },\n        areaStyle: {\n            origin: 'auto',\n            color: {\n                type: 'linear',\n                x: 0,\n                y: 0,\n                x2: 0,\n                y2: 1,\n                colorStops: [{\n                    offset: 0,\n                    color: '#d3d1d1' // 0% 处的颜色\n                }, {\n                    offset: 1,\n                    color: '#d3d1d1' // 100% 处的颜色\n                }],\n                globalCoord: false // 缺省为 false\n            }\n        }\n    }\n    let inx = null\n    let curve = null\n    let lineColor = ['#EEDD78', '#9FE6B8', 'rgb(184,198,223)', 'rgb(254,187,187)', 'rgb(241,231,103) ', 'rgb(137,137,186)', 'rgb(135,224,253)', '#414141']\n    // 获取特定值下标\n    for (let i = 0; i < data.Dimensions.length; i++) {\n        if (data.Dimensions[i].indexOf('利差') > -1) {\n            inx = i - 1\n            data.Dimensions[i] = '利差'\n            data.Series[inx] = obj\n        }\n        if (data.Dimensions[i].indexOf('YY评级') === -1 && data.Dimensions[i].indexOf('product') === -1 && data.Dimensions[i].indexOf('利差') === -1 && data.Dimensions[i].indexOf('成交') === -1) {\n            curve = i\n        }\n    }\n    // 设置series\n    for (let k = 0; k < curve - 1; k++) {\n        data.Series[k].itemStyle = {\n            'color': lineColor[k]\n        }\n    }\n    // 搜索项线条红色突出\n    data.Series[curve - 1].itemStyle = {\n        'color': '#C23531'\n    }\n    // Dimensions多product日期项\n    // 设置散点图\n    if (data.Dot) {\n        let scatter = {\n            type: 'scatter',\n            name: '成交',\n            symbolSize: 10,\n            itemStyle: {\n                color: '#003057'\n            },\n            data: data.Dot\n        }\n        data.Series[data.Series.length - 1] = scatter\n    } else {\n        data.Series[data.Series.length - 1] = {\n            type: 'scatter',\n            name: '成交',\n            symbolSize: 10,\n            itemStyle: {\n                color: '#ccc'\n            }\n        }\n    }\n\n    option = {\n        title: {\n            text: '利差图',\n        },\n        legend: {\n            show: true,\n            type: 'plain',\n            bottom: 50,\n            orient: 'horizontal',\n            width: '70%'\n        },\n        grid: {\n            bottom: 120\n        },\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                type: 'cross'\n            }\n        },\n        toolbox: {\n            show: true,\n            feature: {\n                dataView: {\n                    show: false,\n                    readOnly: false\n                },\n                restore: {\n                    show: true\n                },\n                saveAsImage: {\n                    show: true,\n                    name: '',\n                    excludeComponents: ['dataZoom', 'toolbox'],\n                    pixelRatio: 2\n                }\n            }\n        },\n        dataZoom: [{\n            type: 'slider',\n            show: true,\n            xAxisIndex: [0],\n            start: 0,\n            end: 100,\n            bottom: 5\n        }],\n        xAxis: {\n            type: 'category',\n            scale: true,\n            axisPointer: {\n                show: true\n            }\n        },\n        yAxis: [{\n                type: 'value',\n                name: 'YTM(%)',\n                scale: true,\n                position: 'left',\n                axisLabel: {\n                    formatter: '{value}'\n                }\n            },\n            {\n                type: 'value',\n                name: '利差(BP)',\n                position: 'right',\n                axisLabel: {\n                    formatter: '{value}'\n                }\n            }\n        ],\n        dataset: {\n            dimensions: data.Dimensions,\n            source: data.Source\n        },\n        series: data.Series\n    }\n    myChart.setOption(option, true)\n})","html":"","externalScripts":"","updaterUID":"bd-1638105085","theme":"","layout":"","viewCount":85,"userName":"1***m","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYGsuKfb2h.png?v=1565085927448","isCustomThumbnail":0,"builtinTags":["category-work","dataset","dataZoom","grid","legend","series-line","series-scatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"1***m"}}