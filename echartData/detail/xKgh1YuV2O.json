{"status":0,"data":{"cid":"xKgh1YuV2O","authorUid":"bd-142485545","authorUserName":"梦***殇","title":"饼状图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-17T03:10:03.000Z","lastUpdateTime":"2021-12-17T03:10:03.000Z","auth":2,"uid":"bd-142485545","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-17T03:10:03.000Z","code":"const colors = ['#3c90ff', '#fff225', '#00aaff', '#33ffbb', '#ffec8c', '#ff9c3c', '#657aff', '#ffffff', '#ffab66', '#7cff33']\nconst series = [\n    { name: '制造', value: 134 },\n    { name: '餐饮', value: 0 },\n    { name: '房地产', value: 4 },\n    { name: '批发零售', value: 16 },\n    { name: '医疗卫生', value: 210 },\n    { name: '文化体育和娱乐', value: 5 },\n    { name: '金融', value: 12 },\n    { name: '国家行政机构', value: 130 },\n    { name: '科学研究', value: 230 },\n    { name: '社会团体', value: 58 }\n]\nconst centerX = '40%'\nconst angle = 0\n\nfunction total() {\n    let count = 0\n    series.forEach(o => {\n        count += o.value\n    })\n    return count\n}\n\nfunction getCirlPoint(x0, y0, r, angle) {\n    //获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180)\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180)\n    return {\n        x: x1,\n        y: y1\n    }\n}\n\nfunction _pie1() {\n    let data = []\n    series.forEach((o, i) => {\n        o.itemStyle = {\n            normal: {\n                borderWidth: 1,\n                shadowBlur: 20,\n                borderRadius: 20,\n                borderColor: colors[i],\n                shadowColor: colors[i]\n            }\n        }\n        data.push(o, {\n            value: total / 50,\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false\n                    },\n                    labelLine: {\n                        show: false\n                    },\n                    color: 'rgba(0, 0, 0, 0)',\n                    borderColor: 'rgba(0, 0, 0, 0)',\n                    borderWidth: 0\n                }\n            }\n        })\n    })\n    return data\n}\n\noption = {\n    backgroundColor: '#0E1327',\n    fontSize: 16,\n    tooltip: {\n        trigger: 'item',\n        textStyle: {\n            color: '#fff'\n        },\n        backgroundColor: 'rgba(16, 32, 40, 0.88)',\n        borderRadius: 4,\n        borderColor: '#20749e',\n        formatter: params => {\n            return params.marker + params.name + ': ' + params.value\n        }\n    },\n    color: colors,\n    legend: [\n        {\n            orient: 'vertical',\n            right: '0%',\n            itemGap: 20,\n            itemWidth: 14,\n            itemHeight: 14,\n            top: 'center',\n            textStyle: {\n                color: '#fff'\n            },\n            data: series.slice(Math.floor(series.length / 2), series.length)\n        },\n        {\n            orient: 'vertical',\n            right: '15%',\n            itemGap: 20,\n            itemWidth: 14,\n            itemHeight: 14,\n            top: 'center',\n            textStyle: {\n                color: '#fff'\n            },\n            data: series.slice(0, Math.ceil(series.length / 2))\n        }\n    ],\n    series: [\n        {\n            name: '',\n            type: 'pie',\n            clockWise: false,\n            radius: ['60%', '70%'],\n            center: [centerX, '50%'],\n            hoverAnimation: false,\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false\n                    }\n                }\n            },\n            data: _pie1()\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: (params, api) => {\n                return {\n                    type: 'arc',\n                    shape: {\n                        // cx: api.getWidth() / 2,\n                        cx: centerX,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.45,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((360 + angle) * Math.PI) / 180\n                    },\n                    style: {\n                        stroke: {\n                            type: 'linear',\n                            x: 1,\n                            y: 0.5,\n                            x2: 0,\n                            y2: 1,\n                            colorStops: [\n                                {\n                                    offset: 0,\n                                    color: 'transparent' // 0% 处的颜色\n                                },\n                                {\n                                    offset: 0.6,\n                                    color: '#00eaff' // 100% 处的颜色\n                                }\n                            ]\n                        },\n                        fill: 'transparent',\n                        lineWidth: 1\n                    },\n                    // style: api.style(),\n                    silent: true\n                }\n            },\n            data: [0]\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: (params, api) => {\n                // let x0 = api.getWidth() / 2\n                let x0 = centerX\n                let y0 = api.getHeight() / 2\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.45\n                let point = getCirlPoint(x0, y0, r, -95 + angle)\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 2.5\n                    },\n                    style: {\n                        stroke: '#00eaff', //绿\n                        fill: '#00eaff'\n                    },\n                    silent: true\n                }\n            },\n            data: [0]\n        }\n    ]\n};\n","html":"","externalScripts":"","updaterUID":"bd-142485545","theme":"","layout":"","viewCount":0,"userName":"梦***殇","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKgh1YuV2O.png?v=1639710603754","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie","tooltip"],"customTags":[],"updaterUserName":"梦***殇"}}