{"status":0,"data":{"cid":"x2AEZfczI4","authorUid":"bd-156132975","authorUserName":"坏***羯","title":"折线图-饼图数据联动","description":"折线图-饼图数据联动\n数据集属性dataset使用","latestVersion":7,"alwaysLatest":0,"createTime":"2021-08-12T06:57:14.000Z","lastUpdateTime":"2021-08-25T01:52:04.000Z","auth":1,"uid":"bd-156132975","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-25T01:52:04.000Z","code":"option = {\n    color: ['#00c6c4', '#ff9c00', '#1b85FF', '#ff1b1b', '#7a32ff'],\n    backgroundColor:\"#313033\",\n    title: {\n        text: '',\n    },\n    tooltip: {\n        //提示框组件\n        backgroundColor: 'rgba(73, 84, 123, .9)',\n        borderColor: 'rgba(73, 84, 123, .9)',\n        padding: 10,\n        textStyle: {\n            color: '#fff',\n        },\n        formatter: function (params, ticket, callback) {\n            if (!Array.isArray(params)) {\n                // 非数组,是一个对象\n                // 单个图表为饼图数据\n                const { data, name, marker, percent, dimensionNames } = params;\n                let index = params.encode.value[0];\n                return name + '<br />' + marker + ' ' + dimensionNames[index] + ':' + data[index] + `(${percent}%)`;\n            }\n            let showHtm = ``;\n            for (let i = 0; i < params.length; i++) {\n                const { data, marker, seriesName } = params[i];\n\n                let value = data[params[i].encode.y[0]];\n                showHtm += marker + ' ' + seriesName + ':' + value + '<br>';\n            }\n            showHtm = params[0].axisValue + '<br>' + showHtm;\n            return showHtm;\n        },\n    },\n    legend: {\n        //图例组件\n        x: 'center',\n        bottom: '25',\n        right: '200',\n        itemGap: 20,\n        itemWidth: 8,\n        itemHeight: 8,\n        icon: 'circle',\n        textStyle: {\n            color: '#fff', //字体颜色\n        },\n        tooltip:{\n            show:true,\n        }\n    },\n    grid: [\n        {\n            left: '40',\n            top: '50',\n            bottom: '10',\n            height: 210,\n            width: '90%',\n            containLabel: true,\n            tooltip: {\n                trigger: 'axis',\n            },\n        },\n        {\n            top: '300',\n            bottom: '10',\n            height: 210,\n            width: '90%',\n            containLabel: true,\n            tooltip: {\n                trigger: 'item',\n                formatter: 'hello',\n            },\n        },\n    ],\n    xAxis: {\n        //X轴\n        type: 'category',\n        boundaryGap: false,\n        axisLabel: {\n            //坐标轴刻度标签\n            textStyle: {\n                color: '#ABB0CC',\n            },\n        },\n        axisLine: {\n            //x轴\n            show: true,\n            lineStyle: {\n                color: 'rgba(230, 230, 230, 0.18)',\n            },\n        },\n        axisTick: {\n            //x轴刻度线\n            show: false,\n        },\n    },\n    yAxis: {\n        type: 'value',\n        axisLabel: {\n            textStyle: {\n                color: '#ABB0CC',\n            },\n            formatter: '{value}',\n        },\n        nameTextStyle: {\n            color: '#93A6BB',\n        },\n        splitLine: {\n            //网格线\n            show: true,\n            lineStyle: {\n                type: 'dashed',\n                color: 'rgba(230, 230, 230, 0.18)',\n            },\n        },\n        axisLine: {\n            //y轴\n            show: false,\n            lineStyle: {\n                color: '#ABB0CC',\n            },\n        },\n        axisTick: {\n            //y轴刻度线\n            show: false,\n        },\n    },\n    dataset: {\n        sourceHeader: true,\n        source: [\n            [\n                'metrics',\n                '00:00',\n                '01:00',\n                '02:00',\n                '03:00',\n                '04:00',\n                '05:00',\n                '06:00',\n                '07:00',\n                '08:00',\n                '09:00',\n                '10:00',\n                '11:00',\n                '12:00',\n            ],\n            ['交调数据', 56, 123, 34, 68, 130, 45, 67, 190, 31, 80, 211, 234, 78],\n            ['Link数据', 156, 223, 134, 38, 30, 34, 68, 130, 45, 67, 190, 256, 300],\n            ['交通数据流', 96, 63, 134, 168, 400, 230, 223, 134, 38, 30, 34, 68, 341],\n            ['气象', 456, 223, 234, 268, 30, 63, 134, 168, 400, 230, 223, 134, 38],\n        ],\n    },\n    series: [\n        {\n            name: '交调数据',\n            type: 'line',\n            smooth: true,\n            seriesLayoutBy: 'row',\n        },\n        {\n            name: 'Link数据',\n            type: 'line',\n            smooth: true,\n            seriesLayoutBy: 'row',\n        },\n        {\n            name: '交通数据流',\n            type: 'line',\n            smooth: true,\n            seriesLayoutBy: 'row',\n        },\n        {\n            name: '气象',\n            type: 'line',\n            smooth: true,\n            seriesLayoutBy: 'row',\n        },\n        {\n            type: 'pie',\n            id: 'pie-chart',\n            radius: ['20%', '40%'],\n            center: ['50%', '65%'],\n            label: {\n                show: true,\n                formatter: '{b}\\n {@00:00} ({d})',\n            },\n            labelLine: {\n                show: true,\n            },\n            encode: {\n                itemName: 'metrics',\n                value: '00:00',\n            },\n        },\n    ],\n};\nmyChart.on('updateAxisPointer', function (event) {\n    var xAxisInfo = event.axesInfo[0];\n    if (xAxisInfo) {\n        var dimension = xAxisInfo.value + 1;\n        myChart.setOption({\n            series: {\n                id: 'pie-chart',\n                encode: {\n                    value: dimension,\n                    tooltip: dimension,\n                },\n                label: {\n                    formatter: '{b}: {@[' + dimension + ']} ({d}%)',\n                },\n            },\n        });\n    }\n});\n","html":"","externalScripts":"","updaterUID":"bd-156132975","theme":"default","layout":"","viewCount":0,"userName":"坏***羯","commentCount":1,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x2AEZfczI4.png?v=1629856324975","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","legend","series-line","series-pie","title","tooltip"],"customTags":["formatter"],"updaterUserName":"坏***羯"}}