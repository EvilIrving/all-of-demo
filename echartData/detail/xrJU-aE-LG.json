{"status":0,"data":{"cid":"xrJU-aE-LG","authorUid":"bd-3323870131","authorUserName":"秋***飞","title":"区域投票统计","description":"气泡是对应的参与人数\n参考：江西绿色金融（本来想用闭包实现，接口数据配置，但是没时间了）\n马上要毕业了，所以没回来回复你们，不好意思了！","latestVersion":94,"alwaysLatest":1,"createTime":"2018-02-02T01:21:01.000Z","lastUpdateTime":"2018-08-15T02:39:34.000Z","auth":1,"uid":"bd-3323870131","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":94,"parentVersion":93,"echartsVersion":"3.8.0","versionCreateTime":"2020-07-16T04:12:27.000Z","code":" var nameColor = \" rgb(255, 215, 0)\"\r\n var name_fontFamily = '宋体'\r\n var name_fontSize = 35\r\n var mapName = 'china'\r\n var data = [\r\n     {\r\n         name: \"陕西\",\r\n         value: 145\r\n     },\r\n     {\r\n         name: \"甘肃\",\r\n         value: 66\r\n     },\r\n     {\r\n         name: \"青海\",\r\n         value: 24\r\n     },\r\n    \r\n     {\r\n         name: \"宁夏回族自治区\",\r\n         value: 1\r\n     },\r\n     {\r\n         name: \"新疆\",\r\n         value: 10006\r\n     },\r\n    \r\n ];\r\n var geoCoordMap = {};\r\n //  var toolTipData = [];\r\n\r\n\r\n /*获取地图数据*/\r\n var mapFeatures = echarts.getMap(mapName).geoJson.features;\r\n //  console.log(mapFeatures)\r\n mapFeatures.forEach(function(v) {\r\n     console.info(v)\r\n     // 地区名称\r\n     var name = v.properties.name;\r\n     // 地区经纬度\r\n     geoCoordMap[name] = v.properties.cp;\r\n    \r\n });\r\n var max = 480,\r\n     min = 9; // todo \r\n var maxSize4Pin = 150,\r\n     minSize4Pin = 20;\r\n\r\n var convertData = function(data) {\r\n     var res = [];\r\n     for (var i = 0; i < data.length; i++) {\r\n         var geoCoord = geoCoordMap[data[i].name];\r\n         if (geoCoord) {\r\n             res.push({\r\n                 name: data[i].name,\r\n                 value: geoCoord.concat(data[i].value),\r\n             });\r\n         }\r\n     }\r\n     return res;\r\n };\r\n option = {\r\n     tooltip: {\r\n         trigger: 'item',\r\n         formatter: function(params) {\r\n             // console.log(params)\r\n             if (typeof(params.value)[2] == \"undefined\") {\r\n                 return params.name + ' : ' + params.value;\r\n             } else {\r\n                 return params.name + ' : ' + params.value[2];\r\n             }\r\n         }\r\n     },\r\n   \r\n     legend: {\r\n         orient: 'vertical',\r\n         y: 'bottom',\r\n         x: 'right',\r\n         data: ['credit_pm2.5'],\r\n         textStyle: {\r\n             color: '#fff'\r\n         }\r\n     },\r\n     visualMap: {\r\n         show: true,\r\n         min: 0,\r\n         max: 500,\r\n         left: 'left',\r\n         top: 'bottom',\r\n         text: ['高', '低'], // 文本，默认为数值文本\r\n         calculable: true,\r\n         seriesIndex: [1],\r\n         inRange: {\r\n             // color: ['#3B5077', '#031525'] // 蓝黑\r\n             //   color: ['#ffc0cb', '#800080'] // 红紫\r\n             // color: ['#3C3B3F', '#605C3C'] // 黑绿\r\n             //   color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\r\n             // color: ['#23074d', '#cc5333'] // 紫红\r\n              color: ['#00467F', '#A5CC82'] // 蓝绿\r\n             //   color: ['#1488CC', '#2B32B2'] // 浅蓝\r\n            //  color: ['#00467F', '#A5CC82', '#ffc0cb'] // 蓝绿红\r\n             // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n             // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n             // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n\r\n         }\r\n     },\r\n   \r\n     geo: {\r\n         show: true,\r\n         map: mapName,\r\n         label: {\r\n             normal: {\r\n                 show: false\r\n             },\r\n             emphasis: {\r\n                 show: false,\r\n             }\r\n         },\r\n         roam: true,\r\n         itemStyle: {\r\n             normal: {\r\n                 areaColor: '#031525',\r\n                 borderColor: '#097bba',\r\n             },\r\n             emphasis: {\r\n                 areaColor: 'red',\r\n             }\r\n         }\r\n     },\r\n     series: [\r\n         //散点\r\n         {\r\n             name: '散点',\r\n             type: 'effectScatter',\r\n             coordinateSystem: 'geo',\r\n             data: convertData(data),\r\n             symbolSize: function(val) {\r\n                 return 10;\r\n             },\r\n             label: {\r\n                 normal: {\r\n                     formatter: '{b}',\r\n                     position: 'right',\r\n                     show: true\r\n                 },\r\n                 emphasis: {\r\n                     show: true\r\n                 }\r\n             },\r\n             itemStyle: {\r\n                 normal: {\r\n                     color: '#05C3F9'\r\n                 }\r\n             }\r\n         },\r\n         //区域颜色\r\n         {\r\n             type: 'map',\r\n             map: mapName,\r\n             geoIndex: 0,\r\n             aspectScale: 0.75, //长宽比\r\n             showLegendSymbol: false, // 存在legend时显示\r\n             label: {\r\n                 normal: {\r\n                     show: false\r\n                 },\r\n                 emphasis: {\r\n                     show: false,\r\n                     textStyle: {\r\n                         color: '#fff'\r\n                     }\r\n                 }\r\n             },\r\n             roam: true,\r\n             itemStyle: {\r\n                 normal: {\r\n                     areaColor: '#031525',\r\n                     borderColor: '#3B5077',\r\n                 },\r\n                 emphasis: {\r\n                     areaColor: '#2B91B7'\r\n                 }\r\n             },\r\n             animation: false,\r\n             data: data\r\n         },\r\n         \r\n         {\r\n             name: 'Top 5',\r\n             type: 'effectScatter',\r\n             coordinateSystem: 'geo',\r\n             data: convertData(data.sort(function(a, b) {\r\n                 return b.value - a.value;\r\n             }).slice(0, 5)),\r\n             symbolSize: function(val) {\r\n                 return 20;\r\n             },\r\n             showEffectOn: 'render',\r\n             rippleEffect: {\r\n                 brushType: 'stroke'\r\n             },\r\n             hoverAnimation: true,\r\n             label: {\r\n                 normal: {\r\n                     formatter: '{b}',\r\n                     position: 'right',\r\n                     show: false //bug：设置为true造成top5的省份名称重影\r\n                 }\r\n             },\r\n             itemStyle: {\r\n                 normal: {\r\n                     color: 'blue',\r\n                     shadowBlur: 10,\r\n                     shadowColor: 'black'\r\n                 }\r\n             },\r\n             zlevel: 1\r\n         },\r\n\r\n     ]\r\n };\r\n //  myChart.setOption(option);\r\n //取代传统设置，加入自动适应屏幕代码\r\n myChart.setOption(option);\r\n //假设实例的名字是myChart,在echats配置完实例以后,配置下面几行代码即可\r\n window.onresize = function() {\r\n     myChart.resize();\r\n }","html":"","externalScripts":"/dep/echarts/map/js/china.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/latest/extension/bmap.min.js,https://echarts.baidu.com/resource/echarts-liquidfill-latest/dist/echarts-liquidfill.min.js,https://cdn.rawgit.com/ecomfe/echarts-wordcloud/833ed011/dist/echarts-wordcloud.min.js,https://echarts.baidu.com/resource/echarts-stat-latest/dist/ecStat.min.js,/dep/echarts/latest/extension/dataTool.min.js,https://cdn.bootcss.com/PapaParse/4.1.2/papaparse.min.js,/dep/echarts/map/js/world.js","updaterUID":"obd-ojDzHcS_d_wvJNCIIhOWZi9S4PryMEu","theme":"dark","layout":"","viewCount":29046,"userName":"秋***飞","commentCount":18,"starCount":36,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJU-aE-LG.png?v=1594872747806","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"y***h"}}