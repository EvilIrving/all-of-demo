{"status":0,"data":{"cid":"xYxOb5cFFN","authorUid":"obd-o2Wg3sUhFg6rAJijOPUL1l4Hn5OgFBB","authorUserName":"可***2","title":"速运地区作战地图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-10T02:42:39.000Z","lastUpdateTime":"2020-09-10T02:42:39.000Z","auth":2,"uid":"obd-o2Wg3sUhFg6rAJijOPUL1l4Hn5OgFBB","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-10T02:55:20.000Z","code":"/**\r\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\r\n\r\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\r\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\r\n\r\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\r\n\r\n并且加了pin气泡图标以示数值大小\r\n*/\r\n\r\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\nmyChart.showLoading();\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('china', geoJson);\r\n    myChart.hideLoading();\r\n    var geoCoordMap = {\r\n    \"台湾\": [121.5135,25.0308],\r\n    \"黑龙江\": [127.9688, 45.368],\r\n    \"内蒙古\": [110.3467, 41.4899],\r\n    \"吉林\": [125.8154, 44.2584],\r\n    \"北京\": [116.4551, 40.2539],\r\n    \"辽宁\": [123.1238, 42.1216],\r\n    \"河北\": [114.4995, 38.1006],\r\n    \"天津\": [117.4219, 39.4189],\r\n    \"山西\": [112.3352, 37.9413],\r\n    \"陕西\": [109.1162, 34.2004],\r\n    \"甘肃\": [103.5901, 36.3043],\r\n    \"宁夏\": [106.3586, 38.1775],\r\n    \"新疆\": [87.9236, 43.5883],\r\n    \"四川\": [103.9526, 30.7617],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"安徽\": [117.29, 32.0581],\r\n    \"湖北\": [114.3896, 30.6628],\r\n    \"江西\": [116.0046, 28.6633],\r\n    \"湖南\": [113.0823, 28.2568],\r\n    \"贵州\": [106.6992, 26.7682],\r\n    \"云南\": [102.9199, 25.4663],\r\n    \"广西\": [108.479, 23.1152],\r\n    \"海南\": [110.3893, 19.8516],\r\n    \"上海\": [121.4648, 31.2891],\r\n    \"深圳\": [114.035986,22.619675],\r\n    \"广州\": [113.266255,23.144907],\r\n    \"嘉兴\": [120.763549,30.780763],\r\n    \"苏州\": [120.601036,31.320348],\r\n    \"东莞\": [113.749219,23.052849],\r\n    \"鲁东\": [120.380259,36.100227],\r\n    \"无锡\": [120.343303,31.577105],\r\n    \"香港\": [114.192449,22.303751],\r\n    \"宁波\": [121.626245,29.888116],\r\n    \"沈阳\": [123.489492,41.684261],\r\n    \"鲁中\": [118.058005,36.831102],\r\n    \"粤西\": [110.335658,21.271874],\r\n    \"冀北\": [118.168641,39.656586],\r\n    \"常州\": [119.972285,31.831995],\r\n    \"济南\": [117.090179,36.678323],\r\n    \"苏北\": [117.257804,34.230815],\r\n    \"南京\": [118.805871,32.048984],\r\n    \"厦门\": [118.047567,24.532228],\r\n    \"佛山\": [113.125059,23.041594],\r\n    \"南通\": [120.955058,32.036517],\r\n    \"温州\": [120.682333,28.00823],\r\n    \"福州\": [119.330491,26.096524],\r\n    \"金华\": [119.656891,29.078074],\r\n    \"大连\": [121.532516,38.953529],\r\n    \"惠州\": [114.439083,23.141883],\r\n    \"台州\": [121.387763,28.632269],\r\n    \"潮州\": [116.653459,23.405795],\r\n\r\n    };\r\n\r\n   var data =[ \r\n    {name:\"上海\",value:[1971,799]},\r\n    {name:\"深圳\",value:[2540,725]},\r\n    {name:\"广州\",value:[3537,727]},\r\n    {name:\"嘉兴\",value:[1373,587]},\r\n    {name:\"北京\",value:[2435,824]},\r\n    {name:\"苏州\",value:[1382,316]},\r\n    {name:\"东莞\",value:[3708,331]},\r\n    {name:\"安徽\",value:[1349,378]},\r\n    {name:\"河南\",value:[218,616]},\r\n    {name:\"鲁东\",value:[1017,335]},\r\n    {name:\"无锡\",value:[970,194]},\r\n    {name:\"香港\",value:[0,4]},\r\n    {name:\"湖北\",value:[807,427]},\r\n    {name:\"四川\",value:[686,243]},\r\n    {name:\"冀州\",value:[1420,387]},\r\n    {name:\"宁波\",value:[523,199]},\r\n    {name:\"重庆\",value:[796,298]},\r\n    {name:\"沈阳\",value:[85,129]},\r\n    {name:\"鲁中\",value:[914,278]},\r\n    {name:\"湖南\",value:[908,425]},\r\n    {name:\"粤西\",value:[2083,401]},\r\n    {name:\"冀北\",value:[1010,297]},\r\n    {name:\"常州\",value:[749,174]},\r\n    {name:\"台湾\",value:[0,3]},\r\n    {name:\"济南\",value:[1083,340]},\r\n    {name:\"苏北\",value:[562,142]},\r\n    {name:\"南京\",value:[427,236]},\r\n    {name:\"天津\",value:[643,223]},\r\n    {name:\"厦门\",value:[174,199]},\r\n    {name:\"佛山\",value:[2162,304]},\r\n    {name:\"江西\",value:[925,286]},\r\n    {name:\"南通\",value:[602,140]},\r\n    {name:\"温州\",value:[457,163]},\r\n    {name:\"福州\",value:[105,208]},\r\n    {name:\"金华\",value:[610,164]},\r\n    {name:\"大连\",value:[34,129]},\r\n    {name:\"陕西\",value:[751,331]},\r\n    {name:\"山西\",value:[710,241]},\r\n    {name:\"泉州\",value:[103,165]},\r\n    {name:\"广西\",value:[600,153]},\r\n    {name:\"惠州\",value:[1304,196]},\r\n    {name:\"贵州\",value:[563,157]},\r\n    {name:\"台州\",value:[451,97]},\r\n    {name:\"甘肃\",value:[63,206]},\r\n    {name:\"黑龙江\",value:[77,255]},\r\n    {name:\"吉林\",value:[44,172]},\r\n    {name:\"新疆\",value:[31,107]},\r\n    {name:\"云南\",value:[960,178]},\r\n    {name:\"内蒙古\",value:[679,169]},\r\n    {name:\"潮汕\",value:[938,179]},\r\n    {name:\"宁夏\",value:[25,58]},\r\n    {name:\"海南\",value:[71,37]},\r\n];\r\n\r\nvar dataTip = {\r\n    \"上海\":[7988713,1971],\r\n    \"深圳\":[7252604,2540],\r\n    \"广州\":[7267976,3537],\r\n    \"浙北\":[5870774,1373],\r\n    \"北京\":[8240406,2435],\r\n    \"苏州\":[3164278,1382],\r\n    \"东莞\":[3312126,3708],\r\n    \"安徽\":[3782236,1349],\r\n    \"河南\":[6164066,218],\r\n    \"鲁东\":[3347209,1017],\r\n    \"无锡\":[1938866,970],\r\n    \"香港\":[35306,0],\r\n    \"湖北\":[4269545,807],\r\n    \"四川\":[2427909,686],\r\n    \"冀州\":[3867576,1420],\r\n    \"宁波\":[1986092,523],\r\n    \"重庆\":[2978449,796],\r\n    \"沈阳\":[1292797,85],\r\n    \"鲁中\":[2782450,914],\r\n    \"湖南\":[4252522,908],\r\n    \"粤西\":[4011188,2083],\r\n    \"冀北\":[2965387,1010],\r\n    \"常州\":[1735810,749],\r\n    \"台湾\":[25570,0],\r\n    \"济南\":[3401604,1083],\r\n    \"苏北\":[1423497,562],\r\n    \"南京\":[2359532,427],\r\n    \"天津\":[2234460,643],\r\n    \"厦门\":[1988165,174],\r\n    \"佛山\":[3036984,2162],\r\n    \"江西\":[2859500,925],\r\n    \"南通\":[1401500,602],\r\n    \"温州\":[1634925,457],\r\n    \"福州\":[2084626,105],\r\n    \"金华\":[1643294,610],\r\n    \"大连\":[1293140,34],\r\n    \"陕西\":[3305041,751],\r\n    \"山西\":[2412463,710],\r\n    \"泉州\":[1645996,103],\r\n    \"广西\":[1533481,600],\r\n    \"惠州\":[1956598,1304],\r\n    \"贵州\":[1568481,563],\r\n    \"台州\":[967488,451],\r\n    \"甘肃\":[2063628,63],\r\n    \"黑龙江\":[2550171,77],\r\n    \"吉林\":[1715446,44],\r\n    \"新疆\":[1072841,31],\r\n    \"云南\":[1775509,960],\r\n    \"内蒙古\":[1688287,679],\r\n    \"潮汕\":[1787795,938],\r\n    \"宁夏\":[583539,25],\r\n    \"海南\":[374579,71],\r\n    }\r\n    var max = 480, min = 9; // todo\r\n    var maxSize4Pin = 100, minSize4Pin = 20;\r\n\r\n    var convertData = function (data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(Math.round(data[i].value[0]),data[i].value[1])\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n    };\r\n\r\n\r\n\r\n    option = {\r\n        backgroundColor: {\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 1,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0, color: '#0f378f' // 0% 处的颜色\r\n        }, {\r\n            offset: 1, color: '#00091a' // 100% 处的颜色\r\n        }],\r\n        globalCoord: false // 缺省为 false\r\n    },\r\n        title: {\r\n            top:20,\r\n            text: '速运地区作战地图',\r\n            subtext: '',\r\n            x: 'center',\r\n            textStyle: {\r\n                color: '#ccc'\r\n            }\r\n        },\r\n\r\n       tooltip: {\r\n            trigger: 'item',\r\n            formatter: function (params) {\r\n              if(typeof(params.value)[2] == \"undefined\"){\r\n               return params.name + ' : ' + params.value;\r\n              }else{\r\n               return params.name + '总客户数:' + Math.round(dataTip[params.name][0]/10000) + '万 服务客户数:' + dataTip[params.name][1] +\r\n               ' 渗透率:' +  (dataTip[params.name][1]*100/dataTip[params.name][0]).toFixed(3) + '%';\r\n              }\r\n            }\r\n        },\r\n     /*   legend: {\r\n            orient: 'vertical',\r\n            y: 'bottom',\r\n            x: 'right',\r\n             data:['pm2.5'],\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },*/\r\n            legend: {\r\n        orient: 'vertical',\r\n        y: 'bottom',\r\n        x:'right',\r\n        data:['pm2.5'],\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n        visualMap: {\r\n            show: false,\r\n            min: 0,\r\n            max: 500,\r\n            left: 'left',\r\n            top: 'bottom',\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            calculable: true,\r\n            seriesIndex: [1],\r\n            inRange: {\r\n\r\n            }\r\n        },\r\n        geo: {\r\n            map: 'china',\r\n            show: true,\r\n            roam: true,\r\n            label: {\r\n    normal: {\r\n     show: false\r\n    },\r\n    emphasis: {\r\n     show: false,\r\n    }\r\n   },\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#3a7fd5',\r\n                    borderColor: '#0a53e9',//线\r\n                    shadowColor: '#092f8f',//外发光\r\n                    shadowBlur: 20\r\n                },\r\n     emphasis: {\r\n                    areaColor: '#0a2dae',//悬浮区背景\r\n                }\r\n            }\r\n        },\r\n        series : [\r\n      {\r\n\r\n            symbolSize: 5,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#fff'\r\n                }\r\n            },\r\n            name: 'light',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n\r\n        },\r\n         {\r\n            type: 'map',\r\n            map: 'china',\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#FFFFFF',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n        {\r\n            name: 'Top 5',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            symbol: 'pin',\r\n            symbolSize: [50,50],\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 9,\r\n                    },\r\n                    formatter (value){\r\n                        return value.data.value[2]\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#D2BB93', //标志颜色\r\n                }\r\n            },\r\n            data: convertData(data),\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            zlevel: 1\r\n        },\r\n\r\n    ]\r\n    };\r\n    myChart.setOption(option);\r\n});\r\n\r\n","html":"","externalScripts":"","updaterUID":"obd-o2Wg3sUhFg6rAJijOPUL1l4Hn5OgFBB","theme":"","layout":"","viewCount":617,"userName":"可***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYxOb5cFFN.png?v=1599706520472","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"可***2"}}