{"status":0,"data":{"cid":"xwGCah5o5v","authorUid":"bd-1899772313","authorUserName":"温***1","title":"饼图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-03T09:29:43.000Z","lastUpdateTime":"2020-09-03T09:29:43.000Z","auth":2,"uid":"bd-1899772313","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-03T09:29:43.000Z","code":"let dashedPic = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM8AAAAOBAMAAAB6G1V9AAAAD1BMVEX////Kysrk5OTj4+TJycoJ0iFPAAAAG0lEQVQ4y2MYBaNgGAMTQQVFOiABhlEwCugOAMqzCykGOeENAAAAAElFTkSuQmCC';\nlet color = ['#FF8700', '#ffc300', '#00e473', '#009DFF', '#0034ff'];\nlet chartData = [{\n        name: \"test1\",\n        value: 40083,\n        unit: '列'\n    },\n    {\n        name: \"test2\",\n        value: 33974,\n        unit: '列'\n    },\n    {\n        name: \"test3\",\n        value: 15400,\n        unit: '列'\n    },\n    {\n        name: \"test4\",\n        value: 11021,\n        unit: '列'\n    },\n    {\n        name: \"test5\",\n        value: 30696,\n        unit: '列'\n    }\n];\nlet failertData = [{\n        name: \"test1\",\n        value: 3002,\n        unit: '列'\n    },\n    {\n        name: \"test2\",\n        value: 2050,\n        unit: '列'\n    },\n    {\n        name: \"test3\",\n        value: 201,\n        unit: '列'\n    },\n    {\n        name: \"test4\",\n        value: 2055,\n        unit: '列'\n    },\n    {\n        name: \"test5\",\n        value: 522,\n        unit: '列'\n    }\n];\nlet arrName = [];\nlet arrValue = [];\nlet sum = 0;\nlet pieSeries = [],\n    lineYAxis = [];\n\n// 数据处理\nchartData.forEach((v, i) => {\n    arrName.push(v.name);\n    arrValue.push(v.value);\n    sum = sum + v.value;\n})\n\n// 图表option整理\nchartData.forEach((v, i) => {\n    pieSeries.push({\n        name: '成功',\n        type: 'pie',\n        clockWise: true,\n        hoverAnimation: false,\n        radius: [75 - i * 15 + '%', 67 - i * 15 + '%'],\n        center: [\"40%\", \"50%\"],\n        label: {\n            show: false\n        },\n        data: [{\n            value: v.value,\n            name: v.name\n        }, {\n            value: sum - v.value,\n            name: '',\n            itemStyle: {\n                color: \"rgba(0,0,0,0)\"\n            }\n        }]\n    });\n    pieSeries.push({\n        name: '失败',\n        type: 'pie',\n        silent: true,\n        z: 1,\n        clockWise: true, //顺时加载\n        hoverAnimation: false, //鼠标移入变大\n        radius: [75 - i * 15 + '%',67 - i * 15 + '%'],\n        center: [\"40%\", \"50%\"],\n        label: {\n            show: false\n        },\n        data: [{\n            value: 7.5,\n            itemStyle: {\n                color: \"#E3F0FF\"\n            }\n        }, {\n            value: 2.5,\n            name: '',\n            itemStyle: {\n                color: \"rgba(0,0,0,0)\"\n            }\n        }]\n    });\n    v.percent = (v.value / sum * 100).toFixed(1) + \"%\";\n    lineYAxis.push({\n        value: i,\n        textStyle: {\n            rich: {\n                circle: {\n                    color: color[i],\n                    padding: [0, 5]\n                }\n            }\n        }\n    });\n})\n\noption = {\n    backgroundColor: '#fff',\n    color: color,\n    grid: {\n        top: '12%',\n        bottom: '54%',\n        left: \"40%\",\n        containLabel: false\n    },\n    legend: {\n      data: ['成功', '失败']  \n    },\n    yAxis: [{\n        type: 'category',\n        inverse: true,\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            formatter: function(params) {\n                let item = chartData[params];\n                console.log(item)\n                return '{circle|●}{name|'+ item.name +'}{bd||}{percent|'+item.percent+'}{value|'+ item.value+'}'\n            },\n            interval: 0,\n            inside: false,\n            textStyle: {\n                color: \"#333\",\n                fontSize: 14,\n                rich: {\n                    line: {\n                        width: 170,\n                        height: 10,\n                        backgroundColor: {image: dashedPic}\n                    },\n                    name: {\n                        color: '#666',\n                        fontSize: 14,\n                    },\n                    bd: {\n                        color: '#ccc',\n                        padding: [0, 5],\n                        fontSize: 14,\n                    },\n                    percent:{\n                        color: '#333',\n                        fontSize: 14,\n                    },\n                    value: {\n                        color: '#333',\n                        fontSize: 16,\n                        fontWeight: 500,\n                        padding: [0, 0, 0, 20]\n                    },\n                    unit: {\n                        fontSize: 14\n                    }\n                }\n            },\n            show: true\n        },\n        data: lineYAxis\n    }],\n    xAxis: [{\n        show: false\n    }],\n    series: pieSeries\n};","html":"","externalScripts":"","updaterUID":"bd-1899772313","theme":"","layout":"","viewCount":228,"userName":"温***1","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xwGCah5o5v.png?v=1599125383909","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-pie"],"customTags":[],"updaterUserName":"温***1"}}