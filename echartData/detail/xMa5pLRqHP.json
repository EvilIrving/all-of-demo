{"status":0,"data":{"cid":"xMa5pLRqHP","authorUid":"bd-4112644007","authorUserName":"花***败","title":"网络拓扑图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-06-05T06:16:01.000Z","lastUpdateTime":"2019-06-05T06:16:01.000Z","auth":2,"uid":"bd-4112644007","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-05T06:16:01.000Z","code":"var nodes = [{\n        x: '480',\n        y: '1000',\n        nodeName: '负载均衡1',\n        img: 'data-1547633192258-2EYYUDdcd.png',\n    }, {\n        x: '480',\n        y: '890',\n        nodeName: 'WEB服务器',\n        img: 'data-1547632686885-o5Rfi3tyk.png'\n    },\n    {\n        x: '100',\n        y: '750',\n        nodeName: '负载均衡2',\n        img: 'data-1547633192258-2EYYUDdcd.png',\n    },\n    {\n        x: '350',\n        y: '750',\n        nodeName: '负载均衡2',\n        img: 'data-1547633192258-2EYYUDdcd.png',\n        alarm: '发生警告!'\n    },\n    {\n        x: '630',\n        y: '750',\n        nodeName: '负载均衡2',\n        img: 'data-1547633192258-2EYYUDdcd.png',\n    },\n    {\n        x: '850',\n        y: '750',\n        nodeName: '负载均衡2',\n        img: 'data-1547633192258-2EYYUDdcd.png',\n    },\n    {\n        x: '50',\n        y: '550',\n        nodeName: '查验网站\\n微信公众号\\n政务网站',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '150',\n        y: '550',\n        nodeName: '查验网站\\n微信公众号\\n政务网站',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '300',\n        y: '550',\n        nodeName: '电子票制作\\n及存储中心',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '400',\n        y: '550',\n        nodeName: '电子票制作\\n及存储中心',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '570',\n        y: '550',\n        nodeName: '票据服务器1\\n(在线)',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '670',\n        y: '550',\n        nodeName: '票据服务器1\\n(在线)',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '800',\n        y: '550',\n        nodeName: '电子制票\\n及存储中心',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '900',\n        y: '550',\n        nodeName: '电子制票\\n及存储中心',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '170',\n        y: '300',\n        nodeName: 'Inceptor1',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '270',\n        y: '300',\n        nodeName: 'Inceptor2',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '700',\n        y: '300',\n        nodeName: '票据Oracle\\n数据库服务器',\n        img: 'data-1547632915872-WZMUphq72.png',\n    },\n    {\n        x: '800',\n        y: '300',\n        nodeName: '票据Oracle\\n数据库服务器',\n        img: 'data-1547632915872-WZMUphq72.png',\n    }\n]\nvar charts = {\n    nodes: [],\n    linesData: [{\n        remark: 'WEB服务器-->左边数起第1个负载均衡',\n        coords: [\n            [470, 890],\n            [100, 890],\n            [100, 780]\n\n        ]\n    },{\n        remark: 'WEB服务器-->左边数起第3个负载均衡',\n        coords: [\n            [510, 890],\n            [620, 890],\n            [620, 780]\n\n        ]\n    },{\n        remark: 'WEB服务器-->左边数起第4个负载均衡',\n        coords: [\n            [510, 890],\n            [840, 890],\n            [840, 780]\n\n        ]\n    },{\n        remark: '左边数起第1个负载均衡-->查验网站微信公众号政务网站1',\n        coords: [\n            [100, 723],\n            [50, 580]\n\n        ]\n    },{\n        remark: '左边数起第1个负载均衡-->查验网站微信公众号政务网站2',\n        coords: [\n            [100, 723],\n            [150, 580]\n\n        ]\n    },{\n        remark: '左边数起第2个负载均衡-->电子票制作及存储中心1',\n        coords: [\n            [350, 723],\n            [300, 580]\n        ],\n        lineStyle: {\n            normal: {\n                color: '#DC143C'\n            }\n        },\n        effect: {\n            color: '#DC143C'\n        }\n    },{\n        remark: '左边数起第2个负载均衡-->电子票制作及存储中心2',\n        coords: [\n            [350, 723],\n            [400, 580]\n\n        ],\n        lineStyle: {\n            normal: {\n                color: '#DC143C'\n            }\n        },\n        effect: {\n            color: '#DC143C'\n        }\n    },{\n        remark: '左边数起第3个负载均衡-->票据服务器1',\n        coords: [\n            [630, 723],\n            [570, 580]\n\n        ]\n    },{\n        remark: '左边数起第3个负载均衡-->票据服务器2',\n        coords: [\n            [630, 723],\n            [670, 580]\n\n        ]\n    },{\n        remark: '左边数起第4个负载均衡-->电子制票及存储中心1',\n        coords: [\n            [850, 723],\n            [800, 580]\n\n        ]\n    },{\n        remark: '左边数起第4个负载均衡-->电子制票及存储中心2',\n        coords: [\n            [850, 723],\n            [900, 580]\n\n        ]\n    },{\n        remark: '查验网站-->Inceptor1',\n        coords: [\n            [100, 450],\n            [100, 300],\n            [160, 300]\n\n        ]\n    },{\n        remark: '电子票制作及存储中心-->Inceptor2',\n        coords: [\n            [350, 450],\n            [350, 300],\n            [280, 300]\n\n        ]\n    },{\n        remark: '票据服务器-->票据Oracle数据库服务器',\n        coords: [\n            [620, 450],\n            [620, 300],\n            [690, 300]\n\n        ]\n    },{\n        remark: '电子制票及储存中心-->票据Oracle数据库服务器',\n        coords: [\n            [850, 450],\n            [850, 300],\n            [810, 300]\n\n        ]\n    }]\n}\nfor (var j = 0; j < nodes.length; j++) {\n    var x = parseInt(nodes[j].x)\n    var y = parseInt(nodes[j].y)\n    var node = {\n        nodeName: nodes[j].nodeName,\n        value: [x, y],\n        symbolSize: 50,\n        alarm: nodes[j].alarm,\n        symbol: 'image:///asset/get/s/' + nodes[j].img,\n        itemStyle: {\n            normal: {\n                color: '#12b5d0',\n            }\n        }\n    }\n    charts.nodes.push(node)\n}\n\noption = {\n    backgroundColor: \"#0B1321\",\n    xAxis: {\n        min: 0,\n        max: 1000,\n        show: false,\n        type: 'value'\n    },\n    yAxis: {\n        min: 0,\n        max: 1000,\n        show: false,\n        type: 'value'\n    },\n    series: [{\n        type: 'graph',\n        coordinateSystem: 'cartesian2d',\n        label: {\n            normal: {\n                show: true,\n                position: 'bottom',\n                color: '#00FFFF'\n            }\n        },\n        itemStyle: {\n            normal: {\n                label: {\n                    show: true,\n                    formatter: function(item) {\n                        return item.data.nodeName\n                    }\n                }\n            }\n        },\n        data: charts.nodes,\n    }, {\n        type: 'lines',\n        polyline: true,\n        coordinateSystem: 'cartesian2d',\n        lineStyle: {\n            normal: {\n                width: 2,\n                color: '#175064',\n                curveness: 0.3\n            }\n        },\n        effect: {\n            show: true,\n            trailLength: 0.1,\n            symbol: 'arrow',\n            color: '#00FFFF',\n            symbolSize: 8\n        },\n        data: charts.linesData\n    }]\n};\n//用于告警的动态效果\nsetInterval(() => {\n    var dataI = []\n    for (var n = 0; n < nodes.length; n++) {\n        var alarm = nodes[n].alarm\n        if (alarm) {\n            option.series[0].data[n].symbolSize = 60\n            option.series[0].data[n].label = {\n                normal: {\n                    color: '#DC143C'\n                }\n            }\n            option.series[0].itemStyle.normal.label.formatter = function(item) {\n                if (item.data.alarm) {\n                    return item.data.nodeName + '\\n[ ' + item.data.alarm + ' ]'\n                } else {\n                    return item.data.nodeName\n                }\n            }\n            dataI.push(n)\n        }\n    }\n    myChart.setOption(option)\n    setTimeout(() => {\n        for (var m = 0; m < dataI.length; m++) {\n            option.series[0].data[dataI[m]].symbolSize = 50\n            option.series[0].data[dataI[m]].label = {\n                normal: {\n                    color: '#00FFFF'\n                }\n            }\n            option.series[0].itemStyle.normal.label.formatter = function(item) {\n                return item.data.nodeName\n            }\n        }\n        myChart.setOption(option)\n    }, 500)\n}, 1000)","html":"","externalScripts":"","updaterUID":"bd-4112644007","theme":"","layout":"","viewCount":4412,"userName":"花***败","commentCount":0,"starCount":16,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xMa5pLRqHP.png?v=1559715361926","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-graph","series-lines"],"customTags":[],"updaterUserName":"花***败"}}