{"status":0,"data":{"cid":"xrJlWAS7XX","authorUid":"bd-271943973","authorUserName":"个***类","title":"投资回报","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-07-11T09:29:28.000Z","lastUpdateTime":"2018-07-11T09:29:28.000Z","auth":2,"uid":"bd-271943973","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-11T09:29:28.000Z","code":"\r\n\r\n\r\n//app.title = '买房投资与理财投资回报分析';\r\n//等比数列求和\r\nfunction f_dbqh(_q,_n){\r\n    if(!_q){return _n;}\r\n    return (Math.pow(1+_q,_n)-1)/_q;\r\n}\r\n//等额本息\r\nfunction f_debx(_a,_q,_n){//_a:本金  _q:年化 _n:年数\r\n    _q=_q/12;_n=_n*12;\r\n    return (_a*_q*Math.pow(1+_q,_n))/(Math.pow(1+_q,_n)-1);\r\n}\r\nvar map = [\"当年房价\",\"首付及贷款花费\",\"房租年收益\",\"房租总收益\",\"投资年收益\",\"投资总收益\"];\r\nvar choose = {\"房租年收益\":false,\"房租总收益\":false,\"投资年收益\":false,\"投资总收益\":false};\r\nvar datax=[],\r\n    dataList={};\r\n    map.map(function(e,i){\r\n        dataList[i]=[];\r\n    });\r\n\r\nfunction runData(){\r\n   //参数调整\r\n    var params={\r\n        fj_dz:0.04,     //房价递增率        参考值：中国房价均价10年内涨幅0.04，杭州近1年半年0.3-0.4,\r\n        tz_ll:0.06,     //期望年化收益      参考值：余额宝0.04，金融产品0.05-0.15\r\n        fj:200,         //房价(装修在内)    参考值：杭州150-300，宁波100-200\r\n        sf:0.3,         //首付              参考值：杭州最低0.3\r\n        dk_type:1,      //贷款类型          参考值：1等额本息,2等额本金（未实现）\r\n        dk_ll:0.049*1.1,    //贷款利率等额本息  参考值：公积金0.0325，商贷0.049，杭州上浮1%，为0.0539\r\n        dk_nx:30,       //贷款年限          参考值：最高30\r\n        zj_bl:0.015,     //年租金比例        参考值：商品房0.04，酒店公寓0.08(毛培0.015)\r\n        // zj_dz:0,        //租金递增          参考值：可用0.05，由于房价递增租金比例也自动增加，所以该项填0\r\n        sjall:50,       //总计算年限        参考值：最好30年\r\n    };\r\n\r\n    params.nfd=f_debx(params.fj*(1-params.sf),params.dk_ll,params.dk_nx)*12;//每年房贷：每月房贷*12\r\n\r\n    params.sy_fz_all=0;\r\n    params.sy_tz_all=0;\r\n    for(var i=0;i<params.sjall;i++){\r\n        var fj_dn = params.fj * Math.pow(1 + params.fj_dz, i);          //当年房价\r\n        params.zc_fd = params.nfd * (i>30?30:i);                        //共支出房贷,30年后不用还\r\n        params.zc_fd_all = params.zc_fd+params.fj*params.sf;            //共支出房贷加首付\r\n\r\n        params.sy_fz = fj_dn*params.zj_bl;                              //当年房租：房价*年租金比例\r\n        params.sy_fz_all+=params.sy_fz;\r\n\r\n        params.sy_tz=params.zc_fd_all*params.tz_ll;\r\n        params.sy_tz_all+=params.sy_tz;\r\n        // var shouyi = params.sy_fz-params.zc_fd-params.fj*params.sf;    //第n年的购房投资收益：共收益房租-共支出房贷-首付\r\n\r\n        datax.push(i);\r\n\r\n        dataList[0].push(~~(fj_dn));\r\n        dataList[1].push(~~(params.zc_fd_all));\r\n        dataList[2].push(params.sy_fz.toFixed(1));\r\n        dataList[3].push(~~(params.sy_fz_all));\r\n        dataList[4].push(params.sy_tz.toFixed(1));\r\n        dataList[5].push(~~(params.sy_tz_all));\r\n    }\r\n}\r\nrunData();\r\n\r\noption = {\r\n    title: {\r\n        text: '堆叠区域图'\r\n    },\r\n    tooltip : {\r\n        trigger: 'axis'\r\n    },\r\n    legend: {\r\n        data:map,\r\n        selected: choose\r\n    },\r\n    toolbox: {\r\n        feature: {\r\n            saveAsImage: {}\r\n        }\r\n    },\r\n    grid: {\r\n        left: '3%',\r\n        right: '4%',\r\n        bottom: '3%',\r\n        containLabel: true\r\n    },\r\n    xAxis : [\r\n        {\r\n            type : 'category',\r\n            boundaryGap : false,\r\n            data : datax,\r\n            axisLabel: {\r\n                formatter: '第 {value} 年'\r\n            }\r\n        }\r\n    ],\r\n    yAxis : [\r\n        {\r\n            type : 'value',\r\n            axisLabel: {\r\n                formatter: '{value} 万'\r\n            }\r\n        }\r\n    ],\r\n    series : map.map(function(e,i){\r\n        return {\r\n            name:map[i],\r\n            type:'line',\r\n            areaStyle: {normal: {}},\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'top'\r\n                }\r\n            },\r\n            data:dataList[i]\r\n        };\r\n    })\r\n};\r\n","html":"","externalScripts":"","updaterUID":"bd-271943973","theme":"","layout":"","viewCount":27,"userName":"个***类","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJlWAS7XX.png?v=1531301368374","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"个***类"}}