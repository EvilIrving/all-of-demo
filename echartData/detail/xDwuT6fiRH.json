{"status":0,"data":{"cid":"xDwuT6fiRH","authorUid":"obd-oDoaHveWWm93vXBMl_qRWLZ2NQjVQ10","authorUserName":"爱***云","title":"环绕嵌套饼图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-11-28T08:14:34.000Z","lastUpdateTime":"2021-11-28T08:14:34.000Z","auth":2,"uid":"obd-oDoaHveWWm93vXBMl_qRWLZ2NQjVQ10","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-28T08:14:34.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\r\nlet value = 80;\r\nvar timerId;\r\nvar outerRidus1 = 0.8\r\nvar outerRidus2 = 0.85\r\noption = {\r\n  backgroundColor: '#090d1a',\r\n  legend: {\r\n    orient: 'vertical',\r\n    show: true,\r\n    right: '5%',\r\n    y: 'center',\r\n    icon: 'pin',\r\n    itemGap: 30,\r\n    textStyle: {\r\n      color: '#FFFFFF',\r\n      fontSize: 12,\r\n      lineHeight: 20,\r\n    },\r\n  },\r\n  tooltip: {\r\n    show: true,\r\n  },\r\n  series: [\r\n    // 最外层圆\r\n    {\r\n      type: 'pie',\r\n      radius: ['75%', '55%'],\r\n      center: ['50%', '50%'],\r\n      hoverAnimation: false,\r\n      data: [\r\n        {\r\n          value: 30,\r\n          name: '运行中',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#0060FF', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#00EFFE', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n          },\r\n        },\r\n        {\r\n          value: 30,\r\n          name: '已停止',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#44D7B6', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#6DD400', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n          },\r\n        },\r\n        {\r\n          value: 40,\r\n          name: '未上线',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#FFA600', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#FEDB65', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n          },\r\n        },\r\n      ],\r\n      label: {\r\n        show: true,\r\n        position: 'outside',\r\n        formatter: '{d}%',\r\n        color: '#FFFFFF',\r\n      },\r\n      labelLine: {\r\n        normal: {\r\n          length: 80,\r\n          lineStyle: {\r\n            width: 1,\r\n          },\r\n        },\r\n      },\r\n    },\r\n    // 内圆 + 中间文字\r\n    {\r\n      type: 'pie',\r\n      radius: ['60%', '40%'],\r\n      center: ['50%', '50%'],\r\n      hoverAnimation: false,\r\n      z: 10,\r\n      label: {\r\n        position: 'center',\r\n        formatter: () => {\r\n          return '佣金总额\\r\\n{total|100} 个';\r\n        },\r\n        rich: {\r\n          total: {\r\n            fontSize: 24,\r\n            color: '#FFFFFF',\r\n          },\r\n        },\r\n        color: '#FFFFFF',\r\n        fontSize: 16,\r\n        lineHeight: 30,\r\n      },\r\n      data: [\r\n        {\r\n          value: 30,\r\n          name: '运行中',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#0060FF', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#00EFFE', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n              opacity: 0.5,\r\n            },\r\n          },\r\n        },\r\n        {\r\n          value: 30,\r\n          name: '已停止',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#44D7B6', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#6DD400', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n              opacity: 0.5,\r\n            },\r\n          },\r\n        },\r\n        {\r\n          value: 40,\r\n          name: '未上线',\r\n          itemStyle: {\r\n            normal: {\r\n              color: {\r\n                // 完成的圆环的颜色\r\n                colorStops: [\r\n                  {\r\n                    offset: 0,\r\n                    color: '#FFA600', // 0% 处的颜色\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: '#FEDB65', // 100% 处的颜色\r\n                  },\r\n                ],\r\n              },\r\n              opacity: 0.5,\r\n            },\r\n          },\r\n        },\r\n      ],\r\n      labelLine: {\r\n        show: false,\r\n      },\r\n    },\r\n\r\n    // 紫色线1 + 点\r\n    {\r\n      name: 'ring5',\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        return {\r\n          type: 'arc',\r\n          shape: {\r\n            cx: api.getWidth() / 2,\r\n            cy: api.getHeight() / 2,\r\n            r: Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus1 ,// 180,\r\n            startAngle: ((0 + angle) * Math.PI) / 180,\r\n            endAngle: ((90 + angle) * Math.PI) / 180,\r\n          },\r\n          style: {\r\n            stroke: '#8383FA',\r\n            fill: 'transparent',\r\n            lineWidth: 1.5,\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    // 紫色线1点\r\n    {\r\n      name: 'ring5', //紫点\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        let x0 = api.getWidth() / 2;\r\n        let y0 = api.getHeight() / 2;\r\n        let r =  Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus1;\r\n        let point = getCirlPoint(x0, y0, r, 0 + angle);\r\n        return {\r\n          type: 'circle',\r\n          shape: {\r\n            cx: point.x,\r\n            cy: point.y,\r\n            r: 4,\r\n          },\r\n          style: {\r\n            stroke: '#8450F9', //绿\r\n            fill: '#8450F9',\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    // 蓝色\r\n    {\r\n      name: 'ring5',\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        return {\r\n          type: 'arc',\r\n          shape: {\r\n            cx: api.getWidth() / 2,\r\n            cy: api.getHeight() / 2,\r\n              r: Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus1 ,// 180,\r\n            startAngle: ((180 + angle) * Math.PI) / 180,\r\n            endAngle: ((270 + angle) * Math.PI) / 180,\r\n          },\r\n          style: {\r\n            stroke: '#4386FA',\r\n            fill: 'transparent',\r\n            lineWidth: 1.5,\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    {\r\n      name: 'ring5', // 蓝色\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        let x0 = api.getWidth() / 2;\r\n        let y0 = api.getHeight() / 2;\r\n        let  r = Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus1// 180\r\n        let point = getCirlPoint(x0, y0, r, 180 + angle);\r\n        return {\r\n          type: 'circle',\r\n          shape: {\r\n            cx: point.x,\r\n            cy: point.y,\r\n            r: 4,\r\n          },\r\n          style: {\r\n            stroke: '#4386FA', //绿\r\n            fill: '#4386FA',\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    // 橘色\r\n    {\r\n      name: 'ring5',\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        return {\r\n          type: 'arc',\r\n          shape: {\r\n            cx: api.getWidth() / 2,\r\n            cy: api.getHeight() / 2,\r\n             r: Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus2 ,// 200,\r\n            startAngle: ((250 + -angle) * Math.PI) / 180,\r\n            endAngle: ((10 + -angle) * Math.PI) / 180,\r\n          },\r\n          style: {\r\n            stroke: '#0CD3DB',\r\n            fill: 'transparent',\r\n            lineWidth: 1.5,\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    {\r\n      name: 'ring5', //绿点\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        let x0 = api.getWidth() / 2;\r\n        let y0 = api.getHeight() / 2;\r\n        let r = Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus2 // 200;\r\n        let point = getCirlPoint(x0, y0, r, 250 + -angle);\r\n        return {\r\n          type: 'circle',\r\n          shape: {\r\n            cx: point.x,\r\n            cy: point.y,\r\n            r: 4,\r\n          },\r\n          style: {\r\n            stroke: '#0CD3DB', //绿\r\n            fill: '#0CD3DB',\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    // 粉色\r\n    {\r\n      name: 'ring5',\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        return {\r\n          type: 'arc',\r\n          shape: {\r\n            cx: api.getWidth() / 2,\r\n            cy: api.getHeight() / 2,\r\n            r: Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus2 ,// 200,,\r\n            startAngle: ((70 + -angle) * Math.PI) / 180,\r\n            endAngle: ((200 + -angle) * Math.PI) / 180,\r\n          },\r\n          style: {\r\n            stroke: '#FF8E89',\r\n            fill: 'transparent',\r\n            lineWidth: 1.5,\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n    //粉色点\r\n    {\r\n      name: 'ring5',\r\n      type: 'custom',\r\n      coordinateSystem: 'none',\r\n      renderItem: function (params, api) {\r\n        let x0 = api.getWidth() / 2;\r\n        let y0 = api.getHeight() / 2;\r\n        let r = Math.min(api.getWidth(), api.getHeight()) / 2 * outerRidus2// 200,;\r\n        let point = getCirlPoint(x0, y0, r, 70 + -angle);\r\n        return {\r\n          type: 'circle',\r\n          shape: {\r\n            cx: point.x,\r\n            cy: point.y,\r\n            r: 4,\r\n          },\r\n          style: {\r\n            stroke: '#FF8E89', //粉\r\n            fill: '#FF8E89',\r\n          },\r\n          silent: true,\r\n        };\r\n      },\r\n      data: [0],\r\n    },\r\n  ],\r\n};\r\n\r\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\nfunction getCirlPoint(x0, y0, r, angle) {\r\n  let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\r\n  let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\r\n  return {\r\n    x: x1,\r\n    y: y1,\r\n  };\r\n}\r\n\r\nfunction draw() {\r\n  angle = angle + 3;\r\n  _chart.setOption(option, true);\r\n  //window.requestAnimationFrame(draw);\r\n}\r\nif (timerId) {\r\n  clearInterval(timerId);\r\n}\r\ntimerId = setInterval(function () {\r\n  //用setInterval做动画感觉有问题\r\n  draw();\r\n}, 100);\r\n","html":"","externalScripts":"","updaterUID":"obd-oDoaHveWWm93vXBMl_qRWLZ2NQjVQ10","theme":"","layout":"","viewCount":0,"userName":"爱***云","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDwuT6fiRH.png?v=1638087274711","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie","tooltip"],"customTags":[],"updaterUserName":"爱***云"}}