{"status":0,"data":{"cid":"xHyBq9hDVg","authorUid":"bd-2215764494","authorUserName":"p***g","title":"Snow Drop","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2016-12-21T08:17:16.000Z","lastUpdateTime":"2016-12-21T08:17:16.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.3.2","versionCreateTime":"2016-12-21T15:44:57.000Z","code":"option = {\n    backgroundColor: '#333',\n    series: []\n};\n\nvar snowDrops = [];\n\nfunction SnowDrop(size, speed, position, life) {\n    this._el = new echarts.graphic.Circle({\n        shape: {\n            r: size\n        },\n        style: {\n            fill: '#fff'  \n        },\n        position: position\n    });\n    \n    this._opacity = size / 8;\n\n    this._speed = speed;\n\n    this.restLife = life;\n}\n\nSnowDrop.prototype.getEl = function () {\n    return this._el;\n}\n\nSnowDrop.prototype.update = function (time) {\n    this._el.position[0] += this._speed[0] * time;\n    this._el.position[1] += this._speed[1] * time;\n    \n    this._el.style.opacity = this._opacity;\n\n    this._el.dirty();\n\n    this.restLife -= time;\n    if (this.restLife < 0) {\n        return true;\n    }\n}\n\nfunction spawnSnowDrop() {\n    var size = Math.random() * 5 + 2;\n    var speed = size * 20;\n\n    var snowDrop = new SnowDrop(\n        size, [Math.random(), speed],\n        [zr.getWidth() * Math.random(), -Math.random() * 10],\n        4 + Math.sqrt(10 - size)\n    );\n\n    snowDrops.push(snowDrop);\n    return snowDrop;\n}\n\nvar zr = myChart.getZr();\n\nzr.animation.on('frame', function (dTime) {\n    dTime /= 1000;\n    // spawn\n    if (Math.random() < 0.1) {\n        for (var i = 0; i < 2; i++) {\n            var snowDrop = spawnSnowDrop();\n            zr.add(snowDrop.getEl());\n        }\n    }\n    snowDrops.forEach(function (snowDrop) {\n        snowDrop.update(dTime / 1000);\n    });\n    // Update\n    snowDrops = snowDrops.filter(function (snowDrop) {\n        var needsRemove = snowDrop.update(dTime);\n        if (needsRemove) {\n            zr.remove(snowDrop.getEl());\n        }\n        return !needsRemove;\n    });\n});\n\n","html":"","externalScripts":"","updaterUID":"bd-2215764494","theme":"","layout":"","viewCount":668,"userName":"p***g","commentCount":1,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyBq9hDVg.png?v=1482335097529","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"p***g"}}