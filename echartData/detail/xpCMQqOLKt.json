{"status":0,"data":{"cid":"xpCMQqOLKt","authorUid":"obd-o-sSpGeAOqz2WM6CENPQ7JkUdNDkyA8","authorUserName":"盼***下","title":"周图表","description":"默认展示图表表格，点击切换折线图","latestVersion":2,"alwaysLatest":0,"createTime":"2021-05-13T09:51:50.000Z","lastUpdateTime":"2021-05-13T09:51:50.000Z","auth":2,"uid":"obd-o-sSpGeAOqz2WM6CENPQ7JkUdNDkyA8","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-13T10:06:15.000Z","code":"const result = {\n    indicator: [\n        {\n            indicator_name: 'Mon',\n            indicator_value: '150',\n        },\n        {\n            indicator_name: 'Tue',\n            indicator_value: '230',\n        },\n        {\n            indicator_name: 'Web',\n            indicator_value: '224',\n        },\n        {\n            indicator_name: 'Thu',\n            indicator_value: '218',\n        },\n        {\n            indicator_name: 'Fri',\n            indicator_value: '135',\n        },\n        {\n            indicator_name: 'Sat',\n            indicator_value: '147',\n        },\n        {\n            indicator_name: 'Sun',\n            indicator_value: '260',\n        },\n    ],\n};\nvar xAxisData = ['Mon', 'Tue', 'Web', 'Thu', 'Fri', 'Sat', 'Sun'];\nvar yAxisData = [150, 230, 224, 218, 135, 147, 260];\n\nvar series = [];\n\nvar indicator = [\n    {\n        indicator_name: '周',\n        indicator_value: '指标值',\n    },\n];\nif (result.indicator) {\n    for (const iterator of result.indicator) {\n        indicator.push({\n            indicator_name: iterator.indicator_name,\n            indicator_value: parseFloat(iterator['indicator_value']).toFixed(3),\n        });\n    }\n}\n\nseries.push({\n    name: '指标',\n    type: 'custom',\n    data: indicator,\n    coordinateSystem: 'none',\n    renderItem: function renderItem(params, api) {\n        const style = api.style({\n            stroke: 'black',\n            fill: params.dataIndex === 0 ? '#dcdcdc' : null,\n        });\n        const apiWidth = api.getWidth();\n        const apiHeight = api.getHeight();\n        let font;\n        let height;\n        let y0;\n        debugger;\n        if (params.dataIndex === 0) {\n            font = 'bolder 1.5em \"Microsoft YaHei\", sans-serif';\n            height = apiHeight * 0.07;\n            y0 = apiHeight * 0.07 + 1;\n        } else {\n            font = '1.1em \"Microsoft YaHei\", sans-serif';\n            height = apiHeight * 0.052;\n            y0 = apiHeight * 0.088 + params.dataIndex * height + 1;\n        }\n        const x0 = apiWidth * 0.54;\n        const value = indicator[params.dataIndex];\n        return {\n            type: 'group',\n            children: [\n                {\n                    type: 'rect',\n                    shape: {\n                        x: x0,\n                        y: y0,\n                        width: 0.29 * apiWidth,\n                        height: height,\n                    },\n                    style: style,\n                },\n                {\n                    type: 'text',\n                    style: {\n                        text: value['indicator_name'],\n                        font: font,\n                        x: x0 + 3,\n                        y: y0 + height / 3,\n                    },\n                },\n                {\n                    type: 'rect',\n                    shape: {\n                        x: x0 + 0.29 * apiWidth,\n                        y: y0,\n                        width: 0.1 * apiWidth,\n                        height: height,\n                    },\n                    style: style,\n                },\n                {\n                    type: 'text',\n                    style: {\n                        text: value.indicator_value,\n                        font: font,\n                        x: x0 + 0.29 * apiWidth + 3,\n                        y: y0 + height / 3,\n                    },\n                },\n            ],\n        };\n    },\n});\n\noption = {\n    title: [\n        {\n            text: '周图表',\n        },\n    ],\n    tooltip: {\n        formatter: '{a}: {c}',\n    },\n    toolbox: {\n        show: true,\n        feature: {\n            myTool: {\n                show: true,\n                title: '导出Excel',\n                icon: 'image://http://echarts.baidu.com/images/favicon.png',\n                onclick: function () {\n                    alert('导出成功！');\n                },\n            },\n            magicType: {\n                show: true,\n                type: ['line'],\n            },\n        },\n        top: '10',\n        right: '50',\n    },\n    series: series,\n};\noption1 = {\n    title: [\n        {\n            text: '周折线图',\n            x: '23%',\n            y: '50%',\n            textAlign: 'center',\n        },\n    ],\n    tooltip: {\n        formatter: '{a}: {c}',\n    },\n    toolbox: {\n        show: true,\n        feature: {\n            myTool: {\n                show: true,\n                title: '数据视图',\n                icon: 'image://http://echarts.baidu.com/images/favicon.png',\n                onclick: function () {\n                    myChart.clear();\n                    myChart.setOption(option);\n                },\n            },\n            dataZoom: { show: true, title: { zoom: '区域缩放', back: '区域缩放还原' } },\n        },\n        top: '10',\n        right: '50',\n    },\n    xAxis: {\n        type: 'category',\n        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n    },\n    yAxis: {\n        type: 'value',\n    },\n    series: [\n        {\n            data: [150, 230, 224, 218, 135, 147, 260],\n            type: 'line',\n        },\n    ],\n};\nmyChart.on('magictypechanged', function () {\n    console.log('sasda');\n    myChart.clear();\n    myChart.setOption(option1);\n});\n","html":"","externalScripts":"","updaterUID":"obd-o-sSpGeAOqz2WM6CENPQ7JkUdNDkyA8","theme":"","layout":"","viewCount":0,"userName":"盼***下","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpCMQqOLKt.png?v=1620900375526","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"盼***下"}}