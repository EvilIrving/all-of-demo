{"status":0,"data":{"cid":"xG94-3zwcM","authorUid":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","authorUserName":"李***3","title":"相同机型飞往上海细节成本","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-27T06:18:34.000Z","lastUpdateTime":"2020-09-27T06:18:34.000Z","auth":1,"uid":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-27T06:18:34.000Z","code":"var geoCoordMap = {\r\n    '黑龙江': [127.9688, 45.368, 28374, 2847, 3948],\r\n    '内蒙古': [110.3467, 41.4899, 23748, 9358, 8463],\r\n    \"吉林\": [125.8154, 44.2584, 183757, 9837, 6862],\r\n    '北京': [116.4551, 40.2539, 25749, 10284, 10285, 7564, 4543, 5643, 7445, 6245, 4542, '首都国际机场', '波音747'],\r\n    \"辽宁\": [123.1238, 42.1216, 19293, 7373, 6742],\r\n    \"河北\": [114.4995, 38.1006, 16648, 6476, 6738],\r\n    \"天津\": [117.4219, 39.4189, 12574, 73658, 5382],\r\n    \"山西\": [112.3352, 37.9413, 13282, 4432, 4347],\r\n    \"陕西\": [109.1162, 34.2004, 18595, 4375, 4374],\r\n    \"甘肃\": [103.5901, 36.3043, 15764, 4342, 4133],\r\n    \"宁夏\": [106.3586, 38.1775, 16758, 4473, 4254],\r\n    \"青海\": [101.4038, 36.8207, 19385, 5848, 5231],\r\n    \"新疆\": [87.9236, 43.5883, 18374, 8764, 8213],\r\n    \"西藏\": [91.11, 29.97, 17337, 9374, 8973],\r\n    \"四川\": [103.9526, 30.7617, 20583, 10283, 9323],\r\n    \"重庆\": [108.3843, 30.4397, 19337, 9833, 9321, 4542, 5453, 5736, 8573, 6526, 5632, '重庆江北国际机场', '波音747'],\r\n    \"山东\": [117.1582, 36.8701, 19242, 7764, 7353],\r\n    \"河南\": [113.4668, 34.6234, 18475, 7623, 6922],\r\n    \"江苏\": [118.8062, 31.9208, 21233, 8634, 3232],\r\n    \"安徽\": [117.29, 32.0581, 17233, 7321, 7239],\r\n    \"湖北\": [114.3896, 30.6628, 19264, 8325, 8121],\r\n    \"浙江\": [119.5313, 29.8773, 22323, 9423, 8480],\r\n    \"福建\": [119.4543, 25.9222, 21483, 9973, 9742],\r\n    \"江西\": [116.0046, 28.6633, 19843, 8756, 8324],\r\n    \"湖南\": [113.0823, 28.2568, 20757, 8534, 8135],\r\n    \"贵州\": [106.6992, 26.7682, 18346, 9323, 8323],\r\n    \"云南\": [102.9199, 25.4663, 19964, 7562, 6232],\r\n    \"广东\": [113.1224, 23.0095, 24832, 10254, 9934],\r\n    \"广西\": [108.479, 23.1152, 17838, 7472, 7123],\r\n    \"海南\": [110.3893, 19.8516, 22957, 10247, 9873],\r\n    '上海': [121.4648, 31.2891, 25839, 11857, 1032],\r\n    '台湾': [121.5651, 25.0377, 9738, 58944, 5231],\r\n    '香港': [114.1466, 22.2701, 18894, 9873, 9621],\r\n    '澳门': [113.5495, 22.1918, 18573, 9432, 2484]\r\n};\r\n\r\nvar BJData = [\r\n    [{\r\n        name: '北京'\r\n    }, {\r\n        name: '上海',\r\n        value: 1\r\n    }]\r\n];\r\n\r\nvar CQData = [\r\n    [{\r\n        name: '重庆'\r\n    }, {\r\n        name: '上海',\r\n        value: 1\r\n    }]\r\n]\r\n\r\n\r\n\r\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\n\r\nvar convertData2 = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = geoCoordMap[dataItem[0].name];\r\n        var toCoord = geoCoordMap[dataItem[1].name];\r\n        if (fromCoord && toCoord) {\r\n            res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[1].value\r\n            }, {\r\n                coord: toCoord\r\n            }]);\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar color = ['#a6c84c', ];\r\nvar series = [];\r\n[\r\n    ['北京', BJData],\r\n    ['重庆', CQData]\r\n].forEach(function(item, i) {\r\n    series.push({\r\n        type: 'lines',\r\n        zlevel: 2,\r\n        effect: {\r\n            show: true,\r\n            period: 5, //箭头指向速度，值越小速度越快\r\n            trailLength: 0, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n            symbol: planePath, //箭头图标\r\n            symbolSize: 15, //图标大小\r\n            color: '#00eaff'\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                width: 1, //尾迹线条宽度\r\n                opacity: 1, //尾迹线条透明度\r\n                curveness: .3 //尾迹线条曲直度\r\n            }\r\n        },\r\n        data: convertData2(item[1])\r\n    }, {\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            period: 5, //动画时间，值越小速度越快\r\n            brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n            scale: 3 //波纹圆环最大限制，值越大波纹越大\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right', //显示位置\r\n                offset: [5, 0], //偏移设置\r\n                formatter: function(params) { //圆环显示文字\r\n                    return params.data.name;\r\n                },\r\n                fontSize: 13\r\n            }\r\n        },\r\n        symbol: 'circle',\r\n        symbolSize: function(val) {\r\n            return 5 + val[5] * 0.01;\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                show: true,\r\n                color: color[i]\r\n            }\r\n        },\r\n        data: item[1].map(function(dataItem) {\r\n            return {\r\n                name: dataItem[1].name,\r\n                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n            };\r\n        })\r\n    }, {\r\n        type: 'scatter',\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            period: 4,\r\n            brushType: 'stroke',\r\n            scale: 4\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                //offset:[5, 0],\r\n                color: '#0f0',\r\n                formatter: '{b}',\r\n                textStyle: {\r\n                    color: \"#0f0\"\r\n                }\r\n            },\r\n            emphasis: {\r\n                show: true,\r\n                color: \"#f60\"\r\n            }\r\n        },\r\n        symbol: 'pin',\r\n        symbolSize: 50,\r\n        data: [{\r\n            name: item[0],\r\n            value: geoCoordMap[item[0]].concat([10]),\r\n        }],\r\n    });\r\n});\r\n\r\noption = {\r\n    backgroundColor: '#ffffff',\r\n    title: {\r\n        text: '相同机型飞往上海细节成本',\r\n        left: '1%',\r\n        top: '6%',\r\n        textStyle: {\r\n            color: '#000000'\r\n        }\r\n    },\r\n    tooltip: {\r\n        // trigger: 'item'\r\n        trigger: 'item',\r\n        backgroundColor: 'rgba(166, 200, 76, 0.82)',\r\n        borderColor: '#FFFFCC',\r\n        showDelay: 0,\r\n        hideDelay: 0,\r\n        enterable: true,\r\n        transitionDuration: 0,\r\n        extraCssText: 'z-index:100',\r\n        formatter: function(params, ticket, callback) {\r\n            //根据业务自己拓展要显示的内容\r\n            if (params.seriesType == \"effectScatter\") {\r\n                return \"降落机场：\" + params.data.name + \"，航班数：2\" + '<br/>变动成本:' + params.data.value[2] + '<br/>固定成本:' + params.data.value[3] + '<br/>期间成本:' + params.data.value[4];\r\n            } else if (params.seriesType == \"lines\") {\r\n                console.log(params.data.value);\r\n                return \"航班数:\" + params.data.value + \"<br/>航班型号：波音747\";\r\n            }\r\n            var res = \"\";\r\n            var name = params.name;\r\n            var value = params.value[params.seriesIndex + 1];\r\n            res = \"<span style='color:#fff;'> 起飞机场：\" + params.data.value[11] + \"</span><br/>飞机型号：\" + params.data.value[12] +\r\n                \"<br/>地面服务费：\" + params.data.value[2] + \"<br/>货物处理费费：\" + params.data.value[3] + \"<br/>过站服务费：\" + params.data.value[4] +\r\n                \"<br/>机场公共服务设施费：\" + params.data.value[5] + \"<br/>出入境检疫费：\" + params.data.value[6] + \"<br/>飞机清洁：\" + params.data.value[7] +\r\n                \"<br/>安检费：\" + params.data.value[8] + \"<br/>旅客运送费：\" + params.data.value[9] + \"<br/>特车费：\" + params.data.value[10];\r\n            return res;\r\n        }\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: 'bottom',\r\n        left: 'right',\r\n        textStyle: {\r\n            color: '#fff'\r\n        },\r\n        selectedMode: 'single'\r\n    },\r\n    visualMap: { //图例值控制\r\n        min: 0,\r\n        max: 1,\r\n        calculable: false,\r\n        show: false,\r\n        color: ['#f44336', '#fc9700', '#ffde00', '#3cfc01', '#00eaff'],\r\n        textStyle: {\r\n            color: '#000000'\r\n        }\r\n    },\r\n    geo: {\r\n        map: 'china',\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: false, //是否允许缩放\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'rgba(46, 63, 81, 127)', //地图背景色\r\n                borderColor: '#445973', //省市边界线00fcff 516a89\r\n                borderWidth: 1\r\n            },\r\n            emphasis: {\r\n                color: 'rgba(35, 41, 58, 127)' //悬浮背景\r\n            }\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-oj1Tph9VM2SjbjlYDwr7u6Fdr-Y3ADU","theme":"","layout":"","viewCount":154,"userName":"李***3","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xG94-3zwcM.png?v=1601187514630","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"李***3"}}