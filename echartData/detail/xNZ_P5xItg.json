{"status":0,"data":{"cid":"xNZ_P5xItg","authorUid":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","authorUserName":"b***n","title":"饼状图 label换行","description":"饼状图 label换行","latestVersion":1,"alwaysLatest":1,"createTime":"2020-08-10T07:59:13.000Z","lastUpdateTime":"2020-08-10T07:59:13.000Z","auth":2,"uid":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-10T07:59:13.000Z","code":"let colorList = [\r\n    \"#5a91fb\",\r\n    \"#5ad9a7\",\r\n    \"#f7bd16\",\r\n    \"#6ec9eb\",\r\n    \"#955eb9\",\r\n    \"#ff9944\",\r\n    \"#1e9593\",\r\n    \"#ff99c3\",\r\n    \"#e86452\",\r\n]\r\n\r\nlet seriesData = [{\r\n        name: \"保护工程\",\r\n        value: 2,\r\n    },\r\n    {\r\n        name: \"展示工程\",\r\n        value: 1,\r\n    },\r\n]\r\n\r\nlet keepWordNum = 2 // 每几个字换行\r\noption = {\r\n    title: {},\r\n    color: colorList,\r\n    tooltip: {\r\n        trigger: \"item\",\r\n        formatter: \"{b} : {c}<br/> ({d}%)\",\r\n    },\r\n    calculable: true,\r\n    series: [{\r\n            name: \"测试集\",\r\n            type: \"pie\",\r\n            hoverAnimation: false,\r\n            selectedMode: \"single\",\r\n            radius: \"70%\",\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: \"inner\", //显示在扇形上\r\n                    formatter: \"{c}\", //显示内容\r\n                    textStyle: {\r\n                        color: \"white\", // 改变标示文字的颜色\r\n                        fontSize: 12, //文字大小\r\n                        fontWeight: \"bold\",\r\n                    },\r\n                },\r\n            },\r\n            data: seriesData,\r\n        },\r\n        {\r\n            type: \"pie\",\r\n            radius: \"70%\",\r\n            hoverAnimation: false,\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        fontSize: 14,\r\n                    },\r\n                    formatter: (param) => {\r\n                        let newStr = \"\";\r\n                        let start, end;\r\n                        let name_len = param.name.length; //每个内容名称的长度\r\n                        let max_name = keepWordNum; //每行最多显示的字数\r\n                        let new_row = Math.ceil(name_len / max_name); // 最多能显示几行，向上取整比如2.1就是3行\r\n                        if (name_len > max_name) { //如果长度大于每行最多显示的字数\r\n                         for (let i = 0; i < new_row; i++) { //循环次数就是行数\r\n                                let old = ''; //每次截取的字符\r\n                                start = i * max_name; //截取的起点\r\n                                end = start + max_name; //截取的终点\r\n                                if (i == new_row - 1) { //最后一行就不换行了\r\n                                    old = param.name.substring(start);\r\n                                } else {\r\n                                    old = param.name.substring(start, end) + \"\\n\";\r\n                                }\r\n                                newStr += old; //拼接字符串\r\n                            }\r\n                        } else { //如果小于每行最多显示的字数就返回原来的字符串\r\n                            newStr = param.name;\r\n                        }\r\n                        return `${newStr}\\n${Math.round(param.percent)}%` \r\n                    },\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    length: 10,\r\n                    length2: 10,\r\n                    smooth: true,\r\n                    lineStyle: {\r\n                        width: 2,\r\n                    },\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    shadowBlur: 30,\r\n                    shadowColor: \"rgba(0, 0, 0, 0.4)\",\r\n                },\r\n            },\r\n            data: seriesData,\r\n\r\n        },\r\n    ],\r\n}","html":"","externalScripts":"","updaterUID":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","theme":"","layout":"","viewCount":160,"userName":"b***n","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNZ_P5xItg.png?v=1597046353395","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title","tooltip"],"customTags":["pic"],"updaterUserName":"b***n"}}