{"status":0,"data":{"cid":"xV865BAG4j","authorUid":"bd-167860219","authorUserName":"n***1","title":"百度地图上加载矢量图形","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-10-15T05:16:49.000Z","lastUpdateTime":"2021-10-17T09:22:15.000Z","auth":2,"uid":"bd-167860219","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-17T09:19:40.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1634462112438-OzwyHUKbG.json\";\n\n//var uploadedDataURL = \"/asset/get/s/data-1634274766926-660z1p06g.json\";\n\n    //定义自定义图形渲染函数\n    function renderItem(params, api, points, lw) {\n        var coords = points[params.dataIndex];\n        var shape_points = [];\n        for (var i = 0; i < coords.length; i++) {\n            shape_points.push(api.coord(coords[i]));\n        }\n\n        var P = {\n            type: 'polygon',\n            shape: {\n                points: shape_points\n            },\n            style: api.style({\n                \n                stroke: 'rgba(0,0,0,0.1)',\n                lineWidth: lw\n            })\n        };\n        return P\n    }\n\n    function getgeojsondata(zone, name,valuename) {\n        var points = [];\n        var shape_name = []\n        \n        for (var j = 0; j < zone['features'].length; j++) {\n            var temp = [];\n            var area = zone['features'][j]['geometry']['coordinates'];\n            if (area.length == 1) {\n                area = area[0]\n                for (var i = 0; i < area.length; i++) {\n                    temp.push(area[i])\n                }\n                points.push(temp)\n            \n                shape_name.push({name:zone['features'][j]['properties'][name],\n                    value:zone['features'][j]['properties'][valuename]}\n                    )\n                        \n                    \n                \n            } else {\n                for (var k = 0; k < area.length; k++) {\n                    area1 = area[k][0]\n                    var temp = [];\n                    for (var i = 0; i < area1.length; i++) {\n                        temp.push(area1[i])\n                    }\n                    points.push(temp)\n                               \n                shape_name.push({name:zone['features'][j]['properties'][name],\n                    value:zone['features'][j]['properties'][valuename]}\n                    )\n                    \n                }\n            }\n        }\n        return [points, shape_name]\n    }\n$.getJSON(uploadedDataURL, function (zone) {\n            //整理shape坐标点\n            zonedata = getgeojsondata(zone, 'qh','count')\n            points = zonedata[0]\n            shape_name = zonedata[1]\n            console.log(shape_name)\n            var option = {\n                bmap: {\n                    center: [114.118600, 22.650422],\n                    zoom: 12,\n                    roam: true,\n                    /*\n                    mapStyle: {\n                        styleJson: styleJson\n                    }*/\n                },\n                visualMap:{min:0,max:1500,\n                text: ['High', 'Low'],\n                realtime: false,\n        calculable: true,\n                    inRange:{\n                         color: ['#070093', '#1c3fbf', '#1482e5', '#70b4eb', '#b4e0f3', '#ffffff']\n                    }\n                    \n                },\n                title: {\n                    text: \"\",\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 30\n                    }\n                },\n                legend: {},\n                tooltip: {},\n                series: [{\n                    type: 'custom',\n                    coordinateSystem: 'bmap',\n                    data:shape_name,\n                    renderItem: function(params, api) { return renderItem(params, api, points, 1.5) }\n                }],\n            };\n\n            // 使用刚指定的配置项和数据显示图表。\n            myChart.setOption(option, true);\n    });\n\n","html":"","externalScripts":"http://api.map.baidu.com/getscript?v=2.0&ak=KOmVjPVUAey1G2E8zNhPiuQ6QiEmAwZu&s=1,https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/bmap.js","updaterUID":"bd-167860219","theme":"default","layout":"","viewCount":0,"userName":"n***1","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xV865BAG4j.png?v=1634462537466","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"n***1"}}