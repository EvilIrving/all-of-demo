{"status":0,"data":{"cid":"xbAGzPOlyN","authorUid":"bd-4240785066","authorUserName":"小***丶","title":"爱吃水果指数","description":"双y轴，支持鼠标滚动，点击背景和图触发不同的事件","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-17T09:46:36.000Z","lastUpdateTime":"2020-06-17T09:46:36.000Z","auth":1,"uid":"bd-4240785066","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-09T10:20:15.000Z","code":"//柱状图  渐变色双y轴\n\n//可以鼠标滚动\n\n//点击背景和点击图形触发不同的事件\n\nlet dataList = [{\n    name: '苹果',\n    value: '56'\n}, {\n    name: '橘子',\n    value: '75'\n}, {\n    name: '香蕉',\n    value: '85'\n}, {\n    name: '火龙果',\n    value: '78'\n}, {\n    name: '西瓜',\n    value: '76'\n}, {\n    name: '椰子',\n    value: '45'\n}, {\n    name: '葡萄',\n    value: '100'\n}];\n\n\nmyChart.setOption({\n    backgroundColor: 'rgb(20,28,52)',\n    grid: {\n        left: \"10%\", //距离左边的距离\n        right: \"13%\", //距离右边的距离\n        bottom: \"10%\", //距离下边的距离\n        top: \"8%\" //距离上边的距离\n    },\n    title: {\n        text: '爱吃水果指数',\n        left: 26,\n        top: 26,\n        textStyle: {\n            color: '#FFFFFF',\n            fontSize: 15,\n            fontWeight: 50000,\n            fontFamily: 'PingFang SC'\n        }\n    },\n    toolbox: {\n        feature: {\n            dataView: {\n                show: true,\n                readOnly: true\n            },\n            magicType: {\n                show: true,\n                type: [\"line\", \"bar\"]\n            },\n            restore: {\n                show: false\n            },\n            saveAsImage: {\n                show: true,\n                name: \"爱吃水果指数统计图\",\n                pixelRatio: 2\n            }\n        },\n        iconStyle: {\n            normal: {\n                borderColor: \"#41A7DE\"\n            }\n        },\n        itemSize: 12,\n        top: 20,\n        right: 22\n    },\n    tooltip: {\n        trigger: \"axis\",\n        axisPointer: {\n            type: \"shadow\",\n            crossStyle: {\n                color: \"#999\"\n            }\n        },\n    },\n    xAxis: [{\n        type: \"category\",\n        data: ['苹果', '橘子', '香蕉', '火龙果', '西瓜', '椰子', '葡萄'],\n        axisLabel: {\n            textStyle: {\n                color: \"#ffffff\",\n                fontSize: 14,\n                fontFamily: \"Microsoft YaHei\"\n            }\n        },\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        }\n    }],\n    yAxis: [{\n            type: \"value\",\n            axisLabel: {\n                formatter: \"{value}\",\n                textStyle: {\n                    color: \"#fff\",\n                    fontSize: 12,\n                    fontFamily: \"Microsoft YaHei\"\n                },\n            },\n            splitLine: {\n                lineStyle: {\n                    color: \"#666\"\n                }\n            },\n            axisLine: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            }\n        },\n        {\n            type: \"value\",\n            axisLabel: {\n                formatter: \"{value}\",\n                textStyle: {\n                    color: \"#fff\",\n                    fontSize: 12,\n                    fontFamily: \"Microsoft YaHei\"\n                }\n            },\n            splitLine: {\n                show: false\n            },\n            axisLine: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            }\n        }\n    ],\n    dataZoom: [{\n        type: 'inside',\n        start: 0,\n        end: dataList.length > 15 ? 35 : 100\n    }],\n    series: [{\n            name: \"爱吃指数\",\n            type: \"bar\",\n            data: dataList,\n            barGap: '-100%',\n            barCategoryGap: '60%',\n            itemStyle: {\n                normal: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: '#499ef4'\n                        },\n                        {\n                            offset: 1,\n                            color: '#3eb5dd'\n                        }\n                    ])\n                },\n                emphasis: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                            offset: 0,\n                            color: '#3eb5dd'\n                        },\n                        {\n                            offset: 1,\n                            color: '#499ef4'\n                        }\n                    ])\n                }\n            },\n        },\n        {\n            name: \"爱吃水果占比\",\n            type: \"line\",\n            yAxisIndex: 1,\n            data: dataList,\n            itemStyle: {\n                normal: {\n                    color: \"#ff7f50\"\n                }\n            }\n        }\n    ]\n})\n\n//这里先解绑，防治click事件触发多次\nmyChart.off('click')\n\n//这里使用getZr(),直接使用click方法点击背景不会触发\nmyChart.getZr().on('click', params => {\n    const pointInPixel = [params.offsetX, params.offsetY]\n\n    if (myChart.containPixel('grid', pointInPixel)) {\n        const pointInGrid = Math.abs(myChart.convertFromPixel(\n            'grid',\n            pointInPixel\n        )[0])\n        //这个就是当前的index下标\n        console.log(pointInGrid)\n        //这里就是当前的值\n        console.log(dataList[pointInGrid])\n\n    } else {\n        console.log('点击的是背景...')\n    }\n})","html":"","externalScripts":"","updaterUID":"obd-oDTaSsOr-wX377H0NTFlSgkWdNeHP1K","theme":"roma","layout":"","viewCount":1359,"userName":"小***丶","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xbAGzPOlyN.png?v=1623234015313","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"x***z"}}