{"status":0,"data":{"cid":"xb8oMeSMtA","authorUid":"bd-1830065533","authorUserName":"q***9","title":"最值差别很大图标","description":"仅提供了处理思路。如果两个数据对于均值都超过两倍，暂未处理。\n\n如果要使用，请尽量处理数据指纹标识问题","latestVersion":1,"alwaysLatest":1,"createTime":"2019-05-29T08:52:21.000Z","lastUpdateTime":"2019-05-29T08:52:21.000Z","auth":2,"uid":"bd-1830065533","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-29T08:52:21.000Z","code":"var data = [120, 132, 101, 134, 90, 230, 100000];\nvar sum = function(array) {\n    var value = 0;\n    array.forEach(item => {\n        value += item;\n    });\n    return value;\n}\nvar avg = function(array) {\n    return Math.round(sum(array) / array.length);\n};\n\nvar rateCache = {};\nvar findInCache = function(value) {\n    for (var key in rateCache) {\n        var cache = rateCache[key];\n        if (cache && cache.out === value) {\n            return cache;\n        }\n    }\n    return null;\n}\nvar convertData = function(item, avg) {\n    var larger = item > avg * 2;\n    if (larger) {\n        rateCache['rc_' + item] = {\n            avg: avg,\n            orign: item,\n            out: avg * 2\n        }\n        return avg * 2;\n    }\n    return item;\n}\nvar newData = [];\n//计算最值，剔除最值\nvar max = Math.max.apply(null, data);\nvar min = Math.min.apply(null, [1, 4, 6, 1000]);\n//剔除最值\nvar avgArray = [];\ndata.forEach(item => {\n    if (item === max || item === min) {\n        return;\n    }\n    avgArray.push(item);\n});\nvar arrayAvgMax = Math.max.apply(null, avgArray);\nvar arrayAvg = avg(avgArray);\ndata.forEach(item => {\n    newData.push(convertData(item, arrayAvg));\n});\nvar newDataMax = Math.max.apply(null, newData);\noption = {\n    title: {\n        text: '折线图'\n    },\n    tooltip: {\n        trigger: \"axis\",\n        formatter: function(params) {\n            var xAxis = params[0].axisValueLabel;\n            var html = [];\n            html.push(\"<div>\");\n            html.push(\"<div>\")\n            html.push(\"<div>\")\n            html.push(xAxis)\n            html.push(\"</div>\")\n            html.push(\"<div>\")\n            params.forEach(item => {\n                var value = item.value;\n                var inCache = findInCache(value);\n                if (inCache) {\n                    value = inCache.orign\n                }\n                html.push(\"<div>\");\n                html.push(item.marker);\n                html.push(item.seriesName);\n                html.push(\":\");\n                html.push(value);\n                html.push(\"</div>\")\n            })\n            html.push(\"</div>\")\n            html.push(\"</div>\");\n            return html.join(\"\");\n        }\n    },\n    xAxis: {\n        type: 'category',\n        data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\n    },\n    yAxis: {\n        type: 'value',\n        max: newDataMax,\n        axisLabel: {\n            formatter: function(value, index) {\n                if (value >= newDataMax) {\n                    return max;\n                }\n                return value;\n            }\n        }\n    },\n    series: [{\n        name: '邮件营销',\n        type: 'line',\n        stack: '总量',\n        data: newData\n    }, ]\n};","html":"","externalScripts":"","updaterUID":"bd-1830065533","theme":"","layout":"","viewCount":59,"userName":"q***9","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xb8oMeSMtA.png?v=1559119941239","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title","tooltip"],"customTags":[],"updaterUserName":"q***9"}}