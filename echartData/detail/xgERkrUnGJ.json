{"status":0,"data":{"cid":"xgERkrUnGJ","authorUid":"obd-oML8IrWqNsv2a7qu1uoEgj47lxKsN2t","authorUserName":"小***天","title":"折线图 数据联动 月份跟随切换 ","description":"折线图 数据联动 月份跟随切换 ","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-09T03:17:12.000Z","lastUpdateTime":"2020-09-09T03:17:12.000Z","auth":2,"uid":"obd-oML8IrWqNsv2a7qu1uoEgj47lxKsN2t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-09T03:21:13.000Z","code":"var prevM = '1',\r\n    currentM = '2',\r\n    nextM = '3';\r\nvar xMouth = [prevM + '月', currentM + '月', nextM + '月']; //底部x轴动态展示月份 数据 动态修改\r\nvar tarr = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];\r\nvar arr = [{\r\n    name: '内容一',\r\n    data: ['12', '23', '34', '4', '15', '76', '37', '38', '19', '10', '11', '62']\r\n}, {\r\n    name: '内容二',\r\n    data: ['15', '26', '37', '54', '57', '36', '27', '28', '29', '30', '51', '12']\r\n}, {\r\n    name: '内容三',\r\n    data: ['11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22']\r\n}];\r\n\r\n\r\nvar datas = {\r\n    data1: arr[0].data.slice(0, 3),\r\n    data2: arr[1].data.slice(0, 3),\r\n    data3: arr[2].data.slice(0, 3),\r\n};\r\n\r\nvar setData = function(month, type) {\r\n    // console.log(month)\r\n    datas.data1 = arr[0].data.slice(month - 1, month + 2);\r\n    datas.data2 = arr[1].data.slice(month - 1, month + 2);\r\n    datas.data3 = arr[2].data.slice(month - 1, month + 2);\r\n    if (type === 0) {\r\n        return datas.data1;\r\n    }\r\n    if (type === 1) {\r\n        return datas.data2;\r\n    }\r\n    if (type === 2) {\r\n        return datas.data3;\r\n    }\r\n\r\n}\r\nsetData(10, 2)\r\n\r\n\r\nvar pj = function(v, x) {\r\n    return v.concat(x);\r\n}\r\n\r\nvar dataArrs = []\r\nvar setDataObj = function() {\r\n    for (let key in tarr) {\r\n\r\n        if (key == 0) {\r\n            dataArrs.push({\r\n                xAxis: {\r\n                    'data': ['12月', Number(key)+1+'月', Number(key)+2+'月']\r\n                },\r\n                name: tarr[key],\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        'data': pj(arr[0].data.slice(11), arr[0].data.slice(0, 2)), //0 军委首长 数据3条 第一天线 1月份 2y月份 月份数据3y\r\n                    },\r\n                    {\r\n                        'data': pj(arr[1].data.slice(11), arr[1].data.slice(0, 2)), //第二条线 1军委机关及院领导\r\n                    },\r\n                    {\r\n                        'data': pj(arr[2].data.slice(11), arr[2].data.slice(0, 2)), //第三条线 2军委机关业务局领导\r\n                    }\r\n                ],\r\n            })\r\n        } else if (key == 11) {\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                xAxis: {\r\n                    'data': [Number(key)+'月', Number(key)+1+'月', '1月']\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        'data': pj(arr[0].data.slice(10), arr[0].data.slice(0, 1)), //0 军委首长 数据3条 第一天线 1月份 2y月份 月份数据3y\r\n                    },\r\n                    {\r\n                        'data': pj(arr[1].data.slice(10), arr[1].data.slice(0, 1)), //第二条线 1军委机关及院领导\r\n                    },\r\n                    {\r\n                        'data': pj(arr[2].data.slice(10), arr[2].data.slice(0, 1)), //第三条线 2军委机关业务局领导\r\n                    }\r\n                ],\r\n            })\r\n        } else {\r\n\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                xAxis: {\r\n                    'data': [Number(key)+'月', Number(key)+1+'月', Number(key)+2+'月']\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        'data': arr[0].data.slice(key - 1, (Number(key) + 2)), //0 军委首长 数据3条 第一天线 1月份 2y月份 月份数据3y\r\n                    },\r\n                    {\r\n                        'data': arr[1].data.slice(key - 1, (Number(key) + 2)), //第二条线 1军委机关及院领导\r\n                    },\r\n                    {\r\n                        'data': arr[2].data.slice(key - 1, (Number(key) + 2)), //第三条线 2军委机关业务局领导\r\n                    }\r\n                ],\r\n            })\r\n        }\r\n    }\r\n};\r\n\r\n\r\nconsole.log(dataArrs)\r\noption = {\r\n    baseOption: {\r\n        timeline: {\r\n            data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\r\n            axisType: 'category',\r\n            show: true,\r\n            autoPlay: true,\r\n            currentIndex: 0,\r\n            loop: true,\r\n            playInterval: 3000,\r\n            controlStyle: {\r\n                showNextBtn: true,\r\n                showPrevBtn: true,\r\n                showPlayBtn: true\r\n            },\r\n\r\n        },\r\n\r\n        backgroundColor: \"#000\",\r\n        tooltip: {\r\n            'trigger': 'axis'\r\n        },\r\n\r\n        calculable: true,\r\n\r\n        grid: {\r\n            top: \"30%\",\r\n            'y': 10,\r\n            'y2': 80\r\n        },\r\n\r\n        \"color\": [\"#49c7ad\", \"#ffa55b\", \"#4a90e2\"],\r\n        \"legend\": {\r\n\r\n            \"top\": \"2%\",\r\n            \"left\": \"50%\",\r\n            \"textStyle\": {\r\n                \"fontSize\": 12,\r\n                \"color\": \"#ffff0\"\r\n            },\r\n            \"data\": ['内容一', '内容二', '内容三'],\r\n            icon: \"circle\",\r\n        },\r\n        xAxis: {\r\n            'type': 'category',\r\n            'axisLabel': {\r\n                'interval': 0\r\n            },\r\n\r\n            'data': xMouth\r\n        },\r\n        yAxis: [{\r\n            'type': 'value',\r\n\r\n            'show': true\r\n        }, {\r\n            'type': 'value',\r\n\r\n            'show': false\r\n        }],\r\n        series: [{\r\n                type: 'bar',\r\n                barWidth: 50,\r\n                animation: false,\r\n                data: [100, 100, 100],\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#333b59',\r\n                        opacity: 0.8\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                }\r\n\r\n            },\r\n            {\r\n                'name': '内容一',\r\n                'yAxisIndex': 1,\r\n                'type': 'line',\r\n                smooth: true, //是否平滑\r\n                showAllSymbol: true,\r\n                symbol: 'circle',\r\n                symbolSize: 20,\r\n                lineStyle: {\r\n                normal: {\r\n                    color: \"#6c50f3\",\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 5,\r\n                    shadowOffsetX: 5,\r\n                },\r\n            },\r\n                label: {\r\n                    show: true,\r\n                    position: 'top',\r\n                    textStyle: {\r\n                        color: '#6c50f3',\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: \"#6c50f3\",\r\n                    borderColor: \"#fff\",\r\n                    borderWidth: 3,\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 2,\r\n                    shadowOffsetX: 2,\r\n                },\r\n\r\n                'data': [10,10,10], //首长数据3条 第一天线\r\n\r\n\r\n            },\r\n            {\r\n\r\n                'name': '内容二',\r\n                'yAxisIndex': 1,\r\n                'type': 'line',\r\n                smooth: true, //是否平滑\r\n                showAllSymbol: true,\r\n                symbol: 'circle',\r\n                symbolSize: 20,\r\n                lineStyle: {\r\n                normal: {\r\n                    color: \"#00ca95\",\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 5,\r\n                    shadowOffsetX: 5,\r\n                },\r\n            },\r\n            label: {\r\n                show: true,\r\n                position: 'top',\r\n                textStyle: {\r\n                    color: '#00ca95',\r\n                }\r\n            },\r\n\r\n            itemStyle: {\r\n                color: \"#00ca95\",\r\n                borderColor: \"#fff\",\r\n                borderWidth: 3,\r\n                shadowColor: 'rgba(0, 0, 0, .3)',\r\n                shadowBlur: 0,\r\n                shadowOffsetY: 2,\r\n                shadowOffsetX: 2,\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                            offset: 0,\r\n                            color: 'rgba(0,202,149,0.3)'\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: 'rgba(0,202,149,0)'\r\n                        }\r\n                    ], false),\r\n                    shadowColor: 'rgba(0,202,149, 0.9)',\r\n                    shadowBlur: 20\r\n                }\r\n            },\r\n                'data': [20,20,20], //第二条线\r\n\r\n\r\n            },\r\n            {\r\n\r\n                'name': '内容三',\r\n                'yAxisIndex': 1,\r\n                'type': 'line',\r\n                smooth: true, //是否平滑\r\n                showAllSymbol: true,\r\n                symbol: 'circle',\r\n                symbolSize: 20,\r\n                lineStyle: {\r\n                normal: {\r\n                    color: \"orange\",\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 5,\r\n                    shadowOffsetX: 5,\r\n                },\r\n            },\r\n            label: {\r\n                show: true,\r\n                position: 'top',\r\n                textStyle: {\r\n                    color: 'orange',\r\n                }\r\n            },\r\n\r\n            itemStyle: {\r\n                color: \"orange\",\r\n                borderColor: \"white\",\r\n                borderWidth: 3,\r\n                shadowColor: '',\r\n                shadowBlur: 0,\r\n                shadowOffsetY: 2,\r\n                shadowOffsetX: 2,\r\n            },\r\n            areaStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                            offset: 0,\r\n                            color: 'rgba(0,202,149,0.3)'\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: 'rgba(0,202,149,0)'\r\n                        }\r\n                    ], false),\r\n                    shadowColor: 'rgba(0,202,149, 0.9)',\r\n                    shadowBlur: 20\r\n                }\r\n            },\r\n                'data': [30,30,30], //第三条线\r\n            }\r\n        ],\r\n    },\r\n    options: dataArrs,\r\n};\r\n\r\nsetDataObj();","html":"","externalScripts":"","updaterUID":"obd-oML8IrWqNsv2a7qu1uoEgj47lxKsN2t","theme":"","layout":"","viewCount":300,"userName":"小***天","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgERkrUnGJ.png?v=1599621673669","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","timeline","tooltip"],"customTags":[],"updaterUserName":"小***天"}}