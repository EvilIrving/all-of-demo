{"status":0,"data":{"cid":"xnzOjiHmZv","authorUid":"obd-oPXyaozbbWKGInN7iHnMzWMPARkuj9l","authorUserName":"龙***恒","title":"地图折线标记物","description":"地图折线标记物","latestVersion":6,"alwaysLatest":1,"createTime":"2020-11-10T05:45:54.000Z","lastUpdateTime":"2020-11-10T05:58:36.000Z","auth":2,"uid":"obd-oPXyaozbbWKGInN7iHnMzWMPARkuj9l","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-10T06:04:46.000Z","code":"/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\nvar uploadedDataURL = \"/asset/get/s/data-1604987052721-RrDEffHjT.json\";\nvar powerData = [{\n    name: '阎家梁风场',\n    symbol: 'circle',\n    coords: [[114.18, 40.45], [114.58, 40.55],[115.48, 40.55]],\n    value: [20],\n  }]\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    var data = geoJson.features.map((feature) => {\n        // return 0\n        return {\n            name: feature.properties.name,\n            id: feature.id,\n            value: 0,\n        };\n    });\n\n    echarts.registerMap('shanxi', geoJson);\n    myChart.hideLoading();\n\n    let option = {\n        title: {\n            show: false,\n        },\n        grid: {\n            left: 10,\n            top: 20,\n            right: 10,\n            bottom: 30\n        },\n        geo: {\n            geoIndex: 1,\n            map: 'shanxi',\n            label: {\n                show: false\n            },\n            zoom: 1.2,\n            animation: false\n        },\n\n        series: [{\n                name: 'main',\n                z: 2,\n                type: 'map',\n                map: 'shanxi',\n                mapType: \"shanxi\",\n                zoom: 1.2,\n                label: {\n                    show: true,\n                    formatter(params) {\n                        return `￮ ${params.name}`;\n                    },\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 14,\n                        fontFamily: 'MicrosoftYaHei',\n                        backgroundColor: 'transparent',\n                    },\n                },\n                itemStyle: {\n                    color: '#004790',\n                    borderWidth: 1,\n                    borderColor: '#54ADFF',\n                    areaColor: '#004790',\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        color: '#fff',\n                    },\n                    itemStyle: {\n                        color: '#17BBFF',\n                        borderColor: '#54ADFF',\n                        areaColor: '#17BBFF'\n                    },\n                },\n                data,\n            },\n            {\n                // 折线\n                type: 'lines',\n                coordinateSystem: 'geo',\n                symbol: 'circle',\n                polyline: true,\n                symbolSize: [14, 0],\n                z: 5,\n                lineStyle: {\n                    type: 'solid',\n                    opacity: 1,\n                    color: 'red',\n                    curveness: 0\n                },\n                label: {\n                    show: true,\n                    position: 'end',\n                    formatter: (params) => {\n                        // return `{a|${params.data.names}}`\n                        return params.data.name\n                    },\n                },\n                data: powerData\n            },\n            {\n                // 文字\n                type: 'lines',\n                coordinateSystem: 'geo',\n                symbol: 'circle',\n                symbolSize: [14, 0],\n                z: 5,\n                lineStyle: {\n                    type: 'solid',\n                    opacity: 0,\n                    color: 'red',\n                    curveness: 0\n                },\n                label: {\n                    show: true,\n                    padding: [0, 0, 15, 0],\n                    position: 'end',\n                    formatter: (params) => {\n                        // return `{a|${params.data.names}}`\n                        return params.data.name\n                    },\n                },\n                data: powerData\n            },\n            {\n                // 标注点\n                type: 'lines',\n                coordinateSystem: 'geo',\n                symbol: 'circle',\n                symbolSize: [14, 0],\n                z: 5,\n                lineStyle: {\n                    type: 'solid',\n                    opacity: 1,\n                    color: 'red',\n                    curveness: 0\n                },\n                data: powerData\n            },\n        ],\n    }\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"obd-oPXyaozbbWKGInN7iHnMzWMPARkuj9l","theme":"default","layout":"","viewCount":88,"userName":"龙***恒","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xnzOjiHmZv.png?v=1604988286144","isCustomThumbnail":0,"builtinTags":[],"customTags":[],"updaterUserName":"龙***恒"}}