{"status":0,"data":{"cid":"xZSZzhFtHX","authorUid":"obd-olRli-x7XCduYZxsmJ9fQSRbj9Uuu0c","authorUserName":"6***3","title":"占比环图 ","description":"","latestVersion":6,"alwaysLatest":1,"createTime":"2020-04-03T09:39:43.000Z","lastUpdateTime":"2020-04-03T09:39:43.000Z","auth":1,"uid":"obd-olRli-x7XCduYZxsmJ9fQSRbj9Uuu0c","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-22T08:35:26.000Z","code":"var requiedList = [{\r\n    name: '硕士',\r\n    value: 110\r\n}, {\r\n    name: '博士',\r\n    value: 320\r\n}, {\r\n    name: '其他',\r\n    value: 840\r\n}, ];\r\nvar chartColor = [{ // 完成的圆环的颜色\r\n    colorStops: [{\r\n        offset: 0,\r\n        color: '#ff6a6a'\r\n    }, {\r\n        offset: 1,\r\n        color: '#fd4547'\r\n    }]\r\n},{ \r\n    colorStops: [{\r\n        offset: 0,\r\n        color: '#3f0fd2'\r\n    }, {\r\n        offset: 1,\r\n        color: '#c24ff4'\r\n    }]\r\n}, { \r\n    colorStops: [{\r\n        offset: 0,\r\n        color: '#3eaec2'\r\n    }, {\r\n        offset: 1,\r\n        color: '#63ecae'\r\n    }]\r\n}, ]\r\nvar fontColor = [\"#ff9494\", \"#007eff\", '#63ecae','#c24ff4',]\r\nvar requiedData = [],\r\n    requiedSeries = [],\r\n    sumVal = 0;\r\nrequiedList.forEach((item, idx) => {\r\n    requiedData.push({\r\n        name: item.name,\r\n        textStyle: {\r\n            color: fontColor[idx],\r\n        },\r\n    });\r\n    sumVal += item.value;\r\n})\r\nrequiedList.forEach((item, index) => {\r\n    let chartData = [];\r\n    requiedList.forEach((cItem, cIndex) => {\r\n        if (cIndex == index) {\r\n            chartData.push({\r\n                value: cItem.value,\r\n                name: cItem.name,\r\n            \r\n                label: {\r\n                    formatter: cItem.name + '  ' + parseFloat(cItem.value / sumVal).toFixed(4) * 100 + '%'\r\n                ,\r\n                    color:fontColor[cIndex],\r\n                },\r\n            })\r\n        } else {\r\n            chartData.push({\r\n                value: cItem.value,\r\n                name: ' ',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\"\r\n                }\r\n            })\r\n        }\r\n    })\r\n    if (index != requiedList.length - 1) {\r\n        // 处理每个环的data\r\n\r\n\r\n        requiedSeries.push({\r\n            name: '达标率',\r\n            type: 'pie', //设为饼图\r\n            radius: ['70%', '75%'], //设置内半径和外半径，形成环状\r\n            startAngle: 90, //设置起始角度\r\n            clockWise: false, //默认逆时针\r\n            avoidLabelOverlap: true, //避免标注重叠\r\n            hoverAnimation: false, //移入放大\r\n            silent: true,\r\n            center: '50%',\r\n            label: {\r\n                emphasis: {\r\n                    //show: false,\r\n                    textStyle: {\r\n                        fontSize: '10',\r\n                        fontWeight: 'bold',\r\n                    }\r\n                }\r\n            },\r\n            data: chartData,\r\n        }, {\r\n            value: 2,\r\n            name: '111',\r\n            type: 'pie', //设为饼图\r\n            radius: ['70%', '75%'], //设置内半径和外半径，形成环状\r\n            startAngle: 90, //设置起始角度\r\n            clockWise: false, //默认逆时针\r\n            avoidLabelOverlap: true, //避免标注重叠\r\n            hoverAnimation: false, //移入放大\r\n            silent: true,\r\n            center: '50%',\r\n            label: {\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        fontSize: '10',\r\n                        fontWeight: 'bold'\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: false\r\n                    },\r\n                    labelLine: {\r\n                        show: false\r\n                    },\r\n                    color: 'rgba(0, 0, 0, 0)',\r\n                    borderColor: 'rgba(0, 0, 0, 0)',\r\n                    borderWidth: 0\r\n                }\r\n            }\r\n        })\r\n\r\n    } else {\r\n\r\n        requiedSeries.push({\r\n            name: '达标率',\r\n            type: 'pie', //设为饼图\r\n            radius: ['65%', '70%'], //设置内半径和外半径，形成环状\r\n            startAngle: 90, //设置起始角度\r\n            clockWise: false, //默认逆时针\r\n            avoidLabelOverlap: false, //避免标注重叠\r\n            hoverAnimation: false, //移入放大\r\n            silent: true,\r\n            center: '50%',\r\n            label: {\r\n                emphasis: {\r\n                    //show: false,\r\n                    textStyle: {\r\n                        fontSize: '30',\r\n                        fontWeight: 'bold'\r\n                    }\r\n                }\r\n            },\r\n            data: chartData,\r\n        })\r\n\r\n    }\r\n    console.log(JSON.stringify(requiedSeries))\r\n})\r\n\r\n\r\noption = {\r\n    legend: { //配置图例\r\n        orient: 'vertical',\r\n        //orient: 'horizontal', //布局方式，默认水平布局，另可选vertical\r\n        x: 'left',\r\n        y: 'center', //垂直放的位置，可以写top，center，bottom，也可以写px或者百分比。x轴方向同理，默认center\r\n        //icon: \"circle\",\r\n\r\n        selectedMode: false, //选中哪个图例 false后图例不可点击\r\n        textStyle: {\r\n            fontSize: 14,\r\n        },\r\n        data: requiedData,\r\n\r\n\r\n    },\r\n    color: chartColor, //环形的颜色\r\n    graphic: [{ //环形图中间添加文字\r\n        type: 'text', //通过不同top值可以设置上下显示\r\n        left: 'center',\r\n        top: 'center',\r\n        style: {\r\n            text: '学历数', //（自己设置显示内容）,\r\n            textAlign: 'center',\r\n            fill: '#000', //文字的颜色\r\n            width: 30,\r\n            height: 30,\r\n            fontSize: 18,\r\n            color: \"#4d4f5c\",\r\n            fontFamily: \"Microsoft YaHei\"\r\n        }\r\n    }, ],\r\n    series: requiedSeries\r\n\r\n};","html":"","externalScripts":"","updaterUID":"obd-olRli-x7XCduYZxsmJ9fQSRbj9Uuu0c","theme":"","layout":"","viewCount":153,"userName":"6***3","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZSZzhFtHX.png?v=1587544526269","isCustomThumbnail":0,"builtinTags":["category-work","graphic","legend","series-pie"],"customTags":[],"updaterUserName":"6***3"}}