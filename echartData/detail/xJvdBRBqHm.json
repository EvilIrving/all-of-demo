{"status":0,"data":{"cid":"xJvdBRBqHm","authorUid":"obd-otekrZuSZt8ceA74B914GnWbEZyav85","authorUserName":"派***u","title":"超实用圆环图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-10-20T10:18:44.000Z","lastUpdateTime":"2021-10-20T10:20:56.000Z","auth":2,"uid":"obd-otekrZuSZt8ceA74B914GnWbEZyav85","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-20T10:20:56.000Z","code":"let title = '售票数量';\nlet color = ['rgb(54,142,243)', 'rgb(2,217,217)', 'rgb(255,237,91)', 'rgb(255,158,91)', 'rgb(84,95,255)'];\nlet angle = 0; //角度，用来做简单的动画效果的\nlet value = [];\nlet data1 =[\n                {value:400,name:'单程票'},\n                {value:389,name:'一日票'},\n                {value:489,name:'三日票'},\n                {value:259,name:'预附值票'},\n                {value:499,name:'纪念票'},\n                ]\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\nlet formatNumber = function (num) {\n    let reg = /(?=(\\B)(\\d{3})+$)/g;\n    return num.toString().replace(reg, ',');\n};\nlet total = data1.reduce((a, b) => {\n    return a + b.value * 1;\n}, 0);\noption = {\n    backgroundColor: 'rgb(0,34,69)',\n    color: color,\n    tooltip: {\n        trigger: 'item',\n    },\n    title: [\n        {\n            text: '{name|' + title + '}\\n{val|' + formatNumber(total) + '}{c|件}',\n            top: 'center',\n            left: '27%',\n            textStyle: {\n                rich: {\n                    name: {\n                        fontSize: 20,\n                        fontWeight: 'normal',\n                        color: 'rgb(132,159,186)',\n                        padding: [10, 0, 0, 20],\n                    },\n                    val: {\n                        fontSize: 32,\n                        fontWeight: 'bold',\n                        color: 'rgb(61,153,252)',\n                        padding:[0,10,0,15]\n                    },\n                    c: {\n                        fontSize: 15,\n                        fontWeight: 'normal',\n                        color: 'rgb(132,159,186)',\n                    },\n                },\n            },\n        },\n    ],\n    legend: {\n        orient: 'vertical',\n        icon: 'rect',\n        x: '70%',\n        y: 'center',\n        itemWidth: 15,\n        itemHeight: 15,\n        itemGap: 10,\n        align: 'left',\n        textStyle: {\n            color: 'rgb(132,159,186)',\n            fontSize: 15,\n            padding: [0, 0, 0, 10],\n        },\n        formatter(name) {\n            let then = option.series[0].data; //获取series中的data\n            let total = 0;\n\n            for (let i = 0; i < then.length; i++) {\n                if (then[i].name != '' && then[i].name != null && then[i].name != undefined) {\n                    total += parseInt(then[i].value);\n                }\n            }\n            var str = '';\n\n            var p = 0;\n            for (let i = 0; i < then.length; i++) {\n                if (then[i].name == name) {\n                    p = (then[i].value / total) * 100;\n                    str = name + '       ' + p.toFixed(2) + '%';\n                }\n            }\n            return str;\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: ['45%', '60%'],\n            center: ['35%', '50%'],\n            data: data1,\n            hoverAnimation: false,\n            itemStyle: {\n                normal: {\n                    borderColor: 'rgb(0,34,69)',\n                    borderWidth: 3,\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                    length: 20,\n                    length2: 120,\n                    lineStyle: {\n                        color: '#e6e6e6',\n                    },\n                },\n            },\n            label: {\n                normal: {\n                    show: false,\n                    formatter: (params) => {\n                        return '{icon|●}{name|' + params.name + '}{value|' + formatNumber(params.value) + '}';\n                    },\n                    padding: [0, -100, 25, -100],\n                    rich: {\n                        icon: {\n                            fontSize: 16,\n                        },\n                        name: {\n                            fontSize: 14,\n                            padding: [0, 10, 0, 4],\n                            color: '#666666',\n                        },\n                        value: {\n                            fontSize: 18,\n                            fontWeight: 'bold',\n                            color: '#333333',\n                        },\n                    },\n                },\n            },\n        },\n        {\n            name: '', //外圆环\n            tooltip: {\n                show: false,\n            },\n            type: 'pie',\n            radius: ['68%', '67%'],\n            center: ['35%', '50%'],\n            hoverAnimation: false,\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false,\n                        color: 'white',\n                    },\n                },\n            },\n            data: [\n                {\n                    value: 50,\n                    name: '',\n                    itemStyle: {\n                        normal: {\n                            color: ' #274C80',\n                            opacity: 0.5,\n                        },\n                    },\n                },\n            ],\n        },\n        {\n            name: '', //下方绿点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = (31 * api.getWidth()) / 90;\n                let y0 = api.getHeight() / 2.97;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2;\n                let point = getCirlPoint(x0, y0, r, 90 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 3,\n                    },\n                    style: {\n                        stroke: '#274C80', //粉\n                        fill: '#274C80',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: '', //上方绿点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = (31 * api.getWidth()) / 88;\n                let y0 = api.getHeight() / 1.51;\n                let r = Math.min(api.getWidth(), api.getHeight()) / 2;\n                let point = getCirlPoint(x0, y0, r, 270 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 3,\n                    },\n                    style: {\n                        stroke: '#274C80', //绿\n                        fill: '#274C80',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n    ],\n}\n\n","html":"","externalScripts":"","updaterUID":"obd-otekrZuSZt8ceA74B914GnWbEZyav85","theme":"","layout":"","viewCount":0,"userName":"派***u","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xJvdBRBqHm.png?v=1634725256826","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"派***u"}}