{"status":0,"data":{"cid":"xj3-V0kEAO","authorUid":"obd-otKTIeBvi9tS0P8LLP05EiPqQnnTu8Z","authorUserName":"a***y","title":"geo+graph","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-25T11:54:52.000Z","lastUpdateTime":"2020-04-25T11:54:52.000Z","auth":2,"uid":"obd-otKTIeBvi9tS0P8LLP05EiPqQnnTu8Z","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-25T11:54:52.000Z","code":"// http://datav.aliyun.com/tools/atlas 阿里云地图选择器 下载需要的数据包\n// 左上角 导入数据 插入到代码\n//var uploadedDataURL = \"/asset/get/s/data-1573454139932-lW0kO573.json\"\nvar uploadedDataURL = \"/asset/get/s/data-1565258572056-CxztNlcgK.json\";\n\n// 标记点\nvar geoCoordMap = {\n    '巴西': [-48.678945, -10.493623],\n    '美国': [-118.24311, 34.052713],\n    '加拿大': [-106.346771, 56.130366],\n    '咸阳': [108.685117, 34.533439],\n    '渭南': [109.802882, 34.499381],\n    '延安': [109.49081, 36.596537],\n    '汉中': [107.028621, 33.077668],\n    '榆林': [109.741193, 38.290162],\n    '安康': [109.029273, 32.6903],\n    '商洛': [109.939776, 33.868319]\n}\n\n//  给value一个随机值\nvar mapData = []\nfor (var key in geoCoordMap) {\n    mapData.push({\n        'name': key,\n        'value': parseInt((Math.random() + 1) * 150)\n    })\n}\n\n// 输出json对象数组,value里包含坐标值和随机值\nfunction convertData(data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name]\n        res.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value)\n        })\n    }\n    return res\n}\n\n//  设置目标点, 配置线条指向\nfunction convertToLineData(data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        // 起点\n        var fromCoord = geoCoordMap[data[i].name]\n        //  终点,这里设置的西安\n        var toCoord = [108.948024, 34.263161]\n        res.push([{\n                coord: fromCoord,\n                value: data[i].value\n            },\n            {\n                coord: toCoord\n            }\n        ])\n    }\n    return res\n}\n\n// 解析地图数据包\n$.getJSON(uploadedDataURL, function(geoJson) {\n    // 注册地图,传入数据\n    echarts.registerMap('echarts', geoJson)\n\n    optionMap = {\n        timeline: {\n            show: false\n        },\n        baseOption: {\n            // 设置地图参数和样式\n            geo: {\n                show: true,\n                map: 'echarts',\n                roam: true,\n                zoom: 1,\n                // 地图中心点, 可调节显示的偏移量\n                center: [108.348024, 35.463161],\n                label: {\n                    // 高亮文字隐藏\n                    emphasis: {\n                        show: false\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        borderColor: 'black',\n                        borderWidth: 1,\n                        areaColor: 'white',\n                        shadowColor: 'rgba(0, 0, 0, 1)',\n                        shadowOffsetX: 0,\n                        shadowOffsetY: 0,\n                        shadowBlur: 1\n                    },\n                    emphasis: {\n                        // 鼠标悬浮高亮\n                        areaColor: 'gray',\n                        borderWidth: 0\n                    }\n                }\n            }\n        },\n        options: [{\n            backgroundColor: 'white',\n            xAxis: {\n                show: false\n            },\n            yAxis: {\n                show: false\n            },\n            series: [{\n                    // 坐标点参数和样式\n                    type: 'effectScatter',\n                    coordinateSystem: 'geo',\n                    data: convertData(mapData),\n                    symbolSize: function(val) {\n                        return val[2] / 100\n                    },\n                    showEffectOn: 'render',\n                    rippleEffect: {\n                        brushType: 'stroke' //波纹绘制方式：stroke,fill\n                    },\n                    label: {\n                        normal: {\n                            formatter: function(params) {\n                                return params.data.name //节点标签文字\n                            },\n                            position: 'right', //显示位置\n                            offset: [0, 0], //偏移设置\n                            show: true\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            color: '#FF4500',\n                            //shadowBlur: 10,\n                            //shadowColor: '#FF4500'\n                        }\n                    }\n                },\n                {\n                    // 线条参数和样式\n                    type: 'lines',\n                    // 变化频率\n                    data: convertToLineData(mapData),\n                    zlevel: 2,\n                    effect: {\n                        show: true,\n                        // 箭头指向速度，值越小速度越快\n                        period: 4,\n                        // 特效尾迹长度,取值0到1,值越大,尾迹越长\n                        trailLength: 0.05,\n                        symbol: 'arrow',\n                        // 图标大小\n                        symbolSize: 5\n                    },\n                    label: {\n                        normal: {\n                            formatter: '11'\n                            ,\n                            position: 'right', //显示位置\n                            offset: [0, 0], //偏移设置\n                            show: true\n                        }\n                    },\n                    symbolSize: 100,\n                    lineStyle: {\n                        normal: {\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1,\n                                //4个参数用于配置渐变色的起止位置, 这4个参数依次对应右/下/左/上四个方位. \n                                //0 0 0 1代表渐变色从正上方开始\n                                [{\n                                    offset: 0, // 0% 处的颜色,offset的范围是0 ~ 1, 用于表示位置\n                                    color: '#009e8e'\n                                }, {\n                                    offset: 0.9, // 90% 处的颜色\n                                    color: '#ff0000'\n                                }], false), //数组, 用于配置颜色的渐变过程. 每一项为一个对象, 包含offset和color两个参数\n                            // 尾迹线条宽度\n\n                            width: 1,\n\n                            //parseInt(data.value)*15,\n                            // 尾迹线条透明度\n                            opacity: 1,\n                            // 尾迹线条曲直度\n                            curveness: 0.3\n                        }\n                    }\n\n                }\n            ]\n        }]\n    }\n    myChart.setOption(optionMap)\n})","html":"","externalScripts":"","updaterUID":"obd-otKTIeBvi9tS0P8LLP05EiPqQnnTu8Z","theme":"","layout":"","viewCount":116,"userName":"a***y","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xj3-V0kEAO.png?v=1587815692386","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-effectScatter","series-lines","timeline"],"customTags":[],"updaterUserName":"a***y"}}