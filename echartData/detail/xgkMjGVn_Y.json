{"status":0,"data":{"cid":"xgkMjGVn_Y","authorUid":"bd-258458457","authorUserName":"破***火","title":"x轴数据分类","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-07-15T07:12:19.000Z","lastUpdateTime":"2019-07-15T07:12:19.000Z","auth":2,"uid":"bd-258458457","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-15T07:12:19.000Z","code":"// 2x轴+假数据列\n// 细粒度数据，必须根据主分类排序\nvar dummy = [\n    ['2015冬','1月',Math.random()*10,Math.random()*10],\n    ['2015冬','2月',Math.random()*20,Math.random()*20],\n    ['2016春','3月',Math.random()*50,Math.random()*50],\n    ['2016春','4月',Math.random()*100,Math.random()*100],\n    ['2016春','5月',Math.random()*150,Math.random()*150],\n    ['2016夏','6月',Math.random()*200,Math.random()*200],\n    ['2016夏','7月',Math.random()*250,Math.random()*250],\n    ['2016夏','8月',Math.random()*200,Math.random()*200],\n    ['2016秋','9月',Math.random()*150,Math.random()*150],\n    ['2016秋','10月',Math.random()*100,Math.random()*100],\n    ['2016秋','11月',Math.random()*20,Math.random()*20],\n    ['2016冬','十二月',Math.random()*10,Math.random()*10]\n];\n// 元数据处理，e.g. metadata.init().xxx\nvar metadata = {\n    flag: true,\n    quarter: [],\n    month: [],\n    data1: [],\n    data2: [],\n    data3: [],\n    x_major_offset: dummy[0][1].length,\n    init: function() {\n        // 首次初始化\n        if (metadata.flag) {\n            // 数据遍历\n            for (var i = 0; i < dummy.length; i++) {\n                //debugger;\n                if (i === 0) {\n                    metadata.quarter.push(dummy[i][0]);\n                } else {\n                    // 与子分类列匹配\n                    metadata.quarter.push(dummy[i-1][0] === dummy[i][0] ? '' : dummy[i][0]);\n                }\n                metadata.month.push(dummy[i][1]);\n                metadata.data1.push(dummy[i][2]);\n                metadata.data2.push(dummy[i][3]);\n                metadata.data3.push('');\n                // 计算子分类字符长度（按汉字计算，*12号字体）\n                metadata.x_major_offset = metadata.x_major_offset > dummy[i][1].length ? metadata.x_major_offset : dummy[i][1].length;\n            }\n            metadata.flag = false;\n        }\n        return metadata;\n    }\n};\n\noption = {\n    tooltip: {\n        trigger: 'item'\n    },\n    // grid: {\n    //     bottom: metadata.init().x_major_offset * 12 + 30\n    // },\n    legend: {\n        data:['蒸发量','降水量']\n    },\n    xAxis: [\n        {\n            type: 'category',\n            axisLine: {show: false},\n            axisTick: {show: false},\n            axisLabel: {\n                rotate: 90\n            },\n            splitArea: {show: false},\n            data: metadata.init().month\n        },\n        {\n            type: 'category',\n            position: 'bottom',\n            offset: metadata.init().x_major_offset * 12,\n            axisLine: {show: false},\n            axisTick: {\n                length: metadata.init().x_major_offset * 12 + 20,\n                lineStyle: {color: '#CCC'},\n                // interval: function (index, value) {\n                //     return value!=='';\n                // }\n            },\n            // splitArea: {\n            //     show: true,\n            //     interval: function (index, value) {\n            //         return value!=='';\n            //     }\n            // },\n            data: ['2015冬', '2016春', '2016夏'],   // metadata.init().quarter\n        }\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            name: '水量',\n            min: 0,\n            max: 250,\n            interval: 50,\n            axisLabel: {\n                formatter: '{value} ml'\n            }\n        }\n    ],\n    series: [\n        {\n            name:'蒸发量',\n            type:'bar',\n            // z: 1,\n             data: metadata.init().data1,\n             tooltip: {\n                 show: true,\n                //  formatter: (params) => {\n                //      console.log(params)\n                //  }\n                // axisPointer: {\n                //     type: 'shadow'\n                // },\n                // trigger: 'axis'\n            },\n        },\n        {\n            name: 'help',\n            type: 'bar',\n            xAxisIndex: 1,\n            z: 1,\n            silent: true,\n            barWidth: 0,\n            itemStyle: {\n                normal: {\n                    opacity: 0,\n                    shadowBlur: 0,\n                    shadowColor: 'transparent'\n                },\n                emphasis: {\n                    opacity: 0,\n                    shadowBlur: 0,\n                    shadowColor: 'transparent'\n                }\n            },\n            data: [250, 250, 250, 250, 250],\n            tooltip: {\n                show: false\n            }\n        },\n        // {\n        //     name:'降水量',\n        //     type:'bar',\n        //     z: 1,\n        //     data: metadata.init().data2\n        // },\n        // {\n        //     type:'line',\n        //     xAxisIndex: 1,\n        //     z: 0,\n        //     data: metadata.init().data3\n        // }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-258458457","theme":"","layout":"","viewCount":94,"userName":"破***火","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgkMjGVn_Y.png?v=1563174739329","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":["xAxis"],"updaterUserName":"破***火"}}