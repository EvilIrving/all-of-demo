{"status":0,"data":{"cid":"xWhw1-BPWD","authorUid":"bd-1464931953","authorUserName":"承***生","title":"饼图 label 多角度旋转","description":"饼图 label 多角度旋转","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-02T03:46:47.000Z","lastUpdateTime":"2021-06-02T03:46:47.000Z","auth":2,"uid":"bd-1464931953","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-02T03:46:47.000Z","code":"// 数据\r\nlet dataList = [100,30,30,20,20];\r\n\r\n// 求和，计算 label 的旋转角度\r\nlet sum = 0;\r\ndataList.forEach((val)=> {\r\n    sum += val;\r\n});\r\n\r\nlet seriesData = [];\r\n\r\nlet addDeg = 0;\r\nlet deg = 0;\r\n\r\nlet color=['#ff6445','#50c3c6','#1af31d','#1558ff','#64bdfe'];\r\n\r\nfor (let i = 0; i < dataList.length; i++) {\r\n    \r\n    // 计算 label 的旋转角度\r\n    addDeg = addDeg + (dataList[i]/sum*360);\r\n    deg = addDeg - (dataList[i]/sum*180);\r\n    \r\n    seriesData.push({\r\n        value: dataList[i],\r\n        label:{\r\n            rotate:deg\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                borderWidth: 5,\r\n                shadowBlur: 20,\r\n                borderColor:color[i],\r\n                shadowColor: color[i]\r\n            }\r\n        }\r\n    });\r\n}\r\nlet seriesOption = [{\r\n    name: '',\r\n    type: 'pie',\r\n    clockWise: false,\r\n    radius: [150, 155],\r\n    hoverAnimation: false,\r\n    itemStyle: {\r\n        normal: {\r\n            label: {\r\n                show: true,\r\n                position: 'inside',\r\n                color: 'rgba(0,0,0,0)',\r\n                formatter: '{styleName|{d}%}',\r\n                rich:{\r\n                    styleName:{\r\n                        fontSize:20,\r\n                        padding:[-70,0,0,0] // 整体偏移label位置\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    data: seriesData\r\n}];\r\n\r\noption = {\r\n    backgroundColor:'RGB(9,22,75)',\r\n    color: color,\r\n    tooltip: {\r\n        show: false\r\n    },\r\n    toolbox: {\r\n        show: false\r\n    },\r\n    series: seriesOption\r\n}","html":"","externalScripts":"","updaterUID":"bd-1464931953","theme":"","layout":"","viewCount":0,"userName":"承***生","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWhw1-BPWD.png?v=1622605608047","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","toolbox","tooltip"],"customTags":[],"updaterUserName":"承***生"}}