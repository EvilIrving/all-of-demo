{"status":0,"data":{"cid":"x9qWahxEee","authorUid":"obd-oDoa8L5uR364zXRk5QpC_cigut0tw1m","authorUserName":"花***n","title":"横向柱状图-加百分比","description":"","latestVersion":5,"alwaysLatest":0,"createTime":"2021-05-11T10:39:54.000Z","lastUpdateTime":"2021-05-11T10:39:54.000Z","auth":2,"uid":"obd-oDoa8L5uR364zXRk5QpC_cigut0tw1m","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-12T03:13:05.000Z","code":"var salvProName = ['专任教师', '管理职员', '教辅人员', '工勤人员', '附校人员'];\nvar salvProValue = [63, 50, 41, 51, 32];\nvar salvProMax; //最大值\nvar percent = [];\nvar percentArr = [];\nvar num = 0;\nfor (var i = 0; i < salvProValue.length; i++) {\n    num = num + salvProValue[i];\n}\nsalvProMax = num;\nfor (var i = 0; i < salvProValue.length; i++) {\n    percent.push((salvProValue[i] / salvProMax) * 100);\n}\n\noption = {\n    grid: {\n        left: '2%',\n        right: '20%',\n        bottom: '50%',\n        top: '2%',\n        containLabel: true,\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'none',\n        },\n        formatter: function (params) {\n            return params[0].name + ' : ' + params[0].value;\n        },\n    },\n    xAxis: {\n        show: false,\n        type: 'value',\n        max: salvProMax,\n    },\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true,\n            axisLabel: {\n                show: true,\n                textStyle: {\n                    color: '#000',\n                },\n            },\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n            data: salvProName,\n        },\n        {\n            type: 'category',\n            inverse: true,\n            axisTick: 'none',\n            axisLine: 'none',\n            show: true, // 显示右侧的文字\n            axisLabel: {\n                formatter: '{value}人',\n                textStyle: {\n                    color: '#818181',\n                    fontSize: '12',\n                },\n            },\n            data: salvProValue,\n        },\n    ],\n    series: [\n        {\n            name: '蓝色进度条',\n            type: 'bar',\n            hoverAnimation: false,\n            zlevel: 1,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 5,\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [\n                        {\n                            offset: 0,\n                            color: '#3f9bee',\n                        },\n                        {\n                            offset: 1,\n                            color: '#4da4f3',\n                        },\n                    ]),\n                },\n            },\n            barWidth: 20,\n            data: salvProValue,\n            label: {\n                normal: {\n                    show: true,\n                    formatter:params =>{\n                        return (params['data'] / salvProMax * 100).toFixed(2) + '%'\n                    },\n                    // formatter: '{@salvProValue}%', // 直接显示人数\n                    // formatter:function(e) {\n                    //      var total=0\n                    //      for(var i=0; i<salvProValue.length; i++) {\n                    //          total+=salvProValue[i]\n                    //      }\n                    //     for(i=0; i<salvProValue.length; i++) {\n                    //         var ePercent=(salvProValue[i]/total*100).toFixed(2) + '%'\n                    //         if(salvProValue[i].name===e) {\n                    //             return e + ' ' + salvProValue[i] + ' ' + ePercent\n                    //         }\n                    //     }\n                    // },\n                    // formatter: function (value) {\n                    //     console.log(value);\n                    //     return [ value.value + '%'].join('');\n                    // },\n                    // formatter: function (value) {\n                    //     salvProValue.map((item) => {\n                    //         return salvProMax;\n                    //     });\n                    // },\n                    // formatter: function (params) {\n                    //     return (\n                    //         '<span style=\"color: #fff;\">' +\n                    //         params[0].name +\n                    //         '件数：' +\n                    //         params[0].value.toString().replace(/(\\d)(?=(?:\\d{3}[+]?)+$)/g, '$1,') +\n                    //         '件</span>'\n                    //     );\n                    // },\n                    // formatter: function () {\n                    //     for(var i=0; i<percent.length; i++){\n                    //         percentArr.push(percent[i] + '%');\n                    //         console.log(percentArr)\n                    //     }\n                    //     return parseInt(percentArr) + '%';\n                    // },\n                    // formatter: function (parmas) {\n                    //     console.log(parmas);\n                    //     for (var i = 0; i < salvProValue.length; i++) {\n                    //         if (salvProValue[i].name == name) {\n                    //             return salvProValue[i].value + '%';\n                    //         }\n                    //     }\n                    // },\n                    position: 'right',\n                    textStyle: {\n                        color: '#4b78a9',\n                        fontSize: '16',\n                    },\n                },\n            },\n        },\n        {\n            name: '背景',\n            type: 'bar',\n            hoverAnimation: false,\n            barWidth: 20,\n            barGap: '-100%',\n            data: salvProValue.map((item) => {\n                return salvProMax;\n            }),\n            itemStyle: {\n                normal: {\n                    color: '#cae4fb',\n                    barBorderRadius: 5,\n                },\n            },\n            // label:{\n            //     distance: 10,\n            // }\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oDoa8L5uR364zXRk5QpC_cigut0tw1m","theme":"","layout":"","viewCount":0,"userName":"花***n","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9qWahxEee.png?v=1620789185787","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"花***n"}}