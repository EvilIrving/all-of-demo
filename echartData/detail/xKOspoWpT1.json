{"status":0,"data":{"cid":"xKOspoWpT1","authorUid":"bd-2670000507","authorUserName":"j***3","title":"某某地区1-6月份完成率","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-01T11:39:29.000Z","lastUpdateTime":"2019-08-01T11:39:29.000Z","auth":2,"uid":"bd-2670000507","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-01T11:39:29.000Z","code":"//数据纯属虚构\r\nvar data = [{\r\n        name: '江苏省',\r\n        value: 0.53\r\n    },\r\n    {\r\n        name: '北京市',\r\n        value: 0.38\r\n    },\r\n    {\r\n        name: '上海',\r\n        value: 0.46\r\n    },\r\n    {\r\n        name: '重庆',\r\n        value: 0.36\r\n    },\r\n    {\r\n        name: '河北',\r\n        value: 0.34\r\n    },\r\n    {\r\n        name: '河南',\r\n        value: 0.32\r\n    },\r\n    {\r\n        name: '云南',\r\n        value: 0.16\r\n    },\r\n    {\r\n        name: '辽宁',\r\n        value: 0.43\r\n    },\r\n    {\r\n        name: '黑龙江',\r\n        value: 0.41\r\n    },\r\n    {\r\n        name: '湖南',\r\n        value: 0.24\r\n    },\r\n    {\r\n        name: '安徽',\r\n        value: 0.33\r\n    }\r\n];\r\n\r\nvar average = 0.3;\r\n\r\ndata = data.sort(function(a, b) {\r\n    return b.value - a.value\r\n})\r\n\r\nvar yData = [];\r\nvar barData = [];\r\n\r\nfor (var i = 0; i < data.length; i++) {\r\n    barData.push(data[i]);\r\n    if (data[i].value < average) {\r\n        yData.push(i + ',' + data[i].name + ',' + 'lower');\r\n    } else {\r\n        yData.push(i + ',' + data[i].name)\r\n    }\r\n\r\n}\r\n\r\nvar option = {\r\n    title: [{\r\n        text: '某某地区1-6月份完成率',\r\n        textStyle: {\r\n            color: '#2D3E53',\r\n            fontSize: 18\r\n        },\r\n        x: 'center',\r\n        top: 100\r\n    }],\r\n    tooltip: {\r\n        show: true,\r\n        formatter: function(params) {\r\n            var value = parseFloat(params.data['value']) * 100;\r\n            return params.name + '：' + value + '%'\r\n        },\r\n    },\r\n    grid: {\r\n        top: \"20%\",\r\n        bottom: \"10%\",\r\n        left: \"6%\",\r\n        right: \"2%\",\r\n        containLabel: true,\r\n    },\r\n    xAxis: {\r\n        show: false\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        inverse: true,\r\n        nameGap: 16,\r\n        axisLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            margin: 85,\r\n            textStyle: {\r\n                color: '#455A74',\r\n                align: 'left',\r\n                fontSize: 14\r\n            },\r\n            rich: {\r\n                a: {\r\n                    color: '#fff',\r\n                    backgroundColor: '#f36a5a',\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 2\r\n                },\r\n                b: {\r\n                    color: '#fff',\r\n                    backgroundColor: '#4197FD',\r\n                    width: 20,\r\n                    height: 20,\r\n                    align: 'center',\r\n                    borderRadius: 2\r\n                }\r\n            },\r\n            formatter: function(params) {\r\n                var paramsArr = params.split(',');\r\n                var index = paramsArr[0];\r\n                var name = paramsArr[1];\r\n                if (paramsArr[2]) {\r\n                    return [\r\n                        '{a|' + (parseInt(index) + 1) + '}' + '  ' + name\r\n                    ].join('\\n')\r\n                } else {\r\n                    return [\r\n                        '{b|' + (parseInt(index) + 1) + '}' + '  ' + name\r\n                    ].join('\\n')\r\n                }\r\n            }\r\n        },\r\n        data: yData\r\n    },\r\n\r\n    series: [{\r\n        name: 'barSer',\r\n        type: 'bar',\r\n        roam: false,\r\n        visualMap: false,\r\n        zlevel: 2,\r\n        barMaxWidth: 8,\r\n        barGap: 0,\r\n        itemStyle: {\r\n            normal: {\r\n                color: function(params) {\r\n                    console.log(params);\r\n                    var value = parseFloat(params.data['value']);\r\n                    // build a color map as your need.\r\n                    var colorList = [{\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: '#f36a5a' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: '#f36a5a' // 100% 处的颜色\r\n                            }]\r\n                        },\r\n                        {\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: '#00C0FA' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: '#2F95FA' // 100% 处的颜色\r\n                            }]\r\n                        }\r\n                    ];\r\n                    if (value < average) {\r\n                        return colorList[0]\r\n                    } else {\r\n                        return colorList[1]\r\n                    }\r\n                },\r\n                barBorderRadius: 15\r\n            }\r\n        },\r\n        data: barData,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#455A74',\r\n                    fontSize: 14,\r\n                },\r\n                position: \"right\",\r\n                offset: [35, 0],\r\n                formatter: function(params) {\r\n                    var value = parseFloat(params.data['value']) * 100;\r\n                    return value + '%'\r\n                }\r\n\r\n            }\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-2670000507","theme":"","layout":"","viewCount":1608,"userName":"j***3","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKOspoWpT1.png?v=1564659569967","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"j***3"}}