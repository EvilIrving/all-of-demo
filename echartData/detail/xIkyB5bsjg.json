{"status":0,"data":{"cid":"xIkyB5bsjg","authorUid":"obd-oD5ZwbWIQ9QZAPHDFiU420YvEUtol1V","authorUserName":"我***白","title":"品牌分析","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-02T09:57:38.000Z","lastUpdateTime":"2020-11-02T09:57:38.000Z","auth":2,"uid":"obd-oD5ZwbWIQ9QZAPHDFiU420YvEUtol1V","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-02T09:57:38.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1585799654003-46R-3f-c3.json\";\r\n//线条聚点\r\nvar geoGpsMap = {\r\n    '1': [116.415, 39.915],\r\n    '2': [116.448, 39.935],\r\n    '3': [116.455, 39.915],\r\n    '4': [116.435, 39.925],\r\n    '中华': [116.415, 39.915],\r\n    '利群': [116.448, 39.935],\r\n    '玉溪': [116.455, 39.915]\r\n\r\n};\r\nvar l1 = {\r\n    \"中华（硬）\": [116.409, 39.928]\r\n};\r\nvar l2 = {\r\n    \"利群（阳光）\": [116.428, 39.939]\r\n};\r\n\r\nvar l3 = {\r\n    \"玉溪（创客）\": [116.448, 39.939]\r\n};\r\nvar l4 = {\r\n    \"中华d\": [116.426, 39.918]\r\n};\r\nvar l5 = {\r\n    \"创客\": [116.448, 39.920]\r\n};\r\nvar l6 = {\r\n    \"黄鹤楼\": [116.443, 39.911]\r\n};\r\nvar l7 = {\r\n    \"白沙\": [116.448, 39.905]\r\n};\r\nvar zhuwo = {\r\n    \"利群\": [116.409, 39.928]\r\n};\r\n\r\n\r\n\r\n//geoCoordMap把所有可能出现的转出品牌加到数组里面\r\nvar geoCoordMap = {\r\n    \"中华（硬）\": [116.41, 39.9036],\r\n    \"利群（阳光）\": [116.43, 39.918],\r\n    '玉溪（创客）': [116.409, 39.921],\r\n\r\n};\r\nvar geoCoordMap001 = {\r\n    \"中华（硬）\": [116.41, 39.9036]\r\n\r\n};\r\nvar geoCoordMap002 = {\r\n    \"利群（阳光）\": [116.43, 39.918]\r\n\r\n\r\n};\r\nvar geoCoordMap003 = {\r\n\r\n   '玉溪（创客）': [116.409, 39.921]\r\n\r\n\r\n};\r\n\r\nvar geoCoordMap004 = {\r\n\r\n    '中华': [116.415, 39.915],\r\n    '利群': [116.448, 39.935],\r\n    '玉溪': [116.455, 39.915],\r\n\r\n\r\n};\r\n\r\n//温度\r\nvar d1 = {\r\n    \"中华（硬）\": 20,\r\n    \"利群（阳光）\": 25,\r\n    '玉溪（创客）': 17\r\n\r\n\r\n};\r\n\r\n//湿度\r\nvar d2 = {  \r\n    \"中华（硬）\": 28,\r\n    \"利群（阳光）\": 25,\r\n    '玉溪（创客）': 11\r\n\r\n\r\n};\r\n//振动\r\nvar d3 = {\r\n   \"中华（硬）\": 35,\r\n    \"利群（阳光）\": 45,\r\n    '玉溪（创客）': 47\r\n\r\n};\r\n//烟雾\r\nvar d4 = {\r\n    \"中华（硬）\": 40,\r\n    \"利群（阳光）\": 25,\r\n    '玉溪（创客）': 47\r\n\r\n};\r\n//光线\r\nvar d5 = {\r\n     \"中华（硬）\": 44,\r\n    \"利群（阳光）\": 35,\r\n    '玉溪（创客）': 67\r\n\r\n\r\n};\r\n//\r\n// var d6 = {\r\n//   \"中华A\": 40,\r\n//     \"中华B\": 45,\r\n//     '利群1': 37,\r\n//     \"利群2\": 39,\r\n//     '云烟': 23,\r\n//     \"红塔山\": 80,\r\n//     \"中华C\": 56,\r\n//     '创客': 39,\r\n//     \"黄鹤楼\": 29,\r\n//     \"白沙\": 68,\r\n\r\n// };\r\n// \r\n// var d7 = {\r\n//     \"中华A\": 40,\r\n//     \"中华B\": 45,\r\n//     '利群1': 37,\r\n//     \"利群2\": 39,\r\n//     '云烟': 23,\r\n//     \"红塔山\": 80,\r\n//     \"中华C\": 56,\r\n//     '创客': 39,\r\n//     \"黄鹤楼\": 29,\r\n//     \"白沙\": 68,\r\n// };\r\n\r\nvar database = [{\r\n        name: \"利群\",\r\n        value: 0\r\n    },\r\n    {\r\n        name: \"中华\",\r\n        value: 0\r\n    },\r\n    {\r\n        name: \"玉溪\",\r\n        value: 0\r\n    }\r\n];\r\nvar da1 = [{\r\n    name: \"利群（阳光）\",\r\n    value: 0\r\n}];\r\nvar da2 = [{\r\n    name: \"玉溪（创客）\",\r\n    value: 0\r\n}];\r\nvar da3 = [{\r\n    name: \"中华（硬）\",\r\n    value: 0\r\n}];\r\nvar da4 = [{\r\n    name: \"客厅\",\r\n    value: 0\r\n}];\r\nvar da5 = [{\r\n    name: \"创客\",\r\n    value: 0\r\n}];\r\nvar da6 = [{\r\n    name: \"黄鹤楼\",\r\n    value: 0\r\n}];\r\nvar da7 = [{\r\n    name: \"白沙\",\r\n    value: 0\r\n}];\r\n\r\nvar colors = [\r\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\r\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\r\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\r\n];\r\nvar colorIndex = 0;\r\n$(function() {\r\n    var year = [\"2018.6\", \"2018.12\", \"2019.6\", \"2019.12\", \"2020.6\"];\r\n    var year1 = [\"空调调温\", \"加湿器/窗户协调\", \"门锁锁定\", \"紧急消防\", \"照明系统\"];\r\n\r\n    var mapData = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var fei = [];\r\n    var rong = [];\r\n    var barData = [];\r\n    var lineData1=[\r\n        [10,12,13,12,14,14,16,17,18,20,22,26,27,26,23,20,18,18,16,16,14,13,12,10],\r\n        [68,67,66,63,61,55,53,48,46,44,42,42,36,34,36,37,38,42,46,44,58,62,66,68],\r\n        [1,1,1,1,1,1,1,2,3,2,1,1,1,1,1,1,3,3,1,3,3,1,1,1],\r\n        [56,59,60,62,56,50,40,42,38,38,39,38,40,42,38,37,34,35,38,44,46,50,54,56],\r\n        [1,1,2,1,5,10,20,24,30,32,32,34,38,40,40,38,32,25,32,32,5,1,1,1]\r\n    ];\r\n    var lineData2=[\r\n        [11,12,14,12,15,13,16,16,16,21,22,24,22,24,23,21,19,18,15,14,15,13,12,11],\r\n        [62,64,66,65,62,58,54,49,45,44,41,40,32,36,36,39,38,40,46,48,52,60,63,61],\r\n        [1,1,1,2,1,1,1,2,1,2,1,1,3,1,1,1,3,2,1,1,3,1,2,1],\r\n        [58,59,62,62,54,50,44,42,34,33,35,38,40,44,38,35,32,35,33,40,46,53,56,54],\r\n        [1,1,1,1,6,12,20,22,30,33,32,35,38,42,40,37,34,28,32,33,10,1,1,1]\r\n    ];\r\n   \r\n    var tian = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n\r\n    var line1 = [];\r\n    var line2 = [];\r\n    var line3 = [];\r\n    var line4 = [];\r\n    for (var key in geoCoordMap001) {\r\n        line1.push({\r\n            \"year\": '温度',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n\r\n    };\r\n    for (var key in geoCoordMap002) {\r\n        line2.push({\r\n            \"year\": '温度',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n\r\n    };\r\n    for (var key in geoCoordMap003) {\r\n        line3.push({\r\n            \"year\": '温度',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n\r\n    };\r\n\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData[0].push({\r\n            \"year\": '温度',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n        mapData[1].push({\r\n            \"year\": '湿度',\r\n            \"name\": key,\r\n            \"value\": d2[key],\r\n        });\r\n        mapData[2].push({\r\n            \"year\": '振动',\r\n            \"name\": key,\r\n            \"value\": d3[key],\r\n        });\r\n        mapData[3].push({\r\n            \"year\": '烟雾',\r\n            \"name\": key,\r\n            \"value\": d4[key],\r\n        });\r\n        mapData[4].push({\r\n            \"year\": '光线',\r\n            \"name\": key,\r\n            \"value\": d5[key],\r\n        });\r\n     \r\n    }\r\n    var jian = [];\r\n    var count = [];\r\n    var datamax = [];\r\n    var datamin = [];\r\n    //visualMap的max正常值设定\r\n    var zhu = [45, 80, 10, 80, 50, ]\r\n    //visualMap的min正常值设定\r\n    var li = [-5, 15, 0, 20, 0,]\r\n    //var count2=[];\r\n    var count3 = [];\r\n    for (var i = 0; i < mapData.length; i++) {\r\n        mapData[i].sort(function sortNumber(a, b) {\r\n            return a.value - b.value\r\n        });\r\n        barData.push([]);\r\n        categoryData.push([]);\r\n        fei.push([]);\r\n        rong.push([]);\r\n        tian.push([]);\r\n        jian[i] = 0;\r\n        count[i] = 0;\r\n        count3[i] = 0;\r\n        datamax[i] = 0;\r\n        datamin[i] = 1000;\r\n        for (var j = 0; j < mapData[i].length; j++) {\r\n\r\n            if (mapData[i][j].name == '利群（阳光）') {\r\n                tian[i][0] = mapData[i][j].value;\r\n\r\n            } else if (mapData[i][j].name == '玉溪（创客）') {\r\n                tian[i][1] = mapData[i][j].value;\r\n\r\n            } else if (mapData[i][j].name == '中华（硬）') {\r\n                tian[i][2] = mapData[i][j].value;\r\n\r\n            } \r\n\r\n            if (mapData[i][j].value >= -100) {\r\n                jian[i] += mapData[i][j].value;\r\n                count[i]++; //平均计数\r\n            } else {\r\n                fei[i].push(mapData[i][j].name)\r\n            }\r\n\r\n            if (mapData[i][j].value >= datamax[i]) {\r\n                datamax[i] = mapData[i][j].value;\r\n\r\n            }\r\n            if (mapData[i][j].value <= datamin[i]) {\r\n                datamin[i] = mapData[i][j].value;\r\n\r\n            }\r\n            //count2[i]=mapData[i].length-count[i];\r\n            if (mapData[i][j].value < li[i] || mapData[i][j].value > zhu[i]) {\r\n                count3[i]++;\r\n                rong[i].push(mapData[i][j].name);\r\n\r\n            }\r\n            barData[i].push(mapData[i][j].value);\r\n            categoryData[i].push(mapData[i][j].name);\r\n\r\n        }\r\n    }\r\n    \r\n    \r\n \r\n   \r\n\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n        echarts.registerMap('home', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        var convertData1 = function(database) {\r\n            var res = [];\r\n            for (var i = 0; i < database.length; i++) {\r\n                var geoCoord1 = geoGpsMap[database[i].name];\r\n                if (geoCoord1) {\r\n                    res.push({\r\n                        name: database[i].name,\r\n                        value: geoCoord1.concat(database[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var convertedData1 = [\r\n            convertData1(database),\r\n            convertData1(database.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //利群开关legend\r\n        var c1 = function(da1) {\r\n            var res = [];\r\n            for (var i = 0; i < da1.length; i++) {\r\n                var g1 = l1[da1[i].name];\r\n                if (g1) {\r\n                    res.push({\r\n                        name: da1[i].name,\r\n                        value: g1.concat(da1[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc1 = [\r\n            c1(da1),\r\n            c1(da1.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //云烟开关legend\r\n        var c2 = function(da2) {\r\n            var res = [];\r\n            for (var i = 0; i < da2.length; i++) {\r\n                var g2 = l2[da2[i].name];\r\n                if (g2) {\r\n                    res.push({\r\n                        name: da2[i].name,\r\n                        value: g2.concat(da2[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc2 = [\r\n            c2(da2),\r\n            c2(da2.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n\r\n        //红塔山开关legend\r\n        var c3 = function(da3) {\r\n            var res = [];\r\n            for (var i = 0; i < da3.length; i++) {\r\n                var g3 = l3[da3[i].name];\r\n                if (g3) {\r\n                    res.push({\r\n                        name: da3[i].name,\r\n                        value: g3.concat(da3[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc3 = [\r\n            c3(da3),\r\n            c3(da3.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //客厅开关legend\r\n        var c4 = function(da4) {\r\n            var res = [];\r\n            for (var i = 0; i < da4.length; i++) {\r\n                var g4 = l4[da4[i].name];\r\n                if (g4) {\r\n                    res.push({\r\n                        name: da4[i].name,\r\n                        value: g4.concat(da4[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc4 = [\r\n            c4(da4),\r\n            c4(da4.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //创客开关legend\r\n        var c5 = function(da5) {\r\n            var res = [];\r\n            for (var i = 0; i < da5.length; i++) {\r\n                var g5 = l5[da5[i].name];\r\n                if (g5) {\r\n                    res.push({\r\n                        name: da5[i].name,\r\n                        value: g5.concat(da5[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc5 = [\r\n            c5(da5),\r\n            c5(da5.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //黄鹤楼开关legend\r\n        var c6 = function(da6) {\r\n            var res = [];\r\n            for (var i = 0; i < da6.length; i++) {\r\n                var g6 = l6[da6[i].name];\r\n                if (g6) {\r\n                    res.push({\r\n                        name: da6[i].name,\r\n                        value: g6.concat(da6[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc6 = [\r\n            c6(da6),\r\n            c6(da6.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n        //白沙开关legend\r\n        var c7 = function(da7) {\r\n            var res = [];\r\n            for (var i = 0; i < da7.length; i++) {\r\n                var g7 = l7[da7[i].name];\r\n                if (g7) {\r\n                    res.push({\r\n                        name: da7[i].name,\r\n                        value: g7.concat(da7[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var cc7 = [\r\n            c7(da7),\r\n            c7(da7.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 6))\r\n        ];\r\n\r\n        //         //聚点随机程序\r\n        var convertToLineData = function(data, gps) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var fromCoord = geoCoordMap[dataItem.name];\r\n                debugger;\r\n                var toCoord = gps; //郑州\r\n                // var toCoord = geoGps[Math.random()*3]; \r\n                if (fromCoord && toCoord) {\r\n                    res.push([{\r\n                        coord: fromCoord,\r\n                        value: dataItem.value\r\n                    }, {\r\n                        coord: toCoord,\r\n                    }]);\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var convertToLineData001 = function(data, gps) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var fromCoord = geoCoordMap004[dataItem.name];\r\n                debugger;\r\n                var toCoord = gps; //郑州\r\n                // var toCoord = geoGps[Math.random()*3]; \r\n                if (fromCoord && toCoord) {\r\n                    res.push([{\r\n                        coord: fromCoord,\r\n                        value: dataItem.value\r\n                    }, {\r\n                        coord: toCoord,\r\n                    }]);\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        optionXyMap01 = {\r\n            //底部滚动栏\r\n            timeline: {\r\n                data: year,\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 3000,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '3%',\r\n                width: '80%',\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#87CEEB',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                //柱状图样式\r\n                grid: [{\r\n                    left: '65%',\r\n                    top: '34.5%',\r\n                    bottom: '44.5%',\r\n                    width: '20%'\r\n                }, {\r\n                    gridindex: 1,\r\n                    left: '65%',\r\n                    right: '3%',\r\n                    top: '65%',\r\n                    bottom: '10%',\r\n                    containLabel: true\r\n                }],\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: '#aaa' //hover颜色\r\n                        },\r\n                    },\r\n\r\n\r\n                },\r\n                toolbox: {\r\n                    show: true,\r\n                    feature: {\r\n                        mark: {\r\n                            show: true\r\n                        },\r\n                        dataView: {\r\n                            show: true,\r\n                            readOnly: false\r\n                        },\r\n                        magicType: {\r\n                            show: true,\r\n                            type: ['bar', 'line']\r\n                        },\r\n                        restore: {\r\n                            show: true\r\n                        },\r\n                        saveAsImage: {\r\n                            show: true\r\n                        }\r\n                    }\r\n                },\r\n                legend: [{\r\n                        data: ['历史平均数据1', '历史平均数据2'],\r\n                        x: '75%',\r\n                        y: '60%',\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n                    {\r\n                        data: ['转入品牌', '转出品牌','转移线路'],\r\n                        top: '10%',\r\n                        left: '35%',\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n\r\n\r\n                    {\r\n                        icon: 'roundRect',\r\n                        orient: 'vertical',\r\n                        top: '7%',\r\n                        left: '5%',\r\n\r\n                        data: [{\r\n                                name: '利群（阳光）',\r\n                            },\r\n                            {\r\n                                name: '玉溪（创客）',\r\n                            },\r\n                            {\r\n                                name: '中华（硬）',\r\n                            }\r\n                        ],\r\n                        selected: {\r\n                            '利群（阳光）': false,\r\n                            '玉溪（创客）': false,\r\n                            '中华（硬）': false\r\n                            \r\n                            // \t'': false\r\n                        },\r\n\r\n\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n\r\n                ],\r\n\r\n                //地图样式\r\n                geo: {\r\n                    show: true,\r\n                    map: 'home',\r\n                    roam: true,\r\n                    zoom: 0.8,\r\n                    center: [116.453, 39.920],\r\n                    label: {\r\n                        emphasis: {\r\n\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            borderColor: 'rgba(147, 235, 248, 1)',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 1)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#389BB7',\r\n                            borderWidth: 0\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n\r\n            options: []\r\n\r\n        };\r\n\r\n\r\n        for (var n = 0; n < year.length; n++) {\r\n\r\n            optionXyMap01.options.push({\r\n                //背景色\r\n                backgroundColor: '#013954',\r\n\r\n                //标题\r\n                title: [{\r\n                        text: '品牌转移分析',\r\n                        left: '16%',\r\n                        top: '5%',\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 25\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'statistic',\r\n                        text: year[n] + \"数据统计情况\",\r\n                        left: '60%',\r\n                        top: '5%',\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 25\r\n                        }\r\n                    },\r\n                    {\r\n\r\n                        text: \"转出量：\" + Math.round(jian[n] / count[n]),\r\n                        left: '60%',\r\n                        top: '14.5%',\r\n                        textStyle: {\r\n                            color: '#90ee90',\r\n                            fontSize: 15\r\n                        }\r\n                    },\r\n                    {\r\n\r\n                        text: \"最大值：\" + datamax[n],\r\n                        left: '72%',\r\n                        top: '14.5%',\r\n                        textStyle: {\r\n                            color: '#FF4500',\r\n                            fontSize: 15\r\n                        }\r\n                    },\r\n                    {\r\n\r\n                        text: \"最小值：\" + datamin[n],\r\n                        left: '84%',\r\n                        top: '14.5%',\r\n                        textStyle: {\r\n                            color: '#87CEFF',\r\n                            fontSize: 15\r\n                        }\r\n                    },\r\n                    {\r\n\r\n                        text: \"转出品牌数：\" + (mapData[n].length - count[n]), //+'\\n'+fei[n],\r\n                        left: '60%',\r\n                        top: '17.5%',\r\n                        textStyle: {\r\n                            color: '#FF7F00',\r\n                            fontSize: 15\r\n                        },\r\n\r\n                        extraCssText: 'width:120px; white-space:pre-wrap' //额外样式使\\n生效\r\n                    },\r\n                    {\r\n\r\n                        text: \"数据异常转出品牌：\" + (count3[n]),\r\n                        left: '76%',\r\n                        top: '17.5%',\r\n                        textStyle: {\r\n                            color: '#9370DB',\r\n                            fontSize: 15\r\n                        },\r\n\r\n                        extraCssText: 'width:120px; white-space:pre-wrap' //额外样式使\\n生效\r\n                    },\r\n                    {\r\n\r\n                        text: \"(数据正常范围：\" + li[n] + \"~\" + zhu[n] + \")\",\r\n                        left: '60%',\r\n                        top: '20.5%',\r\n                        textStyle: {\r\n                            color: '#FFA54F',\r\n                            fontSize: 15\r\n                        },\r\n\r\n                        extraCssText: 'width:120px; white-space:pre-wrap' //额外样式使\\n生效\r\n                    },\r\n                    {\r\n\r\n                        text: \"转出的品牌：\" + (fei[n]), //+'\\n'+fei[n],\r\n                        left: '60%',\r\n                        top: '23.5%',\r\n                        textStyle: {\r\n                            color: '#FF7F00',\r\n                            fontSize: 15\r\n                        },\r\n\r\n                        extraCssText: 'width:120px; white-space:pre-wrap' //额外样式使\\n生效\r\n                    }, {\r\n\r\n                        text: \"异常转出的品牌：\" + (rong[n]),\r\n                        left: '60%',\r\n                        top: '26.5%',\r\n                        textStyle: {\r\n                            color: '#9370DB',\r\n                            fontSize: 15\r\n                        },\r\n\r\n                        extraCssText: 'width:120px; white-space:pre-wrap' //额外样式使\\n生效\r\n                    }\r\n\r\n\r\n                ],\r\n                visualMap: {\r\n                    min: li[n],\r\n                    max: zhu[n],\r\n                    calculable: true,\r\n                    text: ['High', 'Low'],\r\n                    inRange: {\r\n                        color: ['#50a3ba', '#eac736', '#d94e5d']\r\n\r\n                    },\r\n                    padding: 5,\r\n                    right: \"5%\",\r\n                    bottom: \"40%\",\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                },\r\n                //             brush: {\r\n                //     outOfBrush: {\r\n                //         color: '#abc'\r\n                //     },\r\n                //     brushStyle: {\r\n                //         borderWidth: 2,\r\n                //         color: 'rgba(0,0,0,0.2)',\r\n                //         borderColor: 'rgba(0,0,0,0.5)',\r\n                //     },\r\n                //     seriesIndex: [0, 1],\r\n                //     throttleType: 'debounce',\r\n                //     throttleDelay: 300,\r\n                //     geoIndex: 0\r\n                // },\r\n                xAxis: [{\r\n                        type: 'value',\r\n                        scale: true,\r\n                        position: 'top',\r\n                        min: 0,\r\n                        boundaryGap: false,\r\n                        splitLine: {\r\n                            show: false\r\n                        },\r\n                        axisLine: {\r\n                            show: false\r\n                        },\r\n                        axisTick: {\r\n                            show: false\r\n                        },\r\n                        axisLabel: {\r\n                            margin: 2,\r\n                            textStyle: {\r\n                                color: '#fff'\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        gridIndex: 1,\r\n                        type: 'category',\r\n                        boundaryGap: false,\r\n                        axisLabel: {\r\n                            margin: 2,\r\n                            textStyle: {\r\n                                color: '#fff'\r\n                            }\r\n                        },\r\n                        data: ['1月份', '1月份', '2月份', '3月份', '4月份', '5月份', '6月份', '7月份', '8月份', '9月份', '10月份', '11月份', '12月份']\r\n\r\n                    }\r\n                ],\r\n                yAxis: [{\r\n                    type: 'category',\r\n                    //  name: 'TOP 20',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: true,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    data: categoryData[n]\r\n                }, {\r\n                    gridIndex: 1,\r\n                    type: 'value',\r\n                    axisLabel: {\r\n                        formatter: '{value} ',\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    }\r\n                }],\r\n\r\n                series: [\r\n                    //地图\r\n                    {\r\n                        type: 'map',\r\n                        map: 'home',\r\n\r\n                        geoIndex: 0,\r\n                        aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: true, // 存在legend时显示\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: false,\r\n                                textStyle: {\r\n                                    color: '#fff'\r\n                                }\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#031525',\r\n                                borderColor: '#FFFFFF',\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7'\r\n                            }\r\n                        },\r\n                        animation: false,\r\n                        data: mapData\r\n                    },\r\n                    //地图中闪烁的点\r\n                    {\r\n                        name: '转出品牌',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n].sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)), //大小差异显示\r\n                        symbolSize: function(val) {\r\n                            return (val[2] * 40 + 1200) / 180;\r\n                        },\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                shadowBlur: 10,\r\n                                shadowColor: colors[colorIndex][n]\r\n                            },\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    {\r\n                        //基站点显示\r\n                        name: '转入品牌',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData1(database.sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbol: 'arrow',\r\n                        symbolSize: 10,\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#2f4554'\r\n                            },\r\n                            emphasis: {\r\n                                color: '#fff',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#cfff'\r\n                            }\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    {\r\n\r\n                        name: '利群',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: c1(da1.sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbol: 'roundRect', //气泡\r\n                        symbolSize: 10,\r\n                        // showEffectOn: 'render',\r\n                        // rippleEffect: {\r\n                        //     brushType: 'stroke'\r\n                        // },\r\n                        // hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}' + year1[n] + '：开',\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                formatter: '{b}' + year[n] + '：' + tian[n][0],\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                        },\r\n\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: '#2f4554',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#2f4554'\r\n                            },\r\n                            emphasis: {\r\n                                color: '#c23531',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#c23531'\r\n                            },\r\n\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    {\r\n\r\n                        name: '云烟',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: c2(da2.sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbol: 'roundRect', //气泡\r\n                        symbolSize: 10,\r\n                        // showEffectOn: 'render',\r\n                        // rippleEffect: {\r\n                        //     brushType: 'stroke'\r\n                        // },\r\n                        // hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}' + year1[n] + '：开',\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                formatter: '{b}' + year[n] + '：' + tian[n][2],\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                        },\r\n\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: '#2f4554',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#2f4554'\r\n                            },\r\n                            emphasis: {\r\n                                color: '#c23531',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#c23531'\r\n                            },\r\n\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    {\r\n\r\n                        name: '红塔山',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: c3(da3.sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbol: 'roundRect', //气泡\r\n                        symbolSize: 10,\r\n                        // showEffectOn: 'render',\r\n                        // rippleEffect: {\r\n                        //     brushType: 'stroke'\r\n                        // },\r\n                        // hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}' + year1[n] + '：开',\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                formatter: '{b}' + year[n] + '：' + tian[n][0],\r\n                                position: 'bottom',\r\n                                show: true\r\n                            },\r\n                        },\r\n\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: '#2f4554',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#2f4554'\r\n                            },\r\n                            emphasis: {\r\n                                color: '#c23531',\r\n                                shadowBlur: 10,\r\n                                shadowColor: '#c23531'\r\n                            },\r\n\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    //线条聚点\r\n                    {name:'转移线路',\r\n                        type: 'lines',\r\n                        zlevel: 2,\r\n                        effect: {\r\n                            show: true,\r\n                            period: 4, //箭头指向速度，值越小速度越快\r\n                            trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                            symbol: 'arrow', //箭头图标\r\n                            symbolSize: 3, //图标大小\r\n                        },\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                width: 0.1, //尾迹线条宽度\r\n                                opacity: 0.5, //尾迹线条透明度\r\n                                curveness: .3 //尾迹线条曲直度\r\n                            }\r\n                        },\r\n                        //调用聚点随机\r\n                        data: convertToLineData(line1, geoGpsMap[Math.ceil(1)])\r\n                    },\r\n                    {name:'转移线路',\r\n                        type: 'lines',\r\n                        zlevel: 2,\r\n                        effect: {\r\n                            show: true,\r\n                            period: 4, //箭头指向速度，值越小速度越快\r\n                            trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                            symbol: 'arrow', //箭头图标\r\n                            symbolSize: 3, //图标大小\r\n                        },\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                width: 0.1, //尾迹线条宽度\r\n                                opacity: 0.5, //尾迹线条透明度\r\n                                curveness: .3 //尾迹线条曲直度\r\n                            }\r\n                        },\r\n                        //调用聚点随机\r\n                        data: convertToLineData(line2, geoGpsMap[Math.ceil(2)])\r\n                    },\r\n                    {name:'转移线路',\r\n                        type: 'lines',\r\n                        zlevel: 2,\r\n                        effect: {\r\n                            show: true,\r\n                            period: 4, //箭头指向速度，值越小速度越快\r\n                            trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                            symbol: 'arrow', //箭头图标\r\n                            symbolSize: 3, //图标大小\r\n                        },\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                width: 0.1, //尾迹线条宽度\r\n                                opacity: 0.5, //尾迹线条透明度\r\n                                curveness: .3 //尾迹线条曲直度\r\n                            }\r\n                        },\r\n                        //调用聚点随机\r\n                        data: convertToLineData(line3, geoGpsMap[Math.ceil(3)])\r\n                    },\r\n                    {name:'转移线路',\r\n                        type: 'lines',\r\n                        zlevel: 2,\r\n                        effect: {\r\n                            show: true,\r\n                            period: 4, //箭头指向速度，值越小速度越快\r\n                            trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                            symbol: 'arrow', //箭头图标\r\n                            symbolSize: 3, //图标大小\r\n                        },\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                width: 0.1, //尾迹线条宽度\r\n                                opacity: 0.5, //尾迹线条透明度\r\n                                curveness: .3 //尾迹线条曲直度\r\n                            }\r\n                        },\r\n                        //调用聚点随机\r\n                        data: convertToLineData001(line4, geoGpsMap[Math.ceil(4)])\r\n                    },\r\n                    //柱状图\r\n                    {\r\n                        zlevel: 1.5,\r\n                        type: 'bar',\r\n                        symbol: 'none',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        data: barData[n]\r\n                    },\r\n                    {\r\n\r\n                        xAxisIndex: 1,\r\n                        yAxisIndex: 1,\r\n                        name: '历史平均数据1',\r\n\r\n                        type: 'line',\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: '#4ea397'\r\n                            }\r\n                        },\r\n                        data: lineData1[n],\r\n                        markPoint: {\r\n                            data: [{\r\n                                    type: 'max',\r\n                                    name: '最大值',\r\n                                    symbolSize: 40\r\n                                },\r\n                                {\r\n                                    type: 'min',\r\n                                    name: '最小值',\r\n                                    symbolSize: 20\r\n                                }\r\n                            ],\r\n                            itemStyle: {\r\n                                normal: {\r\n                                    color: '#d0648a'\r\n                                }\r\n                            }\r\n                        },\r\n                        markLine: {\r\n                            data: [{\r\n                                type: 'average',\r\n                                name: '平均值'\r\n                            }]\r\n                        }\r\n                    },\r\n                    {\r\n                        xAxisIndex: 1,\r\n                        yAxisIndex: 1,\r\n                        name: '历史平均数据2',\r\n\r\n                        type: 'line',\r\n                        lineStyle: {\r\n                            normal: {\r\n                                color: '#4ea397'\r\n                            }\r\n                        },\r\n                        data: lineData2[n],\r\n                        markPoint: {\r\n                            data: [{\r\n                                    type: 'max',\r\n                                    name: '最大值',\r\n                                    symbolSize: 40\r\n                                },\r\n                                {\r\n                                    type: 'min',\r\n                                    name: '最小值',\r\n                                    symbolSize: 20\r\n                                }\r\n                            ],\r\n                            itemStyle: {\r\n                                normal: {\r\n                                    color: '#d0648a'\r\n                                }\r\n                            }\r\n                        },\r\n                        markLine: {\r\n                            data: [{\r\n                                type: 'average',\r\n                                name: '平均值'\r\n                            }]\r\n                        }\r\n                    },\r\n\r\n\r\n                ]\r\n            })\r\n        }\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-oD5ZwbWIQ9QZAPHDFiU420YvEUtol1V","theme":"","layout":"","viewCount":474,"userName":"我***白","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIkyB5bsjg.png?v=1604311058440","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","legend","markLine","markPoint","series-bar","series-effectScatter","series-line","series-lines","series-map","timeline","title","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"我***白"}}