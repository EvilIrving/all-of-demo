{"status":0,"data":{"cid":"xZ9_mjCfkP","authorUid":"bd-659851351","authorUserName":"唔***口","title":"自定义工具栏多类型切换 柱状图 折线图 堆叠图 饼图","description":"多类型切换 柱状图 折线图 堆叠图 饼图 点击视图转换icon X轴另一种维度展示","latestVersion":2,"alwaysLatest":1,"createTime":"2020-07-21T09:31:44.000Z","lastUpdateTime":"2020-07-21T09:31:44.000Z","auth":2,"uid":"bd-659851351","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-24T06:13:52.000Z","code":"     //图表所用的基本数据\r\n     var chartOpt = {\r\n         id: 'chart-panel',\r\n         type: 'bar',\r\n         flag: false,\r\n         title: '',\r\n         legend: ['阿里巴巴', '腾讯', '京东', '百度', '字节跳动'],\r\n         xAxisData: [\"2000\", \"2001\", \"2002\", \"2003\", ],\r\n         viewData1: [{\r\n                 name: '阿里巴巴',\r\n                 data: ['100', '125', '234', '400']\r\n             },\r\n             {\r\n                 name: '腾讯',\r\n                 data: ['200', '134', '322', '289']\r\n             },\r\n             {\r\n                 name: '京东',\r\n                 data: ['300', '288', '422', '389']\r\n             },\r\n             {\r\n                 name: '百度',\r\n                 data: ['400', '335', '112', '425']\r\n             },\r\n             {\r\n                 name: '字节跳动',\r\n                 data: ['500', '89', '79', '110']\r\n             }\r\n         ],\r\n         viewData2: [{\r\n                 name: '2000',\r\n                 data: ['89', '17', '25', '122', '200']\r\n             },\r\n             {\r\n                 name: '2001',\r\n                 data: ['123', '456', '117', '224', '233']\r\n             },\r\n             {\r\n                 name: '2002',\r\n                 data: ['288', '321', '178', '66', '386']\r\n             },\r\n             {\r\n                 name: '2003',\r\n                 data: ['188', '467', '112', '347', '123']\r\n             },\r\n\r\n         ],\r\n         pieTitle: '',\r\n         pieData: [{\r\n             type: 'pie',\r\n             radius: '55%',\r\n             center: ['50%', '60%'],\r\n             data: [{\r\n                     value: '100',\r\n                     name: '阿里巴巴'\r\n                 },\r\n                 {\r\n                     value: '300',\r\n                     name: '腾讯'\r\n                 },\r\n                 {\r\n                     value: '200',\r\n                     name: '京东'\r\n                 },\r\n                 {\r\n                     value: '600',\r\n                     name: '百度'\r\n                 },\r\n                 {\r\n                     value: '123',\r\n                     name: '字节跳动'\r\n                 },\r\n             ],\r\n             emphasis: {\r\n                 itemStyle: {\r\n                     shadowBlur: 10,\r\n                     shadowOffsetX: 0,\r\n                     shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                 }\r\n             }\r\n         }]\r\n     }\r\n\r\n     initEcharts()\r\n     // 对基本数据进行二次遍历 添加必要属性\r\n     function initData() {\r\n         if (chartOpt.type == 'stack') {\r\n             $.each(chartOpt.viewData1, function(index, item) {\r\n                 item.type = 'bar';\r\n                 item.stack = 'stack';\r\n             })\r\n             $.each(chartOpt.viewData2, function(index, item) {\r\n                 item.type = 'bar';\r\n                 item.stack = 'stack';\r\n             })\r\n         } else {\r\n             $.each(chartOpt.viewData1, function(index, item) {\r\n                 item.type = chartOpt.type;\r\n                 item.stack = '';\r\n             })\r\n             $.each(chartOpt.viewData2, function(index, item) {\r\n                 item.type = chartOpt.type;\r\n                 item.stack = '';\r\n             })\r\n         }\r\n     }\r\n\r\n     function initEcharts() {\r\n         initData()\r\n\r\n         var myChart = echarts.init(document.getElementById(chartOpt.id));\r\n         var color = ['#71BBEE', '#86DDF3', '#FEB2DA', '#B3DFEC', '#B9C0EA', '#E8A5CC', '#8474C7', '#AE8FDC', '#D395E0', '#F282A7', '#F0725C', '#F6AC5A', '#FADA88', '#4893C0', '#8ADFE3', '#55C5D1', '#4699C2', '#5155A0', '#7256A6', '#B39FD5', '#FFD574', '#F79C65', '#FC8476', '#ACBFEA', '#C8D5F6', '#F99DB0'];\r\n\r\n         var tooltip = {\r\n             trigger: 'axis',\r\n             axisPointer: {\r\n                 type: 'shadow'\r\n             }\r\n         };\r\n         var grid = {\r\n             left: '3%',\r\n             right: '4%',\r\n             bottom: '3%',\r\n             containLabel: true\r\n         };\r\n         var toolbox = {\r\n             show: true,\r\n             itemGap: 20,\r\n             itemSize: 26,\r\n             right: 0,\r\n             feature: {\r\n                 mySwitch: {\r\n                     show: true,\r\n                     title: '转换视图',\r\n                     icon: 'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNklEQVQ4T6WTIU8DQRCF981vQCBwzdwlCDQCQishEFAkSBIEGP4CxaFBgMJhsJCQIKAEg8MR9iZXheBPdB/Zy7W5Xkm4Cytn33wz+2YH7p8H9Xzv/RyAfQAbqtozs8UQwm5dJyK3qvoxBfDe7wA4A5A65wYl4Nk51/2l0eJ+AhgOh0uj0eiR5BOAc1V9i0lm1gyQZdkhgEsR2ep0Ovfjio0AZnZStrlA8jtJktVWgLLVawB7JNdVddAaUEK61eQY8973RWStbmII4SVN035hYhSNBSLCEMLE3CiqJpvZVJFC+JdRled0ATyQvFHVgxhvBciy7BXAvHPuq/wnp60AeZ5vhhDuSB4lSXLVqgMzWyZ5LCLbJFdU9b0xoOZRrzqpmSnUxxWnEAEkPwFcxAWqama2se12/wBk+7IRXm9j1AAAAABJRU5ErkJggg==',\r\n                     onclick: function() {\r\n                         chartOpt.flag = !chartOpt.flag\r\n                         initEcharts();\r\n                     }\r\n                 },\r\n                 myBar: {\r\n                     show: true,\r\n                     title: '切换为柱状图',\r\n                     icon: chartOpt.type == 'bar' ?\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAc0lEQVQ4T2NkoBAw4tIvNO32f2S5d1mqWNXiNQCmCWQYVQwQmnqzAcVV2eoNJLkA7K3//xrBhjAy1YNcBTYAm8nIzoaxsYlBDMBiMskGoAfYqAGqjCSHAXqyxZaUsYnhTEjE5jFEOiBWB5I6eEokQy9cCwAQ39oRZIcmAwAAAABJRU5ErkJggg==' :\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAcUlEQVQ4T+2TYQrAIAhGp3cRj7l2zPAubhgUITaK9nP9Cs3HQ77g2DwwmheRu+8RUfj2FVCHDPYJIOeceitmTksGZqKql0EQ8TSrAojIvXa9R7UCiMjLAL+wH0CwvAMf2yjKUW0YpNk/1nIwO+BNtw0e6FncETIFnTsAAAAASUVORK5CYII=',\r\n                     onclick: function() {\r\n                         chartOpt.type = 'bar';\r\n                         initEcharts();\r\n                     }\r\n                 },\r\n                 myLine: {\r\n                     show: true,\r\n                     title: '切换为折线图',\r\n                     icon: chartOpt.type == 'line' ?\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABdElEQVQ4T62TvUoDQRDHZ/YEUUTIWQh2kmxMZZVCURARG60CElS00EZvgz7D4TvkzhewucYnEDFNCgXBSrMJEcRCyK34URg0u7KXOwkhQkzcanc+fvOfGRahz4M6P+bw82dGF3th/Q/AdPmFsOjCXxSY+TsbDOIFCkyHFwWjs90CgmQ0MgRINgSUrwRLpFsBY24541uJ03ZokAxktSEb2ZeDVLUJcPmNsOh0FGw63APENURc9vfjZz/2ZuUlxMa6b009anuooHQrWDIVtuMhYlUqcoIgr1HhjJ+LX4ay5z6N4Y23vYlaBI1mUBGMxnVlBKj5jLJgvfnKPKIsgJJHgJiGL9wUh/S1ta0mIM8fAKGIAHWf0e3WgNhxZQWl3B0dGti635n8aJ9JpOBJMDr+6xZsm4Bty07+aAtCsITZ7Ro7tFB6F7nkSO8Al9eFRQd7BzhcgQIPCBBQSBQAIUoaCoEAIAHQdu1FopTS76B1/QGDSz/nGyrui2+v+pGrAAAAAElFTkSuQmCC' :\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABTElEQVQ4T62TMUvEMBiGvy89cHFy8Qe4OHl3eTNUFKSIi04HIiq6OPoriv/FpYu/QESXG9q04OQiN4iDcDgUB4WSSEoD5VQ4rYFC8iXv0/fNR5g6Dnb6PM9vpJTRX1j/A9Ba3wLY+o2DNE3jIAiS2oHWegxgfV6AEwshRr1e78ADMgCqDdBajwBczUIb8Z4T9/v9iQfcA1jzh/M8T4hon4h2pJTXvt6It4MgOBwMBs+uXgOyLHtQSq02HUmstRMiumTmgpnD4XCYNpk3jDFHSqmph3oHjwBWmj9PpZTnDXiTme+MMRfMrKqqOg7DsGzH8g6ehBBja+0HgNP2gaIodo0xZ2VZnkRR9D57J97BC4Dln7oQx7GI49h8t+8BrwCW5m3jlwha6zcAi10ALvtCF4AlooSZhbVWEJH7Ajd3Nbdu7zFzHd09wHrSZXwCvbCTPyDeKH4AAAAASUVORK5CYII=',\r\n                     onclick: function() {\r\n                         chartOpt.type = 'line';\r\n                         initEcharts();\r\n                     }\r\n                 },\r\n                 myStack: {\r\n                     show: true,\r\n                     title: '切换为堆叠图',\r\n                     icon: chartOpt.type == 'stack' ?\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAg0lEQVQ4T2NkoBAwUqifAacB/NMeCiIb/jFL/j02y3AaID7tltJfBiawIcwM/96/zFK7R7EB2FyF0wWC029vQLbxfaZqADZXgQ3AJiE07fYqBgaGUKghq99lqYZRbAA2V4FdgM02YsVGDVANg4UBLLrAsfYuS3W10LTbRInRLjMRm0sBMJCbEa2ksw0AAAAASUVORK5CYII=' :\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAgklEQVQ4T+2TwQnAIAxFUzfoBELhO08v7ZDtpfP4oeAEbiAFqeAhgiC91WMk7z8SMsngmwb7pQkIIcw13FobtbAmwHu/GGMyJKUUnXP3MECzahqQvOpEAKtmlQHaB8lDRLYXcgLYhwGaVTbQ0nprPwB7mUFZV94agJNkV+27Y+q90geZX6ERodWiEgAAAABJRU5ErkJggg==',\r\n                     onclick: function() {\r\n                         chartOpt.type = 'stack';\r\n                         initEcharts();\r\n                     }\r\n                 },\r\n                 myPie: {\r\n                     show: true,\r\n                     title: '切换为饼图',\r\n                     icon: chartOpt.type == 'pie' ?\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABuklEQVQ4T6XTPUgcQRQH8P+bWyxCUHcljRhQ4jsJUYgRbLRQEG2sAjGpYhe5uSRESfoU9kLOvY1gl84PAimSLrGy0nQi3KxB0C46J5JCjrt9YQ/28BRzhJtuHvN+w3tvhtDkoibzcSPgBWYeERZA6ALwTSBfijr98eqF1wDPD58C8hbAIREOKnFyGceOgxkRjNssT15G6gAvH74AZCWqYPzsFW+158xYysHd0wx/ipPcIHwGyLtihocSpAa0+4WHiuiHAk2c6N7d+EAVSMnoqU4vJgle3iwB2LOaV+NYDfDy5glAs1b3TieHY0CpaMxm+94nMTcIRyAyV9T8/CrwRgRczHL2X0Dr6pHnlC5+Ws3dDYHOlZ1bF5W2z1bzVILe/mDutDgoWM1uwxKqfQjMoBJsWM33qo30D0aJopzVPFgHtC2bR0phOwUaSZqY3NrhFx4L0ZrV7Li+8YlQsprn64B40+GHL4UkB2DGal6/PG83CPtJsAFE51anh6+NsTYm30yCsCnAdwJ+xXER9IDwAIIlUeWvZ5n7hzcC1Tpz+wNQLf0E6YSSCILjUhlbf17z74ZP+X8/V9O/8S9fwqwRJeEtLQAAAABJRU5ErkJggg==' :\r\n                         'image://data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABjklEQVQ4T6WTP0jbURDHvwclg0uo4FIsKP6+L4RaaBW66BCh1MVJ8M+kWzu0Q1vq7uDuIEILbt1qi9BBt5rJKbpJ4PcuIsTNrVMo4V15JT/5RatBcts77j737u57gj5N+szHrQDv/QcAHwEMAzgws5/Ouc/XC94AqOqSmX0CcA6gEZMBXABYBDBD8lUe0gVQ1ddm9qUTWPXeVwA8Jvk1JqnqspmtkZzMIFeANE2ficihiLxMkuQ4BkSAmU075zayBO/9JoBTkjvRdwXw3i+IyGqSJHO54EoIoVIqldYzn6pOmdkbkivXAe8BkOTbuwDNZnOw1WqdkBzpCajVagPFYnGP5GwOOgQgJfmwZwudOTwH8J3kWHw3Go3pEMIWyejvmsEEgCMRmcqGmFVN03ReRL6RfOC93wbwh2TUSbeQVPWdmW3FnZPcze9bVcfjT0IIv51zL26sMddjFMoPAL8AnHX8owCeANhst9v75XI5iuyf/VfK9Xr9aaFQGDezR2YWOkqskrzsKeX7Hlff1/gXMTWtESTBKS8AAAAASUVORK5CYII=',\r\n                     onclick: function() {\r\n                         chartOpt.type = 'pie';\r\n                         initEcharts();\r\n                     }\r\n                 }\r\n             }\r\n         };\r\n         // 指定图表的配置项和数据\r\n         var option = {\r\n             tooltip: tooltip,\r\n             color: color,\r\n             dataZoom: [{\r\n                 show: true,\r\n                 end: 90,\r\n                 dataBackground: {\r\n                     lineStyle: {\r\n                         opacity: 0\r\n                     },\r\n                     areaStyle: {\r\n                         opacity: 0\r\n                     }\r\n                 }\r\n             }],\r\n             toolbox: toolbox,\r\n             legend: {\r\n                 data: chartOpt.flag ? chartOpt.xAxisData : chartOpt.legend,\r\n             },\r\n             grid: grid,\r\n             xAxis: [{\r\n                 type: 'category',\r\n                 data: chartOpt.flag ? chartOpt.legend : chartOpt.xAxisData,\r\n\r\n             }],\r\n             yAxis: [{\r\n                 type: 'value'\r\n             }],\r\n             series: chartOpt.flag ? chartOpt.viewData2 : chartOpt.viewData1\r\n         }\r\n         if (chartOpt.type == 'pie') {\r\n             toolbox.feature.mySwitch.show = false;\r\n             option = {\r\n                 tooltip: {\r\n                     trigger: 'item',\r\n                     formatter: function(params) {\r\n                         var result = ''\r\n                         result += params.marker + params.name + params.value\r\n                         return result\r\n                     }\r\n                 },\r\n                 label: {\r\n                     formatter: function(params) {\r\n                         var result = ''\r\n                         result += params.name + ' : ' + params.percent + '%'\r\n                         return result\r\n                     }\r\n                 },\r\n                 color: color,\r\n                 dataZoom: {\r\n                     show: false\r\n                 },\r\n                 toolbox: toolbox,\r\n                 legend: {\r\n                     data: chartOpt.legend\r\n                 },\r\n                 grid: grid,\r\n                 xAxis: {\r\n                     show: false\r\n                 },\r\n                 yAxis: {\r\n                     show: false\r\n                 },\r\n                 series: chartOpt.pieData\r\n             }\r\n         }\r\n\r\n         myChart.setOption(option, true);\r\n         window.onresize = function() {\r\n             myChart.resize();\r\n         }\r\n     }\r\n\r\n     //qq 45664741","html":"","externalScripts":"","updaterUID":"bd-659851351","theme":"","layout":"","viewCount":393,"userName":"唔***口","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZ9_mjCfkP.png?v=1595571232110","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","toolbox","tooltip"],"customTags":["line","pie","stack","toolbox","自定义工具栏"],"updaterUserName":"唔***口"}}