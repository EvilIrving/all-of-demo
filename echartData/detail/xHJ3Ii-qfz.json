{"status":0,"data":{"cid":"xHJ3Ii-qfz","authorUid":"bd-1795655580","authorUserName":"ds416381463","title":"清远","description":"模仿样例学习\n原地址：http://gallery.echartsjs.com/editor.html?c=xBkVnciA0b","latestVersion":2,"alwaysLatest":1,"createTime":"2017-12-22T04:34:28.000Z","lastUpdateTime":"2017-12-22T04:34:28.000Z","auth":2,"uid":"bd-1795655580","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-22T07:08:08.000Z","code":"/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\nvar uploadedDataURL = \"/asset/get/s/data-1513915836999-BkHTS-qfz.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('jiangxi', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '佛冈县': [113.555135527344, 23.9051271796876],\n        '连南瑶族自治县': [112.263338652344, 24.446567609375],\n        '连山壮族瑶族自治县': [112.157345, 24.7438430000001],\n        '连州市': [112.377345, 24.923843],\n        '清城区': [113.057345, 23.643843],\n        '清新县': [112.857345, 23.943843],\n        '阳山县': [112.747345, 24.553843],\n        '英德市': [113.167345, 24.253843]\n\n    }\n    var data = [{\n        name: '佛冈县',\n        value: 199\n    }, {\n        name: '连南瑶族自治县',\n        value: 39\n    }, {\n        name: '连山壮族瑶族自治县',\n        value: 152\n    }, {\n        name: '连州市',\n        value: 299\n    }, {\n        name: '清城区',\n        value: 89\n    }, {\n        name: '清新县',\n        value: 52\n    }, {\n        name: '阳山县',\n        value: 9\n    }, {\n        name: '英德市',\n        value: 352\n    }];\n    var max = 480,\n        min = 9; // todo \n    var maxSize4Pin = 100,\n        minSize4Pin = 20;\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value)\n                });\n            }\n        }\n        return res;\n    };\n\n\n    option = {\n        title: {\n            text: '清远',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: function(params) {\n                if (typeof(params.value)[2] == \"undefined\") {\n                    return params.name + ' : ' + params.value;\n                } else {\n                    return params.name + ' : ' + params.value[2];\n                }\n            }\n        },\n        legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n            data: ['credit_pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        dataRange: {\n            show: false,\n            x: 'left',\n            y: 'bottom',\n            seriesIndex: [1],\n            splitList: [{\n                start: 199,\n                end: 199,\n                label: '佛冈县',\n                color: 'red'\n            }, {\n                start: 39,\n                end: 39,\n                label: '连南瑶族自治县',\n                color: 'green'\n            }, {\n                start: 152,\n                end: 152,\n                label: '连山壮族瑶族自治县',\n                color: 'blue'\n            }, {\n                start: 299,\n                end: 299,\n                label: '连州市',\n                color: 'black'\n            }, {\n                start: 89,\n                end: 89,\n                label: '清城区',\n                color: '#800080'\n            }, {\n                start: 52,\n                end: 52,\n                label: '清新县',\n                color: '#2B32B2'\n            }, {\n                start: 9,\n                end: 9,\n                label: '阳山县',\n                color: '#031525'\n            }, {\n                start: 352,\n                end: 352,\n                label: '英德市',\n                color: '#A5CC82'\n            }, ],\n\n        },\n        /*visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n                // color: ['#3B5077', '#031525'] // 蓝黑\n                // color: ['#ffc0cb', '#800080'] // 红紫\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\n                //color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n                // color: ['#23074d', '#cc5333'] // 紫红\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#1488CC', '#2B32B2'] // 浅蓝\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n            }\n        },*/\n        // toolbox: {\n        //     show: true,\n        //     orient: 'vertical',\n        //     left: 'right',\n        //     top: 'center',\n        //     feature: {\n        //             dataView: {readOnly: false},\n        //             restore: {},\n        //             saveAsImage: {}\n        //             }\n        // },\n        geo: {\n            show: true,\n            map: 'jiangxi',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#3B5077',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7',\n                }\n            }\n        },\n        series: [{\n                name: 'credit_pm2.5',\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                data: convertData(data),\n                symbolSize: function(val) {\n                    return val[2] / 10;\n                },\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#05C3F9'\n                    }\n                }\n            }, {\n                type: 'map',\n                map: 'qingyuan',\n                geoIndex: 0,\n                aspectScale: 0.75, //长宽比\n                showLegendSymbol: false, // 存在legend时显示\n                label: {\n                    normal: {\n                        show: false\n                    },\n                    emphasis: {\n                        show: false,\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                roam: true,\n                itemStyle: {\n                    normal: {\n                        areaColor: '#031525',\n                        borderColor: '#3B5077',\n                    },\n                    emphasis: {\n                        areaColor: '#2B91B7'\n                    }\n                },\n                animation: false,\n                data: data\n            }, {\n                name: '点',\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                symbol: 'pin',\n                symbolSize: function(val) {\n                    var a = (maxSize4Pin - minSize4Pin) / (max - min);\n                    var b = minSize4Pin - a * min;\n                    b = maxSize4Pin - a * max;\n                    return a * val[2] + b;\n                },\n                label: {\n                    normal: {\n                        show: true,\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 9,\n                        }\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#F62157', //标志颜色\n                    }\n                },\n                zlevel: 6,\n                data: convertData(data),\n            }, {\n                name: 'Top 5',\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(data.sort(function(a, b) {\n                    return b.value - a.value;\n                }).slice(0, 5)),\n                symbolSize: function(val) {\n                    return val[2] / 10;\n                },\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                hoverAnimation: true,\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#05C3F9',\n                        shadowBlur: 10,\n                        shadowColor: '#05C3F9'\n                    }\n                },\n                zlevel: 1\n            },\n\n        ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"bd-1795655580","theme":"","layout":"","viewCount":4937,"userName":"ds416381463","commentCount":3,"starCount":11,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJ3Ii-qfz.png?v=1513926488431","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"ds416381463"}}