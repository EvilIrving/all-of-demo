{"status":0,"data":{"cid":"xJEsyXmA-w","authorUid":"bd-171648521","authorUserName":"绿***绿","title":"设备总数","description":"pie","latestVersion":2,"alwaysLatest":1,"createTime":"2020-07-06T02:41:01.000Z","lastUpdateTime":"2020-07-06T02:41:01.000Z","auth":2,"uid":"bd-171648521","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-06T07:43:41.000Z","code":" let dataPie = [\r\n\r\n     {\r\n         value: 52,\r\n         name: '在线'\r\n     },\r\n     {\r\n         value: 36,\r\n         name: '维修'\r\n     },\r\n     {\r\n         value: 31,\r\n         name: '离线'\r\n     },\r\n     {\r\n         value: 15,\r\n         name: '检修'\r\n     },\r\n     {\r\n         value: 17,\r\n         name: '抢修'\r\n     },\r\n     {\r\n         value: 22,\r\n         name: '其他'\r\n     },\r\n ];\r\n let colorPie = ['#173852', '#0b2036', '#002e49'];\r\n let colorWrap = ['#3087d6', '#f6ce54', '#4be1ff', \"#b6e9ff\", \"#18edc9\", \"#6ac5fa\"];\r\n let baseDataPie = [],\r\n     baseDataWrap = [];\r\n let total = 0;\r\n dataPie.forEach(function(val, idx, arr) {\r\n     total += val.value;\r\n })\r\n for (let i = 0; i < dataPie.length; i++) {\r\n     baseDataWrap.push({\r\n         value: dataPie[i].value,\r\n         name: dataPie[i].name,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: colorWrap[i],\r\n                 borderWidth: 5,\r\n                 borderColor: colorWrap[i],\r\n                 shadowBlur: 50,\r\n                 shadowColor: 'rgba(7, 132, 250, 0.8)',\r\n             }\r\n         }\r\n         \r\n         \r\n         \r\n         \r\n         \r\n         \r\n         \r\n         \r\n         \r\n     }, {\r\n         value: 5,\r\n         name: '',\r\n         itemStyle: {\r\n             normal: {\r\n                 color: 'transparent',\r\n                 borderWidth: 5,\r\n                 borderColor: 'transparent',\r\n\r\n             }\r\n         },\r\n         tooltip: {\r\n             show: false\r\n         },\r\n     });\r\n\r\n     if (i < 3) {\r\n         baseDataPie.push({\r\n             value: dataPie[i].value,\r\n             name: dataPie[i].name,\r\n             itemStyle: {\r\n                 normal: {\r\n                     borderWidth: 20,\r\n                     borderColor: colorPie[i],\r\n                 }\r\n             }\r\n         });\r\n     }\r\n }\r\n\r\n\r\n option = {\r\n     backgroundColor: \"#031223\",\r\n     title: {\r\n         text: '设备总数',\r\n         subtext: '10,225',\r\n         textStyle: {\r\n             color: '#00b5f3',\r\n             fontSize: 14,\r\n\r\n         },\r\n         subtextStyle: {\r\n             align: 'center',\r\n             fontSize: 16,\r\n             color: ['#85c7e3'],\r\n             fontWeight: 800\r\n         },\r\n         x: '23%',\r\n         y: 'center',\r\n     },\r\n     grid: {\r\n         left: '1%', // 与容器左侧的距离\r\n         right: '1%', // 与容器右侧的距离\r\n         top: '1%', // 与容器顶部的距离\r\n         bottom: '1%', // 与容器底部的距离\r\n\r\n     },\r\n     tooltip: {\r\n         show: true,\r\n         trigger: 'item',\r\n         formatter: \"{a}：{b} <br/>数量：{c}\"\r\n     },\r\n     legend: [{\r\n             data: ['在线', '维修', '离线','检修', '抢修', '其他'],\r\n             icon: 'vertical',\r\n             right: '5px',\r\n             top: 'center',\r\n             orient: 'vertical',\r\n             itemGap: 20,\r\n             itemWidth: 15,\r\n             itemHeight: 8,\r\n             formatter: function(name) {\r\n\r\n                 let target, percent;\r\n                 for (let i = 0; i < dataPie.length; i++) {\r\n                     if (dataPie[i].name === name) {\r\n                         target = dataPie[i].value;\r\n                         percent = ((target / total) * 100).toFixed(1);\r\n                     }\r\n                 }\r\n                 let arr = [percent + '% ' + ' {yellow|' + target + '}', ' {blue|' + name + '}'];\r\n                 return arr.join(\"\\n\")\r\n\r\n             },\r\n             textStyle: {\r\n                 lineHeight: 20,\r\n                 color: '#f0f4f6',\r\n                 align: 'right',\r\n                 rich: {\r\n                     yellow: {\r\n                         color: '#00b5f3',\r\n                         fontWeight: \"bold\"\r\n\r\n                     },\r\n                     blue: {\r\n                         color: '#4be1ff',\r\n                         align: 'right',\r\n\r\n                     },\r\n                 }\r\n\r\n             },\r\n         },\r\n        /* {\r\n             data: ['检修', '抢修', '其他'],\r\n             icon: 'vertical',\r\n             right: '5px',\r\n             top: 'center',\r\n             orient: 'vertical',\r\n             itemGap: 20,\r\n             itemWidth: 15,\r\n             itemHeight: 8,\r\n             formatter: function(name) {\r\n\r\n                 let target, percent;\r\n                 for (let i = 0; i < dataPie.length; i++) {\r\n                     if (dataPie[i].name === name) {\r\n                         target = dataPie[i].value;\r\n                         percent = ((target / total) * 100).toFixed(1);\r\n                     }\r\n                 }\r\n                 let arr = [percent + '% ' + ' {yellow|' + target + '}', ' {blue|' + name + '}'];\r\n                 return arr.join(\"\\n\")\r\n\r\n             },\r\n             textStyle: {\r\n\r\n                 lineHeight: 20,\r\n                 color: '#f0f4f6',\r\n                 align: 'right',\r\n                 rich: {\r\n                     yellow: {\r\n                         color: '#00b5f3',\r\n                         fontWeight: \"bold\"\r\n\r\n\r\n                     },\r\n                     blue: {\r\n                         color: '#4be1ff',\r\n                         align: 'right',\r\n\r\n                     },\r\n                 }\r\n\r\n             },\r\n         }*/\r\n     ],\r\n\r\n     series: [{\r\n             name: '报警',\r\n             type: 'pie',\r\n             clockWise: false, //顺时加载\r\n             hoverAnimation: false, //鼠标移入变大\r\n             center: ['30%', '50%'],\r\n             radius: ['80%', '81%'],\r\n             label: {\r\n                 normal: {\r\n                     show: false\r\n                 }\r\n             },\r\n             data: baseDataWrap\r\n         },\r\n         {\r\n             name: '',\r\n             type: 'pie',\r\n             color: colorPie,\r\n             selectedMode: 'single',\r\n             radius: ['55%', '58%'],\r\n             center: ['30%', '50%'],\r\n             hoverAnimation: false,\r\n             label: {\r\n                 normal: {\r\n                     show: false,\r\n                 }\r\n             },\r\n             tooltip: {\r\n                 show: false\r\n             },\r\n             data: baseDataPie\r\n         },\r\n\r\n     ]\r\n };","html":"","externalScripts":"","updaterUID":"bd-171648521","theme":"","layout":"","viewCount":789,"userName":"绿***绿","commentCount":0,"starCount":13,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xJEsyXmA-w.png?v=1594021421769","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"绿***绿"}}