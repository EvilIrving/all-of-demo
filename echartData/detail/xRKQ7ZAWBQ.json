{"status":0,"data":{"cid":"xRKQ7ZAWBQ","authorUid":"bd-1627449234","authorUserName":"l***w","title":"排行","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-12-09T06:04:02.000Z","lastUpdateTime":"2020-12-09T06:04:02.000Z","auth":2,"uid":"bd-1627449234","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-09T06:38:28.000Z","code":"let data=[\r\n    {\"name\":\"600519\", \"num\":\"21.987691\"},\r\n    {\"name\":\"000858\", \"num\":\"20.377176\"},\r\n    {\"name\":\"002475\", \"num\":\"19.127404\"},\r\n    {\"name\":\"600276\", \"num\":\"18.40882\"},\r\n    {\"name\":\"601518\", \"num\":\"17.980597\"},\r\n    {\"name\":\"000661\", \"num\":\"16.957898\"},\r\n    {\"name\":\"000333\", \"num\":\"15.099577\"},\r\n    {\"name\":\"300760\", \"num\":\"14.76103\"},\r\n    {\"name\":\"300750\", \"num\":\"15.002175\"},\r\n    {\"name\":\"601888\", \"num\":\"12.153536\"}\r\n    ]\r\n  function contains(arr, dst) {\r\n        var i = arr.length;\r\n        while ((i -= 1)) {\r\n          if (arr[i] == dst) {\r\n            return i;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n    \r\n      var attackSourcesColor = [\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#EB3B5A\" },\r\n          { offset: 1, color: \"#FE9C5A\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#FA8231\" },\r\n          { offset: 1, color: \"#FFD14C\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#F7B731\" },\r\n          { offset: 1, color: \"#FFEE96\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#395CFE\" },\r\n          { offset: 1, color: \"#2EC7CF\" }\r\n        ])\r\n      ];\r\n      var attackSourcesColor1 = [\r\n        \"#EB3B5A\",\r\n        \"#FA8231\",\r\n        \"#F7B731\",\r\n        \"#3860FC\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#56D0E3\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#F57474\"\r\n      ];\r\n      var attaData = [];\r\n      var attaName = [];\r\n      var topName=[]\r\n      data.forEach((it, index) => {\r\n        attaData[index] = parseFloat(it.num).toFixed(0);\r\n        //attaData[index] = parseInt(it.num);\r\n        attaName[index] = it.name;\r\n        topName[index] = `${it.name}`\r\n      });\r\n      var salvProMax = []; \r\n      var max = attaData[0];\r\n      for (let i = 0; i < attaData.length; i++) {\r\n          max = max < attaData[i+1] ? attaData[i+1] : max;\r\n      }\r\n      for (let i = 0; i < attaData.length; i++) {\r\n        salvProMax.push(max);               //背景按最大值\r\n      }\r\n      function attackSourcesDataFmt(sData) {\r\n        var sss = [];\r\n        sData.forEach(function(item, i) {\r\n          let itemStyle = {\r\n            color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i]\r\n          };\r\n          sss.push({\r\n            value: item,\r\n            itemStyle: itemStyle\r\n          });\r\n        });\r\n        return sss;\r\n      }\r\n\r\n      var option = {\r\n        backgroundColor: \"#000\",\r\n        tooltip: {\r\n          show: false,\r\n          backgroundColor: \"rgba(3,169,244, 0.5)\", //背景颜色（此时为默认色）\r\n          textStyle: {\r\n            fontSize: 16\r\n          }\r\n        },\r\n        color: [\"#F7B731\"],\r\n        legend: {\r\n          show:false,\r\n          pageIconSize: [12, 12],\r\n          itemWidth: 20,\r\n          itemHeight: 10,\r\n          textStyle: {\r\n            //图例文字的样式\r\n            fontSize: 12,\r\n            color: \"#fff\"\r\n          },\r\n          selectedMode: false,\r\n          data: [\"个人所得(亿元)\"]\r\n        },\r\n        grid: {\r\n          left: \"5%\",\r\n          right: \"2%\",\r\n          width:\"80%\",\r\n          bottom: \"2%\",\r\n          top: \"8%\",\r\n          containLabel: true\r\n        },\r\n        xAxis: {\r\n          type: \"value\",\r\n\r\n          splitLine: {\r\n            show: false\r\n          },\r\n          axisLabel: {\r\n            show: false\r\n          },\r\n          axisTick: {\r\n            show: false\r\n          },\r\n          axisLine: {\r\n            show: false\r\n          }\r\n        },\r\n        yAxis: [\r\n          {                                      //左侧排行数字\r\n            type: \"category\",\r\n            inverse: true,\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisPointer: {\r\n              label: {\r\n                show: true,\r\n                //margin: 30\r\n              }\r\n            },\r\n            pdaaing: [5, 0, 0, 0],\r\n            postion: \"right\",\r\n            data: attaName,\r\n            axisLabel: {\r\n              margin: 30,\r\n              fontSize: 12,\r\n              align: \"left\",\r\n              padding: [2, 0, 0, 0],\r\n              color: \"#000\",\r\n              rich: {\r\n                nt1: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[0],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 12,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  lineHeight: \"5\",\r\n                  padding: [0, 1, 2, 1]\r\n                  // padding:[0,0,2,0],\r\n                },\r\n                nt2: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[1],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 12,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1]\r\n                },\r\n                nt3: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[2],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 12,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1]\r\n                },\r\n                nt: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[3],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 12,\r\n                  align: \"center\",\r\n                  lineHeight: 3,\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1],\r\n                  lineHeight: 5\r\n                }\r\n              },\r\n              formatter: function(value, index) {\r\n                index = contains(attaName, value) + 1;\r\n                if (index - 1 < 3) {\r\n                  return [\"{nt\" + index + \"|\" + index + \"}\"].join(\"\\n\");\r\n                } else {\r\n                  return [\"{nt|\" + index + \"}\"].join(\"\\n\");\r\n                }\r\n              }\r\n            }\r\n          },\r\n          {                                       //右侧名字\r\n            type: \"category\",\r\n            inverse: true,\r\n            axisTick: \"none\",\r\n            axisLine: \"none\",\r\n            show: true,\r\n            axisLabel: {\r\n              textStyle: {\r\n                color: \"#fff\",\r\n                fontSize: \"12\"\r\n              }\r\n            },\r\n            //data: attackSourcesDataFmt(attaName) \r\n            data: attackSourcesDataFmt(attaData)  //数字\r\n          },\r\n          {                                   //名称\r\n          type: 'category',\r\n             offset: -10,\r\n            position: \"left\",\r\n            axisLabel: {\r\n              color: `#fff`,\r\n              fontSize: 10\r\n            },\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            inverse: true,\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              interval: 0,\r\n              color: [\"#fff\"],\r\n              align: \"left\",\r\n              verticalAlign: \"bottom\",\r\n              lineHeight: 32,\r\n              fontSize: 12\r\n            },\r\n            data: topName\r\n          },\r\n        ],\r\n        series: [\r\n          {                                //条形图数值\r\n            zlevel: 1,\r\n            name: \"个人所得(亿元)\",\r\n            type: \"bar\",\r\n            barWidth: \"15px\",\r\n            animationDuration: 1500,\r\n            data: attackSourcesDataFmt(attaData),\r\n            align: \"center\",\r\n            itemStyle: {\r\n              normal: {\r\n                barBorderRadius: 10\r\n              }\r\n            },\r\n            label: {\r\n              show: false,\r\n              fontSize: 12,\r\n              color: \"#fff\",\r\n              textBorderWidth: 2,\r\n              padding: [2, 0, 0, 0]\r\n            }\r\n          },\r\n          {                           //最大值背景条形图\r\n            name: \"个人所得(亿元)\",\r\n            type: \"bar\",\r\n            barWidth: 15,\r\n            barGap: \"-100%\",\r\n            margin: \"20\",\r\n            data: salvProMax,\r\n            textStyle: {\r\n              //图例文字的样式\r\n              fontSize: 12,\r\n              color: \"#fff\"\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                color: \"#05325F\",\r\n                //width:\"100%\",\r\n                fontSize: 12,\r\n                barBorderRadius: 30\r\n              },\r\n            }\r\n          }\r\n        ]\r\n      };","html":"","externalScripts":"","updaterUID":"bd-1627449234","theme":"","layout":"","viewCount":280,"userName":"l***w","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xRKQ7ZAWBQ.png?v=1607495909063","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"l***w"}}