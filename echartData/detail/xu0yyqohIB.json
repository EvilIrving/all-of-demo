{"status":0,"data":{"cid":"xu0yyqohIB","authorUid":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","authorUserName":"b***n","title":"柱状堆叠图","description":"柱状堆叠图","latestVersion":2,"alwaysLatest":1,"createTime":"2020-08-10T08:35:35.000Z","lastUpdateTime":"2020-08-10T08:35:35.000Z","auth":2,"uid":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-26T08:28:59.000Z","code":"let list = [{\r\n        \"BHLX\": \"0\",\r\n        \"BHLX_DESC\": \"沉降\",\r\n        \"CHILDREN\": [{\r\n                \"ZT\": \"0\",\r\n                \"ZTMC\": \"可控\",\r\n                \"COUNT\": 0\r\n            },\r\n            {\r\n                \"ZT\": \"1\",\r\n                \"ZTMC\": \"轻微\",\r\n                \"COUNT\": 0\r\n            },\r\n            {\r\n                \"ZT\": \"2\",\r\n                \"ZTMC\": \"严重\",\r\n                \"COUNT\": 1\r\n            },\r\n            {\r\n                \"ZT\": \"3\",\r\n                \"ZTMC\": \"非常严重\",\r\n                \"COUNT\": 0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"BHLX\": \"01\",\r\n        \"BHLX_DESC\": \"坍塌\",\r\n        \"CHILDREN\": [{\r\n                \"ZT\": \"0\",\r\n                \"ZTMC\": \"可控\",\r\n                \"COUNT\": 1\r\n            },\r\n            {\r\n                \"ZT\": \"1\",\r\n                \"ZTMC\": \"轻微\",\r\n                \"COUNT\": 1\r\n            },\r\n            {\r\n                \"ZT\": \"2\",\r\n                \"ZTMC\": \"严重\",\r\n                \"COUNT\": 0\r\n            },\r\n            {\r\n                \"ZT\": \"3\",\r\n                \"ZTMC\": \"非常严重\",\r\n                \"COUNT\": 0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"BHLX\": \"61\",\r\n        \"BHLX_DESC\": \"倾斜\",\r\n        \"CHILDREN\": [{\r\n                \"ZT\": \"0\",\r\n                \"ZTMC\": \"可控\",\r\n                \"COUNT\": 1\r\n            },\r\n            {\r\n                \"ZT\": \"1\",\r\n                \"ZTMC\": \"轻微\",\r\n                \"COUNT\": 0\r\n            },\r\n            {\r\n                \"ZT\": \"2\",\r\n                \"ZTMC\": \"严重\",\r\n                \"COUNT\": 0\r\n            },\r\n            {\r\n                \"ZT\": \"3\",\r\n                \"ZTMC\": \"非常严重\",\r\n                \"COUNT\": 1\r\n            }\r\n        ]\r\n    }\r\n]\r\nlet colorArr = [\"#00bd8d\", \"#ffff00\", \"#ffb508\", \"#ff4c4c\"];\r\nlet xAxisData = [];\r\nlet legendData = [\"可控\", \"轻微\", \"严重\", \"非常严重\"];\r\nlet ary = [{\r\n        name: \"可控\",\r\n        data: []\r\n    },\r\n    {\r\n        name: \"轻微\",\r\n        data: []\r\n    },\r\n    {\r\n        name: \"严重\",\r\n        data: []\r\n    },\r\n    {\r\n        name: \"非常严重\",\r\n        data: []\r\n    }\r\n];\r\nlist.map(item => {\r\n    xAxisData.push(item.BHLX_DESC);\r\n    ary[0].data.push(item.CHILDREN[0].COUNT);\r\n    ary[1].data.push(item.CHILDREN[1].COUNT);\r\n    ary[2].data.push(item.CHILDREN[2].COUNT);\r\n    ary[3].data.push(item.CHILDREN[3].COUNT);\r\n});\r\n\r\n\r\nlet seriesData = getSeries(legendData, ary, colorArr);\r\n\r\nfunction getSeries(legendData, data, colorArr) {\r\n    let series = [];\r\n    legendData.forEach((item, index) => {\r\n        series.push({\r\n            name: item,\r\n            type: \"bar\",\r\n            stack: \"jcbh\",\r\n            barWidth: \"20%\",\r\n            itemStyle: {\r\n                normal: {\r\n                    color: colorArr[index]\r\n                }\r\n            },\r\n            data: data[index].data\r\n        });\r\n    });\r\n    return series;\r\n}\r\n\r\noption = {\r\n    backgroundColor:\"#333\",\r\n    tooltip: {\r\n        trigger: \"axis\",\r\n        axisPointer: {\r\n            type: \"shadow\",\r\n        },\r\n        textStyle: {\r\n            align: \"left\",\r\n        },\r\n    },\r\n    legend: {\r\n        data: legendData,\r\n        icon: \"circle\",\r\n        // rect\r\n        itemWidth: 10,\r\n        itemHeight: 10,\r\n        top: 0,\r\n        right: 70,\r\n        textStyle: {\r\n            color: \"#999\",\r\n        },\r\n    },\r\n    grid: {\r\n        left: \"20px\",\r\n        right: \"70px\",\r\n        top: \"50px\",\r\n        bottom: \"10px\",\r\n        containLabel: true,\r\n    },\r\n    xAxis: {\r\n        type: \"category\",\r\n        data: xAxisData,\r\n        name: \"病害类型\",\r\n        nameTextStyle: {\r\n            color: \"#4F81F1\",\r\n            verticalAlign: \"top\",\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: \"#4F81F1\",\r\n            },\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: true,\r\n            lineStyle: {\r\n                color: \"#4F81F1\",\r\n            },\r\n        },\r\n        axisLabel: {\r\n            color: \"#4F81F1\",\r\n        },\r\n    },\r\n    yAxis: {\r\n        minInterval: 1,\r\n        type: \"value\",\r\n        name: \"条\",\r\n        // nameRotate: 90,\r\n        // nameLocation: \"center\",\r\n        // nameGap: 40,\r\n        nameTextStyle: {\r\n            color: \"#999\",\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: \"#4F81F1\",\r\n            },\r\n        },\r\n        axisTick: {\r\n            alignWithLabel: true,\r\n            lineStyle: {\r\n                color: \"#4F81F1\",\r\n            },\r\n        },\r\n        axisLabel: {\r\n            color: \"#4F81F1\",\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: \"#4F81F1\",\r\n                type: \"dotted\",\r\n            },\r\n        },\r\n    },\r\n    series: seriesData\r\n}","html":"","externalScripts":"","updaterUID":"obd-oN6D3qfp-72Q3GmepBJ4XZpEj5XIyCI","theme":"","layout":"","viewCount":62,"userName":"b***n","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xu0yyqohIB.png?v=1598430539900","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"b***n"}}