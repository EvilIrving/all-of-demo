{"status":0,"data":{"cid":"xh13k-kxYn","authorUid":"obd-ojCPWemI9fzl7pUV6i6Tidz1baT8fD6","authorUserName":"h***0","title":"多彩堆叠环形图","description":"多彩堆叠环形图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-12T07:13:04.000Z","lastUpdateTime":"2021-10-12T07:13:04.000Z","auth":2,"uid":"obd-ojCPWemI9fzl7pUV6i6Tidz1baT8fD6","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-12T07:13:04.000Z","code":"var data = [\n    { name: '计算机科学与技术', value: 5394 },\n    { name: '物联网工程', value: 4584 },\n    { name: '土木工程', value: 3231 },\n];\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\n// 计算数据\nvar nameValues = data.map((item) => item.name);\nvar valValues = data.map((item) => item.value);\nvar sumValue = valValues.reduce(function (total, currentVal) {\n    return total + currentVal;\n});\nvar objData = array2obj(data, 'name');\nconsole.log(sumValue)\n\n// 声明所需变量\nvar series = [];\nvar calcRateObjs = [];\n\nfor (let i = 0; i < data.length; i++) {\n    series.push({\n        name: '',\n        type: 'pie',\n        clockWise: false, //顺时加载\n        hoverAnimation: false, //鼠标移入变大\n        radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\n        center: ['50%', '50%'],\n        label: {\n            show: false,\n        },\n        data: [\n            {\n                value: data[i].value,\n                name: data[i].name,\n            },\n            {\n                value: sumValue - data[i].value,\n                name: '',\n                itemStyle: {\n                    color: 'rgba(0,0,0,0)',\n                    borderWidth: 0,\n                },\n                tooltip: {\n                    show: false,\n                },\n                hoverAnimation: false,\n            },\n        ],\n    });\n    calcRateObjs.push({ name: data[i].name, value: ((data[i].value / sumValue) * 100).toFixed(2) + '%' });\n}\noption = {\n    backgroundColor: 'rgb(43, 51, 59)',\n    title: { \n        show: true,\n        text: \"专业人数统计\",\n    },\n    legend: {\n        show: true,\n        icon: 'circle',\n        top: '13.5%',\n        bottom: '53%',\n        left: '28.5%',\n        data: nameValues,\n        width: 40,\n        padding: [0, 220],\n        itemGap: 46,\n        formatter: function (name) {\n            var calcRate = calcRateObjs.find(function (item) {\n                if (name === item.name) {\n                    return item;\n                }\n            });\n            return '{title|' + name + '}: {value|' + objData[name].value + '} {value|(' + calcRate.value + ')}';\n        },\n        textStyle: {\n            rich: {\n                title: {\n                    fontSize: 14,\n                    lineHeight: 40,\n                    color: 'rgb(0, 178, 246)',\n                },\n                value: {\n                    fontSize: 18,\n                    lineHeight: 20,\n                    color: 'rgb(207, 220, 40)',\n                },\n            },\n        },\n    },\n    tooltip: {\n        show: true,\n        trigger: 'item',\n        formatter: '{a}<br>{b}:{c}({d}%)',\n    },\n    color: ['rgb(9,187,247)', 'rgb(184,254,165)', 'rgb(253,218,23)', 'rgb(252,152,12)'],\n    xAxis: [\n        {\n            show: false,\n        },\n    ],\n    series: series,\n};\n","html":"","externalScripts":"","updaterUID":"obd-ojCPWemI9fzl7pUV6i6Tidz1baT8fD6","theme":"","layout":"","viewCount":0,"userName":"h***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xh13k-kxYn.png?v=1634022784884","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":["circular"],"updaterUserName":"h***0"}}