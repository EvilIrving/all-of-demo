{"status":0,"data":{"cid":"xOjQgfgbu","authorUid":"bd-138257330","authorUserName":"o***5","title":"世界地图","description":"世界地图","latestVersion":4,"alwaysLatest":1,"createTime":"2019-10-21T07:15:03.000Z","lastUpdateTime":"2019-10-21T07:15:03.000Z","auth":2,"uid":"bd-138257330","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-07T09:45:30.000Z","code":"//var uploadedDataURL = \"/asset/get/s/data-1573092836804-WsdgkOYn.json\";\r\n\r\n//var uploadedDataURL = \"/asset/get/s/data-1571641181954-dOtXSMs6.json\";\r\n\r\nvar uploadedDataURL = \"/asset/get/s/data-1571640544601-AJmdXNje.json\";\r\n\r\nmyChart.showLoading();\r\n$.get(uploadedDataURL, function(world) {\r\n\r\n    myChart.hideLoading();\r\n    echarts.registerMap('world', world);\r\n\r\n    var geoCoordMap = {\r\n        '巴音郭楞蒙古': [88.1653, 39.6002]\r\n    };\r\n\r\n    var data = [{\r\n        name: '巴音郭楞蒙古',\r\n        value: 150,\r\n    }];\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value),\r\n                });\r\n            }\r\n        }\r\n        // 有数据的地区的名称和value值\r\n        return res;\r\n    };\r\n\r\n\r\n    option = {\r\n        backgroundColor: \"transparent\",\r\n        geo: {\r\n            id: \"bb\",\r\n            show: true,\r\n            map: \"world\",\r\n            roam: false,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: ' #092240',\r\n                    borderColor: ' #092240',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#4499d0',\r\n                }\r\n            },\r\n            bottom: 0,\r\n          aspectScale: 0.6,\r\n          zoom: 1.2\r\n\r\n        },\r\n        series: [{\r\n            type: 'map',\r\n            map: 'world',\r\n            geoIndex: 0,\r\n            roam: true,\r\n            data: data\r\n        }, {\r\n            name: '定位点',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#ffed00'\r\n                }\r\n            }\r\n        }]\r\n    }\r\n\r\n    //myChart.setOption(option);\r\n\r\n    //debugger\r\n\r\n    if (option && typeof option === \"object\") {\r\n        myChart.setOption(option, true);\r\n    }\r\n    /*pie*/\r\n    var op = myChart.getOption();\r\n    var sd = option.series;\r\n    \r\n    sd.push({\r\n        name: \"123\",\r\n        type: 'pie',\r\n        tooltip: {\r\n            formatter: function(params) {\r\n                return params.seriesName + \"<br/>\" + params.name + \" : \" + params.value;\r\n            }\r\n        },\r\n        radius: [30,25],\r\n        center: myChart.convertToPixel('geo', [88.1653, 39.6002]),\r\n        data: [{\r\n            name: \"1\",\r\n            value: 1\r\n        },{\r\n            name: \"2\",\r\n            value: 2\r\n        },{\r\n            name: \"3\",\r\n            value: 3\r\n        }],\r\n        zlevel: 4,\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n            },\r\n        },\r\n        labelLine: {\r\n            normal: {\r\n                show: false\r\n            }\r\n        },\r\n        itemStyle: {\r\n            color:[\"red\",\"green\",\"\"],\r\n            mormal: {\r\n                opacity: 0.2\r\n            }\r\n        }\r\n    })\r\n    /*bar*/\r\n    // addBar(myChart,data);\r\n    console.log(\"===========option=================\");\r\n    console.log(option);\r\n    myChart.setOption(option, true);\r\n    myChart.setOption(option);\r\n})\r\n","html":"","externalScripts":"","updaterUID":"bd-138257330","theme":"","layout":"","viewCount":726,"userName":"o***5","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOjQgfgbu.png?v=1573119930680","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-pie"],"customTags":[],"updaterUserName":"o***5"}}