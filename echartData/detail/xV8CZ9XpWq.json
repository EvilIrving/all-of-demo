{"status":0,"data":{"cid":"xV8CZ9XpWq","authorUid":"obd-oEcwxKRb9MXzlqffQE5Qh0LLHdW7b4g","authorUserName":"o***y","title":"横向3d柱状图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-31T08:38:51.000Z","lastUpdateTime":"2021-05-31T08:38:51.000Z","auth":2,"uid":"obd-oEcwxKRb9MXzlqffQE5Qh0LLHdW7b4g","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-31T08:38:51.000Z","code":"var captions = ['1111', '22222', '33333', '444444']\nvar values = [123,456,789,159]\n\nconsole.log(captions)\nconsole.log(values);\nvar maxLength = 0,leftYWidth=0;\nfor(var i =0;i < captions.length;i ++){\n    let width = getWidth(captions[i]);\n    if(width > leftYWidth){\n    \tmaxLength = captions[i].length;\n        leftYWidth = width;\n    }\n}\nmaxLength = 0,rightYWidth = 0;\nfor(var i =0;i < values.length;i ++){\n    let width = getWidth(values[i]);\n    if(width > rightYWidth){\n    \tmaxLength = values[i].length;\n        rightYWidth = width;\n    }\n}\n\nfunction getWidth(text){\n\tvar lsdom = document.createElement(\"span\");\n    lsdom.className = \"lsdom\";\n    lsdom.innerHTML = text;\n    document.documentElement.append(lsdom);\n    var width = lsdom.offsetWidth;\n    document.documentElement.removeChild(lsdom);\n    return width;\n}\nvar dis = 60;\nvar option = {\n    backgroundColor: '#FFFFFF',\n    \"color\": [\"#63caff\", \"#3608FE\"],\n    \"grid\": {\n        // \"containLabel\": true,\n        \"left\": leftYWidth + dis + 10,\n        \"right\": rightYWidth + dis + 10,\n        \"bottom\": 39 * (5 - values.length),\n        \"top\": 40\n    },\n    \"xAxis\": {\n        \"show\": false\n    },\n    \"yAxis\": [\n    \t{\n            \"type\": \"category\",\n            \"data\": captions,\n            name: \"名称\",\n            nameGap: 10,\n            nameTextStyle: {\n                color: \"#666\",\n                align: \"left\",\n                padding: [0, 0, 0, -leftYWidth * 2]\n            },\n            \"axisLabel\": {\n                show: true,\n              \talign: 'left',\n                margin: leftYWidth + dis,\n                formatter: function (value, index) {\n                    let tag = values.length - index;\n                    if(tag == 1){\n                        return '{firstTag|' + tag + '}  '\n                            + '{name|' + value + '}';\n                    } else {\n                        return '{tag|' + tag + '}  '\n                            + '{name|' + value + '}';\n                    }\n                },\n                rich: {\n                    firstTag: {\n                        color: '#fff',\n                        backgroundColor: \"#ff6711\",\n                        width: 24,\n                        align: \"center\",\n                        height: 24,\n                        lineHeight: 24,\n                        borderRadius: 12,\n                        fontSize: 14\n                    },\n                    tag: {\n                        color: '#333',\n                        backgroundColor: \"#cbcedd\",\n                        width: 24,\n                        align: \"center\",\n                        height: 24,\n                        lineHeight: 24,\n                        borderRadius: 12,\n                        fontSize: 14\n                    },\n                    name: {\n                        color: '#333'\n                    }\n                }\n            },\n            \"show\": true,\n            \"splitLine\": {\n                \"show\": false,\n                \"lineStyle\": {\n                    \"color\": \"#eff0f5\",\n                    \"type\": \"solid\"\n                }\n            },\n            \"axisLine\": {\n                \"lineStyle\": {\n                    \"color\": \"#eff0f5\",\n                    \"width\": 1,\n                    \"type\": \"solid\"\n                },\n                \"show\": false\n            },\n        },{\n            \"data\": values,\n            name: \"价值\",\n            nameGap: 10,\n            nameTextStyle: {\n                color: \"#666\",\n                align: \"left\",\n                padding: [0, 0, 0, 0]\n            },\n            \"axisLine\":{\n                show: false\n            },\n            axisTick: {\n              show: false\n            },\n            \"axisLabel\": {\n                show: true,\n              \talign: 'left',\n                margin: 0,\n                formatter: function (value, index) {\n                    let tag = values.length - index;\n                    if(tag == 1){\n                        return '{firstName|' + value + '}';\n                    } else {\n                        return '{name|' + value + '}';\n                    }\n                },\n                rich: {\n                    firstName: {\n                        color: '#ff6711',\n                        fontSize: 14\n                    },\n                    name: {\n                        color: '#333',\n                        fontSize: 14\n                    }\n                }\n            },\n        }\n    ],\n    \"series\": [\n        {\n        type: 'bar',\n        barWidth: 5,\n        itemStyle: {\n            normal: {\n                color: function(params){\n                    var color = new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\n                        offset: 0,\n                        color: \"#17b4d5\" // 0% 处的颜色\n                    }, {\n                        offset: 1,\n                        color: \"#6d44f8\" // 100% 处的颜色\n                    }], false)\n                    if(params.dataIndex == values.length-1){\n                        color = new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\n                            offset: 0,\n                            color: \"#fee157\" // 0% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: \"#fa9c5f\" // 100% 处的颜色\n                        }], false)\n                    }\n                    return color\n                },\n            }\n        },\n        barGap: 0,\n        data: values\n    },{\n        //name: 'a',\n        tooltip: {\n            show: true\n        },\n        type: 'bar',\n        barWidth: 10,\n        itemStyle: {\n            normal: {\n                color: function(params){\n                    var color = new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\n                        offset: 0,\n                        color: \"#009ab2\" // 0% 处的颜色\n                    }, {\n                        offset: 1,\n                        color: \"#6124ec\" // 100% 处的颜色\n                    }], false)\n                    if(params.dataIndex == values.length-1){\n                        color = new echarts.graphic.LinearGradient(1, 0, 0, 0, [{\n                            offset: 0,\n                            color: \"#ffd300\" // 0% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: \"#ff680f\" // 100% 处的颜色\n                        }], false)\n                    }\n                    return color\n                },\n            }\n        },\n        data: values,\n        barGap: 0\n    },  {\n        //name: 'b',\n        tooltip: {\n            show: true\n        },\n        type: 'pictorialBar',\n        itemStyle: {\n            borderWidth: 1,\n            borderColor: function(params){\n                    var color = '#99e5f5'\n                    if(params.dataIndex == values.length-1){\n                        color = '#ffe97c'\n                    }\n                    return color\n                },\n            color: function(params){\n                    var color = '#99e5f5'\n                    if(params.dataIndex == values.length-1){\n                        color = '#ffe97c'\n                    }\n                    return color\n                },\n        },\n        symbol: 'path://M 0,0 l -30,30 l 0,-60 l 30 -30   z',\n        symbolSize: ['4','15'],\n        symbolOffset: ['0', '0'],\n        symbolRotate: 0,\n        symbolPosition: 'end',\n        data: values,\n        z: 4\n    }, {\n        //name: 'c',\n        tooltip: {\n            show: true\n        },\n        type: 'pictorialBar',\n        itemStyle: {\n        \tborderWidth: 1,\n            borderColor: '#fff',\n            color: '#fff'\n        },\n        symbol: 'path://M 0,0 l -30,30 l 0,-60 l 30 -30   z',\n        symbolSize: ['4','12'],\n        symbolOffset: ['1', '8'],\n        symbolRotate: 0,\n        symbolPosition: 'end',\n        data: values,\n        z: 3\n    }],\n    \"tooltip\": {\n        \"show\": true\n    }\n};\nreturn option;","html":"","externalScripts":"","updaterUID":"obd-oEcwxKRb9MXzlqffQE5Qh0LLHdW7b4g","theme":"","layout":"","viewCount":0,"userName":"o***y","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xV8CZ9XpWq.png?v=1622450332097","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"o***y"}}