{"status":0,"data":{"cid":"xCcjUAf2wB","authorUid":"bd-3342206826","authorUserName":"小***琪","title":"柱形图hover","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-03-24T08:33:35.000Z","lastUpdateTime":"2020-08-19T04:37:55.000Z","auth":2,"uid":"bd-3342206826","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-03-24T08:33:35.000Z","code":"var data = [{\n    \"name\": \"一月\",\n    \"value\": 800\n}, {\n    \"name\": \"二月\",\n    \"value\": 1200\n}, {\n    \"name\": \"三月\",\n    \"value\": 1192\n}, {\n    \"name\": \"四月\",\n    \"value\": 758\n}, {\n    \"name\": \"五月\",\n    \"value\": 325\n}, {\n    \"name\": \"六月\",\n    \"value\": 888\n}, {\n    \"name\": \"七月\",\n    \"value\": 1111\n}];\n\nconst numToThreeRank = num => {\n    let reg = /(?=(\\B)(\\d{3})+$)/g;\n    return num.toString().replace(reg, \",\");\n};\n\n\nvar xData = [],\n    yData = [],\n    max = 0;\ndata.map(function(a, b) {\n    xData.push(a.name);\n    yData.push(a.value);\n    max = max > a.value ? max : a.value;\n});\n\nlet len = data.length || 0;\nlet bgData = Array(len).fill(Math.ceil(max * 1.2))\nlet emptyData = Array(len).fill(Math.ceil(max * 1.1))\n\noption = {\n    backgroundColor: \"#fff\",\n    color: ['#3398DB'],\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'line',\n            lineStyle: {\n                opacity: 0\n            }\n        },\n        formatter: function(param) {\n            let item = param.filter(v => {\n                return v.seriesName === 'value'\n            })\n            let html = `\n            <div style=\"position:relative;background: #FEF7F7;border: 1px solid #FEDADC;font-size: 14px;color: #FD5360;border-radius: 4px 4px 4px 0;padding: 4px 10px\">${numToThreeRank(item[0].value)}\n                <span style=\"position:absolute;bottom: -6px;left: -1px;width:0;height:0;border: 6px solid transparent; border-left: 6px solid #FEDADC;\"></span>\n                <span style=\"position:absolute;bottom: -4px;left: 0;width:0;height:0;border: 6px solid transparent; border-left: 6px solid #FEF7F7;\"></span>\n            </div>\n            `;\n            return html\n        },\n        position: function(point, params, dom, rect, size) {\n            // 固定在顶部\n            return [point[0], 10];\n        },\n        extraCssText: 'background: transparent'\n    },\n    grid: {\n        left: '0%',\n        right: '0%',\n        bottom: '5%',\n        top: 60,\n        height: '85%',\n        containLabel: true,\n        z: 22\n    },\n    xAxis: [{\n        type: 'category',\n        data: xData,\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n            show: true,\n            color: '#666',\n            fontSize: 14\n        }\n    }, {\n        type: 'category',\n        data: xData,\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        }\n    }],\n    yAxis: [{\n        type: 'value',\n        max: function(value) {\n            return value.max;\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        }\n    }],\n    series: [{\n            name: 'value',\n            type: 'bar',\n            barWidth: 10,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [30, 30, 0, 0],\n                    color: new echarts.graphic.LinearGradient(\n                        0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#3D9FFF'\n                            },\n                            {\n                                offset: 1,\n                                color: '#41D7F3'\n                            }\n                        ]\n                    )\n                }\n            },\n            data: yData,\n            zlevel: 12\n\n        },\n        {\n            name: 'empty',\n            type: 'bar',\n            barWidth: 10,\n            barGap: '-100%',\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [30, 30, 0, 0],\n                    color: 'rgba(225,225,225,0.6)'\n                }\n            },\n            emphasis: {\n                itemStyle: {\n                    color: 'rgba(225,225,225,0.6)',\n                    barBorderRadius: [30, 30, 0, 0]\n                }\n            },\n            data: emptyData,\n            zlevel: 11\n\n        },\n        {\n            name: 'background',\n            type: 'bar',\n            barWidth: 53,\n            xAxisIndex: 1,\n            barGap: '-100%',\n            data: bgData,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(216, 216, 216, 0.18)',\n                    borderWidth: 1,\n                    borderColor: 'rgba(151, 151, 151, 0.18)'\n                }\n            },\n            emphasis: {\n                itemStyle: {\n                    color: '#fff',\n                    shadowColor: 'rgba(225,225,225,0.9)',\n                    shadowBlur: 6,\n                }\n            },\n            zlevel: 10\n        },\n\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3342206826","theme":"default","layout":"","viewCount":37,"userName":"小***琪","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xCcjUAf2wB.png?v=1585038816070","isCustomThumbnail":1,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"小***琪"}}