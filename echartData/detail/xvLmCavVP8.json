{"status":0,"data":{"cid":"xvLmCavVP8","authorUid":"obd-oEcgBN48kgW4_6amvIoHzt62bDCll4M","authorUserName":"x***2","title":"自定义折线图-可绘制平行Y轴的直线","description":"自定义折线图-可绘制平行Y轴的直线","latestVersion":1,"alwaysLatest":1,"createTime":"2021-12-22T03:36:23.000Z","lastUpdateTime":"2021-12-22T03:36:23.000Z","auth":2,"uid":"obd-oEcgBN48kgW4_6amvIoHzt62bDCll4M","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-12-22T03:36:23.000Z","code":"var myRenderItem = function (params, api) {\n    var style = api.style({\n        fill: null,\n        lineWidth: 2,\n        stroke: api.visual('color')\n    });\n    var radius = 3;\n    var cur = api.coord([api.value(0), api.value(1)]);\n    var next = api.coord([api.value(2), api.value(3)]);\n    var curX = cur[0],\n        nextX = next[0],\n        curY = cur[1],\n        nextY = next[1];\n    if (curX === nextX) {\n        curY = curY < nextY ? curY + radius / 2 : curY - radius / 2;\n        nextY = curY < nextY ? nextY - radius / 2 : nextY + radius / 2;\n    } else {\n        curX = curX < nextX ? curX + radius / 2 : curX - radius / 2;\n        curX = curY < nextY ? curX - radius / 2 : curX + radius / 2;\n        curY = curY < nextY ? curY + radius / 2 : curY - radius / 2;\n        nextY = curY < nextY ? nextY - radius / 2 : nextY + radius / 2;\n    }\n    var start = [curX, curY],\n        end = [nextX, nextY];\n    return {\n        type: 'group',\n        children: [\n            {\n                type: 'polyline',\n                shape: {\n                    points: [start, end],\n                    smooth: 0.2,\n                    transition: 'shape',\n                },\n                style: style\n            },\n            {\n                type: 'ring',\n                shape: {\n                    cx: cur[0],\n                    cy: cur[1],\n                    r: radius,\n                    r0: 0\n                },\n                style: style\n            },\n        ],\n    };\n};\n\nvar option = {\n    backgroundColor: '#fff',\n    color: ['#0090FF', '#36CE9E', '#FFC005', '#FF515A', '#8B5CFF', '#00CA69'],\n    legend: { right: 10, top: 10, icon: 'line' },\n    tooltip: {\n        trigger: 'axis',\n        formatter: function (params) {\n            var html = '';\n            params.forEach(function (e) {\n                var no = e.value[6];\n                var timesHtml = '<p style=\"margin-left: 20px;\">' + e.value[4] + '：' + e.value[5] + '（版本：' + no + '）</p>';\n                html +=\n                    '<div style=\"color: #fff;font-size: 14px;line-height: 24px\">' +\n                    '       <span style=\"display:inline-block;margin-right:5px;border-radius:10px;' +\n                    '           width:10px;height:10px;background-color:' +\n                    e.color +\n                    ';\"></span>' +\n                    '       <span style=\"color:' +\n                    e.color +\n                    ';font-weight:700;font-size: 18px\">' +\n                    e.value[1] +\n                    '%</span>' +\n                    timesHtml +\n                    '   </div>';\n            });\n            return html;\n        },\n    },\n    grid: { top: 100, containLabel: true },\n    dataZoom: [\n        { type: 'inside', start: 0, end: 100 },\n        { start: 0, end: 100 },\n    ],\n    xAxis: [\n        {\n            type: 'category',\n            boundaryGap: false,\n            axisLabel: { textStyle: { color: '#333' } },\n            axisLine: { lineStyle: { color: '#D9D9D9' } },\n            data: ['2021-11', '2021-12', '2022-1']\n        },\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            name: '单位：%',\n            min: 0,\n            max: 100,\n            axisLabel: { textStyle: { color: '#666' } },\n            nameTextStyle: { color: '#666', fontSize: 12, lineHeight: 40 },\n            splitLine: { lineStyle: { type: 'dashed', color: '#E9E9E9' } },\n            axisLine: { lineStyle: { color: '#D9D9D9' } },\n            axisTick: { show: false }\n        },\n    ],\n    series: [\n        {\n            type: 'custom',\n            encode: { x: [0], y: [1, 3] },\n            data: [{ value: [0, 75, 1, 25, '起床时间', '2021-11-21 08:00:00', '1'] }, { value: [1, 25, 1, 50, '出门时间', '2021-12-23 08:00:00', '1'] }, { value: [1, 50, 2, 100, '上班时间', '2021-12-24 00:00:00', '1'] }, { value: [2, 100, 2, 100, '午饭时间', '2022-01-01 08:00:00', '1'] }],\n            name: '版本1',\n            renderItem: myRenderItem\n        },\n        {\n            type: 'custom',\n            encode: { x: [0], y: [1, 3] },\n            data: [\n                { value: [1, 20, 1, 40, '起床时间', '2021-12-23 08:00:00', '2'] },\n                { value: [1, 40, 1, 60, '出门时间', '2021-12-24 00:00:00', '2'] },\n                { value: [1, 60, 1, 80, '上班时间', '2021-12-29 08:00:00', '2'] },\n                { value: [1, 80, 2, 100, '午饭时间', '2021-12-31 08:00:00', '2'] },\n                { value: [2, 100, 2, 100, '下班时间', '2022-01-01 08:00:00', '2'] }\n            ],\n            name: '版本2',\n            renderItem: myRenderItem\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oEcgBN48kgW4_6amvIoHzt62bDCll4M","theme":"","layout":"","viewCount":0,"userName":"x***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvLmCavVP8.png?v=1640144184007","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-custom","tooltip"],"customTags":["line"],"updaterUserName":"x***2"}}