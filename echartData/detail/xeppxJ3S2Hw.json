{"status":0,"data":{"cid":"xeppxJ3S2Hw","authorUid":"obd-otrvAzOPcY6I5LulXDqBw8fT14hUe8q","authorUserName":"雅***7","title":"中国国航客运流量图","description":"Beijing, Shanghai, Guangzhou travel TOP10 Cities","latestVersion":9,"alwaysLatest":1,"createTime":"2020-12-16T13:26:19.000Z","lastUpdateTime":"2020-12-16T13:26:19.000Z","auth":2,"uid":"obd-otrvAzOPcY6I5LulXDqBw8fT14hUe8q","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-17T04:00:31.000Z","code":"var geoCoordMap = {\n    '上海': [121.4648,31.2891],\n    '乌鲁木齐': [87.9236,43.5883],\n    '兰州': [103.5901,36.3043],\n    '北京': [116.4551,40.2539],\n    '南京': [118.8062,31.9208],\n    '南宁': [108.479,23.1152],\n    '南昌': [116.0046,28.6633],\n    '南通': [121.1023,32.1625],\n    '厦门': [118.1689,24.6478],\n    '合肥': [117.29,32.0581],\n    '呼和浩特': [111.4124,40.4901],\n    '咸阳': [108.4131,34.8706],\n    '哈尔滨': [127.9688,45.368],\n    '大连': [122.2229,39.4409],\n    '天津': [117.4219,39.4189],\n    '太原': [112.3352,37.9413],\n    '威海': [121.9482,37.1393],\n    '宁波': [121.5967,29.6466],\n    '广州': [113.5107,23.2196],\n    '成都': [103.9526,30.7617],\n    '扬州': [119.4653,32.8162],\n    '拉萨': [91.1865,30.1465],\n    '昆明': [102.9199,25.4663],\n    '杭州': [119.5313,29.8773],\n    '株洲': [113.5327,27.0319],\n    '武汉': [114.3896,30.6628],\n    '汕头': [117.1692,23.3405],\n    '沈阳': [123.1238,42.1216],\n    '济南': [117.1582,36.8701],\n    '济宁': [116.8286,35.3375],\n    '海口': [110.3893,19.8516],\n    '淮安': [118.927,33.4039],\n    '深圳': [114.5435,22.5439],\n    '温州': [120.498,27.8119],\n    '烟台': [120.7397,37.5128],\n    '珠海': [113.7305,22.1155],\n    '石家庄': [114.4995,38.1006],\n    '福州': [119.4543,25.9222],\n    '秦皇岛': [119.2126,40.0232],\n    '绍兴': [120.564,29.7565],\n    '苏州': [120.6519,31.3989],\n    '西宁': [101.4038,36.8207],\n    '西安': [109.1162,34.2004],\n    '贵阳': [106.6992,26.7682],\n    '郑州': [113.4668,34.6234],\n    '重庆': [107.7539,30.1904],\n    '银川': [106.3586,38.1775],\n    '长春': [125.8154,44.2584],\n    '长沙': [113.0823,28.2568],\n    '青岛': [120.4651,36.3373],\n};\n\nvar BJData = [\n    [{name:'北京'}, {name:'深圳',value:71}],\n    [{name:'北京'}, {name:'重庆',value:64}],\n    [{name:'北京'}, {name:'广州',value:58}],\n    [{name:'北京'}, {name:'长沙',value:29}],\n    [{name:'北京'}, {name:'海口',value:28}],\n    [{name:'北京'}, {name:'南京',value:25}],\n    [{name:'北京'}, {name:'武汉',value:23}],\n    [{name:'北京'}, {name:'南昌',value:23}],\n    [{name:'北京'}, {name:'烟台',value:21}],\n    [{name:'北京'}, {name:'温州',value:17}],\n    [{name:'北京'}, {name:'沈阳',value:14}],\n    [{name:'北京'}, {name:'西宁',value:13}],\n    [{name:'北京'}, {name:'合肥',value:9}],\n    [{name:'北京'}, {name:'呼和浩特',value:9}],\n    [{name:'北京'}, {name:'南通',value:8}],\n    [{name:'北京'}, {name:'乌鲁木齐',value:1}],\n    [{name:'北京'}, {name:'兰州',value:15}]\n    \n];\n\nvar SHData = [\n    [{name:'上海'},{name:'深圳',value:136}],\n    [{name:'上海'},{name:'北京',value:132}],\n    [{name:'上海'},{name:'广州',value:117}],\n    [{name:'上海'},{name:'厦门',value:65}],\n    [{name:'上海'},{name:'哈尔滨',value:61}],\n    [{name:'上海'},{name:'成都',value:59}],\n    [{name:'上海'},{name:'大连',value:55}],\n    [{name:'上海'},{name:'重庆',value:53}],\n    [{name:'上海'},{name:'西安',value:49}],\n    [{name:'上海'},{name:'沈阳',value:49}],\n    [{name:'上海'},{name:'青岛',value:48}],\n    [{name:'上海'},{name:'长春',value:47}],\n    [{name:'上海'},{name:'长沙',value:32}],\n    [{name:'上海'},{name:'天津',value:30}],\n    [{name:'上海'},{name:'昆明',value:30}],\n    [{name:'上海'},{name:'武汉',value:27}],\n    [{name:'上海'},{name:'太原',value:24}],\n    [{name:'上海'}, {name:'乌鲁木齐',value:4}],\n    [{name:'上海'}, {name:'兰州',value:14}]\n];\n\n\nvar GZData = [\n    [{name:'广州'},{name:'上海',value:153}],\n    [{name:'广州'},{name:'北京',value:138}],\n    [{name:'广州'},{name:'杭州',value:104}],\n    [{name:'广州'},{name:'成都',value:89}],\n    [{name:'广州'},{name:'重庆',value:84}],\n    [{name:'广州'},{name:'南京',value:75}],\n    [{name:'广州'},{name:'昆明',value:62}],\n    [{name:'广州'},{name:'西安',value:62}],\n    [{name:'广州'},{name:'海口',value:58}],\n    [{name:'广州'},{name:'郑州',value:51}],\n    [{name:'广州'},{name:'武汉',value:49}],\n    [{name:'广州'},{name:'天津',value:39}],\n    [{name:'广州'},{name:'青岛',value:36}],\n    [{name:'广州'},{name:'济南',value:35}],\n    [{name:'广州'},{name:'宁波',value:34}],\n    [{name:'广州'}, {name:'乌鲁木齐',value:23}],\n    [{name:'广州'}, {name:'兰州',value:25}]\n];\n\n\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\nvar convertData = function (data) {\n    console.log(data);\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (fromCoord && toCoord) {\n            res.push({\n                fromName: dataItem[0].name,\n                toName: dataItem[1].name,\n                coords: [fromCoord, toCoord],\n                value: dataItem[1].value\n            });\n        }\n    }\n    return res;\n};\n\nvar color = ['#a6c84c', '#ffa022', '#46bee9'];\nvar series = [];\n[['北京', BJData], ['上海', SHData], ['广州', GZData]].forEach(function (item, i) {\n    //console.log(item,i);\n    series.push({\n        name: item[0] + ' Top15',\n        type: 'lines',\n        zlevel: 1,\n        effect: {\n            show: true,\n            period: 6,\n            trailLength: 0.7,\n            color: 'red',\n            symbolSize: 3\n        },\n        lineStyle: {\n            normal: {\n                color: color[i],\n                width: 0,\n                curveness: 0.2\n            }\n        },\n        data: convertData(item[1])\n    },\n    {\n        name: item[0] + ' Top18',\n        type: 'lines',\n        zlevel: 2,\n        symbol: ['none', 'arrow'],\n        symbolSize: 10,\n        effect: {\n            show: true,\n            period: 6,\n            trailLength: 0,\n            symbol: planePath,\n            symbolSize: 15\n        },\n        lineStyle: {\n            normal: {\n                color: color[i],\n                width: 1,\n                opacity: 0.6,\n                curveness: 0.2\n            }\n        },\n        data: convertData(item[1])\n    },\n    {\n        name: item[0] + ' Top17',\n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        zlevel: 2,\n        rippleEffect: {\n            brushType: 'stroke'\n        },\n        label: {\n            normal: {\n                show: true,\n                position: 'right',\n                formatter: '{b}'\n            }\n        },\n        symbolSize: function (val) {\n            return val[2] / 8;\n        },\n        itemStyle: {\n            normal: {\n                color: color[i]\n            }\n        },\n        data: item[1].map(function (dataItem) {\n            return {\n                name: dataItem[1].name,\n                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n            };\n        })\n    });\n});\nconsole.log(series)\n\noption = {\n    backgroundColor: '#ADD8E6',\n    title : {\n        text: '中国国航北上广三城未来30天内直飞航班航空流量图',\n        left: 'center',\n        textStyle : {\n            color: '#fff',\n            fontSize: 20\n        }\n    },\n    tooltip : {\n        trigger: 'item',\n        formatter:function(params, ticket, callback){\n            console.log(params);\n            if(params.seriesType==\"effectScatter\") {\n                return \"线路：\"+params.data.name+\"\"+params.data.value[2];\n            }else if(params.seriesType==\"lines\"){\n                return params.data.fromName+\">\"+params.data.toName+\"<br />\"+params.data.value;\n            }else{\n                return params.name;\n            }\n        }\n    },\n    legend: {\n        orient: 'vertical',\n        top: 'bottom',\n        left: 'right',\n        data:['北京 Top15', '上海 Top18', '广州 Top17'],\n        textStyle: {\n            color: '#000000',\n            fontSize:19\n        },\n        selectedMode: 'multiple',\n    },\n    geo: {\n        map: 'china',\n        label: {\n            emphasis: {\n                show: true,\n                color:'blue'\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#444444',\n                borderColor: '#404a59'\n            },\n            emphasis: {\n                areaColor: 'blue'\n            }\n        }\n    },\n    series: series\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js,/dep/echarts/map/js/world.js","updaterUID":"obd-otrvAzOPcY6I5LulXDqBw8fT14hUe8q","theme":"","layout":"","viewCount":230,"userName":"雅***7","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xeppxJ3S2Hw.png?v=1608177631290","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"雅***7"}}