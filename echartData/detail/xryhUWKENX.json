{"status":0,"data":{"cid":"xryhUWKENX","authorUid":"bd-167860219","authorUserName":"n***1","title":"18同济交通夏令营录取情况","description":"多个图表联动","latestVersion":4,"alwaysLatest":1,"createTime":"2018-07-24T10:37:07.000Z","lastUpdateTime":"2018-07-24T10:37:07.000Z","auth":2,"uid":"bd-167860219","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-08T15:47:13.000Z","code":"//关于这个图表我做的视频简介：https://www.bilibili.com/video/BV1pD4y127tW\n//各位观众老爷们一键三连，下次一定！\n\nvar fx = ['01、03',\n    '02',\n    '04',\n    '05',\n    '06',\n    '07',\n    '08'\n]\n\nvar fxdata = []\nfor (var i = 0; i < fx.length; i++) {\n    fxdata.push({\n        name: fx[i],\n        max: 20\n    })\n}\n\nvar data = {'同济大学': [[26, 17, 7, 0, 17, 7, 2],\n  [10, 8, 1, 2, 12, 7, 0],\n  [[252.0,\n    245.0,\n    251.0,\n    262.0,\n    249.0,\n    253.0,\n    255.0,\n    228.0,\n    229.0,\n    246.0,\n    253.0,\n    225.0,\n    237.0,\n    243.0,\n    234.0,\n    231.0,\n    235.0,\n    223.0,\n    230.0,\n    233.0,\n    228.0,\n    243.0,\n    229.0,\n    237.0,\n    223.0,\n    226.0],\n   [249.8,\n    257.5,\n    252.5,\n    256.5,\n    243.3,\n    241.8,\n    251.8,\n    249.8,\n    248.0,\n    253.2,\n    249.3,\n    255.0,\n    247.2,\n    251.3,\n    249.5,\n    240.2,\n    248.2],\n   [304.0, 286.0, 291.0, 295.0, 281.0, 271.0, 277.0],\n   [],\n   [293.5,\n    256.8,\n    267.5,\n    294.5,\n    277.6,\n    273.5,\n    296.0,\n    264.7,\n    276.6,\n    267.5,\n    264.2,\n    262.2,\n    268.9,\n    266.7,\n    290.0,\n    298.0,\n    256.0],\n   [265.0, 292.0, 271.0, 265.0, 284.0, 261.0, 274.0],\n   [263.3, 285.5]]],\n '中南大学': [[3, 4, 3, 0, 1, 1, 0],\n  [1, 6, 2, 0, 7, 3, 0],\n  [[233.0, 236.0, 225.0],\n   [244.7, 240.8, 245.5, 255.0],\n   [279.0, 287.0, 274.0],\n   [],\n   [260.0],\n   [265.0],\n   []]],\n '郑州大学': [[3, 1, 1, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[231.0, 240.0, 242.0], [242.5], [285.0], [], [], [], []]],\n '哈尔滨工业大学': [[2, 0, 0, 0, 0, 0, 0],\n  [2, 0, 0, 0, 0, 0, 0],\n  [[253.0, 233.0], [], [], [], [], [], []]],\n '东南大学': [[0, 1, 0, 0, 2, 2, 0],\n  [1, 0, 2, 0, 2, 0, 0],\n  [[], [243.7], [], [], [283.2, 265.7], [272.0, 264.0], []]],\n '西南交通大学': [[2, 2, 2, 3, 6, 4, 1],\n  [0, 3, 3, 2, 6, 2, 2],\n  [[225.0, 238.0],\n   [240.2, 242.7],\n   [276.0, 269.0],\n   [244.0, 231.0, 253.0],\n   [303.0, 279.6, 258.0, 263.9, 271.2, 255.5],\n   [261.0, 279.0, 265.0, 269.0],\n   [263.1]]],\n '湖南大学': [[2, 0, 0, 0, 0, 0, 0],\n  [1, 0, 1, 0, 0, 0, 0],\n  [[226.0, 223.0], [], [], [], [], [], []]],\n '吉林大学': [[2, 0, 3, 0, 1, 0, 0],\n  [4, 0, 1, 0, 2, 1, 1],\n  [[236.0, 231.0], [], [278.0, 293.0, 268.0], [], [276.7], [], []]],\n '长安大学': [[6, 0, 0, 0, 2, 0, 0],\n  [5, 1, 0, 0, 3, 0, 0],\n  [[227.0, 245.0, 251.0, 230.0, 237.0, 247.0],\n   [],\n   [],\n   [],\n   [255.0, 256.0],\n   [],\n   []]],\n '西北工业大学': [[1, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[250.0], [], [], [], [], [], []]],\n '沈阳建筑大学': [[1, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[227.0], [], [], [], [], [], []]],\n '华中科技大学': [[1, 0, 0, 0, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[223.0], [], [], [], [300.0], [], []]],\n '重庆交通大学': [[0, 0, 0, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '山东大学': [[0, 1, 1, 0, 0, 0, 1],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [244.7], [276.0], [], [], [], [262.5]]],\n '宁波大学': [[0, 0, 0, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '大连理工大学': [[1, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[244.0], [], [], [], [], [], []]],\n '东北林业大学': [[0, 0, 0, 0, 1, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [258.0], [], []]],\n '石河子大学': [[0, 0, 0, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '中国矿业大学': [[1, 2, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[225.0], [252.8, 247.0], [], [], [], [], []]],\n '中国民航大学': [[0, 0, 0, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '内蒙古大学': [[1, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[227.0], [], [], [], [], [], []]],\n '中国地质大学（北京）': [[0, 0, 0, 0, 0, 0, 0],\n  [1, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '重庆大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 1, 0, 0, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '武汉理工大学': [[0, 0, 0, 0, 0, 1, 0],\n  [0, 1, 0, 0, 1, 0, 0],\n  [[], [], [], [], [], [265.0], []]],\n '北京交通大学': [[0, 1, 0, 1, 1, 1, 0],\n  [0, 0, 0, 0, 2, 1, 0],\n  [[], [245.2], [], [234.0], [263.6], [261.0], []]],\n '华南理工大学': [[0, 0, 2, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[], [], [273.0, 270.0], [], [], [], []]],\n '哈尔滨工业大学（威海）': [[0, 0, 1, 0, 2, 0, 0],\n  [0, 0, 0, 1, 2, 0, 0],\n  [[], [], [270.0], [], [263.4, 261.0], [], []]],\n '中山大学': [[0, 0, 1, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[], [], [287.0], [], [], [], []]],\n '中国农业大学': [[0, 0, 1, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[], [], [268.0], [], [], [], []]],\n '南京理工大学': [[0, 0, 1, 2, 0, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [268.0], [244.0, 246.0], [], [], []]],\n '苏州大学': [[0, 0, 0, 1, 1, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [243.0], [259.6], [], []]],\n '厦门大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '扬州大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '上海海事大学': [[0, 0, 0, 1, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 0],\n  [[], [], [], [230.0], [], [], []]],\n '北京林业大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '北京工业大学': [[0, 0, 0, 0, 1, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [], [], [292.0], [], []]],\n '南京工业大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 1, 0, 0, 0],\n  [[], [], [], [], [], [], []]],\n '新疆大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 1, 0, 0],\n  [[], [], [], [], [], [], []]],\n '大连海事大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 2, 0, 0],\n  [[], [], [], [], [], [], []]],\n '兰州交通大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 1, 0, 0],\n  [[], [], [], [], [], [], []]],\n '华东交通大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 1, 0],\n  [[], [], [], [], [], [], []]],\n '四川大学': [[0, 0, 0, 0, 0, 0, 0],\n  [0, 0, 0, 0, 0, 0, 1],\n  [[], [], [], [], [], [], []]]}\nvar nodedata = []\nvar university = '同济大学'\n\n    var alldata = []\n    for (var key in data) {\n        tempdata = data[key][2]\n    for (var i = 0; i < tempdata.length; i += 1){\n    for (var j = 0; j < tempdata[i].length; j += 1){\n        alldata.push([fx[i],tempdata[i][j]])\n    }\n}\n}\n\nfunction getscoredata(university,tempdata) {\n    var result = []\n    for (var i = 0; i < tempdata.length; i += 1){\n    for (var j = 0; j < tempdata[i].length; j += 1){\n        result.push([fx[i],tempdata[i][j]])\n    }\n}\nreturn result\n                }\n\nfor (var key in data) {\n    var totalnum = data[key][0].reduce(function(a, b) { return a + b; }, 0)+data[key][1].reduce(function(a, b) { return a + b; }, 0)\n    if (key == university) {\n        nodedata.push({\n                name: key,\n                symbolSize: Math.max(totalnum, 7),\n                value: data[key][2],\n                label:{color:'rgba(193,56,52,1)'},\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(193,56,52,1)'\n                    }\n                }\n\n            }\n\n        )\n    } else {\n        nodedata.push({\n                name: key,\n                symbolSize: Math.max(totalnum, 3),\n                value: data[key][2],\n                label:{color:'black'},\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(51,71,85,1)'\n                    }\n                }\n\n            }\n\n        )\n    }\n}\n\n\noption = {\n    title: {\n        text: '18同济交通夏令营录取情况',\n        subtext: '点击右边学校可交互',\n        x: 'center'\n    },\n    backgroundColor: '#eee',\n    legend: {\n        data: ['录取','不录取'],\n        align: 'left',\n        left: 10\n    },\n    toolbox: {\n        feature: {\n            magicType: {\n                type: ['stack', 'tiled']\n            },\n            dataView: {}\n        }\n    },\n    tooltip: {},\n    xAxis: [{\n        data: fx,\n        name: '方向',\n        silent: false,\n        axisLine: {\n            onZero: true\n        },\n        splitLine: {\n            show: false\n        },\n        splitArea: {\n            show: false\n        }\n    },{\n        gridIndex:1,\n        data: fx,\n        name: '方向',\n        silent: false,\n        axisLine: {\n            onZero: true\n        },\n        splitLine: {\n            show: false\n        },\n        splitArea: {\n            show: false\n        }\n    }\n    ],\n    yAxis: [{\n        max: 35,\n        name:'人数',\n        inverse: false,\n        splitArea: {\n            show: false\n        }\n    },{gridIndex:1,\n    name:'复试总分',\n        max: 300,\n        min:210,\n        inverse: false,\n        splitArea: {\n            show: false\n        }\n    }\n    ],\n    grid: [{\n        left: 50,\n        name: '人数',\n        top:'10%',\n        height: '40%',\n        width: '40%',\n\n    },{\n        left: 50,\n        name: '人数',\n        top:'60%',\n        height: '35%',\n        width: '40%',\n\n    }\n    ],\n    series: [{\n            name: '录取',\n            type: 'bar',\n            stack: 'one',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: data[university][0],            label: {\n                normal: {\n                    show: true,\n                    position: 'inside'\n                }\n            },\n        }, {\n            name: '不录取',\n            type: 'bar',\n            stack: 'one',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: data[university][1],            label: {\n                normal: {\n                    show: true,\n                    position: 'inside'\n                }\n            },\n        }, \n        \n        {\n\n            type: 'graph',\n            layout: 'force',\n            left:'40%',\n            right:'0%',\n            top:'10%',\n            bottom:'50%',\n            \n            focusNodeAdjacency: true,\n            roam: true,\n            data: nodedata,\n            label: {\n                normal: {\n                    position: 'top',\n                    show: true,\n                    textStyle: {\n                        color: 'rgba(18,89,147,1)',\n                        fontSize: 12\n                    },\n                }\n            },\n            force: {\n                repulsion: 70\n            },\n            links: [],\n            tooltip: {\n                formatter: function(d) {\n                    var temp = data[d.data.name]\n                    var totalnum = temp[0].reduce(function(a, b) { return a + b; }, 0)+temp[1].reduce(function(a, b) { return a + b; }, 0)\n\n                    return d.name + '参加人数:' + totalnum\n                }\n            }\n                       \n        },\n        \n        {\n        type: 'pie',\n        radius: [0, '30%'],\n        center: ['70%', '75%'],\n        data: [{name:'录取',\n                    value:data[university][0].reduce(function(a, b) { return a + b; }, 0)\n                },{name:'不录取',\n                   value:data[university][1].reduce(function(a, b) { return a + b; }, 0)\n                }\n                ],            label: {\n                normal: {\n                    formatter: '{hr|}\\n  {b|{b}：}{c}  {per|{d}%}  ',\n                    backgroundColor: '#eee',\n                    borderColor: '#aaa',\n                    borderWidth: 1,\n                    borderRadius: 4,\n                    // shadowBlur:3,\n                    // shadowOffsetX: 2,\n                    // shadowOffsetY: 2,\n                    // shadowColor: '#999',\n                    // padding: [0, 7],\n                    rich: {\n                        a: {\n                            color: '#999',\n                            lineHeight: 22,\n                            align: 'center'\n                        },\n                        // abg: {\n                        //     backgroundColor: '#333',\n                        //     width: '100%',\n                        //     align: 'right',\n                        //     height: 22,\n                        //     borderRadius: [4, 4, 0, 0]\n                        // },\n                        hr: {\n                            borderColor: '#aaa',\n                            width: '100%',\n                            borderWidth: 0.5,\n                            height: 0\n                        },\n                        b: {\n                            fontSize: 16,\n                            lineHeight: 33\n                        },\n                        per: {\n                            color: '#eee',\n                            backgroundColor: '#334455',\n                            padding: [2, 4],\n                            borderRadius: 2\n                        }\n                    }\n                }}\n    },\n        {\n            name: '初选全部',\n            type: 'scatter',\n            \n            symbolSize:8,\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: alldata,            \n            label: {\n                normal: {\n                    show: false,\n                    position: 'inside'\n                }\n            },\n        },\n{\n            name: '录取',\n            type: 'scatter',\n            symbol:'arrow',\n           symbolSize:7,\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            data: getscoredata(university,data[university][2]),            \n            label: {\n                normal: {\n                    show: false,\n                    position: 'inside'\n                }\n            },\n        }\n\n    ]\n};\n\nmyChart.on('click', function(p) {\n    console.log(p)\n    if (p.seriesType == 'graph') {\n        var university = p.name\n        var nodedata = []\n        var piedata = []\n        var scatterdata = []\n        for (var key in data) {\n            var totalnum = data[key][0].reduce(function(a, b) { return a + b; }, 0)+data[key][1].reduce(function(a, b) { return a + b; }, 0)\n\n            if (key == university) {\n                nodedata.push({\n                        name: key,\n                        symbolSize: Math.max(totalnum, 7),\n                        value: data[key][2],\n                        label:{color:'rgba(193,56,52,1)'},\n                itemStyle: {\n                    normal: {\n                        color: 'rgba(193,56,52,1)'\n                    }\n                }\n                    }\n                )\n                piedata=[{name:'录取',\n                    value:data[university][0].reduce(function(a, b) { return a + b; }, 0)\n                },{name:'不录取',\n                    value:data[university][1].reduce(function(a, b) { return a + b; }, 0)\n                }]\n                scatterdata = getscoredata(university,data[university][2])\n            } else {\n                nodedata.push({\n                        name: key,\n                        symbolSize: Math.max(totalnum, 3),\n                        value: data[key][2],\n                        label:{color:'black'},\n                        itemStyle: {\n                            normal: {\n                                color: 'rgba(51,71,85,1)'\n                            }\n                        }\n\n                    }\n\n                )\n            }\n        }\n        myChart.setOption({\n            title: {\n                subtext: university\n            },\n            series: [{\n                data: data[university][0]\n            }, {\n                data: data[university][1]\n            }, {\n                data: nodedata\n            },{data:piedata},{},{data:scatterdata}]\n        })\n    }\n})","html":"","externalScripts":"","updaterUID":"bd-167860219","theme":"","layout":"","viewCount":10688,"userName":"n***1","commentCount":0,"starCount":26,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryhUWKENX.png?v=1532428628191","isCustomThumbnail":1,"builtinTags":["category-work","grid","legend","series-bar","series-graph","series-pie","series-scatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"n***1"}}