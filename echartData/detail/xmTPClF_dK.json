{"status":0,"data":{"cid":"xmTPClF_dK","authorUid":"obd-o-HS0ZTEBpotGpv-NJsAwpsi1oLQiAQ","authorUserName":"s***1","title":"双柱对比图bar","description":"缺点是不能每条柱设置最大值。适合百分比","latestVersion":5,"alwaysLatest":1,"createTime":"2020-09-19T09:28:46.000Z","lastUpdateTime":"2021-10-11T05:59:28.000Z","auth":1,"uid":"obd-o-HS0ZTEBpotGpv-NJsAwpsi1oLQiAQ","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.9.0","versionCreateTime":"2021-10-11T05:59:28.000Z","code":"var data1 = [{\r\n        name: '司局级/一巡',\r\n        value: 4,\r\n        sum: 30,\r\n    },\r\n    {\r\n        name: '副司局级/二巡',\r\n        value: 9,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '正处级/一调',\r\n        value: 20,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '正处级/二调',\r\n        value: 32,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '副处级/三调',\r\n        value: 13,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '副处级/四调',\r\n        value: 43,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '一级主任科员',\r\n        value: 62,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '二级主任科员',\r\n        value: 4,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '见习',\r\n        value: 13,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '其他',\r\n        value: 70,\r\n        sum: 100\r\n    }\r\n];\r\n\r\nvar data2 = [{\r\n        name: '司局级/一巡',\r\n        value: 0,\r\n        sum: 30,\r\n    },\r\n    {\r\n        name: '副司局级/二巡',\r\n        value: 0,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '正处级/一调',\r\n        value: 1,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '正处级/二调',\r\n        value: 6,\r\n        sum: 20\r\n    },\r\n    {\r\n        name: '副处级/三调',\r\n        value: 5,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '副处级/四调',\r\n        value: 17,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '一级主任科员',\r\n        value: 16,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '二级主任科员',\r\n        value: 0,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '见习',\r\n        value: 0,\r\n        sum: 100\r\n    },\r\n    {\r\n        name: '其他',\r\n        value: 2,\r\n        sum: 100\r\n    }\r\n];\r\n// data = data.sort((a, b) => {\r\n//     return b.value - a.value\r\n// });\r\ngetArrByKey = (data, k) => {\r\n    let key = k || \"value\";\r\n    let res = [];\r\n    if (data) {\r\n        data.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n};\r\nopt = {\r\n    index: 0\r\n}\r\n// [起始最深颜色,结束的浅颜色]\r\n// colorLeft = ['#0CEBEA', '#368BFF'];\r\ncolorLeft = ['#1f83ff', '#1f83ff']\r\ncolorRight = ['rgba(255,144,128,1)', 'rgba(255,144,128,1)']\r\n\r\noption = {\r\n    backgroundColor:'#fff',\r\n    title: {\r\n                text: '空勤公务员职级分布(分工种）',\r\n                left:'center',\r\n                top:'14%',\r\n                textStyle:{\r\n                    color:'rgba(0,0,0,0.65)',\r\n                    fontSize:24,\r\n                }\r\n            },\r\n    legend : {\r\n                top : '20%',\r\n                right : '16%',\r\n                itemWidth : 70,\r\n                itemHeight : 22,\r\n                itemGap: 40,\r\n                orient: 'horizontal',\r\n                icon : 'circle',\r\n                textStyle : {\r\n                    color : '#000',\r\n                    fontSize : 16,\r\n                },\r\n                data: ['飞行员', '乘务员']\r\n            },\r\n    grid: [{\r\n        show: false,\r\n        left: '15%',\r\n        top: '20%',\r\n        bottom: '30%',\r\n        width: '28%',\r\n\r\n    }, {\r\n        show: false,\r\n        left: '50%',\r\n        top: '20%',\r\n        bottom: '30%',\r\n        width: '10%',\r\n\r\n    }, {\r\n        show: false,\r\n        right: '15%',\r\n        top: '20%',\r\n        bottom: '30%',\r\n        width: '28%',\r\n    }],\r\n    tooltip: {\r\n        show: true,\r\n        // 设置  是否百分比\r\n        formatter: '{b} : {c}'\r\n    },\r\n    xAxis: [{\r\n            type: 'value',\r\n            inverse: true,\r\n            axisLine: {\r\n                show: true\r\n            },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#000'\r\n                }    \r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            gridIndex: 1,\r\n            show: true,\r\n            type: 'value',\r\n            inverse: false,\r\n            axisLine: {\r\n                show: true\r\n            },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#000'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            gridIndex: 2,\r\n            show: true,\r\n            type: 'value',\r\n            inverse: false,\r\n            axisLine: {\r\n                show: true\r\n            },\r\n            axisTick: {\r\n                show: true\r\n            },\r\n            position: 'bottom',\r\n            axisLabel: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#000'\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        }\r\n    ],\r\n    yAxis: [{\r\n            gridIndex: 0,\r\n            triggerEvent: true,\r\n            show: true,\r\n            inverse: true,\r\n            data: getArrByKey(data1, 'name'),\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            gridIndex: 1,\r\n            type: 'category',\r\n            inverse: true,\r\n            position: 'left',\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: true,\r\n                interval: 0,\r\n                align: 'auto',\r\n                verticalAlign: 'middle',\r\n                textStyle: {\r\n                    color: '#000',\r\n                    fontSize: 16,\r\n                    align: 'center',\r\n\r\n                },\r\n\r\n            },\r\n            data: getArrByKey(data1, 'name'),\r\n        },\r\n        {\r\n            gridIndex: 2,\r\n            triggerEvent: true,\r\n            show: true,\r\n            inverse: true,\r\n            data: getArrByKey(data2, 'name'),\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            }\r\n        }\r\n    ],\r\n    series: [\r\n\r\n        {\r\n            name: '飞行员',\r\n            type: 'bar',\r\n            gridIndex: 0,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                barBorderRadius: 30,\r\n            },\r\n            xAxisIndex: 0,\r\n            yAxisIndex: 0,\r\n            data: data1,\r\n            barWidth: 20,\r\n            // barCategoryGap: '40%',\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    // 线性渐变，前四个参数分别是 x0, y0, x2, y2, 范围从 0 - 1，分别表示右,下,左,上。例如（0，0，0，1）表示从正上开始向下渐变；如果是（1，0，0，0），则是从正右开始向左渐变。\r\n                    // 相当于在图形包围盒中的百分比，如果4最后一个参数传 true，则该四个值是绝对的像素位置\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\r\n                        offset: 0,\r\n                        color: colorLeft[0] //指0%处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: colorLeft[1] //指100%处的颜色\r\n                    }], false),\r\n                    barBorderRadius: [5,0,0,5],\r\n\r\n                },\r\n            },\r\n\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'insideLeft',\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: '14'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            name: '乘务员',\r\n            type: 'bar',\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            gridIndex: 2,\r\n            showBackground: false,\r\n            backgroundStyle: {\r\n                barBorderRadius: 30,\r\n            },\r\n            data: data2,\r\n            barWidth: 20,\r\n            // barCategoryGap: '40%',\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    // 线性渐变，前四个参数分别是 x0, y0, x2, y2, 范围从 0 - 1，分别表示右,下,左,上。例如（0，0，0，1）表示从正上开始向下渐变；如果是（1，0，0，0），则是从正右开始向左渐变。\r\n                    // 相当于在图形包围盒中的百分比，如果最后一个参数传 true，则该四个值是绝对的像素位置\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\r\n                        offset: 0,\r\n                        color: colorRight[0] //指0%处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: colorRight[1] //指100%处的颜色\r\n                    }], false),\r\n                    barBorderRadius: [0,5,5,0],\r\n\r\n                },\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'insideRight',\r\n                    textStyle: {\r\n                        color: '#ffffff',\r\n                        fontSize: '14'\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2nLNjxDQnqdPZH4npnQ1Ej_03Cbn64","theme":"dark","layout":"","viewCount":2058,"userName":"s***1","commentCount":1,"starCount":19,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xmTPClF_dK.png?v=1633931968854","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"t***5"}}