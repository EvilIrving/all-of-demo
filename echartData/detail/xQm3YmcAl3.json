{"status":0,"data":{"cid":"xQm3YmcAl3","authorUid":"bd-1397440702","authorUserName":"泰***人","title":"人口\n占比","description":"饼状图统计","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-13T07:56:27.000Z","lastUpdateTime":"2021-10-13T07:56:27.000Z","auth":2,"uid":"bd-1397440702","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-13T07:56:27.000Z","code":"var data = [\r\n    { name: '户籍人口', value: 36889 },\r\n    { name: '流动人口', value: 2450 },\r\n];\r\nvar lineColor = \"#0042FF\"\r\nvar numArr = data.map((item) => item.value);\r\nvar maxNum = Math.max(...numArr);\r\nvar maxArr= [];\r\ndata.forEach((item) => {\r\n    maxArr.push(maxNum);\r\n});\r\nvar generateDotted = (color = lineColor) => {\r\n    var dataArr = [];\r\n    for (var i = 0; i < 100; i++) {\r\n        if (i % 2 === 0) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 25,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: color,\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        } else {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: 20,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderWidth: 0,\r\n                        borderColor: \"rgba(0,0,0,0)\"\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    return dataArr\r\n\r\n}\r\nconst color = [\r\n    new echarts.graphic.LinearGradient(0, 1, 0, 0, [\r\n        {\r\n            offset: 0,\r\n            color: '#50A459',\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#D3FD91',\r\n        },\r\n    ]),\r\n    new echarts.graphic.LinearGradient(0, 1, 0, 0, [\r\n        {\r\n            offset: 0,\r\n            color: '#0056FF',\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: '#01A1FF',\r\n        },\r\n    ]),\r\n];\r\noption={\r\n    backgroundColor: '#0A2E5D',\r\n        color: color,\r\n        title: {\r\n            text: \"人口\\n占比\",\r\n            left: 'center',\r\n            top: \"center\",\r\n            textStyle: {\r\n                fontWeight: 'bold',\r\n                color: '#F7DC8D',\r\n                fontSize: 18\r\n            },\r\n\r\n        },\r\n        grid: {\r\n            top: '15%',\r\n            left: 0,\r\n            right: '1%',\r\n            bottom: 5,\r\n            containLabel: true,\r\n        },\r\n        tooltip: {\r\n            show: true\r\n        },\r\n        series: [{\r\n            name: '周边人口占比',\r\n            type: 'pie',\r\n            center: ['50%', '50%'],\r\n            radius: ['45%', '65%'],\r\n\r\n            label: {\r\n\r\n                padding: [0, -80, 0, -80],\r\n                formatter: function (params) {\r\n                    let total = 0;\r\n                    data.forEach(item => {\r\n                        total += item.value;\r\n                    })\r\n                    let percen = ((Number(params.value) / total) * 100).toFixed(0) + \"%\";\r\n                    if (params.name !== '') {\r\n                        return '{name|' + params.name + '}' + '\\n\\n{value|' + percen + '}';\r\n                    } else {\r\n                        return '';\r\n                    }\r\n                },\r\n                align: 'left',\r\n                rich: {\r\n                    name: {\r\n                        fontSize: 14,\r\n                        color: '#fff',\r\n\r\n                    },\r\n                    value: {\r\n                        fontSize: 14,\r\n                        color: '#fff',\r\n\r\n                    }\r\n                },\r\n            },\r\n            labelLine: {\r\n                show: true,\r\n                length: 20,\r\n                length2: 100\r\n            },\r\n            data: data\r\n        },\r\n        {\r\n            name: \"內园1\",\r\n            type: 'pie',\r\n\r\n            silent: true,\r\n            radius: ['30%', '31%'],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n\r\n            },\r\n            itemStyle: {\r\n                color: lineColor,\r\n\r\n            },\r\n            data: maxArr\r\n        },\r\n        {\r\n            name: \"內园虚线\",\r\n            type: 'pie',\r\n\r\n            silent: true,\r\n            radius: ['35%', '36%'],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n\r\n            },\r\n            itemStyle: {\r\n                color: \"#0042FF\",\r\n\r\n            },\r\n            data: generateDotted()\r\n        },\r\n        {\r\n            name: \"外圆1\",\r\n            type: 'pie',\r\n            zlevel:-1,\r\n            silent: true,\r\n            radius: ['75%', '76%'],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n\r\n            },\r\n            itemStyle: {\r\n                color: lineColor,\r\n\r\n            },\r\n            data: maxArr\r\n        },\r\n        {\r\n            name: \"外圆虚线\",\r\n            type: 'pie',\r\n\r\n            silent: true,\r\n            radius: ['85%', '86%'],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n\r\n            },\r\n            itemStyle: {\r\n                color: lineColor,\r\n\r\n            },\r\n            data: generateDotted()\r\n        },\r\n        {\r\n            name: \"外圆虚线1\",\r\n            type: 'pie',\r\n\r\n            silent: true,\r\n            radius: ['95%', '96%'],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n\r\n            },\r\n            itemStyle: {\r\n                color: lineColor,\r\n\r\n            },\r\n            data: generateDotted('rgba(0,66,255,0.5)')\r\n        },\r\n        ],\r\n    }","html":"","externalScripts":"","updaterUID":"bd-1397440702","theme":"","layout":"","viewCount":0,"userName":"泰***人","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xQm3YmcAl3.png?v=1634111787840","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"泰***人"}}