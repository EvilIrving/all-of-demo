{"status":0,"data":{"cid":"xNEEVJZLyI","authorUid":"bd-101897118","authorUserName":"q***e","title":"桑基图","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-07-09T10:40:12.000Z","lastUpdateTime":"2019-07-09T10:40:12.000Z","auth":2,"uid":"bd-101897118","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-10T02:58:54.000Z","code":"var res = {\n  \"success\": true,\n  \"errMsg\": \"ok\",\n  \"data\": [\n\t\t{\"name\": \"深圳市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"广州市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"珠海市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"汕头市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"佛山市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"深圳市2\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"广州市2\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"珠海2市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"汕头市2\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"佛山市2\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"深圳市3\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 95},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"广州市3\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"珠海3市\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"汕头市3\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"佛山市3\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"深圳市4\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"广州市4\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"珠海市4\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"汕头市4\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"佛山市4\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"深圳市5\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 35}\n\t\t]},\n\t\t{\"name\": \"广州市5\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 35},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"珠海市5\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"汕头市5\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 45},\n\t\t\t{\"name\": \"O3\", \"rate\": 15},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]},\n\t\t{\"name\": \"佛山市5\",  \"plts\": [\n\t\t\t{\"name\": \"PM25\", \"rate\": 25},\n\t\t\t{\"name\": \"PM10\", \"rate\": 15},\n\t\t\t{\"name\": \"O3\", \"rate\": 35},\n\t\t\t{\"name\": \"CO\", \"rate\": 15},\n\t\t\t{\"name\": \"NO2\", \"rate\": 15},\n\t\t\t{\"name\": \"SO2\", \"rate\": 15}\n\t\t]}\n\t\t\n\t]\n};\nvar color = ['#78b4ff', '#f66bc7', '#2bcba7', '#ff8896', '#79c628', '#6c93ee', '#a9abff', '#f7a23f', '#27bae7', '#ff6d9d', '#cb79ff', '#f95b5a', '#ccaf27', '#38b99c', '#93d0ff', '#bd74e0', '#fd77da', '#dea700'];\n  \nvar citylist = [];\nvar data = [];\nres.data.forEach((v,i)=>{\n    citylist.push({name: v.name, itemStyle:{\n        color: '#78b4ff'\n    }});\n   v.plts.forEach((val,j)=>{\n       if(i === 0 ){\n            citylist.push({name: val.name, itemStyle:{\n        color: color[j]\n    }});\n       }\n       data.push({\n           target: v.name,\n           source: val.name,\n           value: val.rate,\n           lineStyle: {\n              color: color[j] \n           }\n       });\n   });\n});\n\n\nvar option = {\n    backgroundColor:'#000',\n    tooltip: {\n        trigger: 'item',\n        triggerOn: 'mousemove',\n        formatter: function(o){\n            if(o.dataType!== \"edge\"){\n                return '';\n            }\n            return o.data.source + ' - ' + o.data.target + \"：\" + o.data.value + '%'\n        }\n    },\n    series: [\n        {\n            type: 'sankey',\n            data: citylist,\n            links: data,\n            top:'10%',\n            right:'10%',\n            bottom:'5%',\n            nodeWidth: 80,\n            nodeGap: 0,\n            focusNodeAdjacency: 'allEdges',\n            itemStyle: {\n                normal: {\n                    borderWidth: 0,\n                    borderColor: '#fff',\n                    opacity:1\n                }\n            },\n            label:{\n                normal: {\n                  align: 'center',\n                  padding: [0, 0, 0, -90],\n                    fontSize:'14',\n                    color: '#fff'\n                }\n            },\n            lineStyle: {\n                normal: {\n                    curveness: 0.5,\n                    opacity:0.5\n                }\n            }\n        }\n    ]\n};\n","html":"","externalScripts":"","updaterUID":"bd-101897118","theme":"","layout":"","viewCount":6734,"userName":"q***e","commentCount":0,"starCount":39,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNEEVJZLyI.png?v=1562727535061","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey","tooltip"],"customTags":[],"updaterUserName":"q***e"}}