{"status":0,"data":{"cid":"xqcPrMqiKh","authorUid":"bd-2410434837","authorUserName":"不***名","title":"柱状图 MarkPoint 自动跳动","description":"MarkPoint 自动跳动，鼠标移动上去展示当前 mark ......","latestVersion":6,"alwaysLatest":1,"createTime":"2019-01-16T08:25:20.000Z","lastUpdateTime":"2019-01-16T08:25:20.000Z","auth":1,"uid":"bd-2410434837","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-17T09:07:08.000Z","code":"var mainData = {\r\n    \"dimensions\": [\r\n        \"TJYF\",\r\n        \"ZL01\",\r\n        \"BZ01\",\r\n        \"PM01\",\r\n        \"ZL02\",\r\n        \"BZ02\",\r\n        \"PM02\"\r\n    ],\r\n    \"source\": [{\r\n            \"ZL01\": 11,\r\n            \"ZL02\": 111,\r\n            \"PM01\": 6,\r\n            \"PM02\": 5,\r\n            \"BZ01\": 3.6,\r\n            \"BZ02\": 4.6,\r\n            \"TJYF\": \"1-2月\"\r\n        },\r\n        {\r\n            \"ZL01\": 22,\r\n            \"ZL02\": 222,\r\n            \"PM01\": 3,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 13.4,\r\n            \"BZ02\": 12.4,\r\n            \"TJYF\": \"1-3月\"\r\n        },\r\n        {\r\n            \"ZL01\": 33,\r\n            \"ZL02\": 333,\r\n            \"PM01\": 5,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 4.6,\r\n            \"BZ02\": 11.6,\r\n            \"TJYF\": \"1-4月\"\r\n        },\r\n        {\r\n            \"ZL01\": 44,\r\n            \"ZL02\": 444,\r\n            \"PM01\": 6,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 0.5,\r\n            \"BZ02\": 9.6,\r\n            \"TJYF\": \"1-5月\"\r\n        },\r\n        {\r\n            \"ZL01\": 55,\r\n            \"ZL02\": 555,\r\n            \"PM01\": 4,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 9.6,\r\n            \"BZ02\": 8.6,\r\n            \"TJYF\": \"1-6月\"\r\n        },\r\n        {\r\n            \"ZL01\": 66,\r\n            \"ZL02\": 666,\r\n            \"PM01\": 5,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 3.7,\r\n            \"BZ02\": 7.6,\r\n            \"TJYF\": \"1-7月\"\r\n        },\r\n        {\r\n            \"ZL01\": 77,\r\n            \"ZL02\": 777,\r\n            \"PM01\": 5,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 6.5,\r\n            \"BZ02\": 6.6,\r\n            \"TJYF\": \"1-8月\"\r\n        },\r\n        {\r\n            \"ZL01\": 88,\r\n            \"ZL02\": 888,\r\n            \"PM01\": 5,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 5.2,\r\n            \"BZ02\": 5.6,\r\n            \"TJYF\": \"1-9月\"\r\n        },\r\n        {\r\n            \"ZL01\": 99,\r\n            \"ZL02\": 999,\r\n            \"PM01\": 5,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 8.5,\r\n            \"BZ02\": 2.6,\r\n            \"TJYF\": \"1-10月\"\r\n        },\r\n        {\r\n            \"ZL01\": 100,\r\n            \"ZL02\": 1000,\r\n            \"PM01\": 4,\r\n            \"PM02\": 0,\r\n            \"BZ01\": 11,\r\n            \"BZ02\": 3.6,\r\n            \"TJYF\": \"1-11月\"\r\n        },\r\n        {\r\n            \"TJYF\": \"1-12月\"\r\n        }\r\n    ]\r\n}\r\n\r\nvar PMDATA2018 = [{\r\n        name: '1',\r\n        xAxis: 0,\r\n        yAxis: 11,\r\n        value: 6\r\n    },\r\n    {\r\n        name: '2',\r\n        xAxis: 1,\r\n        yAxis: 22,\r\n        value: 3\r\n    },\r\n    {\r\n        name: '3',\r\n        xAxis: 2,\r\n        yAxis: 33,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '4',\r\n        xAxis: 3,\r\n        yAxis: 44,\r\n        value: 6\r\n    },\r\n    {\r\n        name: '5',\r\n        xAxis: 4,\r\n        yAxis: 55,\r\n \r\n        value: 4\r\n    },\r\n    {\r\n        name: '6',\r\n        xAxis: 5,\r\n        yAxis: 66,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '7',\r\n        xAxis: 6,\r\n        yAxis: 77,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '8',\r\n        xAxis: 7,\r\n        yAxis: 88,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '9',\r\n        xAxis: 8,\r\n        yAxis: 99,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '10',\r\n        xAxis: 9,\r\n        yAxis: 100,\r\n        value: 4\r\n    }\r\n]\r\nvar PMDATA2019 = [{\r\n        name: '1',\r\n        xAxis: 0,\r\n        yAxis: 111,\r\n        value: 6\r\n    },\r\n    {\r\n        name: '2',\r\n        xAxis: 1,\r\n        yAxis: 222,\r\n        value: 3\r\n    },\r\n    {\r\n        name: '3',\r\n        xAxis: 2,\r\n        yAxis: 333,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '4',\r\n        xAxis: 3,\r\n        yAxis: 444,\r\n        value: 6\r\n    },\r\n    {\r\n        name: '5',\r\n        xAxis: 4,\r\n        yAxis: 555,\r\n \r\n        value: 4\r\n    },\r\n    {\r\n        name: '6',\r\n        xAxis: 5,\r\n        yAxis: 666,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '7',\r\n        xAxis: 6,\r\n        yAxis: 777,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '8',\r\n        xAxis: 7,\r\n        yAxis: 888,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '9',\r\n        xAxis: 8,\r\n        yAxis: 999,\r\n        value: 5\r\n    },\r\n    {\r\n        name: '10',\r\n        xAxis: 9,\r\n        yAxis: 1000,\r\n        value: 4\r\n    }\r\n]\r\nvar PM2018 = [] , PM2019 = [];\r\n\r\nlet option = {\r\n    color: ['#8A56B6', '#7777FF', '#00CCCC', '#41B0DF'],\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n        }\r\n\r\n    },\r\n    grid: {\r\n        left: '2%',\r\n        right: '5%',\r\n        bottom: '10%',\r\n        top: '12%',\r\n        containLabel: true\r\n    },\r\n    legend: {\r\n        show: true,\r\n        bottom: 0,\r\n        itemGap: 10,\r\n        textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 12\r\n        },\r\n        data: ['2018年总量', '2018年比增', '2019年总量', '2019年比增']\r\n    },\r\n    dataset: {\r\n        // 这里指定了维度名的顺序，从而可以利用默认的维度到坐标轴的映射。\r\n        // 如果不指定 dimensions，也可以通过指定 series.encode 完成映射，参见后文。\r\n        dimensions: mainData.dimensions,\r\n        source: mainData.source\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        boundaryGap: true,\r\n        axisLabel: {\r\n            interval: 0,\r\n            rotate: 40,\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#687A84'\r\n            }\r\n        }\r\n    }],\r\n    yAxis: [{\r\n            name: \"(万元)\",\r\n            min: 0,\r\n            type: 'value',\r\n            nameTextStyle: {\r\n                fontSize: 12,\r\n                padding: [0, 0, 0, -40]\r\n            },\r\n            splitLine: {\r\n                lineStyle: {\r\n                    color: 'rgba(47,60,106,0.6)'\r\n                }\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: '#687A84'\r\n                }\r\n            },\r\n            axisLabel: {\r\n                fontSize: 12\r\n            }\r\n        },\r\n        {\r\n            name: \"(%)\",\r\n\r\n            type: 'value',\r\n            nameTextStyle: {\r\n                fontSize: 12,\r\n                padding: [0, 0, 0, 40]\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: '#687A84'\r\n                }\r\n            },\r\n            axisLabel: {\r\n                fontSize: 12,\r\n\r\n            }\r\n        }\r\n    ],\r\n    series: [\r\n\r\n        {\r\n            name: '2018年总量',\r\n            type: 'bar',\r\n            barWidth: '40%',\r\n            emphasis: {\r\n                itemStyle: {\r\n                    color: \"#D3A2FF\"\r\n                }\r\n            },\r\n\r\n            markPoint: {\r\n                symbolSize: 40,\r\n                label: {\r\n                    color: \"#fff\",\r\n                    fontSize: 15\r\n                },\r\n                itemStyle: {\r\n                    color: {\r\n                        type: 'linear',\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 0,\r\n                        y2: 1,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: '#FF7549' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#FF5544' // 100% 处的颜色\r\n                        }],\r\n                        globalCoord: false // 缺省为 false\r\n                    },\r\n                    opacity: 1\r\n                },\r\n                emphasis: {\r\n                    itemStyle: {\r\n                        // color:\"red\",\r\n                        opacity: 1\r\n                    }\r\n                },\r\n                animation: true,\r\n                symbolKeepAspect: true,\r\n                data: PM2018 // 排名数据\r\n            }\r\n        },\r\n        {\r\n            name: '2018年比增',\r\n            type: 'line',\r\n            barWidth: '40%',\r\n            symbolSize: 8,\r\n            yAxisIndex: 1,\r\n            stack: '比增',\r\n            lineStyle: {\r\n                width: 3\r\n            }\r\n        },\r\n        {\r\n            name: '2018年排名',\r\n            type: 'bar',\r\n            barWidth: '0%',\r\n            symbolSize: 8,\r\n            lineStyle: {\r\n                width: 3\r\n            },\r\n            itemStyle: {\r\n                color: \"transparent\"\r\n            }\r\n\r\n        },\r\n\r\n        {\r\n            name: '2019年总量',\r\n            type: 'bar',\r\n            barWidth: '40%',\r\n            symbolSize: 8,\r\n             markPoint: {\r\n                symbolSize: 40,\r\n                label: {\r\n                    color: \"#fff\",\r\n                    fontSize: 15\r\n                },\r\n                itemStyle: {\r\n                    color: {\r\n                        type: 'linear',\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 0,\r\n                        y2: 1,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: '#FF7549' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#FF5544' // 100% 处的颜色\r\n                        }],\r\n                        globalCoord: false // 缺省为 false\r\n                    },\r\n                    opacity: 1\r\n                },\r\n                emphasis: {\r\n                    itemStyle: {\r\n                        // color:\"red\",\r\n                        opacity: 1\r\n                    }\r\n                },\r\n                animation: true,\r\n                symbolKeepAspect: true,\r\n                data: PM2019 // 排名数据\r\n            }\r\n        },\r\n        {\r\n            name: '2019年比增',\r\n            type: 'line',\r\n            barWidth: '40%',\r\n            symbolSize: 8,\r\n            yAxisIndex: 1,\r\n            stack: '比增',\r\n            lineStyle: {\r\n                width: 3\r\n            }\r\n        },\r\n        {\r\n            name: '2019年排名',\r\n            type: 'bar',\r\n            barWidth: '0%',\r\n            symbolSize: 8,\r\n            lineStyle: {\r\n                width: 3\r\n            },\r\n            itemStyle: {\r\n                color: \"transparent\"\r\n            }\r\n\r\n        },\r\n\r\n    ]\r\n};\r\n\r\n// 定时器\r\n\r\nvar timer = null,\r\n    idx = -1;\r\ntimer && clearInterval(timer);\r\ntimer = setInterval(function() {\r\n    idx++;\r\n    if (idx === 11) {\r\n        idx = 0;\r\n    }\r\n    // 根据 idx 过滤 数据\r\n    PM2018 = PMDATA2018.filter(item => item.xAxis === idx)\r\n    PM2019 = PMDATA2019.filter(item=>item.xAxis === idx)\r\n    option.series[0].markPoint.data = PM2018\r\n    option.series[3].markPoint.data = PM2019\r\n    myChart.setOption(option, true) //重新渲染图表\r\n}, 4000);\r\n\r\nmyChart.on('mouseover', function(parame) {\r\n    clearInterval(timer)\r\n    // 展示当前索引的数据\r\n    option.series[0].markPoint.data = PMDATA2018.filter(obj => obj.xAxis === parame.dataIndex)\r\n    option.series[3].markPoint.data = PMDATA2019.filter(obj => obj.xAxis === parame.dataIndex)\r\n    myChart.setOption(option, true)\r\n});\r\nmyChart.on('mouseout', function() {\r\n    timer && clearInterval(timer)\r\n    timer = setInterval(function() {\r\n        idx++;\r\n        if (idx === 11) {\r\n            idx = 0;\r\n        }\r\n        PM2018 = PMDATA2018.filter(item => item.xAxis === idx)\r\n        PM2019 = PMDATA2019.filter(item=>item.xAxis === idx)\r\n        option.series[0].markPoint.data = PM2018\r\n        option.series[3].markPoint.data = PM2019\r\n        option.series[0].markPoint.emphasis.opacity = 1\r\n        option.series[3].markPoint.emphasis.opacity = 1\r\n        myChart.setOption(option, true) //重新渲染图表\r\n    }, 4000);\r\n})","html":"","externalScripts":"","updaterUID":"bd-2410434837","theme":"","layout":"","viewCount":227,"userName":"不***名","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqcPrMqiKh.png?v=1547716028522","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","legend","markPoint","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"不***名"}}