{"status":0,"data":{"cid":"xH1INwyTl7","authorUid":"bd-2760961354","authorUserName":"木***者","title":"地图合并","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2018-06-12T06:24:46.000Z","lastUpdateTime":"2018-06-12T06:24:46.000Z","auth":2,"uid":"bd-2760961354","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-06-12T06:24:46.000Z","code":"var rug = \"/asset/get/s/data-1528704024268-rye72iigQ.js\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1528682054219-Hy0BU8ilm.json\";\nvar name = 'china';\nvar yuexi = 'rgba(255, 153, 0, 0.8)' //粤西\nvar yuedong = 'rgba(244, 233, 37, 0.8)' //粤东\nvar zhusanjiao = 'rgba(0, 153, 0, 0.8)' //珠三角\nvar yuebei = 'rgba(204, 0, 204, 0.8)' //粤北\n\n\nvar geoCoordMap = {\n    '清远市': [112.9175, 24.3292],\n    '北京市': [116.4551, 40.2539],\n    '韶关市': [113.7964, 24.7028],\n    '湛江市': [110.3577, 20.9894],\n    '梅州市': [116.1255, 24.1534],\n    '河源市': [114.917, 23.9722],\n    '肇庆市': [112.1265, 23.5822],\n    '惠州市': [114.6204, 23.1647],\n    '茂名市': [111.0059, 22.0221],\n    '江门市': [112.6318, 22.1484],\n    '阳江市': [111.8298, 22.0715],\n    '云浮市': [111.7859, 22.8516],\n    '广州市': [113.5107, 23.2196],\n    '汕尾市': [115.5762, 23.0438],\n    '揭阳市': [116.1255, 23.313],\n    '珠海市': [113.7305, 22.1155],\n    '佛山市': [112.8955, 23.1097],\n    '潮州市': [116.7847, 23.8293],\n    '汕头市': [117.1692, 23.3405],\n    '深圳市': [114.5435, 22.5439],\n    '东莞市': [113.8953, 22.901],\n    '中山市': [113.4229, 22.478]\n};\n\nvar gdata = [{\n    'name': '北京市',\n    'value': '98652'\n}, {\n    'name': '广州市',\n    'value': '75986'\n}]\n\nvar cdata = [{\n    'name': '清远市',\n    'value': '199'\n}, {\n    'name': '韶关市',\n    'value': '152'\n}, {\n    'name': '湛江市',\n    'value': '299'\n}, {\n    'name': '梅州市',\n    'value': '89'\n}, {\n    'name': '河源市',\n    'value': '52'\n}, {\n    'name': '肇庆市',\n    'value': '99'\n}, {\n    'name': '惠州市',\n    'value': '352'\n}, {\n    'name': '茂名市',\n    'value': '116'\n}, {\n    'name': '江门市',\n    'value': '168'\n}, {\n    'name': '阳江市',\n    'value': '176'\n}, {\n    'name': '云浮市',\n    'value': '78'\n}, {\n    'name': '广州市',\n    'value': '468'\n}, {\n    'name': '汕尾市',\n    'value': '86'\n}, {\n    'name': '揭阳市',\n    'value': '114'\n}, {\n    'name': '珠海市',\n    'value': '157'\n}, {\n    'name': '佛山市',\n    'value': '315'\n}, {\n    'name': '潮州市',\n    'value': '169'\n}, {\n    'name': '汕头市',\n    'value': '214'\n}, {\n    'name': '深圳市',\n    'value': '532'\n}, {\n    'name': '东莞市',\n    'value': '265'\n}, {\n    'name': '中山市',\n    'value': '259'\n}];\n\n//北京与广州关联\nvar relevance = [{\n    \"fromName\": \"广州市\",\n    \"toName\": \"北京市\",\n    'coords': [\n        [113.5107, 23.2196],\n        [116.4551, 40.2539]\n    ],\n    lineStyle: {\n        color: 'rgba(255, 153, 0, 0.8)'\n    },\n}, {\n    \"fromName\": \"北京市\",\n    \"toName\": \"广州市\",\n    'coords': [\n        [116.4551, 40.2539],\n        [113.5107, 23.2196],\n    ],\n    lineStyle: {\n        color: 'rgba(255, 255, 0, 0.8)'\n    }\n}]\n\n//广东省地市关系\nvar relation = [{\n        \"fromName\": \"湛江市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [110.3577, 20.9894],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuexi\n        }\n    },\n    {\n        \"fromName\": \"清远市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [112.9175, 24.3292],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuebei\n        }\n    },\n    {\n        \"fromName\": \"韶关市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [113.7964, 24.7028],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuebei\n        }\n    },\n    {\n        \"fromName\": \"梅州市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [116.1255, 24.1534],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"河源市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [114.917, 23.9722],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"肇庆市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [112.1265, 23.5822],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"惠州市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [114.6204, 23.1647],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"茂名市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [111.0059, 22.0221],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuexi\n        }\n    },\n    {\n        \"fromName\": \"江门市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [112.6318, 22.1484],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"阳江市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [111.8298, 22.0715],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuexi\n        }\n    },\n    {\n        \"fromName\": \"云浮市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [111.7859, 22.8516],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuexi\n        }\n    },\n    {\n        \"fromName\": \"汕尾市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [115.5762, 23.0438],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"揭阳市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [116.1255, 23.313],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"珠海市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [113.7305, 22.1155],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"佛山市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [112.8955, 23.1097],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"潮州市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [116.7847, 23.8293],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"汕头市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [117.1692, 23.3405],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: yuedong\n        }\n    },\n    {\n        \"fromName\": \"深圳市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [114.5435, 22.5439],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"东莞市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [113.8953, 22.901],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    },\n    {\n        \"fromName\": \"中山市\",\n        \"toName\": \"广州市\",\n        'coords': [\n            [113.4229, 22.478],\n            [113.5107, 23.2196]\n        ],\n        lineStyle: {\n            color: zhusanjiao\n        }\n    }\n]\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\noption = {\n    backgroundColor: '#154E90',\n    title: {\n        text: '',\n        subtext: '',\n        sublink: ''\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: '{b} <br/>{a} : {c}'\n    },\n    geo: [{\n        show: true,\n        map: 'china',\n        label: {\n            normal: {\n                // show: true,\n                textStyle: {\n                    color: '#fff'\n                }\n            },\n            emphasis: {\n                show: false,\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                borderColor: 'rgba(147, 235, 248, 1)',\n                borderWidth: 1,\n                areaColor: {\n                    type: 'radial',\n                    x: 0.5,\n                    y: 0.5,\n                    r: 0.8,\n                    colorStops: [{\n                        offset: 0,\n                        color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\n                    }, {\n                        offset: 1,\n                        color: 'rgba(147, 235, 248, .1)' // 100% 处的颜色\n                    }],\n                    // globalCoord: true // 缺省为 false\n                },\n                shadowColor: 'rgba(128, 217, 248, 1)',\n                shadowOffsetX: -2,\n                shadowOffsetY: 2,\n                shadowBlur: 10\n            },\n            emphasis: {\n                areaColor: '#389BB7',\n                borderWidth: 0\n            }\n        },\n        regions: [{\n            name: '广州市',\n            // selected: true,\n            // itemStyle: {\n            //     areaColor: '#9900CC',\n            // },\n            label: {\n                show: true,\n                color: '#FF0'\n            }\n        }, {\n            name: '北京',\n            // selected:true,\n            // itemStyle: {\n            //     areaColor: '#9900CC',\n            // },\n            label: {\n                show: true,\n                color: '#FF0'\n            }\n        }]\n    }],\n    series: [{\n        show: false,\n        name: '点',\n        type: 'scatter',\n        coordinateSystem: 'geo',\n        symbol: 'pin',\n        symbolSize: 50,\n        label: {\n            normal: {\n                show: true,\n                // show: false,\n                textStyle: {\n                    color: '#fff',\n                    fontSize: 9,\n                },\n                formatter: function(params) {\n                    return params.value[2]\n                }\n            }\n        },\n        itemStyle: {\n            normal: {\n                // color:  '#F62157', //标志颜色\n                color: 'rgba(255, 153,0, 0.8)',\n                // color: 'rgba(255, 153,0, 0)',\n            }\n        },\n\n        // data: convertData(cdata),//\n        data: convertData(gdata),\n    }, {\n        name: '线路',\n        type: 'lines',\n        coordinateSystem: 'geo',\n        large: true,\n        left: '2%',\n        top: 10,\n        //线特效的配置\n        type: 'lines',\n        coordinateSystem: 'geo',\n        // polyline:true,\n        // symbol: ['none', 'triangle'],\n        symbol: 'none',\n        zlevel: 2,\n        effect: {\n            show: true,\n            symbol: 'roundRect',\n            constantSpeed: 50,\n            period: 2,\n            delay: 100,\n            trailLength: 0.6,\n            symbolSize: 6,\n        },\n        lineStyle: {\n            normal: {\n                color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 0,\n                    y2: 1,\n                    colorStops: [{\n                        offset: 0,\n                        color: '#ed1941'\n                    }, {\n                        offset: 1,\n                        color: '#ffce7b'\n                    }],\n                    globalCoord: false\n                },\n                width: 0.5,\n                opacity: 0.8,\n                type: 'dotted',\n                curveness: 0.2,\n            }\n        },\n        data: relevance //北京与广东省\n        // data:relation //广东省各地方\n    }]\n};\n\n$.get(uploadedDataURL, function(geoJson) {\n    echarts.registerMap(name, geoJson);\n    myChart.setOption(option);\n});\n\n\nvar k = 1;\nvar iCount;\nsetTimeout(function() {\n    iCount = setInterval(function() {\n        loading(k);\n        k = k + 0.2;\n    }, 150);\n}, 5000);\n\nfunction loading(k) {\n    console.log(k)\n    var newoption = myChart.getOption();\n    console.log(newoption);\n    if (k == 1) {\n        newoption.geo[0].center = [113.5107, 23.2196];\n    }\n\n    // if(k==8.2){\n\n    // }\n    if (k < 11) {\n        newoption.geo[0].zoom = k;\n        myChart.setOption(newoption);\n    } else {\n        //清除setInterval\n        newoption.geo[0].label.show = true; //显示所有地名\n        newoption.series[0].data = convertData(cdata); //显示广东省各地市数据点\n        newoption.series[1].data = relation; //显示广东省各地市线条\n        myChart.setOption(newoption);\n        clearInterval(iCount);\n    }\n\n}\n\nsetTimeout(function() {\n    setInterval(function() {\n        var newoption = myChart.getOption();\n        if (newoption.geo[0].zoom < 6 && newoption.geo[0].label.show == true) {\n            newoption.geo[0].label.show = false; //隐藏地名,只显示北京与广州\n            newoption.series[0].data = convertData(gdata); //显示北京与广东\n            newoption.series[1].data = relevance; //北京与广东的点\n            myChart.setOption(newoption);\n        } else if (newoption.geo[0].zoom > 6 && newoption.geo[0].label.show == false) {\n            newoption.geo[0].label.show = true; //显示所有地名\n            newoption.series[0].data = convertData(cdata); //显示广东省各地市数据点\n            newoption.series[1].data = relation; //显示广东省各地市线条\n            myChart.setOption(newoption);\n        }\n\n    }, 500)\n}, 10000);","html":"","externalScripts":"","updaterUID":"bd-2760961354","theme":"","layout":"","viewCount":8453,"userName":"木***者","commentCount":6,"starCount":25,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xH1INwyTl7.png?v=1528784686826","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-lines","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"木***者"}}