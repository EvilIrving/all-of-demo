{"status":0,"data":{"cid":"xr1NhLIG1X","authorUid":"bd-3977618970","authorUserName":"6161212","title":"Gauge Pie 结合联动","description":"Pie 与 Gauge 结合互动","latestVersion":1,"alwaysLatest":1,"createTime":"2018-05-23T02:49:15.000Z","lastUpdateTime":"2018-05-23T02:51:38.000Z","auth":2,"uid":"bd-3977618970","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-05-23T02:49:15.000Z","code":"var test_data = [{\r\n        \"name\": \"0-13\",\r\n        \"value\": \"28134.13\"\r\n    },\r\n    {\r\n        \"name\": \"14-17\",\r\n        \"value\": \"184129.25\"\r\n    },\r\n    {\r\n        \"name\": \"18-19\",\r\n        \"value\": \"600728.02\"\r\n    },\r\n    {\r\n        \"name\": \"20-24\",\r\n        \"value\": \"1224760.49\"\r\n    },\r\n    {\r\n        \"name\": \"25-29\",\r\n        \"value\": \"1418392.50\"\r\n    },\r\n    {\r\n        \"name\": \"30-34\",\r\n        \"value\": \"458553.05\"\r\n    },\r\n    {\r\n        \"name\": \"35-39\",\r\n        \"value\": \"280989.71\"\r\n    },\r\n    {\r\n        \"name\": \"40-44\",\r\n        \"value\": \"90972.38\"\r\n    },\r\n    {\r\n        \"name\": \"45-49\",\r\n        \"value\": \"43075.70\"\r\n    },\r\n    {\r\n        \"name\": \"50-54\",\r\n        \"value\": \"15152.30\"\r\n    },\r\n    {\r\n        \"name\": \"55-59\",\r\n        \"value\": \"27668.74\"\r\n    },\r\n    {\r\n        \"name\": \"60+\",\r\n        \"value\": \"12735.51\"\r\n    },\r\n    {\r\n        \"name\": \"Unknown\",\r\n        \"value\": \"533459.40\"\r\n    }\r\n];\r\nvar maxData = 4918751.17,\r\n    seriesd = [],\r\n    legend = [];\r\n\r\nfor (var j in test_data) {\r\n    if (legend.indexOf(test_data[j][\"name\"] == -1)) {\r\n        legend.push({\r\n            'icon': 'rect',\r\n            \"name\": test_data[j][\"name\"]\r\n        });\r\n    }\r\n    var ra = test_data.length - 1 - j;\r\n    seriesd.push({\r\n        name: test_data[j][\"name\"],\r\n        type: 'pie',\r\n        radius: [(ra*5 + 10)+\"%\", (7 + ra * 5) +\"%\" ],\r\n        itemStyle: {\r\n            normal: {\r\n                label: {\r\n                    show: false\r\n                }\r\n            }\r\n        },\r\n        hoverAnimation: false,\r\n        startAngle: 180,\r\n        center: [\"45%\", \"75%\"],\r\n        data: [{\r\n                value: test_data[j][\"value\"],\r\n                name: test_data[j][\"name\"],\r\n                label: {\r\n                    normal: {\r\n                        postion: \"center\"\r\n                    }\r\n                },\r\n            },\r\n            {\r\n                value: maxData - test_data[j][\"value\"],\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'rgba(203,203,203,0.5)',\r\n                        label: {\r\n                            show: false\r\n                        },\r\n                        labelLine: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        color: 'rgba(203,203,203,1)'\r\n                    }\r\n                },\r\n                name: 'showtip_' + test_data[j][\"value\"]\r\n            },\r\n            {\r\n                value: maxData,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'rgba(0,0,0,0)',\r\n                        label: {\r\n                            show: true\r\n                        },\r\n                        labelLine: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        color: 'rgba(0,0,0,0)'\r\n                    }\r\n                },\r\n                name: 'hide'\r\n            }\r\n        ]\r\n    })\r\n}\r\nvar initnum = parseFloat(seriesd[0].data[0][\"value\"] * 100 / maxData).toFixed(2);\r\nseriesd.push({\r\n    type: 'gauge',\r\n    z: 3,\r\n    min: 0,\r\n    max: 100,\r\n    splitNumber: 5,\r\n    center: ['45%', '75%'], // 默认全局居中\r\n    radius: '80%',\r\n    endAngle: 0,\r\n    startAngle: 180,\r\n    axisLabel: {\r\n        formatter: \"{value}%\"\r\n    },\r\n    axisLine: { // 坐标轴线  \r\n        lineStyle: {\r\n            color: [\r\n                [1, \"rgba(203,203,203,1)\"]\r\n            ], //仪表盘颜色\r\n            width: 2, //仪表盘宽度\r\n        }\r\n    },\r\n    axisTick: { // 坐标轴小标记\r\n        length: 5, // 属性length控制线长\r\n        lineStyle: { // 属性lineStyle控制线条样式\r\n            color: 'auto'\r\n        }\r\n    },\r\n    splitLine: { // 分隔线\r\n        show: true,\r\n        length: 5, // 属性length控制线长\r\n        lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式\r\n            color: 'auto',\r\n            width: 1\r\n        }\r\n    },\r\n    title: {\r\n        show: false\r\n    },\r\n    detail: { //显示数据\r\n        show: false,\r\n    },\r\n    pointer: {\r\n        width: 1,\r\n        shadowColor: '#fff', //默认透明\r\n    },\r\n    itemStyle: {\r\n        normal: {\r\n            color: \"#676767\", //仪表盘颜色\r\n        }\r\n    },\r\n    data: [{\r\n        value: initnum\r\n    }]\r\n\r\n})\r\nvar option = {\r\n    maxnum: maxData,\r\n    tooltip: {\r\n        show: true,\r\n        formatter: function(params) {\r\n            if (params.name == \"hide\") {\r\n                return null\r\n            } else {\r\n                if (params.name.indexOf(\"showtip_\") != -1) {\r\n                    var num = Number(params.name.split(\"_\")[1]);\r\n                } else {\r\n                    var num = params.value;\r\n                }\r\n                if (Number(num) == 0) return params.seriesName + \":\" + Number(num) + \"\";\r\n                return params.seriesName + \":\" + parseFloat(num * 100 / maxData).toFixed(2) + \"%\";\r\n            }\r\n        }\r\n    },\r\n    legend: {\r\n        itemGap: 5,\r\n        orient: 'vertical',\r\n        align: \"left\",\r\n        x: 'right',\r\n        itemWidth: 12,\r\n        itemHeight: 10,\r\n        data: legend\r\n    },\r\n    grid: {\r\n        top: 8,\r\n        height: 10,\r\n        left: \"25%\",\r\n        right: '15%',\r\n    },\r\n    series: seriesd\r\n};\r\nmyChart.on('mouseover', function (params) {\r\n    if(params.name != \"hide\"){\r\n        if(params.name.indexOf(\"showtip_\") != -1){\r\n            var shownum = parseFloat( params.name.split(\"_\")[1]*100/myChart.getOption().maxnum).toFixed(2);\r\n        }else{\r\n            var shownum = parseFloat( params.value*100/myChart.getOption().maxnum).toFixed(2);\r\n        }\r\n        var series = myChart.getOption().series;\r\n        option.series[series.length-1].data[0].value = shownum;\r\n        myChart.setOption(option,true); \r\n    }\r\n});","html":"","externalScripts":"","updaterUID":"bd-3977618970","theme":"vintage","layout":"","viewCount":2176,"userName":"6161212","commentCount":1,"starCount":12,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xr1NhLIG1X.png?v=1527043755890","isCustomThumbnail":0,"builtinTags":[],"customTags":[],"updaterUserName":"6161212"}}