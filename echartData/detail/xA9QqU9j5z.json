{"status":0,"data":{"cid":"xA9QqU9j5z","authorUid":"obd-oMZ8VzYlixl6Bwp7IbhQvTOIhreUY2o","authorUserName":"153******23","title":"人口流动数量","description":"地图结合散点图,进行标记轮播","latestVersion":3,"alwaysLatest":0,"createTime":"2021-11-10T07:55:52.000Z","lastUpdateTime":"2021-11-10T08:15:13.000Z","auth":2,"uid":"obd-oMZ8VzYlixl6Bwp7IbhQvTOIhreUY2o","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-10T08:15:13.000Z","code":"//  使用须知\n// 参考链接 https://www.makeapie.com/editor.html?c=xwXyloB70C\n// 如有侵权 联系本人删除\n\nvar colors = ['#2468d9', '#3a9eff', '#bfecff'];\nvar line =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHAAAABQCAYAAADBTPF9AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAcKADAAQAAAABAAAAUAAAAAAfQ361AAADlElEQVR4Ae2d6UqUYRiGxyX3XdPSco3OpYOIqBCxEJFCRAqjEJFCRAojCiPaKFqxjWyxjTasaMEKy8zOIrDrgfcIpn508zzBxftr5L7v6xvQ5puZzMrKyia4Ay2Z+Ke5API2wy/YqNkgUmeQtyVJ3BBziC6AwK2wDB2iFSI28rbDT2iPNUQXQF4nLEGbaIWIjbwu+AGtsYboAsjrhkWIPzFEHdpvpzvhOzSrdnCfG3k9SeI692OoDoDAXvgGTaod3OdGXh8sQKP7MVQHQN5u+BISVQ2SG3n9SeIa4Rq+oyNwAD5Dg+8lhNsjbxDmoV64hu/oyNsLH0Oi8HWAvKEksU64hu/oCDwA7yAkql4KyBuGt1Cr2sF9buSNwBuocT+G6gDIG4U5qFbt4D438g7Ba6hyP4bqAMgbg1dQqdrBfW7kjcOLkCh8KSBvAp5DhXAN39GRdwSeQbnvJYTbI28SnkKZcA2/0RGXA0fhcUgUvQ6SxGOcj6BUtIbv2EniCc6HUOJ7DdH2SeIU5/2QqCsxF3kn4R4Ui9bwHRtxJvEUzECR7zVE2yeJZzjtncIhUdFjkniO8zYUKnZwnxlxeXAeboZE0cshSbzAeQMKRGv4jp0kXuK8HhJFrwXE5cNluAarRGv4jp0kXuW8EhJFrwUTB/YstGdjvmgN37GTxGnOiyFR9FpAXAHYb6b2G2qeaA3fsZPEW5z2t2JIVLwcEFcI9r81Z0OiokEyJ4l3OU9DrmgN37ERVwT2Coa9khESFS8HxBWDvZZorymGRGGJDxA4BTmKHdxnRlwJzMLxkCh6OSSJdrui3fEWz0RFj4grhSdg956GRFGJZcizu78nFfNHZhZAnkm0N9McjkFEF0BeOdjb2iZEK0Rs5FXASxiPNUQXQF4l2LuEx0QrROwkcY7zYKwhugDyqsA+/mRUtELERl412AcRjcQaogsgrwbsI8GGRStEbOTVwnvYH2uILoC8OvgA+0QrRGzkrU4Sh2IN0QUQWA+fYI9ohYidJM5zDsYaogsgrwHsQ9wHRCtEbOStTRL7Yw3RBRDYCF9hl2iFiJ0kLnD2xRqiCyCvCezLvnpFK0Rs5K1PEntiDdEFENgMi7BDtELERl5Lktgda4gugMBWsC+F7hKtELGR1wZL0BlriC6AvHZYhm3/Q4W4ezkLC8jr4GGzMA0zWfyIf/aQEJjllEi0T5Gye07tW0x/Z/lj/vphfwB0b32KnijWSQAAAABJRU5ErkJggg==';\nconst dataList = [\n    {\n        name: '北京',\n        value: 10,\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '河南',\n        // value: Math.round(Math.random() * 1000),\n        value: 10000001,\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '北京',\n        value: 2000,\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n\n    {\n        name: '上海',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '重庆',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '河北',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '河南',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '云南',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '辽宁',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '黑龙江',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '湖南',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '安徽',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '山东',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '新疆',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '江苏',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '浙江',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '江西',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '湖北',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '广西',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '甘肃',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '山西',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '内蒙古',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '陕西',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '吉林',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '福建',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '贵州',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '广东',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '青海',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '西藏',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '四川',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '宁夏',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '海南',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '台湾',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '香港',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n    {\n        name: '澳门',\n        value: Math.round(Math.random() * 1000),\n        tipData: [Math.round(Math.random() * 1000), Math.round(Math.random() * 1000)],\n    },\n];\noption = {\n    visualMap: {\n        min: 0,\n        max: 2000,\n        left: 26,\n        bottom: 50,\n        showLabel: true,\n        orient: 'horizontal',\n        // borderColor :'#fff',\n        textStyle: {\n            color: 'red',\n        },\n        // lt（小于，less than），\n        // gt（大于，greater than），\n        // lte（小于等于 less than or equals）\n        // ，gte（大于等于\n        pieces: [\n            {\n                gte: 80,\n                label: '≥80%',\n                color: colors[0],\n            },\n            {\n                gt: 60,\n                lt: 80,\n                label: '60 - 80%',\n                color: colors[1],\n            },\n            {\n                lte: 60,\n                label: '≤60%',\n                color: colors[2],\n            },\n        ],\n        show: !0,\n    },\n    title: {\n        text: '散点图,地图轮播',\n        bottom: '18%',\n        left: '3.6%',\n        textStyle: {\n            color: '#FFFFFF',\n            fontSize: 14,\n            fontWeight: 'normal',\n        },\n    },\n    legend: {\n        orient: 'vertical',\n        text: '地图',\n        left: 'left',\n        bottom: 'bottom',\n    },\n    geo: {\n        map: 'china',\n        show: true,\n        roam: false,\n    },\n    tooltip: {\n        padding: 0,\n        enterable: true,\n        trigger: 'item',\n        position: 'inside',\n        formatter: function (params) {\n            var tipHtml = getTipcneter(params);\n            return tipHtml;\n        },\n    },\n    series: [\n        {\n            // name: 'iphone4',\n            type: 'map',\n            mapType: 'china',\n            labelLine: {},\n            // 地图原点控制\n            showLegendSymbol: false,\n            data: dataList,\n        },\n        {\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            legendHoverLink: false,\n            label: {\n                normal: {\n                    show: false,\n                    color: '#fff',\n                    fontWeight: 'bold',\n                    rich: {\n                        cnNum: {\n                            fontSize: 20,\n                            color: '#D4EEFF',\n                            left: 'center',\n                        },\n                    },\n                },\n            },\n            symbolSize: [8, 8],\n            itemStyle: {\n                normal: {\n                    color: '#F6DA39',\n                },\n            },\n            z: 99,\n            data: [\n                {\n                    name: '北京',\n                    value: [116.405285, 39.904989, 497, 656],\n                    visualMap: false,\n                },\n            ],\n        },\n    ],\n};\n// tip 引导线为通过定位向右偏移实现,左侧可以自己画斜线,或者像本人直接图片,哈哈哈^^\nfunction getTipcneter(item) {\n    let data = item ? item.data : {};\n    let { name = '' } = data ? data : {};\n    let flag = false;\n    if (item.seriesType === 'scatter') {\n        name = '北京总部';\n        flag = true;\n    }\n    let tipHtml = `<div style=\"position: relative; width:auto;height:auto;\">\n  <div style=\"width: 80px;height:200px;position: absolute;display:flex;height:50px; \">\n      <img src='${line}' style=\"width:80px;\"/>\n      <span style=\"display:${\n          flag ? 'none' : 'inline-block'\n      } ;width: 8px;height:8px;background:#fff;border-radius:50%;position: absolute;left:-5px;top:-5px\"></span>\n      <span style=\"display:${\n          flag ? 'inline-block' : 'none'\n      } ;width: 12px;height:12px;background:#F6DA39;border-radius:50%;position: absolute;left:-7px;top:-6px\"></span>\n  </div>\n  <div style=\" width: 100px;\n  position: absolute;\n  left:80px;\n  height: 150px;\n  font-size: .15rem;\n  padding: 0rem .25rem;\n  background-color: yellowgreen;\n  border: 1px solid rgba(68,239,250,0.48);\n  box-shadow: 0 -6px 34px 0 rgba(0,35,98,0.19), inset 0 1px 34px 0 rgba(24,203,235,0.70);\" className=\"map_tip\">\n\n    <h5 style=\"\n    height: .5rem;\n    line-height: .5rem;\n    text-align: center;\n    font-size: .15rem;\n    color:#fff;\n    border-bottom: 1px solid rgba(68,239,250,0.48);\n    \">\n      ${name}\n    </h5>\n    </div>\n  </div>`;\n    return tipHtml;\n}\nvar count = 0;\nvar timeTicket = null;\nvar dataLength = option.series[0].data.length;\ntimeTicket && clearInterval(timeTicket);\ntimeTicket = setInterval(function () {\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n    });\n    count !== 0 &&\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: count - 1,\n        });\n    count === 0 &&\n        myChart.dispatchAction({\n            type: 'toggleSelected',\n            seriesIndex: 1,\n            dataIndex: 0,\n        });\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: count === 0 ? 1 : 0,\n        dataIndex: count === 0 ? count : count - 1,\n    });\n    count++;\n    if (count >= 3) {\n        count = 0;\n    }\n}, 1000);\n\nmyChart.on('mouseover', function (params) {\n    console.log(params);\n    clearInterval(timeTicket);\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n    });\n    params.seriesType !== 'scatter' &&\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: params.dataIndex,\n        });\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n    });\n});\nmyChart.on('mouseout', function (params) {\n    timeTicket && clearInterval(timeTicket);\n    timeTicket = setInterval(function () {\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n        });\n        count !== 0 &&\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 0,\n                dataIndex: count - 1,\n            });\n        myChart.dispatchAction({\n            type: 'showTip',\n            // 选中散点图\n            seriesIndex: count === 0 ? 1 : 0,\n            dataIndex: count === 0 ? count : count - 1,\n        });\n        count++;\n        if (count >= 3) {\n            count = 0;\n        }\n    }, 1000);\n});\n","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-oMZ8VzYlixl6Bwp7IbhQvTOIhreUY2o","theme":"default","layout":"","viewCount":0,"userName":"153******23","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xA9QqU9j5z.png?v=1636532114013","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"153******23"}}