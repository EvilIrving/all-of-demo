{"status":0,"data":{"cid":"xHnEbGidlo","authorUid":"obd-oj3TGM1V2cBGJDIOGbvV2TIt_iZK_DD","authorUserName":"w***2","title":"中国地图","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-05-13T04:36:28.000Z","lastUpdateTime":"2021-05-13T04:36:28.000Z","auth":2,"uid":"obd-oj3TGM1V2cBGJDIOGbvV2TIt_iZK_DD","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.7.0","versionCreateTime":"2021-05-13T07:16:39.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n\r\nvar geoGpsMap = [121.4648, 31.2891];\r\nvar t = 1;//流入流出控制\r\nvar r = 1;//右侧流入流出文字控制\r\nvar geoCoordMap = {\r\n    \"江苏\": [118.8062, 31.9208],\r\n    '黑龙江': [127.9688, 45.368],\r\n    '内蒙古': [110.3467, 41.4899],\r\n    \"吉林\": [125.8154, 44.2584],\r\n    '北京市': [116.4551, 40.2539],\r\n    \"辽宁\": [123.1238, 42.1216],\r\n    \"河北\": [114.4995, 38.1006],\r\n    \"天津\": [117.4219, 39.4189],\r\n    \"山西\": [112.3352, 37.9413],\r\n    \"陕西\": [109.1162, 34.2004],\r\n    \"甘肃\": [103.5901, 36.3043],\r\n    \"宁夏\": [106.3586, 38.1775],\r\n    \"青海\": [101.4038, 36.8207],\r\n    \"新疆\": [87.9236, 43.5883],\r\n    \"四川\": [103.9526, 30.7617],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"山东\": [117.1582, 36.8701],\r\n    \"河南\": [113.4668, 34.6234],\r\n    \"安徽\": [117.29, 32.0581],\r\n    \"湖北\": [114.3896, 30.6628],\r\n    \"浙江\": [119.5313, 29.8773],\r\n    \"福建\": [119.4543, 25.9222],\r\n    \"江西\": [116.0046, 28.6633],\r\n    \"湖南\": [113.0823, 28.2568],\r\n    \"贵州\": [106.6992, 26.7682],\r\n    \"云南\": [102.9199, 25.4663],\r\n    \"广东\": [113.12244, 23.009505],\r\n    \"广西\": [108.479, 23.1152],\r\n    \"海南\": [110.3893, 19.8516],\r\n    '上海': [121.4648, 31.2891],\r\n    \"西藏\": [91.11, 29.97],\r\n};\r\n\r\nvar d1 = {\r\n    '江苏':10041,\r\n'黑龙江':4093,\r\n'内蒙古':1157,\r\n'吉林':4903,\r\n'北京市':2667,\r\n'辽宁':8331,\r\n'河北':23727,\r\n'天津':681,\r\n'山西':5352,\r\n'陕西':38,\r\n'甘肃':77,\r\n'宁夏':65,\r\n'青海':10,\r\n'新疆':22000,\r\n'四川':309,\r\n'重庆':77,\r\n'山东':21666,\r\n'河南':15717,\r\n'安徽':15671,\r\n'湖北':3714,\r\n'浙江':3141,\r\n'福建':955,\r\n'江西':4978,\r\n'湖南':778,\r\n'贵州':33,\r\n'云南':149,\r\n'广东':1124,\r\n'广西':125,\r\n'海南':7,\r\n'上海':2155,\r\n'西藏':0\r\n\r\n};\r\n\r\nvar colorIndex = 0;\r\nvar colors = \"#1DE9B6\"\r\n$(function() {\r\n\r\n   \r\n    var mapData = [];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    // var barData = [];\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData.push({\r\n            \"year\": '2020-01',\r\n            \"name\": key,\r\n            \"value\": d1[key]/100,\r\n            \"value1\": d1[key]/100,\r\n        });\r\n    }\r\n\r\n    for (var j = 0; j < mapData.length; j++) {\r\n        categoryData.push(mapData[j].name);\r\n    }\r\n    \r\n    \r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var convertToLineData = function(data, gps) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var toCoord = geoCoordMap[dataItem.name];\r\n                var fromCoord = gps; //郑州\r\n                //  var toCoord = geoGps[Math.random()*3]; \r\n                if (fromCoord && toCoord) {\r\n                    if(t==1){\r\n                        res.push([{\r\n                        coord: toCoord,\r\n                         },{\r\n                        coord: fromCoord,\r\n                        value: dataItem.value\r\n                         }]);\r\n                    }else{\r\n                      res.push([{\r\n                            coord: fromCoord,\r\n                            value: dataItem.value\r\n                        },{\r\n                        coord: toCoord,\r\n                        }]); \r\n                    }\r\n                    \r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        optionXyMap01 = {\r\n            timeline: {\r\n                show:false,\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {\r\n                    right: '2%',\r\n                    top: '10%',\r\n                    bottom: '10%',\r\n                    width: '18%'\r\n                },\r\n                geo: {\r\n                    show: true,\r\n                    map: 'china',\r\n                    roam: true,\r\n                    zoom: 1,\r\n                    center: [113.83531246, 34.0267395887],\r\n                    label: {\r\n                        emphasis: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            borderColor: 'rgba(147, 235, 248, 1)',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 1)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#389BB7',\r\n                            borderWidth: 0\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n            options: []\r\n\r\n        };\r\n        \r\n        optionXyMap01.options.push({\r\n            xAxis: {\r\n                type: 'value',\r\n                scale: true,\r\n                position: 'top',\r\n                min: 0,\r\n                boundaryGap: false,\r\n                splitLine: {\r\n                    show: false\r\n                },\r\n                axisLine: {\r\n                    show: false\r\n                },\r\n                axisTick: {\r\n                    show: false\r\n                },\r\n                axisLabel: {\r\n                    margin: 1,\r\n                    textStyle: {\r\n                        color: '#aaa'\r\n                    }\r\n                },\r\n            },\r\n            yAxis: {\r\n                type: 'category',\r\n                //  name: 'TOP 20',\r\n                nameGap: 16,\r\n                axisLine: {\r\n                    show: false,\r\n                },\r\n                axisTick: {\r\n                    show: false,\r\n                    lineStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                },\r\n                axisLabel: {\r\n                    show:false,\r\n                },\r\n                data: categoryData\r\n            },\r\n            series: [\r\n                //地图？\r\n                {\r\n                    type: 'map',\r\n                    map: 'china',\r\n                    geoIndex: 0,\r\n                    aspectScale: 1, //长宽比\r\n                    showLegendSymbol: false, // 存在legend时显示\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        },\r\n                        emphasis: {\r\n                            show: false,\r\n                            textStyle: {\r\n                                color: '#fff'\r\n                            }\r\n                        }\r\n                    },\r\n                    roam: true,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            areaColor: '#031525',\r\n                            borderColor: '#FFFFFF',\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#2B91B7'\r\n                        }\r\n                    },\r\n                    animation: false,\r\n                    data: mapData\r\n                },\r\n                //地图点的动画效果\r\n                {\r\n                    //  name: 'Top 5',\r\n                    type: 'effectScatter',\r\n                    coordinateSystem: 'geo',\r\n                    data: convertData(mapData.sort(function(a, b) {\r\n                        return b.value - a.value;\r\n                    }).slice(0, 20)),\r\n                    symbolSize: function(val) {\r\n                        return 5;\r\n                    },\r\n                    showEffectOn: 'render',\r\n                    rippleEffect: {\r\n                        brushType: 'stroke'\r\n                    },\r\n                    hoverAnimation: true,\r\n                    label: {\r\n                        normal: {\r\n                            formatter: '{b}',\r\n                            position: 'right',\r\n                            show: true\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: colors,\r\n                            shadowBlur: 10,\r\n                            shadowColor: colors\r\n                        }\r\n                    },\r\n                    zlevel: 1\r\n                },\r\n                //地图线的动画效果\r\n                {\r\n                    type: 'lines',\r\n                    zlevel: 2,\r\n                    effect: {\r\n                        show: true,\r\n                        period: 5, //箭头指向速度，值越小速度越快\r\n                        trailLength: 0.2, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                        symbol: 'arrow', //箭头图标\r\n                        symbolSize: 6, //图标大小\r\n                    },\r\n                    lineStyle: {\r\n                        normal: {\r\n                            color: colors,\r\n                            width: 1, //尾迹线条宽度\r\n                            opacity: 0.2, //尾迹线条透明度\r\n                            curveness: .3 //尾迹线条曲直度\r\n                        }\r\n                    },\r\n                    data: convertToLineData(mapData, geoGpsMap)\r\n                }\r\n            ]\r\n        });\r\n        console.log(JSON.stringify(optionXyMap01))\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});\r\n\r\n\r\n\r\n","html":"","externalScripts":"","updaterUID":"obd-oj3TGM1V2cBGJDIOGbvV2TIt_iZK_DD","theme":"dark","layout":"","viewCount":0,"userName":"w***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHnEbGidlo.png?v=1620890199339","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-effectScatter","series-lines","series-map","timeline"],"customTags":[],"updaterUserName":"w***2"}}