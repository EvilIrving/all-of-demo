{"status":0,"data":{"cid":"xyMvA0bbvw","authorUid":"bd-2167902842","authorUserName":"free梦伽蓝","title":"分块散点图","description":"分块，气泡大小变化","latestVersion":3,"alwaysLatest":1,"createTime":"2019-04-16T07:05:21.000Z","lastUpdateTime":"2019-04-16T07:05:21.000Z","auth":2,"uid":"bd-2167902842","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-08T07:24:47.000Z","code":"var data = {\n    axis: {\n        xAxis: \"1\",\n        yAxis: \"2\"\n    },\n    provinces: [{\n            name: \"0\",\n            rate: 23.7,\n            ratio: 26,\n            value: 7.2\n        },\n        {\n            name: \"1\",\n            rate: 26.5,\n            ratio: 29.4,\n            value: 7.4\n        },\n        {\n            name: \"2\",\n            rate: 20.6,\n            ratio: 23.8,\n            value: 6.9\n        },\n        {\n            name: \"j\",\n            rate: 31.2,\n            ratio: 38.9,\n            value: 16.9\n        },\n        {\n            name: \"g\",\n            rate: 25.4,\n            ratio: 34.8,\n            value: 16.3\n        },\n        {\n            name: \"m\",\n            rate: 38.5,\n            ratio: 43.4,\n            value: 16.2\n        },\n        {\n            name: \"nm\",\n            rate: 29.0,\n            ratio: 38.5,\n            value: 15.5\n        },\n        {\n            name: \"b\",\n            rate: 22.2,\n            ratio: 27.6,\n            value: 11.0\n        },\n        {\n            name: \"v\",\n            rate: 21.4,\n            ratio: 24.6,\n            value: 10.4\n        },\n        {\n            name: \"c\",\n            rate: 22.4,\n            ratio: 28.9,\n            value: 10.3\n        },\n        {\n            name: \"x\",\n            rate: 13.7,\n            ratio: 21.2,\n            value: 10.1\n        },\n        {\n            name: \"l\",\n            rate: 24.6,\n            ratio: 24.7,\n            value: 9.6\n        },\n        {\n            name: \"k\",\n            rate: 19.6,\n            ratio: 25.7,\n            value: 9.4\n        },\n        {\n            name: \"j\",\n            rate: 24.9,\n            ratio: 27.9,\n            value: 9.4\n        },\n        {\n            name: \"h\",\n            rate: 25.8,\n            ratio: 30.1,\n            value: 9.2\n        },\n        {\n            name: \"g\",\n            rate: 16.6,\n            ratio: 21.9,\n            value: 8.7\n        },\n        {\n            name: \"s\",\n            rate: 21.5,\n            ratio: 26.0,\n            value: 8.5\n        },\n        {\n            name: \"g\",\n            rate: 20.5,\n            ratio: 25.7,\n            value: 8.4\n        },\n        {\n            name: \"d\",\n            rate: 36.8,\n            ratio: 37.1,\n            value: 8.3\n        },\n        {\n            name: \"f\",\n            rate: 26.0,\n            ratio: 27.8,\n            value: 7.6\n        },\n        {\n            name: \"h\",\n            rate: 27.6,\n            ratio: 30.1,\n            value: 7.3\n        },\n        {\n            name: \"h\",\n            rate: 23.0,\n            ratio: 26.7,\n            value: 7.0\n        },\n      ]\n};\nvar minRate = 0,\n    maxRate = 0,\n    minRatio = 0,\n    maxRatio = 0;\ndata.provinces.forEach((province, index) => {\n    //  取最值\n    if (\n        province.rate !== \"-\" &&\n        province.ratio !== \"-\" &&\n        province.value !== \"-\"\n    ) {\n        if (index > 0) {\n            //  rate最值\n            if (parseFloat(province.rate) < minRate) {\n                minRate = province.rate;\n            } else if (parseFloat(province.rate) > maxRate) {\n                maxRate = province.rate;\n            }\n            //  ratio最值\n            if (parseFloat(province.ratio) < minRatio) {\n                minRatio = province.ratio;\n            } else if (parseFloat(province.ratio) > maxRatio) {\n                maxRatio = province.ratio;\n            }\n        } else {\n            minRate = maxRate = province.rate;\n            minRatio = maxRatio = province.ratio;\n        }\n    }\n});\n\nvar minValue = Math.min(minRate, minRatio);\nvar maxValue = Math.max(maxRate, maxRatio);\nvar xValue = 0,\n    yValue = 0;\ndata.provinces.forEach(item => {\n    if (item.name === \"0\") {\n        xValue = item.rate;\n        yValue = item.ratio;\n    }\n});\nvar seriesData = [];\ndata.provinces.map(item => {\n    if (item.rate !== \"-\" && item.ratio !== \"-\" && item.value !== \"-\") {\n        let symbolSize = 0;\n        if (Math.abs(item.value) < 1) {\n            symbolSize = Math.abs(item.value) * 10;\n        } else if (Math.abs(item.value) < 50) {\n            symbolSize = Math.abs(item.value);\n        } else {\n            symbolSize = Math.abs(item.value) / 2;\n        }\n        seriesData.push({\n            name: item.name,\n            value: [Math.abs(item.rate), Math.abs(item.ratio)],\n            symbolSize: symbolSize\n        });\n    }\n});\n\noption = {\n    title: {\n        text: \"标 题\",\n        show: false\n    },\n    grid: {\n        left: \"3%\",\n        right: \"10%\",\n        bottom: \"3%\",\n        containLabel: true\n    },\n    tooltip: {\n        trigger: \"axis\",\n        showDelay: 0,\n        formatter: function(params) {\n            let str = \"\";\n            params.forEach((param, index) => {\n                str +=\n                    param.name +\n                    \" :<br/>\" +\n                    data.axis.xAxis +\n                    \"：\" +\n                    param.value[0] +\n                    \"% \" +\n                    \" <br/>\" +\n                    data.axis.yAxis +\n                    \"：\" +\n                    param.value[1] +\n                    \"% <br/>\";\n            });\n            return str;\n        },\n        axisPointer: {\n            show: true,\n            type: \"cross\",\n            lineStyle: {\n                type: \"dashed\",\n                width: 1\n            } //坐标指示器\n        }\n    },\n    legend: {\n        selectedMode: false,\n        data: [\"气泡大小\"],\n        left: \"center\"\n    },\n    xAxis: [{\n        name: data.axis.xAxis,\n        type: \"value\",\n        zlevel: 3,\n        scale: true,\n        axisLabel: {\n            formatter: \"{value} %\"\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            symbol: [\"none\", \"arrow\"]\n        },\n        min: Math.floor(minValue / 5) * 6, // math.floor() 向下取整\n        max: Math.ceil(maxValue / 5) * 6 //  math.ceil() 向上取整\n    }],\n    yAxis: [{\n        name: data.axis.yAxis,\n        type: \"value\",\n        scale: true,\n        zlevel: 3,\n        axisLabel: {\n            formatter: \"{value} %\"\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            symbol: [\"none\", \"arrow\"]\n        },\n        min: Math.floor(minValue / 5) * 6, // math.floor() 向下取整\n        max: Math.ceil(maxValue / 5) * 6 //  math.ceil() 向上取整\n    }],\n    series: [{\n        name: \"气泡大小\",\n        type: \"scatter\",\n        data: seriesData,\n        zlevel: 2,\n        label: {\n            normal: {\n                show: true,\n                formatter: function(param) {\n                    return param.name;\n                },\n                position: \"top\"\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: function(param) {\n                    if (param.name === \"0\") {\n                        return \"red\";\n                    } else if (param.name === \"1\") {\n                        return \"#16A857\";\n                    } else if (param.name === \"2\") {\n                        return \"#F57C35\";\n                    } else {\n                        return \"#83B4D5\";\n                    }\n                }\n            }\n        },\n        markArea: {\n            zlevel: 0,\n            silent: true,\n            data: [\n                [{\n                        name: \"1\",\n                        itemStyle: {\n                            color: \"#e0f8ed\"\n                        },\n                        label: {\n                            show: true,\n                            position: [\"30%\", \"50%\"],\n                            fontStyle: \"normal\",\n                            color: \"#66cc66\",\n                            fontSize: 14\n                        },\n                        coord: [xValue, yValue]\n                    },\n                    {\n                        coord: [Number.MAX_VALUE, 0]\n                    }\n                ],\n                [{\n                        name: \"2\",\n                        itemStyle: {\n                            color: \"#fef0e0\"\n                        },\n                        label: {\n                            show: true,\n                            position: [\"10%\", \"50%\"],\n                            fontStyle: \"normal\",\n                            color: \"#66cc66\",\n                            fontSize: 14\n                        },\n                        xAxis: 0,\n                        yAxis: 0\n                        // coord:[0,0]\n                    },\n                    {\n                        xAxis: xValue,\n                        yAxis: yValue\n                        // coord: [avg.churnAvg, avg.developAvg]\n                    }\n                ],\n                [{\n                        name: \"3\",\n                        itemStyle: {\n                            color: \"#ffebe9\"\n                        },\n                        label: {\n                            show: true,\n                            position: [\"30%\", \"10%\"],\n                            fontStyle: \"normal\",\n                            color: \"#66cc66\",\n                            fontSize: 14\n                        },\n                        xAxis: xValue,\n                        yAxis: yValue\n                        // coord: [avg.churnAvg, avg.developAvg]\n                    },\n                    {\n                        xAxis: Number.MAX_VALUE,\n                        yAxis: Number.MAX_VALUE\n                        // coord:[Number.MAX_VALUE,Number.MAX_VALUE]\n                    }\n                ],\n                [{\n                        name: \"4\",\n                        itemStyle: {\n                            color: \"#eee5fe\"\n                        },\n                        label: {\n                            show: true,\n                            position: [\"10%\", \"10%\"],\n                            fontStyle: \"normal\",\n                            color: \"#66cc66\",\n                            fontSize: 14\n                        },\n                        xAxis: 0,\n                        yAxis: Number.MAX_VALUE\n                        // coord:[0,Number.MAX_VALUE]\n                    },\n                    {\n                        xAxis: xValue,\n                        yAxis: yValue\n                        // coord: [avg.churnAvg, avg.developAvg]\n                    }\n                ]\n            ]\n        },\n        markLine: {\n            zlevel: 0,\n            symbol: [\"none\", \"none\"],\n            emphasis: {\n                show: false\n            },\n            lineStyle: {\n                normal: {\n                    color: \"#CDCFCA\",\n                    type: \"solid\"\n                }\n            },\n            data: [{\n                    xAxis: xValue\n                },\n                {\n                    yAxis: yValue\n                },\n                [{\n                        lineStyle: {\n                            type: \"dashed\"\n                        },\n                        coord: [\n                            Math.floor(minValue / 5) * 6,\n                            Math.floor(minValue / 5) * 6\n                        ]\n                    },\n                    {\n                        symbol: \"arrow\",\n                        coord: [\n                            Math.ceil(maxValue / 5) * 6,\n                            Math.ceil(maxValue / 5) * 6\n                        ]\n                    }\n                ]\n            ]\n        }\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-2167902842","theme":"","layout":"","viewCount":384,"userName":"free梦伽蓝","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xyMvA0bbvw.png?v=1559978687336","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","markArea","markLine","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"free梦伽蓝"}}