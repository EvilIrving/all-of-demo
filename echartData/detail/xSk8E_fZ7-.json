{"status":0,"data":{"cid":"xSk8E_fZ7-","authorUid":"bd-1864516252","authorUserName":"W还没睡醒","title":"仪表盘","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2017-06-16T08:34:54.000Z","lastUpdateTime":"2017-06-16T08:34:54.000Z","auth":2,"uid":"bd-1864516252","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"3.8.0","versionCreateTime":"2018-06-10T07:02:10.000Z","code":"var dataAll = {\n    x_data: ['08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00'],\n    bar_data: [{\n            type: '加工线',\n            UPH: [70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70],\n            lines: [{\n                name: '加工线1',\n                data: [11, 23, 45, 66, 78, 44, 21, 43, 55, 67, 98, 74]\n            }, {\n                name: '加工线2',\n                data: [21, 43, 55, 67, 98, 74, 11, 23, 45, 66, 78, 44]\n            }]\n        },\n        {\n            type: '组装线',\n            UPH: [80, 80, 80, 80, 80, 80,80, 80, 80, 80, 80, 80],\n            lines: [{\n                name: '组装线1',\n                data: [11, 23, 45, 66, 78, 44,11, 23, 45, 66, 78, 44]\n            }, {\n                name: '组装线2',\n                data: [21, 43, 55, 67, 98, 74,21, 43, 55, 67, 98, 74]\n            }]\n        },\n        {\n            type: '充电桩线',\n            UPH: [90, 90, 90, 90, 90, 90,90, 90, 90, 90, 90, 90],\n            lines: [{\n                name: '充电桩线1',\n                data: [11, 23, 45, 66, 78, 44,11, 23, 45, 66, 78, 44]\n            }, {\n                name: '充电桩线2',\n                data: [21, 43, 55, 67, 98, 74,21, 43, 55, 67, 98, 74]\n            }]\n        }\n    ]\n};\n\nvar showType = 'ba';\nif (showType === 'bar') {\n    var makexAxis = function() {\n        var Axis = [];\n        dataAll.bar_data.forEach(function(item, index) {\n            Axis.push({\n                axisLabel: {\n                    interval: 0,\n                    color: '#555'\n                },\n                gridIndex: index,\n                data: dataAll.x_data\n            });\n        });\n        return Axis;\n    };\n\n    var makeyAxis = function() {\n        var Axis = [];\n        dataAll.bar_data.forEach(function(item, index) {\n            Axis.push({\n                gridIndex: index,\n                splitLine: {\n                    show: false,\n                },\n                axisLabel: {\n                    color: '#777'\n                },\n                max: function(v) {\n                    return v.max + 10;\n                }\n            });\n        });\n        return Axis;\n    };\n\n    var makeseries = function() {\n        var series = [];\n        dataAll.bar_data.forEach(function(item, index) {\n            series.push({\n                name: 'UPH',\n                showSymbol: false,\n                data: item.UPH,\n                xAxisIndex: index,\n                yAxisIndex: index,\n                type: 'line'\n            });\n            item.lines.forEach(function(line, i) {\n                series.push({\n                    name: line.name,\n                    label: {\n                        position: 'top',\n                        show: true,\n                        color: '#333'\n                    },\n                    data: line.data,\n                    xAxisIndex: index,\n                    yAxisIndex: index,\n                    type: 'bar'\n                });\n            });\n        })\n\n        return series;\n    };\n\n    option = {\n        title: [{\n            top: 0,\n            textStyle: {\n                fontSize: 14,\n            },\n            textAlign: 'left',\n            text: '加工线生产情况'\n        },\n        {\n            top: '31%',\n            textStyle: {\n                fontSize: 14,\n            },\n            textAlign: 'left',\n            text: '组装线生产情况'\n        },\n        {\n            top: '64%',\n            textStyle: {\n                fontSize: 14,\n            },\n            textAlign: 'left',\n            text: '组装线生产情况'\n        }],\n        color: ['#c23531', '#6ca1ff', '#4db64d', '#6ca1ff', '#4db64d', '#6ca1ff', '#4db64d'],\n        legend: [{\n            top: '3%',\n            data: ['UPH', '加工线1', '加工线2']\n        }, {\n            top: '33%',\n            data: ['UPH', '组装线1', '组装线2']\n        }, {\n            top: '66%',\n            data: ['UPH', '充电桩线1', '充电桩线2']\n\n        }],\n        grid: [{\n                top: '5%',\n                left: '5%',\n                right: '3%',\n                height: '22%'\n            },\n            {\n                top: '35%',\n                left: '5%',\n                right: '3%',\n                height: '22%'\n            },\n            {\n                top: '68%',\n                left: '5%',\n                right: '3%',\n                height: '22%'\n            }\n        ],\n        xAxis: makexAxis(),\n        yAxis: makeyAxis(),\n        series: makeseries()\n    };\n} else {\n    \n    var dataAll = [\n        [\"加工线1良品率\", 99],\n        [\"加工线1良品率\", 99],\n        [\"加工线1良品率\", 99],\n        [\"加工线1良品率\", 99],\n        [\"加工线1良品率\", 99],\n        [\"加工线1良品率\", 99]\n    ];\n    var position = [\n        ['16.6%', '25%'],\n        ['16.6%', '75%'],\n        ['49.8%', '25%'],\n        ['49.8%', '75%'],\n        ['83%', '25%'],\n        ['83%', '75%']\n    ];\n    var getStyle = function(value) {\n        if (value <= 30) {\n            return {\n                splitNumber: 3, //刻度数量\n                min: 0,\n                max: 30,\n                startAngle: 225,\n                endAngle: 144,\n                color: [\n                    [1, '#FF0000']\n                ]\n            };\n        } else if (value >= 90) {\n            return {\n                splitNumber: 1, //刻度数量\n                min: 90,\n                max: 100,\n                startAngle: -18,\n                endAngle: -45,\n                color: [\n                    [1, '#60b044']\n                ]\n            };\n        } else {\n            return {\n                splitNumber: 6, //刻度数量\n                min: 30,\n                max: 90,\n                startAngle: 144,\n                endAngle: -18,\n                color: [\n                    [1, '#ffce00']\n                ]\n            };\n        }\n    };\n    var makeSeries = function() {\n        var series = [];\n        dataAll.forEach(function(item, index) {\n            let style = getStyle(item[1]);\n            series.push({\n                name: item[0],\n                left: 0,\n                center: position[index],\n                type: 'gauge',\n                splitNumber: 10, //刻度数量\n                min: 0,\n                max: 100,\n                radius: '33.3%', //图表尺寸\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        width: 2,\n                        shadowBlur: 0,\n                        color: [\n                            [1, '#24273e']\n                        ]\n                    }\n                },\n                axisTick: {\n                    show: true,\n                    lineStyle: {\n                        color: '#7887ae',\n                        width: 1\n                    },\n                    length: 8,\n                    splitNumber: 5\n                },\n                splitLine: {\n                    show: true,\n                    length: 12,\n                    lineStyle: {\n                        color: '#7887ae',\n                    }\n                },\n                axisLabel: {\n                    distance: 2,\n                    textStyle: {\n                        color: \"#7887ae\",\n                        fontSize: \"14\",\n                    },\n                    formatter: function(e) {\n                        switch (e + \"\") {\n                            case \"0\":\n                                return \"0%\";\n                            default:\n                                return e;\n                        }\n                    }\n\n                },\n                pointer: { //仪表盘指针\n                    show: 0\n                },\n                title:{\n                   offsetCenter:[0, '90%']  \n                },\n                detail: {\n                    show: false\n                },\n                data: [{\n                    name: item[0],\n                    value: item[1]\n                }]\n            });\n            series.push({\n                name: item[0],\n                type: 'gauge',\n                center: position[index],\n                splitNumber: style.splitNumber, //刻度数量\n                min: style.min,\n                max: style.max,\n                startAngle: style.startAngle,\n                endAngle: style.endAngle,\n                radius: '33.3%', //图表尺寸\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        width: 2,\n                        shadowBlur: 0,\n                        color: style.color\n                    }\n                },\n                axisTick: {\n                    show: true,\n                    lineStyle: {\n                        color: 'auto',\n                        width: 1\n                    },\n                    length: 8,\n                    splitNumber: 5\n                },\n                splitLine: {\n                    show: true,\n                    length: 12,\n                    lineStyle: {\n                        color: 'auto',\n                    }\n                },\n                axisLabel: {\n                    show: false\n                },\n                pointer: { //仪表盘指针\n                    show: 1,\n                    length: '70%',\n                    width: 2\n                },\n                detail: {\n                    borderColor: '#ccc',\n                    shadowColor: '#ccc', //默认透明\n                    shadowBlur: 5,\n                    offsetCenter: [0, '30%'], // x, y，单位px\n                    textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE\n                        fontWeight: 'bolder',\n                        color: '#333',\n                        fontSize: 35,\n                    },\n                    formatter: '{value}%'\n                },\n                data: [{\n                    name: \"\",\n                    value: item[1]\n                }]\n            });\n\n        });\n        return series;\n    }\n    var list = makeSeries();\n    option = {\n        backgroundColor: '#fff',\n\n        tooltip: {\n            formatter: \"{a} <br/>{b} : {c}%\"\n        },\n        series: list\n    };\n}","html":"","externalScripts":"","updaterUID":"bd-1864516252","theme":"","layout":"","viewCount":2783,"userName":"W还没睡醒","commentCount":0,"starCount":12,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSk8E_fZ7-.png?v=1528614130840","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","tooltip"],"customTags":[],"updaterUserName":"W还没睡醒"}}