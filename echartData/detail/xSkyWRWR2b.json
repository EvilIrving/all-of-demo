{"status":0,"data":{"cid":"xSkyWRWR2b","authorUid":"bd-3877834531","authorUserName":"f102102","title":"排序柱状图","description":"点击图例可对柱状图进行排序","latestVersion":2,"alwaysLatest":1,"createTime":"2017-10-13T09:57:10.000Z","lastUpdateTime":"2017-10-13T09:57:10.000Z","auth":2,"uid":"bd-3877834531","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.7.2","versionCreateTime":"2017-10-13T09:59:29.000Z","code":"var data = [{\n    name: '课题组1',\n    clas: 100,\n    member: 10\n}, {\n    name: '课题组2',\n    clas: 360.2,\n    member: 40.9\n}, {\n    name: '课题组3',\n    clas: 173.3,\n    member: 30.0\n}, {\n    name: '课题组4',\n    clas: 384.5,\n    member: 500\n}];\n\nvar nam = [];\nvar clas = [];\nvar member = [];\n\n$.each(data, function(i, v) {\n    nam.push(v.name);\n    clas.push(v.clas);\n    member.push(v.member);\n});\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'cross',\n            crossStyle: {\n                color: '#999'\n            }\n        }\n    },\n    legend: {\n        data: ['member', 'clas']\n    },\n    xAxis: [{\n        type: 'category',\n        data: nam,\n        axisPointer: {\n            type: 'shadow'\n        }\n    }],\n    yAxis: [{\n        type: 'value',\n        name: 'member',\n        min: 0,\n        max: Math.max.apply(null, member) > Math.max.apply(null, clas) ? Math.max.apply(null, member) : Math.max.apply(null, clas)\n\n    }, {\n        type: 'value',\n        name: 'clas',\n        min: 0,\n        max: Math.max.apply(null, clas),\n        splitLine: {\n            show: false\n        }\n    }],\n    series: [{\n        name: 'member',\n        type: 'bar',\n        data: member\n    }, {\n        name: 'clas',\n        type: 'bar',\n        data: clas\n    }]\n};\nmyChart.on('legendselectchanged', function(params) {\n    console.log(params.selected)\n    console.log(params.selected.member && params.selected.clas)\n    if (params.selected.member && params.selected.clas) {\n        var opt = myChart.getOption()\n        opt.xAxis[0].data = nam;\n        opt.series[0].data = member;\n        opt.series[1].data = clas;\n        myChart.setOption(opt);\n    } else if (params.selected.member) { //对member排序\n        var opt = myChart.getOption()\n        opt.xAxis[0].data = sortData(data, 'member').name;\n        opt.series[0].data = sortData(data, 'member').member;\n        myChart.setOption(opt);\n    } else if (params.selected.clas) {\n        var opt = myChart.getOption()\n        opt.xAxis[0].data = sortData(data, 'clas').name;\n        opt.series[1].data = sortData(data, 'clas').clas;\n        myChart.setOption(opt);\n    }\n});\n\n\nfunction sortData(data, type) {\n    var obj = {}\n    obj['name'] = [];\n    obj[type] = [];\n    data.sort(function(a, b) {\n        return a[type] - b[type];\n    })\n\n    $.each(data, function(i, v) {\n        obj['name'].push(v.name);\n        obj[type].push(v[type])\n    });\n\n    return obj;\n}","html":"","externalScripts":"","updaterUID":"bd-3877834531","theme":"","layout":"","viewCount":3080,"userName":"f102102","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkyWRWR2b.png?v=1507888769645","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"f102102"}}