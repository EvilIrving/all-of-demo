{"status":0,"data":{"cid":"xlIpIGxj-","authorUid":"bd-3307394678","authorUserName":"望***t","title":"院新型冠状病毒肺炎疫情防控工作实时情况","description":"\n苏地测职工分布图\n，\n苏地测职工全国各市人数情况","latestVersion":4,"alwaysLatest":1,"createTime":"2020-01-31T14:18:06.000Z","lastUpdateTime":"2020-01-31T14:18:06.000Z","auth":2,"uid":"bd-3307394678","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-31T15:17:22.000Z","code":"        var mapName = \"china\";\r\n        var mapTitle = \"院新型冠状病毒肺炎疫情防控工作实时情况\";\r\n        var subTitle = \"\\n苏地测职工分布图\\n，\\n苏地测职工全国各市人数情况\";\r\n        var title_Color = \"rgb(55, 75, 113)\";\r\n        var title_FontFamily = \"等线\";\r\n        var mapTitle_FontSize = 18;\r\n        var subTitle_FontSize = 15;\r\n\r\n        var data = [\r\n                {name:\"南京\",value:82},\r\n                {name:\"九江\",value:68},\r\n                {name:\"上海\",value:66},\r\n                {name:\"中山\",value:64},\r\n                {name:\"临沂\",value:62},\r\n                {name:\"丹东\",value:60},\r\n                {name:\"北京\",value:58},\r\n                {name:\"南通\",value:56},\r\n                {name:\"合肥\",value:54},\r\n                {name:\"唐山\",value:52},\r\n                {name:\"天津\",value:50},\r\n                {name:\"宁波\",value:48},\r\n                {name:\"宿迁\",value:46},\r\n                {name:\"常州\",value:44},\r\n                {name:\"延安\",value:42},\r\n                {name:\"徐州\",value:40},\r\n                {name:\"成都\",value:38},\r\n                {name:\"扬州\",value:36},\r\n                {name:\"无锡\",value:34},\r\n                {name:\"武汉\",value:32},\r\n                {name:\"泉州\",value:30},\r\n                {name:\"泰州\",value:28},\r\n                {name:\"淮安\",value:26},\r\n                {name:\"菏泽\",value:24},\r\n                {name:\"西宁\",value:22},\r\n                {name:\"西安\",value:20},\r\n                {name:\"郑州\",value:18},\r\n                {name:\"重庆\",value:16},\r\n                {name:\"镇江\",value:14},\r\n                {name:\"长沙\",value:12},\r\n                {name:\"青岛\",value:10},\r\n        ];        \r\n        var geoCoordMap = {\r\n            '南京': [118.8062, 31.9208],\r\n            '九江': [116.00, 29.70],\r\n            '上海': [121.4648, 31.2891],\r\n            '中山': [113.4229, 22.478],\r\n            '临沂': [118.3118, 35.2936],\r\n            '丹东': [124.541, 40.4242],\r\n            '北京': [116.4551, 40.2539],\r\n            '南通': [121.1023, 32.1625],\r\n            '合肥': [117.29, 32.0581],\r\n            '唐山': [118.4766, 39.6826],\r\n            '天津': [117.4219, 39.4189],\r\n            '宁波': [121.5967, 29.6466],\r\n            '宿迁': [118.5535, 33.7775],\r\n            '常州': [119.4543, 31.5582],\r\n            '延安': [109.1052, 36.4252],\r\n            '徐州': [117.5208, 34.3268],\r\n            '成都': [103.9526, 30.7617],\r\n            '扬州': [119.4653, 32.8162],\r\n            '无锡': [120.3442, 31.5527],\r\n            '武汉': [114.3896, 30.6628],\r\n            '泉州': [118.3228, 25.1147],\r\n            '泰州': [120.0586, 32.5525],\r\n            '淮安': [118.927, 33.4039],\r\n            '菏泽': [115.6201, 35.2057],\r\n            '西宁': [101.4038, 36.8207],\r\n            '西安': [109.1162, 34.2004],\r\n            '郑州': [113.4668, 34.6234],\r\n            '重庆': [107.7539, 30.1904],\r\n            '镇江': [119.4763, 31.9702],\r\n            '长沙': [113.0823, 28.2568],\r\n            '青岛': [120.4651, 36.3373]\r\n        };\r\n        var toolTipData = [ \r\n            {name:\"南京\",value:[{name:\"人数\",value:82},{name:\"占比\",value:\"6.55%\"}]},\r\n            {name:\"九江\",value:[{name:\"人数\",value:68},{name:\"占比\",value:\"5.43%\"}]}, \r\n            {name:\"上海\",value:[{name:\"人数\",value:66},{name:\"占比\",value:\"5.27%\"}]}, \r\n            {name:\"中山\",value:[{name:\"人数\",value:64},{name:\"占比\",value:\"5.11%\"}]}, \r\n            {name:\"临沂\",value:[{name:\"人数\",value:62},{name:\"占比\",value:\"4.95%\"}]}, \r\n            {name:\"丹东\",value:[{name:\"人数\",value:60},{name:\"占比\",value:\"4.79%\"}]},\r\n            {name:\"北京\",value:[{name:\"人数\",value:58},{name:\"占比\",value:\"4.63%\"}]}, \r\n            {name:\"南通\",value:[{name:\"人数\",value:56},{name:\"占比\",value:\"4.47%\"}]}, \r\n            {name:\"合肥\",value:[{name:\"人数\",value:54},{name:\"占比\",value:\"4.31%\"}]}, \r\n            {name:\"唐山\",value:[{name:\"人数\",value:52},{name:\"占比\",value:\"4.15%\"}]},\r\n            {name:\"天津\",value:[{name:\"人数\",value:50},{name:\"占比\",value:\"3.99%\"}]},\r\n            {name:\"宁波\",value:[{name:\"人数\",value:48},{name:\"占比\",value:\"3.83%\"}]}, \r\n            {name:\"宿迁\",value:[{name:\"人数\",value:46},{name:\"占比\",value:\"3.67%\"}]}, \r\n            {name:\"常州\",value:[{name:\"人数\",value:44},{name:\"占比\",value:\"3.51%\"}]}, \r\n            {name:\"延安\",value:[{name:\"人数\",value:42},{name:\"占比\",value:\"3.35%\"}]},\r\n            {name:\"徐州\",value:[{name:\"人数\",value:40},{name:\"占比\",value:\"3.19%\"}]},\r\n            {name:\"成都\",value:[{name:\"人数\",value:38},{name:\"占比\",value:\"3.04%\"}]}, \r\n            {name:\"扬州\",value:[{name:\"人数\",value:36},{name:\"占比\",value:\"2.88%\"}]}, \r\n            {name:\"无锡\",value:[{name:\"人数\",value:34},{name:\"占比\",value:\"2.72%\"}]}, \r\n            {name:\"武汉\",value:[{name:\"人数\",value:32},{name:\"占比\",value:\"2.56%\"}]},\r\n            {name:\"泉州\",value:[{name:\"人数\",value:30},{name:\"占比\",value:\"2.40%\"}]},\r\n            {name:\"泰州\",value:[{name:\"人数\",value:28},{name:\"占比\",value:\"2.24%\"}]}, \r\n            {name:\"淮安\",value:[{name:\"人数\",value:26},{name:\"占比\",value:\"2.08%\"}]}, \r\n            {name:\"菏泽\",value:[{name:\"人数\",value:24},{name:\"占比\",value:\"1.92%\"}]}, \r\n            {name:\"西宁\",value:[{name:\"人数\",value:22},{name:\"占比\",value:\"1.76%\"}]},\r\n            {name:\"西安\",value:[{name:\"人数\",value:20},{name:\"占比\",value:\"1.60%\"}]},\r\n            {name:\"郑州\",value:[{name:\"人数\",value:18},{name:\"占比\",value:\"1.44%\"}]}, \r\n            {name:\"重庆\",value:[{name:\"人数\",value:16},{name:\"占比\",value:\"1.28%\"}]}, \r\n            {name:\"镇江\",value:[{name:\"人数\",value:14},{name:\"占比\",value:\"1.12%\"}]}, \r\n            {name:\"长沙\",value:[{name:\"人数\",value:12},{name:\"占比\",value:\"0.96%\"}]},  \r\n            {name:\"青岛\",value:[{name:\"人数\",value:10},{name:\"占比\",value:\"0.80%\"}]}      \r\n        ];\r\n\r\n        /*获取地图数据*/\r\n        myChart.showLoading();\r\n        var mapFeatures = echarts.getMap(mapName).geoJson.features;\r\n        myChart.hideLoading();\r\n        mapFeatures.forEach(function(v) {\r\n            // 地区名称\r\n            var name = v.properties.name;\r\n            // 地区经纬度\r\n            geoCoordMap[name] = v.properties.cp;\r\n\r\n        });\r\n\r\n        //console.log(geoCoordMap)\r\n        //console.log(data)\r\n        //console.log(toolTipData)\r\n        var max = 480,\r\n            min = 9; // todo \r\n        var maxSize4Pin = 100,\r\n            minSize4Pin = 20;\r\n\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value),\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        //console.log(convertData(data))\r\n        option = {\r\n            title: {\r\n                text: mapTitle,\r\n                subtext: subTitle,\r\n                x: 'center',\r\n                textStyle: {\r\n                    color: title_Color,\r\n                    fontFamily: title_FontFamily,\r\n                    fontSize: mapTitle_FontSize\r\n                },\r\n                subtextStyle:{\r\n                    fontSize:subTitle_FontSize,\r\n                    fontFamily:title_FontFamily\r\n                }\r\n            },\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: function(params) {\r\n                    //console.log(typeof(params.value)[2])\r\n                    if (typeof(params.value)[2] == \"undefined\") {\r\n                        var toolTiphtml = ''\r\n                        for(var i = 0;i<toolTipData.length;i++){\r\n                            if(params.name==toolTipData[i].name){\r\n                                toolTiphtml += toolTipData[i].name+'：<br>'\r\n                                for(var j = 0;j<toolTipData[i].value.length;j++){\r\n                                    toolTiphtml+=toolTipData[i].value[j].name+'：'+toolTipData[i].value[j].value+\"<br>\"\r\n                                }\r\n                            }\r\n                        }\r\n                        //console.log(toolTiphtml)\r\n                        //console.log(convertData(data))\r\n                        return toolTiphtml;\r\n                    } else {\r\n                        var toolTiphtml = ''\r\n                        for(var i = 0;i<toolTipData.length;i++){\r\n                            if(params.name==toolTipData[i].name){\r\n                                toolTiphtml += toolTipData[i].name+'：<br>'\r\n                                for(var j = 0;j<toolTipData[i].value.length;j++){\r\n                                    toolTiphtml+=toolTipData[i].value[j].name+'：'+toolTipData[i].value[j].value+\"<br>\"\r\n                                }\r\n                            }\r\n                        }\r\n                        //console.log(toolTiphtml)\r\n                        // console.log(convertData(data))\r\n                        return toolTiphtml;\r\n                    }\r\n                }\r\n            },\r\n            // visualMap: {\r\n            //     show: true,\r\n            //     min: 0,\r\n            //     max: 200,\r\n            //     left: 'left',\r\n            //     top: 'bottom',\r\n            //     text: ['高', '低'], // 文本，默认为数值文本\r\n            //     calculable: true,\r\n            //     seriesIndex: [1],\r\n            //     inRange: {\r\n            //         color: ['#A5CC82','#00467F'] // 蓝绿 ['#00467F','#A5CC82']\r\n            //     }\r\n            // },\r\n            geo: {\r\n                show: true,\r\n                map: mapName,\r\n                label: {\r\n                    normal: {\r\n                        show: false\r\n                    },\r\n                    emphasis: {\r\n                        show: false,\r\n                    }\r\n                },\r\n                roam: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        areaColor: '#031525',  //#031525\r\n                        borderColor: '#3B5077',//#3B5077\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#2B91B7', //'#2B91B7'\r\n                    }\r\n                }\r\n            },\r\n            series: [\r\n                {\r\n                    name: '散点',\r\n                    type: 'scatter',\r\n                    coordinateSystem: 'geo',\r\n                    data: convertData(data),\r\n                    symbolSize: function(val) {\r\n                        return val[2] / 10;\r\n                    },\r\n                    label: {\r\n                        normal: {\r\n                            formatter: '{b}',\r\n                            //formatter: '{@[2]}',\r\n                            position: 'right',\r\n                            show: true\r\n                        },\r\n                        emphasis: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: '#05C3F9'//#409EFF  #05C3F9\r\n                        }\r\n                    }\r\n                },\r\n                \r\n                {\r\n                    type: 'map',\r\n                    map: mapName,\r\n                    geoIndex: 0,\r\n                    aspectScale: 0.75, //长宽比\r\n                    showLegendSymbol: false, // 存在legend时显示\r\n                    label: {\r\n                        normal: {\r\n                            show: true\r\n                        },\r\n                        emphasis: {\r\n                            show: false,\r\n                            textStyle: {\r\n                                color: '#fff'\r\n                            }\r\n                        }\r\n                    },\r\n                    roam: true,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            areaColor: '#031525',\r\n                            borderColor: '#3B5077',\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#2B91B7'\r\n                        }\r\n                    },\r\n                    animation: false,\r\n                    data: data\r\n                },\r\n                {\r\n                    name: 'Top 5',\r\n                    type: 'effectScatter',\r\n                    coordinateSystem: 'geo',\r\n                    data: convertData(data.sort(function(a, b) {\r\n                        return b.value - a.value;\r\n                    }).slice(0, 5)),\r\n                    symbolSize: function(val) {\r\n                        return val[2] / 5;\r\n                    },\r\n                    showEffectOn: 'render',\r\n                    rippleEffect: {\r\n                        brushType: 'stroke'\r\n                    },\r\n                    hoverAnimation: true,\r\n                    label: {\r\n                        normal: {\r\n                            formatter: '{b}',\r\n                            position: 'right',\r\n                            show: true\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'yellow',\r\n                            shadowBlur: 10,\r\n                            shadowColor: 'yellow'\r\n                        }\r\n                    },\r\n                    zlevel: 1\r\n                },\r\n                {\r\n                    name: '点',\r\n                    type: 'scatter',\r\n                    coordinateSystem: 'geo',\r\n                    symbol: 'pin', //气泡\r\n                    symbolSize: function(val) {\r\n                        var a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n                        var b = minSize4Pin - a * min;\r\n                        b = maxSize4Pin - a * max;\r\n                        console.log(a, b)\r\n                        return a * val[2] + b*1.2;\r\n                    },\r\n                    label: {\r\n                        normal: {\r\n                            //formatter: '{b}',\r\n                            //position: 'right',\r\n                            formatter: '{@[2]}',                            \r\n                            show: true,\r\n                            textStyle: {\r\n                                color: '#fff',\r\n                                fontSize: 9,\r\n                            }\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: '#F62157', //标志颜色\r\n                        }\r\n                    },\r\n                    zlevel: 6,\r\n                    data: convertData(data),\r\n                },\r\n            ]\r\n        };\r\n        myChart.setOption(option);","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3307394678","theme":"","layout":"","viewCount":1081,"userName":"望***t","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xlIpIGxj-.png?v=1580483842789","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"望***t"}}