{"status":0,"data":{"cid":"xEDcYUNxOK","authorUid":"bd-2178086175","authorUserName":"Y***6","title":"关系图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-19T07:11:54.000Z","lastUpdateTime":"2021-07-19T07:11:54.000Z","auth":2,"uid":"bd-2178086175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-19T07:11:54.000Z","code":"var myGraphData = [\n    { parentNode: '不显示', childNodes: ['上游', '中游', '下游'] },\n    {\n        parentNode: '上游',\n        childNodes: [\n            '优客工场北京创业投资有限公司',\n            '北京云动数字媒体技术有限公司',\n            '北京星云极客科技孵化器有限公司',\n            '小微律政(北京)管理咨询有限公司',\n        ],\n    },\n    { parentNode: '中游', childNodes: ['北京数码大方科技股份有限公司', '安徽皖通科技股份有限公司'] },\n    { parentNode: '下游', childNodes: ['苏州开眼数据技术股份有限公司', '北京香橙互动网络科技有限公司'] },\n];\nlet color = ['#FF605C', '#2394FD', '#2FD5C0'];\nlet sourceId = '';\n\nfunction showBr(s) {\n    var re = '';\n    var length = s.length;\n    for (var i = 0, j = 1; i < length; i++, j++) {\n        if (j && j % 6 == 0) {\n            re += '\\n';\n        } else {\n            re += s[i];\n        }\n    }\n    return re;\n}\n\nfunction setNodeData(arr, m, n, listdata, font = false) {\n    var size = 73;\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i] === '不显示') {\n            sourceId = m;\n        }\n        console.log('n', n);\n        listdata.push({\n            id: m++,\n            category: n,\n            name: showBr(arr[i]),\n            symbolSize: arr[i] === '不显示' ? 0 : size,\n            draggable: 'true',\n            itemStyle: {\n                normal: {\n                    color: n === 1 ? font : `${font}20`,\n                },\n            },\n           \n            label: {\n                normal: {\n                    textStyle: {\n                        color: n === 1 ? '#fff' : font ? font : 'transparent',\n                        fontSize: n === 1 ?18 :12\n                    },\n                },\n            },\n        });\n    }\n}\n\nfunction setLinkData(sourceList, m, links) {\n    for (var i = 0; i < sourceList.length; i++) {\n        links.push({\n            source: m,\n            target: sourceList[i],\n            lineStyle: {\n                normal: {\n                    color: sourceId === m ? 'transparent' : '#eee',\n                },\n            },\n        });\n    }\n}\n\nvar listdata = [];\nvar linksdata = [];\n\nvar nodeData = myGraphData;\nvar m = 0;\nvar source = [];\nfor (var i = 1; i < nodeData.length; i++) {\n    let num = i - 1;\n    var node = nodeData[i].parentNode;\n    var tx = [node];\n    setNodeData(tx, m, 1, listdata, color[num]);\n    source.push(m);\n\n    var Data = nodeData[i].childNodes;\n\n    setNodeData(Data, m + 1, 2, listdata, color[num]);\n\n    var sourceList = [];\n    for (var n = m + 1; n < m + Data.length + 1; n++) {\n        sourceList.push(n);\n    }\n    setLinkData(sourceList, m, linksdata);\n    m = m + Data.length + 1;\n}\n\nvar tx7 = [];\ntx7.push(nodeData[0].parentNode);\nsetNodeData(tx7, m, 0, listdata);\nsetLinkData(source, m, linksdata);\n\noption = {\n    tooltip: {\n        formatter: '{b}',\n    },\n    backgroundColor: '#FFFFFF',\n    animationDuration: 0,\n    animationEasingUpdate: 'quinticInOut',\n    series: [\n        {\n            name: '知识图谱',\n            type: 'graph',\n            layout: 'force',\n            edgeSymbol: ['', 'arrow'],\n\n            force: {\n                repulsion: 1000,\n                gravity: 0.4,\n                edgeLength:110,\n                layoutAnimation: true,\n            },\n            data: listdata,\n            links: linksdata,\n            categories: [\n                {\n                    name: '父节点',\n                    symbol: 'rect',\n                    label: {},\n                },\n                {\n                    name: '层级二',\n                    symbol: 'circle',\n                },\n                {\n                    name: '层级三',\n                    symbol: 'circle',\n                },\n            ],\n            roam: true,\n            label: {\n                normal: {\n                    show: true,\n                },\n            },\n            lineStyle: {\n                normal: {\n                    opacity: 0.9,\n                    width: 1.5,\n                    curveness: 0,\n                },\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-2178086175","theme":"","layout":"","viewCount":0,"userName":"Y***6","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xEDcYUNxOK.png?v=1626678714794","isCustomThumbnail":0,"builtinTags":["category-work","series-graph","tooltip"],"customTags":[],"updaterUserName":"Y***6"}}