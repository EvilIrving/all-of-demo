{"status":0,"data":{"cid":"xZvc28w-TH","authorUid":"obd-oMCbX_qMS_vFhBNg3XY6h21eupJYr2m","authorUserName":"碧***水","title":"柱状图叠加效果百分比","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-11-10T06:01:58.000Z","lastUpdateTime":"2021-11-10T06:36:59.000Z","auth":2,"uid":"obd-oMCbX_qMS_vFhBNg3XY6h21eupJYr2m","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-10T06:36:59.000Z","code":"// 数据处理\n// var data = [\n//     {\n//         name: '苹果',\n//         value: 0,\n//     },\n//     {\n//         name: '梨子',\n//         value: 0,\n//     },\n//     {\n//         name: '菠萝',\n//         value: 0,\n//     },\n// ];\nvar data = [\n    {\n        name: '苹果',\n        value: 30,\n    },\n    {\n        name: '梨子',\n        value: 33,\n    },\n    {\n        name: '菠萝',\n        value: 37,\n    },\n];\n\nlet apple, pear, pineapple;\nif (data.every((i) => i.value === 0)) {\n    apple = 0;\n    pear = 0;\n    pineapple = 0;\n} else {\n    // 柱状图叠加效果\n    // 防止后端返回的数据超过100%，页面显示异常\n    apple = 100 - data[1].value - data[2].value;\n\n    pear = Number(apple) + data[1].value;\n\n    pineapple = Number(apple) + data[1].value + data[2].value;\n}\n\n\noption = {\n    title: {\n        show: true,\n        text: '柱状图叠加效果百分比',\n        left: 'center',\n        top: '40%',\n        textStyle: {\n            color: '#00D5FF',\n            fontSize: 16,\n        },\n        // padding:  [80, 0, 0, 0]\n    },\n    // 图例组件\n    legend: {\n        bottom: '40%',\n        icon: 'circle',\n        itemWidth: 11, //修改icon图形大小\n        itemHeight: 11, //修改icon图形大小\n        itemGap: 65,\n        textStyle: {\n            // 文本样式\n            fontSize: 12,\n            color: '#FFFFFF'\n            // color: '#606266',\n        },\n        data: ['苹果', '梨子', '菠萝'], // 图例的数据数组\n        formatter: function (name) {\n            let str = '';\n            for (let i = 0, l = data.length; i < l; i++) {\n                if (data[i].name == name) {\n                    str = name + ' ' + data[i].value;\n                }\n            }\n            return str;\n        },\n        selectedMode: false, //控制是否可以通过点击图例改变系列的显示状态。默认开启图例选择\n    },\n    tooltip: {\n        show: false,\n    },\n    // X轴\n    xAxis: {\n        //  boundaryGap: [0, 0],\n        type: 'value', // 坐标轴类型,   'value' 数值轴，适用于连续数据\n        // 坐标轴刻度\n        axisTick: {\n            show: false, // 是否显示坐标轴刻度 默认显示\n        },\n        // 坐标轴轴线\n        axisLine: {\n            // 是否显示坐标轴轴线 默认显示\n            show: false, // 是否显示坐标轴轴线 默认显示\n        },\n        // 坐标轴在图表区域中的分隔线\n        splitLine: {\n            show: false, // 是否显示分隔线。默认数值轴显示\n        },\n        // 坐标轴刻度标签\n        axisLabel: {\n            show: false, // 是否显示刻度标签 默认显示\n        },\n    },\n    yAxis: [\n        // 左侧Y轴\n        {\n            // 坐标轴类型,  'category' 类目轴，适用于离散的类目数据\n            // 为该类型时必须通过 data 设置类目数据\n            type: 'category',\n            // 坐标轴刻度\n            axisTick: {\n                show: false, // 是否显示坐标轴刻度 默认显示\n            },\n            // 坐标轴轴线\n            axisLine: {\n                // 是否显示坐标轴轴线 默认显示\n                show: false, // 是否显示坐标轴轴线 默认显示\n                lineStyle: {\n                    // 坐标轴线线的颜色\n                    color: '#cdd3ee',\n                },\n            },\n            // 坐标轴在图表区域中的分隔线\n            splitLine: {\n                show: false, // 是否显示分隔线。默认数值轴显示\n            },\n            // 坐标轴刻度标签\n            axisLabel: {\n                show: true, // 是否显示刻度标签 默认显示\n                fontSize: 16, // 文字的字体大小\n                color: '#cdd3ee', // 刻度标签文字的颜色\n                // 使用字符串模板，模板变量为刻度默认标签 {value}\n                formatter: '{value}',\n            },\n            // 类目数据，在类目轴（type: 'category'）中有效\n            data: [''],\n        },\n    ],\n    series: [\n        {\n            type: 'bar', // 系列类型\n            name: '苹果', // 系列名称, 用于tooltip的显示, legend 的图例筛选\n            // 数据堆叠，同个类目轴上系列配置相同的stack值后，后一个系列的值会在前一个系列的值上相加\n            zlevel: 3,\n            // stack: '总量',\n            barMaxWidth: 10, // 柱条的最大宽度，不设时自适应\n            // 图形上的文本标签\n            label: {\n                show: false,\n                position: 'inside',\n            },\n            // 图形样式\n            itemStyle: {\n                barBorderRadius: [5, 5, 5, 5], // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径\n                color: '#FFCE00',\n            },\n            data: [apple], // 系列中的数据内容数组\n        },\n        {\n            type: 'bar', // 系列类型\n            name: '梨子', // 系列名称, 用于tooltip的显示, legend 的图例筛选\n            zlevel: 2,\n            // stack: '总量',\n            barMaxWidth: 10, // 柱条的最大宽度，不设时自适应\n            // 图形上的文本标签\n            label: {\n                show: false,\n                position: 'inside',\n            },\n            data: [pear], // 系列中的数据内容数组\n            // 图形样式\n            itemStyle: {\n                barBorderRadius: 5, // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径\n                color: '#00D5FF',\n            },\n        },\n        {\n            type: 'bar', // 系列类型\n            name: '菠萝', // 系列名称, 用于tooltip的显示, legend 的图例筛选\n            zlevel: 1,\n            // stack: '总量',\n            barMaxWidth: 10, // 柱条的最大宽度，不设时自适应\n            label: {\n                show: false,\n            },\n            barGap: '-100%',\n            // 图形样式\n            itemStyle: {\n                color: '#FF5959',\n                barBorderRadius: 5, // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径\n            },\n            data: [pineapple], // 系列中的数据内容数组\n        },\n        {\n            type: 'bar',\n            name: '背景', // 背景\n            zlevel: 0,\n            barMaxWidth: 10,\n            barGap: '-100%',\n            // 图形样式\n            itemStyle: {\n                color: '#2a446a',\n                barBorderRadius: 5, // 圆角半径, 单位px, 支持传入数组分别指定 4 个圆角半径\n            },\n            label: {\n                show: false,\n            },\n            data: [100],\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oMCbX_qMS_vFhBNg3XY6h21eupJYr2m","theme":"","layout":"","viewCount":0,"userName":"碧***水","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZvc28w-TH.png?v=1636526219748","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":["柱状图","柱状图叠加","百分比"],"updaterUserName":"碧***水"}}