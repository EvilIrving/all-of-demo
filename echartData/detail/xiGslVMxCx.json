{"status":0,"data":{"cid":"xiGslVMxCx","authorUid":"obd-ojG26mYfQvxiFjmSpBf7iLaSQ_KABEd","authorUserName":"178*****291","title":"四川省供水数据汇总与可视化","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-28T01:02:54.000Z","lastUpdateTime":"2021-07-01T09:10:46.000Z","auth":1,"uid":"obd-ojG26mYfQvxiFjmSpBf7iLaSQ_KABEd","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.9.0","versionCreateTime":"2021-07-01T09:10:47.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1608805397629-qDNtLYUsw.json\";\r\n\r\nvar chengdu = \"/asset/get/s/data-1608805414643-bC9-iT_xM.json\";\r\n\r\nvar bazhong = \"/asset/get/s/data-1608805419924-zlRXjpy5v.json\";\r\n\r\nvar abeizangzuqiangzuzizhizhou = \"/asset/get/s/data-1608805423799-3HcZ3Ar58.json\";\r\n\r\nvar dazhou = \"/asset/get/s/data-1608805429204-1uwxLS0jX.json\";\r\n\r\nvar deyang = \"/asset/get/s/data-1608805432766-nb1OLVAFm.json\";\r\n\r\nvar ganzizangzuzizhizhou = \"/asset/get/s/data-1608805436921-b80bFxzlf.json\";\r\n\r\nvar guangan = \"/asset/get/s/data-1608805441224-I8GT2tE9i.json\";\r\n\r\nvar guangyuan = \"/asset/get/s/data-1608805444741-yM6q8qCHe.json\";\r\n\r\nvar leshan = \"/asset/get/s/data-1608805448531-621IU6In2.json\";\r\n\r\nvar liangshanyizuzizhizhou = \"/asset/get/s/data-1608805453357-vjoONf0d4.json\";\r\n\r\nvar luzhou = \"/asset/get/s/data-1608805457963-bc9AcbL88.json\";\r\n\r\nvar meishan = \"/asset/get/s/data-1608805463759-Onq3CQjMm.json\";\r\n\r\nvar mianyang = \"/asset/get/s/data-1608805470024-O1Bj_Us2L.json\";\r\n\r\nvar zigong = \"/asset/get/s/data-1608805480296-g4KY8b9e_.json\";\r\n\r\nvar nanchong = \"/asset/get/s/data-1608805496925-Ti7WllimY.json\";\r\n\r\nvar neijiang = \"/asset/get/s/data-1608805504026-2JdmDgxmp.json\";\r\n\r\nvar panzhihua = \"/asset/get/s/data-1608805507584-mGt85DC0S.json\";\r\n\r\nvar suining = \"/asset/get/s/data-1608805511550-xu1NgP4z6.json\";\r\n\r\nvar yaan = \"/asset/get/s/data-1608805514993-0LAltEmAa.json\";\r\n\r\nvar yibin = \"/asset/get/s/data-1608805521127-Llxil3AYH.json\";\r\n\r\nvar ziyang = \"/asset/get/s/data-1608805532650-fKmXtBmbo.json\";\r\n\r\n\r\n$.get(uploadedDataURL, function(geoJson) {\r\n\r\n    myChart.hideLoading();\r\n\r\n    echarts.registerMap('四川', geoJson);\r\n\r\n    var cityMap = {\r\n        \"成都市\": chengdu,\r\n        '巴中市': bazhong,\r\n        \"阿坝藏族羌族自治州\": abeizangzuqiangzuzizhizhou,\r\n        '达州市': dazhou,\r\n        \"德阳市\": deyang,\r\n        \"甘孜藏族自治州\": ganzizangzuzizhizhou,\r\n        \"广安市\": guangan,\r\n        \"广元市\": guangyuan,\r\n        \"乐山市\": leshan,\r\n        \"凉山彝族自治州\": liangshanyizuzizhizhou,\r\n        \"泸州市\": luzhou,\r\n        \"眉山市\": meishan,\r\n        \"绵阳市\": mianyang,\r\n        \"自贡市\": zigong,\r\n        \"南充市\": nanchong,\r\n        \"内江市\": neijiang,\r\n        \"攀枝花市\": panzhihua,\r\n        \"遂宁市\": suining,\r\n        \"雅安市\": yaan,\r\n        \"宜宾市\": yibin,\r\n        \"资阳市\": ziyang\r\n    };\r\n\r\n    var gdGeoCoordMap = {\r\n        '成都市': [104.074470, 30.582973],\r\n        '巴中市': [106.753669, 31.858809],\r\n        \"阿坝藏族羌族自治州\": [102.221374, 31.899792],\r\n        '达州市': [107.502262, 31.209484],\r\n        \"德阳市\": [104.398651, 31.127991],\r\n        \"甘孜藏族自治州\": [101.963815, 30.050663],\r\n        \"广安市\": [106.633369, 30.456398],\r\n        \"广元市\": [105.829757, 32.433668],\r\n        \"乐山市\": [103.761263, 29.582024],\r\n        \"凉山彝族自治州\": [102.258746, 27.886762],\r\n        \"泸州市\": [105.443348, 28.889138],\r\n        \"眉山市\": [103.831788, 30.048318],\r\n        \"绵阳市\": [104.741722, 31.46402],\r\n        \"自贡市\": [106.754457, 31.875833],\r\n        \"南充市\": [106.082974, 30.795281],\r\n        \"内江市\": [105.066138, 29.58708],\r\n        \"攀枝花市\": [101.716007, 26.580446],\r\n        \"遂宁市\": [105.571331, 30.513311],\r\n        \"雅安市\": [103.001033, 29.987722],\r\n        \"宜宾市\": [104.630825, 28.760189],\r\n        \"资阳市\": [104.641917, 30.122211]\r\n    };\r\n    var gdDatas = [\r\n        [{\r\n            name: '成都市',\r\n            value: 10\r\n        }],\r\n        [{\r\n            name: '巴中市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '阿坝藏族羌族自治州',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '达州市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '德阳市',\r\n            value: 1.3\r\n        }],\r\n        [{\r\n            name: '甘孜藏族自治州',\r\n            value: 0.2\r\n        }],\r\n        [{\r\n            name: '广安市',\r\n            value: 0.4\r\n        }],\r\n        [{\r\n            name: '广元市',\r\n            value: 0.6\r\n        }],\r\n        [{\r\n            name: '乐山市',\r\n            value: 0.8\r\n        }],\r\n        [{\r\n            name: '凉山彝族自治州',\r\n            value: 0.4\r\n        }],\r\n        [{\r\n            name: '泸州市',\r\n            value: 0.8\r\n        }],\r\n        [{\r\n            name: '眉山市',\r\n            value: 0.2\r\n        }],\r\n        [{\r\n            name: '绵阳市',\r\n            value: 1.3\r\n        }],\r\n        [{\r\n            name: '自贡市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '南充市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '内江市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '攀枝花市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '遂宁市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '雅安市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '宜宾市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '资阳市',\r\n            value: 0.8\r\n        }]\r\n    ];\r\n\r\n    var chengdudata = [{\r\n            name: \"西南航空港供水工程有限公司\",\r\n            value: [103.985729, 30.575615, 0.5],\r\n        },\r\n        {\r\n            name: \"成都市自来水公司营业厅\",\r\n            value: [104.048065, 30.649955, 1],\r\n        },\r\n        {\r\n            name: \"成都环境集团成都市自来水有限责任公司\",\r\n            value: [104.121099, 30.66154, 1],\r\n        },\r\n        {\r\n            name: \"岷江自来水厂\",\r\n            value: [104.070298, 30.516974, 0.1],\r\n        },\r\n        {\r\n            name: \"成都环境集团成都供水\",\r\n            value: [104.121154, 30.660801, 0.4],\r\n        },\r\n        {\r\n            name: \"成都市新都区自来水公司\",\r\n            value: [104.147077, 30.782706, 1],\r\n        },\r\n        {\r\n            name: \"大丰自来水营业大厅\",\r\n            value: [104.064175, 30.779358, 1.4],\r\n        },\r\n        {\r\n            name: \"成都市自来水有限责任公司\",\r\n            value: [103.963652, 30.744603, 0.7],\r\n        },\r\n        {\r\n            name: \"成都市岷江自来水厂工会\",\r\n            value: [103.986176, 30.550281, 0.1],\r\n        },\r\n        {\r\n            name: \"成都自来水有限责任公司\",\r\n            value: [103.892669, 30.818518, 0.5],\r\n        },\r\n        {\r\n            name: \"温江区自来水公司\",\r\n            value: [103.846965, 30.71171, 2],\r\n        },\r\n        {\r\n            name: \"成都环境集团成都供水\",\r\n            value: [104.051191, 30.669935, 0.9],\r\n        },\r\n        {\r\n            name: \"成都市自来水有限责任公司(白马寺)\",\r\n            value: [104.074779, 30.687311, 2],\r\n        },\r\n        {\r\n            name: \"黄龙溪景观供水站\",\r\n            value: [103.972932, 30.326578, 2],\r\n        },\r\n        {\r\n            name: \"四川省彭州市自来水有限公司\",\r\n            value: [103.940401, 30.994183, 0.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var bazhongdata = [{\r\n            name: \"圣泉水务有限公司\",\r\n            value: [106.770895, 31.864548, 0.5],\r\n        },\r\n        {\r\n            name: \"板庙供水站\",\r\n            value: [107.228612, 31.546389, 1],\r\n        },\r\n        {\r\n            name: \"平昌县鸿源水务集团\",\r\n            value: [107.096648, 31.569831, 1],\r\n        },\r\n        {\r\n            name: \"圣泉水务有限公司(财务广场)\",\r\n            value: [106.781738, 31.860592, 0.1],\r\n        },\r\n        {\r\n            name: \"平昌供水\",\r\n            value: [107.115326, 31.567849, 0.4],\r\n        },\r\n        {\r\n            name: \"三江镇供水站\",\r\n            value: [106.789858, 31.763912, 1],\r\n        },\r\n        {\r\n            name: \"南江县大河供水站\",\r\n            value: [106.941115, 32.201356, 1.4],\r\n        },\r\n        {\r\n            name: \"通江县沙溪供水站\",\r\n            value: [107.445477, 32.112782, 0.7],\r\n        },\r\n        {\r\n            name: \"平昌县水利电力局驷马供水站\",\r\n            value: [107.040342, 31.74208, 0.1],\r\n        },\r\n\r\n    ]\r\n\r\n    var abeizangzuqiangzuzizhizhoudata = [{\r\n            name: \"水费收费厅\",\r\n            value: [102.369536, 31.00466, 0.5],\r\n        },\r\n\r\n    ]\r\n\r\n    var dazhoudata = [{\r\n            name: \"宣汉县自来水公司\",\r\n            value: [107.728177, 31.364667, 0.5],\r\n        },\r\n        {\r\n            name: \"渠县供水排水总公司\",\r\n            value: [106.978483, 30.851644, 1],\r\n        },\r\n        {\r\n            name: \"渠县供水排水总公司东城收费处\",\r\n            value: [106.989102, 30.846225, 1],\r\n        },\r\n        {\r\n            name: \"渠县供水排水总公司\",\r\n            value: [106.98882, 30.846385, 0.1],\r\n        },\r\n        {\r\n            name: \"四川万源川投水务公司\",\r\n            value: [108.043578, 32.076235, 0.4],\r\n        },\r\n        {\r\n            name: \"云鹤山泉普光供水点\",\r\n            value: [107.773803, 31.538428, 1],\r\n        },\r\n        {\r\n            name: \"渠县清溪场水务站\",\r\n            value: [106.824128, 30.895938, 1.4],\r\n        },\r\n        {\r\n            name: \"达县云门水务投资有限责任公司\",\r\n            value: [107.5218, 31.198689, 0.7],\r\n        },\r\n        {\r\n            name: \"渠县乡镇供水公司龙凤供水站\",\r\n            value: [106.76218, 30.944628, 0.1],\r\n        },\r\n        {\r\n            name: \"李渡供水站\",\r\n            value: [106.973431, 30.780289, 0.5],\r\n        },\r\n        {\r\n            name: \"眉山市彭山碧水源久安水务有限公司\",\r\n            value: [107.512364, 31.207551, 2],\r\n        },\r\n        {\r\n            name: \"渠县乡镇供水公司宋家供水站\",\r\n            value: [106.706527, 30.89738, 0.9],\r\n        },\r\n        {\r\n            name: \"人民公园水务集团总公司\",\r\n            value: [107.515905, 31.22391, 2],\r\n        },\r\n        {\r\n            name: \"万源市石清山泉水厂\",\r\n            value: [108.033162, 32.064329, 2],\r\n        },\r\n\r\n    ]\r\n\r\n    var deyangdata = [{\r\n            name: \"德阳市自来水公司\",\r\n            value: [104.400729, 31.146769, 0.5],\r\n        },\r\n        {\r\n            name: \"广汉市自来水公司\",\r\n            value: [104.282574, 30.992475, 1],\r\n        },\r\n        {\r\n            name: \"绵竹自来水公司\",\r\n            value: [104.207652, 31.354965, 1],\r\n        },\r\n        {\r\n            name: \"中江县自来水公司\",\r\n            value: [104.687647, 31.041673, 0.1],\r\n        },\r\n        {\r\n            name: \"广汉兴鑫水务有限责任公司\",\r\n            value: [104.27843, 30.969481, 0.4],\r\n        },\r\n        {\r\n            name: \"和兴自来水公司\",\r\n            value: [104.353618, 30.97445, 1],\r\n        },\r\n        {\r\n            name: \"中江县水务局南干站\",\r\n            value: [104.68812, 31.024875, 1.4],\r\n        },\r\n        {\r\n            name: \"三水自来水公司\",\r\n            value: [104.34494, 30.931828, 0.7],\r\n        },\r\n        {\r\n            name: \"中江县水务局广福站\",\r\n            value: [104.942531, 30.758207, 0.1],\r\n        },\r\n\r\n    ]\r\n\r\n    var ganzizangzuzizhizhoudata = [{\r\n            name: \"德格县自来水公司收费处\",\r\n            value: [98.586932, 31.812486, 0.5],\r\n        },\r\n        {\r\n            name: \"自来水收费室\",\r\n            value: [101.9669, 30.047087, 1],\r\n        },\r\n    ]\r\n\r\n    var guangandata = [{\r\n            name: \"爱众水务\",\r\n            value: [106.63161, 30.461486, 0.5],\r\n        },\r\n        {\r\n            name: \"广安县恒升供水站\",\r\n            value: [106.780174, 30.694807, 1],\r\n        },\r\n        {\r\n            name: \"华蓥爱众水务公司\",\r\n            value: [106.791741, 30.403966, 1],\r\n        },\r\n        {\r\n            name: \"武胜县立新天然气有限责任公司\",\r\n            value: [106.297389, 30.341554, 0.1],\r\n        },\r\n        {\r\n            name: \"白庙供水站客户服务中心\",\r\n            value: [106.371991, 30.546518, 0.4],\r\n        },\r\n        {\r\n            name: \"四川广安爱众股份有限公司\",\r\n            value: [106.648555, 30.477553, 1],\r\n        },\r\n        {\r\n            name: \"爱自来水公司\",\r\n            value: [106.45252, 30.543344, 1.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var guangyuandata = [{\r\n            name: \"旺苍县自来水公司营业大厅\",\r\n            value: [106.305746, 32.235057, 0.5],\r\n        },\r\n        {\r\n            name: \"剑阁县城北自来水站\",\r\n            value: [105.468793, 32.052853, 1],\r\n        },\r\n        {\r\n            name: \"广元市上西自来水有限责任公司\",\r\n            value: [105.832843, 32.458013, 1],\r\n        },\r\n        {\r\n            name: \"苍溪县乡镇供水总站元坝供水站\",\r\n            value: [106.067066, 31.824713, 0.1],\r\n        },\r\n        {\r\n            name: \"广元供水\",\r\n            value: [105.828591, 32.437231, 0.4],\r\n        },\r\n        {\r\n            name: \"四川省苍溪县乡镇供水总站\",\r\n            value: [105.938909, 31.740044, 1],\r\n        },\r\n        {\r\n            name: \"剑门关景区-景区供水站\",\r\n            value: [105.589515, 32.23553, 1.4],\r\n        },\r\n        {\r\n            name: \"国光供水站\",\r\n            value: [105.423009, 31.730407, 0.7],\r\n        },\r\n        {\r\n            name: \"自来水公司净水厂\",\r\n            value: [106.317961, 32.251991, 0.1],\r\n        },\r\n        {\r\n            name: \"昭化供水站\",\r\n            value: [105.721817, 32.338252, 0.5],\r\n        },\r\n        {\r\n            name: \"青川县洁康水务公司营业厅\",\r\n            value: [105.246264, 32.592526, 2],\r\n        },\r\n        {\r\n            name: \"广元市供排水集团有限公司\",\r\n            value: [105.845697, 32.435324, 0.9],\r\n        },\r\n\r\n    ]\r\n\r\n    var leshandata = [{\r\n            name: \"乐山市自来水有限责任公司\",\r\n            value: [103.759627, 29.604271, 0.5],\r\n        },\r\n        {\r\n            name: \"乐山市苏稽自来水有限公司\",\r\n            value: [103.675222, 29.593137, 1],\r\n        },\r\n        {\r\n            name: \"中阳水务收费大厅\",\r\n            value: [103.561998, 29.430704, 1],\r\n        },\r\n        {\r\n            name: \"乐山电力自来水公司营业厅\",\r\n            value: [103.772257, 29.568198, 0.1],\r\n        },\r\n        {\r\n            name: \"马边供水服务中心\",\r\n            value: [103.552908, 28.836772, 0.4],\r\n        },\r\n        {\r\n            name: \"犍为县河东供排水有限公司\",\r\n            value: [103.962284, 29.316898, 1],\r\n        },\r\n        {\r\n            name: \"井研供水\",\r\n            value: [103.869265, 29.66641, 1.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var liangshanyizuzizhizhoudata = [{\r\n            name: \"昭觉县自来水有限责任公司\",\r\n            value: [102.846535, 28.018125, 0.5],\r\n        },\r\n        {\r\n            name: \"西昌市供排水总公司\",\r\n            value: [102.225909, 27.908214, 1],\r\n        },\r\n        {\r\n            name: \"会理县自来水有限责任公司\",\r\n            value: [102.248924, 26.661108, 1],\r\n        },\r\n        {\r\n            name: \"会东县自来水有限责任公司\",\r\n            value: [102.585636, 26.642259, 0.1],\r\n        },\r\n        {\r\n            name: \"盐源县自来水公司\",\r\n            value: [101.517673, 27.42693, 0.4],\r\n        },\r\n        {\r\n            name: \"越西县自来水公司\",\r\n            value: [102.514634, 28.643587, 1],\r\n        },\r\n        {\r\n            name: \"盐源县自来水公司安装维修服务处\",\r\n            value: [101.517487, 27.426881, 1.4],\r\n        },\r\n        {\r\n            name: \"西昌城市供水加压站\",\r\n            value: [102.268452, 27.875676, 0.7],\r\n        },\r\n        {\r\n            name: \"喜德县城市供水\",\r\n            value: [102.418785, 28.311736, 0.1],\r\n        },\r\n        {\r\n            name: \"盐源县水务投资\",\r\n            value: [101.516417, 27.427195, 0.5],\r\n        },\r\n        {\r\n            name: \"冕宁县自来水有限公司\",\r\n            value: [102.170789, 28.556269, 2],\r\n        },\r\n        {\r\n            name: \"雷波县自来水公司\",\r\n            value: [103.573989, 28.267291, 0.9],\r\n        },\r\n\r\n    ]\r\n\r\n    var luzhoudata = [{\r\n            name: \"叙永县自来水有限公司\",\r\n            value: [105.443575, 28.167707, 0.5],\r\n        },\r\n        {\r\n            name: \"兴泸水务\",\r\n            value: [105.459998, 28.997579, 1],\r\n        },\r\n        {\r\n            name: \"兴泸水务集团城东营业所\",\r\n            value: [105.48113, 28.933931, 1],\r\n        },\r\n        {\r\n            name: \"北控水务\",\r\n            value: [105.51326, 28.866972, 0.1],\r\n        },\r\n        {\r\n            name: \"后山供水站\",\r\n            value: [105.509351, 27.995046, 0.4],\r\n        },\r\n        {\r\n            name: \"双沙供水站\",\r\n            value: [105.75961, 27.835942, 1],\r\n        },\r\n        {\r\n            name: \"兴泸水务\",\r\n            value: [105.295842, 28.920206, 1.4],\r\n        },\r\n        {\r\n            name: \"四川省水电集团合江营业厅\",\r\n            value: [105.838759, 28.816621, 0.7],\r\n        },\r\n\r\n    ]\r\n\r\n    var meishandata = [{\r\n            name: \"眉山市自来水公司\",\r\n            value: [103.84757, 30.054524, 0.5],\r\n        },\r\n        {\r\n            name: \"眉山市供排水总公司\",\r\n            value: [103.847629, 30.055034, 1],\r\n        },\r\n        {\r\n            name: \"眉山市供排水总公司南门营业厅\",\r\n            value: [103.834501, 30.040429, 1],\r\n        },\r\n        {\r\n            name: \"仁寿县清水供水站\",\r\n            value: [104.05117, 30.203763, 0.1],\r\n        },\r\n        {\r\n            name: \"满井供水站\",\r\n            value: [104.155098, 29.932664, 0.4],\r\n        },\r\n        {\r\n            name: \"眉山市供排水总公司尚义营业厅\",\r\n            value: [103.766566, 30.101209, 1],\r\n        },\r\n        {\r\n            name: \"禄加自来水有限公司\",\r\n            value: [104.374825, 29.823697, 1.4],\r\n        },\r\n        {\r\n            name: \"眉山首创水务有限公司\",\r\n            value: [103.823842, 30.202835, 0.7],\r\n        },\r\n\r\n    ]\r\n\r\n    var mianyangdata = [{\r\n            name: \"绵阳水务\",\r\n            value: [104.762587, 31.469405, 0.5],\r\n        },\r\n        {\r\n            name: \"高新供水公司客户服务大厅\",\r\n            value: [104.681207, 31.468824, 1],\r\n        },\r\n        {\r\n            name: \"绵阳水务集团客户服务中心\",\r\n            value: [104.762527, 31.468687, 1],\r\n        },\r\n        {\r\n            name: \"绵阳市武引游仙区自来水公司\",\r\n            value: [104.779499, 31.505187, 0.1],\r\n        },\r\n        {\r\n            name: \"绵阳市水务集团古泉供水加压站\",\r\n            value: [104.689252, 31.445607, 0.4],\r\n        },\r\n        {\r\n            name: \"绵阳市游仙武引水务有限公司\",\r\n            value: [104.779578, 31.505219, 1],\r\n        },\r\n        {\r\n            name: \"安州区新盛供水有限公司营业厅\",\r\n            value: [104.556754, 31.547512, 1.4],\r\n        },\r\n        {\r\n            name: \"绵阳市泓泉水务有限责任公司\",\r\n            value: [104.725467, 31.572697, 0.7],\r\n        },\r\n        {\r\n            name: \"新安供水\",\r\n            value: [104.891012, 31.797522, 0.1],\r\n        },\r\n        {\r\n            name: \"绵阳市仙海自来水有限公司\",\r\n            value: [104.771559, 31.496873, 0.5],\r\n        },\r\n        {\r\n            name: \"绵阳市广汇实业有限公司矿泉水厂\",\r\n            value: [104.643901, 31.348886, 2],\r\n        },\r\n        {\r\n            name: \"江油市天一自来水有限责任公司\",\r\n            value: [104.770198, 31.779016, 0.9],\r\n        },\r\n        {\r\n            name: \"绵阳水务集团(\",\r\n            value: [104.740736, 31.500617, 2],\r\n        },\r\n\r\n    ]\r\n\r\n    var zigongdata = [{\r\n            name: \"富洲水务集团\",\r\n            value: [104.993937, 29.185824, 0.5],\r\n        },\r\n        {\r\n            name: \"四川川投水务集团荣县天然公司\",\r\n            value: [104.434916, 29.462491, 1],\r\n        },\r\n        {\r\n            name: \"自贡市中天水务有限公司\",\r\n            value: [104.789683, 29.332572, 1],\r\n        },\r\n        {\r\n            name: \"自贡水务集团\",\r\n            value: [104.785214, 29.351918, 0.1],\r\n        },\r\n        {\r\n            name: \"自贡荣威水务有限责任公司\",\r\n            value: [104.763241, 29.334321, 0.4],\r\n        },\r\n        {\r\n            name: \"自贡市宏发自来水有限公司\",\r\n            value: [104.619759, 29.399939, 1],\r\n        },\r\n        {\r\n            name: \"自贡水务集团客户服务中心\",\r\n            value: [104.785196, 29.352009, 1.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var nanchongdata = [{\r\n            name: \"福康供水\",\r\n            value: [106.074661, 31.364405, 0.5],\r\n        },\r\n        {\r\n            name: \"城乡水务\",\r\n            value: [106.048221, 31.376453, 1],\r\n        },\r\n        {\r\n            name: \"南充水务投资(集团)有限公司\",\r\n            value: [106.116596, 30.793782, 1],\r\n        },\r\n        {\r\n            name: \"蓬安县自来水公司\",\r\n            value: [106.426558, 31.036111, 0.1],\r\n        },\r\n        {\r\n            name: \"营山县供水公司(东城营业厅)\",\r\n            value: [106.578568, 31.080306, 0.4],\r\n        },\r\n        {\r\n            name: \"南充康源水务(集团)\",\r\n            value: [106.086548, 30.808506, 1],\r\n        },\r\n        {\r\n            name: \"蓬安县自来水公司\",\r\n            value: [106.418355, 31.03323, 1.4],\r\n        },\r\n        {\r\n            name: \"南部县城乡水务有限公司\",\r\n            value: [106.237645, 31.369098, 0.7],\r\n        },\r\n        {\r\n            name: \"南充水务投资(集团)\",\r\n            value: [106.086462, 30.80845, 0.1],\r\n        },\r\n        {\r\n            name: \"仪陇县方州自来水公司\",\r\n            value: [106.411334, 31.517981, 0.5],\r\n        },\r\n        {\r\n            name: \"西充县泓源水务发展有限公司\",\r\n            value: [105.892945, 31.001825, 2],\r\n        },\r\n        {\r\n            name: \"先锋镇自来水供应站\",\r\n            value: [106.301828, 31.632196, 0.9],\r\n        },\r\n        {\r\n            name: \"大禹水务\",\r\n            value: [106.01913, 30.779503, 2],\r\n        },\r\n        {\r\n            name: \"達安县自来水公司\",\r\n            value: [106.418472, 31.033408, 2],\r\n        },\r\n        {\r\n            name: \"南充市嘉陵区建华自来水有限公司\",\r\n            value: [106.078436, 30.583659, 0.4],\r\n        },\r\n        {\r\n            name: \"蓬安县自来水公司(收费处)\",\r\n            value: [106.443305, 30.978103, 0.6],\r\n        },\r\n        {\r\n            name: \"康源水务\",\r\n            value: [106.069024, 30.881744, 2],\r\n        },\r\n        {\r\n            name: \"康源水务集团有限责任公司\",\r\n            value: [106.086548, 30.808551, 2],\r\n        },\r\n        {\r\n            name: \"充县供排水公司多扶营业所\",\r\n            value: [105.98748, 30.966222, 0.2],\r\n        },\r\n\r\n    ]\r\n\r\n    var neijiangdata = [{\r\n            name: \"内江市水务有限责任公司\",\r\n            value: [105.061782, 29.586968, 0.5],\r\n        },\r\n        {\r\n            name: \"隆昌自来水公司\",\r\n            value: [105.274489, 29.345196, 1],\r\n        },\r\n        {\r\n            name: \"隆昌市自来水公司营业大厅\",\r\n            value: [105.301186, 29.342394, 1],\r\n        },\r\n        {\r\n            name: \"内江市水务有限责任公司\",\r\n            value: [105.063844, 29.602921, 0.1],\r\n        },\r\n        {\r\n            name: \"内江市水务有限责任公司\",\r\n            value: [105.083087, 29.607718, 0.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var panzhihuadata = [{\r\n            name: \"水务检测中心\",\r\n            value: [101.714269, 26.580511, 0.5],\r\n        },\r\n        {\r\n            name: \"四川省盐边县自来水公司\",\r\n            value: [101.85532, 26.689322, 1],\r\n        },\r\n        {\r\n            name: \"河门口水厂营业厅\",\r\n            value: [101.626765, 26.604868, 1],\r\n        },\r\n        {\r\n            name: \"仙女山泉水厂\",\r\n            value: [101.778506, 26.391039, 0.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var suiningdata = [{\r\n            name: \"遂宁川能水务\",\r\n            value: [105.59687, 30.527237, 0.5],\r\n        },\r\n        {\r\n            name: \"兰林自来水有限公司\",\r\n            value: [105.600233, 30.496494, 1],\r\n        },\r\n        {\r\n            name: \"川投水务\",\r\n            value: [105.258871, 30.589132, 1],\r\n        },\r\n        {\r\n            name: \"四川川投水务集团射洪股份有限公司\",\r\n            value: [105.377316, 30.873578, 0.1],\r\n        },\r\n        {\r\n            name: \"遂宁中鹏水务有限公司\",\r\n            value: [105.613167, 30.519055, 0.4],\r\n        },\r\n        {\r\n            name: \"遂宁市明星水务设计\",\r\n            value: [105.587836, 30.508843, 1],\r\n        },\r\n        {\r\n            name: \"川投水务集团射洪有限责任公司\",\r\n            value: [105.387564, 30.864477, 1.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var yaandata = [{\r\n            name: \"雅安市名山区水务投资有限公司\",\r\n            value: [103.111756, 30.082586, 0.5],\r\n        },\r\n        {\r\n            name: \"雅安市供排水公司\",\r\n            value: [103.009289, 29.997752, 1],\r\n        },\r\n        {\r\n            name: \"营销科农村供水站\",\r\n            value: [102.853934, 29.802134, 1],\r\n        },\r\n        {\r\n            name: \"雅安市名山区民源水业有限公司\",\r\n            value: [103.121125, 30.095171, 0.1],\r\n        },\r\n        {\r\n            name: \"红豆相思谷山泉水厂\",\r\n            value: [103.018995, 30.092518, 0.4],\r\n        },\r\n        {\r\n            name: \"保障供水\",\r\n            value: [102.360954, 29.236523, 1],\r\n        },\r\n        {\r\n            name: \"天全县供排水公司收费大厅\",\r\n            value: [102.773689, 30.06103, 1.4],\r\n        },\r\n\r\n    ]\r\n\r\n    var yibindata = [{\r\n            name: \"高县自来水公司\",\r\n            value: [104.573793, 28.400884, 0.5],\r\n        },\r\n        {\r\n            name: \"牛角岩内口岩自来水收费站\",\r\n            value: [104.901521, 28.807443, 1],\r\n        },\r\n        {\r\n            name: \"长宁县自来水公司\",\r\n            value: [104.924741, 28.584154, 1],\r\n        },\r\n        {\r\n            name: \"南溪区供水排水有限公司\",\r\n            value: [104.985389, 28.841822, 0.1],\r\n        },\r\n        {\r\n            name: \"水泵变频二次供水\",\r\n            value: [104.621286, 28.768316, 0.4],\r\n        },\r\n        {\r\n            name: \"叙州区天泉供水有限责任公司\",\r\n            value: [104.555427, 28.715064, 1],\r\n        },\r\n        {\r\n            name: \"宜宾临港自来水有限公司\",\r\n            value: [104.671663, 28.778368, 1.4],\r\n        },\r\n        {\r\n            name: \"宜江水务公司\",\r\n            value: [104.352697, 28.838388, 0.7],\r\n        },\r\n        {\r\n            name: \"筠连县自来水有限责任公司\",\r\n            value: [104.508615, 28.162064, 0.1],\r\n        },\r\n        {\r\n            name: \"珙县巡场自来水有限责任公司\",\r\n            value: [104.715183, 28.460582, 0.5],\r\n        },\r\n        {\r\n            name: \"珙县自来水公司\",\r\n            value: [104.791557, 28.387379, 2],\r\n        },\r\n        {\r\n            name: \"宜宾市南溪区源聚乡镇供水有限公司\",\r\n            value: [104.985306, 28.841872, 0.9],\r\n        },\r\n        {\r\n            name: \"高县月江镇福溪供水站\",\r\n            value: [104.691792, 28.671781, 2],\r\n        },\r\n        {\r\n            name: \"长宁县中水水务有限责任公司\",\r\n            value: [104.919493, 28.583029, 2],\r\n        },\r\n        {\r\n            name: \"筠连县自来水公司\",\r\n            value: [104.518683, 28.176173, 0.4],\r\n        },\r\n        {\r\n            name: \"宜宾东园自来水有限公司\",\r\n            value: [104.515277, 28.78098, 0.6],\r\n        },\r\n        {\r\n            name: \"宜宾市清源水务有限公司\",\r\n            value: [104.631679, 28.777817, 2],\r\n        },\r\n        {\r\n            name: \"宜宾市龙禹水务投资有限责任公司\",\r\n            value: [104.604594, 28.778374, 2],\r\n        },\r\n        {\r\n            name: \"李端供水站\",\r\n            value: [104.86753, 28.599703, 0.2],\r\n        },\r\n        {\r\n            name: \"宜宾僰乡源山泉水厂\",\r\n            value: [104.842896, 28.264081, 0.6],\r\n        },\r\n\r\n    ]\r\n\r\n    var ziyangdata = [{\r\n            name: \"简阳市水务投资发展有限公司\",\r\n            value: [104.548195, 30.420931, 0.5],\r\n        },\r\n        {\r\n            name: \"安岳县自来水公司\",\r\n            value: [105.355745, 30.112751, 1],\r\n        },\r\n        {\r\n            name: \"安岳县柠都自来水有限责任公司\",\r\n            value: [105.346023, 30.105334, 1],\r\n        },\r\n        {\r\n            name: \"资阳市水务燃气有限责任公司\",\r\n            value: [104.640231, 30.146645, 0.1],\r\n        },\r\n        {\r\n            name: \"禾丰供水\",\r\n            value: [104.719883, 30.425408, 0.4],\r\n        },\r\n        {\r\n            name: \"资阳海天水务有限公司\",\r\n            value: [104.643489, 30.135611, 1],\r\n        },\r\n\r\n    ]\r\n\r\n    var opt = {\r\n        bgColor: '#013954', // 画布背景色\r\n        mapName: '四川', // 地图名\r\n        goDown: true, // 是否下钻\r\n        // 下钻回调\r\n        callback: function(name, option, instance) {\r\n            console.log(name, option, instance);\r\n            if (name == '四川') {\r\n                option.series[0].data = convertData(gdDatas);\r\n                option.series[1].data = gdDatas.map(function(dataItem) {\r\n                    return {\r\n                        name: dataItem[0].name,\r\n                        value: gdGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                    };\r\n                });\r\n                myChart.setOption(option, true);\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"成都市\") {\r\n                option.series[0].data = convertData1(chengdudata);\r\n                option.series[1].data = chengdudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"巴中市\") {\r\n                option.series[0].data = convertData1(bazhongdata);\r\n                option.series[1].data = bazhongdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"阿坝藏族羌族自治州\") {\r\n                option.series[0].data = convertData1(abeizangzuqiangzuzizhizhoudata);\r\n                option.series[1].data = abeizangzuqiangzuzizhizhoudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"达州市\") {\r\n                option.series[0].data = convertData1(dazhoudata);\r\n                option.series[1].data = dazhoudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"德阳市\") {\r\n                option.series[0].data = convertData1(deyangdata);\r\n                option.series[1].data = deyangdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"甘孜藏族自治州\") {\r\n                option.series[0].data = convertData1(ganzizangzuzizhizhoudata);\r\n                option.series[1].data = ganzizangzuzizhizhoudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"广安市\") {\r\n                option.series[0].data = convertData1(guangandata);\r\n                option.series[1].data = guangandata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"广元市\") {\r\n                option.series[0].data = convertData1(guangyuandata);\r\n                option.series[1].data = guangyuandata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"乐山市\") {\r\n                option.series[0].data = convertData1(leshandata);\r\n                option.series[1].data = leshandata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"凉山彝族自治州\") {\r\n                option.series[0].data = convertData1(liangshanyizuzizhizhoudata);\r\n                option.series[1].data = liangshanyizuzizhizhoudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"泸州市\") {\r\n                option.series[0].data = convertData1(luzhoudata);\r\n                option.series[1].data = luzhoudata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"眉山市\") {\r\n                option.series[0].data = convertData1(meishandata);\r\n                option.series[1].data = meishandata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"绵阳市\") {\r\n                option.series[0].data = convertData1(mianyangdata);\r\n                option.series[1].data = mianyangdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"自贡市\") {\r\n                option.series[0].data = convertData1(zigongdata);\r\n                option.series[1].data = zigongdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"南充市\") {\r\n                option.series[0].data = convertData1(nanchongdata);\r\n                option.series[1].data = nanchongdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"内江市\") {\r\n                option.series[0].data = convertData1(neijiangdata);\r\n                option.series[1].data = neijiangdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"攀枝花市\") {\r\n                option.series[0].data = convertData1(panzhihuadata);\r\n                option.series[1].data = panzhihuadata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"遂宁市\") {\r\n                option.series[0].data = convertData1(suiningdata);\r\n                option.series[1].data = suiningdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"雅安市\") {\r\n                option.series[0].data = convertData1(yaandata);\r\n                option.series[1].data = yaandata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == \"宜宾市\") {\r\n                option.series[0].data = convertData1(yibindata);\r\n                option.series[1].data = yibindata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            } else if (name == '资阳市') {\r\n                option.series[0].data = convertData1(ziyangdata);\r\n                option.series[1].data = ziyangdata;\r\n                myChart.setOption(option, true); // 赋值后初始化\r\n                setTimeout(() => { // 定时后启动飞线\r\n                    myChart.setOption(option, true);\r\n                }, 500)\r\n            }\r\n        },\r\n        // 数据展示            \t\r\n        data: []\r\n    };\r\n\r\n\r\n    var levelColorMap = { // level颜色\r\n        '1': '#f44336',\r\n        '2': '#fc9700',\r\n        '3': '#ffde00',\r\n        '4': '#00eaff'\r\n    };\r\n\r\n    var defaultOpt = {\r\n        mapName: 'china', // 地图展示\r\n        goDown: false, // 是否下钻\r\n        bgColor: '#013954', // 画布背景色\r\n        activeArea: [], // 区域高亮,同echarts配置项\r\n        data: [],\r\n        // 下钻回调(点击的地图名、实例对象option、实例对象)\r\n        callback: function(name, option, instance) {}\r\n    };\r\n    if (opt) {\r\n        opt1 = $.extend(defaultOpt, opt);\r\n    }\r\n\r\n    // 层级索引\r\n    var name = [opt1.mapName];\r\n    var idx = 0;\r\n    var pos = { //层级位置\r\n        leftPlus: 55,\r\n        leftCur: 50,\r\n        left: 10,\r\n        top: 10\r\n    };\r\n\r\n    var line = [ //箭头\r\n        [0, 0],\r\n        [8, 11],\r\n        [0, 22]\r\n    ];\r\n\r\n    // style样式\r\n    var style = {\r\n        font: '18px \"Microsoft YaHei\", sans-serif',\r\n        textColor: '#eee',\r\n        lineColor: 'rgba(147, 235, 248, .8)'\r\n    };\r\n\r\n\r\n    var handleEvents = {\r\n        /**\r\n         * i 实例对象\r\n         * o option\r\n         * n 地图名\r\n         **/\r\n        resetOption: function(i, o, n) {\r\n            console.log(i)\r\n            console.log(o)\r\n            console.log(n)\r\n            var breadcrumb = this.createBreadcrumb(n);\r\n\r\n            var j = name.indexOf(n);\r\n            var l = o.graphic.length;\r\n            if (j < 0) {\r\n                console.log('jinru1')\r\n                o.graphic.push(breadcrumb);\r\n                o.graphic[0].children[0].shape.x2 = 195;\r\n                o.graphic[0].children[1].shape.x2 = 195;\r\n                if (o.graphic.length > 2) {\r\n                    for (var x = 0; x < opt1.data.length; x++) {\r\n                        if (n === opt1.data[x].name + '市') {\r\n                            o.series[0].data = handleEvents.initSeriesData(opt1.data[x].data);\r\n                            break;\r\n                        } else o.series[0].data = [];\r\n                    }\r\n                }\r\n                name.push(n);\r\n                idx++;\r\n            } else {\r\n                console.log('jinru2', j)\r\n                o.graphic.splice(j + 2, l);\r\n                if (o.graphic.length <= 2) {\r\n                    o.graphic[0].children[0].shape.x2 = 85;\r\n                    o.graphic[0].children[1].shape.x2 = 85;\r\n                    o.series[0].data = handleEvents.initSeriesData(gdDatas);\r\n                }\r\n                name.splice(j + 1, l);\r\n                idx = j;\r\n                pos.leftCur -= pos.leftPlus * (l - j - 1);\r\n            }\r\n\r\n            o.geo.map = n;\r\n            o.geo.zoom = 1;\r\n            i.clear();\r\n            i.setOption(o);\r\n            this.zoomAnimation();\r\n            opt1.callback(n, o, i);\r\n        },\r\n\r\n        /**\r\n         * name 地图名\r\n         **/\r\n        createBreadcrumb: function(name) {\r\n            var cityToPinyin = {\r\n                \"成都市\": \"chengdu\",\r\n                '巴中市': \"bazhong\",\r\n                '阿坝藏族羌族自治州市': \"abeizangzuqiangzuzizhizhou\",\r\n                '达州市': \"dazhou\",\r\n                \"德阳市\": \"deyang\",\r\n                \"甘孜藏族自治州市\": \"ganzizangzuzizhizhou\",\r\n                \"广安市\": \"guangan\",\r\n                \"广元市\": \"guangyuan\",\r\n                \"乐山市\": \"leshan\",\r\n                \"凉山彝族自治州市\": \"liangshanyizuzizhizhou\",\r\n                \"泸州市\": \"luzhou\",\r\n                \"眉山市\": \"meishan\",\r\n                \"绵阳市\": \"mianyang\",\r\n                \"自贡市\": \"zigong\",\r\n                \"南充市\": \"nanchong\",\r\n                \"内江市\": \"neijiang\",\r\n                \"攀枝花市\": \"panzhihua\",\r\n                \"遂宁市\": \"suining\",\r\n                \"雅安市\": \"yaan\",\r\n                \"宜宾市\": \"yibin\",\r\n                \"资阳市\": \"ziyang\"\r\n            };\r\n            var breadcrumb = {\r\n                type: 'group',\r\n                id: name,\r\n                left: pos.leftCur + pos.leftPlus,\r\n                top: pos.top + 3,\r\n                children: [{\r\n                    type: 'polyline',\r\n                    left: -90,\r\n                    top: -5,\r\n                    shape: {\r\n                        points: line\r\n                    },\r\n                    style: {\r\n                        stroke: '#fff',\r\n                        key: name,\r\n                    },\r\n                    onclick: function() {\r\n                        var name = this.style.key;\r\n                        handleEvents.resetOption(myChart, option, name);\r\n                    }\r\n                }, {\r\n                    type: 'text',\r\n                    left: -68,\r\n                    top: 'middle',\r\n                    style: {\r\n                        text: name,\r\n                        textAlign: 'center',\r\n                        fill: style.textColor,\r\n                        font: style.font\r\n                    },\r\n                    onclick: function() {\r\n                        var name = this.style.text;\r\n                        handleEvents.resetOption(myChart, option, name);\r\n                    }\r\n                }, {\r\n                    type: 'text',\r\n                    left: -68,\r\n                    top: 10,\r\n                    style: {\r\n\r\n                        name: name,\r\n                        text: cityToPinyin[name] ? cityToPinyin[name].toUpperCase() : '',\r\n                        textAlign: 'center',\r\n                        fill: style.textColor,\r\n                        font: '12px \"Microsoft YaHei\", sans-serif',\r\n                    },\r\n                    onclick: function() {\r\n                        // console.log(this.style);\r\n                        var name = this.style.name;\r\n                        handleEvents.resetOption(myChart, option, name);\r\n                    }\r\n                }]\r\n            }\r\n\r\n            pos.leftCur += pos.leftPlus;\r\n\r\n            return breadcrumb;\r\n        },\r\n\r\n        // 设置effectscatter\r\n        initSeriesData: function(data) {\r\n            console.log(data, '22222222222')\r\n            var temp = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = gdGeoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    temp.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value, data[i].level)\r\n                    });\r\n                }\r\n            }\r\n            return temp;\r\n        },\r\n\r\n        zoomAnimation: function() {\r\n            var count = null;\r\n            var zoom = function(per) {\r\n                if (!count) count = per;\r\n                count = count + per;\r\n                // console.log(per,count);\r\n                myChart.setOption({\r\n                    geo: {\r\n                        zoom: count\r\n                    }\r\n                });\r\n                if (count < 1) window.requestAnimationFrame(function() {\r\n                    zoom(0.2);\r\n                });\r\n            };\r\n            window.requestAnimationFrame(function() {\r\n                zoom(0.2);\r\n            });\r\n        }\r\n    };\r\n\r\n    var convertData = function(data) {\r\n\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var dataItem = data[i];\r\n            var name = dataItem[0].name\r\n            var fromCoord = gdGeoCoordMap[dataItem[0].name];\r\n            var toCoord = [104.07754,30.582248]; //被攻击点坐标\r\n            if (fromCoord && toCoord) {\r\n                res.push([{\r\n                    name: name,\r\n                    coord: fromCoord,\r\n                    value: dataItem[0].value\r\n                }, {\r\n                    coord: toCoord,\r\n                }]);\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n    var convertData1 = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var dataItem = data[i];\r\n            var name = dataItem.name\r\n            var fromCoord = data[0].value.slice(0, 2)\r\n            var toCoord = dataItem.value.slice(0, 2)\r\n            if (fromCoord && toCoord) {\r\n                res.push([{\r\n                    name: name,\r\n                    coord: fromCoord,\r\n                    value: dataItem.value[2],\r\n                }, {\r\n                    coord: toCoord,\r\n                }]);\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n    var series = [];\r\n    [\r\n        ['成都市', gdDatas]\r\n    ].forEach(function(item, i) {\r\n        console.log(item)\r\n        series.push({\r\n                type: 'lines',\r\n                zlevel: 1,\r\n                effect: {\r\n                    show: true,\r\n                    period: 3, //箭头指向速度，值越小速度越快\r\n                    trailLength: 0.7, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                    color: '#fff', //箭头图标\r\n                    symbolSize: 3, //图标大小\r\n                },\r\n                lineStyle: {\r\n                    normal: {\r\n                        width: 0.1, //尾迹线条宽度\r\n                        opacity: 0.2, //尾迹线条透明度\r\n                        curveness: 0.3 //尾迹线条曲直度\r\n                    }\r\n                },\r\n                data: convertData(item[1])\r\n            }, {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                rippleEffect: { //涟漪特效\r\n                    period: 4, //动画时间，值越小速度越快\r\n                    brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n                    scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: false,\r\n                        position: 'right', //显示位置\r\n                        offset: [5, 0], //偏移设置\r\n                        formatter: function(params) { //圆环显示文字\r\n                            return params.data.name;\r\n                        },\r\n                        fontSize: 19\r\n                    },\r\n                    emphasis: {\r\n                        show: true\r\n                    }\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: function(val) {\r\n                    return 10 + val[2] * 0; //圆环大小\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        show: false,\r\n                        color: '#f00'\r\n                    }\r\n                },\r\n                data: item[1].map(function(dataItem) {\r\n                    return {\r\n                        name: dataItem[0].name,\r\n                        value: gdGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                    };\r\n                }),\r\n            },\r\n            //被攻击点\r\n            {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                rippleEffect: {\r\n                    period: 4,\r\n                    brushType: 'stroke',\r\n                    scale: 4\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: false,\r\n                        position: 'right',\r\n                        //offset:[5, 0],\r\n                        color: '#0f0',\r\n                        formatter: '{b}',\r\n                        textStyle: {\r\n                            color: \"#0f0\"\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        show: false,\r\n                        color: \"#f60\"\r\n                    }\r\n                },\r\n                // symbol: 'pin',\r\n                // symbolSize: 50,\r\n                // data: [{\r\n                //     name: item[0],\r\n                //     value: gdGeoCoordMap[item[0]].concat([10]),\r\n                // }],\r\n            }\r\n        );\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    option = {\r\n            \"tooltip\": {\r\n                trigger: 'item',\r\n                backgroundColor: 'rgba(0,0,0,0)',\r\n                formatter: function(item) {\r\n                    console.log(item, 'item!!!!')\r\n                    if (item.componentSubType === 'lines') {\r\n                        var tipHtml1 = '';\r\n                        tipHtml1 = '<div style=\"background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666\">' +\r\n                            '<div style=\"color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;\">' + item.data.name + '</div>' +\r\n                            '<div style=\"text-align:center;color:#494949;padding:8px 6px\">' +\r\n                            '<span style=\"font-size:18px;font-weight:bold;\">' + '总测试设备：' + item.data.value + ' ' + '</span>' +\r\n                            '</div>' + '</div>';\r\n                        return tipHtml1;\r\n                    } else if (item.componentSubType === 'effectScatter') {\r\n                        var tipHtml2 = '';\r\n                        tipHtml2 = '<div style=\"background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666\">' +\r\n                            '<div style=\"color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;\">' + item.data.name + '</div>' +\r\n                            '<div style=\"text-align:center;color:#494949;padding:8px 6px\">' +\r\n                            '<span style=\"font-size:18px;font-weight:bold;\">' + '总测试设备：' + item.data.value[2] + ' ' + '</span>' +\r\n                            '</div>' + '</div>';\r\n                        return tipHtml2;\r\n                    } else if (item.componentSubType === 'scatter') {\r\n                        var tipHtml3 = '';\r\n                        tipHtml3 = '<div style=\"background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666\">' +\r\n                            '<div style=\"color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;\">' + item.data.name + '</div>' +\r\n                            '<div style=\"text-align:center;color:#494949;padding:8px 6px\">' +\r\n                            '<span style=\"font-size:18px;font-weight:bold;\">' + '总测试设备：' + item.data.value[2] + ' ' + '</span>' +\r\n                            '</div>' + '</div>';\r\n                        return tipHtml3;\r\n                    }\r\n                }\r\n            },\r\n            backgroundColor: \"#013954\",\r\n            \"graphic\": [{\r\n                type: 'group',\r\n                left: pos.left,\r\n                top: pos.top - 4,\r\n                children: [{\r\n                    type: 'line',\r\n                    left: 0,\r\n                    top: -20,\r\n                    shape: {\r\n                        x1: 0,\r\n                        y1: 0,\r\n                        x2: 85,\r\n                        y2: 0\r\n                    },\r\n                    style: {\r\n                        stroke: style.lineColor,\r\n                    }\r\n                }, {\r\n                    type: 'line',\r\n                    left: 0,\r\n                    top: 20,\r\n                    shape: {\r\n                        x1: 0,\r\n                        y1: 0,\r\n                        x2: 85,\r\n                        y2: 0\r\n                    },\r\n                    style: {\r\n                        stroke: style.lineColor,\r\n                    }\r\n                }]\r\n            }, {\r\n                id: name[idx],\r\n                type: 'group',\r\n                left: pos.left + 2,\r\n                top: pos.top,\r\n                children: [{\r\n                    type: 'polyline',\r\n                    left: 90,\r\n                    top: -12,\r\n                    shape: {\r\n                        points: line\r\n                    },\r\n                    style: {\r\n                        stroke: 'transparent',\r\n                        key: name[0]\r\n                    },\r\n                    onclick: function() {\r\n                        var name = this.style.key;\r\n                        console.log(name, '111111')\r\n                        handleEvents.resetOption(myChart, option, name);\r\n                    }\r\n                }, {\r\n                    type: 'text',\r\n                    left: 0,\r\n                    top: 'middle',\r\n                    style: {\r\n                        text: name[0] === '四川' ? '四川省' : name[0],\r\n                        textAlign: 'center',\r\n                        fill: style.textColor,\r\n                        font: style.font\r\n                    },\r\n                    onclick: function() {\r\n                        handleEvents.resetOption(myChart, option, '四川');\r\n                    }\r\n                }, {\r\n                    type: 'text',\r\n                    left: 0,\r\n                    top: 10,\r\n                    style: {\r\n                        text: 'SICHUAN',\r\n                        textAlign: 'center',\r\n                        fill: style.textColor,\r\n                        font: '12px \"Microsoft YaHei\", sans-serif',\r\n                    },\r\n                    onclick: function() {\r\n                        handleEvents.resetOption(myChart, option, '四川');\r\n                    }\r\n                }]\r\n            }],\r\n            visualMap: { //图例值控制\r\n                min: 0,\r\n                max: 1,\r\n                calculable: true,\r\n                show: false,\r\n                color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\r\n                textStyle: {\r\n                    color: '#fff'\r\n                }\r\n            },\r\n            \"geo\": {\r\n                \"map\": \"四川\",\r\n                \"layoutCenter\": [\"55%\", \"50%\"],\r\n                \"layoutSize\": \"109%\",\r\n                \"label\": {\r\n                    \"normal\": {\r\n                        \"show\": true,\r\n                        \"textStyle\": {\r\n                            \"color\": '#fff'\r\n                        }\r\n                    },\r\n                    \"emphasis\": {\r\n                        \"textStyle\": {\r\n                            \"color\": '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                \"roam\": true, //是否允许缩放\r\n                \"mapLocation\": {\r\n                    \"width\": \"110%\",\r\n                    \"height\": \"97%\"\r\n                },\r\n\r\n                \"itemStyle\": {\r\n                    \"normal\": {\r\n                        borderColor: 'rgba(147, 235, 248, 1)',\r\n                        borderWidth: 1,\r\n                        areaColor: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.8,\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                            }],\r\n                            globalCoord: false // 缺省为 false\r\n                        },\r\n                        shadowColor: 'rgba(128, 217, 248, 1)',\r\n                        // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                        shadowOffsetX: -2,\r\n                        shadowOffsetY: 2,\r\n                        shadowBlur: 10\r\n                    },\r\n                    \"emphasis\": {\r\n                        itemStyle: {\r\n                            areaColor: '#FFD181',\r\n                            borderColor: '#404a59',\r\n                            borderWidth: 1\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            series: series\r\n        },\r\n        myChart.setOption(option);\r\n    myChart.on('click', function(params) {\r\n        console.log(params)\r\n        var _self = this;\r\n        if (cityMap[params.name]) {\r\n            var url = cityMap[params.name];\r\n            $.get(url, function(response) {\r\n                //console.log(response, 'res');\r\n                curGeoJson = response;\r\n                echarts.registerMap(params.name, response);\r\n                handleEvents.resetOption(_self, option, params.name);\r\n            });\r\n        }\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-oEy_qnya6_ybjesU05UzK30PagP1z4A","theme":"","layout":"","viewCount":229,"userName":"178*****291","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xiGslVMxCx.png?v=1625130647369","isCustomThumbnail":0,"builtinTags":["category-work","geo","graphic","series-effectScatter","series-lines","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"e***明"}}