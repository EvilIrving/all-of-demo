{"status":0,"data":{"cid":"xhdu7xE1h","authorUid":"bd-3189977873","authorUserName":"寻***n","title":"甘特图-机器运行状态","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-02-26T08:55:22.000Z","lastUpdateTime":"2020-02-26T08:55:22.000Z","auth":2,"uid":"bd-3189977873","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-27T00:02:33.000Z","code":"\nvar data = [];\nvar dataCount = 40;\nvar startTime = +new Date();\nvar categories = ['设备A1', '设备A2', '设备A3','设备B1', '设备B2', '设备B3'];\nvar types = [\n    {name: '运行', color: '#75d874'},\n    {name: '故障', color: '#bd6d6c'},\n    {name: '等待', color: '#e0bc78'},\n    {name: '备用', color: '#7b9ce1'},\n];\n\n//产生模拟数据\necharts.util.each(categories, function (category, index) {\n    var baseTime = startTime;\n    for (var i = 0; i < dataCount; i++) {\n        var typeItem = types[Math.round(Math.random() * (types.length-1))];\n        var duration = Math.round(Math.random() * 1000000);\n        data.push({\n            name: typeItem.name,\n            value: [\n                index,\n                baseTime,\n                baseTime += duration,\n                duration\n            ],\n            itemStyle: {\n                normal: {\n                    color: typeItem.color\n                }\n            }\n        });\n        baseTime += Math.round(Math.random() * 2000);\n    }\n});\n//设定图形效果\nfunction renderItem(params, api) {\n    var categoryIndex = api.value(0);\n    var start = api.coord([api.value(1), categoryIndex]);\n    var end = api.coord([api.value(2), categoryIndex]);\n    var height = api.size([0, 1])[1] * 0.6;\n\n    var rectShape = echarts.graphic.clipRectByRect({\n        x: start[0],\n        y: start[1] - height / 2,\n        width: end[0] - start[0],\n        height: height\n    }, {\n        x: params.coordSys.x,\n        y: params.coordSys.y,\n        width: params.coordSys.width,\n        height: params.coordSys.height\n    });\n\n    return rectShape && {\n        type: 'rect',\n        shape: rectShape,\n        style: api.style()\n    };\n\n}\n\n\noption = {\n    //鼠标提示\n    tooltip: {\n        formatter: function (params) {\n            return params.marker + params.name + ': ' + params.value[3] + ' ms';\n        }\n    },\n    //标题\n    title: {\n        text: '甘特图-机器运行状态',\n        left: 'center'\n    },\n  legend: {\n        show : true,\n        data: ['运行', '故障', '等待', '备用'],\n        right: 80,\n        top: 50,\n        left:'center'\n    },    \n\n    //缩放\n    dataZoom: [{\n        type: 'slider',\n        show : false,\n        filterMode: 'weakFilter',\n        showDataShadow: false,\n        top: 550,\n        height: 10,\n        borderColor: 'transparent',\n        backgroundColor: '#e2e2e2',\n        handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', //jshint ignore:line\n        handleSize: 20,\n        handleStyle: {\n            shadowBlur: 6,\n            shadowOffsetX: 1,\n            shadowOffsetY: 2,\n            shadowColor: '#aaa'\n        },\n        labelFormatter: '',\n         start: 0,\n         end: 70,\n    }, {\n        type: 'inside',\n        filterMode: 'weakFilter'\n\n    }],\n    grid: {\n        top: 100,\n        height: 350\n    },\n    xAxis: {\n        min: startTime,\n        scale: true,\n        axisLabel: {\n            formatter: function (val) {\n                return Math.max(0, val - startTime) + ' ms';\n            }\n        }\n    },\n    yAxis: {\n        data: categories\n    },\n\n    series: [{\n        name:'运行',\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            opacity: 0.8,\n            color: \"#75d874\"\n        },\n        encode: {\n            x: [1, 2],\n            y: 0\n        },\n        data: data\n    },\n    {\n        name:'故障',\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            opacity: 0.8,\n             normal: {\n                    color: \"#bd6d6c\",\n                    borderWidth: 2\n                }\n        },\n        encode: {\n            x: [1, 2],\n            y: 0\n        },\n        data: data\n    },\n    {\n        name:'等待',\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            opacity: 0.8,\n             normal: {\n                    color: \"#e0bc78\",\n                    borderWidth: 2\n                }\n        },\n        encode: {\n            x: [1, 2],\n            y: 0\n        },\n        data: data\n    },\n    {\n        name:'备用',\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            opacity: 0.8,\n             normal: {\n                    color: \"#7b9ce1\",\n                    borderWidth: 2\n                }\n        },\n        encode: {\n            x: [1, 2],\n            y: 0\n        },\n        data: data\n    }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3189977873","theme":"","layout":"","viewCount":1617,"userName":"寻***n","commentCount":0,"starCount":14,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhdu7xE1h.png?v=1582761753523","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-custom","title","tooltip"],"customTags":[],"updaterUserName":"寻***n"}}