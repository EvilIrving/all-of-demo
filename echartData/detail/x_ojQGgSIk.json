{"status":0,"data":{"cid":"x_ojQGgSIk","authorUid":"bd-599414847","authorUserName":"A***M","title":"简易单柱子","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-01-25T04:42:42.000Z","lastUpdateTime":"2019-01-25T04:42:42.000Z","auth":2,"uid":"bd-599414847","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-25T04:42:42.000Z","code":"var data = {\n    id: 'multipleThree',\n    title: '简易单柱子',\n    symbol: '%', //数值是否带百分号        --默认为空 ''\n    yAxisLabel: false, //展示Y轴信息        --默认不展示 false\n    seriesLabel: true, //柱子上方toplabel --默认展示 trur\n    barWidth: 12, //柱子宽度               --默认12\n    scale: false, //y轴是否自动            --默认不自动 false\n    xWidth: 55, //x轴label                 --默认像素宽度70\n    legendRight: '38%', //图例具右侧位置   --默认center居中\n    ysplitLine: '#F1F3F5', //y轴横向分割线颜色 --默认#F1F3F5\n    legendShow: false, //图例是否展示  --默认展示true\n    splitNum: [4, 4, 5, 6], //x轴label换行 --默认值 3 3 4 6  四个阶段 <=4 | 5-7| 8-9 |10-14\n    legend: ['正面占比', '中立占比', '负面占比'], //必选参数\n    xAxis: ['只想要你知道', '遥不可及的你', '只要平凡', '时间飞行', '对你太想念'],\n    yAxis: [\n        [20, 15, 12, 18, 17, 9, 8, 7, 7, 8, 7, 3, 5]\n    ],\n    color: ['#7091C4'] //柱子颜色 必填参数\n}\n\n\nvar _this = this;\nvar action = data.action || false\nvar symbol = data.symbol || ' '\nvar splitNum = data.splitNum || [4, 4, 4, 6, 8, 10]\nlet xAxis = data.xAxis\n\n// 保留一位小数，可选择性使用\nfunction utilNumDecimal(x) {\n    if (x == 0) return '0.0'\n    if (!x) return '-'\n    if (isNaN(x)) {\n        return '--';\n    }\n    let f = Math.round(x * 10) / 10;\n    let s = f.toString();\n    let rs = s.indexOf('.');\n    if (rs < 0) {\n        rs = s.length;\n        s += '.';\n    }\n    while (s.length <= rs + 1) {\n        s += '0';\n    }\n    return s;\n}\n\nvar myData = (function test() {\n    let yAxis = data.yAxis\n    let legend = data.legend\n    let seriesLabel = data.seriesLabel === false ? false : true\n    let seriesArr = []\n    let legendArr = []\n    yAxis && yAxis.forEach((item, index) => {\n        legendArr.push({\n            name: legend[index]\n        })\n\n        var tempArr = [];\n        let num = '';\n        item.forEach((value, _) => {\n            if (value || value === 0) {\n                num = value\n            } else {\n                num = 'null';\n            }\n            tempArr.push(num);\n        })\n\n        seriesArr.push({\n            name: legend[index],\n            type: 'bar',\n            barGap: .4,\n            data: tempArr,\n            barCategoryGap: '2%',\n            barWidth: data.barWidth || 12,\n            label: {\n                normal: {\n                    show: seriesLabel,\n                    formatter: function(data) {\n                        return utilNumDecimal(data.value)\n                    },\n                    position: 'top',\n                    textStyle: {\n                        color: '#414957',\n                        fontStyle: 'normal',\n                        fontFamily: '微软雅黑',\n                        textAlign: 'left',\n                        fontSize: 11,\n                    },\n                },\n            },\n            itemStyle: { //图形样式\n                normal: {\n                    barBorderRadius: 4,\n                    color: data.color[index]\n                },\n            }\n        })\n    })\n    return {\n        seriesArr,\n        legendArr\n    }\n})()\n\n\noption = {\n    backgroundColor: '#fff',\n    title: {\n        show: true,\n        text: data.title,\n    },\n    tooltip: {\n        trigger: 'axis',\n        formatter: function(params) {\n            var time = '';\n            var str = '';\n            for (var i of params) {\n                time = i.name.replace(/\\n/g, '') + '<br/>';\n                if (i.data == 'null' || i.data == null) {\n                    str += '<span style=\"height: 10px;width: 10px;display: inline-block;border-radius: 50%;background:' +\n                        data.color[i.seriesIndex] + '\"></span> ' + i.seriesName + '：无数据' + '<br/>'\n                } else {\n                    str += '<span style=\"height: 10px;width: 10px;display: inline-block;border-radius: 50%;background:' +\n                        data.color[i.seriesIndex] + '\"></span> ' + i.seriesName + '：' + i.data + symbol + '<br/>'\n                }\n\n            }\n            return time + str;\n        },\n        axisPointer: {\n            type: 'none'\n        }\n    },\n    legend: {\n        show: data.legendShow === false ? false : true,\n        right: data.legendRight || 'center',\n        top: 20,\n        itemWidth: 10,\n        itemHeight: 10,\n        itemGap: 10,\n        borderRadius: 4,\n        data: myData.legendArr,\n        textStyle: {\n            color: '#414957',\n            fontStyle: 'normal',\n            fontFamily: '微软雅黑',\n            fontSize: 12,\n        }\n    },\n    grid: {\n        x: 46,\n        y: 80,\n        x2: 30,\n        y2: 54,\n    },\n    xAxis: {\n        type: 'category',\n        data: xAxis,\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n            show: true,\n            interval: '0',\n            textStyle: {\n                color: '#687284',\n                align: 'center',\n                whiteSpace: 'wrap',\n                lineHeight: 15,\n                height: 50,\n                fontSize: 10\n            },\n            rich: {\n                normal: {\n                    height: 18,\n                },\n            },\n            formatter: function(params, index) {\n                var newParamsName = \"\";\n                var splitNumber = 5;\n                var paramsNameNumber = params && params.length;\n                if (paramsNameNumber && paramsNameNumber <= 4) {\n                    splitNumber = splitNum[0] || 4;\n                } else if (paramsNameNumber >= 5 && paramsNameNumber <= 7) {\n                    splitNumber = splitNum[1] || 4;\n                } else if (paramsNameNumber >= 8 && paramsNameNumber <= 9) {\n                    splitNumber = splitNum[2] || 4;\n                } else if (paramsNameNumber >= 10 && paramsNameNumber <= 14) {\n                    splitNumber = splitNum[3] || 5;\n                } else if (paramsNameNumber >= 15 && paramsNameNumber <= 16) {\n                    splitNumber = splitNum[4] || 6;\n                } else if (paramsNameNumber >= 17 && paramsNameNumber <= 20) {\n                    splitNumber = splitNum[5] || 6;\n                } else {\n                    params = params && params.slice(0, 21);\n                }\n\n                var provideNumber = splitNumber; //一行显示几个字\n                var rowNumber = Math.ceil(paramsNameNumber / provideNumber) || 0;\n                if (paramsNameNumber > provideNumber) {\n                    for (var p = 0; p < rowNumber; p++) {\n                        var tempStr = \"\";\n                        var start = p * provideNumber;\n                        var end = start + provideNumber;\n                        if (p == rowNumber - 1) {\n                            tempStr = params.substring(start, paramsNameNumber);\n                        } else {\n                            tempStr = params.substring(start, end) + \"\\n\";\n                        }\n                        newParamsName += tempStr;\n                    }\n\n                } else {\n                    newParamsName = params;\n                }\n\n                let tag = 'normal'\n                let arr = newParamsName.split('\\n')\n                let str = []\n                switch (arr.length) {\n                    case 3:\n                        arr.forEach((item, index) => {\n                            str.push('{' + tag + '|' + item + '}')\n                        })\n                        break;\n                    case 2:\n                        arr.forEach((item, index) => {\n                            str.push('{' + tag + '|' + item + '}')\n                        })\n                        str.push('{' + tag + '|' + ' ' + '}')\n                        break;\n                    case 1:\n                        arr.forEach((item, index) => {\n                            str.push('{' + tag + '|' + item + '}')\n                        })\n                        str.push('{' + tag + '|' + ' ' + '}')\n                        str.push('{' + tag + '|' + ' ' + '}')\n                        break;\n                    default:\n                }\n                return str.join('\\n');\n            },\n            color: '#687284',\n        }\n    },\n    yAxis: {\n        scale: data.scale === true ? true : false,\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            show: data.yAxisLabel || false,\n            textStyle: {\n                color: '#687284'\n            }\n        },\n        splitLine: {\n            show: true,\n            lineStyle: { // 属性lineStyle（详见lineStyle）控制线条样式\n                color: data.ysplitLine || '#F1F3F5',\n                type: 'solid'\n            },\n        },\n    },\n    series: myData.seriesArr\n};\n","html":"","externalScripts":"","updaterUID":"bd-599414847","theme":"","layout":"","viewCount":585,"userName":"A***M","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_ojQGgSIk.png?v=1548391362775","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"A***M"}}