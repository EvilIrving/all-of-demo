{"status":0,"data":{"cid":"xHrQkrfazj","authorUid":"obd-oEuwE8rqJAt_T4-qcEup3aGx2Sp8a4P","authorUserName":"131*****589","title":"50MW集中式","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-05T05:23:30.000Z","lastUpdateTime":"2020-06-05T05:23:30.000Z","auth":2,"uid":"obd-oEuwE8rqJAt_T4-qcEup3aGx2Sp8a4P","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-05T05:23:30.000Z","code":"var colors = [\r\n    \"#3CB371\",\r\n    \"#3CB371\",\r\n    \"#3CB371\",\r\n    \"#FFA500\",\r\n    \"#DC143C\"\r\n]\r\nvar getdata = function getData() {\r\n    let data = {\r\n        name: \"升压站\",\r\n        value: 0,\r\n        children: []\r\n    };\r\n    for (let i = 1; i <= 50; i++) {\r\n        let obj = {\r\n            name: i + \"#箱变\",\r\n            value: i,\r\n            children: [],\r\n        };\r\n        for (let j = 1; j <= 2; j++) {\r\n            let obj2 = {\r\n                name: `逆变器-${i}-${j}`,\r\n                value: 1 + \"-\" + i + \"-\" + j,\r\n            };\r\n            if (j % 2 == 1) {\r\n                obj2.children = []\r\n                for (let k = 1; k <= 7; k++) {\r\n                    let obj3 = {\r\n                        name: `汇流箱-${i}-${j}-${k}`,\r\n                        value: 1 + \"-\" + i + \"-\" + j + '-' + k,\r\n                    };\r\n                    obj2.children.push(obj3);\r\n                }\r\n            }\r\n\r\n            obj.children.push(obj2);\r\n        }\r\n\r\n        data.children.push(obj);\r\n    }\r\n    let arr = []\r\n    arr.push(data)\r\n    // \r\n    arr = handle(arr, 0)\r\n    console.log(arr);\r\n    return arr;\r\n}\r\nvar handle = function handleData(data, index, color = '#00f6ff') {\r\n    //index标识第几层\r\n    return data.map((item, index2) => {\r\n        //计算出颜色\r\n        if (index == 1) {\r\n            color = colors.find((item, eq) => eq == index2 % 5);\r\n        }\r\n        // 设置节点大小\r\n        if (index === 0 || index === 1) {\r\n            item.label = {\r\n                position: \"inside\",\r\n                //   rotate: 0,\r\n                //   borderRadius: \"50%\",\r\n            }\r\n        }\r\n        // 设置label大小\r\n        switch (index) {\r\n            case 0:\r\n                item.symbolSize = 70\r\n                break;\r\n            case 1:\r\n                item.symbolSize = 20\r\n                break;\r\n            default:\r\n                item.symbolSize = 10\r\n                break;\r\n        }\r\n        // 设置线条颜色\r\n        item.lineStyle = {\r\n            color: color\r\n        }\r\n\r\n        if (item.children) { //存在子节点\r\n            item.itemStyle = {\r\n                borderColor: color,\r\n                color: color\r\n            };\r\n            item.children = handle(item.children, index + 1, color)\r\n        } else { //不存在\r\n            item.itemStyle = {\r\n                color: 'transparent',\r\n                borderColor: color\r\n            };\r\n        }\r\n        return item\r\n    })\r\n}\r\n\r\nvar option = {\r\n    type: \"tree\",\r\n    backgroundColor: \"#000\",\r\n    toolbox: { //工具栏\r\n        show: true,\r\n        iconStyle: {\r\n            borderColor: \"#03ceda\"\r\n        },\r\n        feature: {\r\n            restore: {}\r\n        }\r\n    },\r\n    tooltip: { //提示框\r\n        trigger: \"item\",\r\n        triggerOn: \"mousemove\",\r\n        backgroundColor: \"rgba(1,70,86,1)\",\r\n        borderColor: \"rgba(0,246,255,1)\",\r\n        borderWidth: 0.5,\r\n        textStyle: {\r\n            fontSize: 10\r\n        }\r\n    },\r\n    series: [{\r\n        type: \"tree\",\r\n        hoverAnimation: true, //hover样式\r\n        data: getdata(),\r\n        top: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n        layout: \"radial\",\r\n        symbol: \"circle\",\r\n        symbolSize: 10,\r\n        nodePadding: 20,\r\n        animationDurationUpdate: 750,\r\n        expandAndCollapse: true, //子树折叠和展开的交互，默认打开\r\n        initialTreeDepth: 2,\r\n        roam: true, //是否开启鼠标缩放和平移漫游。scale/move/true\r\n        focusNodeAdjacency: true,\r\n        itemStyle: {\r\n            borderWidth: 1,\r\n        },\r\n        label: { //标签样式\r\n            color: \"#fff\",\r\n            fontSize: 10,\r\n            fontFamily: \"SourceHanSansCN\",\r\n            //position: \"top\",\r\n            //rotate: 0,\r\n        },\r\n        lineStyle: {\r\n            width: 1,\r\n            curveness: 0.5,\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oEuwE8rqJAt_T4-qcEup3aGx2Sp8a4P","theme":"","layout":"","viewCount":519,"userName":"131*****589","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHrQkrfazj.png?v=1591334610852","isCustomThumbnail":0,"builtinTags":["category-work","series-tree","toolbox","tooltip"],"customTags":[],"updaterUserName":"131*****589"}}