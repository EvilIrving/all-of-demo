{"status":0,"data":{"cid":"xl2zVavO6M","authorUid":"bd-214907976","authorUserName":"z***i","title":"shenzhen_renting","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-07-13T14:21:02.000Z","lastUpdateTime":"2019-07-13T14:21:02.000Z","auth":2,"uid":"bd-214907976","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-13T14:33:30.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1563027599464-1FFL7-UD7.json\";\n\n\n\nvar t_pos = {\n    left: 0,\n    top: 0\n}\n\nvar last_point = [0, 0];\nvar counter = 0;\nmyChart.showLoading();\nmyChart.setOption(option = {\n    title: {\n        x: 'right',\n        text: \"Shenzhen Renting\",\n        subtext: 'Data collected from lianjia',\n        textStyle: {\n            color: '#fff',\n            fontSize: 30\n        }\n    },\n    tooltip: {\n        trigger: 'item',\n        transitionDuration: 0,\n        position: function(point, params, dom, rect, size) {\n            var least_area = 20;\n            var offset_x = 30; /* 相对于point的偏移 */\n            var offset_y = 30;\n\n            /* last_point的least_area范围内不会产生新的t_pos */\n            if (Math.abs(point[0] - last_point[0]) < least_area &&\n                Math.abs(point[1] - last_point[1]) < least_area &&\n                counter >= 2) {\n                return t_pos;\n            }\n            if (Math.abs(point[0] - last_point[0]) >= least_area ||\n                Math.abs(point[1] - last_point[1]) >= least_area) {\n                counter = 0;\n            }\n            counter += 1;\n            /* 使real_x,real_y有数值 */\n            if (counter == 1) {\n                t_pos.left = point[0] + offset_x;\n                t_pos.top = point[1] + offset_y;\n                last_point = [point[0], point[1]];\n            }\n            /* 此处进行修正tooltip的位置 */\n            if (counter == 2) {\n                var real_x = $(dom).position().left;\n                var real_y = $(dom).position().top;\n                t_pos.left += point[0] - real_x + offset_x;\n                t_pos.top += point[1] - real_y + offset_y;\n            }\n            return t_pos;\n        },\n        formatter: function(params) {\n            return params.elevation;\n        }\n    },\n    animation: false,\n    bmap: {\n        center: [114, 22.6],\n        zoom: 11,\n        roam: true,\n        mapStyle: {\n            'styleJson': [{\n                \"featureType\": \"water\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#021019\"\n                }\n            }, {\n                \"featureType\": \"highway\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"highway\",\n                \"elementType\": \"geometry.stroke\",\n                \"stylers\": {\n                    \"color\": \"#147a92\"\n                }\n            }, {\n                \"featureType\": \"arterial\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"arterial\",\n                \"elementType\": \"geometry.stroke\",\n                \"stylers\": {\n                    \"color\": \"#0b3d51\"\n                }\n            }, {\n                \"featureType\": \"local\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"land\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#08304b\"\n                }\n            }, {\n                \"featureType\": \"railway\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"railway\",\n                \"elementType\": \"geometry.stroke\",\n                \"stylers\": {\n                    \"color\": \"#08304b\"\n                }\n            }, {\n                \"featureType\": \"subway\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"lightness\": -70\n                }\n            }, {\n                \"featureType\": \"building\",\n                \"elementType\": \"geometry.fill\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"all\",\n                \"elementType\": \"labels.text.fill\",\n                \"stylers\": {\n                    \"color\": \"#857f7f\"\n                }\n            }, {\n                \"featureType\": \"all\",\n                \"elementType\": \"labels.text.stroke\",\n                \"stylers\": {\n                    \"color\": \"#000000\"\n                }\n            }, {\n                \"featureType\": \"building\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#022338\"\n                }\n            }, {\n                \"featureType\": \"green\",\n                \"elementType\": \"geometry\",\n                \"stylers\": {\n                    \"color\": \"#062032\"\n                }\n            }, {\n                \"featureType\": \"boundary\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#1e1c1c\"\n                }\n            }, {\n                \"featureType\": \"manmade\",\n                \"elementType\": \"all\",\n                \"stylers\": {\n                    \"color\": \"#022338\"\n                }\n            }]\n        }\n    },\n    visualMap: {\n        show: false,\n        top: 'top',\n        min: 0,\n        max: 6,\n        seriesIndex: 0,\n        calculable: true,\n        inRange: {\n            color: ['green', 'green', 'green','yellow', 'yellow','yellow','red']\n        }\n\n    },\n    series: [{\n        type: 'heatmap',\n        coordinateSystem: 'bmap',\n        pointSize: 8,\n        blurSize: 6\n    }]\n});\nif (!app.inNode) {\n    // 添加百度地图插件\n    var bmap = myChart.getModel().getComponent('bmap').getBMap();\n    bmap.addControl(new BMap.MapTypeControl());\n}\n\n\nif (option && typeof option === \"object\") {\n    myChart.setOption(option, true);\n}\n\n$.getJSON(uploadedDataURL, function(data) {\n    var points = [].concat.apply([], data.map(function (track) {\n        return track.map(function (seg) {\n            return seg.coord.concat([1]);\n        });\n    }));\n\n    myChart.hideLoading();\n    myChart.setOption({\n        series: [{\n            data: points\n        }]\n    });\n});","html":"","externalScripts":"http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-214907976","theme":"","layout":"","viewCount":25,"userName":"z***i","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xl2zVavO6M.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"z***i"}}