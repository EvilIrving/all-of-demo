{"status":0,"data":{"cid":"xuiW1V9rXx","authorUid":"bd-4013131402","authorUserName":"o***4","title":"根据数据自动计算出的阶梯瀑布图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-11-25T07:46:06.000Z","lastUpdateTime":"2018-11-25T07:46:06.000Z","auth":2,"uid":"bd-4013131402","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-02T08:28:59.000Z","code":"var data = [200, -320, -30, 400, 200, -300, -800];\nvar help = [];\nvar positive = [];\nvar negative = [];\nvar min = Number.MAX_VALUE;\n\nfor (var i = 1, sum = 0; i < data.length + 1; ++i) {\n    sum += data[i - 1];\n    if (sum < min) {\n        min = sum;\n    }\n}\nconsole.log('min', min);\n\n\nfor (var i = 0, sum = -min; i < data.length; ++i) {\n    if (data[i] >= 0) {\n        positive.push(data[i]);\n        negative.push('-');\n    } else {\n        positive.push('-');\n        negative.push(-data[i]);\n    }\n\n    if (i === 0) {\n        console.log('sum', sum);\n        help.push(-min);\n    } else {\n        console.log(data[i-1], '+', sum, '=', data[i - 1] + sum)\n        sum += data[i - 1];\n        \n        if (data[i] < 0) {\n            console.log('sum', sum + data[i]);\n            help.push(sum + data[i]);\n        } else {\n            console.log('sum', sum);\n            help.push(sum);\n        }\n    }\n}\n\noption = {\n    title: {\n        text: '根据数据自动计算出的阶梯瀑布图'\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    xAxis: {\n        type: 'category',\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n            color: '#bbb'  \n        },\n        data: function() {\n            var list = [];\n            for (var i = 1; i <= 11; i++) {\n                list.push('11月' + i + '日');\n            }\n            return list;\n        }()\n    },\n    yAxis: {\n        type: 'value',\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        min: 0,\n        axisLabel: {\n            color: '#b2b2b2',\n            formatter: function (value) {\n                return (value + min) + '亿';\n            }\n        },\n        axisTick: {\n            show: false\n        },\n    },\n    series: [{\n            name: '辅助',\n            type: 'bar',\n            stack: '总量',\n            itemStyle: {\n                barBorderColor: 'rgba(0,0,0,0)',\n                color: 'rgba(0,0,0,0)'\n            },\n            emphasis: {\n                itemStyle: {\n                    barBorderColor: 'rgba(0,0,0,0)',\n                    color: 'rgba(0,0,0,0)'\n                }\n            },\n            data: help\n        },\n        {\n            name: '收入',\n            type: 'bar',\n            stack: '总量',\n            data: positive,\n            itemStyle: {\n                color: '#d06c65'\n            }\n        },\n        {\n            name: '支出',\n            type: 'bar',\n            stack: '总量',\n            data: negative,\n            itemStyle: {\n                color: '#6fb672'\n            }\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-4013131402","theme":"","layout":"","viewCount":125,"userName":"o***4","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xuiW1V9rXx.png?v=1543739339419","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title"],"customTags":[],"updaterUserName":"o***4"}}