{"status":0,"data":{"cid":"xXWymXXuV","authorUid":"bd-4161428444","authorUserName":"b***n","title":"进货频率-定时随机颜色","description":"Math.random()\n","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-28T10:37:51.000Z","lastUpdateTime":"2019-11-28T10:37:51.000Z","auth":2,"uid":"bd-4161428444","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-28T10:37:51.000Z","code":"var now = new Date('2019-10-1'); //初始日期\r\nvar dataDay = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],\r\n    yDate = [];\r\nfor (var i = 1; i <= dataDay.length; i++) {\r\n    var day = now.getDate(); /*now.getFullYear() + \"-\" + (now.getMonth() + 1) + \"月\" +*/\r\n    yDate.push(day);\r\n    yDate = yDate.sort(sorting).reverse();\r\n    now.setDate(now.getDate() + 1);\r\n}\r\n\r\nfunction sorting(a, b) {\r\n    return a - b\r\n}\r\n//console.log(JSON.stringify(yDate));\r\nvar data_ep = [820, 970, 240, 100, 470, 580, 270, 240, 500, 410, 820, 270, 640, 300, 140, 520, 270, 640, 100, 410, 820, 270, 240, 300, 410, 520, 170, 220, 100, 170, 471];\r\n\r\nvar colorList = [\r\n    '#ff7f50', '#87cefa', '#da70d6', '#32cd32', '#6495ed',\r\n    '#ff69b4', '#ba55d3', '#cd5c5c', '#ffa500', '#40e0d0'\r\n];\r\nvar rand = parseInt(Math.random() * colorList.length); //获取不同随机数\r\n\r\n//初始化echarts\r\nvar initChart = function(rand) {\r\n\r\n    option = {\r\n        backgroundColor: '#f8f8f8', //背景色\r\n        title: {\r\n            text: '进货频率',\r\n            x: 'center',\r\n            y: '5',\r\n            textStyle: {\r\n                fontSize: 16,\r\n                fontWeight: '400',\r\n                color: '#666' // 主标题文字颜色\r\n            }\r\n        },\r\n        tooltip: {\r\n            trigger: 'axis', //axis , item\r\n            backgroundColor: 'rgba(4, 22, 62, .6)',\r\n            borderColor: '#59dcff',\r\n            borderWidth: 1,\r\n            borderRadius: 0,\r\n            axisPointer: {\r\n                type: 'shadow'\r\n            },\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n            confine: true, //是否将 tooltip 框限制在图表的区域内\r\n            formatter: function(params, ticket, callback) {\r\n                var res = now.getFullYear() + \"年\" + now.getMonth() + \"月\" + params[0].name + \"日\" + \"<br>进货频率：\" + params[0].name + \"次\";\r\n                for (var i = 0, l = params.length; i < l; i++) {\r\n                    res += '<br/>' + '单位数：' + params[i].value + '家';\r\n                }\r\n                setTimeout(function() {\r\n                    callback(ticket, res); // 仅为了模拟异步回调\r\n                }, 3000)\r\n                return res;\r\n            }\r\n        },\r\n        legend: {\r\n            show: true,\r\n            x: 'center',\r\n            y: 'bottom'\r\n        },\r\n        toolbox: {\r\n            show: false\r\n        },\r\n        grid: {\r\n            x: 45,\r\n            y: 50,\r\n            width: '86%',\r\n            height: '85%',\r\n        },\r\n        xAxis: [{\r\n            type: 'value',\r\n            position: 'bottom',\r\n            boundaryGap: true, //边界间隙\r\n            name: '\\n\\n\\xa0(频率)',\r\n            nameTextStyle: {\r\n                color: '#666',\r\n                fontSize: 13\r\n            },\r\n            offset: 4,\r\n            axisLabel: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#04163c',\r\n                    fontSize: 13\r\n                }\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: 'rgba(0, 54, 93, .9)'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false //坐标轴小标记\r\n            },\r\n            splitLine: {\r\n                show: true, //是否显示分割线\r\n                lineStyle: {\r\n                    color: 'rgba(0, 54, 93, .5)', //纵向向网格线颜色\r\n                    type: 'dashed',\r\n                    width: 1\r\n                }\r\n            }\r\n        }, {\r\n            type: 'value',\r\n            min: 0,\r\n            max: 100,\r\n            boundaryGap: false, //边界间隙\r\n            offset: 1,\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#04163c',\r\n                    fontSize: 12\r\n                },\r\n                formatter: '{value}%'\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: 'rgba(18,104,174,.5)'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false //坐标轴小标记\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        }],\r\n        yAxis: {\r\n            type: 'category',\r\n            position: 'left',\r\n            name: '日期\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0\\xa0', // \\xa0表示空格\r\n            nameTextStyle: {\r\n                color: '#666',\r\n                fontSize: 13\r\n            },\r\n            nameGap: 22,\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#04163c',\r\n                    fontSize: 13\r\n                },\r\n                margin: 4,\r\n                interval: 4 //y轴坐标间隔\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: 'rgba(0, 54, 93, .9)',\r\n                    width: 1\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false, //坐标轴小标记\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            data: yDate //载入y轴数据\r\n        },\r\n        series: [{\r\n            name: '企业数',\r\n            type: 'bar',\r\n            data: data_ep,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right', //top,inside,insideTop,...\r\n                    textStyle: {\r\n                        color: '#04163c'\r\n                    }\r\n                }\r\n            },\r\n            barWidth: 12,\r\n            itemStyle: {\r\n                normal: {\r\n                    //color:'#009cff', //图形颜色\r\n                    /*color:new echarts.graphic.LinearGradient(0, 1, 1, 0, [{ //new echarts.graphic.RadialGradient(0.5,0.5,1, [{\r\n                            offset: 0,\r\n                            color: '#0092f7'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: '#85e9ff'\r\n                    }])*/\r\n                    color: colorList[rand] //随机颜色\r\n                }\r\n            }\r\n        }]\r\n    };\r\n\r\n    // 使用刚指定的配置项和数据显示图表\r\n    myChart.setOption(option);\r\n    return myChart;\r\n};\r\n\r\ninitChart(rand);\r\n\r\nsetInterval(function() {\r\n    var rand2 = parseInt(Math.random() * colorList.length); //获取不同随机数\r\n    initChart(rand2);\r\n\r\n}, 3000);","html":"","externalScripts":"","updaterUID":"bd-4161428444","theme":"","layout":"","viewCount":78,"userName":"b***n","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xXWymXXuV.png?v=1574937471794","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"b***n"}}