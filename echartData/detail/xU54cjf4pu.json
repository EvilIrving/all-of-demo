{"status":0,"data":{"cid":"xU54cjf4pu","authorUid":"bd-1680604854","authorUserName":"雾***鹿","title":"饼图+阴影","description":"","latestVersion":6,"alwaysLatest":0,"createTime":"2022-01-19T03:46:18.000Z","lastUpdateTime":"2022-01-20T01:46:00.000Z","auth":2,"uid":"bd-1680604854","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-20T01:46:00.000Z","code":"//颜色16进制换算rgba,添加透明度\nfunction hexToRgba(hex, opacity) {\n    return (\n        'rgba(' +\n        parseInt('0x' + hex.slice(1, 3)) +\n        ',' +\n        parseInt('0x' + hex.slice(3, 5)) +\n        ',' +\n        parseInt('0x' + hex.slice(5, 7)) +\n        ',' +\n        opacity +\n        ')'\n    );\n}\n\n// 数据\nchartdata = [\n    {\n        name: '谷峰差收益',\n        value: 90.04,\n    },\n    {\n        name: '充电桩收益',\n        value: 5.13,\n    },\n    {\n        name: '需求响应',\n        value: 2.31,\n    },\n    {\n        name: '需量管理',\n        value: 2.52,\n    },\n];\n// 颜色系列\ncolor = ['#00d2ff', '#22e5d1', '#f4d64e', '#0072ff'];\nlet color1 = [],\n    color2 = [],\n    color3 = [];\n// 设置每层圆环颜色和添加间隔的透明色\ncolor.forEach((item) => {\n    color1.push(item, 'transparent');\n    color2.push(hexToRgba(item, 0.7), 'transparent');\n    color3.push(hexToRgba(item, 0.4), 'transparent');\n});\nlet data1 = [];\nlet sum = 0;\n// 根据总值设置间隔值大小\nchartdata.forEach((item) => {\n    sum += Number(item.value);\n});\n// 给每个数据后添加特定的透明的数据形成间隔\nchartdata.forEach((item, index) => {\n    if (item.value !== 0) {\n        data1.push(item, {\n            name: '',\n            value: sum / 70,\n            labelLine: {\n                show: false,\n                lineStyle: {\n                    color: 'transparent',\n                },\n            },\n            itemStyle: {\n                color: 'transparent',\n            },\n        });\n    }\n});\nconsole.log(color2, color3)\noption = {\n    backgroundColor: '#131D25',\n    grid: {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n        containLabel: true,\n    },\n    tooltip: {\n        formatter: (params) => {\n            if (params.name !== '') {\n                return params.name + ' : ' + params.value + '\\n' + '%';\n            }\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: ['55%', '52%'],\n            center: ['50%', '50%'],\n            hoverAnimation: false,\n            startAngle: 90,\n            selectedMode: 'single',\n            selectedOffset: 0,\n            itemStyle: {\n                normal: {\n                    color: (params) => {\n                        console.log('params', params)\n                        return color2[params.dataIndex];\n                    },\n                },\n            },\n            label: {\n                show: false,\n                formatter: '{b}' + ' ' + '{c}',\n            },\n            data: data1,\n            z: 666,\n        },\n        {\n            type: 'pie',\n            radius: ['44%', '55%'],\n            center: ['50%', '50%'],\n            hoverAnimation: false,\n            startAngle: 90,\n            selectedMode: 'single',\n            selectedOffset: 0,\n            itemStyle: {\n                normal: {\n                    color: (params) => {\n                        return color3[params.dataIndex];\n                    },\n                },\n            },\n            label: {\n                show: false,\n                formatter: '{b}' + ' ' + '{c}',\n            },\n            data: data1,\n            z: 666,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-1680604854","theme":"","layout":"","viewCount":0,"userName":"雾***鹿","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xU54cjf4pu.png?v=1642643160326","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","tooltip"],"customTags":[],"updaterUserName":"雾***鹿"}}