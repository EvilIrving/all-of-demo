{"status":0,"data":{"cid":"xObrWoe6JA","authorUid":"bd-2341513011","authorUserName":"k***雪","title":"140","description":"违规总次数","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-05T10:38:06.000Z","lastUpdateTime":"2021-07-05T10:38:06.000Z","auth":2,"uid":"bd-2341513011","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-05T10:38:06.000Z","code":"let list = [\n    {\n        value: 13,\n        name: '吸烟',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    },\n    {\n        value: 12,\n        name: '未带安全帽',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    },\n    {\n        value: 12,\n        name: '未穿反光衣',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    },\n    {\n        value: 12,\n        name: '越界闯入',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    },\n    {\n        value: 43,\n        name: '火焰',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    },\n    {\n        value: 43,\n        name: '未戴安全绳',\n        label: {\n            color: '#666'\n        },\n        itemStyle: {\n\n        },\n        emphasis: {\n            itemStyle: {\n\n            }\n        }\n    }\n];\nfunction angleText(i, num) {\n    //每个元素的角度\n    var everyAngle = 360 / num;\n    //文字现在所在的角度\n    var currentAngle = i * everyAngle + everyAngle / 2;\n    //文字所在模块的所占角度\n    var currentArea = (i + 1) * everyAngle;\n  \n    if (currentAngle <= 90) {\n        return -currentAngle;\n    } else if (currentAngle <= 180 && currentAngle > 90) {\n        return 180 - currentAngle;\n    } else if (currentAngle < 270 && currentAngle > 180) {\n        return 180 - currentAngle;\n    } else if (currentAngle < 360 && currentAngle >= 270) {\n        return 360 - currentAngle;\n    }\n}\n//有值的色图的正切处理\nvar data3 = [];\ndata3 = JSON.parse(JSON.stringify(list));\nfor (var i = 0; i < data3.length; i++) {\n    if (i === 0) {\n        data3[i]['label']['color'] = '#333';\n        data3[i]['label']['rotate'] = angleText(i, data3.length);\n    } else {\n        data3[i]['label']['color'] = '#666';\n        data3[i]['label']['rotate'] = angleText(i, data3.length);\n    }\n}\nlet colorList =  ['#FFC67E', '#5DB7D2', '#BF8AF2', '#FF945E', '#1773DD','#61D79B'];\noption = {\n    backgroundColor: '#fff',\n\n    tooltip: {\n        trigger: 'item',\n        formatter: '{b} <br/> {c}'+'人',\n          backgroundColor: \"rgba(67,100,247,0.8)\",\n          padding: [10, 10],\n          axisPointer: {\n            type: \"shadow\",\n            shadowStyle: {\n              color: \"rgba(67,100,247,0.08)\",\n            },\n          },\n    },\n\n    title: {\n        text: '140',\n        subtext: '违规总次数',\n        x: '30%',\n        y: '43%',\n        textStyle: {\n            fontSize: 50,\n            fontWeight: 'normal',\n            color: '#333',\n        },\n        subtextStyle: {\n            fontSize: 20,\n            fontWeight: 'normal',\n            align: 'center',\n            color: '#555',\n        },\n    },\n     legend: {\n        orient: 'vertical',\n        left:'70%',\n        align:'left',\n        top:'middle',\n        itemWidth: 13,\n        itemHeight: 13,\n        icon: 'circle',\n        itemGap: 50,\n        data: list,\n        formatter: function(name) {\n            console.log('name--',name)\n            var res = ''\n            for (var i = 0; i < list.length; i++) {\n                if(list[i].name== name){\n                    res+= '{a|'+ name + '}' + '{b|' + list[i].value + '}'\n                }\n            }\n            return res\n        },\n        textStyle: {\n            color:'#000',\n            rich: {\n                a: {\n                    fontSize: 14,\n                    color:'#666',\n                    padding: [0, 10, 0, 6]\n                },\n                b: {\n                    fontSize: 14,\n                    color:'#666',\n                }\n            }\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            zlevel: 3,\n            radius: ['130', '200'],\n            center: ['35%', '50%'],\n            color:colorList,\n            itemStyle: {\n                normal: {\n                    borderWidth: 10,\n                    borderColor: '#fff',\n                },\n            },\n            data: list,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            label: {\n                normal: {\n                    position: 'inside',\n                    formatter: '{c|{c}%}',\n                    rich: {\n                        b: {\n                            fontSize: 14,\n                            color: '#666',\n                            align: 'left',\n                            padding: 4,\n                        },\n                        c: {\n                            fontSize: 20,\n                            align: 'center',\n                            color:'#fff',\n                            padding: 4,\n                        },\n                    },\n                },\n            },\n        },\n        {\n                // 最外圆圈\n                type: 'pie',\n                zlevel: 1,\n                  roseType: 'area',\n                silent: true, //取消高亮\n                radius:  ['52%', '53%'],\n                center: ['35%', '50%'],\n                itemStyle: {\n                    normal: {\n                        color:'#fff'\n                    }\n                },\n                labelLine: {\n                    show: false,\n                    normal: {\n                        length: 10,\n                        length2: 0,\n                        lineStyle: {\n                            color: 'transparent'\n                        }\n                    }\n                },\n                animation: false,\n                label: {\n                    show: true,\n                textStyle: {\n                    fontSize: 16,\n                    color: '#666'\n                },\n                position: 'inside',\n                rotate: 30,\n                align: 'right',\n                },\n                data: data3,\n            },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-2341513011","theme":"","layout":"","viewCount":0,"userName":"k***雪","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xObrWoe6JA.png?v=1625481486660","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"k***雪"}}