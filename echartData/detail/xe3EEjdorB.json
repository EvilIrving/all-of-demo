{"status":0,"data":{"cid":"xe3EEjdorB","authorUid":"bd-258458457","authorUserName":"破***火","title":"省级下辖城市","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-05-28T05:34:27.000Z","lastUpdateTime":"2019-05-28T05:34:27.000Z","auth":2,"uid":"bd-258458457","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-28T05:41:09.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1559020853290-YCSshQA9J.json\";\r\n\r\n\r\nfunction calcSymbol(val, min, max, limitMin, limitMax) {\r\n    let nomalVal = (val - min) / (max - min) * (limitMax - limitMin) + limitMin;\r\n    return nomalVal;\r\n}\r\n\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    console.log('res', geoJson)\r\n    echarts.registerMap('hefei', geoJson);\r\n\r\n    option = {\r\n        \"title\": {\r\n            \"show\": false,\r\n            \"text\": \"全国门店布局\",\r\n            \"left\": \"24px\",\r\n            \"top\": \"24px\",\r\n            \"textStyle\": {\r\n                \"fontWeight\": \"normal\",\r\n                \"fontSize\": 20,\r\n                \"color\": \"#444\",\r\n            }\r\n        },\r\n        \"tooltip\": {\r\n            \"trigger\": \"item\",\r\n            \"backgroundColor\": \"#fff\",\r\n            \"padding\": [\r\n                0,\r\n                0,\r\n                0,\r\n                0\r\n            ],\r\n            \"textStyle\": {\r\n                \"color\": \"#333333\"\r\n            },\r\n            formatter: function(params, ticket, callback) {\r\n                if (!params.data || !params.data.cityId) {\r\n                    return\r\n                }\r\n                let personNum = null,\r\n                    personUnit = '',\r\n                    saleNum = null,\r\n                    saleUnit = '',\r\n                    htmls = '';\r\n                if (params.data.person > 100000) {\r\n                    personNum = (params.data.person / 10000).toFixed(2);\r\n                    personUnit = '万人次';\r\n                } else {\r\n                    personNum = params.data.person;\r\n                    personUnit = '人次';\r\n                }\r\n                if (params.data.sale > 100000) {\r\n                    saleNum = (params.data.sale / 10000).toFixed(2);\r\n                    saleUnit = '万元';\r\n                } else {\r\n                    saleNum = params.data.sale;\r\n                    saleUnit = '元';\r\n                }\r\n                htmls += '<div style=\"font-size:16px;height:31px;color:#0068FF;border-radius:4px;line-height:31px;padding-left:15px;padding-right:15px\">' + params.data.name + '</div>' +\r\n                    '<div>' +\r\n                    '<p style=\"font-size:14px;padding:4px 15px;color:\"#444444\"\">' + '开业时间: ' + params.data.openDate.split(' ')[0] + '</p>' +\r\n                    '<p style=\"font-size:14px;padding:4px 15px;color:\"#444444\"\">' + '今日客流: ' + personNum + personUnit + '</p>' +\r\n                    '<p style=\"font-size:14px;padding:4px 15px;color:\"#444444\"\">' + '今日销售额: ' + saleNum + saleUnit + '</p>' +\r\n                    '</div>'\r\n                return htmls;\r\n            },\r\n            \"extraCssText\": \"box-shadow: 0px 0px 10px -4px rgba(3, 3, 3, .4)\"\r\n        },\r\n        \"geo\": {\r\n            \"map\": \"hefei\",\r\n            \"scaleLimit\": {\r\n                \"min\": 1\r\n            },\r\n            \"label\": {\r\n                \"emphasis\": {\r\n                    \"show\": true,\r\n                    \"color\": '#fff'\r\n                },\r\n                \"normal\": {\r\n                    \"show\": true,\r\n                    \"color\": '#fff'\r\n                }\r\n            },\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"areaColor\": \"#2274e2\",\r\n                    \"borderColor\": \"#87ebff\"\r\n                },\r\n                \"emphasis\": {\r\n                    \"areaColor\": \"#2274e2\",\r\n                    \"show\": false\r\n                }\r\n            },\r\n            \"roam\": true\r\n        },\r\n        \"series\": [{\r\n                \"type\": \"scatter\",\r\n                \"name\": \"city\",\r\n                \"coordinateSystem\": \"geo\",\r\n                \"label\": {\r\n                    \"normal\": {\r\n                        \"show\": false,\r\n                        \"position\": \"right\",\r\n                        \"formatter\": \"{b}\"\r\n                    },\r\n                    \"emphasis\": {\r\n                        \"show\": false\r\n                    }\r\n                },\r\n                \"itemStyle\": {\r\n                    \"normal\": {\r\n                        \"show\": true,\r\n                        \"color\": \"#ffef34\"\r\n                    }\r\n                },\r\n                \"symbolSize\": function(val, params) {\r\n                    if (params.data.person && typeof(params.data.person) === 'number') {\r\n                        return calcSymbol(params.data.person, 203, 400, 10, 50);\r\n                    } else {\r\n                        return 0\r\n                    }\r\n                },\r\n                \"data\": [{\r\n                        \"id\": 2,\r\n                        \"name\": \"北京（有数据）\",\r\n                        \"cityId\": 2,\r\n                        \"cityName\": \"合肥\",\r\n                        \"value\": [\r\n                            117.4007434375,\r\n                            31.7372341132813\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 272,\r\n                        \"openDate\": \"2018-10-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 455,\r\n                        \"name\": \"许顺强门店\",\r\n                        \"cityId\": 2,\r\n                        \"cityName\": \"合肥\",\r\n                        \"value\": [\r\n                            117.371783476563,\r\n                            32.380844953125\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": \"--\",\r\n                        \"openDate\": \"2019-05-27 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 436,\r\n                        \"name\": \"上海02店\",\r\n                        \"cityId\": 75,\r\n                        \"cityName\": \"合肥\",\r\n                        \"value\": [\r\n                            117.283042,\r\n                            31.86119\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 395,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 437,\r\n                        \"name\": \"广州01店\",\r\n                        \"cityId\": 199,\r\n                        \"cityName\": \"广州市\",\r\n                        \"value\": [\r\n                            113.297874,\r\n                            23.138527\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 302,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 54,\r\n                        \"name\": \"北京02店\",\r\n                        \"cityId\": 2,\r\n                        \"cityName\": \"北京\",\r\n                        \"value\": [\r\n                            116.52521,\r\n                            39.938854\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 376,\r\n                        \"openDate\": \"2018-07-25 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 438,\r\n                        \"name\": \"广州02店\",\r\n                        \"cityId\": 199,\r\n                        \"cityName\": \"广州市\",\r\n                        \"value\": [\r\n                            113.310524,\r\n                            23.045977\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 405,\r\n                        \"openDate\": \"2019-04-30 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 439,\r\n                        \"name\": \"深圳01店\",\r\n                        \"cityId\": 201,\r\n                        \"cityName\": \"深圳市\",\r\n                        \"value\": [\r\n                            114.11054,\r\n                            22.531364\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 259,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 440,\r\n                        \"name\": \"北京03店\",\r\n                        \"cityId\": 2,\r\n                        \"cityName\": \"北京\",\r\n                        \"value\": [\r\n                            116.24781,\r\n                            39.990574\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 479,\r\n                        \"openDate\": \"2019-04-30 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 441,\r\n                        \"name\": \"北京04店\",\r\n                        \"cityId\": 2,\r\n                        \"cityName\": \"北京\",\r\n                        \"value\": [\r\n                            116.54677,\r\n                            39.855114\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 340,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 442,\r\n                        \"name\": \"西安01店\",\r\n                        \"cityId\": 294,\r\n                        \"cityName\": \"西安市\",\r\n                        \"value\": [\r\n                            109.00396,\r\n                            34.36634\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 367,\r\n                        \"openDate\": \"2019-05-07 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 443,\r\n                        \"name\": \"新疆01店\",\r\n                        \"cityId\": 331,\r\n                        \"cityName\": \"乌鲁木齐市\",\r\n                        \"value\": [\r\n                            87.595695,\r\n                            43.814114\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 203,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 444,\r\n                        \"name\": \"内蒙古01店\",\r\n                        \"cityId\": 27,\r\n                        \"cityName\": \"呼和浩特市\",\r\n                        \"value\": [\r\n                            111.779655,\r\n                            40.82746\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 500,\r\n                        \"openDate\": \"2019-05-08 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 29,\r\n                        \"name\": \"上海01店\",\r\n                        \"cityId\": 75,\r\n                        \"cityName\": \"上海\",\r\n                        \"value\": [\r\n                            121.48054,\r\n                            31.239882\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 353,\r\n                        \"openDate\": \"2018-11-01 00:00:00\"\r\n                    },\r\n                    {\r\n                        \"id\": 445,\r\n                        \"name\": \"广西01店\",\r\n                        \"cityId\": 220,\r\n                        \"cityName\": \"南宁市\",\r\n                        \"value\": [\r\n                            108.35735,\r\n                            22.798088\r\n                        ],\r\n                        \"sale\": \"--\",\r\n                        \"person\": 217,\r\n                        \"openDate\": \"2019-05-01 00:00:00\"\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                \"type\": \"map\",\r\n                \"map\": \"hefei\",\r\n                \"geoIndex\": 0,\r\n                \"roam\": true,\r\n                // \"mapType\":\"map\",\r\n                \"scaleLimit\": {\r\n                    \"min\": 10\r\n                },\r\n                \"label\": {\r\n                    \"normal\": {\r\n                        \"show\": false\r\n                    },\r\n                    \"emphasis\": {\r\n                        \"show\": true,\r\n                        \"color\": \"#fff\"\r\n                    }\r\n                },\r\n                \"itemStyle\": {\r\n                    \"normal\": {\r\n                        \"areaColor\": \"#2274e2\",\r\n                        \"borderColor\": \"#87ebff\"\r\n                    }\r\n                },\r\n                \"data\": [{\r\n                        \"name\": \"广西壮族自治区\",\r\n                        \"value\": 217\r\n                    },\r\n                    {\r\n                        \"name\": \"新疆\",\r\n                        \"value\": 203\r\n                    },\r\n                    {\r\n                        \"name\": \"陕西\",\r\n                        \"value\": 367\r\n                    },\r\n                    {\r\n                        \"name\": \"上海\",\r\n                        \"value\": 748\r\n                    },\r\n                    {\r\n                        \"name\": \"广东\",\r\n                        \"value\": 966\r\n                    },\r\n                    {\r\n                        \"name\": \"内蒙古自治区\",\r\n                        \"value\": 500\r\n                    },\r\n                    {\r\n                        \"name\": \"北京\",\r\n                        \"value\": 1467\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    }\r\n    console.log(option)\r\n    myChart.setOption(option, true);\r\n})","html":"","externalScripts":"","updaterUID":"bd-258458457","theme":"","layout":"","viewCount":3501,"userName":"破***火","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xe3EEjdorB.png?v=1559022069465","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"破***火"}}