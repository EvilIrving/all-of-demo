{"status":0,"data":{"cid":"x4PCyUoS3u","authorUid":"bd-1007260984","authorUserName":"语***e","title":"河北省","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-28T10:07:23.000Z","lastUpdateTime":"2021-07-28T10:07:23.000Z","auth":2,"uid":"bd-1007260984","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-07-28T10:07:23.000Z","code":"var bd = '/asset/get/s/data-1618898514270-IsqqHGtbY.json';\nvar fp = '/asset/get/s/data-1618899525486-wkO5rxyAM.json';\nvar ly = '/asset/get/s/data-1618899757492-WnGtLt6Yk.json';\nvar yx = '/asset/get/s/data-1618906123836-ahRSeBbEE.json';\nvar dz = '/asset/get/s/data-1618906432180-c93kCPvh8.json';\nvar qy = '/asset/get/s/data-1618911164355-PhByrCUVp.json';\nvar tx = '/asset/get/s/data-1618911169152-Mftb_e2Yd.json';\nvar mapname = bd;\nvar color1 = {\n        x: 0,\n        y: 0,\n        x2: 0,\n        y2: 1,\n        type: 'linear',\n        global: false,\n        colorStops: [\n            {\n                //第一节下面\n                offset: 0,\n                color: 'rgb(22,255,255, 0)',//'#000E1A',\n            },\n            {\n                offset: 1,\n    \n                color: 'rgb(22,255,255, 0.6)',\n            },\n        ],\n    };\nvar mapJson = [\n    {\n        name: '阜平县',\n        json: fp,\n    },\n    {\n        name: '涞源县',\n        json: ly,\n    },\n    {\n        name: '易县',\n        json: ly,\n    },\n    {\n        name: '定州市',\n        json: dz,\n    },\n    {\n        name: '曲阳县',\n        json: qy,\n    },\n    {\n        name: '唐县',\n        json: tx,\n    },\n];\nvar mapDate = [\n    {\n        name: '阜平县',\n        value: [114.198801, 38.847276],\n        datas: 1354,\n        img: 'image://asset/get/s/data-1619059442567-s5l7-f8Eu9.png',\n    },\n    {\n        name: '涞源县',\n        value: [114.723966, 39.292095],\n        datas: 1402,\n        img: 'image://asset/get/s/data-1619059442567-s5l7-f8Eu9.png',\n    },\n    {\n        name: '易县',\n        value: [115.245576, 39.311674],\n        datas: 2468,\n        img: 'image://asset/get/s/data-1619059838735-QE9mBZmhh.png',\n    },\n    {\n        name: '定州市',\n        value: [115.050014, 38.460198],\n        datas: 768,\n        img: 'image://asset/get/s/data-1619321685306-EvjlgDOXi.png',\n    },\n    {\n        name: '曲阳县',\n        value: [114.654083, 38.700813],\n        datas: 589,\n        img: 'image://asset/get/s/data-1619059838735-QE9mBZmhh.png',\n    },\n    {\n        name: '唐县',\n        value: [114.798254, 38.898656],\n        datas: 1500,\n        img: 'image://asset/get/s/data-1619321685306-EvjlgDOXi.png',\n    },\n];\n\nvar geoCoordMap = {\n      阜平县: [114.198801, 38.847276],\n      涞源县: [114.723966, 39.292095],\n      易县: [115.245576, 39.311674],\n      定州市: [115.050014, 38.460198],\n      曲阳县: [114.654083, 38.700813],\n      唐县: [114.798254, 38.898656],\n    };\nvar customerBatteryCityData = [\n    {name: \"阜平县\", value: 50},\n    {name: \"涞源县\", value: 20},\n    {name: \"易县\", value: 60},\n    {name: \"定州市\", value: 70},\n    {name: \"曲阳县\", value: 120},\n    {name: \"唐县\", value: 70},\n];\n\nfunction lineMaxHeight () {\n    const maxValue = Math.max(...customerBatteryCityData.map(item => item.value))\n    return 0.9/maxValue\n}\n    // 柱状体的主干\nfunction lineData () {\n    return customerBatteryCityData.map((item) => {\n      return {\n        coords: [geoCoordMap[item.name], [geoCoordMap[item.name][0], geoCoordMap[item.name][1] + item.value * lineMaxHeight()]]\n      }\n    })\n}\n\nvar domImg = document.createElement('img');\ndomImg.style.height = domImg.height = domImg.width = domImg.style.width = '8px';\ndomImg.src =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAIAAAAmKNuZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE4MTE0OTgyQTdDQzExRUI4Q0RBRkMwQkFGMTY2NDhEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE4MTE0OTgzQTdDQzExRUI4Q0RBRkMwQkFGMTY2NDhEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTgxMTQ5ODBBN0NDMTFFQjhDREFGQzBCQUYxNjY0OEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTgxMTQ5ODFBN0NDMTFFQjhDREFGQzBCQUYxNjY0OEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4v4trwAAAAVklEQVR42mL0D225cu0hAzWAjpY8C9CsL19/wIV4uDnI5gKNYmKgKhjcxrFAggBZiBIuyDhqRQWQOxoVo1ExGhWjUTEaFYMiKoB1LVq1TXZUAI0CCDAAcAlaxCt7dtQAAAAASUVORK5CYII=';\n\nvar domImgHover = document.createElement('img');\ndomImgHover.style.height = domImgHover.height = domImgHover.width = domImgHover.style.width = '8px';\ndomImgHover.src =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAIAAAAmKNuZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkFDQ0Q2RjYyQTdDRDExRUI4ODUxRDIxRjkzMEExNzg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkFDQ0Q2RjYzQTdDRDExRUI4ODUxRDIxRjkzMEExNzg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QUNDRDZGNjBBN0NEMTFFQjg4NTFEMjFGOTMwQTE3ODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QUNDRDZGNjFBN0NEMTFFQjg4NTFEMjFGOTMwQTE3ODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6FboimAAAASklEQVR42mIUnL9XtHsDAzXA69IARjWtXJYX7+FCfyQEKeEyMVAVDG7jWCB+RhaihAsybjQqRqNiNCpGo2I0KoZZVDBSt9oGCDAAhYNrvRu3DWEAAAAASUVORK5CYII=';\n\nvar img2 = 'image://asset/get/s/data-1619318279159-o6ZbTGoO0.png';\nlet index = -1;\nmyChart.showLoading('default', {\n    text: '统计中，请稍候...',\n    maskColor: '#2957A2',\n    textColor: '#fff',\n});\n\nmyChart.on('click', function (e) {\n    var chooseName = mapJson.filter((item) => {\n        return item.name == e.name;\n    });\n    mapname = chooseName[0].json;\n    mapDate = [];\n    $('<div class=\"back\">〈 返回</div>').appendTo($('#chart-panel'));\n\n    $('.back').css({\n        position: 'absolute',\n        left: '17px',\n        top: '25px',\n        color: 'rgb(222,222,222)',\n        'font-size': '12px',\n        cursor: 'pointer',\n        border: '1px solid rgba(255, 255, 255, .5)',\n        padding: '0px 6px 1px 0px',\n        'border-radius': '3px',\n        'z-index': '100',\n    });\n    $('.back').click(function () {\n        mapname = bd;\n        mapDate = [\n            {\n                name: '阜平县',\n                value: [114.198801, 38.847276],\n                datas: 1354,\n                img: 'image://asset/get/s/data-1619059442567-s5l7-f8Eu9.png',\n            },\n            {\n                name: '涞源县',\n                value: [114.723966, 39.292095],\n                datas: 1402,\n                img: 'image://asset/get/s/data-1619059442567-s5l7-f8Eu9.png',\n            },\n            {\n                name: '易县',\n                value: [115.245576, 39.311674],\n                datas: 2468,\n                img: 'image://asset/get/s/data-1619059838735-QE9mBZmhh.png',\n            },\n            {\n                name: '定州市',\n                value: [115.050014, 38.460198],\n                datas: 768,\n                img: 'image://asset/get/s/data-1619321685306-EvjlgDOXi.png',\n            },\n            {\n                name: '曲阳县',\n                value: [114.654083, 38.700813],\n                datas: 589,\n                img: 'image://asset/get/s/data-1619059838735-QE9mBZmhh.png',\n            },\n            {\n                name: '唐县',\n                value: [114.798254, 38.898656],\n                datas: 1500,\n                img: 'image://asset/get/s/data-1619321685306-EvjlgDOXi.png',\n            },\n        ];\n        $('.back').css({\n            position: 'absolute',\n            left: '17px',\n            top: '-25px',\n            color: 'rgb(222,222,222)',\n            'font-size': '15px',\n            cursor: 'pointer',\n            'z-index': '100',\n        });\n\n        mapInit();\n    });\n    mapInit();\n});\nsetTimeout(function () {\n    mapInit();\n}, 1000);\nvar mapInit = () => {\n    $.getJSON(mapname, function (geoJson) {\n        echarts.registerMap('bd', geoJson);\n        myChart.hideLoading();\n        option = {\n            backgroundColor: '#2957A2',\n            title: {\n                top: 20,\n                text: '河北省',\n                subtext: '',\n                x: 'center',\n                textStyle: {\n                    color: '#fff',\n                    fontWeight: 100,\n                    fontSize: 14,\n                },\n            },\n            geo: [{type: 'map',\n                   roam: true,\n                    label: {\n                        normal: {\n                            show: false,\n                            textStyle: {\n                                color: '#fff',\n                            },\n                        },\n                        emphasis: {\n                            textStyle: {\n                                color: '#fff',\n                            },\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: '#2ab8ff',\n                            borderWidth: 1,\n                            areaColor: {\n                                image: domImg,\n                                repeat: 'repeat',\n                            },\n                            shadowColor: 'rgba(0, 0, 0, 0.5)',\n                            shadowBlur: 0,\n                            shadowOffsetX: 0,\n                            shadowOffsetY: 1,\n                        },\n                        emphasis: {\n                            areaColor: {\n                                image: domImgHover,\n                                repeat: 'repeat',\n                            },\n                            borderColor: '#2ab8ff',\n                            borderWidth: 1,\n                            shadowColor: 'rgba(0, 255, 255, 0.7)',\n                            shadowBlur: 10,\n                            shadowOffsetX: 0,\n                            shadowOffsetY: 1,\n                            label: {\n                                show: false,\n                            },\n                        },\n                    },\n                    zoom: 1.1,\n                    roam: true,\n                    map: 'bd',\n                    zlevel: 2,\n                    silent: true,\n                },{\n                map: 'bd',\n                aspectScale: 0.75, \n                layoutCenter: ['50%', '50%'], \n                layoutSize: '102%',\n                silent: true,\n                roam: true,\n                z: 0,\n                zlevel: 1,\n                itemStyle: {\n                    normal: {\n                        areaColor: 'rgba(0, 15, 40, 0.5)',\n                        shadowColor: 'rgba(0, 0, 0, 1)',\n                        shadowBlur: 20,\n                        shadowOffsetX: 5,\n                        shadowOffsetY: 5,\n                        borderColor: 'rgba(0, 0, 0, 0.7)',\n                        borderWidth: 0.5,\n                    },\n                    emphasis: {\n                        areaColor: '#2AB8FF',\n                        borderWidth: 1,\n                        color: 'green',\n                        label: {\n                            show: false,\n                        },\n                    },\n                },\n            },\n            ],\n            series: [\n                \n                // 柱状体的主干\n              /*{\n                type: 'lines',\n                zlevel: 5,\n                effect: {\n                  show: false,\n                  // period: 4, //箭头指向速度，值越小速度越快\n                  // trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\n                  // symbol: 'arrow', //箭头图标\n                  // symbol: imgDatUrl,\n                  symbolSize: 5 // 图标大小\n                },\n                lineStyle: {\n                  width: 7, // 尾迹线条宽度\n                  color: color1,\n                  borderColor: color1,\n                  opacity: 0.7, // 尾迹线条透明度\n                  curveness: 0 // 尾迹线条曲直度\n                },\n                label: {\n                  show: 0,\n                  position: 'end',\n                  formatter: '245'\n                },\n                silent: true,\n                data: mapDate,\n                zlevel: 3,\n              },*/\n                {\n                    tooltip: {\n                        show: false,\n                    },\n                    type: 'effectScatter',\n                    coordinateSystem: 'geo',\n                    rippleEffect: {\n                        scale: 10,\n                        brushType: 'stroke',\n                    },\n                    showEffectOn: 'render',\n                    itemStyle: {\n                        normal: {\n                            shadowColor: '#0ff',\n                            shadowBlur: 10,\n                            shadowOffsetX: 0,\n                            shadowOffsetY: 0,\n                            color: 'rgb(22,255,255, 1)',/*function (params) {\n                                var colorList = [\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#64fbc5',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#018ace',\n                                        },\n                                    ]),\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#64fbc5',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#018ace',\n                                        },\n                                    ]),\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#168e6d',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#c78d7b',\n                                        },\n                                    ]),\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#61c0f1',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#6f2eb6',\n                                        },\n                                    ]),\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#168e6d',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#c78d7b',\n                                        },\n                                    ]),\n                                    new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                                        {\n                                            offset: 0,\n                                            color: '#61c0f1',\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: '#6f2eb6',\n                                        },\n                                    ]),\n                                ];\n                                return colorList[params.dataIndex];\n                            },*/\n                        },\n                    },\n                    label: {\n                        normal: {\n                            color: '#fff',\n                        },\n                    },\n                    symbol: 'circle',\n                    symbolSize: [10, 5],\n                    data: mapDate,\n                    zlevel: 3,\n                },\n                \n                /*\n                {\n                    type: 'scatter',\n                    coordinateSystem: 'geo',\n                    itemStyle: {\n                        color: '#f00',\n                    },\n                    symbol: function (value, params) {\n                        return params.data.img;\n                    },\n                    symbolSize: [32, 41],\n                    symbolOffset: [0, -20],\n                    z: 9999,\n                    data: mapDate,\n                },*/\n                \n                /*{\n                    type: 'scatter',\n                    coordinateSystem: 'geo',\n                    label: {\n                        normal: {\n                            show: true,\n                            formatter: function (params) {\n                                var name = params.name;\n                                var value = params.data.datas;\n                                var text = `{fline|${value}}\\n{tline|${name}}`;\n                                return text;\n                            },\n                            color: '#fff',\n                            rich: {\n                                fline: {\n                                    padding: [0, 25],\n                                    color: '#fff',\n                                    textShadowColor: '#030615',\n                                    textShadowBlur: '0',\n                                    textShadowOffsetX: 1,\n                                    textShadowOffsetY: 1,\n                                    fontSize: 14,\n                                    fontWeight: 400,\n                                },\n                                tline: {\n                                    padding: [0, 27],\n                                    color: '#ABF8FF',\n                                    fontSize: 12,\n                                },\n                            },\n                        },\n                        emphasis: {\n                            show: true,\n                        },\n                    },\n                    itemStyle: {\n                        color: '#00FFF6',\n                    },\n                    symbol: img2,\n                    symbolSize: [100, 50],\n                    symbolOffset: [0, -60],\n                    z: 999,\n                    zlevel: 4,\n                    data: mapDate,\n                },*/\n            ],\n        };\n        myChart.setOption(option);\n    });\n};\n","html":"","externalScripts":"","updaterUID":"bd-1007260984","theme":"","layout":"","viewCount":0,"userName":"语***e","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4PCyUoS3u.png?v=1627466843765","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","title"],"customTags":[],"updaterUserName":"语***e"}}