{"status":0,"data":{"cid":"xvJZMndUjS","authorUid":"bd-365218436","authorUserName":"G***G","title":"中国地图大数据统计","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-09-18T03:24:30.000Z","lastUpdateTime":"2021-09-18T03:24:30.000Z","auth":2,"uid":"bd-365218436","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.0","versionCreateTime":"2021-09-18T03:24:30.000Z","code":"/** \r\n * \r\n * 作者: GhostCat\r\n * 博客: https://gcat.cc\r\n * 描述: 地图区域颜色渐变、闪烁点大小\r\n * \r\n */\r\n\r\n\r\nvar mapName = 'china'\r\nvar data = [{\r\n        name: \"北京\",\r\n        value: 199\r\n    },\r\n    {\r\n        name: \"天津\",\r\n        value: 42\r\n    },\r\n    {\r\n        name: \"河北\",\r\n        value: 102\r\n    },\r\n    {\r\n        name: \"山西\",\r\n        value: 81\r\n    },\r\n    {\r\n        name: \"内蒙古\",\r\n        value: 47\r\n    },\r\n    {\r\n        name: \"辽宁\",\r\n        value: 67\r\n    },\r\n    {\r\n        name: \"吉林\",\r\n        value: 82\r\n    },\r\n    {\r\n        name: \"黑龙江\",\r\n        value: 123\r\n    },\r\n    {\r\n        name: \"上海\",\r\n        value: 24\r\n    },\r\n    {\r\n        name: \"江苏\",\r\n        value: 92\r\n    },\r\n    {\r\n        name: \"浙江\",\r\n        value: 114\r\n    },\r\n    {\r\n        name: \"安徽\",\r\n        value: 109\r\n    },\r\n    {\r\n        name: \"福建\",\r\n        value: 116\r\n    },\r\n    {\r\n        name: \"江西\",\r\n        value: 91\r\n    },\r\n    {\r\n        name: \"山东\",\r\n        value: 119\r\n    },\r\n    {\r\n        name: \"河南\",\r\n        value: 137\r\n    },\r\n    {\r\n        name: \"湖北\",\r\n        value: 116\r\n    },\r\n    {\r\n        name: \"湖南\",\r\n        value: 114\r\n    },\r\n    {\r\n        name: \"重庆\",\r\n        value: 91\r\n    },\r\n    {\r\n        name: \"四川\",\r\n        value: 125\r\n    },\r\n    {\r\n        name: \"贵州\",\r\n        value: 62\r\n    },\r\n    {\r\n        name: \"云南\",\r\n        value: 83\r\n    },\r\n    {\r\n        name: \"西藏\",\r\n        value: 9\r\n    },\r\n    {\r\n        name: \"陕西\",\r\n        value: 80\r\n    },\r\n    {\r\n        name: \"甘肃\",\r\n        value: 56\r\n    },\r\n    {\r\n        name: \"青海\",\r\n        value: 10\r\n    },\r\n    {\r\n        name: \"宁夏\",\r\n        value: 18\r\n    },\r\n    {\r\n        name: \"新疆\",\r\n        value: 180\r\n    },\r\n    {\r\n        name: \"广东\",\r\n        value: 123\r\n    },\r\n    {\r\n        name: \"广西\",\r\n        value: 59\r\n    },\r\n    {\r\n        name: \"海南\",\r\n        value: 14\r\n    },\r\n];\r\n\r\nvar geoCoordMap = {};\r\n\r\n\r\n/*获取地图数据*/\r\nmyChart.showLoading();\r\nvar mapFeatures = echarts.getMap(mapName).geoJson.features;\r\nmyChart.hideLoading();\r\nmapFeatures.forEach(function(v) {\r\n    // 地区名称\r\n    var name = v.properties.name;\r\n    // 地区经纬度\r\n    geoCoordMap[name] = v.properties.cp;\r\n\r\n});\r\n\r\nconsole.log(data)\r\nvar max = 480,\r\n    min = 9; // todo \r\nvar maxSize4Pin = 100,\r\n    minSize4Pin = 20;\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\noption = {\r\n\r\n    backgroundColor: \"#333\",\r\n    // 左下角图例\r\n    visualMap: {\r\n        show: false,\r\n        min: 0,\r\n        max: 200,\r\n        left: \"10%\",\r\n        top: \"bottom\",\r\n        calculable: true,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n            color: [\"#0d0a0a\", \"#3a1911\"], // 蓝绿\r\n        },\r\n    },\r\n    legend: {\r\n        show: true,\r\n        left: \"10%\",\r\n        bottom: \"5%\",\r\n        type: \"scroll\",\r\n        orient: \"vertical\",\r\n        textStyle: {\r\n            color: \"#fff\",\r\n        },\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            },\r\n        },\r\n        roam: false,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: \"#3a1911\",\r\n                borderColor: \"#6e2727\", // 6e2727\r\n                borderWidth: 2,\r\n            },\r\n            emphasis: {\r\n                areaColor: \"#965f53\",\r\n            },\r\n        },\r\n    },\r\n    series: [{\r\n            name: \"在线上课人数\",\r\n            type: \"scatter\",\r\n            coordinateSystem: \"geo\",\r\n            data: convertData(data),\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    formatter: \"{b}\",\r\n                    position: \"right\",\r\n                    show: true,\r\n                },\r\n                emphasis: {\r\n                    show: true,\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#fff\",\r\n                },\r\n            },\r\n        },\r\n        {\r\n            type: \"map\",\r\n            map: mapName,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: \"#fff\",\r\n                    },\r\n                },\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: \"red\",\r\n                    borderColor: \"#6e2727\",\r\n                },\r\n                emphasis: {\r\n                    areaColor: \"#3a1911\",\r\n                },\r\n            },\r\n            animation: false,\r\n            data: data,\r\n        },\r\n        {\r\n            name: \"开课课程数\",\r\n            type: \"scatter\",\r\n            coordinateSystem: \"geo\",\r\n            zlevel: 6,\r\n            symbol: \"pin\",\r\n            symbolSize: [60, 60],\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: \"#fff\",\r\n                        fontSize: 9,\r\n                    },\r\n                    // formatter(value) {\r\n                    //   return value.data.value[2];\r\n                    // },\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#D8BC37\", //标志颜色\r\n                },\r\n            },\r\n            // data: convertData(data),\r\n            showEffectOn: \"render\",\r\n            rippleEffect: {\r\n                brushType: \"stroke\",\r\n            },\r\n            hoverAnimation: true,\r\n        },\r\n        {\r\n            name: \"Top 5\",\r\n            type: \"effectScatter\",\r\n            coordinateSystem: \"geo\",\r\n            data: convertData(\r\n                data\r\n                .sort(function(a, b) {\r\n                    return b.value - a.value;\r\n                })\r\n                .slice(0, 10)\r\n            ),\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            showEffectOn: \"render\",\r\n            rippleEffect: {\r\n                brushType: \"stroke\",\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: \"{b}\",\r\n                    position: \"left\",\r\n                    show: false,\r\n                },\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#325baf\",\r\n                    shadowBlur: 10,\r\n                    shadowColor: \"#325baf\",\r\n                },\r\n            },\r\n            zlevel: 1,\r\n        },\r\n    ],\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-365218436","theme":"","layout":"","viewCount":0,"userName":"G***G","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvJZMndUjS.png?v=1631935470615","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","visualMap"],"customTags":[],"updaterUserName":"G***G"}}