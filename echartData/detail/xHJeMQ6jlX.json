{"status":0,"data":{"cid":"xHJeMQ6jlX","authorUid":"bd-3778831175","authorUserName":"m***i","title":"Music Visualization By Bar","description":"利用柱状图进行  音乐可视化","latestVersion":1,"alwaysLatest":1,"createTime":"2018-06-11T09:38:15.000Z","lastUpdateTime":"2018-06-11T09:38:15.000Z","auth":2,"uid":"bd-3778831175","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-06-11T09:38:15.000Z","code":"var xdata=[];\nvar ydata=[];\n\nfor(var i=0;i<1024/2;i++){\n    xdata.push(i);\n    ydata.push(0);\n}\n\n\n\n\noption = {\n    animation:false,\n    xAxis: {\n        type: 'category',\n        data: xdata,\n        show:false\n    },\n    yAxis: {\n        type: 'value',\n        show:false\n    },\n    series: [{\n        data:ydata,\n        type: 'bar',\n         itemStyle: {\n                normal: {\n                    barBorderRadius: [30, 30, 0, 0],\n                    color: new echarts.graphic.LinearGradient(\n                        0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#00feff'\n                            },\n                            {\n                                offset: 0.5,\n                                color: '#027eff'\n                            },\n                            {\n                                offset: 1,\n                                color: '#0286ff'\n                            }\n                        ]\n                    )\n                }\n            },\n    }]\n};\n\n window.AudioContext =(window.AudioContext || window.webkitAudioContext || window.mozAudioContext || window.msAudioContext);\nlet audioContext=new window.AudioContext();\n\n\nvar oReq = new XMLHttpRequest();\noReq.open('GET', '/asset/get/s/data-1493350085456-S1p6LNlyZ.mp3', true);\noReq.responseType = 'arraybuffer';\n\nvar analyser;\noReq.onload = function(e) {\n    audioContext.decodeAudioData(oReq.response, function(buffer){\n            var audioBufferSouceNode = audioContext.createBufferSource();\n             audioBufferSouceNode.buffer = buffer;\n\n             analyser = audioContext.createAnalyser();\n             audioBufferSouceNode.connect(analyser);\n\n             analyser.connect(audioContext.destination);\n             audioBufferSouceNode.start(0);\n             animation();\n    });\n};\n\noReq.send();\n\nfunction animation(){\n        requestAnimationFrame(animation);\n        var array = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(array);\n        var data=[];\n        for(var i=0;i<array.length;i+=2){\n            data.push(array[i]);\n        }\n        // console.log(data)\n        option.series[0]={data:data,type:'bar'}\n        myChart.setOption(option);\n        //  console.log(array)\n}","html":"","externalScripts":"https://cdn.bootcss.com/randomcolor/0.5.2/randomColor.min.js","updaterUID":"bd-3778831175","theme":"","layout":"","viewCount":619,"userName":"m***i","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJeMQ6jlX.png?v=1528709895871","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar"],"customTags":[],"updaterUserName":"m***i"}}