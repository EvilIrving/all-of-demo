{"status":0,"data":{"cid":"xHJqy6CA3G","authorUid":"bd-101698999","authorUserName":"Z***8","title":"猜数游戏","description":"猜一个0到100的数","latestVersion":5,"alwaysLatest":1,"createTime":"2018-04-26T05:00:18.000Z","lastUpdateTime":"2019-05-17T06:34:11.000Z","auth":2,"uid":"bd-101698999","publishedVersion":4,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.0.4","versionCreateTime":"2018-04-26T05:31:13.000Z","code":"var min = 0;\nvar max = 100;\nvar secretNum = (Math.random() * 100).toFixed(0);\nvar flag = 0;\n\n//var data = [[0,0,5],[0,1,1]];\nvar categoryX = ['0', '1', '2', '3', '4', '5', '6',\n    '7', '8', '9'\n];\nvar categoryY = ['0', '1', '2', '3', '4', '5', '6',\n    '7', '8', '9', '10'\n];\nvar data = (function() {\n    var res = [];\n    for (i = 0; i < 11; i++) {\n        for (j = 0; j < 10; j++) {\n            if (i * 10 + j < 101) {\n                res.push([i, j, '' + (i * 10 + j)]);\n            }\n        }\n    }\n    return res;\n})();\n\nguessNumData = data.map(function(item) {\n    return [item[1], item[0], item[2] || '-'];\n});\nmyChart.setOption(getOption(0, 100));\nmyChart.on('click', function(params) {\n    if (params.seriesId === 'guessPanel' && flag == 0) {\n        //alert(params.data[2]);\n        guess(parseInt(params.data[2]));\n    }\n});\n\n//设置\nfunction getOption(min, max) {\n    option = {\n        tooltip: {\n            show: false\n        },\n        grid: {\n            width: '30%',\n            height: '90%',\n            left: '10px',\n            top: '10px'\n        },\n        xAxis: {\n            show: false,\n            type: 'category',\n            data: categoryX,\n            splitArea: {\n                show: true\n            }\n        },\n        yAxis: {\n            show: false,\n            type: 'category',\n            data: categoryY,\n            splitArea: {\n                show: true\n            }\n        },\n        series: [{\n            id: 'guess',\n            center: ['60%', '50%'],\n            zlevel: 1,\n            name: 'numPuzzle',\n            type: 'gauge',\n            radius: '70%',\n            silent: true,\n            axisLabel: {\n                show: false,\n                formatter: function(value) {\n                    if (value == min || value == max) {\n                        return value;\n                    }\n                }\n            },\n            pointer: {\n                show: true\n            },\n            axisLine: {\n                lineStyle: {\n                    width: '25',\n                    color: [\n                        [0, '#BEBEBE'],\n                        [min / 100, '#BEBEBE'],\n                        [max / 100, '#5BC49F'],\n                        [1, '#BEBEBE']\n                    ]\n                }\n            },\n            detail: {\n                formatter: '请猜一个' + min + '到' + max + '的整数',\n                offsetCenter: [0, '10%']\n            },\n            data: [{\n                value: [{\n                    value: secretNum,\n                    name: '随机整数'\n                }]\n            }]\n        }, {\n            id: 'guessPanel',\n            type: 'heatmap',\n            label: {\n                normal: {\n                    show: true\n                }\n            },\n            data: guessNumData\n        }]\n    };\n    return option;\n}\n\nfunction guess(num) {\n    var info;\n    if (num == secretNum) {\n        info = '猜中了！！！';\n        flag = 1;\n        renewEcharts(1, info, min, max);\n    } else if (num < min || num > max) {\n        info = '请猜' + min + '到' + max + '之间的数';\n        renewEcharts(0, info, min, max);\n    } else if (num < secretNum) {\n        min = num + 1;\n        info = '猜小了，答案在' + min + '与' + max + '之间';\n        renewEcharts(0, info, min, max);\n    } else {\n        max = num - 1;\n        info = '猜大了，答案在' + min + '与' + max + '之间';\n        renewEcharts(0, info, min, max);\n    }\n}\n\nfunction renewEcharts(isGet, msg, min, max) {\n    var opt;\n    var color = '#5BC49F';\n    if (max - min < 8) {\n        color = '#B5495B';\n    } else if (max - min < 15) {\n        color = '#FF7C7C';\n    } else if (max - min < 30) {\n        color = '#FFDA43';\n    }\n    if (isGet == 1) {\n        opt = {\n            series: {\n                detail: {\n                    formatter: msg\n                }\n            }\n        };\n        myChart.setOption(opt);\n    } else {\n        opt = {\n            series: [{\n                id: 'guess',\n                axisLine: {\n                    lineStyle: {\n                        color: [\n                            [0, '#BEBEBE'],\n                            [min / 100, '#BEBEBE'],\n                            [max / 100, color],\n                            [1, '#BEBEBE']\n                        ]\n                    }\n                },\n                detail: {\n                    formatter: msg,\n                    color: color\n                }\n            }, {\n                id: 'guessPanel',\n                data: (function() {\n                    var res = [];\n                    for (var item in guessNumData) {\n                        if (parseInt(guessNumData[item][2]) >= min && parseInt(guessNumData[item][2]) <= max) {\n                            res.push(guessNumData[item]);\n                        }\n                    }\n                    return res;\n                })()\n            }]\n        };\n        myChart.setOption(opt);\n    }\n}\n\n//深红#B5495B 红#FF7C7C 黄#FFDA43 绿#5BC49F 灰#BEBEBE","html":"","externalScripts":"","updaterUID":"bd-101698999","theme":"default","layout":"","viewCount":1328,"userName":"Z***8","commentCount":4,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJqy6CA3G.png?v=1558074769026","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-gauge","series-heatmap","tooltip"],"customTags":[],"updaterUserName":"Z***8"}}