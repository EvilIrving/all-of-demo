{"status":0,"data":{"cid":"x1smptB1G","authorUid":"bd-3490920103","authorUserName":"a***4","title":"物料类型2019-04情况统计","description":"饼图动态切换","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-28T06:48:33.000Z","lastUpdateTime":"2019-11-28T06:48:33.000Z","auth":2,"uid":"bd-3490920103","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-28T06:48:33.000Z","code":"//------------------------------------引用请注明出处\n\n\n    \n        const data= [\n        {\n            \"date\": \"2019-01\",\n            \"list\": [\n                     {\n                    \"material_name\": \"透明离型膜\",\n                    \"cd_amount\": \"12871.4\",\n                    \"cd_proportion\": \"428.20\",\n                    \"total_amount\": \"627.2\",\n                },\n                {\n                    \"material_name\": \"泡棉\",\n                     \"cd_amount\": \"1087.4\",\n                    \"cd_proportion\": \"235.17\",\n                    \"total_amount\": \"50527.2\",\n                }\n            ]\n        },\n        {\n            \"date\": \"2019-03\",\n            \"list\": [\n                 {\n                    \"material_name\": \"透明离型膜\",\n                    \"cd_amount\": \"1871.4\",\n                    \"cd_proportion\": \"728.20\",\n                    \"total_amount\": \"727.2\",\n                },\n                {\n                    \"material_name\": \"泡棉\",\n                     \"cd_amount\": \"1287.4\",\n                    \"cd_proportion\": \"358.51\",\n                    \"total_amount\": \"21527.2\",\n                }\n               \n            ]\n        },\n        {\n            \"date\": \"2019-04\",\n            \"list\": [\n                {\n                    \"material_name\": \"透明离型膜\",\n                    \"cd_amount\": \"1871.4\",\n                    \"cd_proportion\": \"9728.20\",\n                    \"total_amount\": \"1727.2\",\n                },\n                {\n                    \"material_name\": \"泡棉\",\n                     \"cd_amount\": \"187.4\",\n                    \"cd_proportion\": \"978.20\",\n                    \"total_amount\": \"17527.2\",\n                }\n            ]\n        }\n      \n    ]\n\n    \n    var timeLineDatas=[];\n    var databeasts=[];\n    \n    for (var i =0;i< data.length; i++) {\n         let item=data[i].list;\n         timeLineDatas.push(data[i].date);\n         let arrs=[];\n        for (var j = 0; j < item.length; j++) {\n                arrs.push({\n                     name:item[j].material_name,\n                     value:item[j].cd_amount,\n                     cd_amount: item[j].cd_amount,\n                     cd_proportion:item[j].cd_proportion,\n                     total_amount:item[j].total_amount,\n                })\n        }\n        \n        databeasts.push(arrs)\n    }\n    \n\n\nfunction optiontitle(value) {\n    if (value > 9) {\n        return {\n            text: '物料类型' + value + '情况统计',\n            x: 'center',\n            top: '15%'\n        }\n    } else return {\n        text: '物料类型' + value + '情况统计',\n        x: 'center',\n        top: '15%'\n    }\n\n\n}\noption = {\n    baseOption: {\n\n        timeline: {\n            show: true,\n           \n            axisType: 'category',\n            autoPlay: true,\n            currentIndex: 6,\n            playInterval: 1000,\n            tooltip: {\n                show: true,\n                formatter: function(params) {\n                    console.log(params);\n                    return params.name;\n                }\n            },\n            orient: 'vertical',\n            right:\"0\",\n            y:\"center\",\n               controlStyle:{//箭头和播放\n                showPrevBtn:false,\n                showPlayBtn: false,\n                showNextBtn:false,\n            },\n              checkpointStyle: {\n                  color:'rgba(35,169,244, 0.9)',\n                  borderColor:'rgba(35,169,244, 0.9)',\n                  symbolSize:8\n              },\n              emphasis:{\n                  itemStyle: {\n                      color:'rgba(35,169,244, 0.9)',\n                      borderColor: 'rgba(35,169,244, 0.9)',\n                  }\n              },\n       \n            label: {\n                normal: {\n                    show: false,\n                    interval: 'auto',\n                    formatter: function(value) {\n                        return value + '年'\n                    }\n                },\n            },\n            data: [],\n        },\n        title: {\n            //   text:'大北京景点帅哥美女统计', \n            textStyle: {\n                fontSize: 16,\n            },\n        },\n       \n        grid: [{\n            show: false,\n            left: '10%',\n            top: '15%',\n            bottom: 90,\n            containLabel: true,\n        }],\n\n        series: [],\n\n    },\n\n    options: [],\n\n\n};\n\nfor (var i = 0; i < timeLineDatas.length; i++) {\n    option.baseOption.timeline.data.push(timeLineDatas[i]);\n    option.options.push({\n        title: optiontitle(timeLineDatas[i]),\n   \n        series: [{\n            name: '总课时',\n            type: 'pie',\n            color: ['#c487ee', '#deb140', '#49dff0', '#034079', '#6f81da', '#00ffb4', '#659F83', '#08C7AE'],\n            radius: ['30%', '45%'],\n            label: {\n                normal: {\n                    show: true,\n                    formatter: \"{b}: {c} ({d}%)\"\n                },\n                emphasis: {\n                    show: true,\n                    position: 'left',\n                    offset: [0, 0],\n\n                },\n            },\n            data: databeasts[i],\n        }]\n    });\n}","html":"","externalScripts":"","updaterUID":"bd-3490920103","theme":"","layout":"","viewCount":397,"userName":"a***4","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1smptB1G.png?v=1574923713385","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","timeline","title"],"customTags":[],"updaterUserName":"a***4"}}