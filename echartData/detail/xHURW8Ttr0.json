{"status":0,"data":{"cid":"xHURW8Ttr0","authorUid":"bd-3490920103","authorUserName":"a***4","title":"动态排名","description":"动态排名","latestVersion":8,"alwaysLatest":1,"createTime":"2020-07-07T07:12:12.000Z","lastUpdateTime":"2021-08-28T13:30:51.000Z","auth":1,"uid":"bd-3490920103","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.9.0","versionCreateTime":"2021-08-28T13:30:51.000Z","code":"var opt={\n            index: 0\n        };\nvar  colors=[\"rgba(35,169,244, 0.9)\", \"rgba(217, 102, 87, 0.9)\", \"rgba(192, 221, 246, .8)\", \"rgba(153, 93, 178, 0.9)\", \"rgba(3,169,244, 0.3)\", \"rgba(53,109,244, 0.9)\",\"rgba(19,69,144, 0.9)\",\"rgba(219,111,44, 0.9)\",\"rgba(88,88,14, 0.9)\"]\nlet languagesNameBg = \"\";\nlet arrs = [];  \nlet arrs2 = []; \nvar datas2 = [{\n    \"name\": \"CNC2\",\n    \"name_us\": \"CNC\",\n    \"name_tw\": \"CNC\",\n    \"value\": 671766417.152423,\n    \"cd_amount\": 671766417.152423,\n    \"cd_proportion\": 142.8494,\n    \"total_amount\": 470261821.096079,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"磁材2\",\n    \"name_us\": \"Magnetic material\",\n    \"name_tw\": \"磁材\",\n    \"value\": 200448884.227853,\n    \"cd_amount\": 200448884.227853,\n    \"cd_proportion\": 333.5352,\n    \"total_amount\": 60098264.121172,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"尔康2\",\n    \"name_us\": \"Salcomp\",\n    \"name_tw\": \"賽爾康\",\n    \"value\": 66830197.708983,\n    \"cd_amount\": 66830197.708983,\n    \"cd_proportion\": 52.3908,\n    \"total_amount\": 127560924.315229,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"冲压2\",\n    \"name_us\": \"Stamping\",\n    \"name_tw\": \"沖壓\",\n    \"value\": 17603487.482444,\n    \"cd_amount\": 17603487.482444,\n    \"cd_proportion\": 8.0111,\n    \"total_amount\": 219736527.727814,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"组装2\",\n    \"name_us\": \"Assembling\",\n    \"name_tw\": \"組裝\",\n    \"value\": 484870.001639,\n    \"cd_amount\": 484870.001639,\n    \"cd_proportion\": 1.0732,\n    \"total_amount\": 45178764.025914,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"自动化2\",\n    \"name_us\": \"Other\",\n    \"name_tw\": \"其他\",\n    \"value\": 13168.14502,\n    \"cd_amount\": 13168.14502,\n    \"cd_proportion\": 0.0014,\n    \"total_amount\": 899349728.047174,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"5G2\",\n    \"name_us\": \"5G\",\n    \"name_tw\": \"5G\",\n    \"value\": 19920.367304,\n    \"cd_amount\": -19920.367304,\n    \"cd_proportion\": -50.4836,\n    \"total_amount\": 39459.04,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"深结构件2\",\n    \"name_us\": \"Shenzhen Structure\",\n    \"name_tw\": \"深圳結構件\",\n    \"value\": 128005297.3454,\n    \"cd_amount\": -128005297.3454,\n    \"cd_proportion\": -38.1818,\n    \"total_amount\": 335251302.5725,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"东结构2件\",\n    \"name_us\": \"Dongguan Structure\",\n    \"name_tw\": \"東莞結構件\",\n    \"value\": 182165463.923,\n    \"cd_amount\": -182165463.923,\n    \"cd_proportion\": -68.3135,\n    \"total_amount\": 266660901.6231,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"模切2\",\n    \"name_us\": \"Die-cutting\",\n    \"name_tw\": \"模切\",\n    \"value\": 754655474.800842,\n    \"cd_amount\": -754655474.800842,\n    \"cd_proportion\": -98.9762,\n    \"total_amount\": 762460918.694128,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}];\nvar datas = [{\n    \"name\": \"CNC\",\n    \"name_us\": \"CNC\",\n    \"name_tw\": \"CNC\",\n    \"value\": 671766417.152423,\n    \"cd_amount\": 671766417.152423,\n    \"cd_proportion\": 142.8494,\n    \"total_amount\": 470261821.096079,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"磁材\",\n    \"name_us\": \"Magnetic material\",\n    \"name_tw\": \"磁材\",\n    \"value\": 200448884.227853,\n    \"cd_amount\": 200448884.227853,\n    \"cd_proportion\": 333.5352,\n    \"total_amount\": 60098264.121172,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"尔康\",\n    \"name_us\": \"Salcomp\",\n    \"name_tw\": \"賽爾康\",\n    \"value\": 66830197.708983,\n    \"cd_amount\": 66830197.708983,\n    \"cd_proportion\": 52.3908,\n    \"total_amount\": 127560924.315229,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"冲压\",\n    \"name_us\": \"Stamping\",\n    \"name_tw\": \"沖壓\",\n    \"value\": 17603487.482444,\n    \"cd_amount\": 17603487.482444,\n    \"cd_proportion\": 8.0111,\n    \"total_amount\": 219736527.727814,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"组装\",\n    \"name_us\": \"Assembling\",\n    \"name_tw\": \"組裝\",\n    \"value\": 484870.001639,\n    \"cd_amount\": 484870.001639,\n    \"cd_proportion\": 1.0732,\n    \"total_amount\": 45178764.025914,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"自动化\",\n    \"name_us\": \"Other\",\n    \"name_tw\": \"其他\",\n    \"value\": 13168.14502,\n    \"cd_amount\": 13168.14502,\n    \"cd_proportion\": 0.0014,\n    \"total_amount\": 899349728.047174,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"5G\",\n    \"name_us\": \"5G\",\n    \"name_tw\": \"5G\",\n    \"value\": 19920.367304,\n    \"cd_amount\": -19920.367304,\n    \"cd_proportion\": -50.4836,\n    \"total_amount\": 39459.04,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"深结构件\",\n    \"name_us\": \"Shenzhen Structure\",\n    \"name_tw\": \"深圳結構件\",\n    \"value\": 128005297.3454,\n    \"cd_amount\": -128005297.3454,\n    \"cd_proportion\": -38.1818,\n    \"total_amount\": 335251302.5725,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"东结构件\",\n    \"name_us\": \"Dongguan Structure\",\n    \"name_tw\": \"東莞結構件\",\n    \"value\": 182165463.923,\n    \"cd_amount\": -182165463.923,\n    \"cd_proportion\": -68.3135,\n    \"total_amount\": 266660901.6231,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}, {\n    \"name\": \"模切\",\n    \"name_us\": \"Die-cutting\",\n    \"name_tw\": \"模切\",\n    \"value\": 754655474.800842,\n    \"cd_amount\": -754655474.800842,\n    \"cd_proportion\": -98.9762,\n    \"total_amount\": 762460918.694128,\n    \"date\": \"统计周期：2020-01~2020-07\"\n}];\n\nfunction getArrByKey(data, k) { //\n    let key = k || \"value\";\n    let res = [];\n    if (data) {\n        data.forEach(function(t) {\n            res.push(t[key]);\n        });\n    }\n    return res;\n};\nfor (let index = 0; index < datas2.length; index++) {\n    arrs2.push({\n        name: datas2[index].name,\n        name_us: datas2[index].name_us,\n        name_tw: datas2[index].name_tw,\n        value: Math.abs(datas2[index].value),\n        cd_amount: datas2[index].cd_amount,\n        cd_proportion: datas2[index].cd_proportion,\n        total_amount: datas2[index].total_amount,\n        date: datas2[index].date,\n    });\n\n}\n\nfor (let index = 0; index < datas.length; index++) {\n    arrs.push({\n        name: datas[index].name,\n        name_us: datas[index].name_us,\n        name_tw: datas[index].name_tw,\n        value: Math.abs(datas[index].value),\n        cd_amount: datas[index].cd_amount,\n        cd_proportion: datas[index].cd_proportion,\n        total_amount: datas[index].total_amount,\n        date: datas[index].date,\n    });\n\n}\n\nif (arrs.length || arrs2.length) {\n     languagesNameBg = 'name'\n}\n\n\n\noption = {\n  baseOption: {\n          timeline: {\n             autoPlay: true,\n             data:['PA','PD'],\n            axisType: \"category\",\n            show: true,\n            playInterval: 8500,\n            interval: 0,\n            orient: \"vertical\",\n            right:10,\n            height: \"10%\",\n            y: \"center\",\n            controlStyle: {\n              //箭头和播放\n              showPrevBtn:\n                false,\n              showPlayBtn: false,\n              showNextBtn:\n               false\n            },\n            checkpointStyle: {\n              color: \"rgba(35,169,244, 0.9)\",\n              borderColor: \"rgba(35,169,244, 0.9)\",\n              symbolSize: 16\n            },\n            emphasis: {\n              itemStyle: {\n                color: \"rgba(35,169,244, 0.9)\",\n                borderColor: \"rgba(35,169,244, 0.9)\",\n                symbolSize:16\n              }\n            },\n            label: {\n              show: false\n            },\n            symbol: \"circle\",\n            symbolSize:16,\n            lineStyle: {\n              //线得样式\n              show: false,\n              color: \"#304654\",\n              width: 2,\n              type: \"solid\",\n              shadowBlur: 0.5,\n              shadowColor: \"red\",\n              shadowOffsetX: 0,\n              shadowOffsetY: 0,\n              opacity: 0.5\n            },\n            itemStyle: {\n              normal: {\n                color: \"#959598\",\n                lineStyle: {\n                  color: \"#959598\"\n                }\n              }\n            }\n          },\n  \n    tooltip: {},\n    calculable: true,\n  \n  },\n  options: [\n       {\n        grid: {\n        // top: '20%',\n        left:  arrs.length >=8 ? \"30%\":40,\n        top:'5%',\n        bottom:\"15%\",\n        right:'30%',\n    },\n       tooltip:{\n        show:true,\n        backgroundColor: 'rgba(3,169,244, 0.5)',//背景颜色（此时为默认色）\n        textStyle:{\n              fontSize:16\n        },\n       \n    },\n    xAxis: {\n        show: false\n    },\n    yAxis: [{\n        show: true,\n        data: getArrByKey(arrs, languagesNameBg),\n        inverse: true,\n       \n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n               fontSize:  arrs.length >=8 ? 14 :18,\n               formatter: function (value, index) {\n                  if(value.length>7){\n                    value= value.substring(0,7)+\"...\"\n                  }\n               const vas='';\n                if (opt.index === 0 && index < 3) {\n                    return '{idx' + index + '|' + (1 + index) + '} {title|' + value + '}'\n                } else if (opt.index !== 0 && (index + opt.index) <= 10) {\n                    return '{idx|0' + (1 + index + opt.index) + '} {title|' + value + '}'\n                } else {\n                    return '{idx|' + (1 + index + opt.index) + '} {title|' + value + '}'\n                }\n            },\n            rich: {\n                    idx0: {\n                    color: '#959598',\n                    backgroundColor: '#FFE8EC',\n                    borderRadius: 100,\n                    padding:  arrs.length >=8 ? [5,11]:[12,13]\n                },\n                idx1: {\n                    color: '#959598',\n                    backgroundColor: '#FFEACF',\n                    borderRadius: 100,\n                       padding:  arrs.length >=8 ? [5,11]:[12,13]\n                },\n                idx2: {\n                    color: '#959598',\n                    backgroundColor: '#E1F7F3',\n                    borderRadius: 100,\n                    padding:  arrs.length >=8 ? [5,11]:[12,13]\n                },\n                idx: {\n                    color: '#fff',\n                    borderRadius: 100,\n                    backgroundColor: 'rgba(108, 108, 108, 0.6)',\n                       padding:  arrs.length >=8 ? [5,11]:[12,13]\n                },\n                title:{\n                    backgroundColor: 'rgba(35,169,244, 0.1)',\n                    color: '#959598',\n                    width: arrs.length >=8 ? 100 :9,\n                    align:'center',\n                    borderRadius: 5,\n                    fontSize:14,\n                    padding: arrs.length  >=8 ? 10 :15,\n                   \n                }\n            }\n        },\n    },{\n        triggerEvent: true,\n        show: true,\n        inverse: true,\n        data: getArrByKey(arrs, languagesNameBg),\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            interval: 0,\n            color: '#959598',\n            align: 'left',\n            margin: 12,\n            fontSize:14,\n          \n        }\n    }],\n    series: [{\n            type: 'bar',\n            yAxisIndex: 0,\n            data: arrs,\n            barWidth:  14,\n            label: {\n                normal: {\n                    show: false,\n                    position: 'right',\n                    textStyle: {\n                        color: '#959598',\n                        fontSize:14,\n                    },\n            \n                },\n                \n            },\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 10,\n                          color: (val) => {\n                            if (val.dataIndex < 3 && opt.index === 0) {\n                                 if(val.data.cd_amount<0){\n                                      return 'red'\n                                }else{\n                                     return colors[val.dataIndex];\n                                }\n                                \n                            } else {\n\n                                if(val.data.cd_amount<0){\n                                      return 'red'\n                                }else{\n                                     return 'rgba(255,255,255,.6)'\n                                }\n                               \n                            }\n                        },\n                    \n                }\n            },\n\n        }\n    ]\n},\n       {\n        grid: {\n        // top: '20%',\n        left:  arrs2.length >=8 ? \"30%\":40,\n        top:'5%',\n        bottom:\"15%\",\n        right:'30%',\n    },\n       tooltip:{\n        show:true,\n        backgroundColor: 'rgba(3,169,244, 0.5)',//背景颜色（此时为默认色）\n        textStyle:{\n              fontSize:14\n        },\n       \n    },\n    xAxis: {\n        show: false\n    },\n    yAxis: [{\n        show: true,\n        data: getArrByKey(arrs2, languagesNameBg),\n        inverse: true,\n       \n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n               fontSize: arrs2.length >=8 ? 14 :18,\n               formatter: function (value, index) {\n                  if(value.length>7){\n                    value= value.substring(0,7)+\"...\"\n                  }\n               const vas='';\n                if (opt.index === 0 && index < 3) {\n                    return '{idx' + index + '|' + (1 + index) + '} {title|' + value + '}'\n                } else if (opt.index !== 0 && (index + opt.index) <= 10) {\n                    return '{idx|0' + (1 + index + opt.index) + '} {title|' + value + '}'\n                } else {\n                    return '{idx|' + (1 + index + opt.index) + '} {title|' + value + '}'\n                }\n            },\n            rich: {\n                    idx0: {\n                    color: '#959598',\n                    backgroundColor: '#FFE8EC',\n                    borderRadius: 100,\n                    padding:  arrs2.length >=8 ? [5,11]:[12,13]\n                },\n                idx1: {\n                    color: '#959598',\n                    backgroundColor: '#FFEACF',\n                    borderRadius: 100,\n                       padding:  arrs2.length >=8 ? [5,11]:[12,13]\n                },\n                idx2: {\n                    color: '#959598',\n                    backgroundColor: '#E1F7F3',\n                    borderRadius: 100,\n                    padding:  arrs2.length >=8 ? [5,11]:[12,13]\n                },\n                idx: {\n                    color: '#fff',\n                    borderRadius: 100,\n                    backgroundColor: 'rgba(108, 108, 108, 0.6)',\n                       padding:  arrs2.length >=8 ? [5,11]:[12,13]\n                },\n                title:{\n                    backgroundColor: 'rgba(35,169,244, 0.1)',\n                    color: '#959598',\n                    width: arrs2.length >=8 ? 100 :9,\n                    align:'center',\n                    borderRadius: 5,\n                    fontSize:12,\n                    padding: arrs2.length  >=8 ? 10 :15,\n                   \n                }\n            }\n        },\n    },{\n        triggerEvent: true,\n        show: true,\n        inverse: true,\n        data: getArrByKey(arrs2, languagesNameBg),\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            interval: 0,\n            color: '#959598',\n            align: 'left',\n            margin: 12,\n            fontSize:14,\n          \n        }\n    }],\n    series: [{\n            type: 'bar',\n            yAxisIndex: 0,\n            data: arrs2,\n            barWidth:  14,\n            label: {\n                normal: {\n                    show: false,\n                    position: 'right',\n                    textStyle: {\n                        color: '#959598',\n                        fontSize:14,\n                    },\n            \n                },\n                \n            },\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 10,\n                          color: (val) => {\n                            if (val.dataIndex < 3 && opt.index === 0) {\n                                 if(val.data.cd_amount<0){\n                                      return 'red'\n                                }else{\n                                     return colors[val.dataIndex];\n                                }\n                                \n                            } else {\n\n                                if(val.data.cd_amount<0){\n                                      return 'red'\n                                }else{\n                                     return 'rgba(255,255,255,.6)'\n                                }\n                               \n                            }\n                        },\n                    \n                }\n            },\n\n        }\n    ]\n\n  }]\n    \n}","html":"","externalScripts":"","updaterUID":"bd-3489355751","theme":"","layout":"","viewCount":503,"userName":"a***4","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHURW8Ttr0.png?v=1594105932327","isCustomThumbnail":1,"builtinTags":["category-work","grid","series-bar","timeline","tooltip"],"customTags":[],"updaterUserName":"火***冰"}}