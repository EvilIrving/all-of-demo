{"status":0,"data":{"cid":"xoMngMwaMZ","authorUid":"bd-2307958024","authorUserName":"小***啊","title":"3D区域地图","description":"地图区域根据不同时间及监测数据显示不同颜色，右侧柱状图根据时间轴切换改变数值","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-29T05:48:56.000Z","lastUpdateTime":"2020-06-29T05:48:56.000Z","auth":2,"uid":"bd-2307958024","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-29T05:50:36.000Z","code":"  var timeData=[\"2020-06-22\", \"2020-06-23\", \"2020-06-24\", \"2020-06-25\", \"2020-06-26\", \"2020-06-27\"],\r\n        regionData=[\"郑州市\", \"开封市\", \"洛阳市\", \"平顶山市\", \"安阳市\", \"鹤壁市\", \"新乡市\", \"焦作市\", \"濮阳市\", \"许昌市\", \"漯河市\", \"三门峡市\", \"南阳市\", \"商丘市\", \"信阳市\", \"周口市\", \"驻马店市\", \"济源市\"],\r\n        chartData=[\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\r\n            [1, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n        ],\r\n        goalPFL=[\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14]\r\n        ],\r\n        PFL=[\r\n            [38.8, 10.4, 45.5, 25.2, 48.9, 13.2, 19.1, 22.4, 5.1, 16.1, 5.6, 22.6, 25.5, 12.3, 14.5, 5.8, 9, 15.4],\r\n            [5.9, 1.4, 7.5, 2.9, 7.1, 2.2, 0.1, 3.7, 0.8, 2.2, 0.9, 3.6, 4.1, 2, 2, 0.9, 1.4, 2.1],\r\n            [66.2, 4.8, 26, 16, 26.5, 9, 21, 24, 6, 11, 3, 19, 15, 12.3, 9.5, 5, 6.3, 14],\r\n            [32.3, 7.5, 39.8, 25.2, 45.9, 15, 25.9, 25.5, 5.2, 14.8, 5.7, 19.2, 18.5, 11.2, 14, 5.8, 7.2, 15.3],\r\n            [36.9, 8.1, 42.8, 24.8, 47.8, 14.2, 27.6, 27.8, 4.9, 16.1, 5.8, 20.7, 17.9, 11.6, 15, 5.6, 7, 14.3],\r\n            [38.7, 8.1, 41.5, 24.7, 49.6, 14.2, 28.3, 28.2, 4.8, 16, 5.8, 21.8, 16.7, 12.1, 17.5, 5.8, 6.8, 16.4],    \r\n        ];\r\n            \r\n  var option={\r\n                baseOption:{\r\n                    color: ['#7dc3fe', '#3685fe'],\r\n                    timeline: {\r\n                        axisType: 'category',\r\n                        loop: true,\r\n                        autoPlay: true,\r\n                        playInterval: 2000,\r\n                        symbolSize: 12,\r\n                        left: '5%',\r\n                        right: '5%',\r\n                        bottom: '0%',\r\n                        width: '90%',\r\n                        data: timeData,\r\n                        tooltip: {\r\n                            formatter: timeData\r\n                        }\r\n                    },\r\n                    tooltip: {\r\n                        show: true,\r\n                        formatter: function(params) {\r\n                            if(params.seriesType=='bar'){\r\n                                return params.name + '<br/>' + params.seriesName+'：'+params.value\r\n                            }else{\r\n                                return params.name + '：' + getControlInfo(params.data['value'],'text')\r\n                            }\r\n                        }\r\n                    },\r\n                    legend: {\r\n                        data: ['目标排放量','实际排放量'],\r\n                        right:'120'\r\n                    },\r\n                    visualMap: {\r\n                        type: 'piecewise',\r\n                        inverse:true,\r\n                        pieces: [\r\n                            {\r\n                                value: 0,\r\n                                label:'未启动',\r\n                                color: '#78b7bf'\r\n                            },\r\n                            {\r\n                                value: 1,\r\n                                label:'红色预警',\r\n                                color: 'red'\r\n                            },\r\n                            {\r\n                                value: 2,\r\n                                label:'橙色预警',\r\n                                color: 'orange'\r\n                            },\r\n                            {\r\n                                value: 3,\r\n                                label:'黄色预警',\r\n                                color: 'yellow'\r\n                            }\r\n                        ],\r\n                        orient: 'vertical',\r\n                        itemWidth: 25,\r\n                        itemHeight: 15,\r\n                        showLabel: true,\r\n                        seriesIndex: [0],\r\n                        textStyle: {\r\n                            color: '#7B93A7'\r\n                        },\r\n                        bottom: '10%',\r\n                        left: \"5%\"\r\n                    },\r\n                    grid: {\r\n                        right: '5%',\r\n                        top: '8%',\r\n                        bottom: '10%',\r\n                        width: '20%'\r\n                    },\r\n                    xAxis: {\r\n                        type: 'value',\r\n                        scale: true,\r\n                        position: 'top',\r\n                        min: 0,\r\n                        boundaryGap: false,\r\n                        splitLine: {\r\n                            show: false\r\n                        },\r\n                        axisLine: {\r\n                            show: false\r\n                        },\r\n                        axisTick: {\r\n                            show: false\r\n                        },\r\n                        axisLabel: {\r\n                            margin: 2,\r\n                            textStyle: {\r\n                                color: '#333'\r\n                            }\r\n                        }\r\n                    },\r\n                    yAxis: [{\r\n                        show:true,\r\n                        inverse: true,\r\n                        offset: '2',\r\n                        type: 'category',\r\n                        data: '',\r\n                        nameTextStyle: {\r\n                            color: '#333'\r\n                        },\r\n                        axisTick: {\r\n                            show: false\r\n                        },\r\n                        axisLabel: {\r\n                            //rotate:45,\r\n                            textStyle: {\r\n                                fontSize: 14,\r\n                                color: '#333'\r\n                            },\r\n                            interval: 0\r\n                        },\r\n                        axisLine: {\r\n                            show: false,\r\n                            lineStyle: {\r\n                                color: '#333'\r\n                            }\r\n                        },\r\n                        splitLine: {\r\n                            show: false,\r\n                            lineStyle: {\r\n                                color: '#333'\r\n                            }\r\n                        }\r\n                    }],\r\n                    series:[\r\n                        {\r\n                            type: 'map3D',\r\n                            name: '河南',\r\n                            map: 'henan',\r\n                            roam: true,\r\n                            right: '35%',\r\n                            left: '5%',\r\n                            bottom:'5%',\r\n                            geoIndex: 0,\r\n                            boxHeight: 16,\r\n                            boxDepth: 95,\r\n                            regionHeight: 4, //立体阴影高度\r\n                            itemStyle: {\r\n                                // areaColor: '#1d5e98',\r\n                                opacity: 1,\r\n                                borderWidth: 0.6,\r\n                                borderColor: 'yellow'\r\n                            },\r\n                            label: {\r\n                                show: true,\r\n                                textStyle: {\r\n                                    color: '#00ffff', //地图初始化区域字体颜色\r\n                                    fontSize: 14,\r\n                                    opacity: 1, //图形不透明度\r\n                                    backgroundColor: 'rgba(0,23,11,0.6)'\r\n                                }\r\n                            },\r\n                            emphasis: { //当鼠标放上去  地区区域是否显示名称\r\n                                label: {\r\n                                    show: false,\r\n                                    textStyle: {\r\n                                        color: '#FFF',\r\n                                        fontSize: 14,\r\n                                        backgroundColor: 'rgba(0,23,11,0)'\r\n                                    }\r\n                                }\r\n                            },\r\n                            viewControl: { //用于鼠标的旋转，缩放等视角控制。\r\n                                // autoRotate: true,    //自动旋转\r\n                                damping: 0.8,\r\n                                distance: 120, //距离中心原点的距离\r\n                                //minDistance: 40,\r\n                                alpha: 55, // 视角绕x轴的角度\r\n                                beta: 0, // 视角绕y轴的角度\r\n                                center: [0, 0, 0], //视角中心点，旋转也会围绕这个中心点旋转，默认为[0,0,0]\r\n                                animation: true\r\n                            }\r\n                        },\r\n                        {\r\n                            name: '目标排放量',\r\n                            type: 'bar',\r\n                            zlevel: 2,\r\n                            barWidth: '25%',\r\n                            barGap: 0,\r\n                            symbol: 'none',\r\n                            label: {\r\n                                normal: {\r\n                                    show: true,\r\n                                    fontSize: 12,\r\n                                    position: 'right',\r\n                                    formatter: '{c}'\r\n                                }\r\n                            }\r\n                        },\r\n                        {\r\n                            name: '实际排放量',\r\n                            type: 'bar',\r\n                            zlevel: 2,\r\n                            symbol: 'none',\r\n                            barWidth: '25%',\r\n                            barGap: 0,\r\n                            label: {\r\n                                normal: {\r\n                                    show: true,\r\n                                    fontSize: 12,\r\n                                    position: 'right',\r\n                                    formatter: '{c}'\r\n                                }\r\n                            }\r\n                        }\r\n                       \r\n                    ]\r\n                },\r\n                animationDurationUpdate: 3000,\r\n                animationEasingUpdate: 'quinticInOut',\r\n                options: []\r\n            };\r\n            for(var n = 0;n<timeData.length; n++){\r\n                var res = [],res1=[],barData1 = [], barData2 = [];\r\n                for (var j = 0; j < chartData[n].length; j++) {\r\n                    res.push({\r\n                        label: regionData[j],\r\n                        color:getControlInfo(chartData[n][j],'color')\r\n                    });\r\n                    res1.push({\r\n                        name: regionData[j],\r\n                        value:chartData[n][j]\r\n                    });\r\n                    barData1.push(goalPFL[n][j]);\r\n                    barData2.push(PFL[n][j]);\r\n                }\r\n                option.options.push({\r\n                    backgroundColor: '#013954',\r\n                    yAxis: {\r\n                       data: regionData\r\n                    },\r\n                    series: [\r\n                        {\r\n                            type: 'map3D',\r\n                            dataRange: {\r\n                                splitList: res\r\n                            },\r\n                            data: res1\r\n                        },\r\n                        {\r\n                            name: '目标排放量',\r\n                            type: 'bar',\r\n                            zlevel: 1.5,\r\n                            data: barData1\r\n                        },\r\n                        {\r\n                            name: '实际排放量',\r\n                            type: 'bar',\r\n                            data: barData2\r\n                        }\r\n                    ]\r\n                });\r\n            }\r\n            \r\n            \r\n         //转换颜色、文字\r\n        function getControlInfo(value,type) {\r\n            if(type=='color'){\r\n                return value==0?'#78b7bf':value==1?'red':value==2?'orange':'yellow';\r\n            }else{\r\n                return value==0?'未启动':value==1?'红色预警':value==2?'橙色预警':'黄色预警';\r\n            }\r\n        }        ","html":"","externalScripts":"/dep/echarts/map/js/china.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,https://gallery.echartsjs.com/asset/get/s/data-1591252907761-po2vasjs3.js","updaterUID":"bd-2307958024","theme":"","layout":"","viewCount":1377,"userName":"小***啊","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xoMngMwaMZ.png?v=1593409736909","isCustomThumbnail":1,"builtinTags":["category-work","grid","legend","series-bar","series-map3D","timeline","tooltip","visualMap"],"customTags":[],"updaterUserName":"小***啊"}}