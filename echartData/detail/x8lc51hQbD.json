{"status":0,"data":{"cid":"x8lc51hQbD","authorUid":"bd-1376687611","authorUserName":"安***打","title":"自定义图形，renderItem","description":"自定义图形，renderItem","latestVersion":3,"alwaysLatest":1,"createTime":"2019-07-13T07:19:11.000Z","lastUpdateTime":"2019-07-13T07:19:11.000Z","auth":2,"uid":"bd-1376687611","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-13T08:14:28.000Z","code":"option = null;\nvar startTime = +new Date();\nvar categories = ['categoryA', 'categoryB', 'categoryC', 'categoryD'];\n\nvar step = 14399285;\n\nvar data = [{\n\tname: 'JS Heap',\n\tvalue: [0, 1563000480298, (1563000480298 + step)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#7b9ce1'\n\t\t}\n\t}\n}, {\n\tname: 'Documents',\n\tvalue: [1, 1563000484450, (1563000484450 + step - 3000000)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#bd6d6c'\n\t\t}\n\t}\n}, {\n\tname: 'Nodes',\n\tvalue: [2, 1563000493753, (1563000493753 + step - 5000000)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#75d874'\n\t\t}\n\t}\n}, {\n\tname: 'Listeners',\n\tvalue: [3, 1563000503740, (1563000503740 + step)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#e0bc78'\n\t\t}\n\t}\n}, {\n\tname: 'GPU Memory',\n\tvalue: [2, 1563000506369, (1563000506369 + step - 8000000)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#e0bc78'\n\t\t}\n\t}\n}, {\n\tname: 'GPU',\n\tvalue: [3, 1563000513841, (1563000513841 + step - 12000000)],\n\titemStyle: {\n\t\tnormal: {\n\t\t\tcolor: '#72b362'\n\t\t}\n\t}\n}]\n\nfunction renderItem(params, api) {\n    var categoryIndex = api.value(0);\n    var start = api.coord([api.value(1), categoryIndex]);\n    var end = api.coord([api.value(2), categoryIndex]);\n    var height = api.size([0, 1])[1] * 0.6;\n    var width = end[0] - start[0];\n    var x = start[0];\n    var y = start[1] - height / 2;\n\n    var shape = echarts.graphic.clipPointsByRect([\n            [x, y],\n            [x + width - 10, y],\n            [x + width, y - height / 2],\n            [x + width - 10, y - height],\n            [x, y - height]\n        ], {\n        x: params.coordSys.x,\n        y: params.coordSys.y,\n        width: params.coordSys.width,\n        height: params.coordSys.height\n    });\n\n    return shape && {\n        type: 'polygon',\n        shape: {\n            points: shape\n        },\n        style: api.style()\n    }\n}\n\n\noption = {\n    tooltip: {\n        formatter: function (params) {\n            return params.marker + params.name + ': ' + params.value[1] + ' ms';\n        }\n    },\n    title: {\n        text: 'Profile',\n        left: 'center'\n    },\n    dataZoom: [{\n        type: 'slider',\n        filterMode: 'weakFilter',\n        showDataShadow: false,\n        top: 400,\n        height: 10,\n        borderColor: 'transparent',\n        backgroundColor: '#e2e2e2',\n        handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', // jshint ignore:line\n        handleSize: 20,\n        handleStyle: {\n            shadowBlur: 6,\n            shadowOffsetX: 1,\n            shadowOffsetY: 2,\n            shadowColor: '#aaa'\n        },\n        labelFormatter: ''\n    }, {\n        type: 'inside',\n        filterMode: 'weakFilter'\n    }],\n    grid: {\n        height:300\n    },\n    xAxis: [{\n        min: startTime,\n        scale: true,\n        axisLabel: {\n            formatter: function (val) {\n                return Math.max(0, val - startTime) + ' ms';\n            }\n        }\n    }],\n    yAxis: [{\n        data: categories\n    }],\n    series: [{\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            normal: {\n                opacity: 0.8\n            }\n        },\n        encode: {\n            x: [1, 2],\n            y: 0\n        },\n        data: data\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-1376687611","theme":"","layout":"","viewCount":1036,"userName":"安***打","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8lc51hQbD.png?v=1563005668962","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-custom","title","tooltip"],"customTags":[],"updaterUserName":"安***打"}}