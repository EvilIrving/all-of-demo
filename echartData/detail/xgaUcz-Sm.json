{"status":0,"data":{"cid":"xgaUcz-Sm","authorUid":"bd-2384254881","authorUserName":"y***g","title":"custom-三角形柱状图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-02-26T09:34:10.000Z","lastUpdateTime":"2020-02-26T09:34:10.000Z","auth":2,"uid":"bd-2384254881","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-27T09:25:22.000Z","code":"var colors = [{\n    type: 'linear',\n    x: 0, x2: 1, y: 0, y2: 0,\n    colorStops: [{\n        offset: 0,\n        color: '#21bddf80'\n    }, {\n        offset: 0.5,\n        color: '#21bddf80'\n    }, {\n        offset: 0.5,\n        \n        color: '#21bddf'\n    }, {\n        offset: 1,\n        color: '#21bddf'\n    }]\n}];\n\n\nvar barWidth = 30;\n\n\nvar getCrossPoint = function( point1 , point2 , x  ){\n    return (x - point1[0] ) * ( point2[1] - point1[1] ) / (point2[0] - point1[0]) + point1[1];\n}\n\n\n\n\n\n\nvar renderItem = function(params , api){\n              \n    var yValue = api.value(1);\n    var start = api.coord([api.value(0), yValue]);\n    var size = api.size([api.value(1) - api.value(0), yValue]);\n    var style = api.style();\n    // 可以建泰定义\n\n\n    // 最右边的点坐标\n    var rightPoint = [\n        [ x + width , size[1] + y ],\n    ];\n\n\n\n\n\n\ndebugger;\n    var width = size[0] * 1.2 ;\n    var x = start[0]  - width  / 2;\n    var y = start[1];\n\n    var bottomHeight = 20;\n\n    var points = [\n        [ x + width / 2 , y],\n    ];\n    \n    \n    \n    // 左边的坐标点\n    if( params.dataIndex == 0 ){\n        points.push( [ x , size[1] + y  ] );\n    }else {\n        points.push(\n            [ x + ( width / 2 - width / 1.2 / 2 ), \n            getCrossPoint( \n                [ x , size[1] + y],\n                [ x + width / 2 , y  ],\n                x + ( width / 2 - width / 1.2 / 2 )\n            ) ]\n        );\n        points.push(\n            [ x + ( width / 2 - width / 1.2 / 2 ), \n            getCrossPoint( \n                [ x , size[1] + y],\n                [ x + width / 2 , size[1] + y + bottomHeight  ],\n                x + ( width / 2 - width / 1.2 / 2 )\n            ) ]\n        );\n        \n    }\n    \n    \n    points.push( [ x + width / 2 , size[1] + y + bottomHeight] );\n    \n    \n    // 右边的坐标点\n    if( params.dataIndex == params.dataInsideLength - 1 ){\n        points.push( [ x + width  , size[1] + y ]  );\n    }else{\n        points.push(\n            [ x + width / 2 + width / 1.2 / 2 , \n            getCrossPoint( \n                [ x + width / 2 , size[1] + y + bottomHeight],\n                [ x + width , size[1] + y  ],\n                x + width / 2 + width / 1.2 / 2\n            ) ]    \n        );\n        \n        points.push(\n            [ x + width / 2 + width / 1.2 / 2 , \n            getCrossPoint( \n                [ x + width / 2 , y],\n                [ x + width , size[1] + y  ],\n                x + width / 2 + width / 1.2 / 2\n            ) ] \n        );\n        \n    }\n    \n    \n\n    \n    \n    \n    \n   \n   style.stroke = '#25dafd';\n   style.lineWidth = 2;\n    \n    var group = {\n        type : 'group',\n        children : [{\n            // 顶部\n            z2: 3,\n            type :'polygon',\n            shape : {\n                points : points\n            },\n            style:style\n        }],\n    };\n    \n\n    return group; \n  \n}\n\n\n\n\noption = {\n    title: {\n        text: 'Awesome Chart'\n    },\n    xAxis: {\n        data: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    yAxis: {},\n    series: [{\n        type : 'custom',\n        itemStyle:{\n            normal:{\n                color:colors[0] ,\n            }\n        },\n        data:[220, 182, 191, 234, 290, 330, 310],\n        renderItem : renderItem\n    },{\n        type :'line',\n        lineStyle:{\n            color:'white'\n        },\n        symbol:'circle',\n        symbolSize:10,\n         itemStyle:{\n            color:'#25dafd',\n        },\n        data:[220, 182, 191, 234, 290, 330, 310],\n    }]\n      \n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","html":"","externalScripts":"","updaterUID":"bd-2384254881","theme":"","layout":"","viewCount":102,"userName":"y***g","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgaUcz-Sm.png?v=1582795522575","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","series-line","title"],"customTags":[],"updaterUserName":"y***g"}}