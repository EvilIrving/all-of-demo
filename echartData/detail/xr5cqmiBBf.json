{"status":0,"data":{"cid":"xr5cqmiBBf","authorUid":"obd-oC-ckOd58OtDyenzW1lj-oNwP6W5D3r","authorUserName":"t***1","title":"模拟3D地图——迁徙图","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-07-14T08:34:32.000Z","lastUpdateTime":"2020-07-14T08:34:32.000Z","auth":2,"uid":"obd-oC-ckOd58OtDyenzW1lj-oNwP6W5D3r","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-16T02:17:11.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\n\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\nvar points = [\n                  {value: [118.8062, 31.9208],itemStyle:{color:'#4ab2e5'}}\n                  , {value: [127.9688, 45.368],itemStyle:{color:'#4fb6d2'}}\n                  , {value: [110.3467, 41.4899],itemStyle:{color:'#52b9c7'}}\n                  , {value: [125.8154, 44.2584],itemStyle:{color:'#5abead'}}\n                  , {value: [116.4551, 40.2539],itemStyle:{color:'#f34e2b'}}\n                  , {value: [123.1238, 42.1216],itemStyle:{color:'#f56321'}}\n                  , {value: [114.4995, 38.1006],itemStyle:{color:'#f56f1c'}}\n                  , {value: [117.4219, 39.4189],itemStyle:{color:'#f58414'}}\n                  , {value: [112.3352, 37.9413],itemStyle:{color:'#f58f0e'}}\n                  , {value: [109.1162, 34.2004],itemStyle:{color:'#f5a305'}}\n                  , {value: [103.5901, 36.3043],itemStyle:{color:'#e7ab0b'}}\n                  , {value: [106.3586, 38.1775],itemStyle:{color:'#dfae10'}}\n                  , {value: [101.4038, 36.8207],itemStyle:{color:'#d5b314'}}\n                  , {value: [103.9526, 30.7617],itemStyle:{color:'#c1bb1f'}}\n                  , {value: [108.384366, 30.439702],itemStyle:{color:'#b9be23'}}\n                  , {value: [113.0823, 28.2568],itemStyle:{color:'#a6c62c'}}\n                  , {value: [102.9199, 25.46639],itemStyle:{color:'#96cc34'}}\n                  , {value: [119.4543, 25.9222]}\n  ]\n// var uploadedDataURL = \"/asset/get/s/data-1482909892121-BJ3auk-Se.json\";\nmyChart.showLoading();\n      let index = -1;\n      \n$.getJSON(uploadedDataURL, function(geoJson) {\n    \n    echarts.registerMap('china', geoJson);\n    myChart.hideLoading();\n    option = {\n        backgroundColor: '#013954',\n     /*   title: {\n            top: 20,\n            text: '“困难人数” - 杭州市',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },*/\n\n        // tooltip: {\n        //     trigger: 'item',\n        //     formatter: function(params) {\n        //         console.log(params)\n        //             return params.name + ' : ' + params.value[2];\n        //     }\n        // },\n       /*visualMap: {\n          min: 0,\n          max: 1000000,\n          right: 100,\n          seriesIndex: 1,\n          type: 'piecewise',\n          bottom: 100,\n          textStyle: {\n            color: '#FFFF'\n          },\n          splitList: [\n            {\n              gt: 50000,\n              color: '#F5222D',\n              label: '困难人数大于5万人'\n            }, //大于5万人\n            {\n              gte: 30000,\n              lte: 50000,\n              color: '#FA541C ',\n              label: '困难人数3-5万人'\n            }, //3-5万人\n            {\n              gte: 10000,\n              lte: 30000,\n              color: '#FA8C16',\n              label: '困难人数1-3万人'\n            }, //1-3万人\n            {\n              lte: 10000,\n              color: '#fbe1d6',\n              label: '困难人数小于1万人'\n            }\n          ]\n        },*/\n\n        geo: {\n            map: 'china',\n          aspectScale: 0.75, //长宽比\n          zoom: 1.1,\n          roam: false,\n          itemStyle: {\n            normal: {\n              areaColor: {\n                        type: 'radial',\n                        x: 0.5,\n                        y: 0.5,\n                        r: 0.8,\n                        colorStops: [{\n                            offset: 0,\n                            color: '#09132c' // 0% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: '#274d68'  // 100% 处的颜色\n                        }],\n                        globalCoord: true // 缺省为 false\n                    },\n              shadowColor:'rgb(58,115,192)',\n              shadowOffsetX: 10,\n              shadowOffsetY: 11\n            },\n            emphasis: {\n              areaColor: '#2AB8FF',\n              borderWidth: 0,\n              color: 'green',\n              label: {\n                show: false\n              }\n            }\n          },\n          regions: [{\n            name: '南海诸岛',\n            itemStyle: {\n                areaColor: 'rgba(0, 10, 52, 1)',\n\n                borderColor: 'rgba(0, 10, 52, 1)',\n                normal: {\n                    opacity: 0,\n                    label: {\n                        show: false,\n                        color: \"#009cc9\",\n                    }\n                }\n            },\n\n\n        }],\n        },\n        series: [ {\n            type: 'map',\n            roam: false,\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#1DE9B6'\n                    }\n                },\n                emphasis: {\n                    textStyle: {\n                        color: 'rgb(183,185,14)'\n                    }\n                }\n            },\n\n            itemStyle: {\n              normal: {\n               borderColor: 'rgb(147, 235, 248)',\n                borderWidth: 1,\n                areaColor: {\n                        type: 'radial',\n                        x: 0.5,\n                        y: 0.5,\n                        r: 0.8,\n                        colorStops: [{\n                            offset: 0,\n                            color: '#09132c' // 0% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: '#274d68'  // 100% 处的颜色\n                        }],\n                        globalCoord: true // 缺省为 false\n                    },\n              },\n              emphasis: {\n                    areaColor: 'rgb(46,229,206)',\n                //    shadowColor: 'rgb(12,25,50)',\n                    borderWidth: 0.1\n                }\n            },\n            zoom: 1.1,\n       //     roam: false,\n            map: 'china' //使用\n            // data: this.difficultData //热力图数据   不同区域 不同的底色\n          },{\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                showEffectOn: 'render',\n                zlevel:1,\n                rippleEffect: {\n                    period: 15,\n                    scale: 4,\n                    brushType: 'fill'\n                },\n                hoverAnimation: true,\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        offset: [15, 0],\n                        color: '#1DE9B6',\n                        show: true\n                    },\n                },\n                itemStyle: {\n                    normal: {\n                       color:'#1DE9B6'/* function (value){ //随机颜色\n return \"#\"+(\"00000\"+((Math.random()*16777215+0.5)>>0).toString(16)).slice(-6);\n }*/,\n                        shadowBlur: 10,\n                        shadowColor: '#333'\n                    }\n                },\n                symbolSize: 12,\n                data: points\n            }, //地图线的动画效果\n          {\n                type: 'lines',\n                zlevel: 2,\n                effect: {\n                    show: true,\n                    period: 4, //箭头指向速度，值越小速度越快\n                    trailLength: 0.4, //特效尾迹长度[0,1]值越大，尾迹越长重\n                    symbol: 'arrow', //箭头图标\n                    symbolSize: 7, //图标大小\n                },\n                lineStyle: {\n                    normal: {\n                        color:'#1DE9B6'\n                        /* function (value){ //随机颜色\n                        \n                        ['#f21347','#f3243e','#f33736','#f34131','#f34e2b',\n                        '#f56321','#f56f1c','#f58414','#f58f0e','#f5a305',\n                        '#e7ab0b','#dfae10','#d5b314','#c1bb1f','#b9be23',\n                        '#a6c62c','#96cc34','#89d23b','#7ed741','#77d64c',\n                        '#71d162','#6bcc75','#65c78b','#5fc2a0','#5abead',\n                        '#52b9c7','#4fb6d2','#4ab2e5']\n return \"#\"+(\"00000\"+((Math.random()*16777215+0.5)>>0).toString(16)).slice(-6);\n }*/,\n                        width: 1, //线条宽度\n                        opacity: 0.1, //尾迹线条透明度\n                        curveness: .3 //尾迹线条曲直度\n                    }\n                },\n                data: [\n                    {coords: [[118.8062, 31.9208],[119.4543, 25.9222]],lineStyle:{color:'#4ab2e5'}}\n                  , {coords: [[127.9688, 45.368],[119.4543, 25.9222]],lineStyle:{color:'#4fb6d2'}}\n                  , {coords: [[110.3467, 41.4899],[119.4543, 25.9222]],lineStyle:{color:'#52b9c7'}}\n                  , {coords: [[125.8154, 44.2584],[119.4543, 25.9222]],lineStyle:{color:'#5abead'}}\n                  , {coords: [[116.4551, 40.2539],[119.4543, 25.9222]],lineStyle:{color:'#f34e2b'}}\n                  , {coords: [[123.1238, 42.1216],[119.4543, 25.9222]],lineStyle:{color:'#f56321'}}\n                  , {coords: [[114.4995, 38.1006],[119.4543, 25.9222]],lineStyle:{color:'#f56f1c'}}\n                  , {coords: [[117.4219, 39.4189],[119.4543, 25.9222]],lineStyle:{color:'#f58414'}}\n                  , {coords: [[112.3352, 37.9413],[119.4543, 25.9222]],lineStyle:{color:'#f58f0e'}}\n                  , {coords: [[109.1162, 34.2004],[119.4543, 25.9222]],lineStyle:{color:'#f5a305'}}\n                  , {coords: [[103.5901, 36.3043],[119.4543, 25.9222]],lineStyle:{color:'#e7ab0b'}}\n                  , {coords: [[106.3586, 38.1775],[119.4543, 25.9222]],lineStyle:{color:'#dfae10'}}\n                  , {coords: [[101.4038, 36.8207],[119.4543, 25.9222]],lineStyle:{color:'#d5b314'}}\n                  , {coords: [[103.9526, 30.7617],[119.4543, 25.9222]],lineStyle:{color:'#c1bb1f'}}\n                  , {coords: [[108.384366, 30.439702],[119.4543, 25.9222]],lineStyle:{color:'#b9be23'}}\n                  , {coords: [[113.0823, 28.2568],[119.4543, 25.9222]],lineStyle:{color:'#a6c62c'}}\n                  , {coords: [[102.9199, 25.46639],[119.4543, 25.9222]],lineStyle:{color:'#96cc34'}}\n                ]\n            }\n\n        ]\n    };\n    myChart.setOption(option,true);\n});","html":"","externalScripts":"","updaterUID":"obd-oC-ckOd58OtDyenzW1lj-oNwP6W5D3r","theme":"","layout":"","viewCount":69042,"userName":"t***1","commentCount":15,"starCount":164,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xr5cqmiBBf.png?v=1594865831570","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-map"],"customTags":[],"updaterUserName":"t***1"}}