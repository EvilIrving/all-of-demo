{"status":0,"data":{"cid":"xSfqzGpdSQ","authorUid":"obd-ot3AyyzGyeEtLDW8pSySQRqQMg-si8s","authorUserName":"柳***艳","title":"各环节平均值与阀值对比","description":"echart图表label间用图片或文字内容连接","latestVersion":9,"alwaysLatest":1,"createTime":"2020-05-14T02:28:49.000Z","lastUpdateTime":"2020-05-14T02:28:49.000Z","auth":1,"uid":"obd-ot3AyyzGyeEtLDW8pSySQRqQMg-si8s","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-31T05:37:59.000Z","code":"\nvar _seriesName = [\"专家评审，完成项目挂网招标\", \"完成施工图设计\", \"施工图及预算送审\", \"设备入场安装\", \"改造并试运行\"];\nvar threshold = [8,1.05, 1.09, 1.02, 1.72, 1.6];\nvar avgTime = [8, 0.8, 2, 1.57, 1.12,2.97];\nvar arrow = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAALCAYAAABPhbxiAAABPklEQVQoU42SzUoCYRSGn89hKrBFoM4kRdEiiFpYuGnTDZRgzpjUJmjXDXQFXYVt25T5RyEYNv0s2rVr1Q2EMyRSIUaO88UMBK7Uszy8D7zveY9g2NilDITO8GSWuPE0KBVDQaeyDtwjmUAhTTRj/euHg77KLidA3AFhhDTQjLq/Hg36qlZxDVexEHKGnswxZ14LmmWN7ucXS0c/OA/TdDsqi6k2L3mVhfkI2k4zsPdRXKEfshDEcMWBwKm0EfKSmHGMXa0jvBiakaRZOoXQCfZ3hMRhJ4Cd6jZ4NaToCFrVLL3fN2ZzrzhXW0hlCt1o4NwsI91N9Mx5ALUKq/TVBoIoPW9/vIz2RQImb4OMfWkSN2ujwfdCEkX1LxkGmQ7cjLyqU9wAxQp69NwU8b3H8Xq0K7sg8yANdPN58Fn+AEPQbWQwQnnNAAAAAElFTkSuQmCC';\n\noption = {\n    backgroundColor: '#051B39',\n    title: {\n        text: '各节点时间对比',\n        left: 26,\n        top: 26,\n        textStyle: {\n            color: '#FFFFFF',\n            fontSize: 90,\n            fontWeight: 50000,\n            fontFamily: 'PingFang SC'\n        }\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        },\n        formatter: function(val) {\n            let color = '';\n            if ((val[0].axisValue == 'E' || val[0].axisValue == 'G') && val[0].value > threshold[val[0].dataIndex]) {\n                color = '#FCE149';\n            } else {\n                color = '#37C611';\n            }\n            return `${val[0].name}<br/>\n\t\t\t\t\t\t\t\t\t\t<span style=\"color:${color};\">   ● </span>${val[0].seriesName}: ${val[0].data}s<br/>\n\t\t\t\t\t\t\t\t\t\t<span style=\"color:#3AB6EB;\">   ● </span>${val[1].seriesName}: ${val[1].data}s`\n        }\n    },\n    grid: [{\n            // show: true,\n            left: '5%',\n            right: '12%',\n            bottom: 70,\n            top: '60px',\n        },\n        {\n            bottom: 70,\n            left: '11%', // 为了让第2个grid显示在2个柱状图中间，中间相隔百分比为100/14\n            right: '5%',\n            height: 0,  //  不显示第2个grid的图表，只显示label\n            // show: true,\n        }\n    ],\n    legend: {\n        data: ['计划完成时间', '实际执行时间'],\n        left: '30%',\n        bottom: 4,\n        textStyle: {\n            color: \"#ffffff\"\n        },\n        itemWidth: 20,\n        itemHeight: 10,\n        borderRadius: 5,  // borderRadius最大为宽高最小值的一半，即为5\n        itemGap: 30\n    },\n    yAxis: [{\n            type: 'value',\n            gridIndex: 0,\n            axisLine: {\n                show: false,\n                onZero: true\n            },\n            splitLine: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n            }\n        },\n        {\n            type: 'value',\n            gridIndex: 1,\n            axisLine: {\n                show: false,\n                onZero: true\n            },\n            splitLine: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n            },\n        }\n    ],\n    xAxis: [{\n            type: 'category',\n            gridIndex: 0,\n            axisTick: {\n                show: false\n            },\n            axisLine: {\n                show: false,\n                align: 'center',\n                lineStyle: {\n                    color: \"#A3\",\n                    fontSize: '14px'\n                }\n            },\n            axisLabel: {\n                show: true,\n                color: '#fff',\n            },\n            data: _seriesName,\n            zlevel: 2\n        },\n        {\n            type: 'category',\n            gridIndex: 1,\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: \"#A3B4E5\",\n                    fontSize: '14px'\n                }\n            },\n            zlevel: 1,\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                // inside: true,\n                color: 'red',\n                align: 'center',\n                formatter: (val) => {\n                    if (val != 'G') {  //  不显示最后一个A，\n                        return '{b| }';\n                        // return '{a|A}'   //  可替换为连接图片\n                    }\n                },\n                rich: {\n                    b: {\n                        backgroundColor: {\n                            // image: require('@/assets/images/arrow.png'),  // 可替换为本地图片\n                            image: arrow,\n                            width: '14px'\n                        },\n                        fontSize: 10\n                    }\n                }\n            },\n            data: [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\"]  //  必须写data数据\n        }\n    ],\n    series: [{\n            name: '计划完成时间',\n            type: 'bar',\n            barWidth: 30,\n            itemStyle: {\n                normal: {\n                    color: (val) => {\n                        let curId = val.dataIndex;\n                        if ((curId == 4 || curId == 6) && val.value > threshold[val.dataIndex]) {\n                            return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#FCE149'\n                            }, {\n                                offset: 1,\n                                color: '#EB893A'\n                            }])\n                        } else {\n                            return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#C0EB59'\n                            }, {\n                                offset: 1,\n                                color: '#37C611'\n                            }])\n                        }\n                    },\n                    barBorderRadius: 12,\n                },\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top',\n                    fontSize: 11,\n                    color: '#3AC712',\n                    formatter: (val) => {\n                        return `${val.value}s`;\n                    }\n                }\n            },\n            data: avgTime,\n            xAxisIndex: 0,\n            yAxisIndex: 0\n        },\n        {\n            name: '计划完成时间量',\n            type: 'bar',\n            barWidth: 30,\n            barGap: '150%', // 不同系列的柱间距离  为barWidth的 1.5倍\n            // barCateGoryGap: 40,  //同一系列的柱间距离，默认为类目间距的20%，可设固定值\n            itemStyle: {\n                normal: {\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: '#49FCB0'\n                    }, {\n                        offset: 1,\n                        color: '#3AB6EB'\n                    }]),\n                    barBorderRadius: 11,\n                }\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top',\n                    fontSize: 11,\n                    color: '#48FAB1',\n                    formatter: (val) => {\n                        return `${val.value}s`;\n                    }\n                }\n            },\n            data: threshold,\n            xAxisIndex: 0,\n            yAxisIndex: 0\n        },\n        {\n            type: 'bar',\n            xAxisIndex: 1, //  表示第2个grid的数据\n            yAxisIndex: 1\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"obd-oE77V18n0y6Oy0DrKzrM0gLILfaLR4c","theme":"","layout":"","viewCount":8732,"userName":"柳***艳","commentCount":0,"starCount":19,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSfqzGpdSQ.png?v=1598852279226","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"f***6"}}