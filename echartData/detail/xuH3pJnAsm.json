{"status":0,"data":{"cid":"xuH3pJnAsm","authorUid":"bd-127895190","authorUserName":"C***N","title":"动态时间轴 双X曲线","description":"动态创建双x轴曲线","latestVersion":4,"alwaysLatest":1,"createTime":"2018-11-28T14:20:46.000Z","lastUpdateTime":"2018-11-28T14:20:46.000Z","auth":1,"uid":"bd-127895190","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.0","versionCreateTime":"2018-11-28T14:50:52.000Z","code":"var data = [\r\n    {\r\n        \"hzList\":[\r\n            {\"ObservateTime\":\"2017-12-31 01:00:00\",\"layerValue\":55.4},\r\n            {\"ObservateTime\":\"2017-12-31 02:00:00\",\"layerValue\":55.4},\r\n            {\"ObservateTime\":\"2017-12-31 03:00:00\",\"layerValue\":55.4},\r\n            {\"ObservateTime\":\"2017-12-31 04:00:00\",\"layerValue\":55.4},\r\n            {\"ObservateTime\":\"2017-12-31 05:00:00\",\"layerValue\":55.3},\r\n            {\"ObservateTime\":\"2017-12-31 06:00:00\",\"layerValue\":55.3},\r\n            {\"ObservateTime\":\"2017-12-31 07:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 08:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 09:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 10:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 11:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 12:00:00\",\"layerValue\":55.2},\r\n            {\"ObservateTime\":\"2017-12-31 13:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 14:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 15:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 16:00:00\",\"layerValue\":55.0},\r\n            {\"ObservateTime\":\"2017-12-31 17:00:00\",\"layerValue\":55.0},\r\n            {\"ObservateTime\":\"2017-12-31 18:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 19:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 20:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 21:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 22:00:00\",\"layerValue\":55.1},\r\n            {\"ObservateTime\":\"2017-12-31 23:00:00\",\"layerValue\":55.1}\r\n        ],\r\n        \"stationName\":\"西藏\",\r\n        \"tempList\":[\r\n            {\"ObservateTime\":\"2017-12-31 01:01:00\",\"layerValue\":-10.9},\r\n            {\"ObservateTime\":\"2017-12-31 02:01:00\",\"layerValue\":-11.1},\r\n            {\"ObservateTime\":\"2017-12-31 03:01:00\",\"layerValue\":-10.8},\r\n            {\"ObservateTime\":\"2017-12-31 04:01:00\",\"layerValue\":-10.4},\r\n            {\"ObservateTime\":\"2017-12-31 05:01:00\",\"layerValue\":-10.0},\r\n            {\"ObservateTime\":\"2017-12-31 06:01:00\",\"layerValue\":-9.7},\r\n            {\"ObservateTime\":\"2017-12-31 07:01:00\",\"layerValue\":-9.3},\r\n            {\"ObservateTime\":\"2017-12-31 08:01:00\",\"layerValue\":-9.2},\r\n            {\"ObservateTime\":\"2017-12-31 09:01:00\",\"layerValue\":-9.0},\r\n            {\"ObservateTime\":\"2017-12-31 10:01:00\",\"layerValue\":-8.9},\r\n            {\"ObservateTime\":\"2017-12-31 11:01:00\",\"layerValue\":-8.4},\r\n            {\"ObservateTime\":\"2017-12-31 12:01:00\",\"layerValue\":-7.5},\r\n            {\"ObservateTime\":\"2017-12-31 13:01:00\",\"layerValue\":-6.2},\r\n            {\"ObservateTime\":\"2017-12-31 14:01:00\",\"layerValue\":-6.1},\r\n            {\"ObservateTime\":\"2017-12-31 15:01:00\",\"layerValue\":-5.4},\r\n            {\"ObservateTime\":\"2017-12-31 16:01:00\",\"layerValue\":-4.9},\r\n            {\"ObservateTime\":\"2017-12-31 17:01:00\",\"layerValue\":-5.2},\r\n            {\"ObservateTime\":\"2017-12-31 18:01:00\",\"layerValue\":-6.0},\r\n            {\"ObservateTime\":\"2017-12-31 19:01:00\",\"layerValue\":-6.6},\r\n            {\"ObservateTime\":\"2017-12-31 20:01:00\",\"layerValue\":-6.8},\r\n            {\"ObservateTime\":\"2017-12-31 21:01:00\",\"layerValue\":-6.9},\r\n            {\"ObservateTime\":\"2017-12-31 22:01:00\",\"layerValue\":-6.9},\r\n            {\"ObservateTime\":\"2017-12-31 23:01:00\",\"layerValue\":-7.0}\r\n        ]\r\n    },\r\n    {\r\n        \"hzList\":[],\r\n        \"stationName\":\"内蒙\",\r\n        \"tempList\":[]\r\n    },\r\n    {\r\n        \"hzList\":[\r\n            {\"ObservateTime\":\"2017-12-31 01:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 02:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 03:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 04:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 05:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 06:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 07:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 08:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 09:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 10:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 11:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 12:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 13:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 14:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 15:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 16:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 17:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 18:00:00\",\"layerValue\":43.7},\r\n            {\"ObservateTime\":\"2017-12-31 19:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 20:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 21:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 22:00:00\",\"layerValue\":43.8},\r\n            {\"ObservateTime\":\"2017-12-31 23:00:00\",\"layerValue\":43.8}\r\n        ],\r\n        \"stationName\":\"新疆\",\r\n        \"tempList\":[\r\n            {\"ObservateTime\":\"2017-12-31 01:00:00\",\"layerValue\":-5.3},\r\n            {\"ObservateTime\":\"2017-12-31 02:00:00\",\"layerValue\":-5.4},\r\n            {\"ObservateTime\":\"2017-12-31 03:00:00\",\"layerValue\":-5.6},\r\n            {\"ObservateTime\":\"2017-12-31 04:00:00\",\"layerValue\":-5.7},\r\n            {\"ObservateTime\":\"2017-12-31 05:00:00\",\"layerValue\":-5.9},\r\n            {\"ObservateTime\":\"2017-12-31 06:00:00\",\"layerValue\":-6.1},\r\n            {\"ObservateTime\":\"2017-12-31 07:00:00\",\"layerValue\":-6.2},\r\n            {\"ObservateTime\":\"2017-12-31 08:00:00\",\"layerValue\":-6.4},\r\n            {\"ObservateTime\":\"2017-12-31 09:00:00\",\"layerValue\":-6.6},\r\n            {\"ObservateTime\":\"2017-12-31 10:00:00\",\"layerValue\":-6.5},\r\n            {\"ObservateTime\":\"2017-12-31 11:00:00\",\"layerValue\":-6.2},\r\n            {\"ObservateTime\":\"2017-12-31 12:00:00\",\"layerValue\":-5.9},\r\n            {\"ObservateTime\":\"2017-12-31 13:00:00\",\"layerValue\":-5.6},\r\n            {\"ObservateTime\":\"2017-12-31 14:00:00\",\"layerValue\":-5.2},\r\n            {\"ObservateTime\":\"2017-12-31 15:00:00\",\"layerValue\":-5.1},\r\n            {\"ObservateTime\":\"2017-12-31 16:00:00\",\"layerValue\":-4.9},\r\n            {\"ObservateTime\":\"2017-12-31 17:00:00\",\"layerValue\":-5.1},\r\n            {\"ObservateTime\":\"2017-12-31 18:00:00\",\"layerValue\":-5.4},\r\n            {\"ObservateTime\":\"2017-12-31 19:00:00\",\"layerValue\":-5.6},\r\n            {\"ObservateTime\":\"2017-12-31 20:00:00\",\"layerValue\":-5.9},\r\n            {\"ObservateTime\":\"2017-12-31 21:00:00\",\"layerValue\":-6.1},\r\n            {\"ObservateTime\":\"2017-12-31 22:00:00\",\"layerValue\":-6.2},\r\n            {\"ObservateTime\":\"2017-12-31 23:00:00\",\"layerValue\":-6.4}\r\n        ]\r\n    }\r\n];\r\nvar colors = ['#5793f3', '#d14a61', '#675bba'];\r\nvar timeLineData = function(data){\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++){\r\n        res.push(data[i].stationName)\r\n    }\r\n    return res;\r\n}\r\nvar optionsData = function(data){\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++){\r\n        res.push({\r\n            title: {\r\n                text: data[i].stationName + \" 温度/频率 变化曲线\",\r\n                subtext: \"By 我要成为酷酷的人\",\r\n                sublink: \"https://www.cnblogs.com/CooLLYP/\",\r\n                left: 'center',\r\n                top: 10\r\n            },\r\n            xAxis: [{\r\n                name: data[i].stationName+\"温度\",\r\n                data: xAxisDatas(data, data[i].stationName, '温度')\r\n            }, {\r\n                name: data[i].stationName+\"频率\",\r\n                data: xAxisDatas(data, data[i].stationName, '频率')\r\n            }],\r\n            yAxis: [{\r\n                type: 'value'\r\n            }],\r\n            tooltip: {\r\n            \ttrigger: 'axis',\r\n            \taxisPointer:{\r\n            \t\ttype: 'cross'\r\n            \t}\r\n            },\r\n            grid: {\r\n            \ttop: \"15%\",\r\n            \tbottom: \"15%\",\r\n                // tooltip: {\r\n                //     trigger: 'axis',\r\n                //     axisPointer: {\r\n                //         type: 'shadow',\r\n                //         label: {\r\n                //             show: true,\r\n                //             backgroundColor: \"rgba(0,0,0,1)\",\r\n                //             formatter: function (params) {\r\n                //                 return params.value;\r\n                //             }\r\n                //         }\r\n                //     }\r\n                // }\r\n            },\r\n            series: [\r\n                {\r\n                    name: data[i].stationName+\"温度\",\r\n                    type: 'line',\r\n\t\t            smooth: true,\r\n                    data: seriesData(data, data[i].stationName, \"温度\")\r\n                }, // 温度数据\r\n                {\r\n                    name: data[i].stationName+\"频率\",\r\n                    type: 'line',\r\n\t\t            xAxisIndex: 1,\r\n\t\t\t\t\tsmooth: true,\r\n                    data: seriesData(data, data[i].stationName, \"频率\")\r\n                }, // 频率数据\r\n            ]\r\n        })\r\n    }\r\n    return res;\r\n}\r\nvar xAxisDatas = function(data, name, type){\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++){\r\n        if(data[i].stationName === name){\r\n            if (type === \"温度\"){\r\n                for (var j = 0; j < data[i].tempList.length; j++){\r\n                    res.push(data[i].tempList[j].ObservateTime)\r\n                }\r\n            }\r\n            if (type === \"频率\"){\r\n                for (var j = 0; j < data[i].hzList.length; j++){\r\n                    res.push(data[i].hzList[j].ObservateTime)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\nvar seriesData = function(data, name, type){\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++){\r\n        if(data[i].stationName === name){\r\n            if (type === \"温度\"){\r\n                for (var j = 0; j < data[i].tempList.length; j++){\r\n                    res.push(data[i].tempList[j].layerValue)\r\n                }\r\n            }\r\n            if (type === \"频率\"){\r\n                for (var j = 0; j < data[i].hzList.length; j++){\r\n                    res.push(data[i].hzList[j].layerValue)\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\noption = {\r\n    baseOption: {\r\n    \tcolor: colors,\r\n        tooltip: {\r\n            padding: 6,\r\n            formatter: function(params){\r\n                var html = \"\";\r\n                for (var i = 0; i < params.length; i++){\r\n                    html += \"\"+params[i].axisValue+\"<br />\"+params[i].marker+params[i].seriesName+\": \"+params[i].value+unit(params[i].seriesIndex)+\"<br/>\";\r\n                }\r\n                return html;\r\n            }\r\n        },\r\n        timeline: {\r\n        \tleft: '10%',\r\n        \tright: '10%',\r\n            axisType: 'category',\r\n            autoPlay: true,\r\n            playInterval: 2000,\r\n            data: timeLineData(data),\r\n            symbol: \"arrow\",\r\n            lineStyle: {\r\n            \tcolor: colors[0]\r\n            },\r\n            label: {\r\n\t\t\t\tcolor: colors[0]\r\n            },\r\n            itemStyle: {\r\n            \tcolor: colors[0]\r\n            },\r\n            checkpointStyle: {\r\n            \tsymbol: \"roundRect\",\r\n            \tcolor: colors[1]\r\n            },\r\n            controlStyle :{\r\n            \tcolor: colors[0],\r\n            \tborderColor: colors[0]\r\n            }\r\n        },\r\n        legend: {\r\n        \tright: 10,\r\n        \ttop: 15\r\n        }\r\n    },\r\n    options: optionsData(data)\r\n};\r\nfunction unit(str){\r\n\treturn str === 0 ? \"℃\" : \"Hz\"\r\n}","html":"","externalScripts":"","updaterUID":"bd-127895190","theme":"","layout":"","viewCount":892,"userName":"C***N","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xuH3pJnAsm.png?v=1543416652646","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","timeline","title","tooltip"],"customTags":[],"updaterUserName":"C***N"}}