{"status":0,"data":{"cid":"xpV_PCakH_","authorUid":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","authorUserName":"Y***1","title":"双向柱状图及排名","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-21T07:55:57.000Z","lastUpdateTime":"2020-09-21T07:55:57.000Z","auth":2,"uid":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-05T08:50:00.000Z","code":"  let overWeight=[ {\"code\":\"111\",\"stock\":\"frv\",\"overWeightNum\":\"41.8308\"},\r\n    {\"code\":\"222\",\"stock\":\"工rgre银\",\"overWeightNum\":\"35.7686\"},\r\n    {\"code\":\"333\",\"stock\":\"股割让给份\",\"overWeightNum\":\"30.6345\"},\r\n    {\"code\":\"444\",\"stock\":\"精热个人的密\",\"overWeightNum\":\"29.7876\"},\r\n    {\"code\":\"555\",\"stock\":\"东割让给方\",\"overWeightNum\":\"24.207\"},\r\n    {\"code\":\"666\",\"stock\":\"过热如果富\",\"overWeightNum\":\"24.695\"},\r\n    {\"code\":\"777\",\"stock\":\"thrt能\",\"overWeightNum\":\"21.1411\"},\r\n    {\"code\":\"888\",\"stock\":\"传媒\",\"overWeightNum\":\"16.531\"},\r\n    {\"code\":\"999\",\"stock\":\"股份\",\"overWeightNum\":\"15.9554\"},\r\n    {\"code\":\"112\",\"stock\":\"风格的\",\"overWeightNum\":\"15.8416\"}]\r\n  let underWeight=[{\"code\":\"211\",\"stock\":\"石膏板\",\"underweightNum\":\"58.6204\"},\r\n    {\"code\":\"222\",\"stock\":\"Erebus\",\"underweightNum\":\"36.0593\"},\r\n    {\"code\":\"233\",\"stock\":\"二哥\",\"underweightNum\":\"30.3707\"},\r\n    {\"code\":\"244\",\"stock\":\"我让我爸\",\"underweightNum\":\"28.8139\"},\r\n    {\"code\":\"255\",\"stock\":\"uol\",\"underweightNum\":\"26.8439\"},\r\n    {\"code\":\"266\",\"stock\":\"违法\",\"underweightNum\":\"26\"},\r\n    {\"code\":\"277\",\"stock\":\"访问\",\"underweightNum\":\"25.7525\"},\r\n    {\"code\":\"288\",\"stock\":\"为给我吧\",\"underweightNum\":\"25.4942\"},\r\n    {\"code\":\"299\",\"stock\":\"二哥冯如杯\",\"underweightNum\":\"24.5708\"},\r\n    {\"code\":\"300\",\"stock\":\"热个人\",\"underweightNum\":\"24.8275\"}]\r\n    \r\n  let overData = [];\r\n      let underData = [];\r\n      overWeight.forEach((it, index) => {\r\n        overData[index] = {};\r\n        overData[index].value = parseFloat(it.overWeightNum).toFixed(2);\r\n        overData[index].label = [it.code, it.stock].join(\" \");\r\n      });\r\n      underWeight.forEach((it, index) => {\r\n        underData[index] = {};\r\n        underData[index].value = parseFloat(it.underweightNum).toFixed(2);\r\n        underData[index].label = [it.code, it.stock].join(\" \");\r\n      });\r\n      let data = {\r\n        etc: {\r\n          name: \"增张\",\r\n          data: overData\r\n        },\r\n        notEtc: {\r\n          name: \"减少\",\r\n          data: underData\r\n        }\r\n      };\r\n      function contains(arr, dst) {\r\n        var i = arr.length;\r\n        while ((i -= 1)) {\r\n          if (arr[i] == dst) {\r\n            return i;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n      let legendData = [data.etc.name, data.notEtc.name];\r\n      let yAxisDataN = data.etc.data.map(e => e.label);\r\n      let yAxisDataV = data.notEtc.data.map(e => e.label);\r\n      let yAxisLabelN = data.etc.data.map(e => e.value).sort((a, b) => a - b);\r\n     // console.log(data.etc.name);\r\n      let yAxisLabelV = data.notEtc.data\r\n        .map(e => e.value)\r\n        .sort((a, b) => a - b);\r\n      let rankData = data.etc.data.map((item, index) => index);\r\n\r\n      let top = 60;\r\n      let bottom = 10;\r\n      var labelSetting = {\r\n        label: \"16\",\r\n        yLabel: \"16\"\r\n      };\r\n      var attackSourcesColor = [\r\n        \"#EB3B5A\",\r\n        \"#FA8231\",\r\n        \"#F7B731\",\r\n        \"#2D5CAF\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#56D0E3\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#F57474\"\r\n      ];\r\n      var option = {\r\n        title: {\r\n          text: \"\",\r\n          x: \"center\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 22\r\n          }\r\n        },\r\n        backgroundColor: \"#000\",\r\n        // tooltip: {\r\n        //   show: true,\r\n        //   trigger: \"axis\",\r\n        //   axisPointer: {\r\n        //     type: \"shadow\"\r\n        //   }\r\n        // },\r\n        legend: {\r\n          left: \"center\",\r\n          itemGap: 100,\r\n          top: 10,\r\n          itemWidth: 0, //图例标记的图形宽度\r\n          itemHeight: 0, //图例标记的图形高度\r\n          y: \"center\",\r\n          borderRadius: 0,\r\n          inactiveColor: \"#FFF\",\r\n          formatter: name => {\r\n            if (name == data.etc.name) {\r\n              return \"{a|\" + name + \"}\";\r\n            } else {\r\n              return \"{b|\" + name + \"}\";\r\n            }\r\n          },\r\n          textStyle: {\r\n            rich: {\r\n              a: {\r\n                padding: [3, 10, 5, 10],\r\n                align: \"center\",\r\n                fontSize: 10,\r\n                backgroundColor: \"#EB5252\",\r\n                color: \"#fff\"\r\n              },\r\n              b: {\r\n                padding: [4, 10, 5, 10],\r\n                align: \"center\",\r\n                fontSize: 10,\r\n                backgroundColor: \"#4AB57D\",\r\n                color: \"#fff\"\r\n              }\r\n            }\r\n          },\r\n          data: legendData\r\n        },\r\n        grid: [\r\n          {\r\n            right: \"55%\",\r\n            width: \"40%\",\r\n            containLabel: false,\r\n            bottom,\r\n            top\r\n          },\r\n          {\r\n            left: \"51%\",\r\n            width: 0,\r\n            top: top,\r\n            bottom: bottom\r\n          },\r\n          {\r\n            left: \"55%\",\r\n            width: \"40%\",\r\n            containLabel: false,\r\n            bottom,\r\n            top\r\n          }\r\n        ],\r\n        xAxis: [\r\n          {\r\n            type: \"value\",\r\n            inverse: true,\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              show: false\r\n            },\r\n            splitLine: {\r\n              show: false\r\n            }\r\n          },\r\n          {\r\n            gridIndex: 1,\r\n            show: false\r\n          },\r\n          {\r\n            gridIndex: 2,\r\n            type: \"value\",\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              show: false\r\n            },\r\n            splitLine: {\r\n              show: false\r\n            }\r\n          }\r\n        ],\r\n        yAxis: [\r\n          {\r\n            //show: false,';.,\r\n            offset: -10,\r\n            //padding: [-23, -30],\r\n            position: \"right\",\r\n            axisLabel: {\r\n              lineHeight: 56,\r\n              color: \"#fff\",\r\n              fontSize: labelSetting.yLabel,\r\n              fontSize: 10\r\n            },\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            type: \"category\",\r\n            inverse: false,\r\n            axisTick: {\r\n              show: false\r\n            },\r\n\r\n            axisLabel: {\r\n              interval: 0,\r\n              shadowOffsetX: \"-10px\",\r\n              color: [\"#fff\"],\r\n              align: \"right\",\r\n              verticalAlign: \"bottom\",\r\n              lineHeight: 30,\r\n              fontSize: 10,\r\n              formatter: function(value, index) {\r\n                return yAxisDataN[index];\r\n              }\r\n            },\r\n            data: yAxisDataN.reverse()\r\n          },\r\n          {\r\n            gridIndex: 1,\r\n            position: \"\",\r\n            type: \"category\",\r\n            inverse: true,\r\n            axisLabel: {\r\n              show: true,\r\n              margin: 0,\r\n              color: \"#fff\",\r\n              fontSize: 10,\r\n              postion: \"right\",\r\n              rich: {\r\n                nt1: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor[0],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100\r\n                },\r\n                nt2: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor[1],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100\r\n                },\r\n                nt3: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor[2],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100\r\n                },\r\n                nt: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor[3],\r\n                  width: 15,\r\n                  height: 15,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  lineHeight: 3,\r\n                  borderRadius: 100\r\n                }\r\n              },\r\n              formatter: function(value, index) {\r\n                index = contains(yAxisDataV, value) + 1;\r\n                if (index - 1 < 3) {\r\n                  return [\"{nt\" + index + \"|\" + index + \"}\"].join(\"\\n\");\r\n                } else {\r\n                  return [\"{nt|\" + index + \"}\"].join(\"\\n\");\r\n                }\r\n              }\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            axisPointer: {\r\n              label: {\r\n                show: true,\r\n                margin: 30\r\n              }\r\n            },\r\n            data: yAxisDataV\r\n          },\r\n          {\r\n            //show: false,\r\n            offset: -10,\r\n            gridIndex: 2,\r\n            position: \"left\",\r\n            axisLabel: {\r\n              color: `#fff`,\r\n              fontSize: labelSetting.yLabel,\r\n              fontSize: 10\r\n            },\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            //type: \"category\",\r\n            inverse: false,\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              interval: 0,\r\n              //shadowOffsetX: '-10px',\r\n              color: [\"#fff\"],\r\n              align: \"left\",\r\n              verticalAlign: \"bottom\",\r\n              lineHeight: 30,\r\n              fontSize: 10,\r\n              formatter: function(value, index) {\r\n                return yAxisDataV[index];\r\n              }\r\n            },\r\n            data: yAxisDataV.reverse()\r\n          }\r\n        ],\r\n        series: [\r\n          {\r\n            name: legendData[0],\r\n            type: \"bar\",\r\n            barWidth: \"15\",\r\n            barMinHeight: \"50\",\r\n            lineHeight:\"3\",\r\n            label: {\r\n              show: true,\r\n              fontSize: labelSetting.label,\r\n              lineHeight: 56,\r\n              distance: 10,\r\n              color: \"#fff\",\r\n              fontSize: 10,\r\n              width: \"15\",\r\n              align: \"center\",\r\n              lineHeight:\"8\",\r\n              padding:[2,0,0,0]\r\n            },\r\n            itemStyle: {\r\n              color: \"#298bf6\",\r\n              normal: {\r\n                barBorderRadius: 30,\r\n                color: new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n                  { offset: 0, color: \"#FE9C5A\" },\r\n                  { offset: 1, color: \"#EB3B5A\" }\r\n                ])\r\n              }\r\n            },\r\n            data: yAxisLabelN\r\n          },\r\n          {\r\n            type: \"bar\",\r\n            barWidth: \"15\",\r\n            barMinHeight: \"50\",\r\n            label: {\r\n              show: true,\r\n              fontSize: labelSetting.label,\r\n              distance: 10,\r\n              color: \"#fff\",\r\n              fontSize: 10,\r\n              padding:[2,0,0,0]\r\n            },\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            name: legendData[1],\r\n            itemStyle: {\r\n              color: \"#4AB57D\",\r\n              normal: {\r\n                barBorderRadius: 30,\r\n                color: new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n                  { offset: 0, color: \"#4AB57D\" },\r\n                  { offset: 1, color: \"#C7DA5B\" },\r\n                  { offset: 1, color: \"#3A5EC5\" },\r\n                  { offset: 1, color: \"#068749\" },\r\n                ])\r\n              }\r\n            },\r\n            data: yAxisLabelV\r\n          }\r\n        ]\r\n      };","html":"","externalScripts":"","updaterUID":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","theme":"","layout":"","viewCount":414,"userName":"Y***1","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xpV_PCakH_.png?v=1604566200836","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title"],"customTags":[],"updaterUserName":"Y***1"}}