{"status":0,"data":{"cid":"xDZ9wnEAm","authorUid":"bd-2693151454","authorUserName":"素***l","title":"首页-数据展示","description":"","latestVersion":6,"alwaysLatest":1,"createTime":"2019-11-12T14:57:07.000Z","lastUpdateTime":"2019-11-12T14:57:07.000Z","auth":2,"uid":"bd-2693151454","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-26T07:23:53.000Z","code":"//以下为测试数据，实际开发中肯定要从后台获取。\n//x轴月份\nvar months = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];\n//单位数组\nvar dwArr = [23, 27, 28, 30, 34, 36, 39, 41, 45, 46, 56, 60];\n//职工数组\nvar zgArr = [1500, 1700, 1750, 1800, 1850, 1900, 1910, 1941, 1980, 2000, 2100, 2200];\n//金额数组\nvar jeArr = [3500, 3600, 4200, 4800, 5500, 6500, 4900, 3500, 5400, 5500, 6500, 7000];\nvar colors = ['#FD2446', '#248EFD', '#C916F2', '#6669B1']; //自定义一个颜色数组，多系时会按照顺序使用自己定义的颜色数组，若不定义则使用默认的颜色数组\n\n// 指定图表的配置项和数据\nvar option = {\n    color: colors,\n    title: {\n        text: 'ECharts 入门示例'\n    },\n    tooltip: {},\n    legend: {\n        data: ['销量']\n    },\n    xAxis: {\n        data: months\n    },\n    yAxis: {},\n    toolbox: {\n        show: true,\n        orient: 'horizontal',\n        showTitle: true,\n        feature: {\n            magicType: {\n                type: ['line', 'bar']\n            },\n            dataView: {\n                show: true,\n                title: '某地区单位人数金额统计',\n                readOnly: false,\n                optionToContent: function(opt) {\n                    var colName = \"序号\";\n                    var typeName = \"月份\";\n                    var dataview = opt.toolbox[0].feature.dataView; //获取dataview\n                    var table = '<div style=\"position:absolute;top: 5px;left: 0px;right: 0px;line-height: 1.4em;text-align:center;font-size:14px;\">' + dataview.title + '</div>'\n                    table += getTable(opt, colName, typeName);\n                    return table;\n                }\n            },\n            saveAsImage: {\n                type: 'png',\n                show: true,\n                title: '保存为图片',\n            },\n            restore: {\n                show: true\n            }\n        }\n    },\n    series: [{\n            name: '单位数',\n            type: 'bar',\n            barMaxWidth: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top'\n                }\n            },\n            data: dwArr\n        },\n        {\n            name: '职工数',\n            type: 'bar',\n            barMaxWidth: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top'\n                }\n            },\n            data: zgArr\n        },\n        {\n            name: '平均工资',\n            type: 'bar',\n            barMaxWidth: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'top'\n                }\n            },\n            data: jeArr\n        }\n    ]\n};\n\nfunction getTable(opt, colName, typeName) {\n    var axisData = opt.xAxis[0].data; //获取图形的data数组\n    var series = opt.series; //获取series\n    var num = 0; //记录序号\n    var sum = new Array(); //获取合计数组（根据对应的系数生成相应数量的sum）\n    for (var i = 0; i < series.length; i++) {\n        sum[i] = 0;\n    }\n    var table = '<div><table class=\"bordered\"><thead><tr>' +\n        '<th>' + colName + '</th>' +\n        '<th>' + typeName + '</th>';\n    for (var i = 0; i < series.length; i++) {\n        table += '<th>' + series[i].name + '</th>'\n    }\n    table += '</tr></thead><tbody>';\n    for (var i = 0, l = axisData.length; i < l; i++) {\n        num += 1;\n        for (var n = 0; n < series.length; n++) {\n            if (series[n].data[i]) {\n                sum[n] += Number(series[n].data[i]);\n            } else {\n                sum[n] += Number(0);\n            }\n\n        }\n        table += '<tr>' +\n            '<td>' + num + '</td>' +\n            '<td>' + axisData[i] + '</td>';\n        for (var j = 0; j < series.length; j++) {\n            if (series[j].data[i]) {\n                table += '<td>' + series[j].data[i] + '</td>';\n            } else {\n                table += '<td>' + 0 + '</td>';\n            }\n\n        }\n        table += '</tr>';\n    }\n    //最后一行加上合计\n    table += '<tr>' + '<td>' + (num + 1) + '</td>' + '<td>合计</td>';\n    for (var n = 0; n < series.length; n++) {\n        if (String(sum[n]).indexOf(\".\") > -1)\n            table += '<td>' + (Number(sum[n])).toFixed(2) + '</td>';\n        else\n            table += '<td>' + Number(sum[n]) + '</td>';\n    }\n    table += '</tr></tbody></table></div>';\n    return table;\n}","html":"","externalScripts":"","updaterUID":"bd-2693151454","theme":"","layout":"","viewCount":79,"userName":"素***l","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDZ9wnEAm.png?v=1574753033318","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"素***l"}}