{"status":0,"data":{"cid":"xryk_0DRml","authorUid":"bd-238415052","authorUserName":"DemiTung","title":"子分类双x轴","description":"双x轴 + 假数据列","latestVersion":15,"alwaysLatest":1,"createTime":"2016-12-14T07:01:58.000Z","lastUpdateTime":"2016-12-15T02:29:31.000Z","auth":1,"uid":"bd-238415052","publishedVersion":7,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"3.3.2","versionCreateTime":"2016-12-15T02:11:20.000Z","code":"// 2x轴+假数据列\n// 细粒度数据，必须根据主分类排序\nvar dummy = [\n    ['2015冬','1月',Math.random()*10,Math.random()*10],\n    ['2015冬','2月',Math.random()*20,Math.random()*20],\n    ['2016春','3月',Math.random()*50,Math.random()*50],\n    ['2016春','4月',Math.random()*100,Math.random()*100],\n    ['2016春','5月',Math.random()*150,Math.random()*150],\n    ['2016夏','6月',Math.random()*200,Math.random()*200],\n    ['2016夏','7月',Math.random()*250,Math.random()*250],\n    ['2016夏','8月',Math.random()*200,Math.random()*200],\n    ['2016秋','9月',Math.random()*150,Math.random()*150],\n    ['2016秋','10月',Math.random()*100,Math.random()*100],\n    ['2016秋','11月',Math.random()*20,Math.random()*20],\n    ['2016冬','十二月',Math.random()*10,Math.random()*10]\n];\n// 元数据处理，e.g. metadata.init().xxx\nvar metadata = {\n    flag: true,\n    quarter: [],\n    month: [],\n    data1: [],\n    data2: [],\n    data3: [],\n    x_major_offset: dummy[0][1].length,\n    init: function() {\n        // 首次初始化\n        if (metadata.flag) {\n            // 数据遍历\n            for (var i = 0; i < dummy.length; i++) {\n                //debugger;\n                if (i === 0) {\n                    metadata.quarter.push(dummy[i][0]);\n                } else {\n                    // 与子分类列匹配\n                    metadata.quarter.push(dummy[i-1][0] === dummy[i][0] ? '' : dummy[i][0]);\n                }\n                metadata.month.push(dummy[i][1]);\n                metadata.data1.push(dummy[i][2]);\n                metadata.data2.push(dummy[i][3]);\n                metadata.data3.push('');\n                // 计算子分类字符长度（按汉字计算，*12号字体）\n                metadata.x_major_offset = metadata.x_major_offset > dummy[i][1].length ? metadata.x_major_offset : dummy[i][1].length;\n            }\n            metadata.flag = false;\n        }\n        return metadata;\n    }\n};\n\noption = {\n    tooltip: {\n        axisPointer: {\n            type: 'shadow'\n        },\n        trigger: 'axis'\n    },\n    grid: {\n        bottom: metadata.init().x_major_offset * 12 + 30\n    },\n    legend: {\n        data:['蒸发量','降水量']\n    },\n    xAxis: [\n        {\n            type: 'category',\n            axisLine: {show: false},\n            axisTick: {show: false},\n            axisLabel: {\n                rotate: 90\n            },\n            splitArea: {show: false},\n            data: metadata.init().month\n        },\n        {\n            type: 'category',\n            position: 'bottom',\n            offset: metadata.init().x_major_offset * 12,\n            axisLine: {show: false},\n            axisTick: {\n                length: metadata.init().x_major_offset * 12 + 20,\n                lineStyle: {color: '#CCC'},\n                interval: function (index, value) {\n                    return value!=='';\n                }\n            },\n            splitArea: {\n                show: true,\n                interval: function (index, value) {\n                    return value!=='';\n                }\n            },\n            data: metadata.init().quarter\n        }\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            name: '水量',\n            min: 0,\n            max: 250,\n            interval: 50,\n            axisLabel: {\n                formatter: '{value} ml'\n            }\n        }\n    ],\n    series: [\n        {\n            name:'蒸发量',\n            type:'bar',\n            z: 1,\n             data: metadata.init().data1\n        },\n        {\n            name:'降水量',\n            type:'bar',\n            z: 1,\n            data: metadata.init().data2\n        },\n        {\n            type:'line',\n            xAxisIndex: 1,\n            z: 0,\n            data: metadata.init().data3\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-238415052","theme":"default","layout":"","viewCount":3157,"userName":"DemiTung","commentCount":5,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryk_0DRml.png?v=1481768972231","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar"],"customTags":[],"updaterUserName":"DemiTung"}}