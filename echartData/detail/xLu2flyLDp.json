{"status":0,"data":{"cid":"xLu2flyLDp","authorUid":"obd-oPTAHaGyJyaR5UpdCyD6vp-SlQZEG9L","authorUserName":"匹***也","title":"调用情况","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-20T02:56:26.000Z","lastUpdateTime":"2020-12-20T02:56:26.000Z","auth":1,"uid":"obd-oPTAHaGyJyaR5UpdCyD6vp-SlQZEG9L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-20T02:56:26.000Z","code":"let obj ={\r\n          successObj : {\r\n               data:[\r\n                       {\r\n                           value: 31\r\n                       }, {\r\n                           value: 36\r\n                       }, {\r\n                           value: 54\r\n                       }, {\r\n                           value: 89\r\n                       }, {\r\n                           value: 73\r\n                       }, {\r\n                           value: 22\r\n                       }\r\n               ],\r\n               title:'调用成功',\r\n               unit:'%',\r\n               series:{\r\n                   color:'#DC735A'\r\n               }\r\n          },\r\n          failObj : {\r\n               data:[\r\n                       {\r\n                           value: 1,\r\n                       }, {\r\n                           value: 111\r\n                       }, {\r\n                           value: 4\r\n                       }, {\r\n                           value: 9\r\n                       }, {\r\n                           value: 3\r\n                       }, {\r\n                           value: 2\r\n                       }\r\n               ],\r\n               title:'调用失败',\r\n               unit:'Byte',\r\n               series:{\r\n                   color:'#07E6AC'\r\n               }\r\n          }\r\n      };\r\n    let dataXaxis = Array.from({ length: 7 }, (_, index) => index)\r\n      .map(number => {\r\n        return new Date(new Date().getTime() - number * 24 * 60 * 60 * 1000)\r\n          .toLocaleDateString()\r\n          .substring(5);\r\n      })\r\n      .reverse();\r\n    let { successObj, failObj, xAxisData = dataXaxis } = obj;\r\n    const objArrays = [successObj, failObj];\r\n\r\n    const titles = objArrays.map(item => {\r\n      let { title, unit } = item;\r\n      return {\r\n        title,\r\n        unit,\r\n      };\r\n    });\r\n    let defaultObj = {\r\n      title: '调用情况',\r\n      xAxisData,\r\n      legend: {\r\n        data: objArrays.map(item => {\r\n          let { title: name, series } = item;\r\n          return {\r\n            name,\r\n            icon: 'roundRect', // legend的icon\r\n          };\r\n        }),\r\n      },\r\n    };\r\n\r\n    const yAxis = objArrays.map(item => {\r\n      let { unit } = item;\r\n      return {\r\n        name: unit,\r\n        nameLocation: 'end',\r\n        nameTextStyle: {\r\n          padding: -8,\r\n        },\r\n        splitLine: {\r\n          show: false,\r\n        },\r\n        axisLine: {\r\n          show: false,\r\n        },\r\n        axisTick: {\r\n          show: false,\r\n        },\r\n        axisLabel: {\r\n          formatter: '{value} ',\r\n        },\r\n      };\r\n    });\r\n\r\n    const series = objArrays.map((item, index) => {\r\n      let { data, series, title } = item;\r\n      let { color } = series;\r\n      let resultObj = {\r\n        name: title,\r\n        type: 'line',\r\n        smooth: true,\r\n        symbol: 'none',\r\n        itemStyle: {\r\n          normal: {\r\n            color,\r\n            lineStyle: {\r\n              color,\r\n              width: 3,\r\n            },\r\n          },\r\n        },\r\n        data,\r\n      };\r\n      if (index === 1) {\r\n        resultObj.yAxisIndex = 1;\r\n      }\r\n      return resultObj;\r\n    });\r\n\r\n     option = {\r\n        backgroundColor:'black',\r\n      textStyle: {\r\n        color: '#4E6873',\r\n      },\r\n      grid: {\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        height: '72%',\r\n        containLabel: true,\r\n      },\r\n      title: {\r\n        text: defaultObj.title,\r\n        textStyle: {\r\n          color: 'white',\r\n          fontSize: 14,\r\n          fontWeight: 'normal',\r\n        },\r\n      },\r\n      tooltip: {\r\n        trigger: 'axis',\r\n        backgroundColor: 'rgba(0,0,0,0.6)',\r\n        formatter: function(params) {\r\n          let str = params[0].name + '</br>';\r\n          params.forEach(item => {\r\n            let current = titles.filter(\r\n              titleItem => titleItem.title === item.seriesName,\r\n            )[0];\r\n            if (current) {\r\n              str +=\r\n                item.marker +\r\n                item.seriesName +\r\n                ' : ' +\r\n                item.data.value +\r\n                current.unit +\r\n                '</br>';\r\n            }\r\n          });\r\n          return str;\r\n        },\r\n      },\r\n      legend: {\r\n        // 修改legend的高度宽度\r\n        left: 100,\r\n        itemHeight: 3,\r\n        itemWidth: 16,\r\n        data: defaultObj.legend.data,\r\n        textStyle: {\r\n          color: '#B4B4B4',\r\n          fontSize: 10,\r\n        },\r\n      },\r\n      xAxis: [\r\n        {\r\n          // type:'category',\r\n          data: defaultObj.xAxisData,\r\n          boundaryGap: true,\r\n          interval: 0,\r\n          rotate: 45,\r\n          axisLine: {\r\n            lineStyle: {\r\n              color: '#B4B4B4',\r\n            },\r\n          },\r\n          axisTick: {\r\n            show: false,\r\n          },\r\n          splitLine: {\r\n            lineStyle: {\r\n              color: 'white',\r\n            },\r\n          },\r\n          splitArea: {\r\n            show: true,\r\n            areaStyle: {\r\n              color: ['#0D1A20', '#132228'],\r\n            },\r\n          },\r\n        },\r\n      ],\r\n      yAxis,\r\n      series,\r\n    };","html":"","externalScripts":"","updaterUID":"obd-oPTAHaGyJyaR5UpdCyD6vp-SlQZEG9L","theme":"","layout":"","viewCount":28,"userName":"匹***也","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xLu2flyLDp.png?v=1608432987085","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","tooltip"],"customTags":[],"updaterUserName":"匹***也"}}