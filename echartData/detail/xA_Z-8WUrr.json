{"status":0,"data":{"cid":"xA_Z-8WUrr","authorUid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","authorUserName":"林***影","title":"多柱状图","description":"多柱状图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-07T02:43:58.000Z","lastUpdateTime":"2021-07-07T02:43:58.000Z","auth":2,"uid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-07T02:43:58.000Z","code":"const payload = {\n    id: 'right-top',\n    wordNum: 0,\n    data: {\n        unit: ['单位：个'],\n        barColor: ['0, 128, 255', '21, 221, 104'],\n        title: ['职数', '实际'],\n        x: ['公司1', '公司2', '公司3'],\n        bar1: ['86', '52', '57'],\n        bar2: ['84', '51', '62'],\n    },\n};\n\nconst wordNum = payload.wordNum;\nconst bar1 = payload.data.bar1 || [];\nconst bar2 = payload.data.bar2 || [];\nconst bar3 = payload.data.bar3 || [];\nconst line1 = payload.data.line1 || [];\nconst line2 = payload.data.line2 || [];\nconst title = payload.data.title;\nconst x = payload.data.x;\nconst unit = payload.data.unit;\n\nconst formatter = (params, wordNum) => {\n    if (!wordNum) return params\n    let newParamsName = ''\n    const paramsNameNumber = params.length\n    const provideNumber = wordNum\n    const rowNumber = Math.ceil(paramsNameNumber / provideNumber)\n    if (paramsNameNumber > provideNumber) {\n        for (let p = 0; p < rowNumber; p++) {\n            let tempStr = ''\n            const start = p * provideNumber\n            const end = start + provideNumber\n            if (p === rowNumber - 1) {\n                tempStr = params.substring(start, paramsNameNumber)\n            } else {\n                tempStr = params.substring(start, end) + '\\n'\n            }\n            newParamsName += tempStr\n        }\n    } else {\n        newParamsName = params\n    }\n    return newParamsName\n}\n\nconst getOpion = (title, x, unit) => {\n    return {\n        // 字体\n        textStyle: {\n            fontSize: 10,\n            color: '#4176a3',\n        },\n        tooltip: {\n            // 触发类型  经过轴触发axis  经过轴触发item\n            trigger: 'axis',\n            backgroundColor: 'rgba(9, 30, 60, 0.6)',\n            extraCssText: 'box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;',\n            borderWidth: 0,\n            confine: false,\n            appendToBody: true,\n            textStyle: {\n                color: '#fff',\n                fontSize: 10,\n            },\n            // 轴触发提示才有效\n            axisPointer: {\n                type: 'shadow',\n            },\n            shadowStyle: {\n                color: 'rgba(157, 168, 245, 0.1)',\n            },\n\n            formatter: (data) => {\n                var tip = '<h5 class=\"echarts-tip-h5\">' + data[0].name + '</h5>';\n                data.forEach((item) => {\n                    tip += '<div class=\"echarts-tip-div\">';\n                    tip += '<div class=\"left\">' + item.marker + item.seriesName + '：</div>';\n                    tip += '<div class=\"right\">' + item.value + (item.seriesType === 'line' ? '%' : '') + '</div>';\n                    tip += '</div>';\n                });\n                if (payload.id === 'center-bottom-3') {\n                    tip += '<div class=\"echarts-tip-div\">';\n                    tip +=\n                        '<div class=\"left\"><span class=\"echarts-span\" style=\"background:transparent;\"></span>占比：</div>';\n                    tip += '<div class=\"right\">' + ((data[1].value / data[0].value) * 100).toFixed(2) + '%</div>';\n                    tip += '</div>';\n                }\n                return tip;\n            },\n        },\n        grid: {\n            // 距离 上右下左 的距离\n            left: 0,\n            right: 0,\n            bottom: 2,\n            top: 45,\n            // 是否包含文本\n            containLabel: true,\n        },\n        legend: {\n            type: 'scroll',\n            itemWidth: 10,\n            itemHeight: 3,\n            itemGap: 10,\n            left: 'center',\n            top: 10,\n            itemStyle: {\n                color: 'inherit',\n            },\n            textStyle: {\n                color: 'inherit',\n            },\n            data: title.filter((item) => !!item).map((item) => ({ name: item })),\n        },\n        xAxis: {\n            type: 'category',\n            data: x,\n            axisLine: {\n                lineStyle: {\n                    type: 'solid',\n                    color: '#4176a3',\n                    width: '0.5', //坐标线的宽度\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n            //坐标轴斜着显示\n            axisLabel: {\n                interval: 0,\n                rotate: 0,\n                color: '#96cbfa',\n                fontSize: 12,\n                formatter(params) {\n                    return formatter(params, wordNum);\n                },\n            },\n        },\n        yAxis: [\n            {\n                name: unit[0],\n                nameGap: 10,\n                nameTextStyle: {\n                    align: 'left',\n                    fontSize: 11,\n                    color: '#4176a3',\n                },\n                minInterval: 1,\n                type: 'value',\n                axisLine: {\n                    lineStyle: {\n                        type: 'solid',\n                        color: '#4176a3', //左边线的颜色\n                        width: '1', //坐标线的宽度\n                    },\n                    color: '#4176a3',\n                    minInterval: 1,\n                },\n                axisLabel: {\n                    fontSize: 14,\n                },\n                //   刻度\n                axisTick: {\n                    show: false,\n                },\n                //   y轴线\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: 'rgba(65, 118, 163, 0.3)',\n                        width: 1,\n                        type: 'solid',\n                    },\n                },\n            },\n            {\n                name: unit[1],\n                nameGap: 10,\n                axisLabel: {\n                    formatter: '{value} %',\n                    fontSize: 14,\n                },\n                nameTextStyle: {\n                    align: 'right',\n                    fontSize: 11,\n                    color: '#4176a3',\n                },\n                minInterval: 1,\n                type: 'value',\n                axisLine: {\n                    lineStyle: {\n                        type: 'solid',\n                        color: '#4176a3', //左边线的颜色\n                        width: '1', //坐标线的宽度\n                    },\n                    color: '#4176a3',\n                    minInterval: 1,\n                },\n                //   刻度\n                axisTick: {\n                    show: false,\n                },\n                //   y轴线\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: 'rgba(65, 118, 163, 0.3)',\n                        width: 1,\n                        type: 'solid',\n                    },\n                },\n            },\n        ],\n        series: [],\n    };\n};\n\nconst getBar = (name, color, data) => {\n    return {\n        yAxisIndex: 0,\n        name,\n        showBackground: false,\n        barMaxWidth: 8,\n        data,\n        type: 'bar',\n        itemStyle: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                {\n                    offset: 0,\n                    color: 'rgba(' + color + ', 0.97)',\n                },\n                {\n                    offset: 1,\n                    color: 'rgba(' + color + ', 0.19)',\n                },\n            ]),\n            borderRadius: [4, 4, 0, 0],\n        },\n        label: {\n            show: !!payload.data.showLabel,\n            position: 'top',\n            color: '#fff',\n            fontSize: 10,\n        },\n    };\n};\n\nconst getLine = (name, color, data) => {\n    return {\n        yAxisIndex: 1,\n        name,\n        data,\n        type: 'line',\n        smooth: false,\n        itemStyle: {\n            color,\n        },\n    };\n};\n\noption = getOpion(title, x, unit);\nif (bar1.length > 0) {\n    option.series.push(getBar(payload.data.title[0], payload.data.barColor[0], bar1));\n}\nif (bar2.length > 0) {\n    option.series.push(getBar(payload.data.title[1], payload.data.barColor[1], bar2));\n}\nif (bar3.length > 0) {\n    option.series.push(getBar(payload.data.title[2], payload.data.barColor[2], bar3));\n}\nif (line1.length > 0) {\n    option.series.push(getLine(payload.data.title[2], payload.data.lineColor[0], line1));\n}\nif (line2.length > 0) {\n    option.series.push(getLine(payload.data.title[3], payload.data.lineColor[1], line2));\n}\n","html":"","externalScripts":"","updaterUID":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","theme":"","layout":"","viewCount":0,"userName":"林***影","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xA_Z-8WUrr.png?v=1625625838513","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"林***影"}}