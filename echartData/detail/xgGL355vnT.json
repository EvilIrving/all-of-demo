{"status":0,"data":{"cid":"xgGL355vnT","authorUid":"bd-1895925720","authorUserName":"心***阔","title":"自动循环数据","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-01-11T12:54:44.000Z","lastUpdateTime":"2019-01-11T12:54:44.000Z","auth":1,"uid":"bd-1895925720","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-11T12:54:44.000Z","code":"//X轴要显示的条目数\r\nvar count=3;\r\n//每个时间间隔的偏移数\r\nvar Tcount=count;\r\n//总记录数\r\nvar total=5;\r\nvar xAxisData=[2011,2012,2013,2014,2015];\r\nvar fdata=[20,35,12,29,46]\r\n// 颜色\r\nvar lightBlue = {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n        offset: 0,\r\n        color: 'rgba(0, 192, 255, 1)' // 0% 处的颜色\r\n    }, {\r\n        offset: 1,\r\n        color: 'rgba(0, 192, 255, 0.1)' // 100% 处的颜色\r\n    }],\r\n    globalCoord: false // 缺省为 false\r\n}\r\nvar darkBlue = {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n        offset: 0,\r\n        color: 'rgba(41, 121, 255, 1)' // 0% 处的颜色\r\n    }, {\r\n        offset: 1,\r\n        color: 'rgba(41, 121, 255, 0.1)' // 100% 处的颜色\r\n    }],\r\n    globalCoord: false // 缺省为 false\r\n}\r\n\r\nfunction randomData(v) {\r\n    return {\r\n        value: fdata[v]\r\n    }\r\n}\r\n\r\nfunction timeSet(f) {\r\n    return xAxisData[f];\r\n}\r\n\r\nvar data = [];\r\nvar timeData = [];\r\n\r\nfor (var i = 0; i < count; i++) {\r\n    timeData.unshift(timeSet(i));\r\n    data.unshift(randomData(i));\r\n}\r\n// 指定图表的配置项和数据\r\nvar option = {\r\n    tooltip: {\r\n        show: false\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        // boundaryGap: 100,\r\n        min: -1,\r\n        max: 9,\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#4bbbf8',\r\n                shadowColor: 'rgba(75, 211, 255, 0.5)',\r\n                shadowBlur: 5\r\n            }\r\n        },\r\n        axisTick: {\r\n            interval: (index) => {\r\n                if (index === -1 || index === 9) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        },\r\n        axisLabel: {\r\n            color: '#fff',\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        data: timeData,\r\n\r\n    },\r\n    yAxis: [{\r\n        max: 50,\r\n        min: 0,\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#4bbbf8',\r\n                shadowColor: 'rgba(75, 211, 255, 0.5)',\r\n                shadowBlur: 5\r\n            }\r\n        },\r\n        axisLabel: {\r\n            color: '#fff',\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: 'rgba(75, 211, 255, 0.2)',\r\n                type: 'dashed'\r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n        name: '数量',\r\n        type: 'pictorialBar',\r\n        barCategoryGap: '-60%',\r\n        symbol: 'path://d=\"M150 0 L75 200 L225 200 Z\"',\r\n        label: {\r\n            show: true,\r\n            position: 'top',\r\n            color: '#1798ff',\r\n            fontSize: 14\r\n        },\r\n        itemStyle: {\r\n\r\n            color: function(params) {\r\n                return params.dataIndex % 2 ? darkBlue : lightBlue;\r\n            }\r\n        },\r\n        data: data\r\n    }],\r\n    backgroundColor: \"#190c12\",\r\n};\r\n\r\nmyChart.setOption(option);\r\nvar key = 0;\r\nsetInterval(function() {\r\n    if(Tcount>=total){\r\n        Tcount=Tcount%count;\r\n    }\r\n    timeData.shift();\r\n    timeData.push(timeSet(Tcount));\r\n\r\n    data.shift();\r\n    data.push(randomData(Tcount));\r\n\r\n    // 颜色控制\r\n    key = (key === 1) ? 0 : 1;\r\n\r\n    myChart.setOption({\r\n        xAxis: {\r\n            data: timeData\r\n        },\r\n        series: [{\r\n            itemStyle: {\r\n                normal: {\r\n                    color: function(params) {\r\n                        return (params.dataIndex + key) % 2 ? darkBlue : lightBlue;\r\n                    }\r\n                }\r\n            },\r\n            data: data\r\n        }]\r\n    });\r\n    Tcount++;\r\n}, 5000);","html":"","externalScripts":"","updaterUID":"bd-1895925720","theme":"","layout":"","viewCount":143,"userName":"心***阔","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgGL355vnT.png?v=1547211284638","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"心***阔"}}