{"status":0,"data":{"cid":"x0x_x4dTOk","authorUid":"obd-oj2MDBltqbkVUF8TkG4kyehpwjXRfDZ","authorUserName":"181******59","title":"地图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-19T05:16:39.000Z","lastUpdateTime":"2020-09-19T05:16:39.000Z","auth":2,"uid":"obd-oj2MDBltqbkVUF8TkG4kyehpwjXRfDZ","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-19T05:16:39.000Z","code":"/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\n// fork form https://gallery.echartsjs.com/editor.html?c=x_kEnG-Ggq&v=2\n\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('china', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '台湾': [121.5135, 25.0308],\n        '黑龙江': [127.9688, 45.368],\n        '内蒙古': [110.3467, 41.4899],\n        \"吉林\": [125.8154, 44.2584],\n        '北京市': [116.4551, 40.2539],\n        \"辽宁\": [123.1238, 42.1216],\n        \"河北\": [114.4995, 38.1006],\n        \"天津\": [117.4219, 39.4189],\n        \"山西\": [112.3352, 37.9413],\n        \"陕西\": [109.1162, 34.2004],\n        \"甘肃\": [103.5901, 36.3043],\n        \"宁夏\": [106.3586, 38.1775],\n        \"青海\": [101.4038, 36.8207],\n        \"新疆\": [87.9236, 43.5883],\n        \"西藏\": [91.11, 29.97],\n        \"四川\": [103.9526, 30.7617],\n        \"重庆\": [108.384366, 30.439702],\n        \"山东\": [117.1582, 36.8701],\n        \"河南\": [113.4668, 34.6234],\n        \"江苏\": [118.8062, 31.9208],\n        \"安徽\": [117.29, 32.0581],\n        \"湖北\": [114.3896, 30.6628],\n        \"浙江\": [119.5313, 29.8773],\n        \"福建\": [119.4543, 25.9222],\n        \"江西\": [116.0046, 28.6633],\n        \"湖南\": [113.0823, 28.2568],\n        \"贵州\": [106.6992, 26.7682],\n        \"云南\": [102.9199, 25.4663],\n        \"广东\": [113.12244, 23.009505],\n        \"广西\": [108.479, 23.1152],\n        \"海南\": [110.3893, 19.8516],\n        '上海': [121.4648, 31.2891],\n\n    };\n    var data = [{\n            name: \"北京\",\n            value: 199\n        },\n        {\n            name: \"天津\",\n            value: 42\n        },\n        {\n            name: \"河北\",\n            value: 102\n        },\n        {\n            name: \"山西\",\n            value: 81\n        },\n        {\n            name: \"内蒙古\",\n            value: 47\n        },\n        {\n            name: \"辽宁\",\n            value: 67\n        },\n        {\n            name: \"吉林\",\n            value: 82\n        },\n        {\n            name: \"黑龙江\",\n            value: 123\n        },\n        {\n            name: \"上海\",\n            value: 24\n        },\n        {\n            name: \"江苏\",\n            value: 92\n        },\n        {\n            name: \"浙江\",\n            value: 114\n        },\n        {\n            name: \"安徽\",\n            value: 109\n        },\n        {\n            name: \"福建\",\n            value: 116\n        },\n        {\n            name: \"江西\",\n            value: 91\n        },\n        {\n            name: \"山东\",\n            value: 119\n        },\n        {\n            name: \"河南\",\n            value: 137\n        },\n        {\n            name: \"湖北\",\n            value: 116\n        },\n        {\n            name: \"湖南\",\n            value: 114\n        },\n        {\n            name: \"重庆\",\n            value: 91\n        },\n        {\n            name: \"四川\",\n            value: 125\n        },\n        {\n            name: \"贵州\",\n            value: 62\n        },\n        {\n            name: \"云南\",\n            value: 83\n        },\n        {\n            name: \"西藏\",\n            value: 9\n        },\n        {\n            name: \"陕西\",\n            value: 80\n        },\n        {\n            name: \"甘肃\",\n            value: 56\n        },\n        {\n            name: \"青海\",\n            value: 10\n        },\n        {\n            name: \"宁夏\",\n            value: 18\n        },\n        {\n            name: \"新疆\",\n            value: 180\n        },\n        {\n            name: \"广东\",\n            value: 123\n        },\n        {\n            name: \"广西\",\n            value: 59\n        },\n        {\n            name: \"海南\",\n            value: 14\n        },\n    ];\n    var max = 480,\n        min = 9; // todo \n    var maxSize4Pin = 100,\n        minSize4Pin = 20;\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value)\n                });\n            }\n        }\n        return res;\n    };\n\n\n\n    option = {\n        backgroundColor: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 1,\n            y2: 1,\n            colorStops: [{\n                offset: 0,\n                color: '#0f378f' // 0% 处的颜色\n            }, {\n                offset: 1,\n                color: '#00091a' // 100% 处的颜色\n            }],\n            globalCoord: false // 缺省为 false\n        },\n        title: {\n            top: 20,\n            text: '“会员活跃度” - 山东省',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },\n\n        tooltip: {\n            trigger: 'item',\n            formatter: function(params) {\n                if (typeof(params.value)[2] == \"undefined\") {\n                    return params.name + ' : ' + params.value;\n                } else {\n                    return params.name + ' : ' + params.value[2];\n                }\n            }\n        },\n        /*   legend: {\n               orient: 'vertical',\n               y: 'bottom',\n               x: 'right',\n                data:['pm2.5'],\n               textStyle: {\n                   color: '#fff'\n               }\n           },*/\n        // legend: {\n        //     orient: 'vertical',\n        //     y: 'bottom',\n        //     x: 'right',\n        //     data: ['pm2.5'],\n        //     textStyle: {\n        //         color: '#fff'\n        //     }\n        // },\n        // visualMap: {\n        //     show: false,\n        //     min: 0,\n        //     max: 500,\n        //     left: 'left',\n        //     top: 'bottom',\n        //     text: ['高', '低'], // 文本，默认为数值文本\n        //     calculable: true,\n        //     seriesIndex: [1],\n        //     inRange: {\n\n        //     }\n        // },\n        geo: {\n            map: 'china',\n            show: true,\n            roam: true,\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            itemStyle: {\n                normal: {\n                    areaColor: '#3a7fd5',\n                    borderColor: '#0a53e9', //线\n                    shadowColor: '#092f8f', //外发光\n                    shadowBlur: 20\n                },\n                emphasis: {\n                    areaColor: '#0a2dae', //悬浮区背景\n                }\n            }\n        },\n        series: [\n     \n\n        ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"http://api.map.baidu.com/api?v=3.0&ak=VEb1l2XdRBBcOG6TWIY1a9WFioIz7BsM,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"obd-oj2MDBltqbkVUF8TkG4kyehpwjXRfDZ","theme":"","layout":"","viewCount":63,"userName":"181******59","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0x_x4dTOk.png?v=1600492599953","isCustomThumbnail":0,"builtinTags":["category-work","geo","title","tooltip"],"customTags":[],"updaterUserName":"181******59"}}