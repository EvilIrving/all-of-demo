{"status":0,"data":{"cid":"xHyltAmTOG","authorUid":"bd-1882523961","authorUserName":"辉辉FSH","title":"shanghai","description":"保存上海地图json","latestVersion":1,"alwaysLatest":1,"createTime":"2018-03-07T09:18:47.000Z","lastUpdateTime":"2018-03-07T09:18:47.000Z","auth":2,"uid":"bd-1882523961","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.0.4","versionCreateTime":"2018-03-07T09:18:47.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1520413844487-rknqhXp_f.json\";\n\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('shanghai', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '浦东新区': [121.7795171, 31.13357039],\n        '宝山区': [121.4402384, 31.3583161],\n        '金山区': [121.3070063, 30.73722838],\n    }\n    var data = [{\n            name: '崇明县',\n            value: 393\n        },\n        {\n            name: '宝山区',\n            value: 30\n        },\n        {\n            name: '嘉定区',\n            value: 1790\n        },\n        {\n            name: '青浦区',\n            value: 757\n        },\n        {\n            name: '杨浦区',\n            value: 714\n        },\n        {\n            name: '虹口区',\n            value: 2261\n        },\n        {\n            name: '闸北区',\n            value: 359\n        },\n        {\n            name: '普陀区',\n            value: 1139\n        },\n        {\n            name: '静安区',\n            value: 127\n        },\n        {\n            name: '黄浦区',\n            value: 393\n        },\n        {\n            name: '卢湾区',\n            value: 0\n        },\n        {\n            name: '长宁区',\n            value: 259\n        },\n        {\n            name: '徐汇区',\n            value: 270\n        },\n        {\n            name: '浦东新区',\n            value: 31\n        },\n        {\n            name: '松江区',\n            value: 860\n        },\n        {\n            name: '闵行区',\n            value: 1545\n        },\n        {\n            name: '金山区',\n            value: 21\n        },\n        {\n            name: '奉贤区',\n            value: 1573\n        },\n        {\n            name: '南汇区',\n            value: 0\n        }\n    ];\n    var max = 4800,\n        min = 9; // todo \n    var maxSize4Pin = 100,\n        minSize4Pin = 20;\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value)\n                });\n            }\n        }\n        return res;\n    };\n\n\n    option = {\n        title: {\n            text: 'shanghai',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: function(params) {\n                if (typeof(params.value)[2] == \"undefined\") {\n                    return params.name + ' : ' + params.value;\n                } else {\n                    return params.name + ' : ' + params.value[2];\n                }\n            }\n        },\n        legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n            data: ['credit_pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },\n        visualMap: {\n            show: false,\n            min: 0,\n            max: 5000,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'],\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n                color: ['#0f0c29', '#302b63', '#24243e']\n            }\n        },\n        geo: {\n            show: true,\n            map: 'shanghai',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#3B5077',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7',\n                }\n            }\n        },\n        series: [{\n                name: 'credit_pm2.5',\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                data: convertData(data),\n                symbolSize: function(val) {\n                    return val[2] / 10;\n                },\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#05C3F9'\n                    }\n                }\n            },\n            {\n                type: 'map',\n                map: 'shanghai',\n                geoIndex: 0,\n                aspectScale: 0.75,\n                showLegendSymbol: false,\n                label: {\n                    normal: {\n                        show: false\n                    },\n                    emphasis: {\n                        show: false,\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                roam: true,\n                itemStyle: {\n                    normal: {\n                        areaColor: '#031525',\n                        borderColor: '#3B5077',\n                    },\n                    emphasis: {\n                        areaColor: '#2B91B7'\n                    }\n                },\n                animation: false,\n                data: data\n            },\n            {\n                name: '点',\n                type: 'scatter',\n                coordinateSystem: 'geo',\n                symbol: 'pin',\n                symbolSize: function(val) {\n                    var a = (maxSize4Pin - minSize4Pin) / (max - min);\n                    var b = minSize4Pin - a * min;\n                    b = maxSize4Pin - a * max;\n                    return a * val[2] + b;\n                },\n                label: {\n                    normal: {\n                        show: true,\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 9,\n                        }\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#F62157',\n                    }\n                },\n                zlevel: 6,\n                data: convertData(data),\n            },\n            {\n                name: 'Top 5',\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(data.sort(function(a, b) {\n                    return b.value - a.value;\n                }).slice(0, 5)),\n                symbolSize: function(val) {\n                    return val[2] / 10;\n                },\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                hoverAnimation: true,\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#05C3F9',\n                        shadowBlur: 10,\n                        shadowColor: '#05C3F9'\n                    }\n                },\n                zlevel: 1\n            },\n\n        ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"bd-1882523961","theme":"","layout":"","viewCount":2949,"userName":"辉辉FSH","commentCount":1,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyltAmTOG.png?v=1520414327798","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"辉辉FSH"}}