{"status":0,"data":{"cid":"xTp5yTXq9M","authorUid":"obd-oDlaB3TrUxD46laRMtVvYRH5ISwtX1W","authorUserName":"北***t","title":"立体柱状图","description":"数据可视化","latestVersion":1,"alwaysLatest":0,"createTime":"2021-05-28T06:47:52.000Z","lastUpdateTime":"2021-05-28T06:47:52.000Z","auth":2,"uid":"obd-oDlaB3TrUxD46laRMtVvYRH5ISwtX1W","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-05-28T06:47:52.000Z","code":"   var bottom1 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAeCAYAAABqpJ3BAAAD+0lEQVRYhc2YQY8VRRDHfz0zu+5DFjVoAgFBwiZrVi+eJHBhIcYziYGEg0e4EPwGnvATeCImJh69ePHg0XDYGCKJF2Q1bEB2FwjJCsRldx/73rzm0N3PevW65828hYR/Munpqurqqurq7poxc0s2AwxgcQjvkobgGaDnWwktK8dofSndQU/m21HjTCGMMmJgUJQrJeZ2l4MduAocA65PGi7O5CxXGJZygltdfgWYK5gXhgfEjNZ6egVQAm8Qj6im0YHvgFO+e3rb8j3wecToUQj6DS5QVTKxMRboFJ7RAyYZ9E6uBuL9UzXJMaDwOjIG00sbMJB+cwWfeXpBZIVIrwLAdhgI0MGtgo7E0CoY+N3CSdG/7g0Pyy/TIOWEjmqM3vP2hMAEWj/6erJtPyDzjuXAhHjPgGyP4SsD14BNA9emDZc8L/eymXgkLRdtruYqlFzh5858q+3q9KMxtzSw594hnY+vC0rgSegUirkFvEU8HyuPM9/qPA201LGZ4lXNsS6FtANtYDduQ0uDJGIbNZajYdLQ1wdET/Dle9CTKX0Z8Nw/SQcAngHvCQOkI6GfJfh6AweZWPTlHSMvU9nPlI5nWnnMgTZuk7QivFFIpcPLwBbOtgHEHAB4Cky/IkPGxdMYMbbk4DzdZPjIk61R/Hy5ZH6xy8Jil4XlknniR2fVk5LdJBJ9SK8AwBrwNuoi+6vLDwAfFnwpyAZgw3LF+v2zYbnC/yXHQD2l5omWLIIXbImiyoHnwH/AXkUPp8VEZIw0JFw8O8Vj1MkzMKG6yDQmgY9Ip9qArtWS4+uWr4Fy2vDNwZyFRqYOwwI38XVPdNIRDgAcBvYnlNfFqIst9W3xCPinSnGdJX6AcyCUGDJn5Xuskkzx9EdRbB+UwP1RxtVxoAM8BD6oIZsyJoZYQCTuI4q2FOrkNsAqLmKycgxHXKGeiQhNjimA4k7JhVtdfrlTcjEiY/2cI1HXgRK4JwwIpXZ4csWTjsnzvC/btpwFWm3LmYjee0D3ZToALiJdhqMcavaJCK9Q9L7jLcNPQLtl+FnJdICVukbVOYUkDgGfxPSoflWpLekxuT9wK1ALTS+aFWAWVyfJUrjqW7jJCbQO/T8ctdDUAQssAicELVdtHaRkF2lYzY5z1a/iKsN3Adu27NuyzJTwfgkHeq70mOpZdgFTAAbaxriCLIO1HB7ksDJluN0yPHIi/EuD3A9ougcC9q9bLm9YzvUsR8ZREJAZ7r5p+HHa8C3u0mwEY+143x/mbx4C+8YaPIzHdnaoaKyFJseoxnngxg7GB9wAvhh38E5WIOAocBxXtX4MHMHtj93ALi+zifueXQPu4irMP4HfgCUAOzuWGbwAtU4rt2uO5/4AAAAASUVORK5CYII=\"\r\n      var imgList = []\r\n        var iconData = []\r\n        let color = [\r\n          ['rgb(0,216,255)', 'rgb(13,114,135)'],\r\n          ['rgb(19,225,227)', 'rgb(15,143,145)'],\r\n          ['rgb(36,149,255)', 'rgb(18,85,153)'],\r\n          ['rgb(74,105,255)', 'rgb(25,47,168)'],\r\n        ]\r\n        // 绘制左侧面\r\n        const CubeLeft = echarts.graphic.extendShape({\r\n          shape: {\r\n            x: 0,\r\n            y: 0\r\n          },\r\n          buildPath: function (ctx, shape) {\r\n            // 会canvas的应该都能看得懂，shape是从custom传入的\r\n            const xAxisPoint = shape.xAxisPoint\r\n            // console.log(shape)\r\n            const c0 = [shape.x + 17, shape.y]\r\n            const c1 = [shape.x - 15, shape.y]\r\n            const c2 = [xAxisPoint[0] - 15, xAxisPoint[1]]\r\n            const c3 = [xAxisPoint[0] + 17, xAxisPoint[1]]\r\n            ctx.moveTo(c0[0], c0[1]).lineTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).closePath()\r\n          }\r\n        })\r\n// 绘制右侧面\r\n        const CubeRight = echarts.graphic.extendShape({\r\n          shape: {\r\n            x: 0,\r\n            y: 0\r\n          },\r\n          buildPath: function (ctx, shape) {\r\n            // console.log(shape)\r\n            const xAxisPoint = shape.xAxisPoint\r\n            // console.log(xAxisPoint)\r\n            const c1 = [shape.x + 17, shape.y]\r\n            const c2 = [xAxisPoint[0] + 17, xAxisPoint[1]]\r\n            const c3 = [xAxisPoint[0] + 25, xAxisPoint[1] - 5]\r\n            const c4 = [shape.x + 25, shape.y - 8]\r\n            ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\r\n          }\r\n        })\r\n// 绘制顶面\r\n        const CubeTop = echarts.graphic.extendShape({\r\n          shape: {\r\n            x: 0,\r\n            y: 0\r\n          },\r\n          buildPath: function (ctx, shape) {\r\n            const c1 = [shape.x + 17, shape.y]\r\n            const c2 = [shape.x + 25, shape.y - 8] //右点\r\n            const c3 = [shape.x - 5, shape.y - 8]\r\n            const c4 = [shape.x - 15, shape.y]\r\n            ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\r\n          }\r\n        })\r\n// 注册三个面图形\r\n        echarts.graphic.registerShape('CubeLeft', CubeLeft)\r\n        echarts.graphic.registerShape('CubeRight', CubeRight)\r\n        echarts.graphic.registerShape('CubeTop', CubeTop)\r\n        const VALUE = [12,21,36,11]\r\n        const xData = ['A','B','C','D']\r\n        VALUE.forEach((item, index) => {\r\n          iconData.push({\r\n            value:item,\r\n            symbol:  \"image://\" + bottom1 ,\r\n          })\r\n        })\r\n        \r\n        var option = {\r\n            backgroundColor:'rgb(8,25,34)',\r\n          tooltip: {\r\n            trigger: 'axis',\r\n            axisPointer: {\r\n              type: 'shadow'\r\n            },\r\n            formatter: function (params, ticket, callback) {\r\n              const item = params[1]\r\n              return item.name + ' : ' + item.value;\r\n            },\r\n            backgroundColor: \"rgba(7,55,63,0.7)\",\r\n            borderColor: \"rgba(7,55,63,0.7)\",\r\n            textStyle: {\r\n              color: '#fff',\r\n              textAlign: 'left',\r\n            },\r\n          },\r\n          grid: {\r\n            left: '0%',\r\n            right: '0%',\r\n            top: '15%',\r\n            bottom: '10%',\r\n            containLabel: true\r\n          },\r\n          xAxis: {\r\n            type: 'category',\r\n            data: xData,\r\n            axisLine: {\r\n              show: false,\r\n              lineStyle: {\r\n                color: 'white'\r\n              }\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n              length: 9,\r\n              alignWithLabel: true,\r\n              lineStyle: {\r\n                color: '#7DFFFD'\r\n              }\r\n            },\r\n            axisLabel: {\r\n              fontSize: 16,\r\n              interval: 0\r\n            }\r\n          },\r\n          yAxis: {\r\n            show: false,\r\n            type: 'value',\r\n            axisLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: 'white'\r\n              }\r\n            },\r\n            splitLine: {\r\n              show: false\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              interval: 0\r\n            },\r\n            boundaryGap: ['20%', '20%']\r\n          },\r\n          series: [{\r\n            type: 'custom',\r\n            renderItem: (params, api) => {\r\n              // console.log(params)\r\n              const location = api.coord([api.value(0), api.value(1)])\r\n              return {\r\n                type: 'group',\r\n                children: [{\r\n                  type: 'CubeLeft',\r\n                  shape: {\r\n                    api,\r\n                    xValue: api.value(0),\r\n                    yValue: api.value(1),\r\n                    x: location[0],\r\n                    y: location[1],\r\n                    xAxisPoint: api.coord([api.value(0), 0])\r\n                  },\r\n                  style: {\r\n                    fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                      offset: 0,\r\n                      // color: 'rgb(0,216,255)'\r\n                      color: color[params.dataIndexInside][0]\r\n                    },\r\n                      {\r\n                        offset: 1,\r\n                        // color: 'rgb(0,216,255)'\r\n                        color: color[params.dataIndexInside][0]\r\n                      }\r\n                    ])\r\n                  }\r\n                }, {\r\n                  type: 'CubeRight',\r\n                  shape: {\r\n                    api,\r\n                    xValue: api.value(0),\r\n                    yValue: api.value(1),\r\n                    x: location[0],\r\n                    y: location[1],\r\n                    xAxisPoint: api.coord([api.value(0), 0])\r\n                  },\r\n                  style: {\r\n                    fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                      offset: 0,\r\n                      color: color[params.dataIndexInside][1]\r\n                    },\r\n                      {\r\n                        offset: 1,\r\n                        color: color[params.dataIndexInside][1]\r\n                      }\r\n                    ])\r\n                  }\r\n                }, {\r\n                  type: 'CubeTop',\r\n                  shape: {\r\n                    api,\r\n                    xValue: api.value(0),\r\n                    yValue: api.value(1),\r\n                    x: location[0],\r\n                    y: location[1],\r\n                    xAxisPoint: api.coord([api.value(0), 0])\r\n                  },\r\n                  style: {\r\n                    fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                      offset: 0,\r\n                      color: color[params.dataIndexInside][1]\r\n                    },\r\n                      {\r\n                        offset: 1,\r\n                        color: color[params.dataIndexInside][1]\r\n                      }\r\n                    ])\r\n                  }\r\n                }]\r\n              }\r\n            },\r\n            data: VALUE,\r\n         \r\n          },\r\n            {\r\n              type: 'pictorialBar',\r\n              label: {\r\n                normal: {\r\n                  show: true,\r\n                  position: 'top',\r\n                  distance: -50,\r\n                  formatter: (e) => {\r\n                    switch (e.name) {\r\n                      case '县级林长':\r\n                        return VALUE[0]\r\n                      case '乡级林长':\r\n                        return VALUE[1]\r\n                      case '村级林长':\r\n                        return VALUE[2]\r\n                    }\r\n                  },\r\n                  fontSize: 14,\r\n                  color: '#fff',\r\n                  fontWeight:'bold',\r\n                  // offset: [2, -25]\r\n                }\r\n              },\r\n              tooltip: {},\r\n              z: 2,\r\n              symbolPosition: 'end',\r\n              symbolSize:[40,25],\r\n              symbolOffset: [5, '-28'],\r\n              itemStyle: {\r\n                shadowColor: 'rgba(0,0,0,.3)',\r\n                shadowBlur: 10,\r\n                shadowOffsetY: 1,\r\n                shadowOffsetX: 1,\r\n              },\r\n              data:iconData\r\n            }\r\n          ]\r\n        }\r\n        // chart.setOption(option)\r\n        var app = {\r\n          currentIndex: -1,\r\n        };\r\n        setInterval(function () {\r\n          var dataLen = option.series[0].data.length;\r\n\r\n          // 取消之前高亮的图形\r\n          chart.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 0,\r\n            dataIndex: app.currentIndex\r\n          });\r\n          app.currentIndex = (app.currentIndex + 1) % dataLen;\r\n          //console.log(app.currentIndex);\r\n          // 高亮当前图形\r\n          chart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 0,\r\n            dataIndex: app.currentIndex,\r\n          });\r\n          // 显示 tooltip\r\n          chart.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 0,\r\n            dataIndex: app.currentIndex\r\n          });\r\n\r\n\r\n        }, 2000);\r\n        // }\r\n      ","html":"","externalScripts":"","updaterUID":"obd-oDlaB3TrUxD46laRMtVvYRH5ISwtX1W","theme":"","layout":"","viewCount":0,"userName":"北***t","commentCount":0,"starCount":32,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTp5yTXq9M.png?v=1622184472519","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"北***t"}}