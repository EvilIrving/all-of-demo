{"status":0,"data":{"cid":"x-0XNLUrKo","authorUid":"bd-1460395036","authorUserName":"阿***美","title":"广西省销售路线","description":"广西省鲜生销售路线","latestVersion":9,"alwaysLatest":1,"createTime":"2019-02-13T09:42:56.000Z","lastUpdateTime":"2019-02-13T09:42:56.000Z","auth":2,"uid":"bd-1460395036","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.2.1","versionCreateTime":"2019-02-14T04:33:35.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1529643372879-HJrdbb9bQ.json\";\n\n$.getJSON(uploadedDataURL, function(geoJson) {\n    myChart.hideLoading();\n    echarts.registerMap('GX', geoJson); //只需要注册省的json数据，（注册哪里显示哪里）\n\n    var geoCoordMap = {\n        \"柳州市\":[109.411703, 24.314617],\n        \"桂林市\":[110.299121, 25.274215],\n        \"梧州市\":[111.297604, 23.474803],\n        \"崇左市\":[107.353926, 22.404108],\n        '南宁': [108.479,23.1152],\n    };\n    \n    var BJData = [\n        [{name:'南宁'}, {name:'柳州市',value:95}],\n        [{name:'南宁'}, {name:'桂林市',value:90}],\n        [{name:'南宁'}, {name:'梧州市',value:80}],\n        [{name:'南宁'}, {name:'崇左市',value:60}],\n    ];\n    \n    var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\n    var convertData = function (data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var dataItem = data[i];\n            var fromCoord = geoCoordMap[dataItem[0].name];\n            var toCoord = geoCoordMap[dataItem[1].name];\n            if (fromCoord && toCoord) {\n                res.push({\n                    fromName: dataItem[0].name,\n                    toName: dataItem[1].name,\n                    coords: [fromCoord, toCoord]\n                });\n            }\n        }\n        return res;\n    };\n\n    var color = ['#a6c84c', '#ffa022', '#46bee9'];\n    var series = [];\n    [['南宁', BJData]].forEach(function (item, i) {\n        series.push({\n            name: item[0] + ' Top10',\n            type: 'lines',\n            zlevel: 1,\n            effect: {\n                show: true,\n                period: 6,\n                trailLength: 0.7,\n                color: '#fff',\n                symbolSize: 3\n            },\n            lineStyle: {\n                normal: {\n                    color: color[i],\n                    width: 0,\n                    curveness: 0.2\n                }\n            },\n            data: convertData(item[1])\n        },\n        {\n            name: item[0] + ' Top10',\n            type: 'lines',\n            zlevel: 2,\n            symbol: ['none', 'arrow'],\n            symbolSize: 10,\n            effect: {\n                show: true,\n                period: 6,\n                trailLength: 0,\n                symbol: planePath,\n                symbolSize: 15\n            },\n            lineStyle: {\n                normal: {\n                    color: color[i],\n                    width: 1,\n                    opacity: 0.6,\n                    curveness: 0.2\n                }\n            },\n            data: convertData(item[1])\n        },\n        {\n            name: item[0] + ' Top10',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right',\n                    formatter: '{b}'\n                }\n            },\n            symbolSize: function (val) {\n                return val[2] / 8;\n            },\n            itemStyle: {\n                normal: {\n                    color: color[i]\n                }\n            },\n            data: item[1].map(function (dataItem) {\n                return {\n                    name: dataItem[1].name,\n                    value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n                };\n            })\n        });\n    });\n    \n    option = {\n        backgroundColor: '#404a59',\n        title : {\n            text: '广西省',\n            subtext: '鲜生销售路线',\n            left: 'center',\n            textStyle : {\n                color: '#fff'\n            }\n        },\n        tooltip : {\n            trigger: 'item'\n        },\n        legend: {\n            orient: 'vertical',\n            top: 'bottom',\n            left: 'right',\n            data:['广西 Top10'],\n            textStyle: {\n                color: '#fff'\n            },\n            selectedMode: 'single'\n        },\n        geo: {\n            map: 'GX',\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#323c48',\n                    borderColor: '#404a59'\n                },\n                emphasis: {\n                    areaColor: '#2a333d'\n                }\n            }\n        },\n        series: series\n    };  \n\n    myChart.setOption(option);\n})\n\n","html":"","externalScripts":"","updaterUID":"bd-1460395036","theme":"","layout":"","viewCount":1627,"userName":"阿***美","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-0XNLUrKo.png?v=1550118815344","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"阿***美"}}