{"status":0,"data":{"cid":"xytpeIfaxX","authorUid":"bd-1789385225","authorUserName":"大***祖","title":"苏州","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2019-05-20T11:32:25.000Z","lastUpdateTime":"2019-05-20T11:32:25.000Z","auth":2,"uid":"bd-1789385225","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-23T09:31:25.000Z","code":"//var jiangsu = \"/asset/get/s/data-1545717074162-HoS4KynOn.json\";\nvar jiangsu = \"/asset/get/s/data-1557368914117-YDdLgQCLJ.json\";\n// $(function() {\n// var myChart = echarts.init(document.getElementById('echar'));\n$.get(jiangsu, function(tjJson) {\n    echarts.registerMap('jiangsu', tjJson);\n\n\n    var geoCoordMap = {\n       '': [120.61562, 31.349619],\n\n        '吴中区': [120.3971099, 31.232765],\n        '相城区': [120.601043, 31.4802088],\n        '姑苏区': [120.602416, 31.3043684],\n        '工业园区': [120.75347, 31.36770],\n        '高新区': [120.3840637, 31.3723991],\n        '吴江区': [120.605850, 30.9787865],\n        '常熟市': [120.74852, 31.658156],\n        '张家港市': [120.6216430, 31.9195301],\n        '昆山市': [120.958137, 31.381925],\n        '太仓市': [121.184692, 31.5949131],\n    };\n\n    var goData = [{\n            name: '',\n            value: 10\n        },{\n            name: '吴中区',\n            value: 9\n        },{\n            name: '相城区',\n            value: 8\n        },{\n            name: '姑苏区',\n            value: 7\n        },{\n            name: '工业园区',\n            value: 6\n        },{\n            name: '高新区',\n            value: 5\n        },{\n            name: '吴江区',\n            value: 4\n        },{\n            name: '常熟市',\n            value: 3\n        },{\n            name: '张家港市',\n            value: 2\n        },\n        {\n            name: '昆山市',\n            value: 1\n        },\n        {\n            name: '太仓市',\n            value: 1\n        }\n    ];\n    var goTotal=0;//计算总人数\n    goData.forEach(function(item,i){\n        goTotal+=item.value;\n    })\n    //值控制圆点大小\n    var backData = [{\n        name: '常熟市',\n        value: 75\n    }, {\n        name: '昆山市',\n        value: 95\n    }];\n\n    var planePath = 'arrow';\n\n    var convertData = function(name, data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var fromCoord = geoCoordMap[name];\n            var toCoord = geoCoordMap[data[i].name];\n            if (fromCoord && toCoord) {\n                res.push({\n                    //对换即可调整方向\n                    coords: [fromCoord, toCoord]\n                });\n            }\n        }\n        return res;\n    };\n    var series = [];\n    [\n        ['', goData],\n       // ['徐州', backData],\n\n    ].forEach(function(item, i) {\n        series.push({\n            name: item[0],\n            type: 'lines',\n            zlevel: 2,\n            //线特效配置\n            effect: {\n                show: true,\n                period: 6,\n                trailLength: 0.1,\n                symbol: planePath, //标记类型\n                symbolSize: 10\n            },\n            lineStyle: {\n                normal: {\n                    width: 2,\n                    opacity: 0.4,\n                    curveness: 0.2, //弧线角度\n                    color: '#00eaff'\n                }\n            },\n            data: convertData(item[0], item[1])\n        },  {\n\t\t\t\ttype: 'effectScatter',\n\t\t\t\tcoordinateSystem: 'geo',\n\t\t\t\tzlevel: 2,\n\t\t\t\trippleEffect: { //涟漪特效\n\t\t\t\t\tperiod: 4, //动画时间，值越小速度越快\n\t\t\t\t\tbrushType: 'stroke', //波纹绘制方式 stroke, fill\n\t\t\t\t\tscale: 4 //波纹圆环最大限制，值越大波纹越大\n\t\t\t\t},\n\t\t\t\tlabel: {\n\t\t\t\t\tnormal: {\n\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\tposition: 'right', //显示位置\n\t\t\t\t\t\toffset: [10, 110], //偏移设置\n\t\t\t\t\t\tformatter: function(params){//圆环显示文字\n\t\t\t\t\t\t\treturn params.data.name;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfontSize: 13\n\t\t\t\t\t},\n\t\t\t\t\temphasis: {\n\t\t\t\t\t\tshow: true\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsymbol: 'circle',\n\t\t\t\tsymbolSize: function(val) {\n\t\t\t\t\treturn 5; //圆环大小\n\t\t\t\t},\n\t\t\t\titemStyle: {\n\t\t\t\t\tnormal: {\n\t\t\t\t\t\tshow: false,\n\t\t\t\t\t\tcolor: '#00eaff'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t      data: item[1].map(function(dataItem) {\n                console.log(dataItem)\n                return {\n                    name: dataItem.name,\n                    value: geoCoordMap[dataItem.name].concat([dataItem.value])\n                };\n            }),\n\t\t\t},\n        {  //终点\n            name: item[0],\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            label: {\n                normal: {\n                    show: true,\n                    color: '#fff',\n                    position: 'right',\n                    formatter: '{b}'\n                }\n            },\n            symbol: 'circle',\n            //圆点大小\n            symbolSize: function(val) {\n                return 5;\n            },\n            itemStyle: {\n                normal: {\n                    show: true,\n                     color:'#00eaff'\n                }\n            },\n            data: item[1].map(function(dataItem) {\n                console.log(dataItem)\n                return {\n                    name: dataItem.name,\n                    value: geoCoordMap[dataItem.name].concat([dataItem.value])\n                };\n            })\n\n        }, {//起点\n            name: 'item[0]',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right',\n                    formatter: '{b}',\n                    \n                }\n            },\n            symbolSize: function(val) {\n                return 25;\n            },\n           \t\"symbol\": 'path://M512 39.384615l169.353846 295.384615 342.646154 63.015385-240.246154 248.123077L827.076923 984.615385l-315.076923-145.723077L196.923077 984.615385l43.323077-334.769231L0 401.723077l342.646154-63.015385L512 39.384615', \n\t\t\t\t\n\n            itemStyle: {\n                normal: {\n                    show: true,\n                    color:'#DC143C'\n                }\n            },\n            data: [{\n                name: item[0],\n                value: geoCoordMap[item[0]].concat([100])\n            }]\n\n        })\n\n    });\nvar type = {\n            type: 'map',\n            map: 'jiangsu',\n              geoIndex: 0,\n        label: {\n            normal: {\n                show: false\n            },\n            emphasis: {\n                show: false\n            }\n        },\n        data:goData,\n        };\n series.unshift(type);\n    option = {\n        backgroundColor: '#050b29',\n     \n    \n        tooltip: {\n            trigger: 'item',\n            formatter: \"{b}\"\n        },\n       visualMap: {\n                show: false,\n                min: 0,\n\t\t\t\tmax: 10,\n                left: 'left',\n                top: 'bottom',\n                text: ['高', '低'], // 文本，默认为数值文本\n                calculable: true,\n                seriesIndex: [0],\n                textStyle: {\n                    fontSize: '25'\n                },\n                inRange: {\n                //   color: ['#91639b', '#a677a4', '#8a637b', '#a677a4', '#91639b',\n                //     '#7e58c5',\n                //     '#a54aa5', '#EE82EE', '#aa53c5', '#9400D3',\n                //     '#eb3600'\n                // ]\n\t\t\t\t    color: ['#5193ff', '#5193ff', '#5193ff', '#5193ff', '#5193ff',\n                    '#7B68EE',\n                    '#4682B4', '#07e9fd','#7ac6f5',  '#7e58c5',\n                    '#eb3600'\n                ]\n\n\n                }\n            },\n      //地图相关设置\n            geo: {\n        map: 'jiangsu',\n        zoom: 1.2,\n    \n        roam: true,\n           label: {\n            normal: {\n                show: false\n            },\n            emphasis: {\n                show: false\n            }\n        },\n        itemStyle: {\n            normal: {\n                areaColor: '#fbfbfb',\n                borderColor: '#b9b4b7'\n\n            },\n            emphasis: {\n                areaColor: '#05ff09'\n            }\n        }\n    },\n        series: series\n    };\n    myChart.setOption(option);\n})\n// })","html":"","externalScripts":"","updaterUID":"bd-1789385225","theme":"","layout":"","viewCount":1926,"userName":"大***祖","commentCount":1,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xytpeIfaxX.png?v=1558603885335","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-map","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"大***祖"}}