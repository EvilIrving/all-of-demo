{"status":0,"data":{"cid":"xp61Nug2Yog","authorUid":"bd-1879983178","authorUserName":"k***3","title":"北京市道路拥堵情况","description":"百度地图结合echarts图表开发北京道路拥堵情况，通过visualMap进行值分段(注：数据为道路起始点和结束点组成，结合值进行动态渲染)。","latestVersion":2,"alwaysLatest":1,"createTime":"2019-01-15T03:50:52.000Z","lastUpdateTime":"2019-01-15T03:50:52.000Z","auth":2,"uid":"bd-1879983178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-15T03:52:58.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1547524357071-LUlGmtYaM.json\";\n\n\n$.get(uploadedDataURL, function (dataValue) {\n                    var busLines=[];\n                    var data=JSON.parse(dataValue)//字符串转json\n                    for(var i=0;i<data.features.length;i++){\n                        busLinedata=data.features[i];\n                        var obj=new Object();\n                         var prevPt;\n                        var points = [];\n                        var hStep = 300 / (data.features.length - 1);\n                        var obj=new Object();\n                        var startlatlng=[];\n                        var endlatlng=[];\n                        startlatlng.push(busLinedata.attributes.lon_o)//起始经度\n                        startlatlng.push(busLinedata.attributes.lat_o)//起始纬度\n                        endlatlng.push(busLinedata.attributes.lon_d)//结束经度\n                        endlatlng.push(busLinedata.attributes.lat_d)//结束纬度\n                        obj.coords=[startlatlng,endlatlng]\n                        obj.value=busLinedata.attributes.user_cnt;\n                        points.push(startlatlng);\n                        points.push(endlatlng);\n                        \n                        obj.coords=points;\n                        obj.value=busLinedata.attributes.user_cnt;\n                        busLines.push(obj);\n                    }\n            \n                    console.log(busLines);\n    \n\n                    myChart.setOption({\n                        animation: false,\n                        bmap: {\n                            center: [116.26, 39.99],\n                            zoom: 12,\n                            roam: true,\n                            mapStyle: {\n                              'styleJson': [\n                                {\n                                  'featureType': 'water',\n                                  'elementType': 'all',\n                                  'stylers': {\n                                    'color': '#031628'\n                                  }\n                                },\n                                {\n                                  'featureType': 'land',\n                                  'elementType': 'geometry',\n                                  'stylers': {\n                                    'color': '#000102'\n                                  }\n                                },\n                                {\n                                  'featureType': 'highway',\n                                  'elementType': 'all',\n                                  'stylers': {\n                                    'visibility': 'off'\n                                  }\n                                },\n                                {\n                                  'featureType': 'arterial',\n                                  'elementType': 'geometry.fill',\n                                  'stylers': {\n                                    'color': '#000000'\n                                  }\n                                },\n                                {\n                                  'featureType': 'arterial',\n                                  'elementType': 'geometry.stroke',\n                                  'stylers': {\n                                    'color': '#0b3d51'\n                                  }\n                                },\n                                {\n                                  'featureType': 'local',\n                                  'elementType': 'geometry',\n                                  'stylers': {\n                                    'color': '#000000'\n                                  }\n                                },\n                                {\n                                  'featureType': 'railway',\n                                  'elementType': 'geometry.fill',\n                                  'stylers': {\n                                    'color': '#000000'\n                                  }\n                                },\n                                {\n                                  'featureType': 'railway',\n                                  'elementType': 'geometry.stroke',\n                                  'stylers': {\n                                    'color': '#08304b'\n                                  }\n                                },\n                                {\n                                  'featureType': 'subway',\n                                  'elementType': 'geometry',\n                                  'stylers': {\n                                    'lightness': -70\n                                  }\n                                },\n                                {\n                                  'featureType': 'building',\n                                  'elementType': 'geometry.fill',\n                                  'stylers': {\n                                    'color': '#000000'\n                                  }\n                                },\n                                {\n                                  'featureType': 'all',\n                                  'elementType': 'labels.text.fill',\n                                  'stylers': {\n                                    'color': '#857f7f'\n                                  }\n                                },\n                                {\n                                  'featureType': 'all',\n                                  'elementType': 'labels.text.stroke',\n                                  'stylers': {\n                                    'color': '#000000'\n                                  }\n                                },\n                                {\n                                  'featureType': 'building',\n                                  'elementType': 'geometry',\n                                  'stylers': {\n                                    'color': '#022338'\n                                  }\n                                },\n                                {\n                                  'featureType': 'green',\n                                  'elementType': 'geometry',\n                                  'stylers': {\n                                    'color': '#062032'\n                                  }\n                                },\n                                {\n                                  'featureType': 'boundary',\n                                  'elementType': 'all',\n                                  'stylers': {\n                                    'color': '#465b6c'\n                                  }\n                                },\n                                {\n                                  'featureType': 'manmade',\n                                  'elementType': 'all',\n                                  'stylers': {\n                                    'color': '#022338'\n                                  }\n                                },\n                                {\n                                  'featureType': 'label',\n                                  'elementType': 'all',\n                                  'stylers': {\n                                    'visibility': 'off'\n                                  }\n                                }\n                              ]\n                            }\n                        },\n                        visualMap: {\n                            type: \"piecewise\",\n                            left: 'left',\n                            min: 500,\n                            max: 20000,\n                            splitNumber: 5,\n                            textStyle:{\n                                color:'#ffffff',\n                                align:'center'\n                            },\n                            maxOpen: true,\n                            color: ['red', 'yellow', 'green']\n                        },\n                        tooltip: {\n                            formatter: function(params, ticket, callback) {\n                                return \"拥堵指数:\" + params.value;\n                            },\n                            trigger: 'item'\n                        },\n                        series: [{\n                            type: 'lines',\n                            coordinateSystem: 'bmap',\n                            polyline: true,\n                            data: busLines,\n                            silent: true,\n                            lineStyle: {\n                                normal: {\n                                    opacity: 0.2,\n                                    width: 1\n                                }\n                            },\n                            progressiveThreshold: 500,\n                            progressive: 200\n                        }, {\n                            type: 'lines',\n                            coordinateSystem: 'bmap',\n                            polyline: true,\n                            data: busLines,\n                            lineStyle: {\n                                normal: {\n                                    width: 0\n                                }\n                            },\n                            effect: {\n                                constantSpeed: 20,\n                                show: true,\n                                trailLength: 0.1,\n                                symbolSize: 1.5\n                            },\n                            zlevel: 1\n                        }]\n                    });\n                    myChart.hideLoading();\n                });","html":"","externalScripts":"https://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM,https://code.jquery.com/jquery-2.1.1.js,https://cdn.bootcss.com/echarts/4.2.0-rc.2/echarts.min.js,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-1879983178","theme":"","layout":"","viewCount":1383,"userName":"k***3","commentCount":3,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xp61Nug2Yog.png?v=1547524254125","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":["bmap","lines","tooltip","visualMap"],"updaterUserName":"k***3"}}