{"status":0,"data":{"cid":"xSWWwNoUUr","authorUid":"obd-oFHGbCdR3VXBQrvv0dok8R-NYjhMu57","authorUserName":"影***后","title":"江苏省地图数据高亮轮播展示","description":"数据高亮轮播展示","latestVersion":5,"alwaysLatest":0,"createTime":"2021-09-22T05:46:36.000Z","lastUpdateTime":"2021-09-22T06:40:59.000Z","auth":2,"uid":"obd-oFHGbCdR3VXBQrvv0dok8R-NYjhMu57","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-22T06:41:00.000Z","code":"var img = '/asset/get/s/data-1632277841252-aNTf3ao-v.png';\nvar img2 = '/asset/get/s/data-1632277834142-Mf9W_CtZ9.png';\nvar uploadedDataURL = '/asset/get/s/data-1632277940597-6IMJ-f-un.json';\n\nvar dataList = [\n  {\n    name: '南京市',\n    value: 6666\n  },\n  {\n    name: '无锡市',\n    value: 7777\n  },\n  {\n    name: '苏州市',\n    value: 8888\n  },\n  {\n    name: '扬州市',\n    value: 99999\n  },\n]; // 测试数据\nvar dataList2 = [];\nvar gdGeoCoordMap = {\n  南京市: [118.767413, 32.041544],\n  无锡市: [120.301663, 31.574729],\n  徐州市: [117.184811, 34.261792],\n  常州市: [119.946973, 31.772752],\n  苏州市: [120.619585, 31.299379],\n  南通市: [120.864608, 32.016212],\n  连云港市: [119.144784, 34.536075],\n  淮安市: [119.021265, 33.597506],\n  盐城市: [120.139998, 33.377631],\n  扬州市: [119.421003, 32.393159],\n  镇江市: [119.452753, 32.204402],\n  泰州市: [119.915176, 32.484882],\n  宿迁市: [118.275162, 33.963008]\n};\n$.get(uploadedDataURL, function (geoJson) {\n  echarts.registerMap('jiangsu', { geoJSON: geoJson });\n  // var chart = echarts.init(document.querySelector('.map'));\n  // 如果有的城市没有返回数据就补零\n  for (var key in gdGeoCoordMap) {\n    for (var i = 0; i < dataList.length; i++) {\n      if (key === dataList[i].name) {\n        dataList2.push({\n          name: key,\n          value: gdGeoCoordMap[key].concat(dataList[i].value),\n        });\n        break;\n      } else if (i + 1 === dataList.length) {\n        dataList2.push({\n          name: key,\n          value: gdGeoCoordMap[key].concat(0),\n        });\n      }\n    }\n  }\n  var option = {\n    backgroundColor:\"RGBA(4, 10, 36, 1)\",\n    geo: {\n      map: 'jiangsu',\n      roam: true,\n      showLegendSymbol: true,\n      zoom: 1.2,\n      // 地图区域的颜色\n      itemStyle: {\n        areaColor: 'rgba(0,0,0,0)',\n        color: 'blue',\n        borderColor: '#22F7F8',\n        borderWidth: 2,\n        shadowColor: '#22F7F8',\n        shadowBlur: 15,\n        // shadowOffsetX:10,\n        shadowOffsetY: 5,\n      },\n      label: {\n        show: true,\n        color: '#FFFFFF',\n      },\n      // 高亮区域的配置\n      emphasis: {\n        label: {\n          show: true,\n          color: '#ffffff', // 选中文字颜色\n        },\n        itemStyle: {\n          areaColor: '#2B91B7', // 高亮区域颜色\n          // opacity:'0.5'\n        },\n      },\n      selectedMode: true,\n      select: {\n        label: {\n          show: true,\n          color: '#ffffff',\n        },\n        itemStyle: {\n          areaColor: '#2B91B7', // 选中区域颜色\n        },\n      },\n      regions: [\n        {\n          name: '南京市',\n          selected: true,\n        },\n      ],\n    },\n    series: [\n      {\n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        rippleEffect: {\n          scale: 10,\n          brushType: 'stroke',\n        },\n        showEffectOn: 'render',\n        itemStyle: {\n          normal: {\n            color: '#00FFFF',\n          },\n        },\n        label: {\n          normal: {\n            color: '#fff',\n          },\n        },\n        symbol: 'circle',\n        symbolSize: [10, 5],\n        data: [dataList2[0]],\n        zlevel: 1,\n      },\n      {\n        type: 'scatter',\n        coordinateSystem: 'geo',\n        itemStyle: {\n          color: '#00FFF6',\n        },\n        symbol:'image://'+ img2,\n        symbolSize: [24, 33],\n        symbolOffset: [0, -20],\n        data: [dataList2[0]],\n      },\n      {\n        type: 'scatter',\n        coordinateSystem: 'geo',\n        label: {\n          show: true,\n          formatter: function (params) {\n            var value = params.value[2];\n            var text = `{fline|${value}元}`;\n            return text;\n          },\n          rich: {\n            // align:'center',\n            fline: {\n              padding: [15, 15, 15, 15],\n              color: '#FFD426',\n              fontSize: 16,\n              fontWeight: 700,\n            },\n          },\n          emphasis: {\n            show: true,\n          },\n          backgroundColor: {\n            image: img,\n          },\n          // backgroundColor:'red'\n        },\n        itemStyle: {\n          color: '#00FFF6',\n        },\n        // symbol: 'image://../images/home/map.png',\n        symbolSize: [0, 0], // 100 50\n        symbolOffset: [0, -70], //60\n        data: [dataList2[0]],\n      },\n    ],\n  };\n  myChart.setOption(option, true);\n  var j = 1;\n  //   每隔5秒高亮显示一个城市的数据\n  setInterval(() => {\n    option.series.forEach((item) => {\n      item.data = [];\n      item.data.push(dataList2[j]);\n    });\n    option.geo.regions = [];\n    option.geo.regions.push({\n      name: dataList2[j].name,\n      selected: true,\n    });\n    console.log(option.geo);\n    j++;\n    if (j === 13) {\n      j = 0;\n    }\n    myChart.setOption(option, true);\n  }, 5000);\n  // 点击当前城市高亮显示数据\n  myChart.on('click', function (params) {\n    option.geo.regions.push({\n      name: params.name,\n      selected: true,\n    });\n    option.series.forEach((item) => {\n      item.data.forEach((item2, index) => {\n        if (item2.name === params.name) {\n          return false;\n        } else if (index + 1 === item.data.length) {\n          dataList2.forEach((item3) => {\n            if (item3.name === params.name) {\n              item.data.push(item3);\n            }\n          });\n        }\n      });\n    });\n    myChart.setOption(option, true);\n  });\n  window.addEventListener('resize', function () {\n    myChart.resize();\n  });\n});\n","html":"","externalScripts":"","updaterUID":"obd-oFHGbCdR3VXBQrvv0dok8R-NYjhMu57","theme":"default","layout":"","viewCount":0,"userName":"影***后","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSWWwNoUUr.png?v=1632292860213","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-scatter"],"customTags":["map"],"updaterUserName":"影***后"}}