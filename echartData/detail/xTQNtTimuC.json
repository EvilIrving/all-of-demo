{"status":0,"data":{"cid":"xTQNtTimuC","authorUid":"bd-1800740195","authorUserName":"思***法","title":"山东滕州","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-10T05:06:16.000Z","lastUpdateTime":"2020-06-10T05:06:16.000Z","auth":1,"uid":"bd-1800740195","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-10T05:06:16.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1591428766582-F1T8HaJu8.json\";\r\n\r\n\r\n/**\r\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\r\n\r\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\r\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\r\n\r\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\r\n\r\n并且加了pin气泡图标以示数值大小\r\n*/\r\n\r\n\r\n\r\n\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n    echarts.registerMap('tengzhou', geoJson);\r\n    myChart.hideLoading();\r\n    var mapDate = [{\r\n            name: '和家园',\r\n            value: [117.185391, 35.110089]\r\n        },\r\n        {\r\n            name: '翔宇经典',\r\n            value: [117.175861, 35.115679]\r\n        }\r\n\r\n    ];\r\n\r\n\r\n    option = {\r\n        backgroundColor: 'transparent',\r\n        title: {\r\n            top: 0,\r\n            // text: '滕州市-中心城区',\r\n            subtext: '',\r\n            x: 'center',\r\n            textStyle: {\r\n                color: '#ccc'\r\n            }\r\n        },\r\n\r\n        tooltip: {\r\n            showContent: true,\r\n            showDelay: 0,\r\n            hideDelay: 0,\r\n            transitionDuration: 0,\r\n            enterable: true, //鼠标可以进入\r\n            backgroundColor: '#FA8C16', //提示框别景色\r\n            // triggerOn: 'click', //可可点击\r\n            textStyle: {\r\n                color: '#fff',\r\n            },\r\n            // trigger: 'item',\r\n            formatter: function(params) {\r\n\r\n                var name = params.name;\r\n                // if (name != '荆河街道' && name != '北辛街道' && name != '龙泉街道' && name != '善南街道') {\r\n                //     var tipHtml = '<div>' + params.name +\r\n                //         '&nbsp;&nbsp;&nbsp;&nbsp;' +\r\n                //         '<button id=\"mapid\" style=\"background:#fff;color:#000;font-size:12px;\" onclick=\"aa\" >' +\r\n                //         '点击查看</button></div>' +\r\n                //         '<div><div>';\r\n                //     return tipHtml;\r\n                // } else {\r\n                //     return '';\r\n                // }\r\n                return name;\r\n\r\n            }\r\n        },\r\n\r\n        geo: {\r\n            map: 'tengzhou',\r\n            aspectScale: 1, //长宽比\r\n\r\n            // aspectScale: 1, //长宽比\r\n            zoom: 1.1,\r\n            roam: true,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    formatter: '{b}',\r\n                    textStyle: {\r\n                        color: '#FFF',\r\n                        fontSize: 20\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    // areaColor: '#013C62',\r\n                    // shadowColor: '#182f68',\r\n                    // shadowOffsetX: 0,\r\n                    // shadowOffsetY: 25\r\n                    borderColor: '#00FFFF',\r\n                    borderWidth: 2,\r\n                    // areaColor: '#12235c'\r\n                    areaColor: '#00B2ED'\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2AB8FF',\r\n                    borderWidth: 0,\r\n                    color: 'green',\r\n                    label: {\r\n                        show: false\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        series: [\r\n            //     {\r\n            //     type: 'map',\r\n            //     roam: false,\r\n            //     label: {\r\n            //         normal: {\r\n            //             show: true,\r\n            //             formatter: '{b}',\r\n            //             textStyle: {\r\n            //                 color: '#fff'\r\n            //             }\r\n            //         },\r\n            //         emphasis: {\r\n            //             textStyle: {\r\n            //                 color: '#fff'\r\n            //             }\r\n            //         }\r\n            //     },\r\n\r\n            //     itemStyle: {\r\n            //         normal: {\r\n            //             borderColor: '#2ab8ff',\r\n            //             borderWidth: 1.5,\r\n            //             areaColor: '#12235c'\r\n            //         },\r\n            //         emphasis: {\r\n            //             areaColor: '#2AB8FF',\r\n            //             borderWidth: 0,\r\n            //             color: 'green'\r\n            //         }\r\n            //     },\r\n            //     zoom: 1.2,\r\n            //     roam: true,\r\n            //     map: 'tengzhou' //使用\r\n            //     // data: this.difficultData //热力图数据   不同区域 不同的底色\r\n            // },\r\n            {\r\n                name: 'Top 5',\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                data: mapDate,\r\n                symbolSize: function(val) {\r\n                    return 15;\r\n                },\r\n                showEffectOn: 'render',\r\n                rippleEffect: {\r\n                    brushType: 'stroke'\r\n                },\r\n                hoverAnimation: true,\r\n                label: {\r\n                    normal: {\r\n                        formatter: '{b}',\r\n                        position: 'top',\r\n                        show: true\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: '#fff',\r\n                    normal: {\r\n                        color: '#00FFFF',\r\n                        shadowBlur: 20,\r\n                        shadowColor: '#00FFFF'\r\n                    }\r\n                },\r\n                zlevel: 1\r\n            },\r\n        ]\r\n    };\r\n    myChart.setOption(option);\r\n});\r\nmyChart.on('click', function(param) {\r\n    console.log(param);\r\n    var seriesIndex = param.seriesIndex;\r\n    var dataIndex = param.dataIndex;\r\n    option.series[seriesIndex].itemStyle = {\r\n        color: function(params) {\r\n            if (dataIndex === params.dataIndex) {\r\n                return '#FA8C16'\r\n            }else{\r\n                return '#fff'\r\n            }\r\n        }\r\n    }\r\n    myChart.setOption(option)\r\n});","html":"","externalScripts":"","updaterUID":"bd-1800740195","theme":"","layout":"","viewCount":71,"userName":"思***法","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xTQNtTimuC.png?v=1591765576462","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","title","tooltip"],"customTags":[],"updaterUserName":"思***法"}}