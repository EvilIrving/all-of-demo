{"status":0,"data":{"cid":"xqoeVbePt","authorUid":"bd-2584176965","authorUserName":"s***4","title":"北京区划","description":"北京区划及各区数据量","latestVersion":4,"alwaysLatest":1,"createTime":"2020-02-14T09:59:37.000Z","lastUpdateTime":"2020-02-14T09:59:37.000Z","auth":2,"uid":"bd-2584176965","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":2,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-14T10:28:19.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1581672927827-EfifDvNW.json\";\r\n\r\n\r\n// 请求的方式获取\r\n$.get(uploadedDataURL, function(as) {\r\n    // 引入北京地区地图\r\n    echarts.registerMap('北京', as);\r\n    // 每个地区的坐标\r\n    var geoCoordMap = {\r\n        '东城': [116.424697,39.927967],\r\n        '西城': [116.358141,39.913919],\r\n        '朝阳': [116.765487,40.136573],\r\n        '丰台': [116.290679,39.857184],\r\n        '石景山': [116.17672,39.949198],\r\n        '海淀': [116.177807,40.062966],\r\n        '门头沟': [115.905234,40.010063],\r\n        '房山': [115.941902,39.708825],\r\n        '通州': [116.747351,39.814339],\r\n        '顺义': [116.737316,40.137897],\r\n        '昌平': [116.226118,40.225311],\r\n        '大兴': [116.402095,39.655493],\r\n        '怀柔': [116.621138,40.432762],\r\n        '平谷': [117.117604,40.192158],\r\n        '密云': [117.065719,40.500122],\r\n        '延庆': [116.016705,40.507607]\r\n    };\r\n\r\n    // 每个地区的累计疫情数量值\r\n    var data = [{\r\n        name: '东城',\r\n        value: 390,\r\n        alarm_num: 54\r\n    }, {\r\n        name: '西城',\r\n        value: 119\r\n    }, {\r\n        name: '朝阳',\r\n        value: 55,\r\n        alarm_num: 9\r\n    }, {\r\n        name: '丰台',\r\n        value: 329\r\n    }, {\r\n        name: '石景山',\r\n        value: 219,\r\n        alarm_num: 14\r\n    }, {\r\n        name: '海淀',\r\n        value: 290\r\n    }, {\r\n        name: '门头沟',\r\n        value: 319,\r\n        alarm_num: 2\r\n    }, {\r\n        name: '房山',\r\n        value: 199\r\n    }, {\r\n        name: '通州',\r\n        value: 419,\r\n        alarm_num: 11\r\n    }, {\r\n        name: '顺义',\r\n        value: 299\r\n    }, {\r\n        name: '昌平',\r\n        value: 49\r\n    }, {\r\n        name: '大兴',\r\n        value: 219,\r\n        alarm_num: 15\r\n    }, {\r\n        name: '怀柔',\r\n        value: 89\r\n    }, {\r\n        name: '平谷',\r\n        value: 49\r\n    }, {\r\n        name: '密云',\r\n        value: 209,\r\n        alarm_num: 27\r\n    }, {\r\n        name: '延庆',\r\n        value: 129\r\n    }];\r\n\r\n    // 每个地区的新增疫情数量\r\n    var data3 = [{\r\n        name: '通州',\r\n        value: 54\r\n    }, {\r\n        name: '顺义',\r\n        value: 9\r\n    }, {\r\n        name: '平谷',\r\n        value: 14\r\n    }, {\r\n        name: '丰台',\r\n        value: 2\r\n    }, {\r\n        name: '怀柔',\r\n        value: 11\r\n    }]\r\n\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value),\r\n                });\r\n            }\r\n        }\r\n        // 有数据的地区的名称和value值\r\n        return res;\r\n    };\r\n\r\n    // 设定series是一个空的数组\r\n    var series = [];\r\n    [\r\n        ['北京', data]\r\n    ].forEach(function(item, i) {\r\n        series.push({\r\n            name: '定位点',\r\n            type: 'effectScatter', // 散点图\r\n            coordinateSystem: 'geo', // 使用地理坐标系\r\n            hoverAnimation: 'false',\r\n            legendHoverLink: 'false',\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: 'stroke',\r\n                scale: 3\r\n            },\r\n            data: convertData(item[1]),\r\n            symbolSize: function(val) {\r\n                if (val[2] <= 100) {\r\n                    return 4\r\n                }\r\n                if (val[2] > 100 && val[2] <= 200) {\r\n                    return 8\r\n                }\r\n                if (val[2] > 200 && val[2] <= 300) {\r\n                    return 12\r\n                }\r\n                if (val[2] > 300 && val[2] <= 400) {\r\n                    return 16\r\n                }\r\n                if (val[2] > 400 && val[2] <= 500) {\r\n                    return 20\r\n                }\r\n                if (val[2] > 500) {\r\n                    return 24\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#5599E4',\r\n                }\r\n            },\r\n            zlevel: 1,\r\n        }, {\r\n            type: 'map',\r\n            map: '北京',\r\n            zlevel: 0,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#323c48',\r\n                    borderColor: '#111'\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2a333d'\r\n                }\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#ddb926',\r\n                        fontSize: 10\r\n                    },\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#ddb926',\r\n                        fontSize: 10\r\n                    },\r\n                }\r\n\r\n            },\r\n            data: data\r\n        }, {\r\n            name: '点',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            //symbol: 'pin',\r\n            symbolSize: 15,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 9,\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#F62157', //标志颜色\r\n                }\r\n            },\r\n            zlevel: 6,\r\n            data: convertData(data3)\r\n        });\r\n    });\r\n\r\n    option = {\r\n        backgroundColor: '#4f5555',\r\n        title: {\r\n            text: '北京疫情分布',\r\n            subtext: '散点圆的大小随疫情累计数量改变而改变',\r\n            left: 'center',\r\n            textStyle: {\r\n                color: '#7bbfea'\r\n            }\r\n        },\r\n        geo: {\r\n            map: '北京',\r\n            label: {\r\n                textStyle: {\r\n                    fontSize: '.1rem',\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#fff',\r\n                    borderColor: '#587A9F'\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#ccc'\r\n                }\r\n            }\r\n        },\r\n        series: series\r\n    };\r\n    myChart.setOption(option);\r\n\r\n});","html":"","externalScripts":"","updaterUID":"bd-2584176965","theme":"","layout":"","viewCount":6744,"userName":"s***4","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqoeVbePt.png?v=1581676099556","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","title"],"customTags":[],"updaterUserName":"s***4"}}