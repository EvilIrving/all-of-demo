{"status":0,"data":{"cid":"xu_-Uiuhll","authorUid":"bd-2994611029","authorUserName":"好***呀","title":"自定义仪表盘","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-11-02T06:48:38.000Z","lastUpdateTime":"2020-11-02T06:48:38.000Z","auth":2,"uid":"bd-2994611029","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-02T06:49:49.000Z","code":"let value = 45;\nlet title = '操作指引';\nlet angle = 0; //角度，用来做简单的动画效果的\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1\n    };\n}\noption = {\n    backgroundColor: '#0E192D',\n    title: {\n        text: `${title}\\n${value}%`,\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            fontSize: 16,\n            color: '#ffffff',\n        }\n    },\n    series: [{\n            name: \"内线\",\n            type: \"custom\",\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                console.log(Math.min(\n                    api.getWidth(),\n                    api.getHeight()\n                ) / 2.3)\n                return {\n                    type: \"arc\",\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(\n                            api.getWidth(),\n                            api.getHeight()\n                        ) / 4.6,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((90 + angle) * Math.PI) / 180\n                    },\n                    style: {\n                        stroke: '#0ff',\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        {\n            name: \"内线\",\n            type: \"custom\",\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: \"arc\",\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(\n                            api.getWidth(),\n                            api.getHeight()\n                        ) / 4.6,\n                        startAngle: ((180 + angle) * Math.PI) / 180,\n                        endAngle: ((270 + angle) * Math.PI) / 180\n                    },\n                    style: {\n                        stroke: '#0ff',\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        {\n            name: \"外线\",\n            type: \"custom\",\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: \"arc\",\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(\n                            api.getWidth(),\n                            api.getHeight()\n                        ) / 4.3,\n                        startAngle: ((270 + -angle) * Math.PI) / 180,\n                        endAngle: ((40 + -angle) * Math.PI) / 180\n                    },\n                    style: {\n                        stroke: '#0ff',\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        }, {\n            name: \"外线\",\n            type: \"custom\",\n            coordinateSystem: \"none\",\n            renderItem: function(params, api) {\n                return {\n                    type: \"arc\",\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: Math.min(\n                            api.getWidth(),\n                            api.getHeight()\n                        ) / 4.3,\n                        startAngle: ((90 + -angle) * Math.PI) / 180,\n                        endAngle: ((220 + -angle) * Math.PI) / 180\n                    },\n                    style: {\n                        stroke: '#0ff',\n                        fill: \"transparent\",\n                        lineWidth: 1.5\n                    },\n                    silent: true\n                };\n            },\n            data: [0]\n        },\n        // {\n        //     name: \"线头点\",\n        //     type: \"custom\",\n        //     coordinateSystem: \"none\",\n        //     renderItem: function(params, api) {\n        //         let x0 = api.getWidth() / 2;\n        //         let y0 = api.getHeight() / 2;\n        //         let r =\n        //             Math.min(api.getWidth(), api.getHeight()) / 2.1;\n        //         let point = getCirlPoint(x0, y0, r, 90 + -angle);\n        //         return {\n        //             type: \"circle\",\n        //             shape: {\n        //                 cx: point.x,\n        //                 cy: point.y,\n        //                 r: 5\n        //             },\n        //             style: {\n        //                 stroke: '#0ff', //绿\n        //                 fill: '#0ff'\n        //             },\n        //             silent: true\n        //         };\n        //     },\n        //     data: [0]\n        // },\n        // {\n        //     name: \"线头点\",\n        //     type: \"custom\",\n        //     coordinateSystem: \"none\",\n        //     renderItem: function(params, api) {\n        //         let x0 = api.getWidth() / 2;\n        //         let y0 = api.getHeight() / 2;\n        //         let r =\n        //             Math.min(api.getWidth(), api.getHeight()) / 2.1;\n        //         let point = getCirlPoint(x0, y0, r, 270 + -angle);\n        //         return {\n        //             type: \"circle\",\n        //             shape: {\n        //                 cx: point.x,\n        //                 cy: point.y,\n        //                 r: 5\n        //             },\n        //             style: {\n        //                 stroke: '#0ff', //绿\n        //                 fill: '#0ff'\n        //             },\n        //             silent: true\n        //         };\n        //     },\n        //     data: [0]\n        // },\n        {\n            name: \"内盘上\",\n            type: 'gauge',\n            splitNumber: 6,\n            radius: '31%',\n            center: ['50%', '50%'],\n            startAngle: 120,\n            endAngle: 58.9999,\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: [\n                        [1, '#00FFFF']\n                    ]\n                }\n            },\n            axisTick: {\n                show: false\n            },\n            splitLine: {\n                show: true,\n                length: 22,\n                lineStyle: {\n                    color: 'auto',\n                    width: 6\n                }\n            },\n            axisLabel: {\n                show: false\n            },\n            detail: {\n                show: false\n            }\n        }, {\n            name: \"内盘下\",\n            type: 'gauge',\n            splitNumber: 6,\n            radius: '31%',\n            center: ['50%', '50%'],\n            startAngle: -60,\n            endAngle: -120.9999,\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: [\n                        [1, '#00FFFF']\n                    ]\n                }\n            },\n            axisTick: {\n                show: false\n            },\n            splitLine: {\n                show: true,\n                length: 22,\n                lineStyle: {\n                    color: 'auto',\n                    width: 6\n                }\n            },\n            axisLabel: {\n                show: false\n            },\n            detail: {\n                show: false\n            }\n        }, {\n            name: \"外盘左\",\n            type: 'gauge',\n            splitNumber: 6,\n            radius: '39%',\n            center: ['50%', '50%'],\n            startAngle: -155,\n            endAngle: -205.9999,\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: [\n                        [1, '#00FFFF']\n                    ]\n                }\n            },\n            axisTick: {\n                show: false\n            },\n            splitLine: {\n                show: true,\n                length: 22,\n                lineStyle: {\n                    color: 'auto',\n                    width: 6\n                }\n            },\n            axisLabel: {\n                show: false\n            },\n            detail: {\n                show: false\n            }\n        }, {\n            name: \"外盘右\",\n            type: 'gauge',\n            splitNumber: 6,\n            radius: '39%',\n            center: ['50%', '50%'],\n            startAngle: 26,\n            endAngle: -26.9999,\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: [\n                        [1, '#00FFFF']\n                    ]\n                }\n            },\n            axisTick: {\n                show: false\n            },\n            splitLine: {\n                show: true,\n                length: 22,\n                lineStyle: {\n                    color: 'auto',\n                    width: 6\n                }\n            },\n            axisLabel: {\n                show: false\n            },\n            detail: {\n                show: false\n            }\n        },\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            radius: ['31%', '31.5%'],\n            hoverAnimation: false,\n            clockWise: false,\n            itemStyle: {\n                normal: {\n                    color: '#00FFFF',\n                }\n            },\n            label: {\n                show: false\n            },\n            data: [100]\n        },\n        {\n            type: 'pie',\n            name: '外层细圆环',\n            radius: ['41%', '41.5%'],\n            hoverAnimation: false,\n            clockWise: false,\n            itemStyle: {\n                normal: {\n                    color: '#00FFFF'\n                }\n            },\n            label: {\n                show: false\n            },\n            data: [100]\n        },\n    ]\n};\n\nfunction setdata() {\n    let dataArr = [{\n            name: (1).toString(),\n            value: 40,\n            itemStyle: {\n                normal: {\n                    color: 'rgb(0,255,255,.3)',\n                }\n            }\n        },\n        {\n            name: (2).toString(),\n            value: 100,\n            itemStyle: {\n                normal: {\n                    color: 'rgb(0,0,0,0)',\n                    borderWidth: 0,\n                    borderColor: \"rgba(0,255,255,1)\",\n                }\n            }\n        }, {\n            name: (3).toString(),\n            value: 40,\n            itemStyle: {\n                normal: {\n                    color: 'rgb(0,255,255,.3)',\n                }\n            }\n        },\n        {\n            name: (4).toString(),\n            value: 100,\n            itemStyle: {\n                normal: {\n                    color: 'rgb(0,0,0,0)',\n                    borderWidth: 0,\n                    borderColor: \"rgba(0,255,255,1)\",\n                }\n            }\n        }\n    ];\n    // for (var i = 0; i < 100; i++) {\n    //     if (i % 2 === 0) {\n    //         dataArr.push({\n    //             name: (i + 1).toString(),\n    //             value: 40,\n    //             itemStyle: {\n    //                 normal: {\n    //                     color: 'rgb(0,255,255,.3)',\n    //                 }\n    //             }\n    //         })\n    //     } else {\n    //         dataArr.push({\n    //             name: (i + 1).toString(),\n    //             value: 100,\n    //             itemStyle: {\n    //                 normal: {\n    //                     color: 'rgb(0,0,0,0)',\n    //                     borderWidth: 0,\n    //                     borderColor: \"rgba(0,255,255,1)\",\n    //                 }\n    //             }\n    //         })\n    //     }\n\n    // }\n    return dataArr\n}\n\nfunction startTimer() {\n    timer = setInterval(() => {\n        let option = myChart.getOption();\n        angle = angle + 3;\n        // option.series[0].startAngle = option.series[0].startAngle - 1;\n        // option.series[1].startAngle = option.series[1].startAngle - 1;\n        // option.series[1].endAngle = option.series[1].endAngle - 1;\n        // option.series[2].startAngle = option.series[2].startAngle - 1;\n        // option.series[2].endAngle = option.series[2].endAngle - 1;\n        // option.series[3].startAngle = option.series[3].startAngle + 1;\n        // option.series[3].endAngle = option.series[3].endAngle + 1;\n        // option.series[4].startAngle = option.series[4].startAngle + 1;\n        // option.series[4].endAngle = option.series[4].endAngle + 1;\n        myChart.setOption(option);\n    }, 100);\n}\nsetTimeout(startTimer, 0);","html":"","externalScripts":"","updaterUID":"bd-2994611029","theme":"","layout":"","viewCount":355,"userName":"好***呀","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xu_-Uiuhll.png?v=1604299789307","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"好***呀"}}