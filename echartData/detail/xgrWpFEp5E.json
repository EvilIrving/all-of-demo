{"status":0,"data":{"cid":"xgrWpFEp5E","authorUid":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","authorUserName":"宛***明","title":"饼图测试","description":"","latestVersion":14,"alwaysLatest":1,"createTime":"2020-08-25T07:31:34.000Z","lastUpdateTime":"2020-08-25T07:31:34.000Z","auth":2,"uid":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":14,"parentVersion":13,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-27T08:23:55.000Z","code":"let echartData = {\n    outer: [\n        {\n            value: 30,\n            unit: '件',\n            name: '已保护'\n        },\n        {\n            value: 164,\n            unit: '件',\n            name: '未保护'\n        }\n    ]\n}\n\nvar tarObj = {\n    '已保护': 30,\n    '未保护': 164\n}\n\nfunction fontSize(res){ // 用来计算font-szie\n\n  let docEl = document.documentElement,\n\n    clientWidth = window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;\n\n  if (!clientWidth) return;\n\n  let fontSize = 2.5 * (clientWidth / 1920);\n\n  return res*fontSize;\n\n}\n\n// 重新计算文字大小\n// window.onresize = function () {\n//     //重置容器高宽\n//     let option = myChart.getOption();\n//     option.title.textStyle.fontSize = fontSize(40)\n//     option.title.textStyle.subtextStyle = fontSize(30)\n//     myChart.setOption(option);\n//     // resizeWorldMapContainer();\n//     myChart.resize();\n// };\n\n\n// '(' + (tarObj[name]*100/194) + '%)'\n\n// 获取图例数据\nvar arrName = getArrayValue(echartData.outer , \"name\");\n\nfunction getArrayValue(array, key) {\n    key = key || \"value\";\n    var res = [];\n    if (array) {\n        array.forEach(function(t) {\n            res.push(t[key]);\n        });\n    }\n    return res;\n}\n\n\noption = {\n    backgroundColor: \"#ffffff\",\n     title: {\n         text: 7789,\n         subtext: 'Total',\n         textStyle: {\n             color: '#2F396C',\n             fontSize: fontSize(40),\n         },\n         subtextStyle: {\n             fontSize: fontSize(30),\n             color: '#8494A7',\n         },\n        top: '46%',\n        left: \"49%\",\n        textAlign:'center',\n        textVerticalAlign: 'middle'\n     },\n    //  {\n    //     text: '45%',\n    //     left: '19.5%',\n    //     top: '27%',\n    //     textAlign: 'center',\n    //     textStyle: {\n    //         fontSize: '30',\n    //         fontWeight:'600',\n    //         color: 'rgba(251, 200, 79, 1)',\n    //         textAlign: 'center',\n    //     },\n    // },\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n    },\n    color: ['#3190F6', '#FF5B5C', '#53c9c8', '#489ee5', '#436fce'],\n    legend: { // 右侧注释\n        show: true,\n        top: \"10%\",\n        left: '80%',\n        data: arrName,\n        itemWidth: 20,\n        itemHeight: 20,\n        padding: [0, 5],\n        itemGap: 25,\n        textStyle: {\n            color: '#b0b9cb'\n        },\n        formatter: function(name) {\n            return name + ' ' + tarObj[name]\n            // return \"{title|\" + name + \"}\\n{value|\" + (objData[name].value) + \"人}\"\n        },\n    },\n    series: [\n        { //最外用来带阴影的环\n            name: '外环阴影环',\n            type: 'pie',\n            zlevel: 1,\n            silent: true,\n            radius: ['79%', '80%'],\n            center: [\"50%\", \"50%\"],\n            hoverAnimation: false,\n            color: \"#ffffff\",\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            itemStyle: { // 此配置\n                // 设置扇形的阴影\n               normal: {\n                    // 设置扇形的阴影\n                    \n                    shadowBlur: 10,\n                    shadowColor: 'rgba(0,0,0,0.5)', \n                    shadowOffsetX: 0,\n                    shadowOffsetY: 0\n\n                }\n            },\n            data: [100]\n        },\n        { // 用来遮挡外边阴影的白环\n            name: '外环阴遮挡',\n            type: 'pie',\n            zlevel: 1,\n            silent: true,\n            radius: ['80%', '85%'],\n            center: [\"50%\", \"50%\"],\n            hoverAnimation: false,\n            color: \"#ffffff\",\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            itemStyle: { // 此配置\n                color: \"#ffffff\" // 环设置成透明白色\n                // 设置扇形的阴影\n            },\n            data: [100]\n        },\n        {\n            name: '控制台',\n            type: 'pie',\n            radius: ['52%', '72%'],\n            center: [\"50%\", \"50%\"],\n            startAngle: '0',\n            data: echartData.outer,\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            itemStyle: { // 此配置\n                normal: {\n                    borderWidth: 2,\n                    borderColor: '#fff',\n                },\n                // emphasis: {\n                //     borderWidth: 0,\n                //     shadowBlur: 10,\n                //     shadowOffsetX: 0,\n                //     shadowColor: 'rgba(0, 0, 0, 0.5)'\n                // }\n            },\n            // label: {\n            //     normal: {\n            //         position: 'inner',\n            //         formatter: params => {\n            //             return (\n            //                 params.value + '件'\n            //             );\n            //         },\n            //         fontSize: 22,\n            //         color: '#000',\n            //         // padding: [0, -130, 25, -130],\n            //     }\n            // },\n        },\n        { //内环用来带阴影的环\n            name: '内环阴影环',\n            type: 'pie',\n            zlevel: 1,\n            silent: true,\n            radius: ['44%', '45%'],\n            center: [\"50%\", \"50%\"],\n            hoverAnimation: false,\n            color: \"#ffffff\",\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            itemStyle: { // 此配置\n                // 设置扇形的阴影\n               normal: {\n                    // 设置扇形的阴影\n                    \n                    shadowBlur: 10,\n                    shadowColor: 'rgba(0,0,0,0.5)', \n                    shadowOffsetX: 0,\n                    shadowOffsetY: 0\n\n                }\n            },\n            data: [100]\n        },\n        { // 用来遮挡内边阴影的白环\n            name: '内环阴遮挡',\n            type: 'pie',\n            zlevel: 1,\n            silent: true,\n            radius: ['40%', '44%'],\n            center: [\"50%\", \"50%\"],\n            hoverAnimation: false,\n            color: \"#ffffff\",\n            label: {\n                normal: {\n                    show: false\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            itemStyle: { // 此配置\n                color: \"#ffffff\" // 环设置成透明白色\n                // 设置扇形的阴影\n            },\n            data: [100]\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","theme":"","layout":"","viewCount":472,"userName":"宛***明","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgrWpFEp5E.png?v=1598516635382","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title"],"customTags":[],"updaterUserName":"宛***明"}}