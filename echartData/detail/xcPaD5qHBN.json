{"status":0,"data":{"cid":"xcPaD5qHBN","authorUid":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","authorUserName":"q***0","title":"上海市地图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-18T03:28:08.000Z","lastUpdateTime":"2021-10-18T03:28:08.000Z","auth":2,"uid":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-18T03:28:08.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1634526956327-oeoy5N0nW.geoJson\";\n\n \nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('shanghai', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        '黄浦区':[121.483572,31.215946],\n        '徐汇区':[121.439405,31.162992],\n        '长宁区':[121.380949,31.20737],\n        '静安区':[121.450659,31.270821],\n        '普陀区':[121.392042,31.257895],\n        '虹口区':[121.485443,31.276649],\n        '杨浦区':[121.529302,31.29835],\n        '闵行区':[121.418901,31.087213],\n        '宝山区':[121.404861,31.392111],\n        '嘉定区':[121.24439,31.358138],\n        '浦东新区':[121.742177,31.083823],\n        '金山区':[121.255144,30.818932],\n        '松江区':[121.220231,31.015194],\n        '青浦区':[121.085188,31.124681],\n        '奉贤区':[121.56251,30.897998],\n        '崇明区':[121.568484,31.635916]\n    }\n    var data = [\n        {name:'黄浦区', value: 11}, \n        {name:'徐汇区', value: 4}, \n        {name:'长宁区', value: 22}, \n        {name:'静安区', value: 14}, \n        {name:'普陀区', value:19}, \n        {name:'虹口区', value: 7}, \n        {name:'杨浦区', value: 14}, \n        {name:'闵行区', value: 22}, \n        {name:'宝山区', value: 17},  \n        {name:'嘉定区', value: 36}, \n        {name:'浦东新区', value: 45}, \n        {name:'金山区', value: 43}, \n        {name:'松江区', value: 23}, \n        {name:'青浦区', value: 17}, \n        {name:'奉贤区', value: 32}, \n        {name:'崇明区', value: 53} \n    ];\n    var max = 480, min = 9; // todo \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\n\n    option = {\n         backgroundColor: '#1D346F',\n        title: {\n            text: '',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n       \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n                // color: ['#3B5077', '#031525'] // 蓝黑\n                // color: ['#ffc0cb', '#800080'] // 红紫\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\n                // color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\n                // color: ['#23074d', '#cc5333'] // 紫红\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                color: ['#1488CC', '#2B32B2'] // 浅蓝\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\n\n            }\n        },\n       \n        geo: {\n            show: true,\n            map: 'shanghai',\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#1D346F',\n                    borderWidth: 0,\n                    shadowColor: '#23074d',\n                    shadowBlur: 30,\n                    shadowOffsetX: -2,\n                    shadowOffsetY: 5,\n                },\n                emphasis: {\n                    areaColor: '#2a333d',\n                },\n            },\n        },\n        series : [\n       \n         {\n            type: 'map',\n            map: 'shanghai',\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n           itemStyle: {\n                normal: {\n                    areaColor: '#1D346F',\n                    borderColor: '#D79D3D',\n                },\n                emphasis: {\n                    areaColor: '#0f2c70',\n                },\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: '点',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin',\n            symbolSize: function (val) {\n                var a = (maxSize4Pin - minSize4Pin) / (max - min);\n                var b = minSize4Pin - a*min;\n                b = maxSize4Pin - a*max;\n                return a*val[2]+b;\n            },\n              label: {\n                    normal: {\n                        show: true,\n                        textStyle: {\n                            color: '#fff',\n                            fontSize: 9,\n                        },\n                        formatter(value) {\n                            return value.data.value[2]\n                        }\n                    }\n                },\n            itemStyle: {\n                normal: {\n                    areaColor: '#1D346F',\n                    borderColor: '#D79D3D',\n                },\n                emphasis: {\n                    areaColor: '#0f2c70',\n                },\n            },\n           data: convertData(data),\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                hoverAnimation: true,\n                zlevel: 6\n        },\n        {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            data: convertData(data.sort(function (a, b) {\n                return b.value - a.value;\n            }).slice(0, 11)),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n             itemStyle: {\n                normal: {\n                    areaColor: '#1D346F',\n                    borderColor: '#D79D3D',\n                },\n                emphasis: {\n                    areaColor: '#0f2c70',\n                },\n            },\n            zlevel: 1\n        },\n         \n    ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","theme":"","layout":"","viewCount":0,"userName":"q***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcPaD5qHBN.png?v=1634527688912","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"q***0"}}