{"status":0,"data":{"cid":"xdKbqMOPkE","authorUid":"bd-2520534514","authorUserName":"我***啊","title":"宁围镇镇级地图+排水户点","description":"geoJSON","latestVersion":7,"alwaysLatest":1,"createTime":"2018-10-09T09:32:52.000Z","lastUpdateTime":"2018-10-09T09:32:52.000Z","auth":2,"uid":"bd-2520534514","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-14T07:50:45.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1565769001765-qW6ayEX8d.json\";\r\n\r\n// var uploadedDataURL = \"/asset/get/s/data-1539135233305-GPxHCB8sx.json\";\r\n\r\n\r\n var townName = \"益农镇\";\r\nmyChart.showLoading();\r\nvar data = [{\r\n    \"name\": \"市北公寓\",\r\n    \"value\": \"市北公寓\"\r\n}, {\r\n    \"name\": \"天海阳光\",\r\n    \"value\": \"天海阳光\"\r\n}];\r\nvar geoCoordMap = {\r\n    \"天海阳光\": [120.5863,30.1636],\r\n    \"市北公寓\": [120.5616,30.1607]\r\n};\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    myChart.hideLoading();\r\n    var mapLine = geoJson;\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    echarts.registerMap('XSQ', mapLine);\r\n    option = {\r\n        title: {\r\n            text: townName,\r\n            subtext: '下级排水户分布',\r\n            x: 'center'\r\n        },\r\n        legend: {\r\n            orient: 'vertical',\r\n            y: 'bottom',\r\n            x: 'right',\r\n            data: ['下级排水户分布图']\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            showDelay: 0,\r\n            transitionDuration: 0.2,\r\n            formatter: function(params) {\r\n                var value = (params.value + '').split('.');\r\n                value = value[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,');\r\n                return params.name + ': ' + value;\r\n            }\r\n        },\r\n        toolbox: {\r\n            show: true,\r\n            //orient: 'vertical',\r\n            left: 'right',\r\n            top: 'top',\r\n            feature: {\r\n                dataView: {\r\n                    readOnly: false\r\n                },\r\n                restore: {},\r\n                saveAsImage: {}\r\n            }\r\n        },\r\n        geo: {\r\n            show: true,\r\n            map: 'XSQ',\r\n            left: '2%',\r\n            label: {\r\n                normal: {\r\n                    color: '#F4E925',\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#fff',\r\n                    areaColor: '#323c48'\r\n                }\r\n            }\r\n        },\r\n        series: [{\r\n            name: '',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data),\r\n            symbolSize: 12,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#05C3F9',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#05C3F9'\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#1DE9B6',\r\n                    borderColor: '#fff',\r\n                    borderWidth: 1\r\n                }\r\n            }\r\n        }]\r\n    };\r\n    myChart.setOption(option);\r\n});\r\nmyChart.on('click', function(params) {\r\n\tif(params.seriesType === 'effectScatter'){\r\n    \talert(params.data.name)\r\n\t}\r\n});","html":"","externalScripts":"","updaterUID":"bd-2520534514","theme":"","layout":"","viewCount":213,"userName":"我***啊","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xdKbqMOPkE.png?v=1565769045688","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"我***啊"}}