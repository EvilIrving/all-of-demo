{"status":0,"data":{"cid":"xKDS5lCvH_","authorUid":"bd-599414847","authorUserName":"A***M","title":"地图-城市不同色块","description":"map，geo, bar, 根据value值，来设置地图色块","latestVersion":8,"alwaysLatest":1,"createTime":"2019-05-23T06:38:17.000Z","lastUpdateTime":"2019-05-23T06:38:17.000Z","auth":1,"uid":"bd-599414847","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":6,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-30T08:01:19.000Z","code":"let title = ''\r\nlet dataValue = [{\r\n    city: '四川',\r\n    value: 5,\r\n    color: '#DE1F14',\r\n    num: '319'\r\n},{\r\n    city: '云南',\r\n    value: 4,\r\n    color: '#EF5854',\r\n    num: '257'\r\n},{\r\n    city: '贵州',\r\n    value: 3,\r\n    color: '#F3807C',\r\n    num: '212'\r\n},{\r\n    city: '西藏',\r\n    value: 2,\r\n    color: '#F8ADAB',\r\n    num: '22'\r\n},{\r\n    city: '重庆',\r\n    value: 1,\r\n    color: '#FBD3D2',\r\n    num: '12'\r\n}]\r\n////////////////////////////////////////////////////////////////////\r\n\r\n\r\nlet colorRange =  ['#fff']\r\nlet max = dataValue.length\r\n\r\n\r\n//数据纯属虚构\r\nvar data = [\r\n    {\r\n        name: '北京',\r\n        value: 0\r\n    },\r\n     {\r\n        name: '天津',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '上海',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '重庆',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '河北',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '河南',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '云南',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '辽宁',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '黑龙江',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '湖南',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '安徽',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '山东',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '新疆',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '江苏',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '浙江',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '江西',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '湖北',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '广西',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '甘肃',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '山西',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '内蒙古',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '陕西',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '吉林',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '福建',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '贵州',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '广东',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '青海',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '西藏',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '四川',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '宁夏',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '海南',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '台湾',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '香港',\r\n        value: 0\r\n    },\r\n    {\r\n        name: '澳门',\r\n        value: 0\r\n    }\r\n];\r\nlet barData = []\r\nlet yData = []\r\ndataValue.forEach(keys => {\r\n    colorRange[keys.value] = keys.color\r\n    data.find(item =>{\r\n       if (item.name === keys.city) {\r\n           item.value = keys.value\r\n           item.num = keys.num\r\n           item.color = keys.color\r\n       }\r\n   })\r\n    yData.push(keys.city + ' ' + keys.num + ' ');\r\n    keys.value = keys.num\r\n    barData.push(keys);\r\n})\r\n\r\nvar option = {\r\n    backgroundColor:'#fff',\r\n    title: [{\r\n        show: true,\r\n        text: title,\r\n        textStyle: {\r\n            color: '#2D3E53',\r\n            fontSize: 18\r\n        },\r\n        top: 10\r\n    }],\r\n    tooltip: {\r\n        show: true,\r\n        formatter: function(params) {\r\n            return params.name + '：' + params.data['num']\r\n        },\r\n    },\r\n    visualMap: {\r\n        type: 'continuous',\r\n        orient: 'horizontal',\r\n        itemWidth: 10,\r\n        itemHeight: 0,\r\n        // text: ['高', '低'],\r\n        showLabel: true,\r\n        seriesIndex: [0],\r\n        min: 0,\r\n        max: max,\r\n        inRange: {\r\n            color: colorRange\r\n        },\r\n        textStyle: {\r\n            color: '#7B93A7'\r\n        },\r\n        bottom: 30,\r\n        left: 'left',\r\n    },\r\n    grid: {\r\n        right: 10,\r\n        top: 200,\r\n        bottom: 200,\r\n        width: '20%'\r\n    },\r\n    xAxis: {\r\n        show: false\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        inverse: true,\r\n        nameGap: 16,\r\n        axisLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            margin: 85,\r\n            textStyle: {\r\n                color: '#455A74',\r\n                align: 'left',\r\n                fontSize: 14\r\n            }\r\n        },\r\n        data: yData\r\n    },\r\n    geo: {\r\n        roam: true,\r\n        map: 'china',\r\n        left: 'left',\r\n        right: '300',\r\n        layoutSize: '80%',\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            },\r\n        },\r\n        itemStyle: {\r\n            emphasis: {\r\n                areaColor: 'transparent'\r\n            },\r\n              normal: {\r\n                borderColor: '#ccc',\r\n            },\r\n        }\r\n    },\r\n    series: [{\r\n        name: 'mapSer',\r\n        type: 'map',\r\n        roam: false,\r\n        geoIndex: 0,\r\n        label: {\r\n            show: false,\r\n        },\r\n        data: data\r\n    }, {\r\n        name: 'barSer',\r\n        type: 'bar',\r\n        roam: false,\r\n        visualMap: false,\r\n        zlevel: 2,\r\n        center: ['83%', '20%'],\r\n        barMaxWidth: 8,\r\n        barGap: .4,\r\n        itemStyle: {\r\n            normal: {\r\n                color: function(params) {\r\n                    return params.data.color\r\n                },\r\n                barBorderRadius: 15\r\n            }\r\n        },\r\n        data: barData\r\n    }]\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-599414847","theme":"","layout":"","viewCount":561,"userName":"A***M","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKDS5lCvH_.png?v=1559203280042","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-map","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"A***M"}}