{"status":0,"data":{"cid":"xjIVYMuHPf","authorUid":"obd-oNxO_0pSiX4Qhzuy4VZap5faODTirCs","authorUserName":"梦***呢","title":"桑基图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-02-22T09:04:04.000Z","lastUpdateTime":"2021-02-22T09:04:04.000Z","auth":2,"uid":"obd-oNxO_0pSiX4Qhzuy4VZap5faODTirCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-22T09:04:04.000Z","code":"    let datalist = [\n                {\n            name: \"公共平台\"\n        },\n        {\n            name: \"系统0000\"\n        },\n        {\n            name: \"系统0011\"\n        },\n        {\n            name: \"系统0022\"\n        },\n        {\n            name: \"系统0033\"\n        },\n        {\n            name: \"系统0044\"\n        },\n        {\n            name: \"系统0055\"\n        },{\n            name: \"系统11\"\n        },\n        {\n            name: \"系统22\"\n        },\n        {\n            name: \"系统33\"\n        },\n        {\n            name: \"系统44\"\n        },\n        {\n            name: \"系统55\"\n        },\n        {\n            name: \"系统66\"\n        },\n        {\n            name: \"系统77\"\n        },\n        {\n            name: \"系统88\"\n        },\n        {\n            name: \"系统99\"\n        }\n    ];\n    let linksData = [\n        {\n            source: \"公共平台\",\n            target: \"系统0000\",\n            value: 1044305\n        },\n        {\n            source: \"公共平台\",\n            target: \"系统0011\",\n            value: 651527\n        },\n        {\n            source: \"公共平台\",\n            target: \"系统0022\",\n            value: 651527\n        },\n        {\n            source: \"公共平台\",\n            target: \"系统0033\",\n            value: 486710\n        },\n        {\n            source: \"公共平台\",\n            target: \"系统0044\",\n            value: 212670\n        },\n        {\n            source: \"公共平台\",\n            target: \"系统0055\",\n            value: 210400\n        },{\n            source: \"系统0011\",\n            target: \"系统11\",\n            value: 645246\n        },\n        {\n            source: \"系统0022\",\n            target: \"系统22\",\n            value: 513275\n        },\n        {\n            source: \"系统0011\",\n            target: \"系统33\",\n            value: 282986\n        },\n        {\n            source: \"系统0011\",\n            target: \"系统44\",\n            value: 118655\n        },\n        {\n            source: \"系统0022\",\n            target: \"系统55\",\n            value: 105989\n        },\n        {\n            source: \"系统0022\",\n            target: \"系统66\",\n            value: 95100\n        },\n        {\n            source: \"系统0033\",\n            target: \"系统77\",\n            value: 87796\n        },\n        {\n            source: \"系统0044\",\n            target: \"系统88\",\n            value: 47658\n        },\n                {\n            source: \"系统0055\",\n            target: \"系统99\",\n            value: 243660\n        },\n\n        \n    ];\n    let Color = [\n        \"#61FEFF\",\n        \"#937FE6\",\n        \"#2B56D3\",\n        \"#87E7AA\",\n        \"#937FE6\",\n        \"#FF9B97\",\n        \"#8f23f5\",\n        \"#0576ea\",\n        \"#2cb8cf\",\n        \"#8A7EE0\",\n        \"#2cb8cf\",\n        \"#4e70f0\",\n        \"#1fa3de\",\n        \"#bbc951\",\n        \"#FFC14B\",\n        \"#b785a6\",\n\n    ];  let Color1 = [\n        \"#04E0F3\",\n        \"#682EFC\",\n        \"#35A7FE\",\n        \"#0DC09F\",\n        \"#682EFC\",\n        \"#ED6663\",\n        \"#8f23f5\",\n        \"#0576ea\",\n        \"#2cb8cf\",\n        \"#8A7EE0\",\n        \"#2cb8cf\",\n        \"#4e70f0\",\n        \"#1fa3de\",\n        \"#bbc951\",\n        \"#FFC14B\",\n        \"#b785a6\",\n\n    ];\n    let sourceLabel = [\n        \"right\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\",\n        \"left\"\n    ];\n    let itemStyleColor = [];\n    let labelSource = [];\n    for (let i = 0; i < datalist.length; i++) {\n        datalist[i].label = {\n            normal: {\n                position: sourceLabel[i]\n            }\n        };\n        labelSource.push(sourceLabel[i]);\n    }\n    for (let d = 0; d < datalist.length; d++) {\n        datalist[d].itemStyle = {\n            normal: {\n                // color: Color[d]\n                    color: {\n                  type: \"linear\",\n                  x: 0,\n                  y: 1,\n                  x2: 0,\n                  y2: 0,\n                  colorStops: [\n                    {\n                      offset: 1,\n                      color: Color[d], // 0% 处的颜色\n                    },\n                    {\n                      offset: 0,\n                      color: Color1[d], // 100% 处的颜色\n                    },\n                  ],\n                  global: false, // 缺省为 false\n                },\n            }\n        };\n        itemStyleColor.push(datalist[d]);\n    }\n    option = {\n        backgroundColor: \"#031d7a\",\n        tooltip: {\n            trigger: \"item\",\n            triggerOn: \"mousemove\",\n            formatter: function(params) {\n                if (params.name == \"公共平台\") {\n                    return \" 公共平台 \"\n                } else {\n                    let value = params.data.value;\n                    if (!value && value !== 0) return 0;\n                    let str = value.toString();\n                    let reg = str.indexOf(\".\") > -1 ? /(\\d)(?=(\\d{3})+\\.)/g : /(\\d)(?=(?:\\d{3})+$)/g;\n                    if (params.data.source == \"公共平台\") {\n                        return params.data.target + \" : \" + str.replace(reg, \"$1,\");\n                    } else {\n                        return params.data.source + \" : \" + str.replace(reg, \"$1,\");\n                    }\n                }\n            }\n        },\n        series: [{\n            type: \"sankey\",\n            layout: \"none\",\n            top: \"4%\",\n            bottom: \"12%\",\n            left: \"20\",\n            right: \"20\",\n            nodeGap: 15,\n            nodeWidth: 25,\n            focusNodeAdjacency: \"allEdges\",\n            data: itemStyleColor,\n            links: linksData,\n            label: {\n                normal: {\n                    color: \"#fff\",\n                    fontSize: 14,\n                    formatter: function(params) {\n                        if (params.data.name == '公共平台') {\n                            let strs = params.data.name.split(''); //字符串数组\n                            let str = ''\n                            for (let i = 0, s; s = strs[i++];) { //遍历字符串数组\n                                str += s;\n                                if (!(i % 1)) str += '\\n'; //按需要求余\n                            }\n                            return \"{white|\" + str + \"}\"\n                        } else {\n                            return params.data.name\n                        }\n                    },\n                    rich: {\n                        white: {\n                            fontSize: 16,\n                            lineHeight: 30,\n                            padding: [0, 0, 0, -26]\n                        }\n                    }\n                }\n            },\n            lineStyle: {\n                normal: {\n                    opacity: 0.4,\n                    color: \"source\",\n                    curveness: 0.5\n                }\n            },\n            itemStyle: {\n                normal: {\n                    borderWidth: 1,\n                    borderColor: \"transparent\"\n                }\n            }\n        }]\n    };","html":"","externalScripts":"","updaterUID":"obd-oNxO_0pSiX4Qhzuy4VZap5faODTirCs","theme":"","layout":"","viewCount":261,"userName":"梦***呢","commentCount":0,"starCount":15,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjIVYMuHPf.png?v=1613984644960","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey","tooltip"],"customTags":[],"updaterUserName":"梦***呢"}}