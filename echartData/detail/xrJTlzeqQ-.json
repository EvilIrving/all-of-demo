{"status":0,"data":{"cid":"xrJTlzeqQ-","authorUid":"bd-2417514347","authorUserName":"原***枫","title":"折线图预测","description":"折线图预测","latestVersion":1,"alwaysLatest":1,"createTime":"2017-06-23T01:42:12.000Z","lastUpdateTime":"2017-06-23T01:42:12.000Z","auth":2,"uid":"bd-2417514347","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.6.2","versionCreateTime":"2017-06-23T01:42:13.000Z","code":"var data = [];\r\nvar lineDataY = [];\r\nvar lineDataX = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'].map(function(item, index) {\r\n    return item + '月';\r\n});\r\nvar lineIconName = [];\r\nlineDataY = [];\r\nlineIconName = [];\r\nvar srcData = {\r\n    \"code\": \"200\",\r\n    \"data\": [{\r\n        \"type\": 1,\r\n        \"name\": \"柞水人\",\r\n        \"value\": [{\r\n            \"month\": 1,\r\n            \"total\": 301145,\r\n            \"expected\": 301145\r\n        }, {\r\n            \"month\": 2,\r\n            \"total\": 319987,\r\n            \"expected\": 319987\r\n        }, {\r\n            \"month\": 3,\r\n            \"total\": 365541,\r\n            \"expected\": 365541\r\n        }, {\r\n            \"month\": 4,\r\n            \"total\": 331235,\r\n            \"expected\": 331235\r\n        }, {\r\n            \"month\": 5,\r\n            \"total\": 361123,\r\n            \"expected\": 361123\r\n        }, {\r\n            \"month\": 6,\r\n            \"total\": 301346,\r\n            \"expected\": 301346\r\n        }, {\r\n            \"month\": 7,\r\n            \"total\": 0,\r\n            \"expected\": 312246\r\n        }, {\r\n            \"month\": 8,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 9,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 10,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 11,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 12,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }]\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"渭南人\",\r\n        \"value\": [{\r\n            \"month\": 1,\r\n            \"total\": 114622,\r\n            \"expected\": 114622\r\n        }, {\r\n            \"month\": 2,\r\n            \"total\": 121840,\r\n            \"expected\": 121840\r\n        }, {\r\n            \"month\": 3,\r\n            \"total\": 130402,\r\n            \"expected\": 130402\r\n        }, {\r\n            \"month\": 4,\r\n            \"total\": 114456,\r\n            \"expected\": 114456\r\n        }, {\r\n            \"month\": 5,\r\n            \"total\": 124589,\r\n            \"expected\": 124589\r\n        }, {\r\n            \"month\": 6,\r\n            \"total\": 133492,\r\n            \"expected\": 133492\r\n        }, {\r\n            \"month\": 7,\r\n            \"total\": 0,\r\n            \"expected\": 123491\r\n        }, {\r\n            \"month\": 8,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 9,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 10,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 11,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 12,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }]\r\n    }, {\r\n        \"type\": 3,\r\n        \"name\": \"宝鸡人\",\r\n        \"value\": [{\r\n            \"month\": 1,\r\n            \"total\": 415767,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 2,\r\n            \"total\": 441827,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 3,\r\n            \"total\": 495943,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 4,\r\n            \"total\": 445691,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 5,\r\n            \"total\": 485712,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 6,\r\n            \"total\": 434838,\r\n            \"expected\": 434838\r\n        }, {\r\n            \"month\": 7,\r\n            \"total\": 0,\r\n            \"expected\": 435737\r\n        }, {\r\n            \"month\": 8,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 9,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 10,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 11,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }, {\r\n            \"month\": 12,\r\n            \"total\": 0,\r\n            \"expected\": 0\r\n        }]\r\n    }],\r\n    \"message\": \"Successful\"\r\n}\r\nvar expectedValue = []; //预测值数据\r\nvar expectedMonth = 0; //预测月数据\r\nfor (var i = 0; i < srcData.data.length; i++) {\r\n    var temp = srcData.data;\r\n    var tempCount = [];\r\n    var expectCount = [];\r\n    for (var j = 0; j < temp[i].value.length; j++) {\r\n        if (temp[i].value[j].total === 0) {\r\n            if (temp[i].value[j].expected != 0) {\r\n                expectedMonth = j;\r\n                expectedValue.push(temp[i].value[j].expected);\r\n            }\r\n            tempCount.push(\"-\");\r\n        } else {\r\n            tempCount.push(temp[i].value[j].total);\r\n        }\r\n        if (temp[i].value[j].expected === 0) {\r\n            expectCount.push(\"-\")\r\n        } else {\r\n            expectCount.push(temp[i].value[j].expected)\r\n        }\r\n    }\r\n    lineIconName.push({\r\n        name: temp[i].name,\r\n        icon: 'rect'\r\n    });\r\n    lineDataY.push({\r\n        type: 'line',\r\n        data: tempCount,\r\n        smooth: true,\r\n        zlevel: 2,\r\n        name: temp[i].name\r\n    });\r\n    lineDataY.push({\r\n        type: 'line',\r\n        data: expectCount,\r\n        smooth: true,\r\n        zlevel: 1,\r\n        name: temp[i].name + \"预测\",\r\n        lineStyle: {\r\n            normal: {\r\n                color: \"#ccc\",\r\n                type: \"dotted\"\r\n            }\r\n        }\r\n    });\r\n}\r\noption = {\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        formatter: function(params) {\r\n            var filterMap = params.filter(function(item, index) {\r\n                if (item.seriesName.indexOf(\"预测\") > -1) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            var html = filterMap[0].name + \"<br>\";\r\n            for (var i = 0; i < filterMap.length; i++) {\r\n                if (filterMap[i].value == \"-\" && expectedMonth == filterMap[i].dataIndex) {\r\n                    filterMap[i].value = expectedValue[i];\r\n                }\r\n                html += filterMap[i].marker + filterMap[i].seriesName + \":\" + filterMap[i].value + '<br>';\r\n            }\r\n            return html;\r\n        }\r\n    },\r\n    grid: {\r\n        show: false,\r\n        zlevel: 0,\r\n        z: 2,\r\n        left: '5%',\r\n        top: 20,\r\n        right: '10%',\r\n    },\r\n    legend: {\r\n        orient: 'horizontal',\r\n        bottom: 10,\r\n        align: 'left',\r\n        data: lineIconName,\r\n        itemHeight: 6,\r\n        itemWidth: 20,\r\n\r\n    },\r\n    xAxis: {\r\n        data: lineDataX,\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#666'\r\n            }\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#666'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            interval: function(number, value) {\r\n                if (number === 0 || number === 2 || number === 5 || number === 8 || number === 11) {\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            },\r\n            formatter: function(params) {\r\n                if (params == \"1月\") {\r\n                    var myYear = new Date().getFullYear();\r\n                    return myYear;\r\n                }\r\n                return params.replace(\"月\", \"\")\r\n\r\n            }\r\n        }\r\n    },\r\n    interval: 3,\r\n    yAxis: {\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#666'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#666'\r\n            }\r\n        }\r\n    },\r\n    series: lineDataY,\r\n    color: ['#209db3', '#55c2d6', '#83e624'],\r\n};","html":"","externalScripts":"","updaterUID":"bd-2417514347","theme":"","layout":"","viewCount":104,"userName":"原***枫","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJTlzeqQ-.png?v=1498182133130","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title"],"customTags":[],"updaterUserName":"原***枫"}}