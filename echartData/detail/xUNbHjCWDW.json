{"status":0,"data":{"cid":"xUNbHjCWDW","authorUid":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","authorUserName":"凯***宏","title":"混合图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-11-04T02:01:04.000Z","lastUpdateTime":"2021-11-04T02:01:04.000Z","auth":2,"uid":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-11-04T02:01:04.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1635932884853-xSfEKuZsV.json';\n\nmyChart.showLoading('default', {\n    text: '统计中，请稍候...',\n    maskColor: '#022B5D',\n    textColor: '#fff',\n});\n\n// const colorList = [\n//     'rgba(0, 138, 255, ',\n//     'rgba(240, 175, 57, ',\n//     'rgba(223, 98, 56, ',\n//     'rgba(0, 155, 109, ',\n//     'rgba(164, 213, 102, ',\n//     'rgba(147, 118, 248, ',\n// ];\n\nconst colorList = [\n    'rgba(0, 224, 255,',\n    'rgba(253, 248, 64,',\n    'rgba(0, 255, 198,',\n    'rgba(255, 96, 0,',\n];\n\nconst barColorList = [\n    ['#008AFF', '#00E0FF'],\n    ['#F0AF39', '#FDF840'],\n    ['#00E8E0', '#00FFC6'],\n];\n\nconst yAxisTemplate = {\n    name: '',\n    nameLocation: 'end',\n    nameTextStyle: {\n        color: 'rgba(255, 255, 255, 0.5)',\n        fontSize: 12,\n        verticalAlign: 'top',\n        align: 'right',\n        padding: [-10, 0, -10, 0],\n    },\n    type: 'value',\n    splitLine: {\n        show: true,\n        lineStyle: {\n            color: 'rgba(255,255,255,0.1)',\n        },\n    },\n    axisLabel: {\n        margin: 10,\n        fontSize: 12,\n        color: 'rgba(255, 255, 255, 0.5)',\n    },\n    axisTick: {\n        show: false,\n        alignWithLabel: false,\n    },\n    axisLine: {\n        show: false,\n        lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)',\n        },\n    },\n};\n\n$.getJSON(uploadedDataURL, function (uploadedData) {\n    const chartOption = uploadedData[0];\n    const chartData = uploadedData[1];\n    const chartDataByZBDM = {},\n        chartOptionByZBDM = {};\n    const xAxisData = [];\n    let firstZBDM = '';\n    chartData.forEach(function (item, i) {\n        if (i === 0 || item.ZBDM === firstZBDM) {\n            xAxisData.push(item.WD_X);\n            firstZBDM = item.ZBDM;\n        }\n        if (chartDataByZBDM[item.ZBDM]) {\n            chartDataByZBDM[item.ZBDM].push(item);\n        } else {\n            chartDataByZBDM[item.ZBDM] = [item];\n        }\n    });\n    chartOption.forEach(function (item) {\n        chartOptionByZBDM[item.ZBDM] = item;\n    });\n\n    var index = 0,\n        series = [],\n        yAxis = [],\n        seriesType = {\n            bar: 'bar',\n            line: 'line',\n            area: 'bar',\n        };\n    for (let key in chartDataByZBDM) {\n        var zbzs = chartDataByZBDM[key];\n        var ops = chartOptionByZBDM[key];\n        var zbzByWD_X = {};\n        zbzs.forEach(function (item) {\n            zbzByWD_X[item.WD_X] = item;\n        });\n        var yAxisIndex = 0;\n        yAxisTemplate.name = zbzs[0].JLDW || ops.JLDW;\n        if (ops.ZBZ_Y == '1' && !yAxis[1]) {\n            yAxis[1] = yAxisTemplate;\n            yAxisIndex = 1;\n        } else if (ops.ZBZ_Y != '1' && !yAxis[0]) {\n            yAxis[0] = yAxisTemplate;\n        }\n\n        const seriesTemplate = {\n            yAxisIndex: yAxisIndex,\n            //color: colorList[index] + '1.0)',\n            smooth: true,\n            lineStyle: {\n                color: colorList[index] + '1.0)',\n            },\n            symbol: 'none',\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            areaStyle: {\n                color: (function () {\n                    return new echarts.graphic.LinearGradient(\n                        0,\n                        0,\n                        0,\n                        1,\n                        [\n                            {\n                                offset: 0,\n                                color: colorList[index] + '0.5)',\n                            },\n                            {\n                                offset: 1,\n                                color: colorList[index] + '0)',\n                            },\n                        ],\n                        false\n                    );\n                })(),\n                shadowColor: 'rgba(0, 0, 0, 0.1)',\n                shadowBlur: 10,\n            },\n            name: zbzs[0].ZBMC,\n            type: seriesType[ops.XSLX],\n            barWidth: 10,\n            itemStyle: {\n                barBorderRadius: 5,\n                color: (function () {\n                    return new echarts.graphic.LinearGradient(\n                        0,\n                        0,\n                        0,\n                        1,\n                        [\n                            {\n                                offset: 0,\n                                color: barColorList[index][0],\n                            },\n                            {\n                                offset: 1,\n                                color: barColorList[index][1],\n                            },\n                        ],\n                        false\n                    );\n                })(),\n            },\n            data: xAxisData.map(function (x) {\n                var item = zbzByWD_X[x];\n                return {\n                    legend: item.ZBMC,\n                    name: item.WD_X,\n                    value: item.ZBZ,\n                };\n            }),\n        };\n\n        if (ops.XSLX !== 'area') {\n            delete seriesTemplate.areaStyle;\n        }\n\n        series.push(seriesTemplate);\n        index++;\n    }\n\n    option = {\n        backgroundColor: '#000',\n        series: series,\n        xAxis: [\n            {\n                data: xAxisData,\n                type: 'category',\n                axisLabel: {\n                    fontSize: 14,\n                    color: 'rgba(255, 255, 255, 0.5)',\n                },\n                axisTick: {\n                    show: false,\n                    alignWithLabel: false,\n                },\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        color: 'rgba(255, 255, 255, 0.1)',\n                    },\n                },\n            },\n        ],\n        yAxis: yAxis,\n        tooltip: {\n            trigger: 'axis',\n            backgroundColor: 'rgba(2, 30, 114, 1)',\n            textStyle: {\n                fontFamily: 'Microsoft YaHei',\n                fontSize: 16,\n            },\n            axisPointer: {\n                show: true,\n                snap: false,\n                type: 'cross',\n                label: {\n                    show: false,\n                },\n                lineStyle: {\n                    type: 'dashed',\n                    color: '#2FD1FF',\n                    width: 1,\n                },\n                crossStyle: {\n                    opacity: 0,\n                },\n            },\n        },\n        grid: [\n            {\n                left: '5%',\n                top: '10%',\n                right: '5%',\n                bottom: '5%',\n                show: true,\n                containLabel: true,\n                borderWidth: 0,\n            },\n        ],\n    };\n\n    myChart.hideLoading();\n    myChart.setOption(option);\n});\n","html":"","externalScripts":"","updaterUID":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","theme":"","layout":"","viewCount":0,"userName":"凯***宏","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUNbHjCWDW.png?v=1635991265094","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"凯***宏"}}