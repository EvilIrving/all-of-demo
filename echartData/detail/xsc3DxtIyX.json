{"status":0,"data":{"cid":"xsc3DxtIyX","authorUid":"bd-2469886102","authorUserName":"芊***8","title":"全国省市区街道点位","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-12-24T08:18:41.000Z","lastUpdateTime":"2021-12-24T08:20:24.000Z","auth":1,"uid":"bd-2469886102","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-24T08:20:24.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1640333495645-8PBGeVj3a.csv';\n$.ajax({\n    type: 'GET',\n    url: uploadedDataURL,\n    dataType: 'text',\n    success: (csv) => {\n        let jsonData = $.csv.toObjects(csv);\n        let coordData = jsonData.map((item) => {\n            return {\n                name: item.ShortName,\n                value: [+item.Longitude, +item.Latitude, 10],\n            };\n        });\n        option = {\n            backgroundColor: '#9c3022',\n            tooltip: {\n                trigger: 'item',\n            },\n            geo: {\n                map: 'china',\n                label: {\n                    emphasis: {\n                        show: false,\n                    },\n                },\n                roam: true,\n                itemStyle: {\n                    normal: {\n                        color: 'transparent',\n                        borderColor: '#fff',\n                    },\n                },\n                zlevel: 1,\n            },\n            series: [\n                {\n                    type: 'map',\n                    map: 'china',\n                    geoIndex: 0,\n                    // silent: true,\n                    zlevel: 2,\n                    label: {\n                        emphasis: {\n                            show: false,\n                        },\n                    },\n                    roam: true,\n                    itemStyle: {\n                        normal: {\n                            color: '#9c3022',\n                            borderWidth: 1,\n                            borderColor: '#fff',\n                        },\n                        emphasis: {\n                            color: '#000',\n                            borderWidth: 1,\n                            borderColor: '#fff',\n                        },\n                    },\n                },\n                {\n                    name: 'point',\n                    type: 'scatter',\n                    coordinateSystem: 'geo',\n                    zlevel: 3,\n                    data: coordData,\n                    symbolSize: function (val) {\n                        return val[2] / 4;\n                    },\n                    label: {\n                        normal: {\n                            formatter: '{b}',\n                            position: 'right',\n\n                            show: false,\n                            textStyle: {\n                                color: '#fff',\n                                fontSize: 20,\n                            },\n                        },\n                        emphasis: {\n                            show: true,\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            color: 'rgba(255, 255, 255, 0.75)',\n                            opacity: 1,\n                        },\n                    },\n                    // animationDelay: function (idx) {\n                    //     return idx * 10;\n                    // },\n                },\n            ],\n            // animationDelayUpdate: function (idx) {\n            //     return idx * 100;\n            // },\n        };\n\n        myChart.setOption(option);\n    },\n    error: (e) => {\n        reject([]);\n    },\n});\n\nfunction chartClickEvent(params) {\n    var name = params.data.name;\n    var seriesModel = myChart.getModel().getSeriesByIndex(0);\n    var point = seriesModel.coordinateSystem._nameCoordMap['_ec_' + name];\n    option.series[0].center = point; //[108.55,34.32]\n    option.series[0].zoom = 5;\n\n    option.geo.center = point;\n    option.geo.zoom = 5;\n    myChart.setOption(option);\n}\n\nfunction panelClickEvent() {\n    option.series[0].center = null; //[108.55,34.32]\n    option.series[0].zoom = null;\n\n    option.geo.center = null;\n    option.geo.zoom = null;\n    myChart.setOption(option);\n}\n\nmyChart.on('click', chartClickEvent);\n\nmyChart.on('mouseover', function () {\n    myChart.on('click', chartClickEvent);\n    $('#chart-panel').off('click');\n});\n\nmyChart.on('mouseout', function () {\n    myChart.off('click', chartClickEvent);\n    $('#chart-panel').on('click', panelClickEvent);\n});\n","html":"","externalScripts":"/dep/echarts/map/js/china.js,/asset/get/s/data-1640332004467-rgAUow6fh.js","updaterUID":"bd-2469886102","theme":"","layout":"","viewCount":0,"userName":"芊***8","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xsc3DxtIyX.png?v=1640334024816","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","tooltip"],"customTags":["区","市","省","街道"],"updaterUserName":"芊***8"}}