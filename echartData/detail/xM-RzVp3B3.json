{"status":0,"data":{"cid":"xM-RzVp3B3","authorUid":"obd-o-bzamOyKisbMH8qxkQTGLajxRaBXAI","authorUserName":"Y***d","title":"堆叠柱状图 - 动态变化","description":"个人收藏，为工作使用","latestVersion":3,"alwaysLatest":0,"createTime":"2021-06-30T07:05:48.000Z","lastUpdateTime":"2021-11-04T12:33:32.000Z","auth":1,"uid":"obd-o-bzamOyKisbMH8qxkQTGLajxRaBXAI","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.1.2","versionCreateTime":"2021-11-04T12:33:32.000Z","code":"option = {\n    color: ['#0FD64F', '#F7B708', '#ED5D5D'],\n    backgroundColor: '#000',\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow',\n        },\n    },\n    grid: {\n        top: '5%',\n        left: 104,\n        right: 112,\n        bottom: '3%',\n        containLabel: false,\n    },\n    xAxis: [\n        {\n            type: 'value',\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n            },\n            splitLine: {\n                show: false,\n            },\n        },\n    ],\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true, //是否是反向坐标轴\n            axisTick: 'none',\n            axisLine: 'none',\n            axisLabel: {\n                color: '#FFF',\n                fontSize: '16',\n                formatter: function (value) {\n                    const maxlength = 7;\n                    if (value.length > maxlength) {\n                        return value.substring(0, maxlength - 1) + '...';\n                    } else {\n                        return value;\n                    }\n                },\n            },\n            data: [\n                '1银川市',\n                '2燃煤锅炉二氧化硫燃烧',\n                '3燃煤锅炉烟粉尘达',\n                '4燃煤锅炉氮氧化物',\n                '5工业烟粉尘达标',\n                '6工业烟粉尘达标',\n                '7散煤“双替代”项目',\n            ],\n        },\n        {\n            type: 'category',\n            inverse: true,\n            // inside: true,\n            axisTick: 'none',\n            axisLine: 'none',\n            data: [110, 2, 3, 4, 5, 7, 5],\n            axisLabel: {\n                formatter: function (value, i) {\n                    const arr = [`{a|${value}}`, `{b|34%}`];\n                    return arr.join('');\n                },\n                rich: {\n                    a: {\n                        fontSize: 16,\n                        width: 48,\n                        height: 20,\n                        color: '#FFF',\n                        align: 'center',\n                        // borderWidth: 1,\n                        // borderColor: 'red'\n                    },\n                    b: {\n                        fontSize: 16,\n                        width: 48,\n                        color: '#FFF',\n                        align: 'center',\n                    },\n                },\n            },\n        },\n    ],\n    // 滑动条\n    dataZoom: [\n        {\n            // realtime : true,\n            yAxisIndex: [0, 1], // 这里是从X轴的0刻度开始\n            show: false, // 是否显示滑动条，不影响使用\n            type: 'slider', // 这个 dataZoom 组件是slider型\n            startValue: 0, // 从头开始\n            endValue: 4, // 一次性展示个数\n        },\n    ],\n    series: [\n        {\n            name: '已完成',\n            type: 'bar',\n            stack: '总量',\n            barWidth: 20,\n            showBackground: true,\n            backgroundStyle: {\n                color: 'rgba(175, 235, 255, 0.2)',\n            },\n            data: [32, 30, 31, 34, 39, 33, 32],\n        },\n        {\n            name: '在建',\n            type: 'bar',\n            stack: '总量',\n            barWidth: 20,\n            data: [12, 13, 11, 13, 9, 23, 20],\n        },\n        {\n            name: '未动工',\n            type: 'bar',\n            stack: '总量',\n            barWidth: 20,\n            data: [22, 18, 19, 24, 29, 33, 30],\n        },\n        {\n            name: '',\n            type: 'bar',\n            barWidth: 20,\n            barGap: '-100%',\n        },\n    ],\n};\n\nsetInterval(function() {\n    // 通过动态改变数据实现不停循环播放\n    let y1 = option.yAxis[0].data,\n        y2 = option.yAxis[1].data,\n        complate = option.series[0].data,\n        underHandling = option.series[1].data,\n        notStarted = option.series[2].data;\n    y1.push(y1.shift());\n    y2.push(y2.shift());\n    complate.push(complate.shift());\n    underHandling.push(underHandling.shift());\n    notStarted.push(notStarted.shift());\n    myChart.setOption(option);\n    // 通过改变dataZoom属性实现播放\n    // if (option.dataZoom[0].endValue === 7) {\n    //     option.dataZoom[0].endValue = 6;\n    //     option.dataZoom[0].startValue = 0;\n    // } else {\n    //     option.dataZoom[0].endValue = option.dataZoom[0].endValue + 1;\n    //     option.dataZoom[0].startValue = option.dataZoom[0].startValue + 1;\n    // };\n    // myChart.setOption(option);\n}, 2000);\n","html":"","externalScripts":"","updaterUID":"obd-o-bzamOyKisbMH8qxkQTGLajxRaBXAI","theme":"default","layout":"","viewCount":0,"userName":"Y***d","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xM-RzVp3B3.png?v=1636029212803","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"Y***d"}}