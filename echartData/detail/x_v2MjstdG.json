{"status":0,"data":{"cid":"x_v2MjstdG","authorUid":"obd-otrTmdlPtbfrzTNt5DDKQLVfvvtoa8t","authorUserName":"唧***楠","title":"地磅看板","description":"","latestVersion":3,"alwaysLatest":0,"createTime":"2021-08-13T08:31:46.000Z","lastUpdateTime":"2021-08-13T09:36:36.000Z","auth":2,"uid":"obd-otrTmdlPtbfrzTNt5DDKQLVfvvtoa8t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-13T09:36:36.000Z","code":"let bgColor = \"#040811\";\r\nlet color = [\r\n    \"#0090FF\",\r\n    \"#36CE9E\",\r\n    \"#FFC005\",\r\n    \"#FF515A\",\r\n    \"#8B5CFF\",\r\n    \"#00CA69\"\r\n];\r\n\r\n\r\nlet echartData = [{\r\n        name: \"4/1\",\r\n        value1: 100,\r\n        value2: 233\r\n    },\r\n    {\r\n        name: \"4/2\",\r\n        value1: 138,\r\n        value2: 233\r\n    },\r\n    {\r\n        name: \"4/3\",\r\n        value1: 350,\r\n        value2: 200\r\n    },\r\n    {\r\n        name: \"4/4\",\r\n        value1: 173,\r\n        value2: 180\r\n    },\r\n    {\r\n        name: \"4/5\",\r\n        value1: 180,\r\n        value2: 199\r\n    },\r\n    {\r\n        name: \"4/6\",\r\n        value1: 150,\r\n        value2: 233\r\n    },\r\n    {\r\n        name: \"4/7\",\r\n        value1: 180,\r\n        value2: 210\r\n    },\r\n];\r\n\r\n\r\nlet legendItem = ['入场量','入场车次'];\r\n\r\nlet xAxisData = echartData.map(v => v.name);\r\n//  [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"]\r\n//let yAxisData1 = echartData.map(v => v.value1);\r\n// [100, 138, 350, 173, 180, 150, 180, 230]\r\n//let yAxisData2 = echartData.map(v => v.value2);\r\n// [233, 233, 200, 180, 199, 233, 210, 180]\r\n\r\nlet yAxisData1 = [100, 138, 350, 173, 180, 150, 180, 230];\r\nlet yAxisData2 = [233, 233, 200, 180, 199, 233, 210, 180];\r\nlet acount = Array.from(new Set(yAxisData1.concat(yAxisData2)))\r\nconsole.log('acount',acount)\r\nconst hexToRgba = (hex, opacity) => {\r\n    let rgbaColor = \"\";\r\n    let reg = /^#[\\da-f]{6}$/i;\r\n    if (reg.test(hex)) {\r\n        rgbaColor = `rgba(${parseInt(\"0x\" + hex.slice(1, 3))},${parseInt(\r\n      \"0x\" + hex.slice(3, 5)\r\n    )},${parseInt(\"0x\" + hex.slice(5, 7))},${opacity})`;\r\n    }\r\n    return rgbaColor;\r\n}\r\n\r\n//计算最大值\r\nfunction set_data( arr_data )\r\n{\r\n    var y_min = arr_data[0];\r\n    var y_max = arr_data[acount.length-1];        \r\n    for( var n = 0; n < arr_data.length; n++ )\r\n    {\r\n            if( arr_data[ n ] > y_max )\r\n                    y_max = arr_data[ n ];\r\n            else if( arr_data[ n ] < y_min )\r\n                    y_min = arr_data[ n ];\r\n    }\r\n    y_max = Math.ceil( y_max / 10 ) * 10;\r\n    y_min = Math.floor( y_min / 10 ) * 10;\r\n    \r\n    return [y_min,y_max]\r\n}\r\nconsole.log(set_data(acount))\r\noption = {\r\n    backgroundColor: bgColor,\r\n    color: color,\r\n    legend: {\r\n      center: true,\r\n      top: 10,\r\n      data: legendItem,\r\n      textStyle: {\r\n            color: '#00DEFF',\r\n      },\r\n    },\r\n    // calculable: true,\r\n    tooltip: {\r\n        trigger: \"axis\",\r\n        formatter: function(params) {\r\n            let html = '';\r\n            params.forEach(v => {\r\n                // console.log(v)\r\n                html += `<div style=\"color: #666;font-size: 14px;line-height: 24px\">\r\n                <span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${color[v.componentIndex]};\"></span>\r\n                ${v.seriesName}.${v.name}\r\n                <span style=\"color:${color[v.componentIndex]};font-weight:700;font-size: 18px\">${v.value}</span>\r\n                ${v.seriesName == \"入场车次\" ? '辆' :'t'}`;\r\n            })\r\n            \r\n    \r\n\r\n            return html\r\n        },\r\n        extraCssText: 'background: #fff; border-radius: 0;box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);color: #333;',\r\n        // axisPointer: {\r\n        //     type: 'shadow',\r\n        //     shadowStyle: {\r\n        //         // color: '#ffffff',\r\n        //         shadowColor: 'rgba(225,225,225,1)',\r\n        //         shadowBlur: 5\r\n        //     }\r\n        // }\r\n    },\r\n    grid: {\r\n        top: 100,\r\n        containLabel: true\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#0696f9',\r\n            }\r\n        },\r\n        axisLabel: {\r\n            inside: false,\r\n            textStyle: {\r\n                color: 'rgba(255, 255, 255,0.7)', // x轴颜色\r\n                fontWeight: 'normal',\r\n                fontSize: '14',\r\n                lineHeight: 22\r\n            }\r\n\r\n        },\r\n       \r\n        data: xAxisData\r\n    }],\r\n    yAxis: [\r\n        {\r\n            type: \"value\",\r\n            name: '(t)',\r\n            splitNumber: 5,\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: \"rgba(255, 255, 255,0.7)\",\r\n                    padding:[0,20,0,0],\r\n                }\r\n            },\r\n            min:set_data(acount)[0],\r\n            max:set_data(acount)[1],\r\n            nameTextStyle: {\r\n                color: \"rgba(255, 255, 255,0.7)\",\r\n                fontSize: 12,\r\n                lineHeight: 40,\r\n                padding:[0,0,0,-70],\r\n                // width:20,\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                show: false,\r\n            },\r\n            axisTick: {\r\n                show: true,\r\n                length:10,\r\n                lineStyle:{\r\n                    color:color[0],\r\n                    width:3,\r\n                    \r\n                }\r\n            }\r\n        },\r\n        {\r\n            type: \"value\",\r\n            name: '',\r\n            splitNumber: 6,\r\n            position: 'right',\r\n            min:set_data(acount)[0],\r\n            max:set_data(acount)[1],\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: \"rgba(255, 255, 255,0.7)\",\r\n                    padding:[0,0,0,20],\r\n                }\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                show: false,\r\n            },\r\n            axisTick: {\r\n                show: true,\r\n                length:10,\r\n                lineStyle:{\r\n                    color:color[1],\r\n                    width:3,\r\n                    \r\n                }\r\n            }\r\n        },\r\n  \r\n    ],\r\n    series: [\r\n    {\r\n        name: legendItem[0],\r\n        type: \"line\",\r\n        smooth: true, //是否平滑\r\n        // showSymbol: false,/\r\n        symbolSize: 8,\r\n        zlevel: 3,\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[0],\r\n                shadowBlur: 3,\r\n                shadowColor: hexToRgba(color[0], 0.5),\r\n                shadowOffsetY: 8\r\n            }\r\n        },\r\n        areaStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    1,\r\n                    [{\r\n                            offset: 0,\r\n                            color: hexToRgba(color[0], 0.3)\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: hexToRgba(color[0], 0.1)\r\n                        }\r\n                    ],\r\n                    false\r\n                ),\r\n                shadowColor: hexToRgba(color[0], 0.1),\r\n                shadowBlur: 10\r\n            }\r\n        },\r\n        data: yAxisData1\r\n    }, {\r\n        name: legendItem[1],\r\n        type: \"line\",\r\n        smooth: true,\r\n        // showSymbol: false,\r\n        symbolSize: 8,\r\n        yAxisIndex: 1,\r\n        zlevel: 3,\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[1],\r\n                shadowBlur: 3,\r\n                shadowColor: hexToRgba(color[1], 0.5),\r\n                shadowOffsetY: 8\r\n            }\r\n        },\r\n        areaStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    1,\r\n                    [{\r\n                            offset: 0,\r\n                            color: hexToRgba(color[1], 0.3)\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color: hexToRgba(color[1], 0.1)\r\n                        }\r\n                    ],\r\n                    false\r\n                ),\r\n                shadowColor: hexToRgba(color[1], 0.1),\r\n                shadowBlur: 10\r\n            }\r\n        },\r\n        data: yAxisData2\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-otrTmdlPtbfrzTNt5DDKQLVfvvtoa8t","theme":"","layout":"","viewCount":0,"userName":"唧***楠","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_v2MjstdG.png?v=1628847396256","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","tooltip"],"customTags":[],"updaterUserName":"唧***楠"}}