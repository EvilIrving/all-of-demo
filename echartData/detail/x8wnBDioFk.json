{"status":0,"data":{"cid":"x8wnBDioFk","authorUid":"bd-2302755999","authorUserName":"159*****209","title":"模拟迁徙","description":"数据纯属虚构","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-10T10:18:43.000Z","lastUpdateTime":"2019-03-10T10:18:43.000Z","auth":2,"uid":"bd-2302755999","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-10T10:18:43.000Z","code":"var geoCoordMap = {};\nvar features = echarts.getMap('china').geoJson.features;\nfeatures.map(function(f) {\n    var prop = f.properties;\n    geoCoordMap[prop.name] = prop.cp;\n});\nconsole.log(geoCoordMap);\nvar BJData = [\n    [{\n        name: '北京'\n    }, {\n        name: '上海',\n        value: 95\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '广州',\n        value: 90\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '大连',\n        value: 80\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '南宁',\n        value: 70\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '南昌',\n        value: 60\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '拉萨',\n        value: 50\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '长春',\n        value: 40\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '包头',\n        value: 30\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '重庆',\n        value: 20\n    }],\n    [{\n        name: '北京'\n    }, {\n        name: '常州',\n        value: 10\n    }]\n];\n\nvar SHData = [\n    [{\n        name: '上海'\n    }, {\n        name: '包头',\n        value: 95\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '昆明',\n        value: 90\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '广州',\n        value: 80\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '郑州',\n        value: 70\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '长春',\n        value: 60\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '重庆',\n        value: 50\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '长沙',\n        value: 40\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '北京',\n        value: 30\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '丹东',\n        value: 20\n    }],\n    [{\n        name: '上海'\n    }, {\n        name: '大连',\n        value: 10\n    }]\n];\n\nvar GZData = [\n    [{\n        name: '广州'\n    }, {\n        name: '福州',\n        value: 95\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '太原',\n        value: 90\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '长春',\n        value: 80\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '重庆',\n        value: 70\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '西安',\n        value: 60\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '成都',\n        value: 50\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '常州',\n        value: 40\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '北京',\n        value: 30\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '北海',\n        value: 20\n    }],\n    [{\n        name: '广州'\n    }, {\n        name: '海口',\n        value: 10\n    }]\n];\n\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (fromCoord && toCoord) {\n            res.push({\n                fromName: dataItem[0].name,\n                toName: dataItem[1].name,\n                coords: [fromCoord, toCoord]\n            });\n        }\n    }\n    return res;\n};\n\n\nvar color = ['#a6c84c', '#ffa022', '#46bee9'];\nvar series = [];\n[\n    ['北京', BJData],\n    ['上海', SHData],\n    ['广州', GZData]\n].forEach(function(item, i) {\n    var points = [];\n    item[1].map(function(dataItem) {\n        var cp = geoCoordMap[dataItem[1].name];\n        if (cp) {\n            points.push({\n                name: dataItem[1].name,\n                value: cp.concat([dataItem[1].value])\n            })\n        }\n    });\n\n    series.push({\n        name: item[0] + ' Top10',\n        type: 'lines',\n        zlevel: 1,\n        effect: {\n            show: true,\n            period: 6,\n            trailLength: 0.7,\n            color: '#fff',\n            symbolSize: 3\n        },\n        lineStyle: {\n            normal: {\n                color: color[i],\n                width: 0,\n                curveness: 0.2\n            }\n        },\n        data: convertData(item[1])\n    }, {\n        name: item[0] + ' Top10',\n        type: 'lines',\n        zlevel: 2,\n        symbol: ['none', 'arrow'],\n        symbolSize: 10,\n        effect: {\n            show: true,\n            period: 6,\n            trailLength: 0,\n            symbol: planePath,\n            symbolSize: 15\n        },\n        lineStyle: {\n            normal: {\n                color: color[i],\n                width: 1,\n                opacity: 0.6,\n                curveness: 0.2\n            }\n        },\n        data: convertData(item[1])\n    }, {\n        name: item[0] + ' Top10',\n        type: 'effectScatter',\n        coordinateSystem: 'geo',\n        zlevel: 2,\n        rippleEffect: {\n            brushType: 'stroke'\n        },\n        label: {\n            normal: {\n                show: true,\n                position: 'right',\n                formatter: '{b}'\n            }\n        },\n        symbolSize: function(val) {\n            return val[2] / 8;\n        },\n        itemStyle: {\n            normal: {\n                color: color[i]\n            }\n        },\n        data: points\n    });\n});\n// series = [];\noption = {\n    backgroundColor: '#404a59',\n    title: {\n        text: '模拟迁徙',\n        subtext: '数据纯属虚构',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    tooltip: {\n        trigger: 'item'\n    },\n    legend: {\n        orient: 'vertical',\n        top: 'bottom',\n        left: 'right',\n        data: ['北京 Top10', '上海 Top10', '广州 Top10'],\n        textStyle: {\n            color: '#fff'\n        },\n        selectedMode: 'single'\n    },\n    geo: {\n        map: 'china',\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true,\n        itemStyle: {\n            normal: {\n                areaColor: '#323c48',\n                borderColor: '#404a59'\n            },\n            emphasis: {\n                areaColor: '#2a333d'\n            }\n        }\n    },\n    series: series\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-2302755999","theme":"","layout":"","viewCount":745,"userName":"159*****209","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8wnBDioFk.png?v=1552213123517","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"159*****209"}}