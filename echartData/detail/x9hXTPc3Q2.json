{"status":0,"data":{"cid":"x9hXTPc3Q2","authorUid":"obd-oCjh8gpbVG4c9jqb8sCoXOI8tFXTe31","authorUserName":"羊***男","title":"锤石一只企鹅狗","description":"ajax get获取png图片加载到echarts","latestVersion":6,"alwaysLatest":1,"createTime":"2020-08-08T18:11:30.000Z","lastUpdateTime":"2020-08-08T18:11:30.000Z","auth":2,"uid":"obd-oCjh8gpbVG4c9jqb8sCoXOI8tFXTe31","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-28T09:19:30.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1596909375249-HTFHsoBaL.png\";\n\n\nconst scatter = {\n    name: 'picture',\n    type: 'scatter3D',\n    symbolSize: 1,\n    data: []\n}\n\n\n\nconst scatter1 = {\n    name: 'picture',\n    type: 'scatter3D',\n    symbolSize: 1,\n    data: []\n}\n\n// 指定图表的配置项和数据\noption = {\n    title: {\n        text: '锤石B站一只企鹅狗',\n        left: 'center'\n    },\n    xAxis3D: {\n        type: 'value'\n    },\n    yAxis3D: {\n        type: 'value'\n    },\n    zAxis3D: {\n        type: 'value'\n    },\n    grid3D: {\n        viewControl: {\n            autoRotate: true\n        }\n    },\n    series: [scatter,scatter1]\n};\n\nmyChart.setOption(option)\n\naxios({\n    method: 'GET',\n    url: uploadedDataURL,\n    responseType: 'arraybuffer'\n}).then(({\n    data\n}) => {\n    console.log('wer')\n            let img = UPNG.decode(data)\n            let frames = UPNG.toRGBA8(img)\n            let rgba = new Uint8Array(frames[0])\n\n            for (let z = 0; z < img.height; z++) {\n                // let options = {\n                //     seriesIndex:0,\n                //     data:[]\n                // }\n                for (let x = 0; x < img.width; x++) {\n                    let index = ((img.height - z - 1) * img.width + x) << 2\n                    let y = rgba[index + 3]\n                    y && scatter.data.push({\n                        value: [x, y, z],\n                        itemStyle: {\n                            color: `rgba(${rgba.slice(index, index + 3)},${((rgba[index + 3]) * 100 / 0xff).toFixed(0)}%)`\n                        }\n                    })\n                    !y && scatter1.data.push({\n                        value: [x, y, z],\n                        itemStyle: {\n                            color: `rgb(${rgba.slice(index, index + 3)})`\n                        }\n                    })\n                }\n            }\n            myChart.setOption(option)\n})\n\n","html":"","externalScripts":"https://unpkg.com/pako/dist/pako.min.js,https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js,https://unpkg.com/axios/dist/axios.min.js,https://cdn.bootcdn.net/ajax/libs/upng-js/2.1.0/UPNG.min.js","updaterUID":"obd-oCjh8gpbVG4c9jqb8sCoXOI8tFXTe31","theme":"","layout":"","viewCount":6165,"userName":"羊***男","commentCount":0,"starCount":11,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x9hXTPc3Q2.png?v=1596910291089","isCustomThumbnail":1,"builtinTags":["category-work","grid3D","series-scatter3D","title"],"customTags":["png","图片"],"updaterUserName":"羊***男"}}