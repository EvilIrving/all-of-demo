{"status":0,"data":{"cid":"xHOSt92bvS","authorUid":"obd-o-1erNtsEb21nH2ux-_MZtHbxwwl6A1","authorUserName":"he...0@gmail.com","title":"阶梯线型图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-02T10:48:23.000Z","lastUpdateTime":"2020-12-02T10:48:23.000Z","auth":2,"uid":"obd-o-1erNtsEb21nH2ux-_MZtHbxwwl6A1","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-02T10:48:23.000Z","code":"var rawData = [\r\n    [2002, 14, 21, 25, 21, 26, 32, 27, 20, 10, 11, 5, 5],\r\n    [2003, 18, 24, 28, 24, 33, 37, 30, 25, 13, 14, 6, 6],\r\n    [2004, 22, 31, 36, 28, 37, 43, 35, 30, 13, 13, 7, 7],\r\n    [2005, 25, 32, 38, 34, 39, 48, 38, 29, 14, 14, 8, 8],\r\n    [2006, 29, 38, 47, 33, 44, 57, 41, 39, 16, 16, 9, 8],\r\n    [2007, 29, 35, 49, 34, 43, 57, 41, 37, 20, 17, 9, 10],\r\n    [2008, 22, 32, 37, 30, 35, 44, 38, 31, 16, 17, 8, 7],\r\n    [2009, 25, 34, 41, 33, 39, 47, 44, 32, 17, 17, 9, 8],\r\n    [2010, 26, 35, 46, 40, 47, 61, 47, 41, 20, 18, 9, 10],\r\n    [2011, 29, 39, 55, 38, 55, 67, 53, 41, 19, 20, 11, 11],\r\n    [2012, 38, 48, 60, 49, 57, 79, 62, 54, 26, 26, 13, 11],\r\n]\r\n\r\n//总共多少年，用来计算每个月的平均宽度\r\nconst yearCount = rawData.length\r\n\r\nfunction renderTrendItem(params, api) {\r\n    //第几个月\r\n    var monthIndex = api.value(0)\r\n\r\n    //每个月的平均宽度\r\n    var unitBandWidth = ((api.size([0, 0])[0]) / (yearCount - 1) )\r\n\r\n    var points = echarts.util.map(rawData, function(entry, index) {\r\n        //该月 某年的值\r\n        var value = rawData[index][monthIndex + 1]\r\n\r\n        //换算得出坐标轴中的X/Y值\r\n        var point = api.coord([monthIndex, value])\r\n\r\n        //由于是同一个月的数据，X轴是相同的，需要计算和添加上X轴的偏移\r\n        point[0] += unitBandWidth * (index - yearCount / 2)\r\n\r\n        return point\r\n    })\r\n\r\n\r\n    //console.log(points);\r\n\r\n    const stepPoints = [];\r\n\r\n    const baseIndex = 0;\r\n    const stepPt = [];\r\n    const nextPt = [];\r\n    const pt = [];\r\n\r\n    \r\n    if(monthIndex !== 0 /** 第一个月，连接上一个月末尾 */){\r\n        //该月 某年的值\r\n        var value = rawData[rawData.length-1][monthIndex]\r\n        \r\n        //换算得出坐标轴中的X/Y值\r\n        var point = api.coord([monthIndex-1, value])\r\n\r\n        //由于是同一个月的数据，X轴是相同的，需要计算和添加上X轴的偏移\r\n        point[0] += unitBandWidth * 4.5\r\n        \r\n        stepPoints.push(point);\r\n        \r\n    }\r\n    for (let i = 0; i < points.length; i++) {\r\n        const pt1 = points[i];\r\n        const pt2 = points[i + 1];\r\n        stepPoints.push(pt1);\r\n\r\n        if (pt2) {\r\n            stepPoints.push([pt2[0], pt1[1]]);\r\n        }\r\n    }\r\n\r\n\r\n    console.log(stepPoints);\r\n\r\n    return {\r\n        type: \"group\",\r\n        children: [{\r\n            //原生图形，非series.type\r\n            type: 'polyline',\r\n            shape: {\r\n                points: stepPoints,\r\n            },\r\n            style: api.style({\r\n                fill: null,\r\n                stroke: api.visual('color'),\r\n            }),\r\n        }]\r\n    }\r\n}\r\n\r\noption = {\r\n    dataZoom: [{\r\n            type: 'slider',\r\n            showDataShadow: false,\r\n            bottom: 10,\r\n            height: 20,\r\n            borderColor: 'transparent',\r\n            backgroundColor: '#e2e2e2',\r\n            handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\r\n            handleSize: 20,\r\n            handleStyle: {\r\n                shadowBlur: 6,\r\n                shadowOffsetX: 1,\r\n                shadowOffsetY: 2,\r\n                shadowColor: '#aaa',\r\n            },\r\n            labelFormatter: '',\r\n        },\r\n        {\r\n            type: 'inside',\r\n        },\r\n    ],\r\n\r\n    tooltip: {},\r\n    xAxis: {\r\n        // x轴非数值型，非数值型不会缩略\r\n        data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\r\n    },\r\n    yAxis: {\r\n        max: 80,\r\n    },\r\n    series: [{\r\n        type: 'custom',\r\n\r\n        // 自定义渲染函数\r\n        // data有多少行，则调用多少次，每次传入的是data的一行\r\n        renderItem: renderTrendItem,\r\n\r\n        encode: {\r\n            x: 0,\r\n            //假装有y轴，实际用途是自定计算y轴的最大值\r\n            y: 0,\r\n        },\r\n\r\n        data: [\r\n            //月份\r\n            [0],\r\n            [1],\r\n            [2],\r\n            [3],\r\n            [4],\r\n            [5],\r\n            [6],\r\n            [7],\r\n            [8],\r\n            [9],\r\n            [10],\r\n            [11],\r\n        ],\r\n    }, ],\r\n}","html":"","externalScripts":"","updaterUID":"obd-o-1erNtsEb21nH2ux-_MZtHbxwwl6A1","theme":"","layout":"","viewCount":36,"userName":"he...0@gmail.com","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHOSt92bvS.png?v=1606906103701","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-custom","tooltip"],"customTags":[],"updaterUserName":"he...0@gmail.com"}}