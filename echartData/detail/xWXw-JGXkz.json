{"status":0,"data":{"cid":"xWXw-JGXkz","authorUid":"bd-2302755999","authorUserName":"159*****209","title":"tree环","description":"tree环","latestVersion":1,"alwaysLatest":1,"createTime":"2019-02-19T09:38:32.000Z","lastUpdateTime":"2019-02-19T09:38:32.000Z","auth":2,"uid":"bd-2302755999","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-02-19T09:38:32.000Z","code":"var data = [{\n    \"name\": \"主机信息\",\n    \"children\": [{\n        \"name\": \"主机总数\",\n        \"children\": [{\n            \"name\": \"linux\",\n            \"value\": 50\n        }, {\n            \"name\": \"unix\",\n            \"value\": 21\n        }, {\n            \"name\": \"windows\",\n            \"value\": 12\n        }]\n    }]\n}, {\n    \"name\": \"人脸识别\",\n    \"children\": [{\n        \"name\": \"在线用户数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 4\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 2\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"布控数\",\n        \"children\": [{\n            \"name\": \"已撤控\",\n            \"value\": 1\n        }, {\n            \"name\": \"布控中\",\n            \"value\": 4\n        }, {\n            \"name\": \"布控到期\",\n            \"value\": 1\n        }, {\n            \"name\": \"未布控\",\n            \"value\": 1\n        }]\n    }, {\n        \"name\": \"用户数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 10\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 3\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 1\n        }]\n    }]\n}, {\n    \"name\": \"基础平台\",\n    \"children\": [{\n        \"name\": \"在线用户数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 5\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 2\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"用户总数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 12\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 3\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"设备在线数\",\n        \"children\": [{\n            \"name\": \"一类点\",\n            \"value\": 9\n        }, {\n            \"name\": \"二类点\",\n            \"value\": 5\n        }, {\n            \"name\": \"外接单位\",\n            \"value\": 1\n        }]\n    }, {\n        \"name\": \"设备总数\",\n        \"children\": [{\n            \"name\": \"一类点\",\n            \"value\": 9\n        }, {\n            \"name\": \"二类点\",\n            \"value\": 5\n        }, {\n            \"name\": \"外接单位\",\n            \"value\": 2\n        }]\n    }]\n}, {\n    \"name\": \"安全平台\",\n    \"children\": [{\n        \"name\": \"在线数\",\n        \"value\": 7\n    }, {\n        \"name\": \"安全边界 \",\n        \"value\": 107\n    }, {\n        \"name\": \"用户数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 12\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 3\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"资产统计\",\n        \"value\": 5818\n    }]\n}, {\n    \"name\": \"容器信息\",\n    \"children\": [{\n        \"name\": \"容器总数\",\n        \"children\": [{\n            \"name\": \"test\",\n            \"value\": 7\n        }, {\n            \"name\": \"多维视频感知平台\",\n            \"value\": 4\n        }]\n    }]\n}, {\n    \"name\": \"移动猎鹰\",\n    \"children\": [{\n        \"name\": \"建群数\",\n        \"value\": 304\n    }, {\n        \"name\": \"查人数\",\n        \"value\": 8403\n    }, {\n        \"name\": \"查车数\",\n        \"value\": 8645\n    }, {\n        \"name\": \"活跃数\",\n        \"value\": 14949\n    }, {\n        \"name\": \"用户总数\",\n        \"children\": [{\n            \"name\": \"在线数\",\n            \"value\": 7\n        }, {\n            \"name\": \"离线数\",\n            \"value\": 7\n        }]\n    }, {\n        \"name\": \"留存率\",\n        \"value\": 35.26\n    }, {\n        \"name\": \"驻车采集数\",\n        \"value\": 2930\n    }]\n}, {\n    \"name\": \"视频作战\",\n    \"children\": [{\n        \"name\": \"今年新增案件数\",\n        \"children\": [{\n            \"name\": \"侵犯公民人身权利民主权利案\",\n            \"value\": 0\n        }, {\n            \"name\": \"侵犯财产案\",\n            \"value\": 0\n        }, {\n            \"name\": \"其他盗窃\",\n            \"value\": 0\n        }, {\n            \"name\": \"军人违反职责案\",\n            \"value\": 0\n        }, {\n            \"name\": \"危害公共安全案\",\n            \"value\": 0\n        }, {\n            \"name\": \"危害国家安全案\",\n            \"value\": 0\n        }, {\n            \"name\": \"危害国防利益案\",\n            \"value\": 0\n        }, {\n            \"name\": \"妨害社会管理秩序案\",\n            \"value\": 0\n        }, {\n            \"name\": \"渎职案\",\n            \"value\": 0\n        }, {\n            \"name\": \"破坏社会主义市场经济秩序案\",\n            \"value\": 0\n        }, {\n            \"name\": \"贪污贿赂案\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"去年新增案件数\",\n        \"children\": [{\n            \"name\": \"侵犯公民人身权利民主权利案\",\n            \"value\": 0\n        }, {\n            \"name\": \"侵犯财产案\",\n            \"value\": 1\n        }, {\n            \"name\": \"其他盗窃\",\n            \"value\": 3\n        }, {\n            \"name\": \"军人违反职责案\",\n            \"value\": 1\n        }, {\n            \"name\": \"危害公共安全案\",\n            \"value\": 0\n        }, {\n            \"name\": \"危害国家安全案\",\n            \"value\": 0\n        }, {\n            \"name\": \"危害国防利益案\",\n            \"value\": 0\n        }, {\n            \"name\": \"妨害社会管理秩序案\",\n            \"value\": 5\n        }, {\n            \"name\": \"渎职案\",\n            \"value\": 2\n        }, {\n            \"name\": \"破坏社会主义市场经济秩序案\",\n            \"value\": 1\n        }, {\n            \"name\": \"贪污贿赂案\",\n            \"value\": 2\n        }]\n    }, {\n        \"name\": \"在线用户数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 4\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 2\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 0\n        }]\n    }, {\n        \"name\": \"用户总数\",\n        \"children\": [{\n            \"name\": \"一次\",\n            \"value\": 10\n        }, {\n            \"name\": \"三次\",\n            \"value\": 0\n        }, {\n            \"name\": \"二次\",\n            \"value\": 3\n        }, {\n            \"name\": \"五次以上\",\n            \"value\": 0\n        }, {\n            \"name\": \"四次\",\n            \"value\": 0\n        }, {\n            \"name\": \"未使用\",\n            \"value\": 1\n        }]\n    }]\n}, {\n    \"name\": \"解析中心\",\n    \"children\": [{\n        \"name\": \"布控任务总数\",\n        \"children\": [{\n            \"name\": \"1\",\n            \"value\": 0\n        }, {\n            \"name\": \"2\",\n            \"value\": 0\n        }, {\n            \"name\": \"3\",\n            \"value\": 0\n        }]\n    }]\n}, {\n    \"name\": \"运维平台\",\n    \"children\": [{\n        \"name\": \"交换机\",\n        \"children\": [{\n            \"name\": \"一类接入\",\n            \"value\": 1\n        }, {\n            \"name\": \"一类核心\",\n            \"value\": 9\n        }, {\n            \"name\": \"一类核心\",\n            \"value\": 7\n        }, {\n            \"name\": \"一类汇聚\",\n            \"value\": 2\n        }, {\n            \"name\": \"一类汇聚\",\n            \"value\": 1\n        }, {\n            \"name\": \"二类接入\",\n            \"value\": 6\n        }, {\n            \"name\": \"二类核心\",\n            \"value\": 1\n        }, {\n            \"name\": \"二类核心\",\n            \"value\": 1\n        }, {\n            \"name\": \"二类汇聚\",\n            \"value\": 3\n        }]\n    }, {\n        \"name\": \"视频设备\",\n        \"children\": [{\n            \"name\": \"不满24小时\",\n            \"value\": 23\n        }, {\n            \"name\": \"完全没录像\",\n            \"value\": 12\n        }, {\n            \"name\": \"满24小时\",\n            \"value\": 125\n        }]\n    }, {\n        \"name\": \"路由器\",\n        \"children\": [{\n            \"name\": \"一类接入\",\n            \"value\": 1\n        }, {\n            \"name\": \"一类核心\",\n            \"value\": 9\n        }, {\n            \"name\": \"一类汇聚\",\n            \"value\": 2\n        }, {\n            \"name\": \"二类接入\",\n            \"value\": 6\n        }, {\n            \"name\": \"二类核心\",\n            \"value\": 1\n        }, {\n            \"name\": \"二类汇聚\",\n            \"value\": 3\n        }]\n    }]\n}];\n//十六进制颜色值的正则表达式  \nvar reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n//转换rgb\nvar colorRgbArr = function(text) {\n    var sColor = text.toLowerCase();\n    if (sColor && reg.test(sColor)) {\n        if (sColor.length === 4) {\n            var sColorNew = \"#\";\n            for (var i = 1; i < 4; i += 1) {\n                sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\n            }\n            sColor = sColorNew;\n        }\n        //处理六位的颜色值  \n        var sColorChange = [];\n        for (var i = 1; i < 7; i += 2) {\n            sColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\n        }\n        return sColorChange;\n    } else {\n        return sColor;\n    }\n};\n\n/*RGB颜色转换为16进制*/\nvar colorHex = function(text) {\n\n    var that = text;\n    if (/^(rgb|RGB)/.test(that)) {\n        var aColor = that.replace(/(?:||rgb|RGB)*/g, \"\").split(\",\");\n        var strHex = \"#\";\n        for (var i = 0; i < aColor.length; i++) {\n            var hex = Number(aColor[i].replace('(', \"\").replace(')', \"\")).toString(16);\n            if (hex === \"0\") {\n                hex += hex;\n            }\n            strHex += hex;\n        }\n        if (strHex.length !== 7) {\n            strHex = that;\n        }\n        return strHex;\n    } else if (reg.test(that)) {\n        var aNum = that.replace(/#/, \"\").split(\"\");\n        if (aNum.length === 6) {\n            return that;\n        } else if (aNum.length === 3) {\n            var numHex = \"#\";\n            for (var i = 0; i < aNum.length; i += 1) {\n                numHex += (aNum[i] + aNum[i]);\n            }\n            return numHex;\n        }\n    } else {\n        return that;\n    }\n};\n\nvar _level_colors = [\"#3354b3\", \"#304fa9\", \"#203676\", \"#2a4698\", \"#1c2f69\", \"#13204a\", \"#2c479a\", \"#2a4697\", \"#263f89\"];\n\n\nfunction processTrees(trees, a) {\n    a = a || [];\n    var colors = a.slice(0, a.length);\n    for (var i = 0, l = trees.length; i < l; i++) {\n        var temp = trees[i];\n        var _colors = [];\n        Object.keys(temp).map(function(k) {\n            if ('name' !== k && 'value' !== k && 'children' !== k) {\n                delete temp[k];\n            }\n        });\n        var color = colors[i];\n        if (color) {\n            temp.itemStyle = {\n                color: color\n            };\n\n            if (temp.children) {\n                var rgb = colorRgbArr(color),\n                    _o = rgb[2],\n                    step = Math.round((255 - rgb[2]) * 1 / 10) / 1;\n                /** 生成 10种 颜色 */\n                while (_colors.length <= 10) {\n                    rgb[2] = rgb[2] + step;\n                    if (rgb[2] <= 255) {\n                        var _temp = colorHex('rgb(' + rgb.join(',') + ')');\n                        _colors.push(_temp);\n                    } else {\n                        break;\n                    }\n                }\n\n                // processTrees(temp.children, _colors);\n            }\n        }\n        if (temp && null === temp.children) {\n            delete temp.children;\n        } else {\n            delete temp.value;\n        }\n    }\n\n}\nprocessTrees(data, _level_colors);\noption = {\n    \"title\": {\n        \"textStyle\": {\n            \"fontSize\": 14,\n            \"align\": \"center\"\n        },\n        \"subtextStyle\": {\n            \"align\": \"center\"\n        }\n    },\n    \"tooltip\": {},\n    \"series\": {\n        \"type\": \"sunburst\",\n        \"highlightPolicy\": \"ancestor\",\n        \"data\": data,\n        \"radius\": [0, \"95%\"],\n        \"sort\": null,\n        \"levels\": [{}, {\n            \"r0\": \"15%\",\n            \"r\": \"35%\",\n            \"itemStyle\": {\n                \"borderWidth\": 2\n            },\n            \"label\": {\n                \"rotate\": \"tangential\"\n            }\n        }, {\n            \"r0\": \"35%\",\n            \"r\": \"70%\",\n            \"label\": {\n                \"align\": \"right\"\n            }\n        }, {\n            \"r0\": \"70%\",\n            \"r\": \"72%\",\n            \"label\": {\n                \"position\": \"outside\",\n                \"padding\": 3,\n                \"silent\": false\n            },\n            \"itemStyle\": {\n                \"borderWidth\": 3\n            }\n        }]\n    }\n};","html":"","externalScripts":"","updaterUID":"bd-2302755999","theme":"","layout":"","viewCount":83,"userName":"159*****209","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWXw-JGXkz.png?v=1550569112313","isCustomThumbnail":0,"builtinTags":["category-work","series-sunburst","title","tooltip"],"customTags":[],"updaterUserName":"159*****209"}}