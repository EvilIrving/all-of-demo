{"status":0,"data":{"cid":"xHyKJ7Ay0f","authorUid":"bd-3859189680","authorUserName":"b***8","title":"设备运行状态图","description":"test","latestVersion":11,"alwaysLatest":1,"createTime":"2018-05-09T01:46:09.000Z","lastUpdateTime":"2018-05-09T01:46:09.000Z","auth":2,"uid":"bd-3859189680","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":11,"parentVersion":10,"echartsVersion":"4.1.0","versionCreateTime":"2018-05-18T01:17:58.000Z","code":"var data = [];\nvar dataCount = 100;\nvar startTime = '2018/05/18 9:10'; \nvar categories = ['大族激光1']\nvar types = [{\n        name: '运行',\n        color: 'green'\n    },\n    {\n        name: '待机',\n        color: 'yellow'\n    },\n    {\n        name: '停机',\n        color: 'red'\n    },\n];\n\n// Generate mock data\n\n// echarts.util.each(categories, function(category, index) {\n//     var baseTime = startTime;\n//     for (var i = 0; i < dataCount; i++) {\n//         var typeItem = types[Math.round(Math.random() * (types.length - 1))];\n//         var duration = Math.round(Math.random() * 10000);\n//         data.push({\n//             name: typeItem.name,\n//             value: [\n//                 index,\n//                 baseTime,\n//                 baseTime += duration,\n//                 duration\n//             ],\n//             itemStyle: {\n//                 normal: {\n//                     color: typeItem.color\n//                 }\n//             }\n//         });\n//         baseTime += Math.round(Math.random() * 200);\n//     }\n// });\n\ndata = [\n    {name: '运行',value: [0, '2018/05/18 9:10', '2018/05/18 9:12', 2],itemStyle:{normal: {color: 'green'}}},\n    {name: '停机',value: [0, '2018/05/18 9:12', '2018/05/18 9:14', 2],itemStyle:{normal: {color: 'red'}}},\n    {name: '运行',value: [0, '2018/05/18 9:14', '2018/05/18 9:18', 4],itemStyle:{normal: {color: 'green'}}},\n    {name: '停机',value: [0, '2018/05/18 9:18', '2018/05/18 9:30', 12],itemStyle:{normal: {color: 'red'}}},\n    ]\n\n\nfunction renderItem(params, api) {\n    var categoryIndex = api.value(0);\n    var start = api.coord([api.value(1), categoryIndex]);\n    var end = api.coord([api.value(2), categoryIndex]);\n    var height = api.size([0, 1])[1] * 0.6;\n\n    return {\n        type: 'rect',\n        shape: echarts.graphic.clipRectByRect({\n            x: start[0],\n            y: start[1] - height / 2,\n            width: end[0] - start[0],\n            height: height\n        }, {\n            x: params.coordSys.x,\n            y: params.coordSys.y,\n            width: params.coordSys.width,\n            height: params.coordSys.height\n        }),\n        style: api.style()\n    };\n}\n\noption = {\n    // tooltip: {\n    //     formatter: function(params) {\n    //         console.log(params)\n    //         return params.marker + params.name + ': ' + params.value[3] / 1000 + ' s';\n    //     }\n    // },\n    title: {\n        text: '设备状态',\n        left: 'center'\n    },\n    legend: {\n        data: types,\n        bottom: 30,\n        right: 20,\n        selectedMode: false,\n    },\n    dataZoom: [{\n        type: 'slider',\n        filterMode: 'weakFilter',\n        showDataShadow: false,\n        top: 400,\n        height: 10,\n        start: 0,\n        end: 100, \n        borderColor: 'transparent',\n        backgroundColor: '#e2e2e2',\n        handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z', // jshint ignore:line\n        handleSize: 20,\n        handleStyle: {\n            shadowBlur: 6,\n            shadowOffsetX: 1,\n            shadowOffsetY: 2,\n            shadowColor: '#aaa'\n        },\n        labelFormatter: ''\n    }, {\n        type: 'inside',\n        filterMode: 'weakFilter'\n    }],\n    grid: {\n        height: 300\n    },\n    xAxis: {\n        type: 'time',\n        min: startTime,\n        scale: true,\n        // axisLabel: {\n        //     formatter: function(val) {\n        //         return Math.max(0, val - startTime);\n        //     }\n        // }\n    },\n    yAxis: {\n        data: categories\n    },\n    series: [\n        {name: types[0].name, type: 'bar', data: [], color: 'red'},\n        {name: types[1].name, type: 'bar', data: [], color: 'green'},\n        {name: types[2].name, type: 'bar', data: [], color: 'yellow'},\n        {\n        type: 'custom',\n        renderItem: renderItem,\n        itemStyle: {\n            normal: {\n                opacity: 0.8\n            }\n        },\n        encode: {\n            x: [1, 2, 3],\n            y: 0,\n        },\n        data: data\n    }]\n};","html":"","externalScripts":"","updaterUID":"bd-3859189680","theme":"","layout":"","viewCount":677,"userName":"b***8","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyKJ7Ay0f.png?v=1526606278652","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-custom","title"],"customTags":[],"updaterUserName":"b***8"}}