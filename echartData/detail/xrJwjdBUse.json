{"status":0,"data":{"cid":"xrJwjdBUse","authorUid":"bd-24739350","authorUserName":"影之茶韵","title":"北京空气质量测点地图展示","description":"基于空气质量测点经纬度数据在地图上进行展示，并基于每个测点虚构的实时PM2.5值显示不同的背景颜色","latestVersion":1,"alwaysLatest":1,"createTime":"2017-03-15T04:52:47.000Z","lastUpdateTime":"2017-03-15T04:52:47.000Z","auth":2,"uid":"bd-24739350","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.4.0","versionCreateTime":"2017-03-15T04:52:47.000Z","code":"var data = [\n     {name: '万寿西宫', value: 49},\n     {name: '定陵', value: 32},\n     {name: '东四', value: 62},\n     {name: '天坛', value: 23},\n     {name: '农展馆', value: 43},\n     {name: '官园', value: 105},\n     {name: '海淀区万柳', value: 29},\n     {name: '顺义新城', value: 73},\n     {name: '怀柔镇', value: 63},\n     {name: '昌平镇', value: 53},\n     {name: '奥体中心', value: 33},\n     {name: '古城', value: 13},\n     {name: '中国环境科学研究院', value: 32}\n];\nvar geoCoordMap = {\n    '万寿西宫':[116.375,39.886],\n    '定陵':[116.232,40.301],\n    '东四':[116.396,39.93],\n    '天坛':[116.413,39.886],\n    '农展馆':[116.47,39.947],\n    '官园':[116.365,39.937],\n    '海淀区万柳':[116.306,39.973],\n    '顺义新城':[116.659,40.187],\n    '怀柔镇':[116.647,40.308],\n    '昌平镇':[116.227,40.229],\n    '奥体中心':[116.407,39.991],\n    '古城':[116.502,40.11],\n    '中国环境科学研究院':[116.426,40.048]\n};\n\nvar convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nvar uploadedDataURL = \"/asset/get/s/data-1482818963027-Hko9SKJrg.json\";\n\nmyChart.showLoading();\n$.get(uploadedDataURL, function(chinaJson) {\n    echarts.registerMap('北京', chinaJson);\n    myChart.hideLoading();\n    myChart.setOption({\n        title: {\n            text: '地图空气质量测点展示',\n            subtext: '数据纯属虚构'\n        },\n        tooltip : {\n            trigger: 'item',\n            formatter: '{b}'\n        },\n        legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x:'right',\n            data:['pm2.5'],\n            textStyle: {\n                color: '#000000'\n            }\n        },\n        geo: {\n            map: '北京',\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            roam: true\n        },\n        series : [{\n            name: 'pm2.5',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            symbol: 'pin',\n            symbolSize: 30,\n            label: {\n                normal: {\n                    color: '#fff',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: function(params) {\n                        var val = params.value[2]\n                        if(val <= 50) {\n                            return 'green'\n                        } else if (val <= 100) {\n                            return 'orange'\n                        } else if (val <= 200) {\n                            return 'red'\n                        } else {\n                            return 'purple'\n                        }\n                    }\n                }\n            }\n        }]\n    });\n});","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-24739350","theme":"","layout":"","viewCount":1470,"userName":"影之茶韵","commentCount":4,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJwjdBUse.png?v=1489553567666","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-scatter","title","tooltip"],"customTags":[],"updaterUserName":"影之茶韵"}}