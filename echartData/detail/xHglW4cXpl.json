{"status":0,"data":{"cid":"xHglW4cXpl","authorUid":"obd-o0B9fGAjy6H8RU1uHyn3e2FDTw--HF4","authorUserName":"啊***听","title":"宾王大屏bar111","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-08T13:07:52.000Z","lastUpdateTime":"2021-06-08T13:07:52.000Z","auth":2,"uid":"obd-o0B9fGAjy6H8RU1uHyn3e2FDTw--HF4","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-08T13:07:52.000Z","code":"data1 = [{\r\n        name: \"本科\",\r\n        value: 754\r\n    },\r\n    {\r\n        name: \"硕士\",\r\n        value: 611\r\n    },\r\n    {\r\n        name: \"大专\",\r\n        value: 400\r\n    },\r\n    {\r\n        name: \"博士\",\r\n        value: 200\r\n    }\r\n];\r\ncolorList2=[\r\n    {\r\n        c1:\"rgba(46, 149, 246, 1)\",\r\n        c2:\"rgba(26, 85, 145, 1)\"\r\n    },\r\n    {\r\n        c1:\"rgba(249, 203, 25, 1)\",\r\n        c2:\"rgba(116, 92, 0, 1)\"\r\n    },\r\n    {\r\n        c1:\"rgba(0, 175, 121, 1)\",\r\n        c2:\"rgba(0, 95, 66, 1)\"\r\n    },\r\n    {\r\n        c1:\"rgba(237, 72, 94, 1)\",\r\n        c2:\"rgba(120, 0, 16, 1)\"\r\n    }\r\n    ]\r\narrName = getArrayValue(data1, \"name\");\r\narrValue = getArrayValue(data1, \"value\");\r\nsumValue =getsumValue(data1,\"value\");\r\noptionData = getData(data1)\r\n\r\nfunction getsumValue(array ,key){\r\n    let sum=0;\r\n     for(let i=0;i<array.length;i++){\r\n            sum=sum+array[i].value\r\n        }\r\n    return sum;\r\n}\r\n\r\nfunction getArrayValue(array, key) {\r\n    var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\n\r\nfunction getData(data1) {\r\n    var res = {\r\n        series: [],\r\n        yAxis: [],\r\n        formatter:[],\r\n    };\r\n    for (let i = 1; i <= data1.length; i++) {\r\n        \r\n        res.series.push({\r\n            name: '学历',\r\n            type: 'pie',\r\n            clockWise: true,\r\n            z: 2,\r\n            hoverAnimation: false,\r\n            radius: [73 - i * 15 + '%', 65 - i * 15 + '%'],\r\n            center: [\"30%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            labelLine: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\r\n                            offset: 0,\r\n                            color: colorList2[i-1].c2,\r\n                        },\r\n                        {\r\n                            offset: 1,\r\n                            color:colorList2[i-1].c1,\r\n                        },\r\n                    ]),\r\n                },\r\n            },\r\n            data: [{\r\n                value: data1[i-1].value,\r\n                name: data1[i-1].name\r\n            }, {\r\n                value: sumValue - data1[i-1].value,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                label: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.series.push({\r\n            name: '背景线',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: true,\r\n            hoverAnimation: false,\r\n            radius: [71 - i * 15 + '%', 69 - i * 15 + '%'],\r\n            center: [\"30%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n            },\r\n            data: [{\r\n                value: 100,\r\n                itemStyle: {\r\n                    color: \"RGB(12,64,128)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.yAxis.push(data1[i-1].name);\r\n    }\r\n    return res;\r\n}\r\n\r\noption = {\r\n    backgroundColor: 'RGB(8,20,67)',\r\n    grid: {\r\n        top: '16%',\r\n        bottom: '54%',\r\n        left: \"50%\",\r\n        containLabel: false\r\n    },\r\n    legend: {\r\n      bottom: 6,\r\n      icon: \"rect\",\r\n      orient: 'vertical',\r\n      itemHeight: 10,\r\n      itemWidth: 10,\r\n      left: 800,\r\n      top: 200,\r\n      show: true,\r\n      data: arrName,\r\n      selectedMode: false,\r\n      textStyle: {\r\n        color: \"#96F5F6\",\r\n        fontSize: 16\r\n      },\r\n      formatter: function(name) {\r\n          let tarValue\r\n            for (var i = 0; i < 4; i++) {\r\n              if (data1[i].name == name) {\r\n                tarValue = data1[i].value;\r\n                break;\r\n              }\r\n            }\r\n            var p = Math.round(((tarValue / sumValue) * 1000))/10;\r\n            return `${name}     ${p}%`;\r\n          },\r\n      \r\n    },\r\n    yAxis: [{\r\n        type: 'category',\r\n        inverse: true,\r\n        z: 3,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show:false,\r\n            interval: 0,\r\n            inside: false,\r\n            textStyle: {\r\n                color: \"RGB(78,184,252)\",\r\n                fontSize: 25,\r\n            },\r\n        },\r\n        data: optionData.yAxis\r\n    }],\r\n    xAxis: [{\r\n        show: false\r\n    }],\r\n    series: optionData.series\r\n};","html":"","externalScripts":"","updaterUID":"obd-o0B9fGAjy6H8RU1uHyn3e2FDTw--HF4","theme":"","layout":"","viewCount":0,"userName":"啊***听","commentCount":0,"starCount":23,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHglW4cXpl.png?v=1623157672810","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-pie"],"customTags":[],"updaterUserName":"啊***听"}}