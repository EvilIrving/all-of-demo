{"status":0,"data":{"cid":"xOJLKklf3O","authorUid":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","authorUserName":"逆***h","title":"后台集中清分产量统计","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-05-11T08:59:49.000Z","lastUpdateTime":"2020-05-11T08:59:49.000Z","auth":2,"uid":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-15T07:53:53.000Z","code":"let oldData=[\n    {\"clrDate\":\"05-01\",\"amount\":1,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-01\",\"amount\":2,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-01\",\"amount\":3,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-01\",\"amount\":4,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-02\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-02\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-02\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-02\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-03\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-03\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-03\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-03\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-04\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-04\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-04\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-04\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-05\",\"amount\":1,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-05\",\"amount\":2,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-05\",\"amount\":3,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-05\",\"amount\":4,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-06\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-06\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-06\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-06\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-07\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-07\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-07\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-07\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"},\n    {\"clrDate\":\"05-08\",\"amount\":5,\"currencyType\":\"完整券\",\"currencyCode\":\"100元流通券\"},\n    {\"clrDate\":\"05-08\",\"amount\":6,\"currencyType\":\"完整券\",\"currencyCode\":\"ATM专用钞\"},\n    {\"clrDate\":\"05-08\",\"amount\":7,\"currencyType\":\"完整券\",\"currencyCode\":\"硬币\"},\n    {\"clrDate\":\"05-08\",\"amount\":8,\"currencyType\":\"残损券\",\"currencyCode\":\"残损券\"}];\n\nlet dateArr=[],currentTypeArr=[],currencyCodeArr=[],seriesArr;\n\noldData.forEach((item)=>{  \n    if(dateArr.indexOf(item.clrDate)<0){\n        dateArr.push(item.clrDate);\n    }  \n    if(currentTypeArr.indexOf(item.currencyType)<0){\n        currentTypeArr.push(item.currencyType);\n    }  \n    if(currencyCodeArr.indexOf(item.currencyCode)<0){\n        currencyCodeArr.push(item.currencyCode);\n    }      \n});\n\n\nseriesArr=currencyCodeArr.map((currencyCode)=>{\n    return {\n        name:currencyCode,\n        stack:'',\n        type: 'bar',\n        data:[]\n    };\n});\n\n\nfor(var i = 0; i < seriesArr.length; i++){\n    if(seriesArr[i].name == '残损券'){\n        seriesArr[i].stack = '残损券';\n    }else{\n        seriesArr[i].stack = '完整券';\n    }\n    for(var j = 0; j < oldData.length; j++){\n        for(var k = 0; k < dateArr.length; k++){\n            if(seriesArr[i].name == oldData[j].currencyCode &&\n                seriesArr[i].stack == oldData[j].currencyType &&\n                 dateArr[k] == oldData[j].clrDate){\n              //console.log(i+'-'+j+'-'+k);\n               seriesArr[i].data[k] = oldData[j].amount;\n            }\n        }\n    }\n}\n\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'\n        }\n    },\n    legend: {\n        data: currencyCodeArr\n    },\n          bottom: '3%',\n  grid: {\n        left: '3%',\n        right: '4%',\n        containLabel: true\n    },\n    xAxis: [\n        {\n            type: 'category',\n            data: dateArr\n        }\n    ],\n    yAxis: [\n        {\n            type: 'value'\n        }\n    ],\n    series: seriesArr\n};","html":"","externalScripts":"","updaterUID":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","theme":"","layout":"","viewCount":182,"userName":"逆***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOJLKklf3O.png?v=1589529233810","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"逆***h"}}