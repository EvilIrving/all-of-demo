{"status":0,"data":{"cid":"x-Ncag6hy9","authorUid":"obd-ojMkZGEqVjS64-BuneeMmDhNFy71-Ea","authorUserName":"辰***g","title":"k线图-区域缩放联动","description":"k线图-区域缩放联动","latestVersion":21,"alwaysLatest":0,"createTime":"2021-11-11T02:10:01.000Z","lastUpdateTime":"2021-12-03T02:49:23.000Z","auth":2,"uid":"obd-ojMkZGEqVjS64-BuneeMmDhNFy71-Ea","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":21,"parentVersion":20,"echartsVersion":"4.6.0","versionCreateTime":"2021-12-03T02:49:23.000Z","code":"//k线图 图表区域联动 echart4\nvar allData = disposeData([\n    {\n        id: 1,\n        time: '2021-7',\n        open: '34',\n        close: '34',\n        top: '34',\n        low: '34',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-7-01',\n        endTime: '2021-7-31'\n    },\n    {\n        id: 2,\n        time: '2021-8',\n        open: '34',\n        close: '32',\n        top: '40',\n        low: '31',\n        listVolume: '133',\n        listTurnover: '313',\n        bulkVolume: '2456',\n        bulkTurnover: '5466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-8-01',\n        endTime: '2021-8-31'\n    },\n    {\n        id: 3,\n        time: '2021-9',\n        open: '40',\n        close: '40',\n        top: '40',\n        low: '40',\n        listVolume: '30133',\n        listTurnover: '13313',\n        bulkVolume: '22556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-9-01',\n        endTime: '2021-9-29'\n    },\n    {\n        id: 4,\n        time: '2021-10',\n        open: '34',\n        close: '32',\n        top: '40',\n        low: '31',\n        listVolume: '10133',\n        listTurnover: '23313',\n        bulkVolume: '14556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-10-01',\n        endTime: '2021-10-31'\n    },\n    {\n        id: 5,\n        time: '2021-11',\n        open: '54',\n        close: '32',\n        top: '60',\n        low: '30',\n        listVolume: '2133',\n        listTurnover: '33313',\n        bulkVolume: '4556',\n        bulkTurnover: '5466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-11-01',\n        endTime: '2021-11-30'\n    },\n    {\n        id: 6,\n        time: '2021-12',\n        open: '24',\n        close: '22',\n        top: '30',\n        low: '21',\n        listVolume: '123',\n        listTurnover: '23313',\n        bulkVolume: '556',\n        bulkTurnover: '466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-12-01',\n        endTime: '2021-12-31'\n    },\n    {\n        id: 7,\n        time: '2022-01',\n        open: '44',\n        close: '52',\n        top: '40',\n        low: '31',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-01-01',\n        endTime: '2022-01-31'\n    },\n    {\n        id: 8,\n        time: '2022-02',\n        open: '64',\n        close: '32',\n        top: '40',\n        low: '34',\n        listVolume: '301',\n        listTurnover: '2313',\n        bulkVolume: '246',\n        bulkTurnover: '4466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-02-01',\n        endTime: '2022-02-29'\n    },\n    {\n        id: 9,\n        time: '2022-03',\n        open: '34',\n        close: '32',\n        top: '40',\n        low: '31',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-03-01',\n        endTime: '2022-03-31'\n    },\n    {\n        id: 10,\n        time: '2022-04',\n        open: '34.43',\n        close: '34.42',\n        top: '34.43',\n        low: '34.40',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-04-01',\n        endTime: '2022-04-30'\n    },\n    {\n        id: 11,\n        time: '2022-05',\n        open: '46',\n        close: '43',\n        top: '46',\n        low: '41',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2021-05-01',\n        endTime: '2021-05-31'\n    },\n    {\n        id: 12,\n        time: '2022-06',\n        open: '34',\n        close: '32',\n        top: '40',\n        low: '31',\n        listVolume: '333',\n        listTurnover: '23',\n        bulkVolume: '246',\n        bulkTurnover: '4566',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-06-01',\n        endTime: '2022-06-30'\n    },\n    {\n        id: 13,\n        time: '2022-07',\n        open: '34',\n        close: '32',\n        top: '40',\n        low: '31',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-07-01',\n        endTime: '2022-07-31'\n    },\n    {\n        id: 14,\n        time: '2022-08',\n        open: '34',\n        close: '35',\n        top: '40',\n        low: '31',\n        listVolume: '30133',\n        listTurnover: '23313',\n        bulkVolume: '24556',\n        bulkTurnover: '45466',\n        volume: '54689',\n        turnover: '68779',\n        startTime: '2022-08-01',\n        endTime: '2022-08-31'\n    },\n]);\nvar tooltipParams = {\n    open: '开盘值',\n    close: '收盘值',\n    lowest: '最低值',\n    highest: '最高值',\n};\nfunction disposeData(data) {\n    var seriesData = [];\n    var turnoverSeries = [{ data: [] }, { data: [] }];\n    var volumeSeries = [{ data: [] }, { data: [] }];\n    var xAxisData = [];\n    data.map((item) => {\n        // value中的值都相同时特殊设置图形线的颜色\n        const flag = item.close == item.open && item.low == item.top && item.close == item.low;\n        // 开盘值、收盘值、最低值、最高值\n        seriesData.push({\n            value: [item.open, item.close, item.low, item.top],\n            itemStyle: {\n                borderColor: flag ? '#3babfc' : '#00fc83',\n                borderColor0: flag ? '#3babfc' : '#f54455',\n            },\n            time: [item.startTime, item.endTime]\n        });\n        turnoverSeries[0].data.push({ value: item.listVolume, total: item.volume });\n        turnoverSeries[1].data.push({ value: item.bulkVolume });\n        volumeSeries[0].data.push({ value: item.listTurnover, total: item.turnover });\n        volumeSeries[1].data.push(item.bulkTurnover);\n        xAxisData.push(item.time);\n    });\n    return {\n        seriesData: seriesData,\n        xAxisData: xAxisData,\n        turnoverSeries: turnoverSeries,\n        volumeSeries: volumeSeries,\n    };\n}\noption = {\n    backgroundColor: 'rgba(0,0,0,1)',\n    color: ['#00fc83', '#3babfc', '#f54455'],\n    tooltip: {\n        show: true,\n        trigger: 'axis',\n        backgroundColor: 'rgba(0, 18, 16, 0.9)',\n        borderColor: 'transparent',\n        confine: true, // 将tooltip限制在图表区域内\n        formatter: (params) => {\n            if (!params.length) return;\n            const data = params[0];\n            console.log('data',data)\n            let time = `<div><span style=\"color: #fff\">${data.name}</span><br/><span>${data.data.time[0]}至${data.data.time[1]}</span></div>`;\n            let itemLabel = '';\n            if (data.axisIndex == 0) {\n                let kd = data.value;\n                kd.forEach((el, index) => {\n                    if (index > 0) {\n                        // echart4 中dimensionNames有对应值，echart5中为空数组\n                        itemLabel += `<div style=\" display: flex; flex-shrink: 0; justify-content: space-between;\"><div style=\"min-width: 80px; margin-right: 16px\">${\n                            tooltipParams[data.dimensionNames[index]]\n                        }</div><div style=\"color: #00fc83\">${el || '--'}</div></div>`;\n                    }\n                });\n                return `<div style=\"font-weight: 600; padding-left: 12px;padding-right: 12px\">${time}${itemLabel}</div>`;\n            } else {\n                time = `<div><span style=\"color: #fff\">${data.name}${\n                    data.axisIndex == 1 ? '(吨)' : '(万元)'\n                }</span></div>`;\n                let itemLabel = `<div style=\" display: flex; flex-shrink: 0; justify-content: space-between;\"><div style=\"min-width: 80px; margin-right: 16px\">合计</div><div style=\"color: #00fc83\">${data.data.total}</div></div>`;\n                params.forEach((item) => {\n                    itemLabel += `<div style=\" display: flex; flex-shrink: 0; justify-content: space-between;\"><div style=\"min-width: 80px; margin-right: 16px\">${item.seriesName}</div><div style=\"color: #00fc83\">${item.value}</div></div>`;\n                });\n                return `<div style=\"font-weight: 600; padding-left: 12px;padding-right: 12px\">${time}${itemLabel}</div>`;\n            }\n        },\n    },\n    title: [\n        {\n            //标题\n            show: true, //是否显示\n            text: 'k线图',\n            textStyle: {\n                color: '#fff',\n                fontSize: 20,\n                fontWeight: 700,\n            },\n        },\n        {\n            //标题\n            show: true, //是否显示\n            top: '43%',\n            text: '成交量',\n            left: 'center',\n            textStyle: {\n                color: '#fff',\n                fontSize: 20,\n                fontWeight: 700,\n            },\n        },\n        {\n            //标题\n            show: true, //是否显示\n            top: '71%',\n            text: '成交额',\n            left: 'center',\n            textStyle: {\n                color: '#fff',\n                fontSize: 20,\n                fontWeight: 700,\n            },\n        },\n    ],\n    xAxis: [\n        {\n            show: true,\n            gridIndex: 0,\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                //x轴线\n                show: true,\n                lineStyle: {\n                    color: 'rgba(255, 255, 255, .2)',\n                },\n            },\n            axisLabel: {\n                fontFamily: 'Bebas Neue;',\n                fontSize: '12',\n                fontWeight: 'normal',\n                color: 'rgba(255,255,255,0.6)',\n            },\n            data: allData.xAxisData,\n        },\n        {\n            gridIndex: 1,\n            axisLine: {\n                //x轴线\n                show: true,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n            },\n            data: allData.xAxisData,\n        },\n        {\n            show: true,\n            gridIndex: 2,\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                //x轴线\n                show: true,\n                lineStyle: {\n                    color: 'rgba(255, 255, 255, .2)',\n                },\n            },\n            axisLabel: {\n                show: false,\n            },\n            data: allData.xAxisData,\n        },\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            gridIndex: 0,\n            scale: true,\n            splitNumber: 3,\n            axisLabel: {\n                //y轴上的文字\n                fontFamily: 'Bebas Neue',\n                fontSize: '14',\n                fontWeight: 'normal',\n                color: 'rgba(255,255,255,0.6)',\n            },\n            axisLine: {\n                //y轴线\n                show: false,\n            },\n            splitArea: {\n                //分隔区域\n                show: true,\n                areaStyle: {\n                    color: ['transparent', 'rgba(3, 139, 143, .1)'],\n                },\n            },\n            splitLine: {\n                //分割线\n                show: false,\n            },\n            axisTick: {\n                //y轴刻度线\n                show: false,\n            },\n        },\n        {\n            type: 'value',\n            gridIndex: 1,\n            axisLabel: {\n                show: false,\n            },\n            axisLine: {\n                //y轴线\n                show: false,\n            },\n            splitArea: {\n                //分隔区域\n                show: false,\n            },\n            splitLine: {\n                //分割线\n                show: false,\n            },\n            axisTick: {\n                //y轴刻度线\n                show: false,\n            },\n        },\n        {\n            type: 'value',\n            gridIndex: 2,\n            axisLabel: {\n                show: false,\n            },\n            axisLine: {\n                //y轴线\n                show: false,\n            },\n            splitArea: {\n                //分隔区域\n                show: false,\n            },\n            splitLine: {\n                //分割线\n                show: false,\n            },\n            axisTick: {\n                //y轴刻度线\n                show: false,\n            },\n        },\n    ],\n    grid: [\n        {\n            //图表配置\n            top: 42,\n            left: 16,\n            right: 16,\n            bottom: '60%',\n            containLabel: true, //定位时是否包含标签\n        },\n        {\n            //图表配置\n            top: '50%',\n            left: 40,\n            right: 24,\n            bottom: '32%',\n            containLabel: true, //定位时是否包含标签\n        },\n        {\n            //图表配置\n            top: '78%',\n            left: 40,\n            right: 24,\n            bottom: '8',\n            containLabel: true, //定位时是否包含标签\n        },\n    ],\n    dataZoom: [\n        {\n            type: 'inside',\n            start: 0,\n            end: 100,\n            xAxisIndex: [0, 0],\n        },\n        {\n            show: false,\n            type: 'slider',\n            start: 0,\n            end: 100,\n            xAxisIndex: [0, 1],\n        },\n        {\n            show: false,\n            type: 'slider',\n            start: 0,\n            end: 100,\n            xAxisIndex: [0, 2],\n        },\n    ],\n    legend: [\n        {\n            show: false,\n        },\n        {\n            show: true,\n            top: '43%',\n            icon: 'rect',\n            itemWidth: 16,\n            itemHeight: 16,\n            itemGap: 32,\n            textStyle: {\n                color: '#fff',\n                fontSize: 14,\n                padding: [0, 0, 0, 8],\n            },\n            right: 16,\n            // 特殊处理 避免造成相同图例交互影响\n            data: ['1挂牌', '1大宗'],\n            formatter: (params) => {\n                console.log('params', params);\n                const label = params.substr(1, params.length);\n                return label;\n            },\n        },\n        {\n            show: true,\n            top: '71%',\n            icon: 'rect',\n            itemWidth: 16,\n            itemHeight: 16,\n            itemGap: 32,\n            textStyle: {\n                color: '#fff',\n                fontSize: 14,\n                padding: [0, 0, 0, 8],\n            },\n            right: 16,\n            data: ['挂牌', '大宗'],\n        },\n    ],\n    series: [\n        {\n            type: 'k',\n            data: allData.seriesData,\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            // 设置阴线、阳线图形的描边颜色\n            itemStyle: {\n                color: 'transparent',\n                color0: 'transparent',\n                borderColor: '#00fc83',\n                borderColor0: '#f54455',\n            },\n        },\n        {\n            name: '1挂牌',\n            type: 'bar',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            barWidth: '11',\n            stack: 'turnover',\n            data: allData.turnoverSeries[0].data,\n            color: '#F6BD16',\n        },\n        {\n            name: '1大宗',\n            type: 'bar',\n            barWidth: '11',\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            stack: 'turnover',\n            data: allData.turnoverSeries[1].data,\n            color: '#5B8FF9',\n        },\n        {\n            name: '挂牌',\n            type: 'bar',\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            barWidth: '11',\n            stack: 'volume',\n            data: allData.volumeSeries[0].data,\n            color: '#F6BD16',\n        },\n        {\n            name: '大宗',\n            type: 'bar',\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            barWidth: '11',\n            stack: 'volume',\n            data: allData.volumeSeries[1].data,\n            color: '#5B8FF9',\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-ojMkZGEqVjS64-BuneeMmDhNFy71-Ea","theme":"","layout":"","viewCount":0,"userName":"辰***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x-Ncag6hy9.png?v=1638499763795","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-candlestick","title","tooltip"],"customTags":[],"updaterUserName":"辰***g"}}