{"status":0,"data":{"cid":"xYgY2plGe","authorUid":"bd-2936691645","authorUserName":"h***x","title":"piduqu ","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-02-05T15:52:08.000Z","lastUpdateTime":"2020-02-05T15:52:08.000Z","auth":2,"uid":"bd-2936691645","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-05T17:25:21.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1580912537837-ugkEvpX-.json\";\r\n\r\nvar max = 80, min = 30;\r\nvar name = 'piduqu';\r\n\r\nvar heat = [\r\n    [103.91400581563, 30.845313456954, (100 * Math.random())],\r\n    [103.9144223, 30.845625820235, (100 * Math.random())],\r\n    [103.9144223, 30.846250546797, (100 * Math.random())],\r\n    [103.9144223, 30.846562910079, (100 * Math.random())],\r\n    [103.9161923586, 30.847916484297, (100 * Math.random())],\r\n    [103.91660884297, 30.848853574141, (100 * Math.random())],\r\n    [103.91817065938, 30.851144238204, (100 * Math.random())],\r\n    [103.91869126485, 30.851560722579, (100 * Math.random())],\r\n    [103.91973247579, 30.852081328047, (100 * Math.random())],\r\n    [103.92046132344, 30.852185449141, (100 * Math.random())],\r\n    [103.92181489766, 30.852185449141, (100 * Math.random())],\r\n    [103.92264786641, 30.851977206954, (100 * Math.random())],\r\n    [103.92493853047, 30.851248359297, (100 * Math.random())],\r\n    [103.92566737813, 30.850623632735, (100 * Math.random())],\r\n    [103.92597974141, 30.849998906172, (100 * Math.random())],\r\n    [103.92639622579, 30.849061816329, (100 * Math.random())],\r\n    [103.92691683125, 30.848020605391, (100 * Math.random())],\r\n    [103.92722919454, 30.846562910079, (100 * Math.random())],\r\n    [103.9277498, 30.845834062422, (100 * Math.random())],\r\n    [103.9277498, 30.845521699141, (100 * Math.random())],\r\n    [103.92754155782, 30.844896972579, (100 * Math.random())],\r\n    [103.9277498, 30.84354339836, (100 * Math.random())],\r\n    [103.92827040547, 30.843231035079, (100 * Math.random())],\r\n    [103.9295198586, 30.843022792891, (100 * Math.random())],\r\n    [103.93087343282, 30.842502187422, (100 * Math.random())],\r\n    [103.93181052266, 30.842814550704, (100 * Math.random())],\r\n    [103.9327476125, 30.843335156172, (100 * Math.random())],\r\n    [103.93368470235, 30.843959882735, (100 * Math.random())],\r\n    [103.93441355, 30.844272246016, (100 * Math.random())],\r\n    [103.93535063985, 30.844168124922, (100 * Math.random())],\r\n    [103.93576712422, 30.843855761641, (100 * Math.random())],\r\n    [103.93680833516, 30.843231035079, (100 * Math.random())],\r\n    [103.93691245625, 30.842502187422, (100 * Math.random())],\r\n    [103.937745425, 30.84187746086, (100 * Math.random())],\r\n    [103.93909899922, 30.840523886641, (100 * Math.random())],\r\n    [103.94034845235, 30.839899160079, (100 * Math.random())],\r\n    [103.94159790547, 30.840107402266, (100 * Math.random())],\r\n    [103.9428473586, 30.840419765547, (100 * Math.random())],\r\n    [103.94513802266, 30.84104449211, (100 * Math.random())],\r\n    [103.94711632344, 30.840523886641, (100 * Math.random())],\r\n    [103.95003171407, 30.839586796797, (100 * Math.random())],\r\n    [103.95190589375, 30.83937855461, (100 * Math.random())],\r\n    [103.95430067891, 30.839066191329, (100 * Math.random())],\r\n    [103.95627897969, 30.838962070235, (100 * Math.random())],\r\n    [103.96002733907, 30.839170312422, (100 * Math.random())],\r\n    [103.9628386086, 30.839482675704, (100 * Math.random())],\r\n    [103.96466271101, 30.839612984374, (100 * Math.random())]\r\n];\r\n\r\nvar data = [\r\n    {name:'德源街道',value:[103.8463128,30.7729303,10]},\r\n    {name:'郫筒街道',value:[103.8786131,30.8076189,20]},\r\n    {name:'犀浦街道',value:[103.9687228,30.7632310,32]},\r\n    {name:'唐昌镇',value:[103.8111107,30.9333031,314]},\r\n    {name:'安德街道',value:[103.8001774,30.8759107,63]},\r\n    {name:'团结街道',value:[103.9754471,30.8190601,13]},\r\n    {name:'红光街道',value:[103.9388733,30.7764050,52]},\r\n    {name:'安靖街道',value:[104.0111136,30.7697944,55]},\r\n    {name:'三道堰镇',value:[103.9139119,30.8656977,435]},\r\n    {name:'友爱镇',value:[103.7923883,30.8263319,23]}\r\n];\r\n\r\nmyChart.showLoading();\r\n$.get(uploadedDataURL, function(geoJson) {\r\n    myChart.hideLoading();\r\n    echarts.registerMap(name, geoJson);\r\n    myChart.setOption(option = {\r\n        backgroundColor: '#044060',\r\n        title: {\r\n            text: \"郫都区示例\",\r\n\r\n            left: 'center',\r\n            textStyle: {\r\n                color: '#ffffff'\r\n            }\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function(params) {\r\n                console.log(params)\r\n                if (typeof(params.value)[2] == \"undefined\") {\r\n                    return params.name + ' : ' + (params.value ? params.value : 0);\r\n                } else {\r\n                    return params.name + ' : ' + params.value[2];\r\n                }\r\n            }\r\n        },\r\n        visualMap: [{\r\n            min: 0,\r\n            max: heat.reduce(function(max = 0, i) {return max > i[2] ? max :i[2] }),\r\n            seriesIndex: 0,\r\n            show: false,\r\n            splitNumber: 5,\r\n            inRange: {\r\n                color: ['#d94e5d', '#eac736', '#50a3ba'].reverse()\r\n            },\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        }, {\r\n            min: 0,\r\n            max: data.reduce(function(max = 0, i) {return max > i.value[2] ? max :i.value[2] }),\r\n            seriesIndex: 1,\r\n            show: false,\r\n            splitNumber: 5,\r\n            inRange: {\r\n                color: ['#23074d', '#cc5333'].reverse()\r\n            },\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        }],\r\n        geo: {\r\n            map: name,\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: '#389BB7',\r\n                    areaColor: '#fff',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#389BB7',\r\n                    borderWidth: 0\r\n                }\r\n            },\r\n        },\r\n        series: [{\r\n            name: 'AQI',\r\n            type: 'heatmap',\r\n            coordinateSystem: 'geo',\r\n            pointSize: 10,\r\n            blurSize: 30,\r\n            data: heat\r\n        }, {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            symbol: 'pin', //气泡\r\n            symbolSize: function(val) {\r\n                let size = val[2];\r\n                size = size > max ? max : size;\r\n                size = size < min ? min : size;\r\n                return size;\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 14,\r\n                    },\r\n                    formatter: function(params) {\r\n                        return params.value[2]\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                color: '#F62157', //标志颜色\r\n            },\r\n            zlevel: 6,\r\n            data: data\r\n        }, {\r\n            type: 'map',\r\n            map: name,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data.map(item => {\r\n                return {\r\n                    name: item.name,\r\n                    value: item.value[2]\r\n                }\r\n            })\r\n        }, ]\r\n    });\r\n});\r\n","html":"","externalScripts":"","updaterUID":"bd-2936691645","theme":"","layout":"","viewCount":986,"userName":"h***x","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYgY2plGe.png?v=1580923521205","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-heatmap","series-map","series-scatter","title","tooltip","visualMap"],"customTags":["地图"],"updaterUserName":"h***x"}}