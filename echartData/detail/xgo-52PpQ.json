{"status":0,"data":{"cid":"xgo-52PpQ","authorUid":"bd-3379529844","authorUserName":"乱***法","title":"随便试一试","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-12-15T13:00:19.000Z","lastUpdateTime":"2019-12-15T13:00:19.000Z","auth":2,"uid":"bd-3379529844","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-15T14:01:17.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1576416292709--W63YPNI.xlsx\";\n\nvar data=[{name:'上海',value:552}];\n\nvar geoCoordMap = {'上海':[121.48,31.23]}；\n\nvar convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\nfunction renderItem(params, api) {\n    var coords = [\n        [116.7,39.53],\n        [103.73,36.03],\n        [112.91,27.87],\n        [120.65,28.01],\n        [119.57,39.95]\n    ];\n    var points = [];\n    for (var i = 0; i < coords.length; i++) {\n        points.push(api.coord(coords[i]));\n    }\n    var color = api.visual('color');\n\n    return {\n        type: 'polygon',\n        shape: {\n            points: echarts.graphic.clipPointsByRect(points, {\n                x: params.coordSys.x,\n                y: params.coordSys.y,\n                width: params.coordSys.width,\n                height: params.coordSys.height\n            })\n        },\n        style: api.style({\n            fill: color,\n            stroke: echarts.color.lift(color)\n        })\n    };\n}\n\noption = {\n    backgroundColor: 'transparent',\n    title: {\n        text: '全国主要城市空气质量',\n        subtext: 'data from PM25.in',\n        sublink: 'http://www.pm25.in',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    tooltip : {\n        trigger: 'item'\n    },\n    bmap: {\n        center: [104.114129, 37.550339],\n        zoom: 5,\n        roam: true,\n        mapStyle: {\n            styleJson: [\n                    {\n                        \"featureType\": \"water\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"color\": \"#044161\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"land\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"color\": \"#004981\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"boundary\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"color\": \"#064f85\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"railway\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"color\": \"#004981\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"color\": \"#005b96\",\n                            \"lightness\": 1\n                        }\n                    },\n                    {\n                        \"featureType\": \"highway\",\n                        \"elementType\": \"labels\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"geometry\",\n                        \"stylers\": {\n                            \"color\": \"#004981\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"color\": \"#00508b\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"poi\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"green\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"color\": \"#056197\",\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"subway\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"manmade\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"local\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"arterial\",\n                        \"elementType\": \"labels\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"boundary\",\n                        \"elementType\": \"geometry.fill\",\n                        \"stylers\": {\n                            \"color\": \"#029fd4\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"building\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"color\": \"#1a5787\"\n                        }\n                    },\n                    {\n                        \"featureType\": \"label\",\n                        \"elementType\": \"all\",\n                        \"stylers\": {\n                            \"visibility\": \"off\"\n                        }\n                    }\n            ]\n        }\n    },\n    series : [\n        {\n            name: 'pm2.5',\n            type: 'scatter',\n            coordinateSystem: 'bmap',\n            data: convertData(data),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: false\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#ddb926'\n                }\n            }\n        },\n        {\n            name: 'Top 5',\n            type: 'effectScatter',\n            coordinateSystem: 'bmap',\n            data: convertData(data.sort(function (a, b) {\n                return b.value - a.value;\n            }).slice(0, 6)),\n            symbolSize: function (val) {\n                return val[2] / 10;\n            },\n            showEffectOn: 'emphasis',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#f4e925',\n                    shadowBlur: 10,\n                    shadowColor: '#333'\n                }\n            },\n            zlevel: 1\n        },\n        {\n            type: 'custom',\n            coordinateSystem: 'bmap',\n            renderItem: renderItem,\n            itemStyle: {\n                normal: {\n                    opacity: 0.5\n                }\n            },\n            animation: false,\n            silent: true,\n            data: [0],\n            z: -10\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3379529844","theme":"","layout":"","viewCount":11,"userName":"乱***法","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgo-52PpQ.png?v=1576418477708","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"乱***法"}}