{"status":0,"data":{"cid":"xp5lLbWrxj","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"折线图 数据联动 动态切换数据","description":"当数据展示不下，动态切换，无需手动，利用timeline","latestVersion":3,"alwaysLatest":1,"createTime":"2020-10-15T02:52:07.000Z","lastUpdateTime":"2020-10-15T02:52:07.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-15T03:27:59.000Z","code":"var tarr = [\"左涉207\",\r\n    \"吕梁209\",\r\n    \"隰吉高速\",\r\n    \"昔榆高速\",\r\n    \"离隰高速\",\r\n    \"黎霍高速\"\r\n];\r\nvar arr = [{\r\n        name: '内容一',\r\n        data: ['12', '23', '34', '4', '15', '76']\r\n    }, {\r\n        name: '内容二',\r\n        data: ['15', '26', '37', '54', '57', '36']\r\n    },\r\n\r\n];\r\n\r\n\r\n\r\n\r\n\r\nvar pj = function(v, x) {\r\n    return v.concat(x);\r\n}\r\n\r\nvar dataArrs = []\r\nvar setDataObj = function() {\r\n    for (let key in tarr) {\r\n\r\n        if (key == 0) {\r\n            dataArrs.push({\r\n                xAxis: {\r\n                    'data': [tarr[tarr.length - 1], tarr[Number(key)], tarr[Number(key) + 1]]\r\n                },\r\n                name: tarr[key],\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: pj(arr[0].data.slice(arr[0].data.length - 1), arr[0].data.slice(0, 2)), //0 军委首长 数据3条 第一天线 1月份 2y月份 月份数据3y\r\n                    },\r\n                    {\r\n                        data: pj(arr[1].data.slice(arr[1].data.length - 1), arr[1].data.slice(0, 2)), //第二条线 1军委机关及院领导\r\n                    },\r\n\r\n                ],\r\n            })\r\n        } else if (key == tarr.length - 1) {\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                xAxis: {\r\n                    'data': [tarr[tarr.length - 2], tarr[tarr.length - 1], tarr[0]]\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: pj(arr[0].data.slice(arr[0].data.length - 2), arr[0].data.slice(0, 1)),\r\n                    },\r\n                    {\r\n                        data: pj(arr[1].data.slice(arr[1].data.length - 2), arr[1].data.slice(0, 1)),\r\n                    },\r\n\r\n                ],\r\n            })\r\n        } else {\r\n\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                xAxis: {\r\n                    'data': [tarr[Number(key) - 1], tarr[Number(key)], tarr[Number(key) + 1]]\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: arr[0].data.slice(key - 1, Number(key) + 2),\r\n                    },\r\n                    {\r\n                        data: arr[1].data.slice(key - 1, Number(key) + 2),\r\n                    },\r\n\r\n                ],\r\n            })\r\n        }\r\n    }\r\n};\r\n\r\n\r\nconsole.log(dataArrs)\r\noption = {\r\n    baseOption: {\r\n        timeline: {\r\n            data: [\"左涉207\",\r\n                \"吕梁209\",\r\n                \"隰吉高速\",\r\n                \"昔榆高速\",\r\n                \"离隰高速\",\r\n                \"黎霍高速\"\r\n            ],\r\n            axisType: 'category',\r\n            show: true,\r\n            autoPlay: true,\r\n            currentIndex: 0,\r\n            loop: true,\r\n            playInterval: 3000,\r\n            controlStyle: {\r\n                showNextBtn: true,\r\n                showPrevBtn: true,\r\n                showPlayBtn: true\r\n            },\r\n\r\n        },\r\n\r\n        backgroundColor: \"#000f1c\",\r\n        tooltip: {\r\n            'trigger': 'axis'\r\n        },\r\n\r\n        calculable: true,\r\n\r\n        grid: {\r\n            top: \"30%\",\r\n            'y': 10,\r\n            'y2': 80\r\n        },\r\n\r\n\r\n        \"legend\": {\r\n\r\n            x: \"50%\",\r\n            top: \"5%\",\r\n            itemWidth: 15,\r\n            itemHeight: 10,\r\n            itemGap: 30,\r\n            textStyle: {\r\n                color: \"#a6a6a6\",\r\n                fontSize: 12,\r\n            },\r\n            \"data\": ['进场批次', '合格率'],\r\n        },\r\n        xAxis: {\r\n            'type': 'category',\r\n            axisLabel: {\r\n                interval: 0,\r\n                color: \"#a5a8a8\",\r\n                fontSize: \"12\",\r\n            },\r\n\r\n        },\r\n        yAxis: [{\r\n                type: \"value\",\r\n                name: \"数量\",\r\n                nameTextStyle: {\r\n                    color: \"#a5a8a8\",\r\n                    align: \"right\",\r\n                    lineHeight: 10,\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: \"#858B8E\",\r\n                    },\r\n                },\r\n                axisTick: {\r\n                    show: false,\r\n                },\r\n                axisLabel: {\r\n                    interval: 0,\r\n                    color: \"#a5a8a8\",\r\n                    fontSize: \"12\",\r\n                },\r\n\r\n                splitLine: {\r\n                    show: true,\r\n                    lineStyle: {\r\n                        type: \"dotted\",\r\n                        color: [\"#212E37\"],\r\n                    },\r\n                },\r\n            },\r\n            {\r\n                type: \"value\",\r\n                name: \"\",\r\n                nameTextStyle: {\r\n                    color: \"#a5a8a8\",\r\n                    align: \"right\",\r\n                    lineHeight: 10,\r\n                },\r\n                axisLabel: {\r\n                    show: true,\r\n                    interval: \"auto\",\r\n                    formatter: \"{value} %\",\r\n                    color: \"#a5a8a8\",\r\n                    fontSize: \"12\",\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        color: \"#858B8E\",\r\n                    },\r\n                },\r\n                axisTick: {\r\n                    show: false,\r\n                },\r\n                min: 0,\r\n                max: 100,\r\n                spiltNunmer: 10,\r\n                splitLine: {\r\n                    show: false,\r\n                    lineStyle: {\r\n                        type: \"dotted\",\r\n                        color: [\"#212E37\"],\r\n                    },\r\n                },\r\n                splitArea: {\r\n                    show: false,\r\n                },\r\n            },\r\n        ],\r\n        series: [{\r\n                type: 'line',\r\n                barWidth: 50,\r\n                animation: false,\r\n                symbol: 'circle',\r\n                symbolSize: 25,\r\n                data: [100, 100, 100],\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'transparent',\r\n                        opacity: 0.8\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                }\r\n\r\n            },\r\n            {\r\n                'name': '进场批次',\r\n                'yAxisIndex': 1,\r\n                'type': 'line',\r\n                smooth: false, //是否平滑\r\n                showAllSymbol: true,\r\n                symbol: 'circle',\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    normal: {\r\n                        color: \"#F8E240\",\r\n                        shadowColor: 'rgba(0, 0, 0, .3)',\r\n                        shadowBlur: 0,\r\n                        shadowOffsetY: 5,\r\n                        shadowOffsetX: 5,\r\n                    },\r\n                },\r\n                label: {\r\n                    show: true,\r\n                    position: 'top',\r\n                    textStyle: {\r\n                        color: '#F8E240',\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    color: \"#F8E240\",\r\n                    borderColor: \"#fff\",\r\n                    borderWidth: 3,\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 2,\r\n                    shadowOffsetX: 2,\r\n                },\r\n\r\n                'data': [10, 10, 10], //首长数据3条 第一天线javascript:;\r\n\r\n\r\n            },\r\n            {\r\n\r\n                'name': '合格率',\r\n                'yAxisIndex': 1,\r\n                'type': 'line',\r\n                smooth: false, //是否平滑\r\n                showAllSymbol: true,\r\n                symbol: 'circle',\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    normal: {\r\n                        color: \"#1A8AD8\",\r\n                        shadowColor: 'rgba(0, 0, 0, .3)',\r\n                        shadowBlur: 0,\r\n                        shadowOffsetY: 5,\r\n                        shadowOffsetX: 5,\r\n                    },\r\n                },\r\n                label: {\r\n                    show: true,\r\n                    position: 'top',\r\n                    textStyle: {\r\n                        color: '#1A8AD8',\r\n                    }\r\n                },\r\n\r\n                itemStyle: {\r\n                    color: \"#1A8AD8\",\r\n                    borderColor: \"#fff\",\r\n                    borderWidth: 3,\r\n                    shadowColor: 'rgba(0, 0, 0, .3)',\r\n                    shadowBlur: 0,\r\n                    shadowOffsetY: 2,\r\n                    shadowOffsetX: 2,\r\n                },\r\n\r\n                'data': [20, 20, 20], //第二条线\r\n\r\n\r\n            },\r\n\r\n        ],\r\n    },\r\n    options: dataArrs,\r\n};\r\n\r\nsetDataObj();","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":332,"userName":"S***l","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xp5lLbWrxj.png?v=1602732479915","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","timeline","tooltip"],"customTags":[],"updaterUserName":"S***l"}}