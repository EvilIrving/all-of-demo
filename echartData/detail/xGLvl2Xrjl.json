{"status":0,"data":{"cid":"xGLvl2Xrjl","authorUid":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","authorUserName":"l***l","title":"不同性别下各个等级人数占比","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-04-23T06:50:39.000Z","lastUpdateTime":"2020-04-23T06:50:39.000Z","auth":2,"uid":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-23T06:50:39.000Z","code":"   var colorList = [\n       '#2f54eb',\n       '#feb513',\n       '#30ca40',\n       '#a147eb',\n       '#fcec13',\n       '#8b572a',\n       '#e0109c',\n       '#fc605f',\n       '#50e3c2',\n       '#6879ff',\n   ]\n   var sum = function(arr) {\n       return arr.reduce(function(prev, curr, idx, arr) {\n           return prev + curr\n       })\n   }\n   var round = function round(value, decimals) {\n       return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals)\n   }\n   var ratio = function(arr, sum) {\n       return arr.map(function(item) {\n           return (round(item / sum, 3) * 100).toFixed(1)\n       })\n   }\n\n   var riskList = [{\n       level: \"中\",\n       gender: \"女\",\n       value: 333333\n   }, {\n       level: \"中\",\n       gender: \"男\",\n       value: 555555\n   }, {\n       level: \"低\",\n       gender: \"女\",\n       value: 777777\n   }, {\n       level: \"高\",\n       gender: \"男\",\n       value: 66666\n   }, {\n       level: \"高\",\n       gender: \"女\",\n       value: 999999\n   }, {\n       level: \"低\",\n       gender: \"男\",\n       value: 222222\n   }]\n   // var count = 0\n   var man = riskList.filter(x => {\n       return x.gender === '男'\n   })\n   var woman = riskList.filter(x => {\n       return x.gender === '女'\n   })\n   var womanlist = []\n   var manlist = []\n   // 根据 排序数组\n   var orderRiskList = ['高', '中', '低']\n   orderRiskList.forEach(x => {\n       var m = 0\n       man.forEach(item => {\n           if (item.level === x) {\n               m = item.value\n           }\n       })\n       manlist.push(m)\n       var f = 0\n       woman.forEach(item => {\n           if (item.level === x) {\n               f = item.value\n           }\n       })\n       womanlist.push(f)\n   })\n   // 更改数据，以便tooltip显示\n   var mRatio = ratio(manlist, sum(manlist))\n   var fRatio = ratio(womanlist, sum(womanlist))\n   var mData = []\n   var fData = []\n   var blankData = []\n   for (var i = 0; i < orderRiskList.length; i++) {\n       mData.push({\n           name: orderRiskList[i],\n           value: isNaN(Number(mRatio[i])) ? '' : mRatio[i],\n           // value: 0,\n           value2: manlist[i],\n           tooltip: {\n               formatter: function(params) {\n                   var s = ''\n                   s += '等级：' + params.data.name + '</br>'\n                   s += '人数: ' + Number(params.data.value2).toLocaleString() + '</br>'\n                   s += '占比: ' + params.data.value + '%'\n                   return s\n               }\n           }\n       })\n       fData.push({\n           name: orderRiskList[i],\n           value: isNaN(Number(fRatio[i])) ? '' : fRatio[i],\n           value2: womanlist[i],\n           tooltip: {\n               formatter: function(params) {\n                   var s = ''\n                   s += '等级：' + params.data.name + '</br>'\n                   s += '人数: ' + Number(params.data.value2).toLocaleString() + '</br>'\n                   s += '占比: ' + params.data.value + '%'\n                   return s\n               }\n           }\n       })\n       blankData.push({\n           value: 100,\n           tooltip: {\n               formatter: function(params) {\n                   return ''\n               }\n           }\n       })\n   }\n\n   option = {\n       baseOption: {\n           title: {\n               text: '不同性别下各个等级人数占比',\n               left: 'center',\n               textStyle: {\n                   fontSize: 18,\n                   fontWeight: 700\n               }\n           },\n           tooltip: {\n               trigger: 'item'\n           },\n           timeline: {\n               show: false,\n               top: 0,\n               data: []\n           },\n           grid: [{\n                   show: false,\n                   left: '5%',\n                   top: '20',\n                   bottom: '20%',\n                   containLabel: true,\n                   width: '37%'\n               },\n               {\n                   show: false,\n                   left: '52%',\n                   top: '20',\n                   bottom: '20%',\n                   width: '0%'\n               },\n               {\n                   show: false,\n                   right: '2%',\n                   top: '20',\n                   bottom: '20%',\n                   containLabel: true,\n                   width: '37%'\n               }\n           ],\n           xAxis: [{\n                   type: 'value',\n                   inverse: true,\n                   axisLine: {\n                       show: false\n                   },\n                   axisTick: {\n                       show: false\n                   },\n                   position: 'top',\n                   axisLabel: {\n                       show: false\n                   },\n                   splitLine: {\n                       show: false\n                   }\n               },\n               {\n                   gridIndex: 1,\n                   show: false\n               },\n               {\n                   gridIndex: 2,\n                   axisLine: {\n                       show: false\n                   },\n                   axisTick: {\n                       show: false\n                   },\n                   position: 'top',\n                   axisLabel: {\n                       show: false\n                   },\n                   splitLine: {\n                       show: false\n                   }\n               }\n           ],\n           yAxis: [{\n                   type: 'category',\n                   inverse: true,\n                   position: 'right',\n                   axisLine: {\n                       show: false\n                   },\n                   axisTick: {\n                       show: false\n                   },\n                   axisLabel: {\n                       show: false\n                   },\n                   data: orderRiskList\n               },\n               {\n                   gridIndex: 1,\n                   type: 'category',\n                   inverse: true,\n                   position: 'left',\n                   axisLine: {\n                       show: false\n                   },\n                   axisTick: {\n                       show: false\n                   },\n                   axisLabel: {\n                       show: true,\n                       textStyle: {\n                           color: '#333',\n                           fontSize: 14\n                       }\n                   },\n                   data: orderRiskList.map(function(value) {\n                       return {\n                           value: value,\n                           textStyle: {\n                               align: 'center'\n                           }\n                       }\n                   })\n               },\n               {\n                   gridIndex: 2,\n                   type: 'category',\n                   inverse: true,\n                   position: 'left',\n                   axisLine: {\n                       show: false\n                   },\n                   axisTick: {\n                       show: false\n                   },\n                   axisLabel: {\n                       show: false\n                   },\n                   data: orderRiskList\n               }\n           ],\n           series: []\n       },\n       options: [{\n           series: [{\n                   type: 'bar',\n                   xAxisIndex: 0,\n                   yAxisIndex: 0,\n                   itemStyle: {\n                       normal: {\n                           show: false,\n                           color: 'rgba(65, 217, 199, 0.1)',\n                           borderWidth: 0\n                       },\n                       emphasis: {\n                           color: 'rgba(65, 217, 199, 0.1)'\n                       }\n                   },\n                   barGap: '-100%',\n                   barWidth: '50%',\n                   data: blankData\n               },\n               {\n                   name: '男',\n                   type: 'bar',\n                   xAxisIndex: 0,\n                   yAxisIndex: 0,\n                   itemStyle: {\n                       normal: {\n                           show: true,\n                           color: function(params) {\n                               return colorList[params.dataIndex]\n                           },\n                           borderWidth: 0,\n                           borderColor: '#f8d517'\n                       }\n                   },\n                   label: {\n                       normal: {\n                           show: true,\n                           formatter: (series) => {\n                               return mData[series.dataIndex].value + '%'\n                           },\n                           position: 'left',\n                           textStyle: {\n                               color: '#223273',\n                               fontSize: 14\n                           }\n                       }\n                   },\n                   barWidth: '50%',\n                   data: mData,\n                   markPoint: {\n                       symbol: 'image://data:image/svg+xml;base64,PHN2ZyBpZD0i57uEXzI5MDgiIGRhdGEtbmFtZT0i57uEIDI5MDgiIHhtbG5zPSJodHR' +\n                           'wOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9' +\n                           'IjAgMCAzNi45OTkgNzEuNDgiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6IHVybCgjb' +\n                           'GluZWFyLWdyYWRpZW50KTsKICAgICAgfQogICAgPC9zdHlsZT4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW' +\n                           '50IiB4MT0iMC41IiB5MT0iLTAuMzU2IiB4Mj0iMC41IiB5Mj0iMSIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPgo' +\n                           'gICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMxYmM4ZmMiIHN0b3Atb3BhY2l0eT0iMC43OCIvPgogICAgICA8c3Rv' +\n                           'cCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMTg0YjkiIHN0b3Atb3BhY2l0eT0iMC42OTQiLz4KICAgIDwvbGluZWFyR3JhZGllb' +\n                           'nQ+CiAgPC9kZWZzPgogIDxwYXRoIGlkPSLot6/lvoRfMjM1IiBkYXRhLW5hbWU9Iui3r+W+hCAyMzUiIGNsYXNzPSJjbHMtMSIgZD' +\n                           '0iTTEyLjg5MSwxNDguMzc5QTE4Ljg3NiwxOC44NzYsMCwwLDAsMCwxNjYuNDg2djEyLjkyMWExLjE2NywxLjE2NywwLDAsMCwxLjE' +\n                           '1NiwxLjE1Nkg3LjM5NHYxNS42YS45NzQuOTc0LDAsMCwwLC45NzguOTYzSDI4LjYyN2EuOTc0Ljk3NCwwLDAsMCwuOTc4LS45NjN2' +\n                           'LTE1LjZoNC44MTZBMi41OCwyLjU4LDAsMCwwLDM3LDE3Ny45ODRWMTY1LjMzYzAtMTEuNjQ3LTEyLjEyMS0yMC43NDUtMjQuMTA4L' +\n                           'TE2Ljk1MVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTEyNS42NDkpIi8+CiAgPHBhdGggaWQ9Iui3r+W+hF8yMzYiIGRhdGEtbm' +\n                           'FtZT0i6Lev5b6EIDIzNiIgY2xhc3M9ImNscy0xIiBkPSJNNzMuOCwxMC43QTEwLjc1LDEwLjc1LDAsMSwwLDYzLjA1OCwyMS40LDE' +\n                           'wLjc0NCwxMC43NDQsMCwwLDAsNzMuOCwxMC43Wm0wLDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NC41NSkiLz4KPC9zdmc+Cg==',\n                       symbolSize: [25, 50],\n                       label: {\n                           position: 'right',\n                           padding: [0, 0, 0, 10],\n                           fontSize: 12,\n                           color: '#333333',\n                           formatter: '男'\n                       },\n                       // markPoint 图片的位置\n                       data: [{\n                           name: '某个屏幕坐标',\n                           x: '30%',\n                           y: '85%'\n                       }],\n                       silent: true\n                   }\n               },\n               {\n                   type: 'bar',\n                   xAxisIndex: 2,\n                   yAxisIndex: 2,\n                   itemStyle: {\n                       normal: {\n                           show: true,\n                           color: 'rgba(65, 217, 199, 0.1)',\n                           borderWidth: 0\n                       },\n                       emphasis: {\n                           color: 'rgba(65, 217, 199, 0.1)'\n                       }\n                   },\n                   barGap: '-100%',\n                   barWidth: '50%',\n                   data: blankData\n               },\n               {\n                   name: '女',\n                   type: 'bar',\n                   xAxisIndex: 2,\n                   yAxisIndex: 2,\n                   itemStyle: {\n                       normal: {\n                           show: true,\n                           color: function(params) {\n                               return colorList[params.dataIndex]\n                           },\n                           borderWidth: 0,\n                           borderColor: '#f39c11'\n                       }\n                   },\n                   label: {\n                       normal: {\n                           show: true,\n                           formatter: (series) => {\n                               return fData[series.dataIndex].value + '%'\n                           },\n                           position: 'right',\n                           textStyle: {\n                               color: '#223273',\n                               fontSize: 14\n                           }\n                       }\n                   },\n                   barWidth: '50%',\n                   data: fData,\n                   markPoint: {\n                       symbol: 'image://data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5' +\n                           'rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzcuOTYgNjkuNSI+CiAgPGRlZnM+CiAgICA8c3R5' +\n                           'bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogdXJsKCNsaW5lYXItZ3JhZGllbnQpOwogICAgICB9CiAgICA8L3N0eWxlP' +\n                           'gogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQiIHgxPSIwLjUiIHgyPSIwLjUiIHkyPSIxIiBncmFkaWVudF' +\n                           'VuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAzZWJiNyIvPgogICA' +\n                           'gICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMGEzN2YiIHN0b3Atb3BhY2l0eT0iMC42OTQiLz4KICAgIDwvbGluZWFy' +\n                           'R3JhZGllbnQ+CiAgPC9kZWZzPgogIDxnIGlkPSLnu4RfMjkwOSIgZGF0YS1uYW1lPSLnu4QgMjkwOSIgdHJhbnNmb3JtPSJ0cmFuc' +\n                           '2xhdGUoMC4wNjIpIj4KICAgIDxwYXRoIGlkPSLot6/lvoRfMjM3IiBkYXRhLW5hbWU9Iui3r+W+hCAyMzciIGNsYXNzPSJjbHMtMS' +\n                           'IgZD0iTTc5LjQzNiwxMC40NjdBMTAuNTE4LDEwLjUxOCwwLDEsMCw2OC45MjUsMjAuOTM0LDEwLjUxMiwxMC41MTIsMCwwLDAsNzk' +\n                           'uNDM2LDEwLjQ2N1ptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDkuOTg2KSIvPgogICAgPHBhdGggaWQ9Iui3r+W+hF8yMzgi' +\n                           'IGRhdGEtbmFtZT0i6Lev5b6EIDIzOCIgY2xhc3M9ImNscy0xIiBkPSJNMzcuNzg1LDE3Ni4wODNsLTUuNzU1LTIyLjVhMTMuNDE5L' +\n                           'DEzLjQxOSwwLDAsMC0yNi4xODItLjIxN2wtNS44LDIyLjdhMy44MjUsMy44MjUsMCwwLDAsLjY2NywzLjIxOCwzLjc1OCwzLjc1OC' +\n                           'wwLDAsMCwyLjkyOCwxLjQ3OXMyLjgyNy4wNTgsNS4wNi4wNzJjLjcyNSwyLjE0NiwxLjc4Myw1LjI5MiwyLjc1NCw4LjM1QTMuNzI' +\n                           'xLDMuNzIxLDAsMCwwLDE1LDE5MS43NjloNy44NThhMy42NzcsMy42NzcsMCwwLDAsMy41MDgtMi41NTJjLjk3MS0zLjA1OSwyLjA1' +\n                           'OS02LjMwNiwyLjc2OS04LjQ1MiwyLjIzMy0uMDE1LDUuMDYtLjAyOSw1LjA2LS4wMjlhMy43NjYsMy43NjYsMCwwLDAsMi45MjgtM' +\n                           'S40NjQsMy42ODUsMy42ODUsMCwwLDAsLjY2Ny0zLjE4OVptMCwwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMjIuMjY5KSIvPg' +\n                           'ogIDwvZz4KPC9zdmc+Cg==',\n                       symbolSize: [25, 50],\n                       label: {\n                           position: 'right',\n                           padding: [0, 0, 0, 10],\n                           fontSize: 12,\n                           color: '#333333',\n                           formatter: '女'\n                       },\n                       // markPoint 图片的位置\n                       data: [{\n                           name: '某个屏幕坐标',\n                           x: '70%',\n                           y: '85%'\n                       }],\n                       silent: true\n                   }\n               }\n           ]\n       }]\n   }","html":"","externalScripts":"","updaterUID":"obd-oDVacrrTHNUcUgC65H1tIVQwHw1h410","theme":"","layout":"","viewCount":270,"userName":"l***l","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xGLvl2Xrjl.png?v=1587624639819","isCustomThumbnail":1,"builtinTags":["category-work","grid","markPoint","series-bar","timeline","title","tooltip"],"customTags":[],"updaterUserName":"l***l"}}