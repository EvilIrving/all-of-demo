{"status":0,"data":{"cid":"xrJrbrxNuZ","authorUid":"obd-oFbwwcc7SlYVyKNBU9Y2XjhwaP1BV5o","authorUserName":"相***q","title":"动态饼图","description":"循环高亮各个饼块","latestVersion":2,"alwaysLatest":0,"createTime":"2021-04-28T09:18:10.000Z","lastUpdateTime":"2021-04-28T09:18:10.000Z","auth":2,"uid":"obd-oFbwwcc7SlYVyKNBU9Y2XjhwaP1BV5o","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.1","versionCreateTime":"2021-04-28T09:38:15.000Z","code":"var data = [\n  {\n    name: '发展',\n    value: 21.5,\n  },\n  {\n    name: '生态',\n    value: 28\n  },\n  {\n    name: '开放',\n    value: 45\n  },\n  {\n    name: '结构',\n    value: 78\n  },\n  {\n    name: '创新',\n    value: 84\n  }\n];\noption = {\n  tooltip: {},\n  title: {\n    text: 'Awesome Chart',\n  },\n  dataset: {\n    source: data\n  },\n  series: [\n    {\n      type: 'pie',\n      radius: ['40%', '80%'],\n      encode: {\n        tooltip: ['name', 'value'],\n        value: 'value'\n      },\n      label: {\n        show: true,\n        formatter: function(params) {\n          console.log('label', params)\n          return params.value.name\n        }\n      }\n    },\n  ],\n  graphic: {\n    elements: [\n      {\n        type: 'group',\n        left: 'center',\n        top: 'center',\n        children: [\n          {\n            type: 'text',\n            id: 'text1',\n            // y: 15,\n            // left: 'center',\n            // top: 'center',\n            style: {\n              text: '发展',\n              font: '30px bolder',\n              textAlign: 'center'\n            }\n          },\n          {\n            type: 'text',\n            id: 'text2',\n            // left: 'center',\n            // top: 'center',\n            y: 35,\n            // x: -5,\n            style: {\n              text: '21.5',\n              font: '40px bolder',\n              textAlign: 'center'\n            }\n          } \n        ]\n      }\n    ]\n  }\n};\n\nmyChart.on('highlight', function(params) {\n  console.log('高亮事件', params)\n  const itemData = data[params.dataIndex]\n  const { name, value } = itemData\n  \n  myChart.setOption({\n    graphic: {\n      elements: [\n        {\n          id: 'text1',\n          style: {\n            text: name,\n            font: '30px bolder',\n            textAlign: 'center'\n          }\n        },\n        {\n          id: 'text2',\n          style: {\n            text: value,\n            font: '40px bolder',\n            textAlign: 'center'\n          }\n        }\n      ]\n    }\n  })\n})\nlet dataIndex = 0\nmyChart.dispatchAction({\n    type: 'highlight',\n    seriesIndex: 0,\n    dataIndex\n  })\nsetInterval(function() {\n  myChart.dispatchAction({\n    type: 'downplay',\n    seriesIndex: 0,\n    dataIndex\n  })\n  dataIndex = dataIndex >= data.length - 1 ? 0 : (dataIndex + 1)\n  myChart.dispatchAction({\n    type: 'highlight',\n    seriesIndex: 0,\n    dataIndex\n  })\n}, 2000)\n","html":"","externalScripts":"","updaterUID":"obd-oFbwwcc7SlYVyKNBU9Y2XjhwaP1BV5o","theme":"","layout":"","viewCount":0,"userName":"相***q","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJrbrxNuZ.png?v=1619602695445","isCustomThumbnail":0,"builtinTags":["category-work","dataset","graphic","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"相***q"}}