{"status":0,"data":{"cid":"x1AXCDc8_2","authorUid":"obd-ot7vz0Iqi9MElhgpxFsRzfmu-9PBG8u","authorUserName":"q***p","title":"线上品类TOP图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-07-01T10:11:03.000Z","lastUpdateTime":"2021-07-01T10:11:03.000Z","auth":2,"uid":"obd-ot7vz0Iqi9MElhgpxFsRzfmu-9PBG8u","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-01T10:11:03.000Z","code":"// 按顺序排列从大到小\nlet nameData = ['包装-礼盒', '包装-烘焙', '包装-鱼豆腐', '包装-鱼糜制品', '包装-豆干'];\nlet valueData = [2263.82, 1869.34, 729.01, 568.65, 335.37];\nlet proportion = ['35%', '26%', '23%', '15%', '8.9%'];\n\nlet color = ['#ff9500', '#f45333', '#027fff'];\nlet color1 = ['#ffb349', '#a324dd', '#4aa4ff'];\n\nlet lineY = [];\nlet lineT = [];\n\nfor (let i = 0; i < nameData.length; i++) {\n    // 统一为下标1颜色，也就是第二个颜色\n    let x = 1;\n\n    /*let x = i\n                // 从下标2开始，也就是第三条数据开始，使用第三种颜色\n                if (x > 1) {\n                    x = 2\n                }*/\n    let data = {\n        name: nameData[i],\n        color: color[x],\n        value: valueData[i],\n        proportion: proportion[i],\n        // echarts柱状图两个柱子之间的间隙（在 series 某一个bar下面加这个即可）\n        barGap: '-100%',\n        itemStyle: {\n            normal: {\n                show: true,\n                color: new echarts.graphic.LinearGradient(\n                    0,\n                    0,\n                    1,\n                    0,\n                    [\n                        {\n                            offset: 0,\n                            color: color[x],\n                        },\n                        {\n                            offset: 1,\n                            color: color1[x],\n                        },\n                    ],\n                    false\n                ),\n                barBorderRadius: 10,\n            },\n            emphasis: {\n                shadowBlur: 15,\n                shadowColor: 'rgba(0, 0, 0, 0.1)',\n            },\n        },\n    };\n    // 用于展示缺省部分的阴影，当前图形的阴影为透明，此代码可以不用\n    let data1 = {\n        // 如果后台给出的数据已经经过倒序排序的话，当前下标可以默认为0，如果给的数据没有倒序排过序，则下标需要自己去计算\n        value: valueData[0],\n        itemStyle: {\n            // 柱状缺省部分颜色\n            color: 'transparent',\n            barBorderRadius: 10,\n        },\n    };\n    lineY.push(data);\n    lineT.push(data1);\n}\n\noption = {\n    // 图形背景颜色\n    backgroundColor: '#efefef',\n    title: {\n        show: false,\n    },\n    tooltip: {\n        trigger: 'item',\n        // formatter: '{a} <br/>{b} ： {c}'\n\n        // 自定义鼠标移入提示样式\n        formatter: (p) => {\n            if (p.seriesName === 'total') {\n                return '';\n            }\n            // 鼠标移入显示的百分比占比为后台给的数据\n            // console.log(p)\n            // 自定义小圆点(颜色、形状和大小等等)\n            return p.seriesName + '<br/>' + p.name + '：' + p.value + '万件' + '（' + p.data.proportion + '）';\n            /*let dotHtml = `<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color: ${p.color.colorStops[0].color}\"></span>`\n                        return p.seriesName + '<br/>' + dotHtml + p.name + '：' + p.value + '万件' + '（' + p.data.proportion + '）'*/\n            // return `${p.seriesName} <br/>${p.name} ： ${p.value}`\n            // return `${p.name}<br/>${p.value}`\n        },\n    },\n    grid: {\n        borderWidth: 0,\n        top: '10%',\n        left: '5%',\n        right: '20%',\n        bottom: '3%',\n    },\n    color: color,\n    yAxis: [\n        {\n            type: 'category',\n            // 是否倒置\n            inverse: true,\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n                inside: false,\n            },\n            data: nameData,\n        },\n        {\n            type: 'category',\n            // 是否倒置\n            inverse: true,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                show: true,\n                // 是否显示在柱状里面\n                inside: false,\n                // 行高针对哪个方位\n                verticalAlign: 'bottom',\n                // 每条柱状后面的文字说明行高，设置为0则为对齐柱状\n                lineHeight: '0',\n                textStyle: {\n                    color: '#f5b334',\n                    fontSize: '14',\n                    fontFamily: 'PingFangSC-Regular',\n                },\n                formatter: function (val) {\n                    return `${val}`;\n                },\n            },\n            splitArea: {\n                show: false,\n            },\n            splitLine: {\n                show: false,\n            },\n            data: valueData,\n        },\n    ],\n    xAxis: {\n        type: 'value',\n        axisTick: {\n            show: false,\n        },\n        axisLine: {\n            show: false,\n        },\n        splitLine: {\n            show: false,\n        },\n        axisLabel: {\n            show: false,\n        },\n    },\n    series: [\n        {\n            name: 'total',\n            type: 'bar',\n            zlevel: 1,\n            // echarts柱状图两个柱子之间的间隙（在 series 某一个bar下面加这个即可）\n            barGap: '-100%',\n            barWidth: '10px',\n            data: lineT,\n            legendHoverLink: false,\n        },\n        {\n            name: '线上品类TOP',\n            type: 'bar',\n            zlevel: 2,\n            barWidth: '10px',\n            data: lineY,\n            label: {\n                normal: {\n                    color: '#b3ccf8',\n                    show: true,\n                    position: [0, '-24px'],\n                    textStyle: {\n                        fontSize: 16,\n                    },\n                    formatter: function (a) {\n                        let num = '';\n                        let str = '';\n                        num = a.dataIndex + 1;\n\n                        // 在小于10的序号前补0\n                        /*if (a.dataIndex + 1 < 10) {\n                                    num = '0' + (a.dataIndex + 1);\n                                } else {\n                                    num = (a.dataIndex + 1);\n                                }*/\n\n                        // 可以给每一条数据单独赋予不同的颜色，目前没有这个需求\n                        /*if (a.dataIndex === 0) {\n                                    str = `{color1|${num}} {color4|${a.name}}`\n                                } else if (a.dataIndex === 1) {\n                                    str = `{color2|${num}} {color4|${a.name}}`\n                                } else {\n                                    str = `{color3|${num}} {color4|${a.name}}`\n                                }*/\n\n                        // 目前的需求为统一为同一种颜色\n                        // str = `{color1|${num}} {color4|${a.name}}`\n                        str = `{nt|${num}} {color4|${a.name}}`;\n                        return str;\n                    },\n                    rich: {\n                        // 目前的需求为统一为同一种颜色，需要时再取消注释\n                        /*color1: {\n                                    color: '#ff9500',\n                                    fontWeight: 700\n                                },\n                                color2: {\n                                    color: '#02d8f9',\n                                    fontWeight: 700\n                                },\n                                color3: {\n                                    color: '#027fff',\n                                    fontWeight: 700\n                                },*/\n                        // 柱状上方字体颜色\n                        color4: {\n                            color: '#d9a033',\n                        },\n                        nt: {\n                            color: '#474139',\n                            backgroundColor: '#eaac33',\n                            width: 20,\n                            height: 20,\n                            fontWeight: 700,\n                            align: 'center',\n                            // padding:[0,0,0,0],\n                            fontSize: '14',\n                            borderRadius: 100,\n                        },\n                    },\n                },\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-ot7vz0Iqi9MElhgpxFsRzfmu-9PBG8u","theme":"","layout":"","viewCount":0,"userName":"q***p","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1AXCDc8_2.png?v=1625134263458","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":[],"updaterUserName":"q***p"}}