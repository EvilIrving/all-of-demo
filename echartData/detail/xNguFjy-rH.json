{"status":0,"data":{"cid":"xNguFjy-rH","authorUid":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","authorUserName":"b***n","title":"柱状图","description":"自定义提示文字","latestVersion":2,"alwaysLatest":0,"createTime":"2021-11-08T07:16:19.000Z","lastUpdateTime":"2021-11-08T10:02:39.000Z","auth":2,"uid":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-08T10:02:40.000Z","code":"//自定义提示文字\r\nvar getname = ['A','B','C','D'];\r\nvar getvalue =[23,45,23,43];\r\nvar getvalue2 =[43,43,33,39];\r\nvar getvalue3 =[83,63,83,79];\r\n\r\n//计算最大值  \r\nfunction calMax(arr) {\r\n    let max = 0;\r\n    arr.forEach((el) => {\r\n        el.forEach((el1) => {\r\n            if (!(el1 === undefined || el1 === '')) {\r\n                if (max < el1) {\r\n                    max = el1;\r\n                }\r\n            }\r\n        })\r\n    })\r\n    let maxint = Math.ceil(max / 9.5);\r\n    //不让最高的值超过最上面的刻度    \r\n    let maxval = maxint * 10;\r\n    //让显示的刻度是整数    \r\n    return maxval;\r\n}\r\n\r\n\r\nvar max = Math.ceil(calMax([getvalue]) / 100) * 100;\r\n\r\n\r\nvar option = {\r\n    grid: {\r\n        top: 80,\r\n        bottom: 40,\r\n        left: 50,\r\n        right: 50\r\n    },\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'none'\r\n        },\r\n        formatter: function(params){\r\n            return '总床位数：'+getvalue3[params[0].dataIndex] + \r\n            '<br> 入住人数：' + getvalue[params[0].dataIndex]+\r\n             '<br> 未入住：' + getvalue2[params[0].dataIndex]\r\n            },\r\n    },\r\n    legend: {\r\n        data: [{\r\n            name: '住宿人数',\r\n        }, {\r\n            name: '未住宿人数',\r\n        }],\r\n        type: \"scroll\",\r\n        right: '15',\r\n        top: '10',\r\n        itemGap: 25,\r\n        itemWidth: 16,\r\n        itemHeight: 16,\r\n        textStyle: {\r\n            fontSize: '13',\r\n          \r\n        },\r\n\r\n    },\r\n    xAxis: [{\r\n        data: getname,\r\n        axisLabel: {\r\n            margin: 10,\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#333333',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n    }],\r\n    yAxis: [{\r\n        type: 'value',\r\n        \r\n        name: '数量（人）',\r\n        nameTextStyle: {\r\n            color: '#666666',\r\n            fontSize: 13,\r\n            padding: [0, 0, 0, 60]\r\n        },\r\n        axisLabel: {\r\n            formatter: function(value) {\r\n                num = value\r\n                if (num && num != 'undefined' && num != 'null') {\r\n                    let numS = num;\r\n                    numS = numS.toString();\r\n                    numS = numS.replace(/,/gi, '');\r\n                    return numS;\r\n                } else {\r\n                    return num;\r\n                }\r\n            },\r\n            color: '#656565',\r\n            textStyle: {\r\n                fontSize: 13\r\n            },\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#FFAE00',\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: '#D1D1D1',\r\n                  type:'dashed'\r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n        name: \"住宿人数\",\r\n        type: 'bar',\r\n        data: getvalue,\r\n        barWidth: '10px',\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#00d0bf'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#00d0bf'\r\n                }], false),\r\n            \r\n            }\r\n        },\r\n    },\r\n    {\r\n        name: \"未住宿人数\",\r\n        type: 'bar',\r\n        data: getvalue2,\r\n        barWidth: '10px',\r\n        itemStyle: {\r\n            normal: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: '#3a85d3'\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#3a85d3'\r\n                }], false),\r\n            \r\n            }\r\n        },\r\n    }\r\n    \r\n    ]\r\n};\r\nreturn option;","html":"","externalScripts":"","updaterUID":"obd-oCShU4_h1_MRDgYsmGGGtKmFk6Es93f","theme":"","layout":"","viewCount":0,"userName":"b***n","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNguFjy-rH.png?v=1636365760107","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title"],"customTags":[],"updaterUserName":"b***n"}}