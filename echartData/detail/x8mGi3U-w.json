{"status":0,"data":{"cid":"x8mGi3U-w","authorUid":"bd-4128622076","authorUserName":"执***岸","title":"好多图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-21T03:35:31.000Z","lastUpdateTime":"2019-11-21T03:35:31.000Z","auth":1,"uid":"bd-4128622076","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-21T03:35:31.000Z","code":"/* eslint-disable */\nconst res = {\n    responseCode: 10001,\n    responseMsg: 'ok',\n    data: {\n        //代表有哪些项会显示，不传不显示，传了再去下面匹配数值\n        xAxis: [\"currentSalary\", \"PAStandardSalary\", \"PAComparablePay\", \"comparablePay\", \"smartSalary\", \"expectationSalary\", \"reference\"],\n        //智能推荐\n        smartSalary: {\n            welfare: 0.8, //福利\n            bonus: 6, //奖金\n            fixedSalary: 30, //固薪\n        },\n        //候选人当前薪酬\n        currentSalary: {\n            welfare: 1.2, //福利\n            bonus: 5, //奖金\n            fixedSalary: 12, //固薪\n        },\n        //候选人期望薪酬\n        expectationSalary: {\n            salary: 30\n        },\n        //参考线\n        reference: {\n            recommended: 20,\n            design: 15\n        },\n        //pa可比薪酬\n        PAComparablePay: [{\n            salary: 11,\n        }, {\n            salary: 17,\n        }, {\n            salary: 13,\n        }, {\n            salary: 27,\n        }, {\n            salary: 12,\n        }, {\n            salary: 15,\n        }, {\n            salary: 19,\n        }, {\n            salary: 21,\n        }, ],\n        //pa标准薪酬\n        PAStandardSalary: {\n            upperLimit: 29,\n            aQuarterUpper: 27,\n            medianValue: 25,\n            aQuarterLower: 23,\n            lowerLimit: 5,\n        },\n        //市场可比薪酬\n        comparablePay: {\n            upperLimit: 29,\n            aQuarterUpper: 27,\n            medianValue: 25,\n            aQuarterLower: 23,\n            lowerLimit: 5,\n        }\n    }\n}\n//坐标字典\nconst MAPS = {\n    'currentSalary': '候选人当前薪酬',\n    'PAStandardSalary': 'pa标准薪酬',\n    'PAComparablePay': 'pa可比薪酬',\n    'comparablePay': '市场可比薪酬',\n    'smartSalary': '智能荐薪',\n    'expectationSalary': null,\n    'reference': null\n}\nconst MAP_KEY = Object.keys(MAPS)\nlet space = []; //补空位\nlet xAxis = [];\nlet series = [];\n\nfunction create_options(item, name = null, x = null) {\n    if (name) {\n        xAxis = [...xAxis, name]\n    }\n    switch (item) {\n        case 'smartSalary':\n        case 'currentSalary':\n            series.push({\n                name: '固薪',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, res.data[item].fixedSalary],\n                itemStyle: {\n                    color: '#A3ADD6'\n                }\n            }, {\n                name: '奖金',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, res.data[item].bonus],\n                itemStyle: {\n                    color: '#F0C2AF'\n                }\n            }, {\n                name: '福利',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, res.data[item].welfare],\n                label: {\n                    show: true,\n                    position: 'top',\n                    color: '#7D8292',\n                    formatter(params) {\n                        let total = 0;\n                        Object.entries(res.data[item]).map(([key, value]) => {\n                            total = total + +value\n                        })\n                        return `${total}万`\n                    }\n                },\n                itemStyle: {\n                    color: '#F3DD94'\n                },\n            })\n            break\n        case 'PAComparablePay':\n            let float = [];\n            const len = x.length;\n            const index = x.indexOf('PAComparablePay');\n            const min = (300 / len) * index + (300 / len) / 4\n            const between = (300 / len) / 2\n            res.data.PAComparablePay.map(item => {\n                const x = min + Math.floor(Math.random() * between)\n                float.push([x, item.salary])\n            })\n            series.push({\n                symbolSize: 4,\n                data: float,\n                xAxisIndex: 1,\n                type: 'scatter',\n                itemStyle: {\n                    color: '#6A6B78'\n                }\n            })\n            break;\n        case 'reference':\n            series.push({\n                type: 'line',\n                xAxisIndex: 2,\n                name: '推荐年薪',\n                data: [\n                    [0, res.data[item].recommended],\n                    [1, res.data[item].recommended]\n                ],\n                label: {\n                    show: true,\n                    formatter(params) {\n                        if (params.data[0] > 0) {\n                            return params.data[1] + '万'\n                        } else {\n                            return ''\n                        }\n                    },\n                    color: '#7D8292',\n                    offset: [20, 13]\n                },\n                symbol: 'circle',\n                symbolSize: 5,\n                zlevel: 99,\n                lineStyle: {\n                    type: 'dashed',\n                    width: 1,\n                    color: '#FD6720',\n                }\n            }, {\n                type: 'line',\n                name: '设计年薪',\n                xAxisIndex: 2,\n                data: [\n                    [0, res.data[item].design],\n                    [1, res.data[item].design]\n                ],\n                label: {\n                    show: true,\n                    formatter(params) {\n                        if (params.data[0] > 0) {\n                            return params.data[1] + '万'\n                        } else {\n                            return ''\n                        }\n                    },\n                    color: '#7D8292',\n                    offset: [20, 13]\n                },\n                zlevel: 99,\n                symbol: 'circle',\n                symbolSize: 5,\n                lineStyle: {\n                    type: 'dashed',\n                    width: 1,\n                    color: 'blue',\n                }\n            })\n            break;\n        case 'comparablePay':\n        case 'PAStandardSalary':\n            let itemStyle = {\n                emphasis: {\n                    color: \"#E6F1FF\",\n                    borderColor: '#fff'\n                }\n            }\n            series.push({\n                name: '下限',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, {\n                    value: res.data[item].lowerLimit,\n                    label: {\n                        formatter: function(data) {\n                            return `{b|}\\n\\n{a| ${res.data[item].lowerLimit}万}`\n                        },\n                        show: true,\n                        width: 30,\n                        position: [0, 0, 0, 0],\n                        rich: {\n                            b: {\n                                width: 30,\n                                height: 2,\n                                color: \"#fff\",\n                                backgroundColor: \"#55aee6\",\n                                verticalAlign: 'top'\n                            },\n                            a: {\n                                color: \"#8e909a\",\n                                width: 100,\n                            },\n                        }\n                    },\n                    // itemStyle: itemStyle,\n                }],\n                barWidth: '30',\n                barGap: '10%',\n                itemStyle: {\n                    color: '#fff',\n                    borderColor: '#fff'\n                }\n            }, {\n                name: '下四分之一',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, {\n                    value: res.data[item].aQuarterLower - res.data[item].lowerLimit,\n                    label: {\n                        formatter: function(data) {\n                            return `{b|}{a|}`\n                        },\n                        show: true,\n                        position: [0, 0, 0, 0],\n                        rich: {\n                            b: {\n                                width: 30,\n                                height: 2,\n                                color: \"#fff\",\n                                backgroundColor: \"#55aee6\",\n                                verticalAlign: 'top'\n                            },\n                            a: {\n                                color: \"#8e909a\",\n                                width: 100,\n\n                            },\n                        }\n                    },\n                    itemStyle: itemStyle,\n                }],\n                itemStyle: {\n                    color: '#E6F1FF',\n                }\n            }, {\n                name: '中位值',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, {\n                    value: res.data[item].medianValue - res.data[item].aQuarterLower,\n                    label: {\n                        formatter: function(data) {\n                            return `{b|}{a|}`\n                        },\n                        show: true,\n                        position: [0, 0, 0, 0],\n                        rich: {\n                            b: {\n                                width: 30,\n                                height: 2,\n                                color: \"#fff\",\n                                backgroundColor: \"#55aee6\",\n                                verticalAlign: 'top'\n                            },\n                            a: {\n                                color: \"#8e909a\",\n                                width: 100,\n                            },\n                        }\n                    },\n                    itemStyle: itemStyle,\n                }],\n                itemStyle: {\n                    color: '#E6F1FF',\n                }\n            }, {\n                name: '上四分之一',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, {\n                    value: res.data[item].aQuarterUpper - res.data[item].medianValue,\n                    label: {\n                        formatter: function(data) {\n                            return `{b|}{a|}`\n                        },\n                        show: true,\n                        position: [0, 0, 0, 0],\n                        rich: {\n                            b: {\n                                width: 30,\n                                height: 2,\n                                color: \"#fff\",\n                                backgroundColor: \"#55aee6\",\n                                verticalAlign: 'top'\n                            },\n                            a: {\n                                color: \"#8e909a\",\n                                width: 100,\n                            },\n                        }\n                    },\n                    itemStyle: itemStyle,\n                }],\n                itemStyle: {\n                    color: '#E6F1FF',\n                }\n            }, {\n                name: '上限',\n                type: 'bar',\n                stack: 'col',\n                data: [...space, {\n                    value: res.data[item].upperLimit - res.data[item].aQuarterUpper,\n                    label: {\n                        formatter: function(data) {\n                            return `{a| ${res.data[item].upperLimit}万}\\n\\n{b|}`\n                        },\n                        show: true,\n                        position: [0, -24, 0, 0],\n                        rich: {\n                            b: {\n                                width: 30,\n                                height: 2,\n                                color: \"#fff\",\n                                backgroundColor: \"#55aee6\",\n                                verticalAlign: 'top'\n                            },\n                            a: {\n                                color: \"#8e909a\",\n                                width: 100,\n                            },\n                        }\n                    },\n                    itemStyle: itemStyle,\n                }],\n                itemStyle: {\n                    color: '#E6F1FF',\n                }\n            })\n            break;\n        case 'expectationSalary':\n            series.push({\n                type: 'effectScatter',\n                symbolSize: 8,\n                itemStyle: {\n                    color: '#FD6720 ',\n                    opacity: '0.9'\n                },\n                rippleEffect: {\n                    color: \"#FD6720\",\n                    period: 9999,\n                },\n                label: {\n                    show: true,\n                    formatter(params) {\n                        return params.data[1] + '万'\n                    },\n                    color: '#7D8292',\n                    offset: [0, -20]\n                },\n                data: [\n                    ['候选人当前薪酬', res.data[item].salary],\n                ]\n            })\n            break;\n        default:\n            break;\n    }\n}\n\nfunction calcFloat(data) {\n    let total = [\"currentSalary\", \"PAStandardSalary\", \"PAComparablePay\", \"comparablePay\", \"smartSalary\"]\n    return total.filter(item => data.includes(item))\n}\nMAP_KEY.map(item => {\n    if (!!res.data[item]) {\n        let name = MAPS[item]\n        let x = null\n        if (name === 'pa可比薪酬') {\n            x = calcFloat(res.data.xAxis)\n        }\n        create_options(item, name, x)\n        space.push('')\n    } else {\n        space.pop()\n    }\n})\n\noption = {\n    tooltip: {\n        show: false,\n        trigger: 'item',\n        axisPointer: {\n            type: 'shadow'\n        }\n    },\n    backgroundColor: '#fff',\n    grid: {\n        top: '10%',\n        left: '10%',\n        right: '5%',\n        bottom: '10%',\n    },\n    xAxis: [{\n        type: 'category',\n        data: xAxis,\n        triggerEvent: true,\n        boundaryGap: true,\n        nameGap: 30,\n        axisLine: {\n            lineStyle: {\n                color: '#DFE1E6',\n                opacity: '0.6'\n            }\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLabel: {\n            color: '#7D8292',\n            fontSize: 11,\n            formatter: function(value) {\n                if (value == '智能荐薪') {\n                    return value + ' {icon|}';\n                } else {\n                    return value\n                }\n            },\n            rich: {\n                'icon': {\n                    backgroundColor: {\n                        image: ''\n                    }\n                }\n            }\n        },\n        splitLine: {\n            lineStyle: {\n                color: '#DFE1E6'\n            }\n        },\n        splitArea: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n    }, {\n        type: 'value',\n        boundaryGap: false,\n        axisLine: {\n            lineStyle: {\n                opacity: 0\n            }\n        },\n        axisLabel: {\n            color: '#fff'\n        },\n        axisTick: {\n            lineStyle: {\n                opacity: 0\n            }\n        },\n        splitLine: {\n            show: false\n        },\n        min: 0,\n        max: 300,\n        nameGap: 30,\n    }, {\n        type: 'value',\n        boundaryGap: false,\n        axisLine: {\n            lineStyle: {\n                opacity: 0\n            }\n        },\n        axisLabel: {\n            color: '#fff'\n        },\n        axisTick: {\n            lineStyle: {\n                opacity: 0\n            }\n        },\n        splitLine: {\n            show: false\n        },\n        min: 0,\n        max: 1,\n        nameGap: 30,\n    }],\n    yAxis: {\n        type: 'value',\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLabel: {\n            color: '#7D8292',\n            fontSize: 12,\n            formatter: \"{value}万\"\n        },\n        splitLine: {\n            lineStyle: {\n                color: '#DFE1E6',\n                opacity: '0.2'\n            }\n        }\n    },\n    series: series\n};","html":"","externalScripts":"","updaterUID":"bd-4128622076","theme":"","layout":"","viewCount":288,"userName":"执***岸","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x8mGi3U-w.png?v=1574307331269","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-effectScatter","series-line","series-scatter","tooltip"],"customTags":[],"updaterUserName":"执***岸"}}