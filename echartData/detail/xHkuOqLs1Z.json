{"status":0,"data":{"cid":"xHkuOqLs1Z","authorUid":"bd-1158218442","authorUserName":"J***r","title":"Flappy Bird","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2017-05-06T14:15:11.000Z","lastUpdateTime":"2017-05-06T14:15:11.000Z","auth":2,"uid":"bd-1158218442","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"3.8.0","versionCreateTime":"2018-07-27T03:47:24.000Z","code":"\n// github: github.com/jackshawn/pics-by-echarts\n\n// 判定存在误差\n\nvar bird = 'image://https://raw.githubusercontent.com/jackshawn/pics-by-echarts/master/img/bird.png';\n\nvar option = {\n    title: {\n        text: '按空格键进行游戏',\n        left: 'center',\n        textStyle: {\n            color: '#fff'\n        },\n        z: 9\n    },\n    grid: {\n        left: 0,\n        right: 0,\n        bottom: 0,\n        top: 0\n    },\n    xAxis: [{\n            data: [],\n            show: false\n        },\n        {\n            data: [],\n            show: false\n        },\n        {\n            data: [],\n            show: false\n        },\n        {\n            data: [],\n            boundaryGap: false,\n            show: false\n        },\n        {\n            data: [],\n            show: false\n        }\n\n    ],\n    yAxis: [{\n            splitLine: false,\n            max: 0,\n            min: -100\n        },\n        {\n            splitLine: false,\n            max: 100\n        },\n        {\n            splitLine: false,\n            max: 100\n        },\n        {\n            splitLine: false,\n            max: 50\n        },\n        {\n            splitLine: false,\n            max: 50\n        }\n    ],\n    series: [{\n            name: 'bird',\n            type: 'pictorialBar',\n            symbolPosition: 'end',\n            data: (function() {\n                var arr = new Array(200).fill(0)\n                arr[50] = {\n                    value: 50,\n                    symbol: bird,\n                    symbolSize: 50,\n                    symbolOffset: ['-75%', '-50%']\n                }\n                return arr\n            })(),\n            xAxisIndex: 2,\n            yAxisIndex: 2,\n            zlevel: 2,\n            animationDelay: function(idx) {\n                return idx + 2000\n            }\n        },\n        {\n            name: 'topBar',\n            type: 'bar',\n            data: new Array(200),\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            animation: true,\n            z: 5\n        },\n        {\n            name: 'bottomBar',\n            type: 'bar',\n            data: new Array(200),\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            animation: true,\n            z: 5\n        },\n        {\n            name: 'cloudsBottom',\n            type: 'line',\n            data: [15, 15],\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            animation: true,\n            showSymbol: false,\n            areaStyle: {\n                normal: {\n                    color: '#fff',\n                    opacity: 1\n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: '#fff'\n                }\n            },\n            animationDelay: 700,\n            animationDuration: 1550\n        },\n        {\n            name: 'clouds',\n            type: 'graph',\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            data: (function() {\n                var arr = [{\n                        x: 0,\n                        y: 0,\n                        symbolSize: 0\n                    },\n                    {\n                        x: 150,\n                        y: 100,\n                        symbolSize: 0\n                    }\n                ]\n                for (var i = 0; i < 15; i++) {\n                    arr.push({\n                        x: i * 10,\n                        y: 70,\n                        symbolSize: 100 + 75 * Math.random()\n                    })\n                }\n                return arr;\n            })(),\n            itemStyle: {\n                normal: {\n                    color: '#fff',\n                    borderWidth: 0\n                }\n            },\n            silent: true,\n            left: -100,\n            right: -100,\n            bottom: 0,\n            top: 0,\n            animation: true,\n            animationDelay: function(idx) {\n                return idx * 100 + 500\n            }\n        },\n        {\n            name: 'buildings',\n            step: 'middle',\n            type: 'line',\n            data: (function() {\n                var arr = [];\n                for (var i = 0; i < 100; i++) {\n                    arr.push(10 + 5 * Math.random())\n                }\n                return arr\n            })(),\n            lineStyle: {\n                normal: {\n                    color: '#bcd1c0'\n                }\n            },\n            areaStyle: {\n                normal: {\n                    color: '#c7e6c7',\n                    opacity: 1\n                }\n            },\n            symbolSize: 0,\n            xAxisIndex: 4,\n            yAxisIndex: 4,\n            animation: true,\n            z: 3,\n            animationDelay: 800,\n            animationDuration: 1500\n        },\n        {\n            name: 'bushesBottom',\n            type: 'line',\n            data: [5, 5],\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            animation: true,\n            showSymbol: false,\n            lineStyle: {\n                normal: {\n                    color: '#87e189',\n                    opacity: 1\n                }\n            },\n            areaStyle: {\n                normal: {\n                    color: '#87e189',\n                    opacity: 1\n                }\n            },\n            z: 4,\n            animationDelay: 300\n        },\n        {\n            name: 'bushes',\n            type: 'graph',\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            data: (function() {\n                var arr = [{\n                        x: 0,\n                        y: 0,\n                        symbolSize: 0\n                    },\n                    {\n                        x: 150,\n                        y: 100,\n                        symbolSize: 0\n                    }\n                ]\n                for (var i = 0; i < 15; i++) {\n                    arr.push({\n                        x: i * 10,\n                        y: 90,\n                        symbolSize: 100 + 75 * Math.random()\n                    })\n                }\n                return arr;\n            })(),\n            itemStyle: {\n                normal: {\n                    color: '#87e189',\n                    borderWidth: 0\n                }\n            },\n            silent: true,\n            left: -100,\n            right: -100,\n            bottom: 0,\n            top: 0,\n            z: 4,\n            animation: true,\n            animationDelay: function(idx) {\n                return idx * 100\n            }\n        },\n        {\n            name: 'ground',\n            type: 'line',\n            data: [1, 1],\n            xAxisIndex: 3,\n            yAxisIndex: 3,\n            animation: true,\n            showSymbol: false,\n            areaStyle: {\n                normal: {\n                    color: '#ddd58c',\n                    opacity: 1\n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: '#72881c'\n                }\n            },\n            z: 5\n        }\n    ],\n    silent: true,\n    backgroundColor: '#71c5cf'\n};\n\n\ndocument.onkeydown = function(event) {\n    if (event && event.keyCode == 32) {\n        var fallSpeed = 2,\n            m = 0,\n            score = 0,\n            time = 0,\n            best = localStorage.getItem('bestScore') || 0,\n            t,\n            clear = function() {\n                clearInterval(t)\n                if (score > best) {\n                    localStorage.setItem('bestScore', score);\n                }\n                document.onkeydown = ''\n            }\n        for (var i = 1; i < option.series.length; i++) {\n            option.series[i].animation = false;\n        }\n        t = setInterval(function() {\n            option.title.text = '得分 : ' + score + ' ; 时间 : ' + (time / 1000).toFixed(2) + 's ; 最高得分 : ' + best;\n\n            if (option.series[0].data[50].value > 0) {\n\n                var l = Math.random() * 80;\n                //bar\n                option.series[1].data.shift()\n                option.series[2].data.shift()\n                if (m % 50 == 0) {\n                    var topBarLength = -l,\n                        bottomBarLength = 80 - l,\n                        barColor = '#77a138'\n                    option.series[1].data.push({\n                        value: topBarLength,\n                        itemStyle: {\n                            normal: {\n                                color: barColor,\n                                borderWidth: 40,\n                                borderColor: barColor\n                            }\n                        }\n                    })\n                    option.series[2].data.push({\n                        value: bottomBarLength,\n                        itemStyle: {\n                            normal: {\n                                color: barColor,\n                                borderWidth: 40,\n                                borderColor: barColor\n                            }\n                        }\n                    })\n                } else {\n                    option.series[1].data.push(0)\n                    option.series[2].data.push(0)\n                }\n\n                // clouds\n                if (option.series[4].data[option.series[4].data.length - 1].x < 140) {\n                    option.series[4].data.push({\n                        x: 150,\n                        y: 70,\n                        symbolSize: 100 + 75 * Math.random()\n                    })\n                }\n                for (var i = 3; i < option.series[4].data.length; i++) {\n                    if (option.series[4].data[i].x > 0) {\n                        option.series[4].data[i].x -= .05;\n                    }\n                }\n\n                // buildings\n                if (m % 20 == 0) {\n                    option.series[5].data.shift();\n                    option.series[5].data.push(10 + 5 * Math.random());\n                }\n\n                // bushes\n                if (option.series[7].data[option.series[7].data.length - 1].x < 140) {\n                    option.series[7].data.push({\n                        x: 150,\n                        y: 90,\n                        symbolSize: 100 + 75 * Math.random()\n                    })\n                }\n                for (var i = 3; i < option.series[7].data.length; i++) {\n                    if (option.series[7].data[i].x > 0) {\n                        option.series[7].data[i].x -= .2;\n                    }\n                }\n                myChart.setOption(option);\n                fallSpeed += 0.25;\n                option.series[0].data[50].value -= fallSpeed\n                if (fallSpeed == 2.25) {\n                    option.series[0].data[50].symbolRotate = 0;\n                } else {\n                    option.series[0].data[50].symbolRotate -= fallSpeed\n                }\n                //death\n                if (option.series[2].data[50] && option.series[2].data[50].value > 0) {\n                    var d = option.series[0].data[50].value - option.series[2].data[50].value\n                    if (d > 0 && d < 10) {\n                        score += 10;\n                    } else {\n                        clear()\n                    }\n                }\n            } else {\n                clear()\n            }\n            m++;\n            time += 125\n        }, 125)\n        document.onkeydown = function(event) {\n            if (event && event.keyCode == 32 && option.series[0].data[50].value > 0 && option.series[0].data[50].value < 90) {\n                option.series[0].data[50].value += 15;\n                option.series[0].data[50].symbolRotate = 45;\n                fallSpeed = 2;\n            }\n        }\n    }\n}","html":"","externalScripts":"","updaterUID":"bd-1158218442","theme":"","layout":"","viewCount":21941,"userName":"J***r","commentCount":5,"starCount":49,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHkuOqLs1Z.png?v=1494080112145","isCustomThumbnail":1,"builtinTags":["category-work","grid","series-bar","series-graph","series-line","series-pictorialBar","title"],"customTags":[],"updaterUserName":"J***r"}}