{"status":0,"data":{"cid":"xgcz5PjNxf","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"图例换行","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2020-09-14T09:31:51.000Z","lastUpdateTime":"2020-09-14T09:31:51.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-30T07:41:59.000Z","code":"var getname =['未出国进修/合作科研的学生','本科生','硕士',' 博士']\r\nvar getvalue = [55,20,15,10]\r\n\r\n\r\nvar data = [];\r\nfor (var i = 0; i < getname.length; i++) {\r\n    data.push({\r\n        name: getname[i],\r\n        value: getvalue[i]\r\n    })\r\n}\r\n\r\n\r\nvar sumvalue = 0;\r\nfor (var i = 0; i < getname.length; i++) {\r\n    sumvalue += getvalue[i];\r\n} \r\n\r\nvar rich = {\r\n    name: {\r\n        color: \"#666666\",\r\n        fontSize: 14,\r\n        padding: [6, 10],\r\n        align: 'center'\r\n    },\r\n    percent: {\r\n        color: \"#666666\",\r\n        align: 'center',\r\n        fontSize: 14,\r\n        padding: [5, 10]\r\n    },\r\n    hr: {\r\n        borderColor: '#DFDFDF',\r\n        width: '100%',\r\n        borderWidth: 0.5,\r\n        height: 0,\r\n    }\r\n}\r\nvar colorList = [{\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#81BEFF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#3295FF' // 100% 处的颜色\r\n                }],\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#48D69E' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#70F3C2' // 100% 处的颜色\r\n                }],\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#FEAE5C' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#FECC84' // 100% 处的颜色\r\n                }],\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#A1AEFF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#9686F3' // 100% 处的颜色\r\n                }],\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#FECAFF' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#D47FE6' // 100% 处的颜色\r\n                }],\r\n            }, {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#7EEAE6' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#1ABBB5' // 100% 处的颜色\r\n                }],\r\n            }];\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{b}: {c}个<br/>占比: {d}%\"\r\n    },\r\n        legend: {\r\n        type: \"scroll\",\r\n        pageIconColor: '#00DFFF', //翻页下一页的三角按钮颜色\r\n\t\tpageIconInactiveColor: '#aaa', //翻页（即翻页到头时）\r\n\t\tpageIconSize: 11, //翻页按钮大小\r\n\t\tpageFormatter: '',//隐藏翻页的数字\r\n\t\tpageButtonItemGap: -6,//翻页按钮的两个之间的间距\r\n        orient: 'vertical',\r\n\t\theight:'80%',\r\n        right: '20',\r\n        top: 'center',\r\n        itemWidth: 18,\r\n        itemHeight: 18,\r\n        data: getname,\r\n        formatter: function(name) {\r\n\t\t       for (var i = 0; i<getname.length; i++) {\r\n\t\t\t\tif (name == data[i].name) {\r\n\t\t\t\tvar ret = \"\";//拼接加\\n返回的类目项  \r\n\t\t\t\tvar maxLength = 7;//每项显示文字个数  \r\n\t\t\t\tvar valLength = name.length;//X轴类目项的文字个数  \r\n\t\t\t\tvar rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数  \r\n\t\t\t\tif (rowN > 1)//如果类目项的文字大于7,\r\n\t\t\t\t{  \r\n\t\t\t\t\tvar temp = \"\";//每次截取的字符串  \r\n\t\t\t\t\tvar start = 0;//开始截取的位置  \r\n\t\t\t\t\tvar end = maxLength;//结束截取的位置  \r\n\t\t\t\t\ttemp = name.substring(start, end)+'\\n'+name.substring(end, valLength)\t\t\t\t\t\r\n\t\t\t\t\tret += temp; //凭借最终的字符串 \r\n\t\t\t\t\treturn '{ret|' + ret+ '}{rate|' + (100*getvalue[i]/sumvalue).toFixed(2) + '%}' \t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn '{name|' + name+ '}{rate|' + (100*getvalue[i]/sumvalue).toFixed(2) + '%}'  \r\n\t\t\t\t}\r\n     \r\n\t\t\t\t\t \r\n\t\t\t\t}\r\n            }\r\n        },\r\n        textStyle: {\r\n            rich: {\r\n                name: {\r\n                    fontSize: 15,\r\n                    fontWeight: 400,\r\n                    width: 150,\r\n                    height: 35,\r\n                    padding:[0,0,0,5],\r\n\t\t\t\t\tcolor:'#666'\r\n                },\r\n\t\t\t\tret: {\r\n                    fontSize: 15,\r\n                    fontWeight: 400,\r\n                    width: 150,\r\n                    height: 6,\r\n                    padding:[-15,0,0,5],\r\n\t\t\t\t\tcolor:'#666'\r\n                },\r\n                rate: {\r\n                    fontSize: 15,\r\n                    fontWeight: 500,\r\n                    height: 35,\r\n                    width: 40,\r\n                    align:'right',\r\n\t\t\t\t\tcolor:'#666'\r\n                }\r\n            }\r\n        }        \r\n\r\n    },\r\n    series:[ {\r\n        itemStyle: {\r\n            normal: {\r\n                color: function(params) {\r\n                    return colorList[params.dataIndex]\r\n                }\r\n            }\r\n        },\r\n        type: 'pie',\r\n        radius: ['40%', '60%'],\r\n        center: [\"25%\", \"50%\"],\r\n        labelLine: {\r\n            normal: {\r\n                show:false,\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show:false,\r\n            }\r\n        },\r\n        data: data\r\n    }]\r\n            }\r\n","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":148,"userName":"衰***命","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgcz5PjNxf.png?v=1604043719756","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie"],"customTags":[],"updaterUserName":"衰***命"}}