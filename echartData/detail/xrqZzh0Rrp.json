{"status":0,"data":{"cid":"xrqZzh0Rrp","authorUid":"bd-1850970827","authorUserName":"林***e","title":"自定义系列绘制立体柱图","description":"多系列立体柱图","latestVersion":3,"alwaysLatest":0,"createTime":"2021-07-19T10:21:19.000Z","lastUpdateTime":"2021-07-19T10:26:20.000Z","auth":2,"uid":"bd-1850970827","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.6.0","versionCreateTime":"2021-07-19T10:26:20.000Z","code":"function renderItem(params, api) {\n    const serIndex = params.seriesIndex;\n    const showIndex = api.currentSeriesIndices().indexOf(serIndex);\n    const serLength = api.currentSeriesIndices().length;\n    const [useWith, useHeight] = api.size([api.value(0), api.value(1)]);\n    const [originX, originY] = api.coord([api.value(0), api.value(1)]);\n    const areaStartX = originX - useWith / 2;\n    const areaStartY = originY;\n\n    const serCenterOffsetWidth = useWith / serLength;\n    \n    var width = useWith * 0.2;\n    var halfWidth = width / 2;\n\n    const useCenterX = areaStartX + (showIndex + 1) * serCenterOffsetWidth - serCenterOffsetWidth / 2;\n    const useCenterY = areaStartY;\n\n    var style = api.style({\n        stroke: api.visual('borderColor'),\n        fill: api.visual('color'),\n    });\n    return {\n        type: 'group',\n        children: [\n            {\n                // 底盖\n                type: 'polygon',\n                shape: {\n                    points: [\n                        [useCenterX - halfWidth, useCenterY + useHeight],\n                        [useCenterX, useCenterY + useHeight - halfWidth / 2],\n                        [useCenterX + halfWidth, useCenterY + useHeight],\n                        [useCenterX, useCenterY + useHeight + halfWidth / 2],\n                    ],\n                    smooth: 0.6,\n                },\n                style: style,\n            },\n            {\n                // 顶盖\n                type: 'polygon',\n                morph: true,\n                transition: ['shape'],\n                z2: 1,\n                shape: {\n                    points: [\n                        [useCenterX - halfWidth, useCenterY],\n                        [useCenterX, useCenterY - halfWidth / 2],\n                        [useCenterX + halfWidth, useCenterY],\n                        [useCenterX, useCenterY + halfWidth / 2],\n                    ],\n                    smooth: 0.6,\n                },\n                style: style,\n            },\n            {\n                // 柱体\n                type: 'rect',\n                morph: true,\n                transition: ['shape'],\n                // scaleY: 2,\n                shape: {\n                    x: useCenterX - halfWidth,\n                    y: useCenterY,\n                    width: halfWidth * 2,\n                    height: useHeight,\n                },\n                style: {\n                    ...style,\n                    stroke: 'rgba(0,0,0,0)',\n                },\n            },\n            {\n                // 柱边\n                type: 'line',\n                transition: ['shape'],\n                shape: {\n                    x1: useCenterX - halfWidth,\n                    y1: useCenterY,\n                    x2: useCenterX - halfWidth,\n                    y2: useCenterY + useHeight,\n                },\n                style: style,\n            },\n            {\n                // 柱边\n                type: 'line',\n                transition: ['shape'],\n                shape: {\n                    x1: useCenterX + halfWidth,\n                    y1: useCenterY,\n                    x2: useCenterX + halfWidth,\n                    y2: useCenterY + useHeight,\n                },\n                style: style,\n            },\n        ],\n    };\n}\n\noption = {\n    tooltip: {\n        trigger: 'item',\n    },\n    legend: {\n        x: 'center',\n        y: 'top',\n        align: 'left',\n    },\n    xAxis: {\n        type: 'category',\n        data: [1, 2, 3, 4, 5, 6, 76],\n        axisLabel: {\n            interval: 0,\n        },\n        axisTick: {\n            show: false,\n        },\n    },\n    yAxis: [\n        {\n            name: 'a',\n            type: 'value',\n            axisLine: {\n                show: true,\n            },\n            axisTick: {\n                show: false,\n            },\n            splitLine: {\n                show: false,\n            },\n        }\n    ],\n    series: [\n        {\n            type: 'custom',\n            name: '柱一',\n            itemStyle: {\n                normal: {\n                    borderWidth: 1,\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 0,\n                        y2: 1,\n                        colorStops: [\n                            {\n                                offset: 0,\n                                color: 'red', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: 'blue', // 100% 处的颜色\n                            },\n                        ],\n                        global: false, // 缺省为 false\n                    },\n                    borderColor: 'rgba(0,0,0,0)',\n                },\n            },\n            renderItem: renderItem,\n            encode: {\n                x: 0,\n                y: [1],\n            },\n            data: [\n                [0, 3],\n                [1, 2],\n                [2, 2],\n                [3, 2],\n                [4, 2],\n                [5, 2],\n                [6, 2],\n            ],\n            z: 4,\n        },\n        {\n            type: 'custom',\n            name: '柱二',\n            itemStyle: {\n                normal: {\n                    borderWidth: 1,\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 0,\n                        y2: 1,\n                        colorStops: [\n                            {\n                                offset: 0,\n                                color: 'red', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: 'green', // 100% 处的颜色\n                            },\n                        ],\n                        global: false, // 缺省为 false\n                    },\n                    borderColor: 'rgba(0,0,0,0)',\n                },\n            },\n            renderItem: renderItem,\n            encode: {\n                x: 0,\n                y: [1],\n            },\n            data: [\n                [0, 3],\n                [1, 2],\n                [2, 2],\n                [3, 2],\n                [4, 2],\n                [5, 2],\n                [6, 2],\n            ],\n            z: 4,\n        },\n        {\n            type: 'custom',\n            name: '柱三',\n            itemStyle: {\n                normal: {\n                    borderWidth: 1,\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 0,\n                        y2: 1,\n                        colorStops: [\n                            {\n                                offset: 0,\n                                color: 'blue', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: 'green', // 100% 处的颜色\n                            },\n                        ],\n                        global: false, // 缺省为 false\n                    },\n                    borderColor: 'rgba(0,0,0,0)',\n                },\n            },\n            renderItem: renderItem,\n            encode: {\n                x: 0,\n                y: [1],\n            },\n            data: [\n                [0, 3],\n                [1, 2],\n                [2, 2],\n                [3, 2],\n                [4, 2],\n                [5, 2],\n                [6, 2],\n            ],\n            z: 4,\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-1850970827","theme":"default","layout":"","viewCount":0,"userName":"林***e","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrqZzh0Rrp.png?v=1626690380753","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-custom","tooltip"],"customTags":[],"updaterUserName":"林***e"}}