{"status":0,"data":{"cid":"x97jzIsU2","authorUid":"bd-927643697","authorUserName":"N***4","title":"绘制椭圆","description":"添加自定义图形，椭圆","latestVersion":2,"alwaysLatest":1,"createTime":"2019-10-31T02:35:19.000Z","lastUpdateTime":"2019-10-31T02:35:19.000Z","auth":2,"uid":"bd-927643697","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.4.0","versionCreateTime":"2019-10-31T02:37:14.000Z","code":"//自定义椭圆形状\r\n\r\n//这部分代码来源于zrender 的 Ellipse形状\r\nvar Ellipse = echarts.graphic.extendShape({\r\n    shape: {\r\n        cx: 0, cy: 0,\r\n        rx: 0, ry: 0\r\n    },\r\n    buildPath: function (ctx, shape) {\r\n        var k = 0.5522848;\r\n        var x = shape.cx;\r\n        var y = shape.cy;\r\n        var a = shape.rx;\r\n        var b = shape.ry;\r\n        var ox = a * k; // 水平控制点偏移量\r\n        var oy = b * k; // 垂直控制点偏移量\r\n        // 从椭圆的左端点开始顺时针绘制四条三次贝塞尔曲线\r\n        ctx.moveTo(x - a, y);\r\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\r\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\r\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\r\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\r\n        ctx.closePath();\r\n    }\r\n});\r\n\r\necharts.graphic.registerShape(\"ellipse\",Ellipse);\r\n\r\n\r\noption = {\r\n    title: {\r\n        text: '绘制椭圆'\r\n    },\r\n    xAxis: {\r\n        max:100\r\n    },\r\n    graphic:[\r\n        {\r\n            type:\"ellipse\",\r\n            shape:{\r\n                cx: 50, cy: 100,\r\n                rx: 10, ry: 60\r\n            },\r\n            style:{fill:\"green\"}\r\n        }\r\n    ],\r\n    yAxis: {max:100},\r\n    series: [{\r\n        type: 'custom',\r\n        data:[\r\n            [15,15,1,1,\"#ff0000\"],\r\n            [50,70,3,2,\"#00ff00\"]\r\n        ],\r\n        encode:{\r\n            x:[0,2],\r\n            y:[1,3],\r\n            seriesName:[4]\r\n        },\r\n        renderItem:function(params, api){\r\n            var p1 = api.coord([api.value(0),api.value(1)])\r\n            var p2 = api.coord([api.value(2)+api.value(0),api.value(3)+api.value(1)])\r\n            return {\r\n                type: 'ellipse',\r\n                shape: {\r\n                    cx: p1[0], cy: p1[1],\r\n                    rx: p2[0]-p1[0], ry: p1[1]-p2[1]\r\n                },\r\n                style:{fill:api.value(4),opacity:0.8},\r\n                styleEmphasis:{opacity:1}\r\n            }\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-927643697","theme":"","layout":"","viewCount":114,"userName":"N***4","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x97jzIsU2.png?v=1572489434213","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","series-custom","title"],"customTags":["椭圆","自定义图形"],"updaterUserName":"N***4"}}