{"status":0,"data":{"cid":"x5VhgqebG4","authorUid":"obd-o24ymbNi3Yq60yH7vRNH5fWBkdEbxBI","authorUserName":"136******85","title":"桑基图","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-10-09T09:22:03.000Z","lastUpdateTime":"2021-10-12T06:41:00.000Z","auth":2,"uid":"obd-o24ymbNi3Yq60yH7vRNH5fWBkdEbxBI","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-12T06:41:00.000Z","code":"    let datalist = [{\n            name: \"系统11\"},\n        {\n            name: \"系统22\"\n        },\n        {\n            name: \"系统33\"\n        },\n        {\n            name: \"系统44\"\n        },\n        {\n            name: \"系统55\"\n        },\n        {\n            name: \"系统66\"\n        },\n        {\n            name: \"系统77\"\n        },\n        {\n            name: \"系统88\"\n        },\n        {\n            name: \"系统99\"\n        },\n        {\n            name: \"公共平台\"\n        },\n    ];\n    let linksData = [{\n            source: \"系统11\",\n            target: \"公共平台\",\n            value: 645246\n        },\n        {\n            source: \"系统22\",\n            target: \"公共平台\",\n            value: 513275\n        },\n        {\n            source: \"系统33\",\n            target: \"公共平台\",\n            value: 282986\n        },\n        {\n            source: \"系统44\",\n            target: \"公共平台\",\n            value: 118655\n        },\n        {\n            source: \"系统55\",\n            target: \"公共平台\",\n            value: 105989\n        },\n        {\n            source: \"系统66\",\n            target: \"公共平台\",\n            value: 95100\n        },\n        {\n            source: \"系统77\",\n            target: \"公共平台\",\n            value: 87796\n        },\n        {\n            source: \"系统88\",\n            target: \"公共平台\",\n            value: 47658\n        },\n        {\n            source: \"系统99\",\n            target: \"公共平台\",\n            value: 24366\n        },\n    ];\n    let Color = [\n       \"#02E4E7\",\n        \"#06D328\",\n        \"#02E4E7\",\n        \"#27C6F1\",\n        \"#4FA3F1\",\n        \"#33F0F7\",\n        \"#33F0F7\",\n        \"#33F0F7\",\n        \"#33F0F7\",\n        \"#8A7EE0\",\n        \"#2cb8cf\",\n        \"#4e70f0\",\n        \"#1fa3de\",\n        \"#bbc951\",\n        \"#FFC14B\",\n        \"#b785a6\",\n    ];\n    let itemStyleColor = [];\n    for (let d = 0; d < datalist.length; d++) {\n        datalist[d].itemStyle = {\n            normal: {\n                color: Color[d]\n            }\n        };\n        itemStyleColor.push(datalist[d]);\n    }\n    option = {\n        backgroundColor: \"#031d7a\",\n        tooltip: {\n            trigger: \"item\",\n            triggerOn: \"mousemove\",\n            formatter: function(params) {\n                if (params.name == \"公共平台\") {\n                    return \" 公共平台 \"\n                } else {\n                    let value = params.data.value;\n                    if (!value && value !== 0) return 0;\n                    let str = value.toString();\n                    let reg = str.indexOf(\".\") > -1 ? /(\\d)(?=(\\d{3})+\\.)/g : /(\\d)(?=(?:\\d{3})+$)/g;\n                    if (params.data.source == \"公共平台\") {\n                        return params.data.target + \" : \" + str.replace(reg, \"$1,\");\n                    } else {\n                        return params.data.source + \" : \" + str.replace(reg, \"$1,\");\n                    }\n                }\n            }\n        },\n        series: [{\n            type: \"sankey\",\n            layout: \"none\",\n            top: \"4%\",\n            bottom: \"12%\",\n            left: \"20\",\n            right: \"20\",\n            nodeGap: 15,\n            nodeWidth: 15,\n            focusNodeAdjacency: \"allEdges\",\n            data: itemStyleColor,\n            links: linksData,\n            label: {\n                normal: {\n                    color: \"#fff\",\n                    fontSize: 14,\n                    formatter: function(params) {\n                        if (params.data.name == '公共平台') {\n                            let strs = params.data.name.split(''); //字符串数组\n                            let str = ''\n                            for (let i = 0, s; s = strs[i++];) { //遍历字符串数组\n                                str += s;\n                                if (!(i % 1)) str += '\\n'; //按需要求余\n                            }\n                            return str\n                        } else {\n                            return params.data.name\n                        }\n                    },\n                    rich: {\n                        white: {\n                            fontSize: 16,\n                            lineHeight: 30,\n                            padding: [0, 0, 0, -26]\n                        }\n                    }\n                }\n            },\n            lineStyle: {\n                normal: {\n                    opacity: 0.7,\n                    color: \"source\",\n                    curveness: 0.5\n                }\n            },\n            itemStyle: {\n                normal: {\n                    borderWidth: 0,\n                    borderColor: \"red\"\n                }\n            }\n        }]\n    };","html":"","externalScripts":"","updaterUID":"obd-o24ymbNi3Yq60yH7vRNH5fWBkdEbxBI","theme":"","layout":"","viewCount":0,"userName":"136******85","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5VhgqebG4.png?v=1634020860333","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey","tooltip"],"customTags":[],"updaterUserName":"136******85"}}