{"status":0,"data":{"cid":"xrkcbJdoN-","authorUid":"bd-3020316420","authorUserName":"如云若水6688","title":"至少选择一个legend","description":"用户不能取消掉所有的legend","latestVersion":3,"alwaysLatest":1,"createTime":"2017-07-06T08:04:17.000Z","lastUpdateTime":"2017-07-06T08:04:17.000Z","auth":2,"uid":"bd-3020316420","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"3.6.2","versionCreateTime":"2017-07-06T10:03:58.000Z","code":"option = {\n    title: {\n            text: '折线图堆叠'\n        },\n        tooltip: {\n            trigger: 'axis'\n        },\n        legend: {\n            data:['电话营销','邮件营销','联盟广告'],\n            selected: {\n                '电话营销': false,\n                '邮件营销': true,\n                '联盟广告': true\n            }\n        },\n        grid: {\n            left: '3%',\n            right: '4%',\n            bottom: '3%',\n            containLabel: true\n        },\n        toolbox: {\n            feature: {\n                saveAsImage: {}\n            }\n        },\n        xAxis: {\n            type: 'category',\n            boundaryGap: false,\n            data: ['周一','周二','周三','周四','周五','周六','周日']\n        },\n        yAxis: {\n            type: 'value'\n        },\n        series: [\n            {\n                name:'电话营销',\n                type:'line',\n                stack: '总量',\n                data:[90, 12, 78, 99, 35, 321, 34]\n            },\n            {\n                name:'邮件营销',\n                type:'line',\n                stack: '总量',\n                data:[120, 132, 101, 134, 90, 230, 210]\n            },\n            {\n                name:'联盟广告',\n                type:'line',\n                stack: '总量',\n                data:[220, 182, 191, 234, 290, 330, 310]\n            }\n        ]\n};\n\n// 判断是否全部被取消选中\nfunction isAllUnselected(selected){\n    var selectedCount = 0;\n    for ( var name in selected) {\n        if (!selected.hasOwnProperty(name)) {\n            continue;\n        }\n\n        // 所有 selected Object 里面 true 代表 selected， false 代表 unselected\n        if (selected[name] === true) {\n            ++selectedCount;\n        }\n    }\n    return selectedCount===0;\n}\n\n// 获取全为false前的一个为true的元素\nfunction getLast(selected){\n    var selectedCount = 0;\n    var trueArray = [];\n    for ( var name in selected) {\n        if (!selected.hasOwnProperty(name)) {\n            continue;\n        }\n        // 将为true的加入到数组中\n        if (selected[name] === true) {\n            ++selectedCount;\n            trueArray.push(name)\n        }\n    }\n    // 只返回一个值即可\n    return trueArray[0];\n}\nvar lastName = '';\nmyChart.on('legendselectchanged', function (params) {\n    var selected = params.selected;\n    \n    // 更新最后选中的元素\n    var newlast = getLast(selected);\n    lastName = !newlast? lastName : newlast ;\n    \n    if(isAllUnselected(selected)){\n        alert(\"至少选中一个legend！\");\n        var dynamicSelected = {};\n        dynamicSelected[lastName] = true;\n        //重绘echarts\n        myChart.setOption({legend:{\n            selected:dynamicSelected\n        }});\n    }\n    });","html":"","externalScripts":"","updaterUID":"bd-3020316420","theme":"","layout":"","viewCount":106,"userName":"如云若水6688","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrkcbJdoN-.png?v=1499335438957","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"如云若水6688"}}