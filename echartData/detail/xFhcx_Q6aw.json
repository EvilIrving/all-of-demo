{"status":0,"data":{"cid":"xFhcx_Q6aw","authorUid":"bd-3653270493","authorUserName":"冬***e","title":"张三的朋友们进阶版","description":"在节点名称不重复的情况下，可无限添加层级","latestVersion":1,"alwaysLatest":1,"createTime":"2019-06-30T18:05:36.000Z","lastUpdateTime":"2019-06-30T18:05:36.000Z","auth":2,"uid":"bd-3653270493","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-30T18:05:36.000Z","code":"var myGraphData = [\n        { \"parentNode\":\"张三\", \"childNodes\":[\"小明\", \"小华\", \"小杰\", \"小婷\",\"小妍\",\"小飞\"]},\n        { \"parentNode\":\"小明\", \"childNodes\":[ \"小王\", \"小赵\", \"小钱\" ] },\n        { \"parentNode\":\"小华\", \"childNodes\":[ \"小孙\", \"小李\", \"小周\" ] },\n        { \"parentNode\":\"小杰\", \"childNodes\":[ \"小吴\", \"小郑\" ] },\n        { \"parentNode\":\"小婷\", \"childNodes\":[ \"小谢\", \"小潘\" ] },\n        { \"parentNode\":\"小妍\", \"childNodes\":[ \"小苏\", \"小陈\" ] },\n        { \"parentNode\":\"小飞\", \"childNodes\":[ \"小郭\", \"小彭\" ] },\n        { \"parentNode\":\"小王\", \"childNodes\":[ \"小a\", \"小b\" ] },\n        { \"parentNode\":\"小孙\", \"childNodes\":[ \"小c\", \"小d\" ] },\n        { \"parentNode\":\"小吴\", \"childNodes\":[ \"小e\", \"小f\" ] },\n    ];\n\nfunction getNodes(parentNode,childNodes,nodes){\n    var pnode;\n    for(var i=0; i<nodes.length; i++){\n        if(parentNode == nodes[i].nodename){\n            pnode = nodes[i];\n        }\n    }\n    for(i=0; i<childNodes.length; i++){\n        nodes.push({\n            nodename : childNodes[i],\n            nodelevel: pnode.nodelevel+1,\n            parentnode: parentNode,\n        });\n    }\n}\n        \nfunction setNodeData(nodes,listdata) {\n    var size = 33;\n    for(var i=0; i<nodes.length; i++){\n        listdata.push({\n            category: nodes[i].nodelevel,\n            name: nodes[i].nodename,\n            symbolSize: size,\n            draggable: \"true\"\n        });\n    }\n}\n        \nfunction setLinkData(childList, parentnode, links) {\n    for(var i=0; i<childList.length; i++){\n        links.push({\n            // links根据节点名称建立，只适用于节点名称不一样的情况\n            \"source\": childList[i],\n            \"target\": parentnode,\n            lineStyle: {\n                normal: {\n                    color: 'source',\n                }\n            }\n        });\n    }\n}    \n\nvar listdata = [];\nvar linksdata = []; \nvar nodes =[{\n        \"nodename\":\"张三\",\n        \"nodelevel\":0,\n        \"parentnode\":0\n    }];\nfor(var i=0; i < myGraphData.length; i++){\n    getNodes(myGraphData[i].parentNode,myGraphData[i].childNodes,nodes);\n    setLinkData( myGraphData[i].childNodes, myGraphData[i].parentNode, linksdata);\n}\nsetNodeData(nodes,listdata);  \n\nvar levels = 0;\nvar legend_data = [];\nvar series_categories = [];\nvar temp = [\"一\",\"二\",\"三\",\"四\",\"五\"];\nfor(var i=0; i < nodes.length; i++){\n    levels = Math.max(levels, nodes[i].nodelevel);\n}\nfor(var i=0; i<=levels; i++){\n   \n    legend_data.push({\n        name : i===0?'父节点':'层级'+temp[i],             \n        icon : 'rect'\n    });\n    \n    series_categories.push({\n        name : i===0?'父节点':'层级'+temp[i],\n        symbol : 'rect'\n    });\n   \n}\n\noption = {\n    title: {\n        text: \"张三的朋友们进阶版\",\n        top: \"top\",\n        left: \"left\",\n        textStyle: {\n            color: '#292421'\n        }\n    },\n    tooltip: {\n        formatter: '{b}'\n    },\n    backgroundColor: '#FFFFFF',\n    legend: {\n        show : true,\n        data : legend_data,\n        textStyle: {\n            color: '#292421'\n        },\n        icon: 'circle',\n        type: 'scroll',\n        orient: 'horizontal',\n        left: 10,\n        top: 20,\n        bottom: 20,\n        itemWidth: 10,\n        itemHeight: 10\n    },\n    animationDuration: 0,\n    animationEasingUpdate: 'quinticInOut',\n    series: [{\n        name: '关系图',\n        type: 'graph',\n        layout: 'force',\n        force: {\n            repulsion: 300,\n            gravity: 0.1,\n            edgeLength: 15,\n            layoutAnimation: true,\n        },\n        data: listdata,\n        links: linksdata,\n        categories: series_categories,\n        roam: true,\n        label: {\n            normal: {\n                show: true,\n                position: 'bottom',\n                formatter: '{b}',\n                fontSize: 10,\n                fontStyle: '600',\n            }\n        },\n        lineStyle: {\n            normal: {\n                opacity: 0.9,\n                width: 0.5,\n                curveness: 0\n            }\n        }\n    }]\n};\n        ","html":"","externalScripts":"","updaterUID":"bd-3653270493","theme":"","layout":"","viewCount":2444,"userName":"冬***e","commentCount":2,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xFhcx_Q6aw.png?v=1561917936498","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","title","tooltip"],"customTags":[],"updaterUserName":"冬***e"}}