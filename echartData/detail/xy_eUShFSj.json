{"status":0,"data":{"cid":"xy_eUShFSj","authorUid":"bd-251912376","authorUserName":"h***0","title":"层叠柱形图，随时间更新数据","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-10T02:58:06.000Z","lastUpdateTime":"2020-07-10T02:58:06.000Z","auth":2,"uid":"bd-251912376","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-10T02:58:06.000Z","code":"option = {\r\n    \"tooltip\":{\r\n        \"trigger\":\"axis\"\r\n    },\r\n    \"grid\":{\r\n        \"containLabel\":true,\r\n        \"left\":0,\r\n        \"right\":0,\r\n        \"bottom\":0,\r\n        \"top\":45\r\n    },\r\n    \"legend\":{\r\n        \"left\":\"center\",\r\n        \"top\":\"top\"\r\n    },\r\n    \"xAxis\":{\r\n        \"type\":\"category\",\r\n        \"data\": getXAxisData()\r\n    },\r\n    \"yAxis\":{\r\n        \"type\":\"value\",\r\n        \"splitLine\":{\r\n            \"lineStyle\":{\r\n                \"type\":\"dashed\",\r\n                \"color\":\"#DDD\"\r\n            }\r\n        },\r\n        \"name\":\"次数/秒\"\r\n    },\r\n    \"series\":[\r\n        {\r\n            \"name\":\"APP 实时总访问频率\",\r\n            \"type\":\"bar\",\r\n            \"barMaxWidth\":50,\r\n            \"stack\":\"总量\",\r\n            \"label\":{\r\n                \"show\":true,\r\n                \"fontSize\":18,\r\n                \"position\":\"inside\",\r\n                \"formatter\":{\r\n                    \"_custom\":{\r\n                        \"type\":\"function\",\r\n                        \"display\":\"<span>ƒ</span> formatter(parms)\"\r\n                    }\r\n                }\r\n            },\r\n            \"z\":2,\r\n            \"data\":[\r\n                27,\r\n                29,\r\n                33,\r\n                28,\r\n                33,\r\n                25,\r\n                25,\r\n                13,\r\n                8,\r\n                96]\r\n        },\r\n        {\r\n            \"name\":\"第三方 实时总访问频率\",\r\n            \"type\":\"bar\",\r\n            \"barMaxWidth\":50,\r\n            \"stack\":\"总量\",\r\n            \"label\":{\r\n                \"show\":true,\r\n                \"fontSize\":18,\r\n                \"position\":\"inside\",\r\n                \"formatter\":{\r\n                    \"_custom\":{\r\n                        \"type\":\"function\",\r\n                        \"display\":\"<span>ƒ</span> formatter(parms)\"\r\n                    }\r\n                }\r\n            },\r\n            \"z\":1,\r\n            \"data\":[\r\n                29,\r\n                35,\r\n                33,\r\n                33,\r\n                26,\r\n                30,\r\n                30,\r\n                60,\r\n                27,\r\n                35]\r\n        }]\r\n}\r\n\r\nfunction getXAxisData () {\r\n    let data = []\r\n    let now = Date.now()\r\n    for (var i = 9; i >= 0; i--) {\r\n        data.push(new Date(now - 3 * i * 1000).toTimeString().substring(0,8))\r\n    }\r\n    return data\r\n}\r\n\r\n\r\nsetInterval(() => {\r\n    \r\n    if (option.xAxis.data.length >= 10) {\r\n      option.xAxis.data.shift()\r\n      option.series[0].data.shift()\r\n      option.series[1].data.shift()\r\n    }\r\n\r\n    option.xAxis.data.push( new Date().toTimeString().substring(0,8) )\r\n\r\n    option.series[0].data.push(parseInt(Math.random() * 100))\r\n    \r\n    option.series[1].data.push(parseInt(Math.random() * 100))\r\n \r\n    myChart.setOption(option)\r\n}, 3000)","html":"","externalScripts":"","updaterUID":"bd-251912376","theme":"","layout":"","viewCount":210,"userName":"h***0","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xy_eUShFSj.png?v=1594349886926","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":["bar"],"updaterUserName":"h***0"}}