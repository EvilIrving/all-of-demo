{"status":0,"data":{"cid":"xH1yN4KLPm","authorUid":"bd-288365119","authorUserName":"151******30","title":"**之间的传输","description":"比如从一个地方传输到一个地方","latestVersion":2,"alwaysLatest":1,"createTime":"2018-08-31T09:02:30.000Z","lastUpdateTime":"2018-08-31T09:02:30.000Z","auth":1,"uid":"bd-288365119","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.1.0","versionCreateTime":"2018-08-31T09:03:15.000Z","code":"\r\nvar geoCoordMap = {\r\n    '乌鲁木齐': [87.9236, 43.5883],\r\n    '佛山': [112.8955, 23.1097],\r\n    '保定': [115.0488, 39.0948],\r\n    '兰州': [103.5901, 36.3043]\r\n};\r\nvar k = 0;\r\nvar planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\r\n\r\nvar data = [\r\n    [{\r\n        name: '乌鲁木齐'\r\n    }, {\r\n        name: '佛山',\r\n        value: 5\r\n    }],\r\n    [{\r\n        name: '佛山'\r\n    }, {\r\n        name: '保定',\r\n        value: 5\r\n    }],\r\n    [{\r\n        name: '保定'\r\n    }, {\r\n        name: '兰州',\r\n        value: 5\r\n    }],\r\n    [{\r\n        name: '兰州'\r\n    }, {\r\n        name: '乌鲁木齐',\r\n        value: 5\r\n    }]\r\n];\r\n\r\nvar convertData = function(dataItem) {\r\n    var res = [];\r\n    var fromCoord = geoCoordMap[dataItem[0].name];\r\n    var toCoord = geoCoordMap[dataItem[1].name];\r\n    if (fromCoord && toCoord) {\r\n        res.push({\r\n            fromName: dataItem[0].name,\r\n            toName: dataItem[1].name,\r\n            coords: [fromCoord, toCoord]\r\n        });\r\n    }\r\n \r\n    return res;\r\n};\r\n\r\nvar series = [];\r\n\r\n[data[k]].forEach(function(item, i) {\r\n    series.push({\r\n        type: 'lines',\r\n        zlevel: 1,\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0.7,\r\n            color: '#fff',\r\n            symbolSize: 3\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: 'red',\r\n                width: 1,\r\n                curveness: 0\r\n            }\r\n        },\r\n        data: convertData(data[k])\r\n    }, {\r\n        type: 'effectScatter', //波纹效果\r\n        coordinateSystem: 'geo',\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: 'stroke',\r\n            scale: 3,\r\n            period: 2\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'right',\r\n                formatter: '{b}'\r\n            }\r\n        },\r\n        //终点\r\n        symbol: 'circle',\r\n        symbolSize: function(val) {\r\n            return val[2] / 8;\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: 'red'\r\n            }\r\n        },\r\n        data: function() {\r\n            return {\r\n                name: item[1].name,\r\n                value: geoCoordMap[item[1].name].concat([item[1].value])\r\n            };\r\n        }\r\n    });\r\n});\r\n\r\n\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    title: {\r\n        text: '**之间的传输',\r\n        subtext: '数据纯属虚构',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    tooltip: {\r\n        trigger: 'item'\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        top: 'bottom',\r\n        left: 'right',\r\n        data: [],\r\n        textStyle: {\r\n            color: '#fff'\r\n        },\r\n        selectedMode: 'single'\r\n    },\r\n    geo: {\r\n        map: 'china',\r\n        zoom: 1,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#404a59'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    series: series\r\n};\r\n\r\n\r\nsetInterval(function() {\r\n    option.series[0].data = convertData(data[k]);\r\n    myChart.setOption(option, true);\r\n    k++;\r\n    if (k > 3) {\r\n        k = 0\r\n    }\r\n}, 3000);","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-288365119","theme":"","layout":"","viewCount":398,"userName":"151******30","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xH1yN4KLPm.png?v=1535706195731","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"151******30"}}