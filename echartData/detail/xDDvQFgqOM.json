{"status":0,"data":{"cid":"xDDvQFgqOM","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"饼图统计","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-19T03:08:55.000Z","lastUpdateTime":"2021-08-19T03:08:55.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-19T03:08:55.000Z","code":"const mockData = [\n    { total: '550', detail: 'test1' },\n    { total: '106', detail: 'test2' },\n    { total: '275', detail: 'test3' },\n    { total: '222', detail: 'test4' },\n    { total: '0', detail: 'test5' },\n];\n//接口总数和标题文字\nlet value = 1288;\nlet title = '总数量';\noption = {\n    backgroundColor: '#000E1A',\n    //中间圆形的 文字位置\n    title: {\n        text: '{a|' + value + '}\\n{c|' + title + '}',\n        x: '29.5%',\n        y: '47%',\n        textAlign: 'center',\n        textStyle: {\n            rich: {\n                a: {\n                    fontSize: 30,\n                    color: '#000',\n                    fontWeight: '600',\n                },\n                c: {\n                    fontSize: 14,\n                    color: '#555',\n                    padding: [5, 0],\n                },\n            },\n        },\n    },\n    grid: {\n        left: 0,\n    },\n    tooltip: {\n        trigger: 'item',\n    },\n    legend: {\n        orient: 'vertical',\n        top: '25%',\n        left: '50%',\n        data: mockData.map((item) => item.detail),\n        icon: 'circle',\n        formatter: (params) => {\n            const dataAll = mockData.map((item) => Number(item.total));\n            const total = dataAll.reduce((x, y) => parseInt(x, 10) + parseInt(y, 10));\n            const value = Number(mockData.filter((item) => item.detail === params)[0].total);\n            if (total === 0) {\n                return `{c|0}{d|个}{b|0%)}\\n{a|${name}}`;\n            }\n            const name = params;\n            return `\\n\\n{c|${value}}{d|个}{b|(${((value * 100) / total).toFixed(2)}%)}\\n{a|${name}}`;\n        },\n        textStyle: {\n            rich: {\n                a: {\n                    color: '#847777e0',\n                    width: 120,\n                    fontSize: 14,\n                    fontWeight: 'bold',\n                    align: 'left',\n                    padding: [5, 0],\n                },\n                b: {\n                    color: '#847777e0',\n                    fontSize: 14,\n                    fontWeight: 'bold',\n                },\n                c: {\n                    color: '#18355C',\n                    fontSize: 20,\n                    fontWeight: 'bold',\n                },\n                d: {\n                    color: '#18355C',\n                    fontSize: 14,\n                    fontWeight: 'bold',\n                },\n            },\n        },\n        selectorPosition: 'start',\n        align: 'left',\n        itemHeight: 18,\n        itemWidth: 12,\n        itemGap: 0,\n    },\n    series: [\n        {\n            name: '',\n            type: 'pie',\n            radius: ['42%', '30%'],\n            center: ['30%', '50%'],\n            clockwise: false,\n            avoidLabelOverlap: false,\n            hoverOffset: 10,\n            legendHoverLink: true,\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                },\n            },\n            itemStyle: {\n                normal: {\n                    borderColor: '#ffffff',\n                },\n            },\n            data: [\n                {\n                    value: mockData[0].total,\n                    name: mockData[0].detail,\n                    tooltip: formatterVal(),\n                },\n                {\n                    value: mockData[1].total,\n                    name: mockData[1].detail,\n                    tooltip: formatterVal(),\n                },\n                {\n                    value: mockData[2].total,\n                    name: mockData[2].detail,\n                    tooltip: formatterVal(),\n                },\n                {\n                    value: mockData[3].total,\n                    name: mockData[3].detail,\n                    tooltip: formatterVal(),\n                },\n                {\n                    value: mockData[4].total,\n                    name: mockData[4].detail,\n                    tooltip: formatterVal(),\n                },\n            ],\n        },\n        {\n            type: 'pie',\n            radius: [0, '25%'],\n            hoverAnimation: false,\n            clockWise: false,\n            center: ['30%', '50%'],\n            tooltip: {\n                formatter: title + '：' + value,\n                textStyle: {\n                    color: '#000',\n                },\n                backgroundColor: '#fff',\n                extraCssText: 'box-shadow: 0px 0px 10px 0px rgba(19,83,88,0.2);',\n            },\n            /* tooltip: { //不现实总数的提示\n                show: true\n            },*/\n            itemStyle: {\n                normal: {\n                    shadowBlur: 6,\n                    shadowColor: '#444',\n                    color: new echarts.graphic.RadialGradient(0.5, 0.5, 34, [\n                        {\n                            offset: 0,\n                            color: '#FFF',\n                        },\n                        {\n                            offset: 1,\n                            color: '#060f20',\n                        },\n                    ]),\n                },\n            },\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            data: [100],\n        },\n    ],\n};\n\nfunction formatterVal() {\n    return {\n        formatter: '{b}({d}%)',\n        textStyle: {\n            color: '#000',\n        },\n        backgroundColor: '#fff',\n        extraCssText: 'box-shadow: 0px 0px 10px 0px rgba(19,83,88,0.2);',\n    };\n}\n","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":0,"userName":"S***l","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDDvQFgqOM.png?v=1629342535850","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"S***l"}}