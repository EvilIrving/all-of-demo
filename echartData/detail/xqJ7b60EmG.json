{"status":0,"data":{"cid":"xqJ7b60EmG","authorUid":"obd-oN5Ds0RSZeHageOmpvV6ymVe71BRVCx","authorUserName":"正***眼","title":"柱状图","description":"柱状图","latestVersion":6,"alwaysLatest":0,"createTime":"2021-12-17T08:20:51.000Z","lastUpdateTime":"2021-12-30T09:33:45.000Z","auth":2,"uid":"obd-oN5Ds0RSZeHageOmpvV6ymVe71BRVCx","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.8.0","versionCreateTime":"2021-12-30T09:33:45.000Z","code":"var x_data = [];\nfor(var i = 0; i< 16; i ++) {\n    x_data.push(i)\n}\n\nvar data = [\n        [877, 847, 822, 909, 958, 917, 863, 988, 885, 940, 820, 930, 878, 818, 873, 869],\n    ]\n\noption = {\n    title: {\n        text: '人员情况',\n        left: 'left',\n    },\n    color: ['#41d79a', '#2e90fe', '#ff708b'],\n    backgroundColor: '#ffffff00',\n\n    tooltip: {\n        show: true,\n        trigger: 'axis',\n    },\n    legend: {\n        data: ['数据1', '数据2', '数据3', '数据4'],\n        top: '50',\n        left: 'center',\n        icon: 'roundRect',\n        itemWidth: 8,\n        itemHeight: 8,\n    },\n    grid: [\n        {\n            top: 60,\n            left: 60,\n            right: 50,\n            height: '40%',\n        },\n        {\n            left: 60,\n            right: 50,\n            top: '75%',\n            height: '20%',\n        },\n    ],\n    xAxis: [\n        {\n            name: '',\n            type: 'category',\n            data: x_data,\n            boundaryGap: true,\n            axisPointer: {\n                type: 'shadow',\n            },\n            axisLabel: {\n                color: '#333',\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#ccc',\n                },\n            },\n        },\n        {\n            gridIndex: 1,\n            type: 'category',\n            data: ['8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23'],\n            boundaryGap: true,\n            axisPointer: {\n                type: 'shadow',\n            },\n            position: 'top',\n            axisLabel: {\n                show: false,\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#ccc',\n                },\n            },\n        },\n    ],\n    yAxis: [\n        {\n            type: 'value',\n            axisLabel: {\n                formatter: '{value} ',\n            },\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n        },\n        {\n            name: '',\n            type: 'value',\n            axisLabel: {\n                formatter: '{value} %',\n            },\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n        },\n        {\n            type: 'value',\n            gridIndex: 1,\n            axisLabel: {\n                formatter: '{value} ',\n            },\n            axisTick: {\n                show: false,\n            },\n            splitLine: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n            inverse: true,\n        },\n    ],\n    series: [\n        {\n            name: '数据1',\n            type: 'bar',\n            stack: '话务',\n            barWidth: 10,\n            data: data[0],\n        },\n        {\n            name: '数据2',\n            type: 'bar',\n            stack: '话务',\n            barWidth: 10,\n            data: [408, 309, 379, 418, 482, 430, 352, 389, 407, 473, 372, 337, 389, 495, 306, 449],\n        },\n        {\n            name: '数据3',\n            xAxisIndex: 1,\n            yAxisIndex: 2,\n            type: 'bar',\n            barWidth: 10,\n            data: [317, 379, 333, 341, 371, 395, 333, 352, 372, 392, 393, 371, 335, 362, 395, 331],\n        },\n        {\n            name: '数据4',\n            yAxisIndex: 1,\n            type: 'line',\n            itemStyle: {\n                opacity: 0,\n            },\n            data: [\n                84,\n                84,\n                80,\n                86,\n                81,\n                81,\n                81,\n                84,\n                82,\n                89,\n                87,\n                82,\n                86,\n                87,\n                84,\n                87,\n                84,\n                83,\n                88,\n                86,\n                87,\n                88,\n                84,\n                83,\n                85,\n                87,\n                85,\n                88,\n                89,\n                81,\n            ],\n        },\n    ],\n};\nmyChart.setOption(option);\n//获取Y轴的刻度范围\nvar per_num1, per_num2, top_bar_hit, bot_bar_hit, pos_top;\nvar hit = $('#chart-panel').height() * 0.8;\n\n// 取得2个Y轴的最大值\nvar rangeY1 = myChart.getModel()._componentsMap.data.yAxis[0].axis.scale._extent[1];\nvar rangeY2 = myChart.getModel()._componentsMap.data.yAxis[2].axis.scale._extent[1];\n// 设置分母\nvar range_total = rangeY1 + rangeY2;\n// 上部bar的占比\nper_num1 = rangeY1 / range_total;\n// 下部bar的占比\nper_num2 = rangeY2 / range_total;\n// 高度赋值\ntop_bar_hit = hit * per_num1;\nbot_bar_hit = hit * per_num2;\n\n// 计算top 位置\noption.grid[0].height = top_bar_hit;\noption.grid[1].height = bot_bar_hit;\n// 第二个图表的top=第一个bar的top: 80 + 5px + 上部bar图表高度\npos_top = top_bar_hit + 85;\noption.grid[1].top = pos_top;\n\n// 计算top 位置 end\n\nmyChart.setOption(option);\n\nwindow.addEventListener('resize', function () {\n    myChart.resize();\n\n    myChart.setOption(option);\n\n    //获取Y轴的刻度范围\n    var per_num1, per_num2, top_bar_hit, bot_bar_hit, pos_top;\n    var hit = $('#chart-panel').height() * 0.8;\n\n    // 取得2个Y轴的最大值\n    var rangeY1 = myChart.getModel()._componentsMap.data.yAxis[0].axis.scale._extent[1];\n    var rangeY2 = myChart.getModel()._componentsMap.data.yAxis[2].axis.scale._extent[1];\n    // 设置分母\n    var range_total = rangeY1 + rangeY2;\n    // 上部bar的占比\n    per_num1 = rangeY1 / range_total;\n    // 下部bar的占比\n    per_num2 = rangeY2 / range_total;\n    // 高度赋值\n    top_bar_hit = hit * per_num1;\n    bot_bar_hit = hit * per_num2;\n\n    // 计算top 位置\n    option.grid[0].height = top_bar_hit;\n    option.grid[1].height = bot_bar_hit;\n    // 第二个图表的top=第一个bar的top: 50 + 5px + 上部bar图表高度\n    pos_top = top_bar_hit + 85;\n    option.grid[1].top = pos_top;\n\n    // 计算top 位置 end\n\n    myChart.setOption(option);\n});\n","html":"","externalScripts":"","updaterUID":"obd-oN5Ds0RSZeHageOmpvV6ymVe71BRVCx","theme":"","layout":"","viewCount":0,"userName":"正***眼","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqJ7b60EmG.png?v=1640856825727","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"正***眼"}}