{"status":0,"data":{"cid":"x1mqw8fg8B","authorUid":"bd-1999656674","authorUserName":"s***凉","title":"天津地图3D效果","description":"3d地图","latestVersion":2,"alwaysLatest":1,"createTime":"2020-08-07T01:30:09.000Z","lastUpdateTime":"2020-08-07T01:30:09.000Z","auth":2,"uid":"bd-1999656674","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-07T03:53:09.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1525844720391-Skugj-g0f.json\";\r\nmyChart.showLoading();\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('tianjin', geoJson);\r\n    myChart.hideLoading();\r\n    var geoCoordMap = {\r\n        '和平':[117.2,39.12],\r\n        '河东':[117.22,39.12],\r\n        '河西':[117.22,39.12],\r\n        '南开':[117.15,39.13],\r\n        '河北':[117.18,39.15],\r\n        '红桥':[117.15,39.17],\r\n        '塘沽':[117.65,39.02],\r\n        '汉沽':[117.8,39.25],\r\n        '大港':[117.45,38.83],\r\n        '东丽':[117.3,39.08],\r\n        '西青':[117,39.13],\r\n        '津南':[117.38,38.98],\r\n        '北辰':[117.13,39.22],\r\n        '武清':[117.03,39.38],\r\n        '宝坻':[117.3,39.72],\r\n        '宁河':[117.82,39.33],\r\n        '静海':[116.92,38.93],\r\n        '蓟县':[117.4,40.05],\r\n    }\r\n    var data = [\r\n        {name:'和平', value: 199},\r\n        {name:'河东', value: 39},\r\n        {name:'河西', value: 152},\r\n        {name:'南开', value: 299},\r\n        {name:'河北', value: 89},\r\n        {name:'红桥', value: 52},\r\n        {name:'塘沽', value: 9},\r\n        {name:'汉沽', value: 352},\r\n        {name:'大港', value: 99},\r\n        {name:'东丽', value: 39},\r\n        {name:'西青', value: 480},\r\n        {name:'津南', value: 481},\r\n        {name:'北辰', value: 482},\r\n        {name:'武清', value: 483},\r\n        {name:'宝坻', value: 484},\r\n        {name:'宁河', value: 485},\r\n        {name:'静海', value: 486},\r\n        {name:'蓟县', value: 487},\r\n    ];\r\n    var max = 480, min = 9; // todo \r\n    var maxSize4Pin = 100, minSize4Pin = 20;\r\n\r\n  var convertData = function (data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value)\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n\r\n    option = {\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function (params) {\r\n              if(typeof(params.value)[2] == \"undefined\"){\r\n              \treturn params.name + ' : ' + params.value;\r\n              }else{\r\n              \treturn params.name + ' : ' + params.value[2];\r\n              }\r\n            }\r\n        },\r\n        legend: {\r\n            orient: 'vertical',\r\n            y: 'bottom',\r\n            x: 'right',\r\n            data: ['credit_pm2.5'],\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        visualMap: {\r\n            show: true,\r\n            min: 0,\r\n            max: 500,\r\n            left: 'left',\r\n            top: 'bottom',\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            calculable: true,\r\n            seriesIndex: [1],\r\n            inRange: {\r\n                // color: ['#3B5077', '#031525'] // 蓝黑\r\n                // color: ['#ffc0cb', '#800080'] // 红紫\r\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\r\n                color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\r\n                // color: ['#23074d', '#cc5333'] // 紫红\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#1488CC', '#2B32B2'] // 浅蓝\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n\r\n            }\r\n        },\r\n        geo: {\r\n        map: 'tianjin',\r\n        aspectScale: 0.75,\r\n        layoutCenter: [\"50%\", \"51.5%\"], //地图位置\r\n        layoutSize: '100%',\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: 'rgba(147, 235, 248, 1)',\r\n                borderWidth: 0.5,\r\n                color: {\r\n                    type: 'linear-gradient',\r\n                    x: 0,\r\n                    y: 1500,\r\n                    x2: 2500,\r\n                    y2: 0,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#009DA1' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#005B9E' // 50% 处的颜色\r\n                    }],\r\n                    global: true // 缺省为 false\r\n                },\r\n                opacity: 0.5,\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        },\r\n        z: 2\r\n    },\r\n    series: [{\r\n        type: 'map',\r\n        map: 'tianjin',\r\n        tooltip: {\r\n            show: false\r\n        },\r\n        label: {\r\n            show: true,\r\n            color: '#FFFFFF',\r\n            fontSize: 16\r\n        },\r\n        aspectScale: 0.75,\r\n        layoutCenter: [\"50%\", \"50%\"], //地图位置\r\n        layoutSize: '95%',\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                borderColor: 'rgba(147, 235, 248, 0.6)',\r\n                borderWidth: 0.8,\r\n                areaColor: {\r\n                    type: 'linear-gradient',\r\n                    x: 0,\r\n                    y: 1200,\r\n                    x2: 1000,\r\n                    y2: 0,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#009DA1' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#005B9E' // 50% 处的颜色\r\n                    }],\r\n                    global: true // 缺省为 false\r\n                },\r\n            },\r\n            emphasis: {\r\n                areaColor: 'rgba(147, 235, 248, 0)'\r\n            }\r\n        },\r\n        zlevel: 1\r\n    }]\r\n         \r\n    \r\n    };\r\n    myChart.setOption(option);\r\n});\r\nmyChart.on('georoam', function(params) {\r\n    var option = myChart.getOption(); //获得option对象\r\n    console.log('option的值：',option);\r\n    if (params.zoom != null && params.zoom != undefined) { //捕捉到缩放时\r\n        option.geo[0].zoom = option.series[0].zoom; //下层geo的缩放等级跟着上层的geo一起改变\r\n        option.geo[0].center = option.series[0].center; //下层的geo的中心位置随着上层geo一起改变\r\n    } else { //捕捉到拖曳时\r\n        option.geo[0].center = option.series[0].center; //下层的geo的中心位置随着上层geo一起改变\r\n    }\r\n    myChart.setOption(option); //设置option\r\n});","html":"","externalScripts":"","updaterUID":"bd-1999656674","theme":"","layout":"","viewCount":1912,"userName":"s***凉","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1mqw8fg8B.png?v=1596772389441","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-map","tooltip","visualMap"],"customTags":[],"updaterUserName":"s***凉"}}