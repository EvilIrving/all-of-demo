{"status":0,"data":{"cid":"x5jTXkajUM","authorUid":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","authorUserName":"q***0","title":"河北省地图展示","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-11T09:12:22.000Z","lastUpdateTime":"2021-10-11T09:12:22.000Z","auth":2,"uid":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-11T09:12:22.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1633939162808-GypYIdFqt.geoJson\";\r\n \r\nmyChart.showLoading();\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('hebei', geoJson);\r\n    myChart.hideLoading();\r\n    var geoCoordMap = {\r\n        '石家庄市':[114.444982,38.133034],\r\n        '唐山市':[118.343325,39.71703],\r\n        '秦皇岛市':[119.193332,40.088346],\r\n        '邯郸市':[114.548854,36.553496],\r\n        '邢台市':[114.822676,37.213788],\r\n        '保定市':[115.177642,39.025137],\r\n        '张家口市':[115.038685,40.874645],\r\n        '承德市':[117.551533,41.356206],\r\n        '沧州市':[116.771341,38.270959],\r\n        '廊坊市':[116.540212,39.111215],\r\n        '衡水市':[115.828761,37.7648],\r\n    }\r\n    var data = [\r\n        {name: '石家庄市', value: 199},\r\n        {name: '唐山市', value: 39},\r\n        {name: '秦皇岛市', value: 152},\r\n        {name: '邯郸市', value: 299},\r\n        {name: '邢台市', value: 89},\r\n        {name: '保定市', value: 52},\r\n        {name: '张家口市', value: 9},\r\n        {name: '承德市', value: 352},\r\n        {name: '沧州市', value: 99},\r\n        {name: '廊坊市', value: 39},\r\n        {name: '衡水市', value: 480},\r\n    ];\r\n    var max = 480, min = 9; // todo \r\n    var maxSize4Pin = 100, minSize4Pin = 20;\r\n\r\n  var convertData = function (data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value)\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n\r\n    option = {\r\n         backgroundColor: '#1D346F',\r\n        title: {\r\n            text: '',\r\n            subtext: '',\r\n            x: 'center',\r\n            textStyle: {\r\n                color: '#ccc'\r\n            }\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function (params) {\r\n              if(typeof(params.value)[2] == \"undefined\"){\r\n              \treturn params.name + ' : ' + params.value;\r\n              }else{\r\n              \treturn params.name + ' : ' + params.value[2];\r\n              }\r\n            }\r\n        },\r\n       \r\n        visualMap: {\r\n            show: false,\r\n            min: 0,\r\n            max: 500,\r\n            left: 'left',\r\n            top: 'bottom',\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            calculable: true,\r\n            seriesIndex: [1],\r\n            inRange: {\r\n                // color: ['#3B5077', '#031525'] // 蓝黑\r\n                // color: ['#ffc0cb', '#800080'] // 红紫\r\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\r\n                // color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\r\n                // color: ['#23074d', '#cc5333'] // 紫红\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                color: ['#1488CC', '#2B32B2'] // 浅蓝\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n\r\n            }\r\n        },\r\n       \r\n        geo: {\r\n            show: true,\r\n            map: 'hebei',\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#1D346F',\r\n                    borderWidth: 0,\r\n                    shadowColor: '#23074d',\r\n                    shadowBlur: 30,\r\n                    shadowOffsetX: -2,\r\n                    shadowOffsetY: 5,\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2a333d',\r\n                },\r\n            },\r\n        },\r\n        series : [\r\n       \r\n         {\r\n            type: 'map',\r\n            map: 'hebei',\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n           itemStyle: {\r\n                normal: {\r\n                    areaColor: '#1D346F',\r\n                    borderColor: '#D79D3D',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#0f2c70',\r\n                },\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n        {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            symbol: 'pin',\r\n            symbolSize: function (val) {\r\n                var a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n                var b = minSize4Pin - a*min;\r\n                b = maxSize4Pin - a*max;\r\n                return a*val[2]+b;\r\n            },\r\n              label: {\r\n                    normal: {\r\n                        show: true,\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 9,\r\n                        },\r\n                        formatter(value) {\r\n                            return value.data.value[2]\r\n                        }\r\n                    }\r\n                },\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#1D346F',\r\n                    borderColor: '#D79D3D',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#0f2c70',\r\n                },\r\n            },\r\n           data: convertData(data),\r\n                showEffectOn: 'render',\r\n                rippleEffect: {\r\n                    brushType: 'stroke'\r\n                },\r\n                hoverAnimation: true,\r\n                zlevel: 6\r\n        },\r\n        {\r\n            name: 'Top 5',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data.sort(function (a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 11)),\r\n            symbolSize: function (val) {\r\n                return val[2] / 10;\r\n            },\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'right',\r\n                    show: true\r\n                }\r\n            },\r\n             itemStyle: {\r\n                normal: {\r\n                    areaColor: '#1D346F',\r\n                    borderColor: '#D79D3D',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#0f2c70',\r\n                },\r\n            },\r\n            zlevel: 1\r\n        },\r\n         \r\n    ]\r\n    };\r\n    myChart.setOption(option);\r\n});","html":"","externalScripts":"","updaterUID":"obd-otnT5w9iDZ0Hky9JjS-do63hawsLL8F","theme":"","layout":"","viewCount":0,"userName":"q***0","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5jTXkajUM.png?v=1633943542396","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"q***0"}}