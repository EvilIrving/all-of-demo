{"status":0,"data":{"cid":"xJ0-cCWJBc","authorUid":"bd-3407194657","authorUserName":"w***8","title":"测试轮播","description":"","latestVersion":7,"alwaysLatest":1,"createTime":"2020-07-07T09:47:55.000Z","lastUpdateTime":"2021-11-03T08:31:27.000Z","auth":2,"uid":"bd-3407194657","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-03T08:31:27.000Z","code":"const color = ['#3AA7F9', '#F56C7C', '#FD9A36', '#EBE028', '#31CE65', '#20DACD', '#D671F5', '#F430E8', '#8A31FB'];\nconst mockData = [{\n        name: '直接访问',\n        value: 335\n    },\n    {\n        name: '邮件营销',\n        value: 310\n    },\n    {\n        name: '联盟广告',\n        value: 234\n    },\n    {\n        name: '视频广告',\n        value: 135\n    },\n    {\n        name: '搜索引擎',\n        value: 1548\n    }\n];\nconst legend = [];\nlet total = 0;\nfor(let i in mockData){\n    total += mockData[i].value;\n    legend.push(mockData[i].name)\n}\nconst formatName = (name, value) => `${name}\\n${value}\\n${((value*100/total).toFixed(2))+'%'}`;\noption = {\n    backgroundColor: '#4A5886',\n    tooltip: {\n        trigger: 'item',\n        formatter: '{a} <br/>{b}'\n    },\n    legend: {\n        orient: 'vertical',\n        left: 10,\n        data: legend\n    },\n    series: [{\n        name: '访问来源',\n        type: 'pie',\n        radius: ['50%', '70%'],\n        avoidLabelOverlap: false,\n        label: {\n            show: false,\n            position: 'center'\n        },\n        emphasis: {\n            label: {\n                show: true,\n                fontSize: '30',\n                fontWeight: 'bold'\n            }\n        },\n        labelLine: {\n            show: false\n        },\n        data: mockData.map((item, index) => {\n            return {\n                value: item.value,\n                name: formatName(item.name, item.value),\n                itemStyle: {\n                    normal: {\n                        color: color[index],\n                        shadowColor: color[index],\n                        shadowBlur: 7\n                    }\n                },\n            }\n        })\n    }]\n};\nmyChart.setOption(option);\nlet i = 0;\n\nlet timer = ''\n\nfunction autoRresh() {\n    clearInterval(timer)\n    timer = setInterval(() => {\n        if (i > mockData.length - 1) {\n            myChart.dispatchAction({\n                type: 'downplay',\n                seriesIndex: 0,\n                dataIndex: i - 1\n            });\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 0,\n                dataIndex: 0\n            });\n            i = 1;\n        } else {\n            myChart.dispatchAction({\n                type: 'highlight',\n                seriesIndex: 0,\n                dataIndex: i\n            });\n            myChart.dispatchAction({\n                type: 'downplay',\n                seriesIndex: 0,\n                dataIndex: i - 1\n            });\n            i++;\n        }\n    }, 2000)\n}\nautoRresh();\nmyChart.on('mouseover', () => {\n    if (timer) {\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: i - 1\n        });\n        i = 0;\n    }\n\n    clearInterval(timer)\n})\nmyChart.on('mouseout', (e) => {\n    autoRresh();\n})","html":"","externalScripts":"","updaterUID":"bd-3407194657","theme":"","layout":"","viewCount":104,"userName":"w***8","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xJ0-cCWJBc.png?v=1635928287219","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"w***8"}}