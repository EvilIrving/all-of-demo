{"status":0,"data":{"cid":"xtVpslohmy","authorUid":"bd-3951734745","authorUserName":"花***4","title":"立体图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-10T14:28:02.000Z","lastUpdateTime":"2019-03-10T14:28:02.000Z","auth":2,"uid":"bd-3951734745","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-10T14:28:02.000Z","code":"// 市区坐标\nvar geoCoordMap = {\n    \"北京市\": [116.41433, 39.91095],\n    \"天津市\": [117.191041, 39.134857],\n    \"河北省\": [114.511934, 38.058785],\n    \"山西省\": [112.543424, 37.887658],\n    \"内蒙古\": [111.694848, 40.836106],\n    \"辽宁省\": [123.425425, 41.819004],\n    \"吉林省\": [126.322646, 43.871432],\n    \"黑龙江省\": [128.60352, 47.758573],\n    \"上海市\": [121.477611, 31.226174],\n    \"江苏省\": [118.799398, 32.045042],\n    \"浙江省\": [120.158498, 30.291092],\n    \"安徽省\": [117.293119, 31.87839],\n    \"福建省\": [119.307623, 26.068211],\n    \"江西省\": [115.92252, 28.68553],\n    \"山东省\": [116.989563, 36.682589],\n    \"河南省\": [113.627458, 34.762387],\n    \"湖北省\": [114.305858, 30.605913],\n    \"湖南省\": [112.93296, 28.236376],\n    \"广东省\": [113.261811, 23.118408],\n    \"广西\": [108.326736, 22.824533],\n    \"海南省\": [110.290648, 20.012453],\n    \"重庆市\": [107.546798, 30.978004],\n    \"四川省\": [102.063163, 30.667561],\n    \"贵州省\": [106.661781, 27.609054],\n    \"云南省\": [102.702913, 25.050202],\n    \"西藏\": [88.112616, 31.668426],\n    \"陕西省\": [108.925798, 34.296079],\n    \"甘肃省\": [103.834346, 36.072614],\n    \"青海省\": [95.778449, 36.625145],\n    \"宁夏\": [106.230594, 38.490587],\n    \"新疆\": [83.61023, 40.83845],\n    \"台湾省\": [121.511849, 25.060677],\n    \"香港\": [114.179376, 22.318339],\n    \"澳门\": [113.546969, 22.202741]\n};\nvar rawData = {\n    \"北京市\": [10, 20, 30],\n    \"天津市\": [10, 20, 30],\n    \"河北省\": [10, 20, 30],\n    \"山西省\": [10, 20, 30],\n    \"内蒙古\": [10, 20, 30],\n    \"辽宁省\": [10, 20, 30],\n    \"吉林省\": [10, 20, 30],\n    \"黑龙江省\": [20, 50, 30],\n    \"上海市\": [10, 20, 30],\n    \"江苏省\": [10, 20, 30],\n    \"浙江省\": [10, 20, 30],\n    \"安徽省\": [10, 20, 30],\n    \"福建省\": [10, 20, 30],\n    \"江西省\": [10, 20, 30],\n    \"山东省\": [10, 20, 30],\n    \"河南省\": [10, 20, 30],\n    \"湖北省\": [10, 20, 30],\n    \"湖南省\": [10, 20, 30],\n    \"广东省\": [10, 20, 30],\n    \"广西\": [10, 20, 30],\n    \"海南省\": [10, 20, 30],\n    \"重庆市\": [10, 20, 30],\n    \"四川省\": [10, 20, 30],\n    \"贵州省\": [10, 20, 30],\n    \"云南省\": [10, 20, 30],\n    \"西藏\": [10, 20, 30],\n    \"陕西省\": [10, 20, 30],\n    \"甘肃省\": [10, 20, 30],\n    \"青海省\": [10, 20, 30],\n    \"宁夏\": [10, 20, 30],\n    \"新疆\": [10, 20, 30],\n    \"台湾省\": [10, 20, 30],\n    \"香港\": [10, 20, 30],\n    \"澳门\": [10, 20, 30]\n};\n\noption = {\n    animation: false,\n    // 地图背景颜色\n    backgroundColor: new echarts.graphic.RadialGradient(0.5, 0.5, 0.4, [{\n        offset: 0,\n        color: '#eee'\n    }, {\n        offset: 1,\n        color: '#eee'\n    }]),\n\n    geo: {\n        scaleLimit: {\n            min: 1,\n            max: 1\n        },\n        map: 'china',\n        // silent: true,\n        roam: true,\n        zoom: 1.155, // 地图初始大小\n        center: [102.925798, 35.296079], // 初始中心位置\n        label: {\n            emphasis: {\n                show: false,\n                areaColor: '#eee'\n            }\n        },\n\n        // 地区块儿颜色\n        itemStyle: {\n            normal: {\n                areaColor: '#999',\n                borderColor: '#fff'\n            },\n            emphasis: {\n                areaColor: '#999'\n            }\n        }\n    },\n    series: []\n};\n\nfunction renderEachCity() {\n    var option = {\n        xAxis3D: {},\n        yAxis3D: {},\n        zAxis3D:{},\n         grid3D: {},\n    visualMap: {\n        max: 20,\n        inRange: {\n            color:['#F75D5D', 'yellow', 'red']\n        }\n    },\n        series: []\n    };\n\n    echarts.util.each(rawData, function(dataItem, idx) {\n        //console.log('dataItem, idx',dataItem, idx)\n        //geoCoord 经纬度\n        var geoCoord = geoCoordMap[idx];\n        var coord = myChart.convertToPixel('geo', geoCoord);\n\n        idx += '';\n\n       \n       dataItem[0]=[0,0,10];\n        dataItem[1]=[0,1,20];\n         dataItem[2]=[0,2,30]\n        inflationData = dataItem;\n        console.log(10,inflationData);\n       \n   option.zAxis3D.type = \"value\";\n        option.xAxis3D.type = \"category\";\n        option.xAxis3D.id = idx;\n         option.xAxis3D.gridId = idx;\n          option.xAxis3D.name = idx;\n        option.xAxis3D.data = [\"数据A\", \"数据B\", \"数据C\"];\n           option.yAxis3D.id = idx;\n        option.yAxis3D.type = \"category\";\n        option.yAxis3D.data = ['Saturday', 'Friday','Friday1'];\n        option.zAxis3D.type = \"value\";\n        option.zAxis3D.id = idx;\n       \n        option.grid3D.width = 90\n        option.grid3D.height = 40\n        option.grid3D.left = coord[0] - 15\n        option.grid3D.top = coord[1] - 15\n        option.series.push({\n            id: idx,\n           \n            xAxisId: idx,\n            yAxisId: idx,\n           type: 'bar3D',\n            //data: inflationData,\n             data: inflationData\n        })\n    });\n    // console.time('a');\n    myChart.setOption(option);\n    // console.timeEnd('a');\n}\n\n\n\n\n\n\nsetTimeout(renderEachCity, 0);\n// 缩放和拖拽\nfunction throttle(fn, delay, debounce) {\n\n    var currCall;\n    var lastCall = 0;\n    var lastExec = 0;\n    var timer = null;\n    var diff;\n    var scope;\n    var args;\n\n    delay = delay || 0;\n\n    function exec() {\n        lastExec = (new Date()).getTime();\n        timer = null;\n        fn.apply(scope, args || []);\n    }\n\n    var cb = function() {\n        currCall = (new Date()).getTime();\n        scope = this;\n        args = arguments;\n        diff = currCall - (debounce ? lastCall : lastExec) - delay;\n\n        clearTimeout(timer);\n\n        if (debounce) {\n            timer = setTimeout(exec, delay);\n        } else {\n            if (diff >= 0) {\n                exec();\n            } else {\n                timer = setTimeout(exec, -diff);\n            }\n        }\n\n        lastCall = currCall;\n    };\n\n    return cb;\n}\n\nvar throttledRenderEachCity = throttle(renderEachCity, 0);\n\n// // 点击显示柱状图\nmyChart.on('click', function(e) {\n    console.log('点击显示柱状图', e)\n\n\n    if (e.seriesId) {\n        console.log('图表', e.seriesId)\n    } else {\n        console.log('地图', e.region.name)\n\n    }\n\n    // if(e.componentSubType == \"bar\"){\n    //     // 先清除所有柱状图\n    $('.tongJiTu').remove();\n\n \n\n\n    // }\n    return;\n});","html":"","externalScripts":"/dep/echarts/map/js/china.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-3951734745","theme":"","layout":"","viewCount":361,"userName":"花***4","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xtVpslohmy.undefined?v=","isCustomThumbnail":0,"builtinTags":["category-work"],"customTags":["gl","map"],"updaterUserName":"花***4"}}