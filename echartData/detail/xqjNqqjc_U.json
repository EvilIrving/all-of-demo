{"status":0,"data":{"cid":"xqjNqqjc_U","authorUid":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","authorUserName":"Y***1","title":"横向柱状图及排名","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-09-21T07:50:36.000Z","lastUpdateTime":"2021-07-30T11:38:42.000Z","auth":2,"uid":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.9.0","versionCreateTime":"2021-07-30T11:38:42.000Z","code":"var data=[\r\n    {\"code\":\"600519\",\"stock\":\"aaa\",\"fundPost\":\"21.987691\"},\r\n    {\"code\":\"000858\",\"stock\":\"bbb\",\"fundPost\":\"20.377176\"},\r\n    {\"code\":\"002475\",\"stock\":\"ccc\",\"fundPost\":\"19.127404\"},\r\n    {\"code\":\"600276\",\"stock\":\"ddd\",\"fundPost\":\"18.40882\"},\r\n    {\"code\":\"601318\",\"stock\":\"eee\",\"fundPost\":\"17.980597\"},\r\n    {\"code\":\"000661\",\"stock\":\"fff\",\"fundPost\":\"16.957898\"},\r\n    {\"code\":\"000333\",\"stock\":\"ggg\",\"fundPost\":\"15.099577\"},\r\n    {\"code\":\"300760\",\"stock\":\"eee\",\"fundPost\":\"14.76103\"},\r\n    {\"code\":\"300750\",\"stock\":\"ttt\",\"fundPost\":\"13.002175\"},\r\n    {\"code\":\"601888\",\"stock\":\"fff\",\"fundPost\":\"12.133536\"}\r\n    ]\r\n  function contains(arr, dst) {\r\n        var i = arr.length;\r\n        while ((i -= 1)) {\r\n          if (arr[i] == dst) {\r\n            return i;\r\n          }\r\n        }\r\n        return false;\r\n      }\r\n\r\n    \r\n      var attackSourcesColor = [\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#EB3B5A\" },\r\n          { offset: 1, color: \"#FE9C5A\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#FA8231\" },\r\n          { offset: 1, color: \"#FFD14C\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#F7B731\" },\r\n          { offset: 1, color: \"#FFEE96\" }\r\n        ]),\r\n        new echarts.graphic.LinearGradient(0, 1, 1, 1, [\r\n          { offset: 0, color: \"#395CFE\" },\r\n          { offset: 1, color: \"#2EC7CF\" }\r\n        ])\r\n      ];\r\n      var attackSourcesColor1 = [\r\n        \"#EB3B5A\",\r\n        \"#FA8231\",\r\n        \"#F7B731\",\r\n        \"#3860FC\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#56D0E3\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#1089E7\",\r\n        \"#F57474\",\r\n        \"#F57474\"\r\n      ];\r\n      var attaData = [];\r\n      var attaName = [];\r\n      var topName=[]\r\n      data.forEach((it, index) => {\r\n        attaData[index] = parseFloat(it.fundPost).toFixed(2);\r\n        attaName[index] = it.stock;\r\n        topName[index] = `${it.code} ${it.stock}`\r\n      });\r\n      var salvProMax = []; //背景按最大值\r\n      for (let i = 0; i < attaData.length; i++) {\r\n        salvProMax.push(attaData[0]);\r\n      }\r\n      function attackSourcesDataFmt(sData) {\r\n        var sss = [];\r\n        sData.forEach(function(item, i) {\r\n          let itemStyle = {\r\n            color: i > 3 ? attackSourcesColor[3] : attackSourcesColor[i]\r\n          };\r\n          sss.push({\r\n            value: item,\r\n            itemStyle: itemStyle\r\n          });\r\n        });\r\n        return sss;\r\n      }\r\n\r\n      var option = {\r\n        backgroundColor: \"#000\",\r\n        tooltip: {\r\n          show: false,\r\n          backgroundColor: \"rgba(3,169,244, 0.5)\", //背景颜色（此时为默认色）\r\n          textStyle: {\r\n            fontSize: 16\r\n          }\r\n        },\r\n        color: [\"#F7B731\"],\r\n        legend: {\r\n          pageIconSize: [12, 12],\r\n          itemWidth: 20,\r\n          itemHeight: 10,\r\n          textStyle: {\r\n            //图例文字的样式\r\n            fontSize: 10,\r\n            color: \"#fff\"\r\n          },\r\n          selectedMode: false,\r\n          data: [\"个人所得(亿元)\"]\r\n        },\r\n        grid: {\r\n          left: \"5%\",\r\n          right: \"2%\",\r\n          width:\"80%\",\r\n          bottom: \"2%\",\r\n          top: \"8%\",\r\n          containLabel: true\r\n        },\r\n        xAxis: {\r\n          type: \"value\",\r\n\r\n          splitLine: {\r\n            show: false\r\n          },\r\n          axisLabel: {\r\n            show: false\r\n          },\r\n          axisTick: {\r\n            show: false\r\n          },\r\n          axisLine: {\r\n            show: false\r\n          }\r\n        },\r\n        yAxis: [\r\n          {\r\n            type: \"category\",\r\n            inverse: true,\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisPointer: {\r\n              label: {\r\n                show: true,\r\n                //margin: 30\r\n              }\r\n            },\r\n            pdaaing: [5, 0, 0, 0],\r\n            postion: \"right\",\r\n            data: attaName,\r\n            axisLabel: {\r\n              margin: 30,\r\n              fontSize: 10,\r\n              align: \"left\",\r\n              padding: [2, 0, 0, 0],\r\n              color: \"#000\",\r\n              rich: {\r\n                nt1: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[0],\r\n                  width: 13,\r\n                  height: 13,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  lineHeight: \"5\",\r\n                  padding: [0, 1, 2, 1]\r\n                  // padding:[0,0,2,0],\r\n                },\r\n                nt2: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[1],\r\n                  width: 13,\r\n                  height: 13,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1]\r\n                },\r\n                nt3: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[2],\r\n                  width: 13,\r\n                  height: 13,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1]\r\n                },\r\n                nt: {\r\n                  color: \"#fff\",\r\n                  backgroundColor: attackSourcesColor1[3],\r\n                  width: 13,\r\n                  height: 13,\r\n                  fontSize: 10,\r\n                  align: \"center\",\r\n                  lineHeight: 3,\r\n                  borderRadius: 100,\r\n                  padding: [0, 1, 2, 1],\r\n                  lineHeight: 5\r\n                }\r\n              },\r\n              formatter: function(value, index) {\r\n                index = contains(attaName, value) + 1;\r\n                if (index - 1 < 3) {\r\n                  return [\"{nt\" + index + \"|\" + index + \"}\"].join(\"\\n\");\r\n                } else {\r\n                  return [\"{nt|\" + index + \"}\"].join(\"\\n\");\r\n                }\r\n              }\r\n            }\r\n          },\r\n          {\r\n            type: \"category\",\r\n            inverse: true,\r\n            axisTick: \"none\",\r\n            axisLine: \"none\",\r\n            show: true,\r\n            axisLabel: {\r\n              textStyle: {\r\n                color: \"#fff\",\r\n                fontSize: \"10\"\r\n              }\r\n            },\r\n            data: attackSourcesDataFmt(attaName)\r\n          },\r\n          {//名称\r\n          type: 'category',\r\n             offset: -10,\r\n            position: \"left\",\r\n            axisLabel: {\r\n              color: `#fff`,\r\n              fontSize: 10\r\n            },\r\n            axisLine: {\r\n              show: false\r\n            },\r\n            inverse: false,\r\n            axisTick: {\r\n              show: false\r\n            },\r\n            axisLabel: {\r\n              interval: 0,\r\n              color: [\"#fff\"],\r\n              align: \"left\",\r\n              verticalAlign: \"bottom\",\r\n              lineHeight: 32,\r\n              fontSize: 10\r\n            },\r\n            data: topName\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            zlevel: 1,\r\n            name: \"个人所得(亿元)\",\r\n            type: \"bar\",\r\n            barWidth: \"15px\",\r\n            animationDuration: 1500,\r\n            data: attackSourcesDataFmt(attaData),\r\n            align: \"center\",\r\n            itemStyle: {\r\n              normal: {\r\n                barBorderRadius: 10\r\n              }\r\n            },\r\n            label: {\r\n              show: true,\r\n              fontSize: 10,\r\n              color: \"#fff\",\r\n              textBorderWidth: 2,\r\n              padding: [2, 0, 0, 0]\r\n            }\r\n          },\r\n          {\r\n            name: \"个人所得(亿元)\",\r\n            type: \"bar\",\r\n            barWidth: 15,\r\n            barGap: \"-100%\",\r\n            margin: \"20\",\r\n            data: salvProMax,\r\n            textStyle: {\r\n              //图例文字的样式\r\n              fontSize: 10,\r\n              color: \"#fff\"\r\n            },\r\n            itemStyle: {\r\n              normal: {\r\n                color: \"#05325F\",\r\n                //width:\"100%\",\r\n                fontSize: 10,\r\n                barBorderRadius: 30\r\n              },\r\n            }\r\n          }\r\n        ]\r\n      };","html":"","externalScripts":"","updaterUID":"obd-oMmVVSKIe_yGf7VkRfD7DtasTDD9f2c","theme":"","layout":"","viewCount":14529,"userName":"Y***1","commentCount":2,"starCount":88,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqjNqqjc_U.png?v=1627645123060","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"Y***1"}}