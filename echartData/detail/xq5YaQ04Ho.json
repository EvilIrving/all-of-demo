{"status":0,"data":{"cid":"xq5YaQ04Ho","authorUid":"bd-1606641265","authorUserName":"你***1","title":"客户案例","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2018-11-15T10:01:53.000Z","lastUpdateTime":"2018-11-15T10:01:53.000Z","auth":2,"uid":"bd-1606641265","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.8.5","versionCreateTime":"2018-11-28T03:23:30.000Z","code":"var starIcon = \"/asset/get/s/data-1542262969587-UTRY4YOsU.png\";\nvar locIcon = \"/asset/get/s/data-1542251770482-L2DwBYTQj.png\";\n\nvar datalist=[[\n        {\n            name: '陕西',\n            text: '',\n            value: [108.948024, 34.263161, 80],\n            symbol: 'image://' + locIcon,\n            symbolSize: 16,\n        },{\n            name: '北京',\n            text: '',\n            value: [116.405285, 39.904989, 177],\n            symbol: 'image://' + starIcon,\n            symbolSize: 16,\n        }, {\n            name: '江苏',\n            text: '',\n            value: [118.767413, 32.041544, 92],\n            symbol: 'image://' + starIcon,\n            symbolSize: 16\n        }, {\n            name: '广东',\n            text: '',\n            value: [113.280637, 23.125178, 123],\n            symbol: 'image://' + starIcon,\n            symbolSize: 16\n        }, {\n            name: '吉林',\n            text: '',\n            value: [125.3245, 43.886841, 82],\n            symbol: 'image://' + starIcon,\n            symbolSize: 16\n        }\n    ],[\n        {\n            name: '浙江',\n            text: '',\n            value: [120.153576, 30.287459, 114],\n            symbol: 'image://' + locIcon,\n            symbolSize: 20,\n        },{\n            name: '福建',\n            text: '',\n            value: [119.306239, 26.075302, 116],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        },{\n            name: '天津',\n            text: '',\n            value: [117.190182, 39.125596, 42],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        }\n    ],[\n        {\n            name: '北京',\n            text: '',\n            value: [116.405285, 39.904989, 177],\n            symbol: 'image://' + locIcon,\n            symbolSize: 20,\n        },{\n            name: '山东',\n            text: '',\n            value: [117.000923, 36.675807, 119],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        },{\n            name: '天津',\n            text: '',\n            value: [117.190182, 39.125596, 42],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        },{\n            name: '江苏',\n            text: '',\n            value: [118.767413, 32.041544, 92],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        },{\n            name: '新疆',\n            text: '',\n            value: [87.617733, 43.792818, 67],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        },{\n            name: '内蒙古',\n            text: '',\n            value: [111.670801, 40.818311, 47],\n            symbol: 'image://' + starIcon,\n            symbolSize: 20,\n        }\n    ]]\n\n    \nvar geoCoordMap = {};\n\n/*获取地图数据*/\nmyChart.showLoading();\nvar mapFeatures = echarts.getMap('china').geoJson.features;\nmyChart.hideLoading();\nmapFeatures.forEach(function(v) {\n    // 地区名称\n    var name = v.properties.name;\n    // 地区经纬度\n    geoCoordMap[name] = v.properties.cp;\n\n});\n\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value),\n            });\n        }\n    }\n    return res;\n}; \n\n option = {\n        backgroundColor: '#222f59',\n        title: {\n            text: '客户案例',\n            left: 'center',\n            textStyle: {\n                color: '#bbbec5'\n            }\n        },\n        tooltip:{\n            textStyle : {\n                color: '#fff',\n                decoration: 'none',\n            },\n            formatter: function(params){\n                var text = '';\n                if(params.data){\n                    datalist.forEach(item => {\n                        item.forEach(ele => {\n                            if(params.data.name === ele.name){\n                                text= ele.text;\n                            }\n                        })\n                    })\n                }\n                \n                return text;\n            }\n        },\n        label: {\n            show: false\n        },\n        geo: {\n            map: 'china',\n            label: {\n                show: false\n            },\n            silent: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#203179',\n                    borderColor: '#253266',\n                    borderWidth: 1,\n                    shadowColor: '#36437c',\n                    shadowBlur: 1.5\n                },\n            },\n        },\n        series: [{\n            type: 'map',\n            map: 'china',\n            selectedMode:true,\n            // silent: true,\n            itemStyle: {\n                normal: {\n                    borderColor: 'grey',\n                    areaColor: '#203179',\n                    label: {\n                        show: false\n                    }\n                },\n                emphasis: {\n                    areaColor: '#203179',\n                    label: {\n                        show: false\n                    }\n                }\n            },\n            data: [\n                {\n                    name:\"北京\",\n                    value:1,\n                    itemStyle: {\n                        normal: {\n                          color: '#1f7eff'\n                        },\n                        emphasis: {\n                            areaColor: '#1f7eff',\n                            label: {\n                                show: false\n                            }\n                        }\n                    }\n                },{\n                    name:\"陕西\",\n                    value:1,\n                    itemStyle: {\n                      normal: {\n                          color: '#1f7eff'\n                      },\n                        emphasis: {\n                            areaColor: '#1f7eff',\n                            label: {\n                                show: false\n                            }\n                        }\n                    }\n                },{\n                    name:\"江苏\",\n                    value:1,\n                    itemStyle: {\n                      normal: {\n                          color: '#1f7eff'\n                      },\n                        emphasis: {\n                            areaColor: '#1f7eff',\n                            label: {\n                                show: false\n                            }\n                        }\n                    }\n                },{\n                    name:\"广东\",\n                    value:1,\n                    itemStyle: {\n                      normal: {\n                          color: '#1f7eff'\n                      },\n                        emphasis: {\n                            areaColor: '#1f7eff',\n                            label: {\n                                show: false\n                            }\n                        }\n                    }\n                },{\n                    name:\"吉林\",\n                    value:1,\n                    itemStyle: {\n                      normal: {\n                          color: '#1f7eff'\n                      },\n                        emphasis: {\n                            areaColor: '#1f7eff',\n                            label: {\n                                show: false\n                            }\n                        }\n                    }\n                },\n            ]\n        },{\n            name: '点',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            itemStyle: {\n                normal: {\n                    color: '#F62157', //标志颜色\n                }\n            },\n            zlevel: 6,\n            data: datalist[0],\n        },]\n    };\n    \nvar index = 0;\nvar timeTicket = null;\ntimeTicket && clearInterval(timeTicket);\ntimeTicket = setInterval(function() {\n    if(index < datalist.length-1){\n        index++;\n        \n    }else{\n        index = 0;\n    }\n    \n    option.series[1].data = datalist[index]\n    \n    var data1 = option.series[1].data;\n    \n    var data= [];\n     data1.forEach(item => {\n        data.push(\n            {\n                name:item.name,\n                value:1,\n                itemStyle: {\n                  normal: {\n                      color: '#1f7eff'\n                  },\n                    emphasis: {\n                        areaColor: '#1f7eff',\n                        label: {\n                            show: false\n                        }\n                    }\n                }\n            }\n        )\n        return data\n    })\n    \n    option.series[0].data = data\n    myChart.setOption(option); \n    \n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: data[0]\n    });\n}, 2000);\n","html":"","externalScripts":"https://cdn.bootcss.com/echarts/3.8.5/echarts.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-1606641265","theme":"","layout":"","viewCount":674,"userName":"你***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xq5YaQ04Ho.png?v=1542276113351","isCustomThumbnail":1,"builtinTags":["category-work","geo","series-map","series-scatter","title","tooltip"],"customTags":["dispatchAction"],"updaterUserName":"你***1"}}