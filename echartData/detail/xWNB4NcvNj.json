{"status":0,"data":{"cid":"xWNB4NcvNj","authorUid":"bd-2013481626","authorUserName":"じ***ゞ","title":"折线图+圆点拖拽","description":"图展示通过拖拽修改...","latestVersion":3,"alwaysLatest":1,"createTime":"2019-07-24T10:33:17.000Z","lastUpdateTime":"2019-07-24T10:33:17.000Z","auth":2,"uid":"bd-2013481626","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-07-30T03:34:58.000Z","code":"let listN = '温度';\r\nlet unit = '°C';\r\nlet xAxisData = ['30/01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '31/00']\r\nlet yAxisData = [20, 21, 20, 23, 26, 25, 26, 25, 28, 29, 30, 29, 28, 27, 26, 25, 24, 23, 23, 21, 20, 21, 22, 23]\r\n\r\noption = {\r\n    grid: {\r\n        left: '10%',\r\n        top: '30%',\r\n        right: '10%',\r\n        bottom: '30%'\r\n    },\r\n    tooltip: {\r\n        triggerOn: 'none',\r\n        formatter: function(params) {\r\n            return 'X: ' + params.name + '<br>Y: ' + params.data;\r\n        }\r\n    },\r\n    dataZoom: {\r\n        bottom: '20%',\r\n        end: 50\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        data: xAxisData\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        name: `${listN}${unit}`,\r\n        nameGap: 35,\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: '#DBDBDB',\r\n                type: 'dashed'\r\n            }\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        }\r\n    },\r\n    series: [{\r\n        id: 'aaa',\r\n        name: listN,\r\n        type: 'line',\r\n        color: '#EC5176',\r\n        smooth: true,\r\n        symbolSize: 10,\r\n        areaStyle: {\r\n            color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: 'rgba(235, 81, 118, 0.3)'\r\n                }, {\r\n                    offset: 1,\r\n                    color: 'rgba(235, 81, 118,0)'\r\n                }],\r\n                globalCoord: false\r\n            }\r\n        },\r\n        data: yAxisData\r\n    }]\r\n}\r\n\r\n// 拖拽\r\nsetTimeout(function() {\r\n    myChart.setOption({\r\n        graphic: echarts.util.map(yAxisData, function(item, dataIndex) {\r\n            let position = myChart.convertToPixel({ seriesIndex: 0 }, [dataIndex, item]);\r\n            return {\r\n                id: dataIndex,\r\n                type: 'circle',\r\n                position: position,\r\n                shape: {\r\n                    r: 5\r\n                },\r\n                invisible: true,\r\n                draggable: true,\r\n                ondrag: echarts.util.curry(onPointDragging, dataIndex),\r\n                onmousemove: echarts.util.curry(showTooltip, dataIndex),\r\n                onmouseout: echarts.util.curry(hideTooltip, dataIndex),\r\n                ondragend: echarts.util.curry(onPointDragEnd, dataIndex),\r\n                z: 100\r\n            };\r\n        })\r\n    });\r\n}, 0);\r\nwindow.addEventListener('resize', updatePosition);\r\nmyChart.on('dataZoom', updatePosition);\r\n\r\nfunction updatePosition() {\r\n    myChart.setOption({\r\n        graphic: echarts.util.map(yAxisData, function(item, dataIndex) {\r\n            return {\r\n                position: myChart.convertToPixel({ seriesIndex: 0 }, [dataIndex, item])\r\n            };\r\n        })\r\n    });\r\n}\r\n\r\nfunction showTooltip(dataIndex) {\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 0,\r\n        dataIndex: dataIndex\r\n    });\r\n}\r\n\r\nfunction hideTooltip(dataIndex) {\r\n    myChart.dispatchAction({\r\n        type: 'hideTip'\r\n    });\r\n}\r\n\r\nfunction onPointDragging(dataIndex, dx, dy) {\r\n    yAxisData[dataIndex] = myChart.convertFromPixel({ seriesIndex: 0 }, this.position)[1];\r\n    myChart.setOption({\r\n        series: [{\r\n            id: 'aaa',\r\n            data: yAxisData\r\n        }]\r\n    });\r\n}\r\n\r\nfunction onPointDragEnd(dataIndex, dx, dy) {\r\n    myChart.setOption({\r\n        graphic: echarts.util.map(yAxisData, function(item, dataIndex) {\r\n            return {\r\n                id: dataIndex,\r\n                position: myChart.convertToPixel({ seriesIndex: 0 }, [dataIndex, item])\r\n            }\r\n        })\r\n    })\r\n}","html":"","externalScripts":"","updaterUID":"bd-2013481626","theme":"default","layout":"","viewCount":926,"userName":"じ***ゞ","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWNB4NcvNj.png?v=1564457698323","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","graphic","grid","series-line","tooltip"],"customTags":["拖拽"],"updaterUserName":"じ***ゞ"}}