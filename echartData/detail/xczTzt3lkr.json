{"status":0,"data":{"cid":"xczTzt3lkr","authorUid":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","authorUserName":"凯***宏","title":"多图混合","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-11-03T08:49:45.000Z","lastUpdateTime":"2021-11-17T09:29:46.000Z","auth":2,"uid":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.6.0","versionCreateTime":"2021-11-17T09:29:46.000Z","code":"\nconst leftPieJson = {\n    治愈率: 67.23,\n    补全: 32.77,\n};\nconst rightPieJson = {\n    死亡率: 2.12,\n    补全: 97.88,\n};\n\nvar uploadedDataURL = '/asset/get/s/data-1635833218088-wOYRlagli.json';\nmyChart.showLoading('default', {\n    text: '统计中，请稍候...',\n    maskColor: '#2957A2',\n    textColor: '#fff',\n});\n$.getJSON(uploadedDataURL, function (uploadedData) {\n    let config = uploadedData[0].reverse();\n    let result = uploadedData[1].reverse();\n\n    result.sort((a, b) => {\n        return a.ZBZ - b.ZBZ;\n    });\n\n    const colors = ['rgba(0, 125, 255, 1)', 'rgba(0, 232, 224, 1)', 'rgba(225, 165, 56, 1)'].reverse();\n    let vals = result.map((item) => {\n        return Number(item.ZBZ);\n    });\n    let max = Math.max(...vals);\n    //let base_data = result.map((item) => 0);\n    let series = result.map((item, index) => {\n        return {\n            type: 'bar',\n            barWidth: 20,\n            data: result.map((item2) => {\n                if (item.ZBDM == item2.ZBDM) {\n                    return item.ZBZ;\n                }\n                return 0;\n            }),\n            coordinateSystem: 'polar',\n            name: item.ZBMC,\n            stack: 'a',\n            roundCap: true,\n            itemStyle: {\n                color: colors[index],\n                barBorderRadius: 0,\n            },\n            showBackground: false,\n        };\n    });\n\n    option = {\n        backgroundColor: '#000',\n        angleAxis: {\n            type: 'value',\n            min: 0,\n            max: Math.ceil(max / 0.75),\n            clockwise: false,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            splitLine: {\n                show: false,\n            },\n            axisLabel: {\n                show: false,\n            },\n        },\n        radiusAxis: {\n            type: 'category',\n            data: result.map((item) => {\n                return item.ZBMC;\n            }),\n            z: 100,\n            nameLocation: 'start',\n            boundaryGap: true,\n            axisLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLabel: {\n                show: true,\n                margin: -180,\n\n                align: 'right',\n                color: function (value, index) {\n                    return colors[index] || '#FFF';\n                },\n                formatter: function (value, index) {\n                    return `{a|${value}} {x|${result[index].ZBZ}} {b|${config[index].JLDW}}`;\n                },\n                interval: 0,\n                rich: {\n                    a: {\n                        color: '#fff',\n                        fontSize: 14,\n                        fontWeight: 400,\n                        lineHeight: 22,\n                    },\n                    b: {\n                        color: 'rgba(255, 255, 255, 0.5)',\n                        fontSize: 14,\n                        fontWeight: 400,\n                        lineHeight: 22,\n                    },\n                    x: {\n                        width: 80,\n                        fontSize: 24,\n                        fontWeight: 800,\n                        lineHeight: 22,\n                    },\n                },\n            },\n        },\n        polar: {\n            center: ['50%', '35%'],\n            radius: ['10%', '60%'],\n        },\n        tooltip: {\n            show: false,\n        },\n\n        series: series.concat([\n            {\n                type: 'pie',\n                radius: [0, '20%'],\n                center: ['25%', '75%'],\n                label: {\n                    show: false,\n                },\n                labelLine: { show: false },\n                selectedOffset: 5,\n                data: Object.keys(leftPieJson).map(function (key, i) {\n                    return {\n                        name: key.replace('.js', ''),\n                        value: leftPieJson[key],\n                        itemStyle: {\n                            color: i === 0 ? '#00CCFF' : '#022B5D',\n                        },\n                        selected: i === 0,\n                    };\n                }),\n            },\n            {\n                type: 'pie',\n                radius: [0, '20%'],\n                center: ['75%', '75%'],\n                label: {\n                    show: false,\n                },\n                labelLine: { show: false },\n                selectedOffset: 5,\n                data: Object.keys(rightPieJson).map(function (key, i) {\n                    return {\n                        name: key.replace('.js', ''),\n                        value: rightPieJson[key],\n                        itemStyle: {\n                            color: i === 0 ? '#E1A538' : '#022B5D',\n                        },\n                        selected: i === 0,\n                    };\n                }),\n            },\n        ]),\n        title: [\n            {\n                text: Object.keys(leftPieJson).reduce(function (all, key, index) {\n                        return all + (index === 0 ? key : '');\n                    }, ''),\n                textStyle: {\n                    fontSize: 16,\n                    fontFamily: 'Source Han Sans CN',\n                    fontWeight: 400,\n                    color: '#00CCFF',\n                },\n                subtext:\n                    Object.keys(leftPieJson).reduce(function (all, key, index) {\n                        return all + (index === 0 ? leftPieJson[key] : 0);\n                    }, 0) + '%',\n                subtextStyle: {\n                    fontSize: 18,\n                    fontFamily: 'OPPOSans',\n                    fontWeight: 'bold',\n                    color: '#FFFFFF',\n                },\n                left: '38%',\n                top: '70%',\n                textAlign: 'center',\n            },\n            {\n                text: Object.keys(rightPieJson).reduce(function (all, key, index) {\n                        return all + (index === 0 ? key : '');\n                    }, ''),\n                textStyle: {\n                    fontSize: 16,\n                    fontFamily: 'Source Han Sans CN',\n                    fontWeight: 400,\n                    color: '#E1A538',\n                },\n                subtext:\n                    Object.keys(rightPieJson).reduce(function (all, key, index) {\n                        return all + (index === 0 ? rightPieJson[key] : 0);\n                    }, 0) + '%',\n                subtextStyle: {\n                    fontSize: 18,\n                    fontFamily: 'OPPOSans',\n                    fontWeight: 'bold',\n                    color: '#FFFFFF',\n                },\n                left: '87%',\n                top: '70%',\n                textAlign: 'center',\n            },\n        ],\n    };\n    myChart.hideLoading();\n    myChart.setOption(option);\n});\n","html":"","externalScripts":"","updaterUID":"obd-oDAF3IUP4KMibRWn4Cop_NE-GQhfP1u","theme":"","layout":"","viewCount":0,"userName":"凯***宏","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xczTzt3lkr.png?v=1637141386797","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"凯***宏"}}