{"status":0,"data":{"cid":"xOLCT8OWnf","authorUid":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","authorUserName":"d***懂","title":"LineBar","description":"折线柱状图","latestVersion":2,"alwaysLatest":1,"createTime":"2020-06-02T09:51:46.000Z","lastUpdateTime":"2020-06-02T09:51:46.000Z","auth":2,"uid":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-08T01:50:31.000Z","code":"// 设置echart的默认颜色列表\r\nlet colorList = [\r\n    [\"#4D7CFE\", \"#51C0F8\"],\r\n    [\"#FFC078\"]\r\n];\r\nlet lengthColor = [colorList[0][0], colorList[1][0]]\r\n// y轴单位\r\nlet yAxisOpt = [{\r\n        \"name\": \"个\"\r\n    },\r\n    {\r\n        \"name\": \"元\"\r\n    }\r\n]\r\n// series数据\r\nlet seriesData = [{\r\n        \"name\": \"商铺数量\",\r\n        \"type\": \"bar\",\r\n        \"data\": [120, 200, 150, 80, 70, 110, 130]\r\n    },\r\n    {\r\n        \"name\": \"均价\",\r\n        \"type\": \"line\",\r\n        \"data\": [56, 200, 23, 110, 150, 110, 130]\r\n    }\r\n]\r\n\r\nlet yAxis = [];\r\nlet series = [];\r\nlet legend = [];\r\nlet yLeftMax = Math.ceil(Math.max.apply(null, seriesData[0].data)); //左轴最大值\r\nlet yRightMax2 = Math.ceil(Math.max.apply(null, seriesData[1].data)); //左轴最大值\r\n//配置Y轴的选项\r\nyAxisOpt.forEach((opt, index) => {\r\n    let defaultyAxisOpt = {\r\n        \"type\": \"value\", //设置y轴为值\r\n        \"name\": \"\", //顶部名称 \r\n        \"min\": 0,\r\n        max: index == 0 ? yLeftMax : yRightMax2,\r\n        \"interval\": null,\r\n        \"nameTextStyle\": {\r\n            fontSize: 8,\r\n            \"color\": \"#999\",\r\n            \"padding\": [0, 0, 0, -38]\r\n        },\r\n        //坐标轴上的刻度\r\n        \"axisTick\": {\r\n            \"show\": false\r\n        },\r\n        //坐标轴线\r\n        \"axisLine\": {\r\n            \"show\": false\r\n        },\r\n        //坐标轴上的标签\r\n        \"axisLabel\": {\r\n            \"show\": true,\r\n            color: '#8998AC',\r\n            fontSize: 10,\r\n        },\r\n        \"splitLine\": {\r\n            show: false,\r\n            //刻度对齐线\r\n            \"lineStyle\": {\r\n                // fontSize: 8,\r\n                \"color\": [\"rgba(197,208,222,0.3)\"]\r\n            }\r\n        },\r\n        \"color\": \"#999999\"\r\n    }\r\n    yAxis.push({\r\n        ...defaultyAxisOpt,\r\n        ...opt,\r\n    })\r\n})\r\nyAxis[1].nameTextStyle.padding = [0, 0, 0, 38]\r\n\r\n// 默认折线图配置\r\nlet defaultLineSeriesOpt = {\r\n    \"name\": \"\",\r\n    \"type\": \"line\",\r\n    \"yAxisIndex\": 0,\r\n    \"data\": [], //[5, 10, 15, 20],\r\n    \"symbolSize\": 0,\r\n    \"itemStyle\": {\r\n        \"normal\": {\r\n            \"color\": colorList[1]\r\n        }\r\n    }\r\n}\r\nlet lengedInfoList = []\r\n// 默认柱状图配置\r\nlet defaultBarSeriesOpt = {\r\n    \"name\": \"\",\r\n    \"type\": \"bar\",\r\n    \"data\": [], //[500, 1000, 15000, 2000],\r\n    \"barMaxWidth\": 16,\r\n    \"itemStyle\": {\r\n        \"normal\": {\r\n            \"barBorderRadius\": [2, 2, 0, 0],\r\n            \"color\": function() {\r\n                let itemColor = colorList[0] ? colorList[0] : '';\r\n                if (itemColor.length > 1) {\r\n                    return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: itemColor[0]\r\n                    }, {\r\n                        offset: 1,\r\n                        color: itemColor[1]\r\n                    }])\r\n                } else {\r\n                    return itemColor[0];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nseriesData.forEach((charts, index) => {\r\n    let opt;\r\n    let unit = yAxisOpt[index]['name'];\r\n    legend.push(charts.name)\r\n    lengedInfoList.push({\r\n        name: charts.name,\r\n        unit\r\n    })\r\n    if (charts.type == \"line\") {\r\n        opt = {\r\n            ...defaultLineSeriesOpt,\r\n            ...charts,\r\n            unit,\r\n            yAxisIndex:1\r\n        }\r\n    } else {\r\n        opt = {\r\n            ...defaultBarSeriesOpt,\r\n            ...charts,\r\n            unit,\r\n            yAxisIndex:0\r\n        }\r\n    }\r\n    series.push(opt)\r\n});\r\n\r\n\r\noption = {\r\n    color: lengthColor,\r\n    \"tooltip\": {\r\n        \"trigger\": \"axis\",\r\n        //\"formatter\":tooltipFormatter,\r\n        formatter: function(tipLabel) {\r\n            let axisValue = ''\r\n            let contentHtml = ''\r\n\r\n            tipLabel.forEach(label => {\r\n                //label.value = label.value +'万元'\r\n                let seriy = lengedInfoList.find(sery => {\r\n                    return sery.name == label.seriesName\r\n                })\r\n                let unit = ''\r\n                if (seriy) {\r\n                    unit = seriy.unit ? `${seriy.unit}` : ''\r\n                }\r\n                axisValue = label.axisValue\r\n                contentHtml += (label.seriesName + ' : ' + label.value + unit + '<br>')\r\n            })\r\n            return `<span>${axisValue}<br>${contentHtml}</span>`;\r\n        },\r\n        \"textStyle\": {\r\n            \"fontSize\": 12,\r\n            \"color\": \"#fff\"\r\n        },\r\n    },\r\n    \"legend\": {\r\n        \"show\": true,\r\n        \"align\": \"left\",\r\n        \"bottom\": \"0%\",\r\n        \"itemWidth\": 12,\r\n        \"itemHeight\": 6,\r\n        \"textStyle\": {\r\n            \"fontSize\": 10,\r\n            \"color\": \"#666\"\r\n        },\r\n        \"data\": legend,\r\n        \"formatter\": function(name) {\r\n            let seriy = series.find(sery => {\r\n                return sery.name == name\r\n            })\r\n            let unit = ''\r\n            if (seriy) {\r\n                unit = seriy.unit.length > 2 ? `${seriy.unit}` : ''\r\n            }\r\n            return name + unit\r\n        }\r\n    },\r\n    \"grid\": {\r\n        \"top\": 30,\r\n        \"left\": \"8%\",\r\n        \"right\": \"8%\",\r\n        \"bottom\": \"10%\",\r\n        \"containLabel\": true\r\n    },\r\n    //x轴选项配置\r\n    \"xAxis\": [{\r\n        \"type\": \"category\", //设置X轴分类\r\n        //\r\n        \"axisTick\": {\r\n            \"show\": false\r\n        },\r\n\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#D1D1D1',\r\n                width: 1 //这里是为了突出显示加上的\r\n            }\r\n        },\r\n        \"axisLabel\": {\r\n            fontSize: 8,\r\n            \"color\": \"#999999\"\r\n        },\r\n        \"data\": ['商业', '教育', '医疗健康', '主题乐园', '体育运动', '文化艺术', '养老配套']\r\n    }],\r\n    yAxis,\r\n    series,\r\n\r\n};","html":"","externalScripts":"","updaterUID":"obd-otaAfgIp_bpJM4KWJkvID1rr6cybb8U","theme":"","layout":"","viewCount":139,"userName":"d***懂","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOLCT8OWnf.png?v=1591581031151","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"d***懂"}}