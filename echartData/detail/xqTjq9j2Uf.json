{"status":0,"data":{"cid":"xqTjq9j2Uf","authorUid":"obd-o2DuK-gFOtsz7v4eTi8S1_6oCN70WBa","authorUserName":"c***n","title":"关系图-模板","description":"关系图-模板","latestVersion":3,"alwaysLatest":1,"createTime":"2020-08-10T06:56:31.000Z","lastUpdateTime":"2020-08-10T06:56:31.000Z","auth":2,"uid":"obd-o2DuK-gFOtsz7v4eTi8S1_6oCN70WBa","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-15T01:36:03.000Z","code":"let moduleDependencies = {\r\n    admin: [],\r\n    apush: [],\r\n    article: ['xdevApi', 'lark2', 'atit', 'buc', 'zsearch'],\r\n    atit: ['xdevApi', 'tagRelation', 'userStatistics', 'lark2', 'buc', 'category', 'socialSystem', 'notification', 'apush', 'admin', 'theme', 'themeRelation', 'pointFlow', 'draft'],\r\n    bet: ['userStatistics', 'basement'],\r\n    booth: ['boothRelation', 'userBehavior'],\r\n    boothRelation: [],\r\n    buc: [],\r\n    cache_or_config: [], // cache、config是同一个模块功能\r\n    category: [],\r\n    college: ['cache_or_config', 'atit', 'xdevApi', 'themeRelation'],\r\n    comment: ['interaction', 'feedback', 'buc', 'notification', 'dingtalk', 'theme', 'basement', 'xdevApi', 'question', 'peerBonus', 'admin'],\r\n    converter: [],\r\n    dingtalk: ['cache_or_config', 'epaas', 'theme', 'dingtalkMsgLog'],\r\n    draft: ['xdevApi', 'converter', 'lark2'],\r\n    epaas: [],\r\n    feedback: ['buc', 'notification', 'theme', 'productCategory', 'pointFlow', 'userStatistics', 'xdevApi', 'product', 'dingtalk', 'basement', 'interaction', 'comment'],\r\n    gift: ['userStatistics', 'pointFlow', 'basement'],\r\n    interaction: [],\r\n    // kbase: ['buc'],\r\n    lark: [],\r\n    lark2: ['product', 'lark', 'feedback'],\r\n    linke: ['cache_or_config'],\r\n    notification: ['atit', 'qa', 'basement', 'pointFlow', 'themeRelation', 'theme', 'apush', 'buc'],\r\n    peerBonus: ['userBehavior', 'interaction', 'xdevApi', 'buc', 'epaas'],\r\n    pointFlow: ['userStatistics', 'buc'],\r\n    problemSources:['category'],\r\n    product:['theme'],\r\n    productCategory:['theme', 'product'],\r\n    // qa:['kbase', 'userStatistics', 'product', 'basement', 'notification'],\r\n    question:['category', 'tagRelation', 'userBehavior', 'admin', 'product', 'theme', 'interaction', 'comment', 'productCategory', 'cache_or_config', 'buc', 'zsearch'],\r\n    // roadmap:['theme'],\r\n    socialSystem: ['userStatistics'],\r\n    tagRelation:[],\r\n    task:[],\r\n    theme:['productCategory','tagRelation','themeModule', 'themeRelation','product','category','userBehavior','atit','xdevApi', 'themeStudyGuideSection','buc','admin'],\r\n    themeRelation:['buc', 'notification','pointFlow','userStatistics','theme', 'xdevApi','atit','dingtalk','qa'],\r\n    themeStudyGuideSection:['category'],\r\n    tool:['userTool'],\r\n    userBehavior:[],\r\n    userStatistics:['buc', 'gift', 'pointFlow', 'task', 'notification', 'themeRelation', 'feedback','bet','basement','atit','kbaseUgcStatistics','xdevApi','cache_or_config', 'socialSystem'],\r\n    userTool:['tool'],\r\n    // xbrickQuestionPersonalPush: [],\r\n    xdevApi:['converter'],\r\n    zsearch:['queryPlanStrategy','comment']\r\n}\r\n\r\n\r\nlet data = {\r\n    nodes: [],\r\n    links: []\r\n}\r\n\r\nconst defaultSymbolSize = 50;\r\n\r\nconst color1 = '#006acc';\r\nconst color2 = '#ff7d18';\r\nconst color3 = '#10a050';\r\n\r\nfor (var [key, modules] of Object.entries(moduleDependencies)) {\r\n    data.nodes.push({\r\n        name: key,\r\n        symbolSize: defaultSymbolSize,\r\n        category: 0\r\n    });\r\n}\r\n\r\nfor (var [key, modules] of Object.entries(moduleDependencies)) {\r\n    if (modules.length > 0) {\r\n        modules.forEach(module => {\r\n            data.links.push({\r\n                source: key,\r\n                target: module,\r\n                name: 'depend'\r\n            });\r\n            data.nodes.forEach(node => {\r\n                if (node.name === module) {\r\n                    node.symbolSize += 8;\r\n                }\r\n            })\r\n        });\r\n    }\r\n}\r\n\r\ndata.nodes.forEach(node => {\r\n    if (node.category === 0) {\r\n        node.itemStyle = {\r\n            color: color1\r\n        };\r\n    }\r\n    if (node.symbolSize === 0) {\r\n        node.symbolSize = defaultSymbolSize\r\n    }\r\n});\r\n\r\ndata.links.forEach(link => {\r\n    link.label = {\r\n        align: 'center',\r\n        fontSize: 12\r\n    };\r\n\r\n    if (link.name === 'depend') {\r\n        link.lineStyle = {\r\n            color: color1\r\n        }\r\n    }\r\n});\r\n\r\nlet categories = [{\r\n    name: '模块',\r\n    itemStyle: {\r\n        color: color1\r\n    }\r\n}]\r\n\r\noption = {\r\n    title: {\r\n        text: '知识图谱',\r\n    },\r\n    legend: [{\r\n        // selectedMode: 'single',\r\n        data: categories.map(x => x.name),\r\n        // icon: 'circle'\r\n    }],\r\n    series: [{\r\n        type: 'graph',\r\n        layout: 'force',\r\n        symbolSize: defaultSymbolSize,\r\n        draggable: true,\r\n        roam: true,\r\n        focusNodeAdjacency: true,\r\n        categories: categories,\r\n        edgeSymbol: ['', 'arrow'],\r\n        // edgeSymbolSize: [80, 10],\r\n        edgeLabel: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    fontSize: 20\r\n                },\r\n                formatter(x) {\r\n                    return x.data.name;\r\n                }\r\n            }\r\n        },\r\n        label: {\r\n            show: true\r\n        },\r\n        force: {\r\n            repulsion: 2000,\r\n            edgeLength: 120\r\n        },\r\n        data: data.nodes,\r\n        links: data.links\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o2DuK-gFOtsz7v4eTi8S1_6oCN70WBa","theme":"","layout":"","viewCount":3060,"userName":"c***n","commentCount":0,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqTjq9j2Uf.png?v=1597455363308","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","title"],"customTags":[],"updaterUserName":"c***n"}}