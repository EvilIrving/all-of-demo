{"status":0,"data":{"cid":"x7ymcLI4HW","authorUid":"obd-oMuVydhiODz9BKaEZQuuoCN7tfXO42L","authorUserName":"s***m","title":"自定义图例文本","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-12-14T10:52:24.000Z","lastUpdateTime":"2020-12-14T10:52:24.000Z","auth":2,"uid":"obd-oMuVydhiODz9BKaEZQuuoCN7tfXO42L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-14T10:52:24.000Z","code":"\tvar data = [{\r\n\t        value: 335,\r\n\t        name: '直接访问'\r\n\t    },\r\n\t    {\r\n\t        value: 310,\r\n\t        name: '邮件营销'\r\n\t    },\r\n\t    {\r\n\t        value: 234,\r\n\t        name: '联盟广告'\r\n\t    },\r\n\t    {\r\n\t        value: 135,\r\n\t        name: '视频广告'\r\n\t    },\r\n\t    {\r\n\t        value: 11548,\r\n\t        name: '搜索引擎'\r\n\t    }\r\n\t]\r\n\tvar x = [];\r\n\tvar total = 0;\r\n\tfor (var i = 0; i < data.length; i++) {\r\n\t    var j = {};\r\n\t    j['name'] = data[i].name;\r\n\t    j['value'] = 10\r\n\t    x.push(j);\r\n\t    total += data[i].value;\r\n\t}\r\n\r\n\r\n\tvar len = 0;\r\n\tvar total = 0;\r\n\tfor (var i = 0; i < data.length; i++) {\r\n\t    total += data[i].value;\r\n\t}\r\n\tfor (var i = 0; i < data.length; i++) {\r\n\t    var str = data[i].name + ' ' + (data[i].value / total * 100).toFixed(2) + '%';\r\n\r\n\t    if (str.length > len) {\r\n\t        len = str.length;\r\n\t    }\r\n\t}\r\n\r\n\toption = {\r\n\r\n\t    legend: {\r\n\t        orient: 'vertical',\r\n\t        left: '60%',\r\n\t        top: 'middle',\r\n\t        icon: \"circle\",\r\n\t        selectedMode: false,\r\n\t        itemHeight: 20,\r\n\t        itemGap: 18.5,\r\n\t        textStyle: {\r\n\t            color: '#000',\r\n\t            fontSize: 22,\r\n\t        },\r\n\t        formatter: function(name) {\r\n\t            var total = 0;\r\n\t            var target;\r\n\t            var kg = '               ';\r\n\t            for (var i = 0, l = data.length; i < l; i++) {\r\n\t                total += data[i].value;\r\n\t                if (data[i].name == name) {\r\n\t                    target = data[i].value;\r\n\t                }\r\n\t            }\r\n\t            var arr = name + ' ' + ((target / total) * 100).toFixed(2) + '%';\r\n\t            if (arr.length < len) {\r\n\t                arr = arr + kg.slice(0, (len - arr.length) * 2) + ' ';\r\n\t            }\r\n\t            if (target > 10000) {\r\n\t                target = (target / 10000).toFixed(2) + '万'\r\n\t            }\r\n\t            return arr + ' | ' + target + '笔';\r\n\t        }\r\n\t    },\r\n\t    series: [{\r\n\t            name: '',\r\n\t            type: 'pie',\r\n\t            radius: ['35%', '50%'],\r\n\t            center: ['30%', '50%'],\r\n\t            avoidLabelOverlap: false,\r\n\t            label: {\r\n\t                show: false,\r\n\t                position: 'center'\r\n\t            },\r\n\t            emphasis: {\r\n\t                label: {\r\n\t                    show: true,\r\n\t                    fontSize: '30',\r\n\t                    fontWeight: 'bold'\r\n\t                }\r\n\t            },\r\n\t            labelLine: {\r\n\t                show: false\r\n\t            },\r\n\t            itemStyle: {\r\n\t                color: function(params) {\r\n\t                    var colorSet = ['#29C4D6', '#1678BF', '#527D2D', '#8AA159'];\r\n\t                    return colorSet[params.dataIndex];\r\n\t                }\r\n\t            },\r\n\t            data: data,\r\n\t            animation: false\r\n\t        }, {\r\n\t            name: '',\r\n\t            type: 'pie',\r\n\t            radius: ['35%', '50%'],\r\n\t            center: ['30%', '50%'],\r\n\t            avoidLabelOverlap: false,\r\n\t            label: {\r\n\t                show: false,\r\n\t                position: 'center',\r\n\t                formatter: function(params) {\r\n\t                    var per = (data[params.dataIndex].value / total * 100).toFixed(2);\r\n\t                    return [\r\n\t                        '{a|' + per + '%}',\r\n\t                        '{b|' + data[params.dataIndex].name + '}'\r\n\t                    ].join('\\n');\r\n\t                },\r\n\t                textStyle: {\r\n\t                    rich: {\r\n\t                        a: {\r\n\t                            color: '#000',\r\n\t                            fontSize: 48,\r\n\t                        },\r\n\t                        b: {\r\n\t                            color: '#29C4D6',\r\n\t                            fontSize: 22,\r\n\t                            padding: [0, 0, 15, 0]\r\n\t                        },\r\n\t                    }\r\n\t                }\r\n\t            },\r\n\t            itemStyle: {\r\n\t                borderColor: '#CCC',\r\n\t                borderWidth: 10,\r\n\t                color: function(params) {\r\n\t                    var colorSet = ['#29C4D6', '#1678BF', '#527D2D', '#8AA159'];\r\n\t                    return colorSet[params.dataIndex];\r\n\t                }\r\n\t            },\r\n\t            emphasis: {\r\n\t                label: {\r\n\t                    show: true,\r\n\t                    fontSize: '30',\r\n\t                    fontWeight: 'bold'\r\n\t                }\r\n\t            },\r\n\t            labelLine: {\r\n\t                show: false\r\n\t            },\r\n\t            data: x,\r\n\t            animation: true\r\n\t        }\r\n\r\n\t    ]\r\n\t};\r\n\tvar charPie3currentIndex = 0;\r\n\tsetInterval(function() {\r\n\t    var dataLen = option.series[0].data.length;\r\n\t    // 取消之前高亮的图形\r\n\t    myChart.dispatchAction({\r\n\t        type: 'downplay',\r\n\t        seriesIndex: 1,\r\n\t        dataIndex: charPie3currentIndex\r\n\t    });\r\n\r\n\t    charPie3currentIndex = (charPie3currentIndex + 1) % dataLen;\r\n\r\n\r\n\t    // 高亮当前图形\r\n\t    myChart.dispatchAction({\r\n\t        type: 'highlight',\r\n\t        seriesIndex: 1,\r\n\t        dataIndex: charPie3currentIndex\r\n\t    });\r\n\t}, 2000);","html":"","externalScripts":"","updaterUID":"obd-oMuVydhiODz9BKaEZQuuoCN7tfXO42L","theme":"","layout":"","viewCount":81,"userName":"s***m","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x7ymcLI4HW.png?v=1607943144256","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie"],"customTags":[],"updaterUserName":"s***m"}}