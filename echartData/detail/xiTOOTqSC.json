{"status":0,"data":{"cid":"xiTOOTqSC","authorUid":"bd-1981023706","authorUserName":"シ***画","title":"使用线性轴模仿对数轴展示数据的demo","description":"使用线性轴模仿对数轴展示数据的demo，规避对数轴无法展示为0数据的问题，支持非负数","latestVersion":2,"alwaysLatest":1,"createTime":"2019-11-13T07:31:57.000Z","lastUpdateTime":"2019-11-13T07:31:57.000Z","auth":2,"uid":"bd-1981023706","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-03T10:10:10.000Z","code":"let chartData = [0.003, 2000, 80000, 4, 19, 33, 0];\r\n\r\nlet logBase = 10;\r\n\r\nlet max = Math.max(...chartData);\r\n\r\nlet min = Math.min(...chartData.filter(e => e > 0));\r\n\r\nlet dMax = 0;\r\n\r\nlet dMin = 0;\r\n\r\nwhile (Math.pow(logBase, dMax) <= max) {\r\n    dMax++;\r\n}\r\n\r\nwhile (Math.pow(logBase, dMin) >= min && dMin > -10) {\r\n    dMin--;\r\n}\r\n\r\nlet interval = logBase / Math.abs(dMax);\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: \"axis\",\r\n        formatter: function(params) {\r\n            let result = params[0].name + \"</br>\";\r\n            params.forEach(function(item) {\r\n                result += item.marker + \" \" + item.seriesName + \" : \" + chartData[item.dataIndex] + \"</br>\";\r\n            });\r\n            return result;\r\n        }\r\n    },\r\n    xAxis: {\r\n        type: \"category\",\r\n        data: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"]\r\n    },\r\n    yAxis: [{\r\n        type: \"value\",\r\n        max: logBase + interval * Math.abs(dMin),\r\n        interval: interval,\r\n        min: 0,\r\n        axisLabel: {\r\n            formatter: (e) => {\r\n                if (e === 0) return 0;\r\n                return Math.pow(logBase, (e - interval * Math.abs(dMin)) / interval);\r\n            }\r\n        },\r\n    }],\r\n    series: [{\r\n            data: chartData.map(e => {\r\n                if (e !== 0) {\r\n                    return Math.log(e) / Math.log(logBase) * interval + interval * Math.abs(dMin);\r\n                } else {\r\n                    return 0;\r\n                }\r\n            }),\r\n            type: \"line\",\r\n            name: \"line\"\r\n        },\r\n        {\r\n            data: chartData.map(e => {\r\n                if (e !== 0) {\r\n                    return Math.log(e) / Math.log(logBase) * interval + interval * Math.abs(dMin);\r\n                } else {\r\n                    return 0;\r\n                }\r\n            }),\r\n            type: \"bar\",\r\n            name: \"bar\"\r\n        }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1981023706","theme":"dark","layout":"","viewCount":209,"userName":"シ***画","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xiTOOTqSC.png?v=1622715010279","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"シ***画"}}