{"status":0,"data":{"cid":"xktSMh0ZzK","authorUid":"bd-2291206321","authorUserName":"1***去","title":"嵌套组合图","description":"方便echarts友使用","latestVersion":28,"alwaysLatest":1,"createTime":"2019-07-27T09:36:45.000Z","lastUpdateTime":"2019-07-27T09:36:45.000Z","auth":1,"uid":"bd-2291206321","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":28,"parentVersion":27,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-13T06:52:52.000Z","code":"  \t/// 整体混合图借鉴 他的地址为  https://gallery.echartsjs.com/editor.html?c=xrySKpOnjM\r\n   ///   嵌套图借鉴 他的地址为  https://gallery.echartsjs.com/editor.html?c=xAi9VBmJLg\r\n\t\r\n\tvar overviewChartID = 'overview-chart';\r\n\t\tvar overviewTitle = ''; //标题\r\n\t\tvar overviewSubTitle = echarts.format.formatTime('yyyy年MM月dd', new Date());\r\n\r\n\t\t//图表定位\r\n\t\tvar chartGridTop = 40;\r\n\t\tvar chartGridHeight = 100;\r\n\r\n\t\t//时间轴\r\n\t\t//SELECT WMSYS.WM_CONCAT('\"'||TO_CHAR(TRUNC(SYSDATE, 'MM') + ROWNUM - 1, 'YYYY-MM-DD')||'\"') DBTIME FROM DUAL CONNECT BY ROWNUM <= 30;\r\n\t\tvar overviewDate = [\"00:00\", \"00:05\", \"00:10\", \"00:15\", \"00:20\", \"00:25\", \"00:30\"];\r\n\r\n\t\t//表格数据\r\n\t\t//SELECT WMSYS.WM_CONCAT(TRUNC(DBMS_RANDOM.VALUE(5, 60), 2)) DBTIME FROM DUAL CONNECT BY ROWNUM <= 30;\r\n\t\tvar orddbhost1 = [19.55, 20.43, 57.46, 48.87, 26.33, 57.38, 42.1];\r\n\t\tvar orddbhost2 = [23.31, 24.15, 26.17, 21.53, 20.46, 66.43, 21.11];\r\n\t\tvar dbrl = [31, 15, 17, 53, 46, 26, 11];\r\n\r\n\t\tvar orddbtime1 = [36.59, 35.56, 32.84, 26.37, 35.94, 26.25, 24.11];\r\n\t\tvar orddbtime2 = [22.18, 24.76, 20.37, 28.09, 22.25, 26.75, 20.14, ];\r\n\r\n\t\tvar orddbproc1 = [599, 302, 753, 695, 673, 558, 779, ];\r\n\t\tvar ycrl1 = [59, 32, 73, 69, 63, 58, 79, ];\r\n\r\n\t\t//直角坐标系内绘图网格\r\n\t\tfunction makeGrid(top, height, opt) {\r\n\t\t\treturn echarts.util.merge({\r\n\t\t\t\tleft: 70,\r\n\t\t\t\tright: 60,\r\n\t\t\t\ttop: top,\r\n\t\t\t\theight: height\r\n\t\t\t}, opt || {}, true);\r\n\t\t}\r\n\r\n\t\t//X轴生成器\r\n\t\tfunction makeXAxis(gridIndex, opt) {\r\n\t\t\t//避免X轴数据显示过于频繁\r\n\t\t\taxisLabelFlag = false;\r\n\t\t\t//  if (gridIndex % 2 == 0) {\r\n\t\t\t//      axisLabelFlag = true;\r\n\t\t\t//  }\r\n\t\t\tif(gridIndex == 3) {\r\n\t\t\t\taxisLabelFlag = true;\r\n\t\t\t}\r\n\r\n\t\t\treturn echarts.util.merge({\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tgridIndex: gridIndex,\r\n\t\t\t\t//统一时间轴数据\r\n\t\t\t\tdata: overviewDate,\r\n\t\t\t\taxisLabel: {\r\n\t\t\t\t\tshow: axisLabelFlag,\r\n\t\t\t\t\t/*          formatter: function(value) {\r\n\t\t\t\t\t              return echarts.format.formatTime('MM-dd', value);\r\n\t\t\t\t\t          }*/\r\n\t\t\t\t},\r\n\t\t\t}, opt || {}, true);\r\n\t\t}\r\n\r\n\t\t//Y轴生成器\r\n\t\tfunction makeYAxis(gridIndex, opt) {\r\n\t\t\treturn echarts.util.merge({\r\n\t\t\t\ttype: 'value',\r\n\t\t\t\tnameLocation: 'middle',\r\n\t\t\t\tnameGap: '40',\r\n\t\t\t\tgridIndex: gridIndex,\r\n\t\t\t\tnameTextStyle: {\r\n\t\t\t\t\tcolor: '#333'\r\n\t\t\t\t},\r\n\t\t\t\taxisTick: {\r\n\t\t\t\t\tshow: false\r\n\t\t\t\t},\r\n\t\t\t\taxisLabel: {\r\n\t\t\t\t\tshow: true\r\n\t\t\t\t},\r\n\t\t\t}, opt || {}, true);\r\n\t\t}\r\n\r\n\t\t//数据生成器\r\n\t\tfunction makeGridData(xAxisIndex, yAxisIndex, chartType, chartName, chartData, opt) {\r\n\t\t\treturn echarts.util.merge({\r\n\t\t\t\ttype: chartType,\r\n\t\t\t\tname: chartName,\r\n\t\t\t\txAxisIndex: xAxisIndex,\r\n\t\t\t\tyAxisIndex: yAxisIndex,\r\n\t\t\t\tdata: chartData,\r\n\t\t\t}, opt || {}, true);\r\n\t\t}\r\n\r\n// \t\tvar myChartOne = echarts.init(document.getElementById('NestingChart'));\r\n\t\tvar option = {\r\n\t\t\tanimation: false,\r\n\t\t\t//标题组件，包含主标题和副标题\r\n\t\t\ttitle: {\r\n\t\t\t\tx: 'center',\r\n\t\t\t\ttext: overviewTitle,\r\n\t\t\t\t//      subtext: overviewSubTitle,\r\n\t\t\t\t//      padding: 0,\r\n\t\t\t},\r\n\t\t\ttooltip: {\r\n\t\t\t\t//移动端展示方式\r\n\t\t\t\ttrigger: 'axis',\r\n\t\t\t\ttransitionDuration: 0,\r\n\t\t\t\tconfine: true,\r\n\t\t\t\tborderRadius: 4,\r\n\t\t\t\tborderWidth: 1,\r\n\t\t\t\tborderColor: '#333',\r\n\t\t\t\tbackgroundColor: 'rgba(255,255,255,0.9)',\r\n\t\t\t\ttextStyle: {\r\n\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\tcolor: '#333'\r\n\t\t\t\t\t \r\n\t\t\t\t},\r\n\t\t\t\t  formatter:function(params){  //数据单位格式化  \r\n                               var relVal = params[0].name;  //x轴名称  \r\n                               relVal +=\"<div style='width:120px'>\"\r\n                               for (var i = 0, l = params.length; i < l; i++) {    \r\n                                if(params[i].value){\r\n\r\n                                   relVal +=  \"<span  style='display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:\"+params[i].color+\";'>\" +'<span  style=\"display:block;padding-left:15px;margin-top:-4px\">'+ params[i].seriesName + ' : ' + params[i].value+'</span>'+ \"</span>\"+'<br>';    \r\n                                }\r\n                               }  \r\n                                   relVal +=\"</div>\"\r\n                               return relVal;    \r\n                            }\r\n\t\t\t},\r\n\r\n\t\t\t//坐标轴指示器（axisPointer）的全局公用设置\r\n\t\t\taxisPointer: {\r\n\t\t\t\ttype: 'shadow',\r\n\t\t\t\tlink: {\r\n\t\t\t\t\txAxisIndex: 'all'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//直角坐标系内绘图网格\r\n\t\t\tgrid: [\r\n\t\t\t\tmakeGrid(chartGridTop, chartGridHeight),\r\n\t\t\t\tmakeGrid(chartGridTop + (chartGridHeight + 25), chartGridHeight),\r\n\t\t\t\tmakeGrid(chartGridTop + (chartGridHeight + 25) * 2, chartGridHeight),\r\n\t\t\t\tmakeGrid(chartGridTop + (chartGridHeight + 25) * 3, chartGridHeight),\r\n\r\n\t\t\t],\r\n\t\t\txAxis: [\r\n\t\t\t\tmakeXAxis(0),\r\n\t\t\t\tmakeXAxis(1),\r\n\t\t\t\tmakeXAxis(2),\r\n\t\t\t\tmakeXAxis(3),\r\n\r\n\t\t\t],\r\n\t\t\tyAxis: [\r\n\t\t\t\tmakeYAxis(0, {\r\n\t\t\t\t\tname: '预测实际热量',\r\n\t\t\t\t\t splitNumber: 3, //调整间隔\r\n                    //  splitLine: {show: false},//去除网格线\r\n\t\t\t\t}),\r\n\r\n\t\t\t\tmakeYAxis(1, {\r\n\t\t\t\t\tname: '天气数据',\r\n                     splitNumber: 3,\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(2, {\r\n\t\t\t\t\tname: '预测实际能耗',\r\n\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(3, {\r\n\t\t\t\t\tname: '预测实际消耗',\r\n\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(0, {\r\n\t\t\t\t\tname: '热量对比',\r\n                 splitLine:  false,//去除网格线\r\n               \r\n\t\t\t\t})\r\n\r\n\t\t\t],\r\n\t\t\t//dataZoom 组件 用于区域缩放\r\n\t\t\tdataZoom: [{\r\n\t\t\t\ttype: 'slider',\r\n\t\t\t\txAxisIndex: [0, 1, 2, 3],\r\n\t\t\t\trealtime: true,\r\n\t\t\t\t//移动端展示方式\r\n\t\t\t\thandleSize: '140%',\r\n\t\t\t}],\r\n\t\t\t//每个系列通过 type 决定自己的图表类型\r\n\t\t\tseries: [\r\n\t\t\t\tmakeGridData(0, 0, 'bar', '预测热量', orddbhost1, {\r\n\t\t\t\t\tbarGap: '-175%',\r\n\t\t\t\t\tbarWidth: 10,\r\n\t\t\t\t\tz: 10,\r\n\t\t\t\t\t itemStyle:{\r\n                \tnormal:{\r\n                \t\tcolor:'#43CD80'\r\n                \t}\r\n                },\r\n\t\t\t\t\t\r\n\t\t\t\t}),\r\n\t\t\t\tmakeGridData(0, 0, 'bar', '实际热量', orddbhost2, {\r\n\t\t\t\t\tbarWidth: 25,\r\n\t\t\t\t\tstack: 'total',\r\n\t\t\t\t\t    itemStyle:{\r\n                \tnormal:{\r\n                \t\tcolor:'#778899'\r\n                \t} \r\n                },\r\n\t\t\t\t}),\r\n\t\t\t\tmakeGridData(0, 4, 'line', '热量对比', dbrl,{smooth: true,\tcolor:'#FF6A6A'}),\r\n\r\n\t\t\t\tmakeGridData(1, 1, 'line', '预测气温', orddbtime1, {\r\n\t\t\t\t\tstack: 'DBTIME',smooth: true,\tcolor:'#FFC125'\r\n\t\t\t\t}),\r\n\t\t\t\tmakeGridData(1, 1, 'line', '实际气温', orddbtime2, {\r\n\t\t\t\t\tstack: 'DBTIME',smooth: true,color:'#63B8FF'\r\n\t\t\t\t}),\r\n\r\n\t\t\t\tmakeGridData(2, 2, 'line', '预测实际能耗', orddbproc1, {smooth: true,color:'#BA55D3' }),\r\n\t\t\t\tmakeGridData(3, 3, 'line', '预测热耗', ycrl1, {smooth: true,color:'#836FFF'}),\r\n\t\t\t]\r\n\r\n\t\t};","html":"","externalScripts":"","updaterUID":"bd-1895942003","theme":"","layout":"","viewCount":2994,"userName":"1***去","commentCount":2,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xktSMh0ZzK.png?v=1573627972603","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","series-line","title","tooltip"],"customTags":[],"updaterUserName":"s***r"}}