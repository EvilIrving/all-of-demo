{"status":0,"data":{"cid":"xqM0qkgY75","authorUid":"bd-177248094","authorUserName":"150******33","title":"地图过滤地区","description":"地图过滤地区","latestVersion":2,"alwaysLatest":1,"createTime":"2020-07-09T09:08:35.000Z","lastUpdateTime":"2020-07-09T09:08:35.000Z","auth":2,"uid":"bd-177248094","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-09T09:14:22.000Z","code":"var getGunagdong = \"/asset/get/s/data-1594284662649-U9sGdO2Bp.json\";\n\nvar getChinaJson = \"./asset/get/s/data-1594284556862-IpnXS2CV7.json\";\n\nlet chinaJson = null\nlet gunagdong = null\n$.getJSON(getChinaJson, function(geoJson) {\n    chinaJson = geoJson\n    $.getJSON(getGunagdong, function(fonJson) {\n        gunagdong = fonJson\n        // 定义跳出来的地区\n        const mapList = [{\n            name: '广东省',\n            data: gunagdong,\n            alone: ['深圳', '东莞', '佛山']\n        }]\n        const mapJson = JSON.parse(JSON.stringify(chinaJson))\n        mapJson.features.forEach(e => {\n            mapList.forEach(li => {\n                if (e.properties.name == li.name) {\n                    e.geometry.coordinates = []\n                    li.data.features.forEach(e1 => {\n                        if (!li.alone.includes(e1.properties.name)) {\n                            e.geometry.coordinates = e.geometry.coordinates.concat(e1.geometry.coordinates)\n                        } else {\n                            mapJson.features.push(e1)\n                        }\n                    })\n                }\n            })\n        })\n        console.log(gunagdong, 99)\n        // 写地图\n        echarts.registerMap('china', mapJson);\n\n        option = {\n            tooltip: {\n                triggerOn: \"mousemove\",\n                // formatter: '{b0}：{c0}%完成率'\n                formatter: function(data) {\n                    //console.log(data);\n                    if (isNaN(data.value)) {\n                        data.value = 0\n                    }\n                    return data.name + \"：\" + data.value;\n                }\n                // function(e, t, n) {\n                //     return .5 == e.value ? e.name + \"：有疑似病例\" : e.seriesName + \"<br />\" + e.name + \"：\" + e.value\n                // }\n            },\n            roam: true,\n            visualMap: {\n                min: 0,\n                max: 100,\n                left: 'auto',\n                right: 0,\n                bottom: 40,\n                showLabel: !0,\n                text: [\"完成率\"],\n                pieces: [{\n                    gt: 90,\n                    label: \"90%以上\",\n                    color: \"#5473E9\"\n                }, {\n                    gte: 60,\n                    lte: 89,\n                    label: \"60-90%\",\n                    color: \"#80A5E8\"\n                }, {\n                    gte: 30,\n                    lt: 59,\n                    label: \"30-60%\",\n                    color: \"#AEC7F5\"\n                }, {\n                    gt: 0,\n                    lt: 29,\n                    label: \"30%以下\",\n                    color: \"#D5E2FA\"\n                }],\n                show: !0\n            },\n            geo: {\n                map: \"china\",\n                //滚轮缩放的极限控制\n                scaleLimit: {\n                    min: 1,\n                    max: 5\n                },\n                zoom: 1,\n                left: 0,\n                label: {\n                    normal: {\n                        show: true,\n                        fontSize: \"14\",\n                        color: \"rgba(0,0,0,0.7)\"\n                    },\n                },\n                itemStyle: {\n                    normal: {\n                        areaColor: '#f00',\n                        //shadowBlur: 50,\n                        //shadowColor: 'rgba(0, 0, 0, 0.2)',\n                        borderColor: \"rgba(0, 0, 0, 0.2)\"\n                    },\n                    emphasis: {\n                        areaColor: \"#f0f\",\n                        shadowOffsetX: 0,\n                        shadowOffsetY: 0,\n                        borderWidth: 0\n                    }\n                }\n            },\n            series: [{\n                name: \"机构完成率\",\n                type: \"map\",\n                geoIndex: 0,\n                data: this.dataJson\n            }]\n        }\n        myChart.setOption(option);\n    })\n})","html":"","externalScripts":"","updaterUID":"bd-177248094","theme":"","layout":"","viewCount":139,"userName":"150******33","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqM0qkgY75.png?v=1594286062153","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","tooltip","visualMap"],"customTags":[],"updaterUserName":"150******33"}}