{"status":0,"data":{"cid":"xB1OhKsunW","authorUid":"bd-3190370387","authorUserName":"12_杜蛋吻始","title":"1w+关注者居住地分布","description":"爬取张佳玮138w+知乎关注者：数据可视化","latestVersion":1,"alwaysLatest":1,"createTime":"2017-10-09T07:48:00.000Z","lastUpdateTime":"2017-10-09T07:48:00.000Z","auth":2,"uid":"bd-3190370387","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.7.2","versionCreateTime":"2017-10-09T07:48:00.000Z","code":"var geoCoordMap = {\r\n    \"北京\": [116.46, 39.92],\r\n    \"上海\": [121.48, 31.22],\r\n    \"杭州\": [120.19, 30.26],\r\n    \"深圳\": [114.07, 22.62],\r\n    \"广州\": [113.23, 23.16],\r\n    \"成都\": [104.06, 30.67],\r\n    \"南京\": [118.78, 32.04],\r\n    \"重庆\": [106.54, 29.59],\r\n    \"武汉\": [114.31, 30.52],\r\n    \"厦门\": [118.1, 24.46],\r\n    \"西安\": [108.95, 34.27],\r\n    \"天津\": [117.2, 39.13],\r\n    \"苏州\": [120.62, 31.32],\r\n    \"长沙\": [113, 28.21],\r\n    \"沈阳\": [123.38, 41.8],\r\n    \"济南\": [117, 36.65],\r\n    \"合肥\": [117.27, 31.86],\r\n    \"哈尔滨\": [126.63, 45.75],\r\n    \"大连\": [121.62, 38.92],\r\n    \"无锡\": [120.29, 31.59],\r\n    \"珠海\": [113.52, 22.3],\r\n    \"石家庄\": [114.48, 38.03],\r\n    \"福州\": [119.3, 26.08],\r\n    \"东莞\": [113.75, 23.04],\r\n    \"乌鲁木齐\": [87.68, 43.77],\r\n    \"台州\": [121.420757, 28.656386],\r\n    \"嘉兴\": [120.76, 30.77],\r\n    \"太原\": [112.53, 37.87],\r\n    \"宁波\": [121.56, 29.86],\r\n    \"常州\": [119.95, 31.79],\r\n    \"徐州\": [117.2, 34.26],\r\n    \"昆明\": [102.73, 25.04],\r\n    \"洛阳\": [112.44, 34.7],\r\n    \"郑州\": [113.65, 34.76],\r\n    \"青岛\": [120.33, 36.07],\r\n    \"鄂尔多斯\": [109.781327, 39.608266],\r\n    \"兰州\": [103.73, 36.03],\r\n    \"贵阳\": [106.71, 26.57],\r\n    \"海口\": [110.35, 20.02],\r\n    \"惠州\": [114.4, 23.09],\r\n    \"吉林\": [126.57, 43.87],\r\n    \"克拉玛依\": [84.77, 45.59],\r\n    \"聊城\": [115.97, 36.45],\r\n    \"泉州\": [118.58, 24.93],\r\n    \"潍坊\": [119.1, 36.62],\r\n    \"烟台\": [121.39, 37.52],\r\n    \"长春\": [125.35, 43.88],\r\n    \"大理\": [100.27, 25.61],\r\n    \"石河子\": [86.09, 44.31],\r\n    \"衡阳\": [112.58, 26.90],\r\n    \"呼伦贝尔\": [119.77, 49.22],\r\n    \"娄底\": [112.00, 27.70],\r\n    \"辽源\": [125.14, 42.89],\r\n    \"冀州\": [115.60, 37.56],\r\n    \"铁岭\": [123.84, 42.29],\r\n    \"香港\": [114.11, 22.39]\r\n};\r\n\r\nvar data = [{\r\n    name: '北京',\r\n    value: 360\r\n}, {\r\n    name: '上海',\r\n    value: 183\r\n}, {\r\n    name: '杭州',\r\n    value: 52\r\n}, {\r\n    name: '深圳',\r\n    value: 55\r\n}, {\r\n    name: '广州',\r\n    value: 47\r\n}, {\r\n    name: '成都',\r\n    value: 26\r\n}, {\r\n    name: '南京',\r\n    value: 20\r\n}, {\r\n    name: '重庆',\r\n    value: 6\r\n}, {\r\n    name: '武汉',\r\n    value: 6\r\n}, {\r\n    name: '厦门',\r\n    value: 15\r\n}, {\r\n    name: '西安',\r\n    value: 8\r\n}, {\r\n    name: '天津',\r\n    value: 7\r\n}, {\r\n    name: '苏州',\r\n    value: 8\r\n}, {\r\n    name: '长沙',\r\n    value: 7\r\n}, {\r\n    name: '沈阳',\r\n    value: 6\r\n}, {\r\n    name: '济南',\r\n    value: 6\r\n}, {\r\n    name: '合肥',\r\n    value: 4\r\n}, {\r\n    name: '哈尔滨',\r\n    value: 4\r\n}, {\r\n    name: '大连',\r\n    value: 4\r\n}, {\r\n    name: '无锡',\r\n    value: 4\r\n}, {\r\n    name: '珠海',\r\n    value: 4\r\n}, {\r\n    name: '石家庄',\r\n    value: 3\r\n}, {\r\n    name: '福州',\r\n    value: 3\r\n}, {\r\n    name: '东莞',\r\n    value: 2\r\n}, {\r\n    name: '乌鲁木齐',\r\n    value: 2\r\n}, {\r\n    name: '台州',\r\n    value: 2\r\n}, {\r\n    name: '嘉兴',\r\n    value: 2\r\n}, {\r\n    name: '太原',\r\n    value: 2\r\n}, {\r\n    name: '宁波',\r\n    value: 2\r\n}, {\r\n    name: '常州',\r\n    value: 2\r\n}, {\r\n    name: '徐州',\r\n    value: 2\r\n}, {\r\n    name: '昆明',\r\n    value: 2\r\n}, {\r\n    name: '洛阳',\r\n    value: 2\r\n}, {\r\n    name: '郑州',\r\n    value: 2\r\n}, {\r\n    name: '青岛',\r\n    value: 2\r\n}, {\r\n    name: '鄂尔多斯',\r\n    value: 1\r\n}, {\r\n    name: '兰州',\r\n    value: 1\r\n}, {\r\n    name: '贵阳',\r\n    value: 1\r\n}, {\r\n    name: '海口',\r\n    value: 1\r\n}, {\r\n    name: '惠州',\r\n    value: 1\r\n}, {\r\n    name: '吉林',\r\n    value: 1\r\n}, {\r\n    name: '克拉玛依',\r\n    value: 1\r\n}, {\r\n    name: '聊城',\r\n    value: 1\r\n}, {\r\n    name: '泉州',\r\n    value: 1\r\n}, {\r\n    name: '潍坊',\r\n    value: 1\r\n}, {\r\n    name: '烟台',\r\n    value: 1\r\n}, {\r\n    name: '长春',\r\n    value: 1\r\n}, {\r\n    name: '大理',\r\n    value: 2\r\n}, {\r\n    name: '石河子',\r\n    value: 1\r\n}, {\r\n    name: '衡阳',\r\n    value: 1\r\n}, {\r\n    name: '呼伦贝尔',\r\n    value: 1\r\n}, {\r\n    name: '娄底',\r\n    value: 1\r\n}, {\r\n    name: '辽源',\r\n    value: 1\r\n}, {\r\n    name: '翼州',\r\n    value: 1\r\n}, {\r\n    name: '铁岭',\r\n    value: 1\r\n}, {\r\n    name: '中山',\r\n    value: 1\r\n}, {\r\n    name: '香港',\r\n    value: 12\r\n}];\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value)\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar convertedData = [\r\n    convertData(data),\r\n    convertData(data.sort(function(a, b) {\r\n        return b.value - a.value;\r\n    }).slice(0, 6))\r\n];\r\ndata.sort(function(a, b) {\r\n    return a.value - b.value;\r\n})\r\n\r\nvar selectedItems = [];\r\nvar categoryData = [];\r\nvar barData = [];\r\n//   var maxBar = 30;\r\nvar sum = 0;\r\nvar count = data.length;\r\nfor (var i = 0; i < data.length; i++) {\r\n    categoryData.push(data[i].name);\r\n    barData.push(data[i].value);\r\n    sum += data[i].value;\r\n}\r\nconsole.log(categoryData);\r\nconsole.log(sum + \"   \" + count)\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    animation: true,\r\n    animationDuration: 1000,\r\n    animationEasing: 'cubicInOut',\r\n    animationDurationUpdate: 1000,\r\n    animationEasingUpdate: 'cubicInOut',\r\n    title: [{\r\n        text: '1w+关注者居住地分布',\r\n        subtext: '',\r\n        //爬取张佳玮138w+知乎关注者：数据可视化\r\n        //https://zhuanlan.zhihu.com/p/28890605?refer=c_122608198\r\n        //http://gallery.echartsjs.com/editor.html?c=xrJZ60TVIg\r\n        left: 260,\r\n        top: 65,\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    }, {\r\n        id: 'statistic',\r\n        //text: count ? '平均: ' + parseInt((sum / count).toFixed(4)) : '',\r\n        right: 120,\r\n        top: 40,\r\n        width: 100,\r\n        textStyle: {\r\n            color: '#fff',\r\n            fontSize: 16\r\n        }\r\n    }],\r\n    toolbox: {\r\n        iconStyle: {\r\n            normal: {\r\n                borderColor: '#fff'\r\n            },\r\n            emphasis: {\r\n                borderColor: '#b1e4ff'\r\n            }\r\n        },\r\n        feature: {\r\n            /*dataZoom: {},\r\n            brush: {\r\n                type: ['rect', 'polygon', 'clear']\r\n            },*/\r\n            saveAsImage: {\r\n                show: true\r\n            }\r\n        }\r\n    },\r\n    /*brush: {\r\n        outOfBrush: {\r\n            color: '#abc'\r\n        },\r\n        brushStyle: {\r\n            borderWidth: 2,\r\n            color: 'rgba(0,0,0,0.2)',\r\n            borderColor: 'rgba(0,0,0,0.5)',\r\n        },\r\n        seriesIndex: [0, 1],\r\n        throttleType: 'debounce',\r\n        throttleDelay: 300,\r\n        geoIndex: 0\r\n    },*/\r\n    geo: {\r\n        map: 'china',\r\n        left: '10',\r\n        right: '40%',\r\n        center: [91.98561551896913, 34.205000490896193],\r\n        zoom: 1.4,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#111'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n    tooltip: {\r\n        trigger: 'item'\r\n    },\r\n    grid: {\r\n        right: 40,\r\n        top: 100,\r\n        bottom: 40,\r\n        width: '30%'\r\n    },\r\n    xAxis: {\r\n        type: 'value',\r\n        scale: false,\r\n        position: 'top',\r\n        boundaryGap: false,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false,\r\n            margin: 2,\r\n            textStyle: {\r\n                color: '#aaa'\r\n            }\r\n        },\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        //  name: 'TOP 20',\r\n        nameGap: 16,\r\n        axisLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: false,\r\n            interval: 0,\r\n            textStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        data: categoryData\r\n    },\r\n    series: [{\r\n        //  name: 'Top 5',\r\n        type: 'effectScatter',\r\n        coordinateSystem: 'geo',\r\n        data: convertedData[0],\r\n        symbolSize: function(val) {\r\n            //return Math.max(val[2] / 10,9);\r\n            if (val[2] < 10) {\r\n                return 7\r\n            }\r\n            if (val[2] >= 10 && val[2] < 100) {\r\n                return 12\r\n            }\r\n            if (val[2] >= 100) {\r\n                return val[2] / 10\r\n            }\r\n        },\r\n        showEffectOn: 'emphasis',\r\n        rippleEffect: {\r\n            brushType: 'stroke'\r\n        },\r\n        hoverAnimation: true,\r\n        label: {\r\n            normal: {\r\n                formatter: '{b}',\r\n                position: 'right',\r\n                show: false //true\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#f4e925',\r\n                shadowBlur: 10,\r\n                shadowColor: '#333'\r\n            }\r\n        },\r\n        zlevel: 1\r\n    }, {\r\n        id: 'bar',\r\n        zlevel: 2,\r\n        type: 'bar',\r\n        symbol: 'none',\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ddb926'\r\n            }\r\n        },\r\n\r\n        //data: data\r\n    }]\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-3190370387","theme":"","layout":"","viewCount":3393,"userName":"12_杜蛋吻始","commentCount":0,"starCount":12,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1OhKsunW.png?v=1507535280434","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"12_杜蛋吻始"}}