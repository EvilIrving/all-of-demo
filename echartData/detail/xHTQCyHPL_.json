{"status":0,"data":{"cid":"xHTQCyHPL_","authorUid":"bd-1514373634","authorUserName":"什***虫","title":"新疆地图优化版","description":"地图 新疆 可视化 借鉴的更好看一点 最初版本什么都没改 全是借鉴的  侵删","latestVersion":3,"alwaysLatest":1,"createTime":"2018-10-12T05:17:19.000Z","lastUpdateTime":"2018-10-12T05:17:19.000Z","auth":2,"uid":"bd-1514373634","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.0","versionCreateTime":"2018-10-12T06:13:19.000Z","code":"// 获取新疆地区的json文件\r\nvar uploadedDataURL = \"/asset/get/s/data-1507863641060-Sy-whsTh-.json\";\r\n\r\n// 请求的方式获取\r\n$.get(uploadedDataURL, function(as) {\r\n    // 引入新疆地区地图\r\n    echarts.registerMap('新疆', as);\r\n    // 每个地区的坐标\r\n    var geoCoordMap = {\r\n        '巴音郭楞蒙古': [88.1653, 39.6002],\r\n        '和田': [81.167, 36.9855],\r\n        '哈密': [93.7793, 42.9236],\r\n        '阿克苏': [82.9797, 41.0229],\r\n        '阿勒泰': [88.2971, 47.0929],\r\n        '喀什': [77.168, 37.8534],\r\n        '塔城': [86.6272, 45.8514],\r\n        '昌吉': [89.6814, 44.4507],\r\n        '克孜勒苏柯尔克孜': [74.6301, 39.5233],\r\n        '吐鲁番': [89.6375, 42.4127],\r\n        '伊犁哈萨克': [82.5513, 43.5498],\r\n        '博尔塔拉蒙古': [81.8481, 44.6979],\r\n        '乌鲁木齐': [87.9236, 43.5883],\r\n        '克拉玛依': [85.2869, 45.5054],\r\n        '阿拉尔': [81.2769, 40.6549],\r\n        '图木舒克': [79.1345, 39.8749],\r\n        '五家渠': [87.5391, 44.3024],\r\n        '石河子': [86.0229, 44.2914]\r\n    };\r\n\r\n    // 每个地区的设备数量值\r\n    var data = [{\r\n        name: '巴音郭楞蒙古',\r\n        value: 390,\r\n        alarm_num: 54\r\n    }, {\r\n        name: '和田',\r\n        value: 119\r\n    }, {\r\n        name: '哈密',\r\n        value: 55,\r\n        alarm_num: 9\r\n    }, {\r\n        name: '阿克苏',\r\n        value: 329\r\n    }, {\r\n        name: '阿勒泰',\r\n        value: 219,\r\n        alarm_num: 14\r\n    }, {\r\n        name: '喀什',\r\n        value: 290\r\n    }, {\r\n        name: '塔城',\r\n        value: 319,\r\n        alarm_num: 2\r\n    }, {\r\n        name: '昌吉',\r\n        value: 199\r\n    }, {\r\n        name: '克孜勒苏柯尔克孜',\r\n        value: 419,\r\n        alarm_num: 11\r\n    }, {\r\n        name: '吐鲁番',\r\n        value: 299\r\n    }, {\r\n        name: '伊犁哈萨克',\r\n        value: 49\r\n    }, {\r\n        name: '博尔塔拉蒙古',\r\n        value: 219,\r\n        alarm_num: 15\r\n    }, {\r\n        name: '乌鲁木齐',\r\n        value: 89\r\n    }, {\r\n        name: '克拉玛依',\r\n        value: 49\r\n    }, {\r\n        name: '阿拉尔',\r\n        value: 209,\r\n        alarm_num: 27\r\n    }, {\r\n        name: '图木舒克',\r\n        value: 129\r\n    }, {\r\n        name: '五家渠',\r\n        value: 49,\r\n        alarm_num: 7\r\n    }, {\r\n        name: '石河子',\r\n        value: 229\r\n    }];\r\n\r\n    // 每个地区的设备告警数量\r\n    var data2 = [{\r\n        name: '巴音郭楞蒙古',\r\n        value: 54\r\n    }, {\r\n        name: '哈密',\r\n        value: 9\r\n    }, {\r\n        name: '阿勒泰',\r\n        value: 14\r\n    }, {\r\n        name: '塔城',\r\n        value: 2\r\n    }, {\r\n        name: '克孜勒苏柯尔克孜',\r\n        value: 11\r\n    }, {\r\n        name: '博尔塔拉蒙古',\r\n        value: 15\r\n    }, {\r\n        name: '乌鲁木齐',\r\n        value: 12\r\n    }, {\r\n        name: '阿拉尔',\r\n        value: 27\r\n    }, {\r\n        name: '五家渠',\r\n        value: 7\r\n    }]\r\n\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value),\r\n                });\r\n            }\r\n        }\r\n        // 有数据的地区的名称和value值\r\n        return res;\r\n    };\r\n\r\n    // 设定series是一个空的数组\r\n    var series = [];\r\n    [\r\n        ['新疆', data]\r\n    ].forEach(function(item, i) {\r\n        series.push({\r\n            name: '定位点',\r\n            type: 'effectScatter', // 散点图\r\n            coordinateSystem: 'geo', // 使用地理坐标系\r\n            hoverAnimation: 'false',\r\n            legendHoverLink: 'false',\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: 'stroke',\r\n                scale: 3\r\n            },\r\n            data: convertData(item[1]),\r\n            symbolSize: function(val) {\r\n                if (val[2] <= 100) {\r\n                    return 4\r\n                }\r\n                if (val[2] > 100 && val[2] <= 200) {\r\n                    return 8\r\n                }\r\n                if (val[2] > 200 && val[2] <= 300) {\r\n                    return 12\r\n                }\r\n                if (val[2] > 300 && val[2] <= 400) {\r\n                    return 16\r\n                }\r\n                if (val[2] > 400 && val[2] <= 500) {\r\n                    return 20\r\n                }\r\n                if (val[2] > 500) {\r\n                    return 24\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#5599E4',\r\n                }\r\n            },\r\n            zlevel: 1,\r\n        },\r\n        // {\r\n        //     type: 'map',\r\n        //     map: '新疆',\r\n        //     zlevel: 0,\r\n        //     itemStyle: {\r\n        //         normal: {\r\n        //             areaColor: '#323c48',\r\n        //             borderColor: '#111'\r\n        //         },\r\n        //         emphasis: {\r\n        //             areaColor: '#2a333d'\r\n        //         }\r\n        //     },\r\n        //     label: {\r\n        //         normal: {\r\n        //             show: true,\r\n        //             textStyle: {\r\n        //                 color: '#ddb926',\r\n        //                 fontSize: 10\r\n        //             },\r\n        //         },\r\n        //         emphasis: {\r\n        //             textStyle: {\r\n        //                 color: '#ddb926',\r\n        //                 fontSize: 10\r\n        //             },\r\n        //         }\r\n\r\n        //     },\r\n        //     data: data\r\n        // }, \r\n        {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            symbol: 'pin',\r\n            symbolSize: 25,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 9,\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#F62157', //标志颜色\r\n                }\r\n            },\r\n            zlevel: 6,\r\n            data: convertData(data2)\r\n        });\r\n    });\r\n\r\n    option = {\r\n        backgroundColor: '#4f5555',\r\n        title: {\r\n            text: '新疆设备部署图',\r\n            subtext: '散点圆的大小随设备数量改变而改变',\r\n            left: 'center',\r\n            textStyle: {\r\n                color: '#7bbfea'\r\n            }\r\n        },\r\n        geo: {\r\n        map: '新疆',\r\n        //视角缩放比例\r\n        zoom: 1,\r\n        //显示文本样式\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#fff'\r\n                }\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n                textStyle: {\r\n                    color: '#fff'\r\n                }\r\n            }\r\n        },\r\n        //鼠标缩放和平移\r\n        roam: true,\r\n        itemStyle: {\r\n            normal: {\r\n                //         \tcolor: '#ddd',\r\n                borderColor: 'rgba(147, 235, 248, 1)',\r\n                borderWidth: 1,\r\n                areaColor: {\r\n                    type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.8,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(175,238,238, 0)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(\t47,79,79, .2)' // 100% 处的颜色\r\n                    }],\r\n                    globalCoord: false // 缺省为 false\r\n                },\r\n                shadowColor: 'rgba(128, 217, 248, 1)',\r\n                // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                shadowOffsetX: -2,\r\n                shadowOffsetY: 2,\r\n                shadowBlur: 10\r\n            },\r\n            emphasis: {\r\n                areaColor: '#389BB7',\r\n                borderWidth: 0,\r\n            }\r\n        }\r\n    },\r\n        series: series\r\n    };\r\n    myChart.setOption(option);\r\n\r\n});","html":"","externalScripts":"","updaterUID":"bd-1514373634","theme":"","layout":"","viewCount":1424,"userName":"什***虫","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHTQCyHPL_.png?v=1539324799958","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-scatter","title"],"customTags":[],"updaterUserName":"什***虫"}}