{"status":0,"data":{"cid":"xUPADMmR4x","authorUid":"obd-ojdkaOBR9ZOqzDxlayXaO8MQ_AxI5EB","authorUserName":"131******33","title":"自定义斜边柱状图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-22T07:16:44.000Z","lastUpdateTime":"2021-10-22T07:16:44.000Z","auth":1,"uid":"obd-ojdkaOBR9ZOqzDxlayXaO8MQ_AxI5EB","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-22T07:16:44.000Z","code":"const dataSource = [\n    {\n        value: '8',\n        unit: '个',\n        name: '千金',\n    },\n    {\n        value: '1',\n        unit: '个',\n        name: '南浔',\n    },\n    {\n        value: '2',\n        unit: '个',\n        name: '双林',\n    },\n    {\n        value: '3',\n        unit: '个',\n        name: '和孚',\n    },\n    {\n        value: '3',\n        unit: '个',\n        name: '善琏',\n    },\n    {\n        value: '1',\n        unit: '个',\n        name: '开发区',\n    },\n    {\n        value: '6',\n        unit: '个',\n        name: '石淙',\n    },\n    {\n        value: '3',\n        unit: '个',\n        name: '练市',\n    },\n    {\n        value: '5',\n        unit: '个',\n        name: '菱湖',\n    },\n];\n\nconst img =\n    'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAVCAYAAACzK0UYAAACyUlEQVRIiY2VzWoUQRDHf9U7+cIsahIj0ajgwaNi1JNHSRQ3ePMk+AyKd30BQfQFFDzrRWOMJBdBEEUEPQVMiHgQjWA2Jtns7E63dM/MTs/MJqSgpqq7q/9V1VU9LSzNHwPuAdPACPANeAI8AJp4NHbk0r6K4VwkHAcGgPWKYTESvgKRtayY2D6SWLdSWJpbdeACWANxHzt4B1LDUHe7BKpjUzd7NP2U6Rcw21KEgzqLrKViGSCtkRSkI+NoLgLzCJPAmp3fiOjvNRBK3omBwwI1ImY2IOwsRLFQSBvHtPIy5vNIewHVHrJjY6M0OOkzsX7IaKaNpq+4rpCQmFuebJLNhxMQzkM4TALoMvVlxiNoamj6/HmVATYL4Ln5s0hzgfZ61W2MEoCo5MR31O85CQvg210cOT5D4+Vtonp1RydRd0dxJqpZyCTRlcd2TP0ozee3MGGvAzQJcMr+WDNMxFUiApUBbntyOwbG404wa+O0Zy97YN0ySXWb0enAgZpCCztdg6hOj+banJULaF7k+rjQ1p09cDJAGomBJBexCxUBaB1wkXYucAnY3zMYxIVODSTJVfxLmSgqkfaiVNec2d5oI0A1ysdlCtFL4cjapz6kt7l0ZMVsDMvxcaWRlzYZEMl0S/rgd7ZuvNlTJobfCF+8mqSkssI7w7RWCvT+H6zfeUQ0EHZOcedM/gCvbd5xTXax9AL4zN/7T2mNbnbNOk/WwUz6VATIVmFdZVlk9AmYpDl6vVschfFq4iBM15Ka7EofgSn3u9f5BizdH1sDeOUceA0UBDknpSzeA1faUA/s4SYdXKpFTLbIsQO/OzUE49Kw3keVgZ5kVrubHr1VpnJNS1RvUXErKxob0UAHJJM/EeYwiYN8LQmGZHNCGbmLUNNi7Cu5rI08VmIe2l+0fc5sFomTZ8AEcALjnuF/wCLGvfE6l2GqA/8Bnpdx0cUesngAAAAASUVORK5CYII=';\n\nconst obliqueRectangle = echarts.graphic.extendShape({\n    shape: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        offset: 10,\n    },\n    buildPath: (ctx, shape) => {\n        ctx.moveTo(shape.x + shape.offset, shape.y);\n        ctx.lineTo(shape.x + shape.width + shape.offset, shape.y);\n        ctx.lineTo(shape.x + shape.width, shape.y + shape.height);\n        ctx.lineTo(shape.x, shape.y + shape.height);\n        ctx.closePath();\n    },\n});\necharts.graphic.registerShape('obliqueRectangle', obliqueRectangle);\n\noption = {\n    backgroundColor: '#000',\n    grid: [\n        {\n            left: 50,\n            top: 0,\n            right: 20,\n            bottom: 20,\n            containLabel: true,\n        },\n    ],\n    xAxis: [\n        {\n            gridIndex: 0,\n            type: 'value',\n            axisLabel: { show: false },\n            axisLine: { show: false },\n            splitLine: { show: false },\n            axisTick: { show: false },\n        },\n        {\n            gridIndex: 0,\n            type: 'value',\n            max: 100,\n            axisLabel: { show: false },\n            axisLine: { show: false },\n            splitLine: { show: false },\n            axisTick: { show: false },\n        },\n    ],\n    yAxis: [\n        {\n            gridIndex: 0,\n            type: 'category',\n            inverse: true,\n            data: dataSource.map((item) => item.name),\n            axisTick: { show: false },\n            axisLine: { show: false },\n            splitLine: { show: false },\n            axisLabel: {\n                width: 80,\n                padding: [0, 0, 0, -80],\n                align: 'left',\n                formatter: (name, index) => {\n                    const _index = index + 1;\n                    const id = _index > 9 ? _index : `0${_index}`;\n                    return `{icon|}{num|${id}}{value|${name}}`;\n                },\n                rich: {\n                    icon: {\n                        width: 14,\n                        height: 11,\n                        backgroundColor: {\n                            image: img,\n                        },\n                    },\n                    num: {\n                        padding: [0, 0, 0, 5],\n                        width: 25,\n                        color: '#7FE5FF',\n                        align: 'left',\n                        fontSize: 15,\n                        fontFamily: 'Oswald',\n                        fontWeight: 400,\n                        fontStyle: 'italic',\n                    },\n                    value: {\n                        // width:\n                        fontSize: 15,\n                        color: '#fff',\n                        fontFamily: 'SourceHanSerifSC-Bold',\n                        fontWeight: 500,\n                    },\n                },\n            },\n        },\n        {\n            gridIndex: 0,\n            type: 'category',\n            inverse: true,\n            margin: 20,\n            data: dataSource.map((item) => item.name),\n            axisTick: { show: false },\n            axisLine: { show: false },\n            splitLine: { show: false },\n            axisLabel: {\n                padding: [0, 0, 0, 10],\n                formatter: (_, index) => {\n                    return `{value|${dataSource[index].value}}{unit|个}`;\n                },\n                rich: {\n                    unit: {\n                        color: '#fff',\n                        fontSize: 8,\n                        verticalAlign: 'bottom',\n                    },\n                    value: {\n                        color: '#fff',\n                        fontSize: 15,\n                        fontWeight: 500,\n                    },\n                },\n            },\n        },\n    ],\n    series: [\n        {\n            type: 'custom',\n            xAxisIndex: 1,\n            yAxisIndex: 0,\n            data: dataSource.map(() => 100),\n            renderItem: (params, api) => {\n                const barLayout = api.barLayout({\n                    count: 1,\n                    barWidth: 8,\n                });\n                const { bandWidth, offsetCenter, width } = barLayout[0];\n                const x = params.coordSys.x;\n                const y = bandWidth * (params.dataIndex + 1 / 2) + offsetCenter + params.coordSys.y - width / 2;\n                return {\n                    type: 'obliqueRectangle',\n                    shape: {\n                        x: x,\n                        y: y + 2,\n                        width: api.size([api.value()])[0],\n                        height: width,\n                        offset: width * 0.5,\n                    },\n                    style: api.style(),\n                };\n            },\n            itemStyle: {\n                color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 1,\n                    y2: 0,\n                    colorStops: [\n                        {\n                            offset: 0,\n                            color: '#22324A', // 0% 处的颜色\n                        },\n                        {\n                            offset: 1,\n                            color: '#1C3D57', // 100% 处的颜色\n                        },\n                    ],\n                    global: false, // 缺省为 false\n                },\n            },\n            silent: true,\n        },\n        {\n            type: 'custom',\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            data: dataSource.map((item) => item.value),\n            silent: true,\n            itemStyle: {\n                color: {\n                    type: 'linear',\n                    x: 0,\n                    y: 0,\n                    x2: 1,\n                    y2: 0,\n                    colorStops: [\n                        {\n                            offset: 0,\n                            color: '#2FC7FF', // 0% 处的颜色\n                        },\n                        {\n                            offset: 1,\n                            color: '#73F3FF', // 100% 处的颜色\n                        },\n                    ],\n                    global: false, // 缺省为 false\n                },\n            },\n            renderItem: (params, api) => {\n                const barLayout = api.barLayout({\n                    barWidth: 11,\n                    count: 1,\n                });\n                const { bandWidth, offsetCenter, width } = barLayout[0];\n                const x = params.coordSys.x;\n                const y = bandWidth * (params.dataIndex + 1 / 2) + offsetCenter + params.coordSys.y - width / 2;\n                return {\n                    type: 'obliqueRectangle',\n                    shape: {\n                        x: x,\n                        y: y,\n                        width: api.size([api.value()])[0],\n                        height: width,\n                        offset: width * 0.5,\n                    },\n                    style: api.style(),\n                };\n            },\n        },\n        {\n            type: 'pictorialBar',\n            data: dataSource.map((item) => item.value),\n            xAxisIndex: 0,\n            yAxisIndex: 0,\n            symbol: 'path://M15,0L5,20L0,20L10,0Z',\n            symbolRotate: null,\n            symbolSize: [13, 12],\n            symbolPosition: 'end',\n            symbolOffset: [10, 0],\n            itemStyle: {\n                color: 'white',\n                shadowColor: 'rgba(115, 243, 255, 0.2)',\n                shadowBlur: 10,\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-ojdkaOBR9ZOqzDxlayXaO8MQ_AxI5EB","theme":"","layout":"","viewCount":0,"userName":"131******33","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUPADMmR4x.png?v=1634887004556","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","series-pictorialBar"],"customTags":[],"updaterUserName":"131******33"}}