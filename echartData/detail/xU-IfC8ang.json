{"status":0,"data":{"cid":"xU-IfC8ang","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"指针","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-12-17T13:06:59.000Z","lastUpdateTime":"2020-12-17T13:06:59.000Z","auth":2,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-21T01:02:56.000Z","code":"let center = '50.2,63.5'.split(',')\r\nlet startAngle = '207'\r\nlet radius = '95,100'.split(',')\r\nlet endRadius = '84,109'.split(',')\r\n// 指针值\r\nvar gaugeValue = []\r\n// 指针颜色\r\nvar gaugeColor = []\r\n// 最大值\r\nvar max = 100;\r\n// 圆环进度\r\nvar gaugeList = [15, 40]\r\n// 从大-》小\r\nvar zIndex = [10, 9]\r\n// 圆环颜色\r\nvar colorList = []\r\n// 圆环大小\r\nvar gaugeSize = 650\r\n// 单位\r\nvar gaugeMeasure = '元'\r\n\r\n// 最大值\r\nvar max = 100\r\n// 指针值\r\nvar value = 100\r\n// 指针名称\r\nvar pointerName = ['使用率']\r\n// 标题\r\nvar gaugeName = '大型设备总量'\r\n// 使用率\r\nvar rate = ((value / max) * 100).toFixed(2)\r\n\r\n\r\nvar endValue = value * 0.65;\r\nvar pieSeriesData = [{\r\n    value: endValue,\r\n    itemStyle: {\r\n        color: 'rgba(255, 206, 143, 1)',\r\n        shadowColor: 'rgba(255, 206, 143, 1)',\r\n        shadowBlur: 20,\r\n        shadowOffsetY: 6\r\n    }\r\n}, {\r\n    value: max-endValue,\r\n    itemStyle: {\r\n        color: 'rgba(255, 206, 143, 0)',\r\n        shadowColor: 'rgba(0, 90, 160, 0)',\r\n        shadowBlur: 20,\r\n        shadowOffsetY: 6\r\n    }\r\n}]\r\nvar endSeriesData = [{\r\n    value: endValue - 0.2,\r\n    itemStyle: {\r\n        color: 'rgba(255, 206, 143, 0)',\r\n        shadowColor: 'rgba(0, 90, 160, 0)',\r\n        shadowBlur: 20,\r\n        shadowOffsetY: 6\r\n    }\r\n}, {\r\n    value: 0.2,\r\n    itemStyle: {\r\n        color: 'rgba(255, 206, 143, 1)',\r\n        shadowColor: 'rgba(255, 206, 143, 1)',\r\n        shadowBlur: 20,\r\n        shadowOffsetY: 6\r\n    }\r\n}, {\r\n    value: max-endValue,\r\n    itemStyle: {\r\n        color: 'rgba(255, 206, 143, 0)',\r\n        shadowColor: 'rgba(0, 90, 160, 0)',\r\n        shadowBlur: 20,\r\n        shadowOffsetY: 6\r\n    }\r\n}]\r\n\r\n\r\n\r\nconst seriesData = [];\r\nvar data = [];\r\npointerName.map((item, index) => {\r\n    data.push({\r\n        name: pointerName[index],\r\n        value: rate,\r\n        itemStyle: {\r\n            color: gaugeColor[index]\r\n        }\r\n    })\r\n})\r\n\r\nfor (let i = 0; i < gaugeList.length; i++) {\r\n    seriesData.push({\r\n        type: 'bar',\r\n        data: [{ //上层圆环，显示数据\r\n            value: gaugeList[i],\r\n            itemStyle: {\r\n                color: colorList[i],\r\n            }\r\n        }],\r\n        barGap: '-100%', //柱间距离,上下两层圆环重合\r\n        coordinateSystem: 'polar',\r\n        roundCap: true, //顶端圆角\r\n        z: zIndex[i] //圆环层级，同zindex\r\n    })\r\n}\r\n\r\nvar barList = ['']\r\nvar option = {\r\n    backgroundColor: '#333',\r\n    center: ['50%', '50%'],\r\n    title: [{\r\n        show:false,\r\n        text: gaugeName,\r\n        subtext:'89%',\r\n        bottom: '30%',\r\n        x: 'center',\r\n        borderRadius: 15,\r\n        padding: [7, 14],\r\n        textStyle: {\r\n            fontSize: 26,\r\n            fontFamily: 'DIN',\r\n            fontWeight: 400,\r\n            color: '#FDFFDD',\r\n            lineHeight: 26,\r\n            textShadow: '0px 6px 10px rgba(0, 160, 136, 0.52)',\r\n            WebkitTextStroke: '1px #FFCD8F',\r\n            textStroke: '1px #FFCD8F',\r\n        },\r\n        subtextStyle:{\r\n            fontSize: 15,\r\n            fontFamily: 'Source Han Sans CN',\r\n            fontWeight: 400,\r\n            color: '#DDFEFF',\r\n            lineHeight: 26,\r\n            textShadow: '0px 0px 5px #00DEFF'\r\n        },\r\n        formatter:name=>{\r\n            console.log(name)\r\n            return 'name'\r\n        }\r\n    }],\r\n    angleAxis: {\r\n        show: false,\r\n        max: 100 * 360 / 270, //-45度到225度，二者偏移值是270度除360度\r\n        type: 'value',\r\n        startAngle: 225, //极坐标初始角度\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    barMaxWidth: 14, //圆环宽度\r\n    radiusAxis: {\r\n        show: false,\r\n        type: 'category',\r\n    },\r\n    //圆环位置和大小\r\n    polar: {\r\n        center: ['50%', '50%'],\r\n        radius: 680\r\n    },\r\n    tooltip: {\r\n        show: true,\r\n    },\r\n    series: [{\r\n            type: 'pie',\r\n            radius: [radius[0] + '%', radius[1] + '%'],\r\n            center: [center[0] + '%', center[1] + '%'],\r\n            silent: true,\r\n            max: max,\r\n            startAngle: startAngle,\r\n            data:pieSeriesData, \r\n            // [{\r\n            //     value: 37.5,\r\n            //     itemStyle: {\r\n            //         color: 'rgba(255, 206, 143, 1)',\r\n            //         shadowColor: 'rgba(255, 206, 143, 1)',\r\n            //         shadowBlur: 20,\r\n            //         shadowOffsetY: 6\r\n            //     }\r\n            // }, {\r\n            //     value: 62.5,\r\n            //     itemStyle: {\r\n            //         color: 'rgba(255, 206, 143, 0)',\r\n            //         shadowColor: 'rgba(0, 90, 160, 0)',\r\n            //         shadowBlur: 20,\r\n            //         shadowOffsetY: 6\r\n            //     }\r\n            // }],\r\n            label: {\r\n                show: false\r\n            },\r\n            coordinateSystem: 'polar',\r\n            z: 1\r\n        },\r\n        {\r\n            type: 'pie',\r\n            radius: [endRadius[0] + '%', endRadius[1] + '%'],\r\n            center: [center[0] + '%', center[1] + '%'],\r\n            silent: true,\r\n            startAngle: startAngle,\r\n            max: max,\r\n            data: endSeriesData,\r\n            label:{\r\n                show:false,\r\n                position:'center',\r\n                formatter:name=>{\r\n                    return `\\n\\n\\n{info|大型设备总量：}{num|${max}}`\r\n                },\r\n                rich:{\r\n                    info:{\r\n                        fontSize: 15,\r\n                        fontFamily: 'Source Han Sans CN',\r\n                        fontWeight: 400,\r\n                        color: '#DDFEFF',\r\n                        lineHeight: 26,\r\n                        textShadow: '0px 0px 5px #00DEFF'\r\n                    },\r\n                    num:{\r\n                        fontSize: 15,\r\n                        fontFamily: 'DIN',\r\n                        fontWeight: 400,\r\n                        color: '#DDFEFF',\r\n                        lineHeight: 26,\r\n                        textShadow: '0px 6px 10px rgba(0, 160, 136, 0.52)',\r\n                        WebkitTextStroke: '1px #FFCD8F',\r\n                        textStroke: '1px #FFCD8F'\r\n                    },\r\n                    pb:{\r\n                        padding:[0,0,200,0]\r\n                    }\r\n                }\r\n            },\r\n            // [{\r\n            //     value: 37.3,\r\n            //     itemStyle: {\r\n            //         color: 'rgba(255, 206, 143, 0)',\r\n            //         shadowColor: 'rgba(0, 90, 160, 0)',\r\n            //         shadowBlur: 20,\r\n            //         shadowOffsetY: 6\r\n            //     }\r\n            // }, {\r\n            //     value: 0.2,\r\n            //     itemStyle: {\r\n            //         color: 'rgba(255, 206, 143, 1)',\r\n            //         shadowColor: 'rgba(255, 206, 143, 1)',\r\n            //         shadowBlur: 20,\r\n            //         shadowOffsetY: 6\r\n            //     }\r\n            // }, {\r\n            //     value: 62.5,\r\n            //     itemStyle: {\r\n            //         color: 'rgba(255, 206, 143, 0)',\r\n            //         shadowColor: 'rgba(0, 90, 160, 0)',\r\n            //         shadowBlur: 20,\r\n            //         shadowOffsetY: 6\r\n            //     }\r\n            // }],\r\n            barGap: '-100%',\r\n            coordinateSystem: 'polar',\r\n            roundCap: true,\r\n            z: 1\r\n        },\r\n\r\n    ]\r\n}","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":137,"userName":"m***h","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xU-IfC8ang.png?v=1608512576763","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-gauge","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"m***h"}}