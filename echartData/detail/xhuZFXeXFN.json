{"status":0,"data":{"cid":"xhuZFXeXFN","authorUid":"obd-otzvfj8vteYdCiC0yVCJ0txO3Ohut87","authorUserName":"天***2","title":"发光圆环饼图","description":"这是从社区其他大佬设计的图表中获得灵感进行学习改造的案例，大家一起学习。","latestVersion":5,"alwaysLatest":1,"createTime":"2020-12-22T14:06:46.000Z","lastUpdateTime":"2020-12-22T14:06:46.000Z","auth":2,"uid":"obd-otzvfj8vteYdCiC0yVCJ0txO3Ohut87","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.9.0","versionCreateTime":"2021-05-10T15:53:26.000Z","code":"var linew = 1;\nvar linel1 = 40;\nvar linl2 = 35;\nvar outr = 145;\nvar inr = 135;\nvar size = 20;\nvar numberdata = ['17', '20', '13', '16', '20', '15'];\nvar titledata = ['新料未添加、资料程式未同步', '错料', '站别错误', '网络异常', '进系统', '其他'];\nvar percents = []; //一个空数组用来保存每个数组百分比\nvar total = 0;\nvar percent = 0;\n//计算总和\nfor (var i = 0; i < numberdata.length; i++) {\n    total += Number(numberdata[i]);\n}\n\n//标题显示格式\nlet func = (params) => {\n    let percent = ((params.value / total) * 100).toFixed(1);\n    let name = params.name.replace(/\\n/g, '');\n    let value = params.value;\n    if (params.name !== '') {\n        return name + ':' + value + '项' + '\\n{white|' + percent + '%}';\n    } else {\n        return '';\n    }\n};\n\nlet placeHolderStyle = {\n    normal: {\n        label: {\n            show: false,\n        },\n        labelLine: {\n            show: false,\n        },\n        color: 'rgba(0, 0, 0, 0)',\n        borderColor: 'rgba(0, 0, 0, 0)',\n        borderWidth: 0,\n    },\n};\n\nlet rich = {\n    //富文本格式\n    white: {\n        fontSize: size, //改变百分数的数据\n        align: 'center',\n        padding: [3, 0],\n    },\n};\n\nvar data = [];\nlet color = ['#ff4343', '#f69846', '#f6d54a', '#58FAAC', '#45dbf7', '#4777f5', '#5045f6', '#ad46f3', '#f845f1'];\n\nfor (var i = 0; i < numberdata.length; i++) {\n    data.push(\n        {\n            value: numberdata[i],\n            name: titledata[i],\n            itemStyle: {\n                normal: {\n                    borderWidth: 5,\n                    shadowBlur: 20,\n                    borderColor: color[i],\n                    shadowColor: color[i],\n                    color: color[i],\n                },\n            },\n        },\n        {\n            value: total / 30,\n            name: '',\n            itemStyle: placeHolderStyle,\n        }\n    );\n}\n\nvar seriesObj = [\n    {\n        name: '',\n        type: 'pie',\n        clockWise: false,\n        startAngle: '90',\n        center: ['45%', '50%'], //此处调整圆环的位置\n        radius: [outr, inr], //此处可以调整圆环的大小\n        hoverAnimation: false,\n        itemStyle: {\n            normal: {\n                label: {\n                    show: true,\n                    position: 'outside',\n                    formatter: func,\n                    rich: rich,\n                    fontSize: size, //此处修改字体大小\n                },\n                labelLine: {\n                    length: linel1, //引导线的长度\n                    length2: linl2,\n                    show: true,\n                    color: '#00ffff',\n                    lineStyle: {\n                        width: linew, //引导线的宽度\n                    },\n                },\n            },\n        },\n        data: data,\n        animationType: 'scale',\n        animationEasing: 'elasticOut',\n        animationDelay: function (idx) {\n            return idx * 50;\n        },\n    },\n    {\n        name: '',\n        type: 'pie',\n        center: ['45%', '50%'],\n        radius: ['49%', '49%'],\n        itemStyle: {\n            color: 'transparant',\n        },\n        startAngle: '90',\n        data: [\n            {\n                value: total,\n                name: '',\n                label: {\n                    normal: {\n                        show: true,\n                        formatter: '{b|第一季度SWDL异常统计}\\n\\n{b|共}{c|{c}} {b|项}',\n                        rich: {\n                            c: {\n                                color: 'rgb(98,137,169)',\n                                fontSize: size,\n                                fontWeight: 'bold',\n                                lineHeight: 5,\n                            },\n                            b: {\n                                color: 'rgb(98,137,169)',\n                                fontSize: size,\n                                lineHeight: 5,\n                            },\n                        },\n                        textStyle: {\n                            fontSize: 28,\n                            fontWeight: 'bold',\n                        },\n                        position: 'center',\n                    },\n                },\n            },\n        ],\n    },\n];\n\noption = {\n    backgroundColor: '#000000',\n    tooltip: {\n        show: false,\n    },\n    legend: {\n        show: true,\n\n        right: 20,\n        top: '2%',\n        textStyle: {\n            color: '#fff',\n            fontSize: size,\n        },\n        itemWidth: 20,\n        itemHeight: 15,\n        itemGap: 10,\n    },\n    toolbox: {\n        show: false,\n    },\n    series: seriesObj,\n};\n","html":"","externalScripts":"","updaterUID":"obd-otzvfj8vteYdCiC0yVCJ0txO3Ohut87","theme":"","layout":"","viewCount":330,"userName":"天***2","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhuZFXeXFN.png?v=1620662006487","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","toolbox","tooltip"],"customTags":[],"updaterUserName":"天***2"}}