{"status":0,"data":{"cid":"xepKWtJMjP","authorUid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","authorUserName":"l***y","title":"星空关系图","description":"自定义工具-全屏查看；大量数据；自定义节点位置","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-04T08:46:55.000Z","lastUpdateTime":"2020-11-04T08:46:55.000Z","auth":2,"uid":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-04T08:46:55.000Z","code":"var uploadedLinkURL = \"/asset/get/s/data-1604478378485-VVIZIAT-T.json\";\r\nvar uploadedNodeURL = \"/asset/get/s/data-1604478301534-V9GUxvkB8.json\";\r\n\r\nvar fontSize = (val) => {\r\n    return val\r\n}\r\nvar posX = (n) => {\r\n    let res = 0\r\n    switch (n) {\r\n        case \"d\":\r\n            res = 30 + Math.random() * 80;\r\n            break;\r\n        case \"b\":\r\n            res = 50 + Math.random() * 50;\r\n            break;\r\n        case \"a\":\r\n            res = 70 + Math.random() * 50;\r\n            break;\r\n        case \"e\":\r\n            res = 20 + Math.random() * 50;\r\n            break;\r\n        case \"c\":\r\n            res = 80 + Math.random() * 50;\r\n            break;\r\n    }\r\n    return res\r\n}\r\nvar posY = (n) => {\r\n    let res = 0\r\n    switch (n) {\r\n        case \"d\":\r\n            res = 50 + Math.random() * 50;\r\n            break;\r\n        case \"b\":\r\n            res = 40 + Math.random() * 50;\r\n            break;\r\n        case \"a\":\r\n            res = 60 + Math.random() * 50;\r\n            break;\r\n        case \"e\":\r\n            res = 60 + Math.random() * 50;\r\n            break;\r\n        case \"c\":\r\n            res = 35 + Math.random() * 50;\r\n            break;\r\n    }\r\n    return res\r\n}\r\nvar color = (n) => {\r\n    switch (n) {\r\n        case \"d\":\r\n            return {\r\n                type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(212,130,101,1)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(212,130,101,0)' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n            }\r\n            break;\r\n        case \"b\":\r\n            return {\r\n                type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(202,134,34,1)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(202,134,34,0)' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n            }\r\n            break;\r\n        case \"a\":\r\n            return {\r\n                type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(194,53,49,1)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(194,53,49,0)' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n            }\r\n            break;\r\n        case \"e\":\r\n            return {\r\n                type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(97,160,168,1)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(97,160,168,0)' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n            }\r\n            break;\r\n        case \"c\":\r\n            return {\r\n                type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: 'rgba(110,112,116,1)' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: 'rgba(110,112,116,0)' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n            }\r\n            break;\r\n    }\r\n}\r\n\r\n\r\n\r\n$.getJSON(uploadedNodeURL, (knowledgeGraphNodes) => {\r\n    $.getJSON(uploadedLinkURL, (knowledgeGraphLinks) => {\r\n        var text = \"<div id='fullChart' style='position:fixed;top:0;bottom:0;left:0;right:0;display:none;'></div>\"\r\n        $('body').append(text)\r\n        var fullFlag = false\r\n        var showFullScreen = (option) => {\r\n            let dom = document.getElementById(\"fullChart\")\r\n            if (fullFlag) {\r\n                dom.style.display = 'none'\r\n                fullFlag = false\r\n            } else {\r\n                dom.style.display = 'block'\r\n                fullFlag = true\r\n                let nodes = knowledgeGraphNodes.map((item) => {\r\n                    return {\r\n                        name: item.name,\r\n                        value: item.num,\r\n                        symbolSize: fontSize(item.num * 15),\r\n                        category: item.category,\r\n                        itemStyle: {\r\n                            color: color(item.category)\r\n                        },\r\n                        label: {\r\n                            color: item.category != \"d\" ? \"#ffffff\" : \"#d48265\"\r\n                        },\r\n                        x: posX(item.category),\r\n                        y: posY(item.category),\r\n                    }\r\n                })\r\n                option.series[0].data = nodes\r\n                option.series[0].width = \"100%\"\r\n                option.series[0].height = \"120%\"\r\n                option.series[0].left = \"10%\"\r\n                option.series[0].bottom = \"5%\"\r\n                let fullChart = echarts.init(dom)\r\n                fullChart.setOption(option)\r\n            }\r\n        }\r\n        let colorArr = [\r\n            \"#c23531\",\r\n            \"#ca8622\",\r\n            \"#6e7074\",\r\n            \"#d48265\",\r\n            \"#61a0a8\",\r\n        ]\r\n        let categories = [{\r\n            name: \"a\"\r\n        }, {\r\n            name: \"b\"\r\n        }, {\r\n            name: \"c\"\r\n        }, {\r\n            name: \"d\"\r\n        }, {\r\n            name: \"e\"\r\n        }]\r\n        let nodes = knowledgeGraphNodes.map((item) => {\r\n            return {\r\n                name: item.name,\r\n                value: item.num,\r\n                symbolSize: fontSize(item.num * 7),\r\n                category: item.category,\r\n                itemStyle: {\r\n                    color: color(item.category)\r\n                },\r\n                label: {\r\n                    color: item.category != \"d\" ? \"#ffffff\" : \"#d48265\"\r\n                },\r\n                x: posX(item.category),\r\n                y: posY(item.category),\r\n            }\r\n        })\r\n        let links = knowledgeGraphLinks.map((item) => {\r\n            return {\r\n                source: item.source,\r\n                target: item.target,\r\n                value: item.num\r\n            }\r\n        })\r\n        let option = {\r\n            backgroundColor: '#012248',\r\n            color: colorArr,\r\n            tooltip: {\r\n                show: false\r\n            },\r\n            toolbox: {\r\n                show: true,\r\n                itemSize: fontSize(30),\r\n                feature: {\r\n                    myFull: {\r\n                        show: true,\r\n                        title: '查看',\r\n                        icon: \"path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891\",\r\n                        onclick: (e) => {\r\n                            showFullScreen(e.getOption())\r\n                        },\r\n                    }\r\n                }\r\n            },\r\n            legend: [{\r\n                // selectedMode: 'single',\r\n                icon: 'circle',\r\n                itemWidth: fontSize(15),\r\n                itemHeight: fontSize(15),\r\n                itemGap: fontSize(10),\r\n                textStyle: {\r\n                    color: \"#ffffff\",\r\n                    fontSize: fontSize(15),\r\n                },\r\n                data: categories.map((a) => {\r\n                    return a.name;\r\n                })\r\n            }],\r\n            animationDurationUpdate: 1500,\r\n            animationEasingUpdate: 'quinticInOut',\r\n            series: [{\r\n                name: 'KnowledgeGraph',\r\n                type: 'graph',\r\n                layout: 'none',\r\n                // layout: 'force',\r\n                // force: {\r\n                //   repulsion: fontSize(20),\r\n                //   gravity: 1,\r\n                //   edgeLength: fontSize(30),\r\n                // },\r\n                data: nodes,\r\n                links: links,\r\n                categories: categories,\r\n                // roam: true,//拖动\r\n                focusNodeAdjacency: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: '#fff',\r\n                        borderWidth: fontSize(0),\r\n                        // shadowBlur: fontSize(2),\r\n                        // shadowColor: 'rgba(145,142,39,0.5)',\r\n                        // opacity:0.6,\r\n                    }\r\n                },\r\n                lineStyle: {\r\n                    color: 'rgba(13,28,74,0.3)',\r\n                    // color:'target',\r\n                    curveness: 0.3,\r\n                },\r\n                emphasis: {\r\n                    lineStyle: {\r\n                        width: 1,\r\n                        color: '#d48265',\r\n                    }\r\n                },\r\n                label: {\r\n                    show: false,\r\n                    position: 'right',\r\n                    formatter: '{b}'\r\n                },\r\n                edgeLabel: {\r\n                    show: false,\r\n                },\r\n                width: \"80%\",\r\n                height: \"70%\"\r\n            }]\r\n        }\r\n        myChart.setOption(option)\r\n    })\r\n})","html":"","externalScripts":"","updaterUID":"obd-o2pLFbsgpOsmKddigccXbTX7T_Can6e","theme":"","layout":"","viewCount":566,"userName":"l***y","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xepKWtJMjP.png?v=1604479615988","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","toolbox","tooltip"],"customTags":[],"updaterUserName":"l***y"}}