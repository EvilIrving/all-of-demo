{"status":0,"data":{"cid":"x12wm9_-VT","authorUid":"obd-olzpQnyb8poOaFsinZad-kT_DdSJO0X","authorUserName":"不***1","title":"2-6月份全国新冠疫情发展情况","description":"全国各省份2-6月疫情发展趋势","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-28T09:46:37.000Z","lastUpdateTime":"2020-12-28T09:46:37.000Z","auth":2,"uid":"obd-olzpQnyb8poOaFsinZad-kT_DdSJO0X","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-28T11:24:25.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n\r\n//把所有城市的位置和各月份疫情信息添加到数组里面\r\nvar geoCoordMap = {\r\n    \"黑龙江\": [126.5363383,\t45.80734693],\r\n    \"吉林\": [125.2866434, 43.85392591],\r\n    '辽宁': [123.4409403, 41.88958731],\r\n    \"内蒙古\": [111.7749771, 40.86165455],\r\n    '北京': [116.3892349, 39.94138347],\r\n    \"河北\": [115.422438, 38.97441078],\r\n    \"山西\": [112.5220474, 37.89008234],\r\n    \"山东\": [117.1143325, 36.66627107],\r\n    \"陕西\": [108.9405044, 34.43188934],\r\n    \"河南\": [113.6426529, 34.77551637],\r\n    \"安徽\": [117.2461685, 31.85662269],\r\n    \"江苏\": [120.8716568, 32.04306309],\r\n    \"湖北\": [114.3238052, 30.59778902],\r\n    '浙江': [119.6302017, 29.13063113],\r\n    '上海': [121.4539322, 31.29503989],\r\n    '天津': [117.3560318, 39.37470211],\r\n    \"宁夏\": [106.2049087, 38.51169302],\r\n    \"甘肃\": [103.8153824, 36.13127563],\r\n    '青海': [97.34443509, 37.44220945],\r\n    '新疆': [87.58857571, 43.87616769],\r\n    \"西藏\": [91.17011868, 29.69049859],\r\n    \"云南\": [102.8156265, 24.88400738],\r\n    \"四川\": [104.0460952, 30.58360306],\r\n    \"重庆\": [106.9112524, 29.44393675],\r\n    \"贵州\": [106.6311011, 26.66173062],\r\n    \"广西\": [108.3559545, 22.83141275],\r\n    \"广东\": [113.2613500, 23.12978772],\r\n    \"湖南\": [112.9427465, 28.25071721],\r\n    \"江西\": [115.8651098, 28.69495848],\r\n    \"福建\": [119.3038305, 26.09086315],\r\n    \"台湾\": [121.5670141, 25.0503063],\r\n    \"海南\": [110.2181371, 20.0606117],\r\n    \"香港\": [114.0523657, 22.53745592],\r\n};\r\n//2月份数据\r\nvar d1 = {\r\n    \"黑龙江\": 266,\r\n    \"吉林\": 57,\r\n    '辽宁': 89,\r\n    \"内蒙古\": 41,\r\n    '北京': 242,\r\n    \"河北\": 149,\r\n    \"山西\": 84,\r\n    \"山东\": 325,\r\n    \"陕西\": 163,\r\n    \"河南\": 795,\r\n    \"安徽\": 568,\r\n    \"江苏\": 347,\r\n    \"湖北\": 18473,\r\n    '浙江': 873,\r\n    '上海': 231,\r\n    '天津': 67,\r\n    \"宁夏\": 39,\r\n    \"甘肃\": 56,\r\n    '青海': 15,\r\n    '新疆': 36,\r\n    \"西藏\": 1,\r\n    \"云南\": 123,\r\n    \"四川\": 293,\r\n    \"重庆\": 373,\r\n    \"贵州\": 62,\r\n    \"广西\": 154,\r\n    \"广东\": 895,\r\n    \"湖南\": 655,\r\n    \"江西\": 563,\r\n    \"福建\": 203,\r\n    \"台湾\": 0,\r\n    \"海南\": 97,\r\n    \"香港\": 0,\r\n};\r\n\r\n//3月份数据\r\nvar d2 = {\r\n    \"黑龙江\": 88,\r\n    \"吉林\": 4,\r\n    '辽宁': 18,\r\n    \"内蒙古\": 11,\r\n    '北京': 116,\r\n    \"河北\": 8,\r\n    \"山西\": 9,\r\n    \"山东\": 175,\r\n    \"陕西\": 20,\r\n    \"河南\": 11,\r\n    \"安徽\": 14,\r\n    \"江苏\": 43,\r\n    \"湖北\": 22695,\r\n    '浙江': 84,\r\n    '上海': 33,\r\n    '天津': 5,\r\n    \"宁夏\": 6,\r\n    \"甘肃\": 30,\r\n    '青海': 0,\r\n    '新疆': 3,\r\n    \"西藏\": 0,\r\n    \"云南\": 3,\r\n    \"四川\": 118,\r\n    \"重庆\": 68,\r\n    \"贵州\": 30,\r\n    \"广西\": 33,\r\n    \"广东\": 163,\r\n    \"湖南\": 81,\r\n    \"江西\": 33,\r\n    \"福建\": 17,\r\n    \"台湾\": 2,\r\n    \"海南\": 4,\r\n    \"香港\": 0,\r\n};\r\n//4月份数据\r\nvar d3 = {\r\n    \"黑龙江\": 42,\r\n    \"吉林\": 5,\r\n    '辽宁': 12,\r\n    \"内蒙古\": 43,\r\n    '北京': 136,\r\n    \"河北\": 11,\r\n    \"山西\": 5,\r\n    \"山东\": 18,\r\n    \"陕西\": 7,\r\n    \"河南\": 2,\r\n    \"安徽\": 0,\r\n    \"江苏\": 18,\r\n    \"湖北\": 577,\r\n    '浙江': 33,\r\n    '上海': 147,\r\n    '天津': 33,\r\n    \"宁夏\": 0,\r\n    \"甘肃\": 5,\r\n    '青海': 0,\r\n    '新疆': 0,\r\n    \"西藏\": 0,\r\n    \"云南\": 10,\r\n    \"四川\": 16,\r\n    \"重庆\": 3,\r\n    \"贵州\": 1,\r\n    \"广西\": 0,\r\n    \"广东\": 129,\r\n    \"湖南\": 1,\r\n    \"江西\": 1,\r\n    \"福建\": 44,\r\n    \"台湾\": 8,\r\n    \"海南\": 0,\r\n    \"香港\": 28,\r\n};\r\n//5月份数据\r\nvar d4 = {\r\n   \"黑龙江\":173,\r\n    \"吉林\": 8,\r\n    '辽宁': 0,\r\n    \"内蒙古\": 33,\r\n    '北京': 29,\r\n    \"河北\": 2,\r\n    \"山西\": 5,\r\n    \"山东\": 6,\r\n    \"陕西\": 41,\r\n    \"河南\": 0,\r\n    \"安徽\": 0,\r\n    \"江苏\": 2,\r\n    \"湖北\": 0,\r\n    '浙江': 0,\r\n    '上海': 29,\r\n    '天津': 1,\r\n    \"宁夏\": 0,\r\n    \"甘肃\": 0,\r\n    '青海': 0,\r\n    '新疆': 0,\r\n    \"西藏\": 0,\r\n    \"云南\": 2,\r\n    \"四川\": 0,\r\n    \"重庆\": 0,\r\n    \"贵州\": 0,\r\n    \"广西\": 0,\r\n    \"广东\": 5,\r\n    \"湖南\": 0,\r\n    \"江西\": 0,\r\n    \"福建\": 1,\r\n    \"台湾\": 0,\r\n    \"海南\": 0,\r\n    \"香港\": 0,\r\n};\r\n//6月份数据\r\nvar d5 = {\r\n    \"黑龙江\": 0,\r\n    \"吉林\": 3,\r\n    '辽宁': 0,\r\n    \"内蒙古\": 21,\r\n    '北京': 2,\r\n    \"河北\": 0,\r\n    \"山西\": 0,\r\n    \"山东\": 5,\r\n    \"陕西\": 1,\r\n    \"河南\": 0,\r\n    \"安徽\": 0,\r\n    \"江苏\": 0,\r\n    \"湖北\": 0,\r\n    '浙江': 0,\r\n    '上海': 7,\r\n    '天津': 0,\r\n    \"宁夏\": 0,\r\n    \"甘肃\": 0,\r\n    '青海': 0,\r\n    '新疆': 0,\r\n    \"西藏\": 0,\r\n    \"云南\": 0,\r\n    \"四川\": 17,\r\n    \"重庆\": 0,\r\n    \"贵州\": 0,\r\n    \"广西\": 0,\r\n    \"广东\": 9,\r\n    \"湖南\": 0,\r\n    \"江西\": 0,\r\n    \"福建\": 1,\r\n    \"台湾\": 0,\r\n    \"海南\": 1,\r\n    \"香港\": 3,\r\n};\r\nvar colors = [\r\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\r\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\r\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\r\n];\r\nvar colorIndex = 0;\r\n$(function() {\r\n    var month = [\"2月\", \"3月\", \"4月\", \"5月\", \"6月\"];\r\n    var mapData = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var barData = [];\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData[0].push({\r\n            \"month\": '2',\r\n            \"name\": key,\r\n            \"value\": d1[key],\r\n        });\r\n        mapData[1].push({\r\n            \"month\": '3',\r\n            \"name\": key,\r\n            \"value\": d2[key],\r\n        });\r\n        mapData[2].push({\r\n            \"month\": '4',\r\n            \"name\": key,\r\n            \"value\": d3[key],\r\n        });\r\n        mapData[3].push({\r\n            \"month\": '5',\r\n            \"name\": key,\r\n            \"value\": d4[key],\r\n        });\r\n        mapData[4].push({\r\n            \"month\": '6',\r\n            \"name\": key,\r\n            \"value\": d5[key],\r\n        });\r\n    }\r\n\r\n    for (var i = 0; i < mapData.length; i++) {\r\n        mapData[i].sort(function sortNumber(a, b) {\r\n            return a.value - b.value\r\n        });\r\n        barData.push([]);\r\n        categoryData.push([]);\r\n        for (var j = 0; j < mapData[i].length; j++) {\r\n            barData[i].push(mapData[i][j].value);\r\n            categoryData[i].push(mapData[i][j].name);\r\n        }\r\n    }\r\n\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n        \r\n        optionXyMap01 = {\r\n            timeline: {\r\n                data: month,\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 3000,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '3%',\r\n                width: '80%',\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#555'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#777',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#aaa',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {\r\n                    right: '1%',\r\n                    top: '15%',\r\n                    bottom: '10%',\r\n                    width: '20%'\r\n                },\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                        }\r\n                    }\r\n                },\r\n                geo: {\r\n                    show: true,\r\n                    map: 'china',\r\n                    roam: true,\r\n                    zoom: 1,\r\n                    center: [113.83531246, 34.0267395887],\r\n                    label: {\r\n                        emphasis: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {  //地图颜色\r\n                        normal: {\r\n                            borderColor: 'rgba(147, 235, 248, 1)',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(143, 235, 231, 0)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(143, 235, 231, .2)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 1)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#389BB7',\r\n                            borderWidth: 0\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n            options: []\r\n\r\n        };\r\n\r\n        for (var n = 0; n < month.length; n++) {\r\n            optionXyMap01.options.push({\r\n                backgroundColor: '#013954',\r\n                title:\r\n                    [{\r\n                            text: '2-6月份全国新冠疫情发展情况',\r\n                            left: '23%',\r\n                            top: '7%',\r\n                            textStyle: {\r\n                                color: '#fff',\r\n                                fontSize: 25\r\n                            }\r\n                        },\r\n                        {\r\n                            id: 'statistic',\r\n                            text: month[n] + \"各省现有确诊人数\",\r\n                            left: '75%',\r\n                            top: '8%',\r\n                            textStyle: {\r\n                                color: '#fff',\r\n                                fontSize: 25\r\n                            }\r\n                        }\r\n                    ],\r\n                xAxis: {\r\n                    type: 'value',\r\n                    scale: true,\r\n                    position: 'top',\r\n                    min: 0,\r\n                    boundaryGap: false,\r\n                    splitLine: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        show: false\r\n                    },\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLabel: {\r\n                        margin: 2,\r\n                        textStyle: {\r\n                            color: '#aaa'\r\n                        }\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'category',\r\n                    //  name: 'TOP 20',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: true,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    data: categoryData[n]\r\n                },\r\n\r\n                series: [\r\n                    //地图\r\n                    {\r\n                        type: 'map',\r\n                        map: 'china',\r\n                        geoIndex: 0,\r\n                        aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: false, // 存在legend时显示\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: false,\r\n                                textStyle: {\r\n                                    color: '#fff'\r\n                                }\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#031525',\r\n                                borderColor: '#FFFFFF',\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7'\r\n                            }\r\n                        },\r\n                        animation: false,\r\n                        data: mapData\r\n                    },\r\n                    //地图中闪烁的点\r\n                    {\r\n                        //  name: 'Top 5',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n].sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 150;\r\n                        },\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n],\r\n                                shadowBlur: 10,\r\n                                shadowColor: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    //柱状图\r\n                    {\r\n                        zlevel: 1.5,\r\n                        type: 'bar',\r\n                        symbol: 'none',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        data: barData[n]\r\n                    }\r\n                ]\r\n            })\r\n        }\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});\r\n\r\n","html":"","externalScripts":"","updaterUID":"obd-olzpQnyb8poOaFsinZad-kT_DdSJO0X","theme":"","layout":"","viewCount":231,"userName":"不***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x12wm9_-VT.png?v=1609154665345","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"不***1"}}