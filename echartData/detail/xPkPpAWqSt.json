{"status":0,"data":{"cid":"xPkPpAWqSt","authorUid":"bd-71012466","authorUserName":"前***n","title":"自定义轮播","description":"修改别人作品 添加tooltip自定义轮播","latestVersion":1,"alwaysLatest":1,"createTime":"2019-08-03T07:01:21.000Z","lastUpdateTime":"2019-08-03T07:01:21.000Z","auth":2,"uid":"bd-71012466","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-03T07:01:21.000Z","code":"var mapName = 'china';\r\nvar data = [\r\n    {name:\"北京\",value:199},\r\n    {name:\"天津\",value:42},\r\n    {name:\"河北\",value:102},\r\n    {name:\"山西\",value:81},\r\n    {name:\"内蒙古\",value:47},\r\n    {name:\"辽宁\",value:67},\r\n    {name:\"吉林\",value:82},\r\n    {name:\"黑龙江\",value:123},\r\n    {name:\"上海\",value:24},\r\n    {name:\"江苏\",value:92},\r\n    {name:\"浙江\",value:114},\r\n    {name:\"安徽\",value:109},\r\n    {name:\"福建\",value:116},\r\n    {name:\"江西\",value:91},\r\n    {name:\"山东\",value:119},\r\n    {name:\"河南\",value:137},\r\n    {name:\"湖北\",value:116},\r\n    {name:\"湖南\",value:114},\r\n    {name:\"重庆\",value:91},\r\n    {name:\"四川\",value:125},\r\n    {name:\"贵州\",value:62},\r\n    {name:\"云南\",value:83},\r\n    {name:\"西藏\",value:9},\r\n    {name:\"陕西\",value:80},\r\n    {name:\"甘肃\",value:56},\r\n    {name:\"青海\",value:10},\r\n    {name:\"宁夏\",value:18},\r\n    {name:\"新疆\",value:180},\r\n    {name:\"广东\",value:123},\r\n    {name:\"广西\",value:59},\r\n    {name:\"海南\",value:14},\r\n];\r\n\r\nvar geoCoordMap = {};\r\nvar toolTipData = [\r\n    {name:\"北京\",value:[{name:\"科技人才总数\",value:95},{name:\"理科\",value:82}]},\r\n    {name:\"天津\",value:[{name:\"文科\",value:22},{name:\"理科\",value:20}]},\r\n    {name:\"河北\",value:[{name:\"文科\",value:60},{name:\"理科\",value:42}]},\r\n    {name:\"山西\",value:[{name:\"文科\",value:40},{name:\"理科\",value:41}]},\r\n    {name:\"内蒙古\",value:[{name:\"文科\",value:23},{name:\"理科\",value:24}]},\r\n    {name:\"辽宁\",value:[{name:\"文科\",value:39},{name:\"理科\",value:28}]},\r\n    {name:\"吉林\",value:[{name:\"文科\",value:41},{name:\"理科\",value:41}]},\r\n    {name:\"黑龙江\",value:[{name:\"文科\",value:35},{name:\"理科\",value:31}]},\r\n    {name:\"上海\",value:[{name:\"文科\",value:12},{name:\"理科\",value:12}]},\r\n    {name:\"江苏\",value:[{name:\"文科\",value:47},{name:\"理科\",value:45}]},\r\n    {name:\"浙江\",value:[{name:\"文科\",value:57},{name:\"理科\",value:57}]},\r\n    {name:\"安徽\",value:[{name:\"文科\",value:57},{name:\"理科\",value:52}]},\r\n    {name:\"福建\",value:[{name:\"文科\",value:59},{name:\"理科\",value:57}]},\r\n    {name:\"江西\",value:[{name:\"文科\",value:49},{name:\"理科\",value:42}]},\r\n    {name:\"山东\",value:[{name:\"文科\",value:67},{name:\"理科\",value:52}]},\r\n    {name:\"河南\",value:[{name:\"文科\",value:69},{name:\"理科\",value:68}]},\r\n    {name:\"湖北\",value:[{name:\"文科\",value:60},{name:\"理科\",value:56}]},\r\n    {name:\"湖南\",value:[{name:\"文科\",value:62},{name:\"理科\",value:52}]},\r\n    {name:\"重庆\",value:[{name:\"文科\",value:47},{name:\"理科\",value:44}]},\r\n    {name:\"四川\",value:[{name:\"文科\",value:65},{name:\"理科\",value:60}]},\r\n    {name:\"贵州\",value:[{name:\"文科\",value:32},{name:\"理科\",value:30}]},\r\n    {name:\"云南\",value:[{name:\"文科\",value:42},{name:\"理科\",value:41}]},\r\n    {name:\"西藏\",value:[{name:\"文科\",value:5},{name:\"理科\",value:4}]},\r\n    {name:\"陕西\",value:[{name:\"文科\",value:38},{name:\"理科\",value:42}]},\r\n    {name:\"甘肃\",value:[{name:\"文科\",value:28},{name:\"理科\",value:28}]},\r\n    {name:\"青海\",value:[{name:\"文科\",value:5},{name:\"理科\",value:5}]},\r\n    {name:\"宁夏\",value:[{name:\"文科\",value:10},{name:\"理科\",value:8}]},\r\n    {name:\"新疆\",value:[{name:\"文科\",value:36},{name:\"理科\",value:31}]},\r\n    {name:\"广东\",value:[{name:\"文科\",value:63},{name:\"理科\",value:60}]},\r\n    {name:\"广西\",value:[{name:\"文科\",value:29},{name:\"理科\",value:30}]},\r\n    {name:\"海南\",value:[{name:\"文科\",value:8},{name:\"理科\",value:6}]},\r\n];\r\n\r\n/*获取地图数据*/\r\nmyChart.showLoading();\r\nvar mapFeatures = echarts.getMap(mapName).geoJson.features;\r\nmyChart.hideLoading();\r\nmapFeatures.forEach(function(v) {\r\n    // 地区名称\r\n    var name = v.properties.name;\r\n    // 地区经纬度\r\n    geoCoordMap[name] = v.properties.cp;\r\n\r\n});\r\n\r\nconsole.log(data)\r\nconsole.log(toolTipData)\r\nvar max = 480,\r\n    min = 9; // todo\r\nvar maxSize4Pin = 100,\r\n    minSize4Pin = 20;\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value),\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\noption = {\r\n    tooltip: {\r\n        padding: 0,\r\n        enterable: true,\r\n        transitionDuration: 1,\r\n        textStyle: {\r\n            color: '#000',\r\n            decoration: 'none',\r\n        },\r\n        // position: function (point, params, dom, rect, size) {\r\n        //   return [point[0], point[1]];\r\n        // },\r\n        formatter: function(params) {\r\n            // console.log(params)\r\n            var tipHtml = '';\r\n            tipHtml = '<div style=\"width:280px;height:180px;background:rgba(22,80,158,0.8);border:1px solid rgba(7,166,255,0.7)\">'\r\n            +'<div style=\"width:100%;height:40px;line-height:40px;border-bottom:2px solid rgba(7,166,255,0.7);padding:0 20px\">'+'<i style=\"display:inline-block;width:8px;height:8px;background:#16d6ff;border-radius:40px;\">'+'</i>'\r\n            +'<span style=\"margin-left:10px;color:#fff;font-size:16px;\">'+params.name+'</span>'+'</div>'\r\n            +'<div style=\"padding:20px\">'\r\n            +'<p style=\"color:#fff;font-size:12px;\">'+'<i style=\"display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px\">'+'</i>'\r\n            +'单位总数：'+'<span style=\"color:#11ee7d;margin:0 6px;\">'+toolTipData.length+'</span>'+'个'+'</p>'\r\n            +'<p style=\"color:#fff;font-size:12px;\">'+'<i style=\"display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px\">'+'</i>'\r\n            +'总人数：'+'<span style=\"color:#f48225;margin:0 6px;\">'+toolTipData.length+'</span>'+'个'+'</p>'\r\n            +'<p style=\"color:#fff;font-size:12px;\">'+'<i style=\"display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px\">'+'</i>'\r\n            +'总人数：'+'<span style=\"color:#f4e925;margin:0 6px;\">'+toolTipData.length+'</span>'+'个'+'</p>'\r\n            +'<p style=\"color:#fff;font-size:12px;\">'+'<i style=\"display:inline-block;width:10px;height:10px;background:#16d6ff;border-radius:40px;margin:0 8px\">'+'</i>'\r\n            +'总人数：'+'<span style=\"color:#25f4f2;margin:0 6px;\">'+toolTipData.length+'</span>'+'个'+'</p>'\r\n            +'</div>'+'</div>';\r\n            setTimeout(function() {\r\n                tooltipCharts(params.name);\r\n            }, 10);\r\n            return tipHtml;\r\n        }\r\n\r\n    },\r\n\r\n    visualMap: {\r\n        show: true,\r\n        min: 0,\r\n        max: 200,\r\n        left: '10%',\r\n        top: 'bottom',\r\n        calculable: true,\r\n        seriesIndex: [1],\r\n        inRange: {\r\n            color: ['#04387b', '#467bc0'] // 蓝绿\r\n        }\r\n    },\r\n    geo: {\r\n        show: true,\r\n        map: mapName,\r\n        label: {\r\n            normal: {\r\n                show: false\r\n            },\r\n            emphasis: {\r\n                show: false,\r\n            }\r\n        },\r\n        roam: false,\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#023677',\r\n                borderColor: '#1180c7',\r\n            },\r\n            emphasis: {\r\n                areaColor: '#4499d0',\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n        name: '散点',\r\n        type: 'scatter',\r\n        coordinateSystem: 'geo',\r\n        data: convertData(data),\r\n        symbolSize: function(val) {\r\n            return val[2] / 10;\r\n        },\r\n        label: {\r\n            normal: {\r\n                formatter: '{b}',\r\n                position: 'right',\r\n                show: true\r\n            },\r\n            emphasis: {\r\n                show: true\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#fff'\r\n            }\r\n        }\r\n    },\r\n        {\r\n            type: 'map',\r\n            map: mapName,\r\n            geoIndex: 0,\r\n            aspectScale: 0.75, //长宽比\r\n            showLegendSymbol: false, // 存在legend时显示\r\n            label: {\r\n                normal: {\r\n                    show: true\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7'\r\n                }\r\n            },\r\n            animation: false,\r\n            data: data\r\n        },\r\n        {\r\n            name: '点',\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 6,\r\n        },\r\n        {\r\n            name: 'Top 5',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertData(data.sort(function(a, b) {\r\n                return b.value - a.value;\r\n            }).slice(0, 10)),\r\n            symbolSize: function(val) {\r\n                return val[2] / 10;\r\n            },\r\n            showEffectOn: 'render',\r\n            rippleEffect: {\r\n                brushType: 'stroke'\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    formatter: '{b}',\r\n                    position: 'left',\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'yellow',\r\n                    shadowBlur: 10,\r\n                    shadowColor: 'yellow'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        },\r\n\r\n    ]\r\n};\r\n\r\nvar index = 0; //播放所在下标\r\nvar showTip = setInterval(function() {\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 0,\r\n        dataIndex: index\r\n    });\r\n    index++;\r\n    if(index >= option.series[0].data.length) {\r\n        index = 0;\r\n    }\r\n},2000)\r\n\r\nmyChart.on('mouseover', function(params) {\r\n    console.log(params)\r\n    clearInterval(showTip);\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 0,\r\n        dataIndex: params.dataIndex,\r\n    });\r\n});\r\n\r\nmyChart.on('mouseout', function(params) {\r\n    showTip && clearInterval(showTip);\r\n    showTip = setInterval(function() {\r\n        myChart.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 0,\r\n            dataIndex: index\r\n        });\r\n        index++;\r\n        if(index >= option.series[0].data.length) {\r\n            index = 0;\r\n        }\r\n    }, 2000);\r\n});","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-71012466","theme":"","layout":"","viewCount":18709,"userName":"前***n","commentCount":10,"starCount":48,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPkPpAWqSt.png?v=1564815681196","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"前***n"}}