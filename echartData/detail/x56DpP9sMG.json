{"status":0,"data":{"cid":"x56DpP9sMG","authorUid":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","authorUserName":"y***i","title":"双向柱状图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-22T09:52:25.000Z","lastUpdateTime":"2020-10-22T09:52:25.000Z","auth":2,"uid":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-22T09:52:25.000Z","code":"/*\r\n双向柱状图\r\nwx:yangtaoxf\r\n\r\n参考以下文章和作品，感谢相关作者\r\nhttps://gallery.echartsjs.com/editor.html?c=xL00juR_Rr&v=1\r\n*/\r\n\r\nlet data = {\r\n    left: {\r\n        name: 'left',\r\n        data: [{\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '0'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '6:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '12:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '18:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '24:00'\r\n        }]\r\n    },\r\n    right: {\r\n        name: 'right',\r\n        data: [{\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '0'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '6:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '12:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '18:00'\r\n        }, {\r\n            \"溢出\": 22,\r\n            \"拥堵\": 30,\r\n            \"周期异常\": 10,\r\n            \"绿信比异常\": 8,\r\n            date: '24:00'\r\n        }]\r\n    }\r\n};\r\n\r\nlet legendData = new Set();\r\nlegendData.add(\"溢出\");\r\nlegendData.add(\"拥堵\");\r\nlegendData.add(\"周期异常\");\r\nlegendData.add(\"绿信比异常\");\r\n\r\n\r\nlet yAxisDataN = new Set();\r\nlet yAxisDataV = new Set();\r\n\r\n_.forEach(data, (d) => {\r\n\r\n    _.forEach(d.data, (item) => {\r\n\r\n        if (d.name == 'left') {\r\n            yAxisDataN.add(item.date);\r\n        }\r\n        if (d.name == 'right') {\r\n            yAxisDataV.add(item.date);\r\n        }\r\n        // yAxisData.add(item.label);\r\n    });\r\n});\r\n\r\nlet top = 60;\r\nlet bottom = 60;\r\n\r\nlegendData = [...legendData];\r\nyAxisDataN = [...yAxisDataN];\r\nyAxisDataV = [...yAxisDataV];\r\n\r\noption = {\r\n    tooltip: {\r\n        show: true,\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'shadow'\r\n        }\r\n    },\r\n    legend: {\r\n        icon: \"circle\",\r\n        left: 'center',\r\n        bottom: 24,\r\n\r\n        formatter: (name) => {\r\n\r\n\r\n            return '{a|' + name + '}'\r\n\r\n        },\r\n        textStyle: {\r\n            rich: {\r\n                a: {\r\n                    padding: [8, 15, 8, 15],\r\n                    align: 'center',\r\n                    //  backgroundColor: \"#238bf2\",\r\n\r\n                },\r\n                b: {\r\n                    padding: [8, 15, 8, 15],\r\n                    align: 'center',\r\n                    backgroundColor: \"#f9c807\"\r\n                }\r\n            }\r\n        },\r\n        data: legendData\r\n    },\r\n    grid: [{\r\n        left: '10%',\r\n        width: '40%',\r\n        containLabel: true,\r\n        bottom\r\n    }, {\r\n        left: '50%',\r\n        width: '0%',\r\n        top: top + 16\r\n    }, {\r\n        right: '10%',\r\n        width: '40%',\r\n        containLabel: true,\r\n        bottom\r\n    }].map(item => _.merge({\r\n        top\r\n    }, item)),\r\n    xAxis: [{\r\n        type: 'value',\r\n        inverse: true,\r\n        axisLabel: {\r\n            show: true\r\n        },\r\n        axisLine: {\r\n            show: true\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true\r\n        }\r\n    }, {\r\n        gridIndex: 1,\r\n        show: false\r\n    }, {\r\n        gridIndex: 2,\r\n        type: 'value',\r\n        axisLabel: {\r\n            show: true\r\n        },\r\n        axisLine: {\r\n            show: true\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true\r\n        }\r\n    }].map((item) => _.merge(item, {\r\n        max: 50,\r\n        axisLabel: {\r\n            color: '#949AA8',\r\n            margin: 8\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: '#E0E0E0',\r\n                type: 'dashed'\r\n            }\r\n        },\r\n    })),\r\n    yAxis: [{\r\n            name: '时间', //坐标轴名称\r\n            nameLocation: 'center',\r\n            nameGap: 55,\r\n\r\n            position: 'left',\r\n            axisLabel: {\r\n                color: '#6a82ab',\r\n                show: true,\r\n                textStyle: {\r\n                    color: '#6a82ab'\r\n                }\r\n            },\r\n            axisLine: {\r\n                show: true,\r\n                onZero: false,\r\n                lineStyle: {\r\n                    color: '#6a82ab'\r\n                },\r\n\r\n            },\r\n\r\n\r\n            type: 'category',\r\n            inverse: false,\r\n\r\n            axisTick: {\r\n                show: false\r\n            },\r\n\r\n            nameRotate: 90,\r\n\r\n            data: yAxisDataN\r\n        },\r\n        {\r\n            gridIndex: 1,\r\n            position: 'center',\r\n            type: 'category',\r\n            axisLabel: {\r\n                show: false\r\n\r\n            },\r\n            axisLine: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            gridIndex: 2,\r\n            position: 'right',\r\n            axisLabel: {\r\n                show: false,\r\n\r\n            },\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            type: 'category',\r\n            inverse: false,\r\n\r\n            axisTick: {\r\n                show: false\r\n            },\r\n\r\n            data: yAxisDataV\r\n        }\r\n    ],\r\n    series: [{\r\n            name: '溢出',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'left'\r\n            },\r\n            itemStyle: {\r\n                color: '#63bccf',\r\n                barBorderRadius: [4, 0, 0, 4]\r\n            },\r\n            data: _.map(_.get(data, 'left.data'), d => d.溢出)\r\n        },\r\n        {\r\n            name: '拥堵',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'left'\r\n            },\r\n            itemStyle: {\r\n                color: '#81dd91',\r\n                barBorderRadius: [4, 0, 0, 4]\r\n            },\r\n            data: _.map(_.get(data, 'left.data'), d => d.拥堵)\r\n        },\r\n        {\r\n            name: '周期异常',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'left'\r\n            },\r\n            itemStyle: {\r\n                color: '#d65f73',\r\n                barBorderRadius: [4, 0, 0, 4]\r\n            },\r\n            data: _.map(_.get(data, 'left.data'), d => d.周期异常)\r\n        },\r\n        {\r\n            name: '绿信比异常',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'left'\r\n            },\r\n            itemStyle: {\r\n                color: '#6b93c9',\r\n                barBorderRadius: [4, 0, 0, 4]\r\n            },\r\n            data: _.map(_.get(data, 'left.data'), d => d.绿信比异常)\r\n        },\r\n        {\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            name: '溢出',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'right'\r\n            },\r\n            itemStyle: {\r\n                color: '#bcba7d',\r\n                barBorderRadius: [0, 4, 4, 0]\r\n            },\r\n            data: _.map(_.get(data, 'right.data'), d => d.溢出)\r\n        },\r\n        {\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            name: '拥堵',\r\n            label: {\r\n                color: '#9c9c9c',\r\n                position: 'right'\r\n            },\r\n            itemStyle: {\r\n                color: '#3dbdc8',\r\n                barBorderRadius: [0, 4, 4, 0]\r\n            },\r\n            data: _.map(_.get(data, 'right.data'), d => d.拥堵)\r\n        },\r\n        {\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            name: '周期异常',\r\n            label: {\r\n                color: '#9c9c9c',\r\n                position: 'right'\r\n            },\r\n            itemStyle: {\r\n                color: '#d8ac26',\r\n                barBorderRadius: [0, 4, 4, 0]\r\n            },\r\n            data: _.map(_.get(data, 'right.data'), d => d.周期异常)\r\n        },\r\n        {\r\n            xAxisIndex: 2,\r\n            yAxisIndex: 2,\r\n            name: '绿信比异常',\r\n            label: {\r\n                color: '#767676',\r\n                position: 'right'\r\n            },\r\n            itemStyle: {\r\n                color: '#4894ea',\r\n                barBorderRadius: [4, 0, 0, 4]\r\n            },\r\n            data: _.map(_.get(data, 'right.data'), d => d.绿信比异常)\r\n        },\r\n    ].map(item => _.merge(item, {\r\n        type: 'bar',\r\n        barWidth: 11,\r\n        label: {\r\n            show: true,\r\n            fontFamily: 'Rubik-Medium',\r\n            fontSize: 14,\r\n            distance: 10\r\n        }\r\n    }))\r\n};","html":"","externalScripts":"https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.15/lodash.js","updaterUID":"obd-oEn_ZtlLJ8NNxQ4jo7no6Srzn2K6_4N","theme":"","layout":"","viewCount":1145,"userName":"y***i","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x56DpP9sMG.png?v=1603360346001","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"y***i"}}