{"status":0,"data":{"cid":"xgDFrJVm2D","authorUid":"obd-oD0FFHJpMhQm98f08NmRJwAGWUn5I1x","authorUserName":"心***7","title":"区县占比排行榜","description":"通过柱状图实现排行榜，增加背景色，显示当前比例进度条","latestVersion":8,"alwaysLatest":1,"createTime":"2020-11-13T09:03:49.000Z","lastUpdateTime":"2021-10-25T08:05:31.000Z","auth":1,"uid":"obd-oD0FFHJpMhQm98f08NmRJwAGWUn5I1x","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.9.0","versionCreateTime":"2021-10-25T08:05:31.000Z","code":"let dataArr = [\n          { name: \"天府新区\", value: 100 },\n          { name: \"高新区\", value: 99 },\n          { name: \"龙泉驿区\", value: 98.5 },\n          { name: \"锦江区\", value: 95 },\n          { name: \"青羊区\", value: 84 },\n          { name: \"金牛区\", value: 57 },\n          { name: \"武侯区\", value: 35 },\n          { name: \"成华区\", value: 25 },\n          { name: \"青白江区\", value: 20 },\n          { name: \"东部新区\", value: 20 },\n          { name: \"新都区\", value: 15 },\n          { name: \"温江区\", value: 13 },\n          { name: \"双流区\", value: 10 },\n          { name: \"郫都区\", value: 8 },\n          { name: \"彭州市\", value: 5 },\n          { name: \"简阳市\", value: 3 },\n          { name: \"都江堰市\", value: 1 }\n        ]\nlet dataAxis = dataArr.map(obj => obj.name);\nlet TData = dataArr.map(item => Number(item.value));\nlet max = Math.max(...TData);\nlet maxArr = new Array(TData.length).fill(max);\n\noption = {\n    backgroundColor: '#080b30',\n    title: {\n        text: '区县占比排行榜',\n        textStyle: {\n            align: 'center',\n            color: '#fff',\n            fontSize: 20,\n        },\n        top: '3%',\n        left: 'center'\n    },\n    grid: {\n          left: '5%',\n          right: '3%',\n          top: '10%',\n          bottom: 25,\n          containLabel: true\n        },\n    xAxis: {\n          show: false,\n          xAxisIndex: 1,\n          splitNumber: 3,\n          type: \"value\",\n          nameGap: 30,\n          axisTick: {\n            show: true\n          },\n          axisLabel: {\n            show: true,\n            textStyle: {\n              color: \"#fff\",\n              fontSize: 16\n            }\n          },\n          min: function(value) {\n            return value.min > 2 ? value.min - 2 : value.min;\n          },\n          splitLine: {\n            show: false\n          },\n          axisLine: {\n            lineStyle: {\n              color: \"rgba(58,78,105,.8)\"\n            }\n          }\n    },\n    yAxis: [{\n          type: \"category\",\n          data: dataAxis,\n          axisTick: {\n            show: false\n          },\n          inverse: true,\n          z: 10,\n          axisLabel: {\n            show: true,\n            color: \"#fff\",\n            fontSize: dataAxis.length > 10 ? 18 : 22,\n            interval: 0,\n            formatter: function(value) {\n              var idx = dataAxis.indexOf(value);\n              return (\n                \"{label|\" +\n                value +\n                \"}\" +\n                \"{sort\" +\n                (idx < 3 ? idx : \"Default\") +\n                \"|\" +\n                (idx + 1) +\n                \"}\"\n              );\n            },\n            rich: {\n              label: {\n                color: \"#fff\",\n                fontSize: dataAxis.length > 10 ? 18 : 22,\n                padding: [0, 10, 2, 0],\n                fontWeigth: \"normal\"\n              },\n              sort0: {\n                color: \"#fff\",\n                fontSize: 16,\n                width: 20,\n                height: 20,\n                textShadowColor: \"rgba(0,0,0,.4)\",\n                textShadowBlur: 2,\n                textShadowOffsetX: -1,\n                textShadowOffsetY: 1,\n                shadowColor: \"rgba(255,102,31,.26)\",\n                verticalAlign: \"middle\",\n                shadowBlur: 8,\n                shadowOffsetY: 4,\n                fontStyle: \"italic\",\n                align: \"center\",\n                backgroundColor: \"#ff562e\"\n              },\n              sort1: {\n                color: \"#fff\",\n                fontSize: 16,\n                width: 20,\n                height: 20,\n                textShadowColor: \"rgba(0,0,0,.4)\",\n                fontStyle: \"italic\",\n                textShadowBlur: 2,\n                textShadowOffsetX: -1,\n                textShadowOffsetY: 1,\n                shadowColor: \"rgba(255,171,41,.26)\",\n                verticalAlign: \"middle\",\n                shadowBlur: 8,\n                shadowOffsetY: 4,\n                align: \"center\",\n                backgroundColor: \"#ff900e\"\n              },\n              sort2: {\n                color: \"#fff\",\n                fontSize: 16,\n                width: 20,\n                height: 20,\n                fontStyle: \"italic\",\n                textShadowColor: \"rgba(0,0,0,.4)\",\n                textShadowBlur: 2,\n                textShadowOffsetX: -1,\n                textShadowOffsetY: 1,\n                shadowColor: \"rgba(11,175,237,.26)\",\n                verticalAlign: \"middle\",\n                shadowBlur: 8,\n                shadowOffsetY: 4,\n                align: \"center\",\n                backgroundColor: \"#0599de\"\n              },\n              sortDefault: {\n                color: \"#fff\",\n                fontSize: 16,\n                width: 17,\n                padding: [0, 3, 0, 0],\n                height: 20,\n                fontStyle: \"italic\",\n                textShadowColor: \"rgba(0,0,0,.4)\",\n                textShadowBlur: 2,\n                textShadowOffsetX: -1,\n                textShadowOffsetY: 1,\n                shadowColor: \"rgba(15,191,129,.26)\",\n                verticalAlign: \"middle\",\n                shadowBlur: 8,\n                shadowOffsetY: 4,\n                align: \"center\",\n                backgroundColor: \"#0bbe63\"\n              }\n            }\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              color: \"#e4e4e4\"\n            }\n          }\n        },\n    {\n      position: 'left',\n      offset: 3,\n      axisLine:{\n      lineStyle:{\n        color: \"#fc8452\",\n        width: 2\n      }\n      }\n    },\n    {\n      position: 'left',\n      offset: 6,\n      axisLine: {\n      lineStyle:{\n        color: \"#fc8452\",\n        width: 2\n      }}\n    }\n    ],\n    color: [\"#ff562e\", \"#ff900e\", \"#0599de\", \"#0bbe63\"],    \n    series: [\n          {\n            type: \"bar\",\n            barGap: \"-100%\",\n            barWidth: 6,\n            z: 0,\n            label: {\n              normal: {\n                show: true,\n                position: \"right\",\n                formatter: function(params) {\n                  var idy = params.dataIndex > 3 ? 3 : params.dataIndex;\n                  return (\n                    \"{color\" + idy + \"|\" + TData[params.dataIndex] +\n                    \"}{u\" + idy + \"|\" + \"%}\"\n                  );\n                },\n                rich: {\n                  color0: {\n                    color: \"#ff562e\",\n                    fontSize: 24,\n                    verticalAlign: \"bottom\"\n                  },\n                  color1: {\n                    color: \"#ff900e\",\n                    fontSize: 24,\n                    verticalAlign: \"bottom\"\n                  },\n                  color2: {\n                    color: \"#0599de\",\n                    fontSize: 24,\n                    verticalAlign: \"bottom\"\n                  },\n                  color3: {\n                    color: \"#0bbe63\",\n                    fontSize: 24,\n                    verticalAlign: \"bottom\"\n                  },\n                  u0: {\n                    fontSize: 14,\n                    color: \"#ff562e\",\n                    padding: 2,\n                    verticalAlign: \"bottom\"\n                  },\n                  u1: {\n                    color: \"#ff900e\",\n                    fontSize: 14,\n                    padding: 2,\n                    verticalAlign: \"bottom\"\n                  },\n                  u2: {\n                    color: \"#0599de\",\n                    fontSize: 14,\n                    padding: 2,\n                    verticalAlign: \"bottom\"\n                  },\n                  u3: {\n                    color: \"#0bbe63\",\n                    fontSize: 14,\n                    padding: 2,\n                    verticalAlign: \"bottom\"\n                  }\n                }\n              }\n            },\n            tooltip: {\n              show: false\n            },\n            itemStyle: {\n              normal: {\n                barBorderRadius: 5,\n                color: \"#e1e7eb\"\n              }\n            },\n            data: maxArr\n          },\n          {\n            type: \"bar\",\n            barGap: \"-100%\",\n            barWidth: 6,\n            label: {\n              normal: {\n                show: false\n              },\n              emphasis: {\n                show: false\n              }\n            },\n            z: 8,\n            itemStyle: {\n              barBorderRadius: 5,\n              shadowColor: \"rgba(0, 0, 0, 0.1)\",\n              shadowBlur: 8,\n              shadowOffsetY: 8,\n              color: params => {\n                // build a color map as your need.\n                //定义一个颜色集合\n                var colorList = [\"#ff7a0e\", \"#ffcb48\", \"#12c9fe\", \"#13c1a3\"];\n                var colorList2 = [\"#ff562e\", \"#ff900e\", \"#0599de\", \"#0bbe63\"];\n                //对每个bar显示一种颜色\n                var idx = params.dataIndex < 3 ? params.dataIndex : 3;\n                var colorS = colorList[idx];\n                var colorS2 = colorList2[idx];\n                return new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                  { offset: 0, color: colorS },\n                  { offset: 1, color: colorS2 }\n                ]);\n              },\n              emphasis: {\n                barBorderRadius: 5,\n                color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [\n                  { offset: 1, color: \"#00ff90\" },\n                  { offset: 0, color: \"#0084f3\" }\n                ])\n              }\n            },\n            data: TData\n          }\n        ]\n};","html":"","externalScripts":"","updaterUID":"bd-3964103758","theme":"","layout":"","viewCount":4095,"userName":"心***7","commentCount":0,"starCount":24,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgDFrJVm2D.png?v=1635149131926","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title"],"customTags":["color"],"updaterUserName":"e***s"}}