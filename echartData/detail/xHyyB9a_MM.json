{"status":0,"data":{"cid":"xHyyB9a_MM","authorUid":"bd-3121097083","authorUserName":"wenhui7100","title":"测试数据","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2017-12-21T05:44:22.000Z","lastUpdateTime":"2017-12-21T05:44:22.000Z","auth":2,"uid":"bd-3121097083","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-21T07:12:38.000Z","code":"var geoCoordMap = {\n    '上海': [121.4648, 31.2891],\n    '尼日利亚': [-4.388361, 11.186148],\n    '美国洛杉矶': [-118.24311, 34.052713],\n    '香港邦泰': [114.195466, 22.282751],\n    '美国芝加哥': [-87.801833, 41.870975],\n    '加纳库马西': [-4.62829, 7.72415],\n    '英国曼彻斯特': [-1.657222, 51.886863],\n    '德国汉堡': [10.01959, 54.38474],\n    '哈萨克斯坦阿拉木图': [45.326912, 41.101891],\n    '俄罗斯伊尔库茨克': [89.116876, 67.757906],\n    '巴西': [-48.678945, -10.493623],\n    '埃及达米埃塔': [31.815593, 31.418032],\n    '西班牙巴塞罗纳': [2.175129, 41.385064],\n    '柬埔寨金边': [104.88659, 11.545469],\n    '意大利米兰': [9.189948, 45.46623],\n    '乌拉圭蒙得维的亚': [-56.162231, -34.901113],\n    '莫桑比克马普托': [32.608571, -25.893473],\n    '阿尔及利亚阿尔及尔': [3.054275, 36.753027],\n    '阿联酋迪拜': [55.269441, 25.204514],\n    '匈牙利布达佩斯': [17.108519, 48.179162],\n    '澳大利亚悉尼': [150.993137, -33.675509],\n    '美国加州': [-121.910642, 41.38028],\n    '澳大利亚墨尔本': [144.999416, -37.781726],\n    '墨西哥': [-99.094092, 19.365711],\n    '加拿大温哥华': [-123.023921, 49.311753]\n};\nvar BJData = [\n    [{\n        name: '尼日利亚',\n        value: 9100\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '美国洛杉矶',\n        value: 2370\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '香港邦泰',\n        value: 3130\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '美国芝加哥',\n        value: 2350\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '加纳库马西',\n        value: 5120\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '英国曼彻斯特',\n        value: 3110\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '德国汉堡',\n        value: 6280\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '哈萨克斯坦阿拉木图',\n        value: 7255\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '俄罗斯伊尔库茨克',\n        value: 8125\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '巴西',\n        value: 13590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '埃及达米埃塔',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '西班牙巴塞罗纳',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '柬埔寨金边',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '意大利米兰',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '乌拉圭蒙得维的亚',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '莫桑比克马普托',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '阿尔及利亚阿尔及尔',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '阿联酋迪拜',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '匈牙利布达佩斯',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '澳大利亚悉尼',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '美国加州',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '澳大利亚墨尔本',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '墨西哥',\n        value: 3590\n    }, {\n        name: '上海'\n    }],\n    [{\n        name: '加拿大温哥华',\n        value: 3590\n    }, {\n        name: '上海'\n    }]\n];\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var dataItem = data[i];\n        var fromCoord = geoCoordMap[dataItem[0].name];\n        var toCoord = geoCoordMap[dataItem[1].name];\n        if (fromCoord && toCoord) {\n            res.push([{\n                coord: fromCoord,\n                value: dataItem[0].value,\n                fromName: dataItem[1].name,\n                toName: dataItem[0].name,\n            }, {\n                coord: toCoord,\n                value: dataItem[0].value,\n                fromName: dataItem[1].name,\n                toName: dataItem[0].name,\n            }]);\n        }\n    }\n    return res;\n};\n\nvar color = ['#fff', '#ffa022', '#46bee9'];\nvar series = [];\n[\n    ['上海', BJData]\n].forEach(function(item, i) {\n    console.log(item)\n    series.push(\n        {\n            name: item[0],\n            type: 'lines',\n            zlevel: 1,\n            effect: {\n                show: true,\n                period: 6,\n                trailLength: 0,\n                symbol: 'image://',\n                symbolSize: 15\n            },\n            label: {\n                emphasis: {\n                    show: true,\n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: color[i],\n                    width: 2,\n                    opacity: 0.8,\n                    curveness: 0.2\n                },\n                emphasis:{\n                    color: color[i],\n                    shadowColor: 'rgba(0, 0, 0, 0.5)',\n                    shadowBlur: 10,\n                    width: 3\n                }\n            },\n            data: convertData(item[1])\n        },\n        {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: { //涟漪特效\n                period: 4, //动画时间，值越小速度越快\n                brushType: 'stroke', //波纹绘制方式 stroke, fill\n                scale: 4, //波纹圆环最大限制，值越大波纹越大\n                trailLength: 0,\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right', //显示位置\n                    offset: [5, 0], //偏移设置\n                    formatter: '{b}' //圆环显示文字\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: 'circle',\n            symbolSize: function(val) {\n                console.log(val)\n                return 4 + val[2] / 1000; //圆环大小\n            },\n            itemStyle: {\n                normal: {\n                    show: false,\n                    color: '#f00'\n                }\n            },\n            data: item[1].map(function(dataItem) {\n                return {\n                    name: dataItem[0].name,\n                    value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])\n                };\n            }),\n        },\n        //被攻击点\n        {\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: {\n                period: 4,\n                brushType: 'stroke',\n                scale: 4\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right',\n                    //offset:[5, 0],\n                    color: '#00ffff',\n                    formatter: '{b}',\n                    textStyle: {\n                        color: \"#00ffff\"\n                    }\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            symbol: 'pin',\n            symbolSize: 30,\n            itemStyle: {\n                normal: {\n                    show: true,\n                    color: '#9966cc'\n                }\n            },\n            data: [{\n                name: item[0],\n                value: geoCoordMap[item[0]].concat([100]),\n            }],\n        }\n    );\n});\n\noption = {\n    backgroundColor: '#404a59',\n    title: {\n        text: '上海',\n        left: 'center',\n        textStyle: {\n            color: '#fff',\n            fontSize: 24\n        },\n        padding: [20, 20, 20, 20]\n    },\n    tooltip: {\n        trigger: 'item',\n        backgroundColor: 'rgba(12, 204, 104, 0.92)',\n        borderColor: '#FFFFCC',\n        showDelay: 0,\n        hideDelay: 0,\n        enterable: true,\n        transitionDuration: 0,\n        extraCssText: 'z-index:100',\n        formatter: function(params, ticket, callback) {\n            //根据业务自己拓展要显示的内容\n            console.log(params)\n            var res = \"\";\n            var name = params.data.toName;\n            var fname = params.data.fromName;\n            var value = params.value;\n            res = \"<span style='color:#fff;'>\" + name+'>'+ fname + \"</span><br/>数据：\" + value;\n            return res;\n        }\n    },\n    visualMap: { //图例值控制\n        min: 0,\n        max: 10000,\n        calculable: true,\n        color: ['#ff3333', 'orange', 'yellow', 'lime', 'aqua'],\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    geo: {\n        map: 'world',\n        label: {\n            emphasis: {\n                show: false\n            }\n        },\n        roam: true, //是否允许缩放\n        layoutCenter: ['50%', '50%'], //地图位置\n        layoutSize: \"140%\",\n        itemStyle: {\n            normal: {\n                color: 'rgba(51, 69, 89, .5)', //地图背景色\n                borderColor: 'rgba(100,149,237,1)' //省市边界线\n            },\n            emphasis: {\n                color: 'rgba(37, 43, 61, .5)' //悬浮背景\n            }\n        }\n    },\n\n    series: series\n};\n\nvar counts = option.series[0].data.length; //获取所有闪动圆环数量\nvar dataIndex = 0;\n//让圆环的提示框自动触发轮播显示\nfunction autoHoverTip() {\n    for (var i = 0; i < counts; i++) {\n        (function(i) {\n            ts = setTimeout(function() {\n                myChart.dispatchAction({\n                    type: 'showTip',\n                    seriesIndex: 1,\n                    dataIndex: i\n                });\n            }, 5000 * i);\n        })(i);\n    }\n}\n\nsetTimeout(function() {\n    // autoHoverTip();\n    // tv = setInterval(autoHoverTip, counts * 1000);\n}, 500);","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-3121097083","theme":"","layout":"","viewCount":5422,"userName":"wenhui7100","commentCount":0,"starCount":13,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHyyB9a_MM.png?v=1513840358328","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"wenhui7100"}}