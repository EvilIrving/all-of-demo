{"status":0,"data":{"cid":"xaMeWdHhnz","authorUid":"obd-oFbGlmoGCLoo1gpjeBm0URutX99Iq59","authorUserName":"软***蚊","title":"项目各阶段进度甘特图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-04-27T05:05:27.000Z","lastUpdateTime":"2021-04-27T05:05:27.000Z","auth":2,"uid":"obd-oFbGlmoGCLoo1gpjeBm0URutX99Iq59","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.0","versionCreateTime":"2021-04-27T05:05:27.000Z","code":"xmjdRqDatas = {\n    items: [\n        {\n            xM_CODE: 'NS0060C06',\n            xM_NAME: '长沙惠科Trimmer',\n            xmjdDto: [\n                {\n                    jdjH_ZXJD: 100,\n                    jdjH_XMJD_NAME: '设计阶段',\n                    jdjH_XMJD_CODE: '2',\n                    jdjH_KSRQ: '2020-12-23',\n                    jdjH_JSRQ: '2021-01-30',\n                },\n                {\n                    jdjH_ZXJD: 100,\n                    jdjH_XMJD_NAME: '采购备料',\n                    jdjH_XMJD_CODE: '3',\n                    jdjH_KSRQ: '2021-01-15',\n                    jdjH_JSRQ: '2021-03-15',\n                },\n                {\n                    jdjH_ZXJD: 100,\n                    jdjH_XMJD_NAME: '制造组装',\n                    jdjH_XMJD_CODE: '4',\n                    jdjH_KSRQ: '2021-03-10',\n                    jdjH_JSRQ: '2021-04-05',\n                },\n                {\n                    jdjH_ZXJD: 94,\n                    jdjH_XMJD_NAME: '研发调试',\n                    jdjH_XMJD_CODE: '5',\n                    jdjH_KSRQ: '2021-04-06',\n                    jdjH_JSRQ: '2021-04-29',\n                },\n                {\n                    jdjH_ZXJD: 0,\n                    jdjH_XMJD_NAME: 'IAT及改善',\n                    jdjH_XMJD_CODE: '6',\n                    jdjH_KSRQ: '2021-04-30',\n                    jdjH_JSRQ: '2021-05-03',\n                },\n            ],\n        },\n    ],\n};\n\nfunction getXmjdRqInfo(xmName, jdName) {\n    const xm = xmjdRqDatas.items.find((f) => f.xM_CODE === xmName);\n    let jd;\n    if (xm) {\n        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === jdName);\n    }\n    if (jd) {\n        return jd.jdjH_KSRQ + '~' + jd.jdjH_JSRQ + '（' + jd.jdjH_ZXJD + '%）';\n    } else {\n        return '';\n    }\n}\n\noption = {\n    backgroundColor: '#0B173D',\n    grid: { left: '5%', right: '10%', bottom: '10%', top: '5%', containLabel: true },\n    tooltip: {\n        trigger: 'axis',\n        position: ['50%', '50%'],\n        textStyle: { fontSize: 14, align: 'left' },\n        formatter: function (params) {\n            const len = params.length;\n            let tip = len ? params[0].name : '';\n            for (let i = 0; i < params.length; i++) {\n                const ele = params[i];\n                if (ele.seriesName.includes('_START')) {\n                    continue;\n                }\n                const info = getXmjdRqInfo(params[0].name, ele.seriesName);\n                if (!info) {\n                    continue;\n                }\n                tip += '</br>' + ele.marker + ele.seriesName + '：' + getXmjdRqInfo(params[0].name, ele.seriesName);\n            }\n            return tip;\n        },\n    },\n    xAxis: { type: 'time', axisLabel: { color: 'rgba(255,255,255,0.7)', fontSize: 14 } },\n    yAxis: { axisLabel: { color: 'turquoise', fontSize: 14 }, data: ['NS0060C06'] },\n    series: [\n        {\n            name: '设计阶段',\n            type: 'bar',\n            stack: '设计阶段',\n            label: {\n                show: true,\n                fontSize: 14,\n                position: 'right',\n                color: 'turquoise',\n                formatter: function (params) {\n                    const xm = xmjdRqDatas.items[params.dataIndex];\n                    let jd;\n                    if (xm) {\n                        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === params.seriesName);\n                    }\n                    if (jd) {\n                        return params.seriesName + '：' + (jd.jdjH_ZXJD ? jd.jdjH_ZXJD : 0) + '%';\n                    }\n                    return '';\n                },\n            },\n            itemStyle: { borderColor: '#0B173D', borderWidth: 2 },\n            zlevel: -1,\n            data: ['2021-01-30T00:00:00.000Z'],\n        },\n        {\n            name: '设计阶段_START',\n            type: 'bar',\n            stack: '设计阶段',\n            itemStyle: { color: '#0B173D' },\n            zlevel: -1,\n            data: ['2020-12-23T00:00:00.000Z'],\n        },\n        {\n            name: '采购备料',\n            type: 'bar',\n            stack: '采购备料',\n            label: {\n                show: true,\n                fontSize: 14,\n                position: 'right',\n                color: 'turquoise',\n                formatter: function (params) {\n                    const xm = xmjdRqDatas.items[params.dataIndex];\n                    let jd;\n                    if (xm) {\n                        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === params.seriesName);\n                    }\n                    if (jd) {\n                        return params.seriesName + '：' + (jd.jdjH_ZXJD ? jd.jdjH_ZXJD : 0) + '%';\n                    }\n                    return '';\n                },\n            },\n            itemStyle: { borderColor: '#0B173D', borderWidth: 2 },\n            zlevel: -1,\n            data: ['2021-03-15T00:00:00.000Z'],\n        },\n        {\n            name: '采购备料_START',\n            type: 'bar',\n            stack: '采购备料',\n            itemStyle: { color: '#0B173D' },\n            zlevel: -1,\n            data: ['2021-01-15T00:00:00.000Z'],\n        },\n        {\n            name: '制造组装',\n            type: 'bar',\n            stack: '制造组装',\n            label: {\n                show: true,\n                fontSize: 14,\n                position: 'right',\n                color: 'turquoise',\n                formatter: function (params) {\n                    const xm = xmjdRqDatas.items[params.dataIndex];\n                    let jd;\n                    if (xm) {\n                        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === params.seriesName);\n                    }\n                    if (jd) {\n                        return params.seriesName + '：' + (jd.jdjH_ZXJD ? jd.jdjH_ZXJD : 0) + '%';\n                    }\n                    return '';\n                },\n            },\n            itemStyle: { borderColor: '#0B173D', borderWidth: 2 },\n            zlevel: -1,\n            data: ['2021-04-05T00:00:00.000Z'],\n        },\n        {\n            name: '制造组装_START',\n            type: 'bar',\n            stack: '制造组装',\n            itemStyle: { color: '#0B173D' },\n            zlevel: -1,\n            data: ['2021-03-10T00:00:00.000Z'],\n        },\n        {\n            name: '研发调试',\n            type: 'bar',\n            stack: '研发调试',\n            label: {\n                show: true,\n                fontSize: 14,\n                position: 'right',\n                color: 'turquoise',\n                formatter: function (params) {\n                    const xm = xmjdRqDatas.items[params.dataIndex];\n                    let jd;\n                    if (xm) {\n                        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === params.seriesName);\n                    }\n                    if (jd) {\n                        return params.seriesName + '：' + (jd.jdjH_ZXJD ? jd.jdjH_ZXJD : 0) + '%';\n                    }\n                    return '';\n                },\n            },\n            itemStyle: { borderColor: '#0B173D', borderWidth: 2 },\n            zlevel: -1,\n            data: ['2021-04-29T00:00:00.000Z'],\n        },\n        {\n            name: '研发调试_START',\n            type: 'bar',\n            stack: '研发调试',\n            itemStyle: { color: '#0B173D' },\n            zlevel: -1,\n            data: ['2021-04-06T00:00:00.000Z'],\n        },\n        {\n            name: 'IAT及改善',\n            type: 'bar',\n            stack: 'IAT及改善',\n            label: {\n                show: true,\n                fontSize: 14,\n                position: 'right',\n                color: 'turquoise',\n                formatter: function (params) {\n                    const xm = xmjdRqDatas.items[params.dataIndex];\n                    let jd;\n                    if (xm) {\n                        jd = xm.xmjdDto.find((f) => f.jdjH_XMJD_NAME === params.seriesName);\n                    }\n                    if (jd) {\n                        return params.seriesName + '：' + (jd.jdjH_ZXJD ? jd.jdjH_ZXJD : 0) + '%';\n                    }\n                    return '';\n                },\n            },\n            itemStyle: { borderColor: '#0B173D', borderWidth: 2 },\n            zlevel: -1,\n            data: ['2021-05-03T00:00:00.000Z'],\n        },\n        {\n            name: 'IAT及改善_START',\n            type: 'bar',\n            stack: 'IAT及改善',\n            itemStyle: { color: '#0B173D' },\n            zlevel: -1,\n            data: ['2021-04-30T00:00:00.000Z'],\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-oFbGlmoGCLoo1gpjeBm0URutX99Iq59","theme":"","layout":"","viewCount":0,"userName":"软***蚊","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xaMeWdHhnz.png?v=1619499927684","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"软***蚊"}}