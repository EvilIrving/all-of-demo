{"status":0,"data":{"cid":"xP6PSjy3gN","authorUid":"obd-oM18-ur5PzFwQ_ZBBQ3ccR3qNdcL52K","authorUserName":"丨***龍","title":"舟山市","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-06T08:51:17.000Z","lastUpdateTime":"2021-08-06T08:51:17.000Z","auth":2,"uid":"obd-oM18-ur5PzFwQ_ZBBQ3ccR3qNdcL52K","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-06T08:51:17.000Z","code":"\nvar zsmap = \"/asset/get/s/data-1628238859025-Dfx8_XEhz.json\";\nvar ptmap = \"/asset/get/s/data-1628239424841-XcII47BMz.json\"; // 普陀区\nvar dsmap = \"/asset/get/s/data-1628239333323-JEugF7A7B.json\"; //岱山\nvar dhmap = \"/asset/get/s/data-1628239422412-isRkowV1r.json\"; // 定海\nvar ssmap = \"/asset/get/s/data-1628239193577-2Cl3a5ezO.json\";// 嵊泗\n\nvar mapname = zsmap\nvar mapJson = [{\n        name: \"嵊泗县\",\n        json: ssmap\n    },\n    {\n        name: \"岱山县\",\n        json: dsmap\n    },\n    {\n        name: \"定海区\",\n        json: dhmap\n    },\n    {\n        name: \"普陀区\",\n        json: ptmap\n    },\n]\n\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\nmyChart.showLoading();\nlet index = -1;\nvar timer = setInterval(function() {\n    // 隐藏提示框\n    myChart.dispatchAction({\n        type: 'hideTip',\n        seriesIndex: 0,\n        dataIndex: index\n    });\n    // 显示提示框\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: index + 1\n    });\n    // 取消高亮指定的数据图形\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: index\n    });\n    // 高亮指定的数据图形\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: index + 1\n    });\n    index++;\n    if (index > 13) {\n        index = -1;\n    }\n}, 2000);\n\n\nmyChart.on('mousemove', function(e) {\n    clearInterval(timer);\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0\n    });\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    });\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    });\n}); //---------------------------------------------鼠标移入静止播放\nmyChart.on('mouseout', function(e) {\n    clearInterval(timer);\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 0,\n        dataIndex: e.dataIndex\n    }); //鼠标移出后先把上次的高亮取消\n    timer = setInterval(function() {\n        // 隐藏提示框\n        myChart.dispatchAction({\n            type: 'hideTip',\n            seriesIndex: 0,\n            dataIndex: index\n        });\n        // 显示提示框\n        myChart.dispatchAction({\n            type: 'showTip',\n            seriesIndex: 0,\n            dataIndex: index + 1\n        });\n        // 取消高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'downplay',\n            seriesIndex: 0,\n            dataIndex: index\n        });\n        // 高亮指定的数据图形\n        myChart.dispatchAction({\n            type: 'highlight',\n            seriesIndex: 0,\n            dataIndex: index + 1\n        });\n        index++;\n        if (index > 13) {\n            index = -1;\n        }\n    }, 2000);\n});\nmyChart.on('click', function(e) {\n    console.log(e)\n    var chooseName = mapJson.filter(item => {\n        return item.name == e.name\n    })\n    console.log(chooseName)\n    mapname = chooseName[0].json\n\n    console.log(mapname, '选择地图')\n\n    mapDate = []\n    $('<div class=\"back\">返回舟山市</div>').appendTo(\n        $('#chart-panel')\n    );\n\n    $('.back').css({\n        'position': 'absolute',\n        'left': '17px',\n        'top': '25px',\n        'color': 'rgb(222,222,222)',\n        'font-size': '15px',\n        cursor: 'pointer',\n        'z-index': '100'\n    })\n    $('.back').click(function() {\n        mapname = zsmap\n        mapDate = [{\n                name: '嵊泗县',\n                value: []\n            },\n            {\n                name: '岱山县',\n                value: []\n            },\n            {\n                name: '定海区',\n                value: []\n            },\n            {\n                name: '普陀区',\n                value: []\n            },\n        ];\n        $('.back').css({\n            'position': 'absolute',\n            'left': '17px',\n            'top': '-25px',\n            'color': 'rgb(222,222,222)',\n            'font-size': '15px',\n            cursor: 'pointer',\n            'z-index': '100'\n        })\n\n        mapInit()\n    })\n    mapInit()\n})\nsetTimeout(function() {\n    mapInit()\n}, 1000);\nvar mapInit = () => {\n    console.log('我来了', mapname)\n    $.getJSON(mapname, function(geoJson) {\n        echarts.registerMap('hanzhou', geoJson);\n        myChart.hideLoading();\n        option = {\n            backgroundColor: '#020933',\n            title: {\n                top: 20,\n                text: '舟山市',\n                subtext: '',\n                x: 'center',\n                textStyle: {\n                    color: '#ccc'\n                }\n            },\n\n            // tooltip: {\n            //     trigger: 'item',\n            //     formatter: function(params) {\n            //         console.log(params)\n            //             return params.name + ' : ' + params.value[2];\n            //     }\n            // },\n            geo: {\n                map: 'hanzhou',\n                aspectScale: 0.75, //长宽比\n                zoom: 1.1,\n                roam: false,\n                itemStyle: {\n                    normal: {\n                        areaColor: '#013C62',\n                        shadowColor: '#182f68',\n                        shadowOffsetX: 0,\n                        shadowOffsetY: 25\n                    },\n                    emphasis: {\n                        areaColor: '#2AB8FF',\n                        borderWidth: 0,\n                        color: 'green',\n                        label: {\n                            show: false\n                        }\n                    }\n                }\n            },\n            series: [{\n                    type: 'map',\n                    roam: true,\n                    label: {\n                        normal: {\n                            show: true,\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        },\n                        emphasis: {\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        }\n                    },\n\n                    itemStyle: {\n                        normal: {\n                            borderColor: '#2ab8ff',\n                            borderWidth: 1.5,\n                            areaColor: '#12235c'\n                        },\n                        emphasis: {\n                            areaColor: '#2AB8FF',\n                            borderWidth: 0,\n                            color: 'green'\n                        }\n                    },\n                    zoom: 1.1,\n                    roam: false,\n                    map: 'hanzhou' //使用\n                    // data: this.difficultData //热力图数据   不同区域 不同的底色\n                },\n\n            ]\n        };\n        myChart.setOption(option);\n    });\n}","html":"","externalScripts":"","updaterUID":"obd-oM18-ur5PzFwQ_ZBBQ3ccR3qNdcL52K","theme":"","layout":"","viewCount":0,"userName":"丨***龍","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xP6PSjy3gN.png?v=1628239878056","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","title"],"customTags":[],"updaterUserName":"丨***龍"}}