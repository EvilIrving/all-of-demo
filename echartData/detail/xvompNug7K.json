{"status":0,"data":{"cid":"xvompNug7K","authorUid":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","authorUserName":"B***n","title":"高英杰微创新","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-23T17:31:14.000Z","lastUpdateTime":"2021-12-23T17:31:14.000Z","auth":2,"uid":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-23T17:31:14.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1482909768458-HJlU_yWBe.json\";\r\n\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('anhui', geoJson);\r\n    var chinaGeoCoordMap = {\r\n        \"合肥市\": [117.29, 32.0581],\r\n        \"亳州市\": [116.1914, 33.4698],\r\n        \"六安市\": [116.3123, 31.8329],\r\n        \"安庆市\": [116.7517, 30.5255],\r\n        \"宣城市\": [118.8062, 30.6244],\r\n        \"宿州市\": [117.5208, 33.6841],\r\n        \"池州市\": [117.3889, 30.2014],\r\n        \"淮北市\": [116.6968, 33.6896],\r\n        \"淮南市\": [116.7847, 32.7722],\r\n        \"滁州市\": [118.1909, 32.536],\r\n        \"芜湖市\": [118.3557, 31.0858],\r\n        \"蚌埠市\": [117.4109, 33.1073],\r\n        \"铜陵市\": [117.9382, 30.9375],\r\n        \"阜阳市\": [115.7629, 32.9919],\r\n        \"马鞍山市\": [118.6304, 31.5363],\r\n        \"黄山市\": [118.0481, 29.9542]\r\n    };\r\n    var chinaDatas = [\r\n        [{\r\n            name: '合肥市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '亳州市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '六安市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '安庆市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '宣城市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '宿州市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '池州市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '淮北市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '淮南市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '滁州市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '芜湖市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '蚌埠市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '铜陵市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '阜阳市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '马鞍山市',\r\n            value: 0\r\n        }],\r\n        [{\r\n            name: '黄山市',\r\n            value: 0\r\n        }]\r\n    ];\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var dataItem = data[i];\r\n            var fromCoord = chinaGeoCoordMap[dataItem[0].name];\r\n            var toCoord = [117.29, 32.0581];\r\n            if (fromCoord && toCoord) {\r\n                res.push([{\r\n                    coord: fromCoord,\r\n                    value: dataItem[0].value\r\n                }, {\r\n                    coord: toCoord,\r\n                }]);\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n    \r\n    var series = [];\r\n    [['合肥市', chinaDatas]].forEach(function(item, i) {\r\n        console.log(item)\r\n        series.push({\r\n                type: 'lines',\r\n                zlevel: 2,\r\n                effect: {\r\n                    show: true,\r\n                    period: 4, //箭头指向速度，值越小速度越快\r\n                    trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                    symbol: 'arrow', //箭头图标\r\n                    symbolSize: 5, //图标大小\r\n                },\r\n                lineStyle: {\r\n                    normal: {\r\n                        width: 1, //尾迹线条宽度\r\n                        opacity: 1, //尾迹线条透明度\r\n                        curveness: .3 //尾迹线条曲直度\r\n                    }\r\n                },\r\n                data: convertData(item[1])\r\n            }, {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                rippleEffect: { //涟漪特效\r\n                    period: 4, //动画时间，值越小速度越快\r\n                    brushType: 'stroke', //波纹绘制方式 stroke, fill\r\n                    scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: 'right', //显示位置\r\n                        offset: [5, 0], //偏移设置\r\n                        formatter: function(params) { //圆环显示文字\r\n                            return params.data.name;\r\n                        },\r\n                        fontSize: 13\r\n                    },\r\n                    emphasis: {\r\n                        show: true\r\n                    }\r\n                },\r\n                symbol: 'circle',\r\n                symbolSize: function(val) {\r\n                    return 5 + val[2] * 5; //圆环大小\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        show: false,\r\n                        color: '#f00'\r\n                    }\r\n                },\r\n                data: item[1].map(function(dataItem) {\r\n                    return {\r\n                        name: dataItem[0].name,\r\n                        value: chinaGeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                    };\r\n                }),\r\n            },\r\n            //被攻击点\r\n            {\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                zlevel: 2,\r\n                rippleEffect: {\r\n                    period: 4,\r\n                    brushType: 'stroke',\r\n                    scale: 4\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: 'right',\r\n                        //offset:[5, 0],\r\n                        color: '#0f0',\r\n                        formatter: '{b}',\r\n                        textStyle: {\r\n                            color: \"#0f0\"\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        show: true,\r\n                        color: \"#f60\"\r\n                    }\r\n                },\r\n                symbol: 'pin',\r\n                symbolSize: 50,\r\n                data: [{\r\n                    name: item[0],\r\n                    value: chinaGeoCoordMap[item[0]].concat([10]),\r\n                }],\r\n            }\r\n        );\r\n    });\r\n\r\n    option = {\r\n        tooltip: {\r\n            trigger: 'item',\r\n            backgroundColor: 'rgba(166, 200, 76, 0.82)',\r\n            borderColor: '#FFFFCC',\r\n            showDelay: 0,\r\n            hideDelay: 0,\r\n            enterable: true,\r\n            transitionDuration: 0,\r\n            extraCssText: 'z-index:100',\r\n            formatter: function(params, ticket, callback) {\r\n                //根据业务自己拓展要显示的内容\r\n                var res = \"\";\r\n                var name = params.name;\r\n                var value = params.value[params.seriesIndex + 1];\r\n                res = \"<span style='color:#fff;'>\" + name + \"</span><br/>数据：\" + value;\r\n                return res;\r\n            }\r\n        },\r\n        backgroundColor: \"#013954\",\r\n        visualMap: { //图例值控制\r\n            min: 0,\r\n            max: 1,\r\n            calculable: true,\r\n            show: true,\r\n            color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        geo: {\r\n            map: 'anhui',\r\n            zoom: 1.2,\r\n            label: {\r\n                emphasis: {\r\n                    show: false\r\n                }\r\n            },\r\n            roam: true, //是否允许缩放\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'rgba(51, 69, 89, .5)', //地图背景色\r\n                    borderColor: '#516a89', //省市边界线00fcff 516a89\r\n                    borderWidth: 1\r\n                },\r\n                emphasis: {\r\n                    color: 'rgba(37, 43, 61, .5)' //悬浮背景\r\n                }\r\n            }\r\n        },\r\n        series: series\r\n    };\r\n\r\n    myChart.setOption(option);\r\n});","html":"","externalScripts":"","updaterUID":"obd-o2SLy3-g3q7ExOyp36JF2Ob_F87gk64","theme":"","layout":"","viewCount":0,"userName":"B***n","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvompNug7K.png?v=1640280675135","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"B***n"}}