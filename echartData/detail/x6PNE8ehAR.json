{"status":0,"data":{"cid":"x6PNE8ehAR","authorUid":"bd-1580834365","authorUserName":"随***空","title":"legend添加背景图片+文字跳色","description":"legend图例多样化","latestVersion":1,"alwaysLatest":1,"createTime":"2018-12-17T03:33:54.000Z","lastUpdateTime":"2018-12-17T03:33:54.000Z","auth":2,"uid":"bd-1580834365","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-17T03:33:54.000Z","code":"let pieSource = {\r\n        '这个人员': 335,\r\n        '那个人员': 335,\r\n        '这个那个人员': 335,\r\n        '特殊人员': 335,\r\n        '优先人员': 335,\r\n        '正常人员': 335,\r\n        '特别正常人员': 335,\r\n        '人员': 335,\r\n    },\r\n    legendColor = [\"#3471fd\", \"#6babff\", \"#aee1ff\", \"#fca98f\", \"#5598ff\", \"#4a53ff\", \"#fe6e52\", \"#5fc6fc\"],\r\n    richStyle = {};\r\n\r\nfunction initData(source) {\r\n    legendColor.map((item, index) => {\r\n        richStyle['style' + index] = {};\r\n        richStyle['style' + index]['color'] = item;\r\n        richStyle['style' + index]['align'] = 'right';\r\n    });\r\n    if (Object.prototype.toString.call(source) === '[object Object]') {\r\n        const arr = [];\r\n        const legendData = [];\r\n        Object.entries(source).forEach((value) => {\r\n            legendData.push(value[0]);\r\n            let obj = {};\r\n            obj.name = value[0];\r\n            obj.value = value[1];\r\n            arr.push(obj);\r\n        });\r\n        source = arr;\r\n        return {\r\n            source,\r\n            legendData\r\n        };\r\n    } else if (source && Object.prototype.toString.call(source) === '[object Array]') {\r\n        let legendData = [];\r\n        source.forEach((item, index) => {\r\n            legendData.push(item.name);\r\n        });\r\n        return {\r\n            source,\r\n            legendData\r\n        };\r\n    }\r\n}\r\nsource = initData(pieSource);\r\noption = {\r\n    backgroundColor: '#131535',\r\n    tooltip: {\r\n        trigger: 'item',\r\n        textStyle: {\r\n            color: '#fff',\r\n            // fontSize:28\r\n        },\r\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\r\n    },\r\n    color: legendColor,\r\n    legend: [{\r\n            orient: 'vertical',\r\n            left: 500,\r\n            y: 'center',\r\n            icon: 'rect',\r\n            textStyle: {\r\n                color: '#cddafd',\r\n                fontSize: 14,\r\n                rich: richStyle,\r\n                width: 207,\r\n                height: 20,\r\n                backgroundColor: {\r\n                    image: '/asset/get/s/data-1545016257824-mxLqGjr4z.png',\r\n                },\r\n            },\r\n            padding: [30, 0, 30, 0],\r\n            itemWidth: 10,\r\n            itemHeight: 5,\r\n            itemGap: 20,\r\n            data: source.legendData.slice(0, 4),\r\n            formatter: function(name) {\r\n                let oa = option.series[0].data;\r\n                let total = 0;\r\n                oa.forEach((item, index) => {\r\n                    total += item.value;\r\n                });\r\n                for (let i = 0; i < oa.length; i++) {\r\n                    if (name == oa[i].name) {\r\n                        // return name + '  ' + '{style'+i+'|' + (oa[i].value / total * 100).toFixed(2) + '%}';\r\n                        return name + '{style' + i + '|' + (oa[i].value / total * 100).toFixed(2) + '%}';\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        {\r\n            orient: 'vertical',\r\n            left: 800,\r\n            y: 'center',\r\n            icon: 'rect',\r\n            textStyle: {\r\n                color: '#cddafd',\r\n                fontSize: 14,\r\n                rich: richStyle,\r\n                width: 207,\r\n                height: 20,\r\n                backgroundColor: {\r\n                    image: '/asset/get/s/data-1545016257824-mxLqGjr4z.png',\r\n                },\r\n            },\r\n            padding: [30, 0, 30, 0],\r\n            itemWidth: 10,\r\n            itemHeight: 5,\r\n            itemGap: 20,\r\n            data: source.legendData.slice(4),\r\n            formatter: function(name) {\r\n                let oa = option.series[0].data;\r\n                let total = 0;\r\n                oa.forEach((item, index) => {\r\n                    total += item.value;\r\n                });\r\n                for (let i = 0; i < oa.length; i++) {\r\n                    if (name == oa[i].name) {\r\n                        return name + '  ' + '{style' + i + '|' + (oa[i].value / total * 100).toFixed(2) + '%}';\r\n                    }\r\n                }\r\n            },\r\n        }\r\n    ],\r\n    series: [{\r\n        name: '重点人员',\r\n        type: 'pie',\r\n        radius: ['10%', '40%'],\r\n        center: ['20%', '50%'],\r\n        data: source.source,\r\n        itemStyle: {\r\n            normal: {\r\n                label: {\r\n                    show: false\r\n                },\r\n                shadowColor: '#438bff',\r\n                shadowBlur: 20\r\n            },\r\n        }\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-1580834365","theme":"","layout":"","viewCount":4520,"userName":"随***空","commentCount":0,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6PNE8ehAR.png?v=1545017634657","isCustomThumbnail":1,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":["legend","pie"],"updaterUserName":"随***空"}}