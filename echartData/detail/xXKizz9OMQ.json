{"status":0,"data":{"cid":"xXKizz9OMQ","authorUid":"bd-3530199113","authorUserName":"夢***9","title":"月度年度统计","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-07-31T03:06:41.000Z","lastUpdateTime":"2019-07-31T03:06:41.000Z","auth":2,"uid":"bd-3530199113","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-08-02T01:07:56.000Z","code":" builderJson = {\r\n\r\n     // \"all\": 10887,\r\n     \"charts\": {\r\n         \"一月\": 123,\r\n         \"二月\": 334,\r\n         \"三月\": 342,\r\n         \"四月\": 321,\r\n         \"五月\": 322,\r\n         \"六月\": 254,\r\n         \"七月\": 564,\r\n         \"八月\": 466\r\n     },\r\n     \"components\": {\r\n         \"一月\": 133,\r\n         \"二月\": 344,\r\n         \"三月\": 442,\r\n         \"四月\": 521,\r\n         \"五月\": 322,\r\n         \"六月\": 554,\r\n         \"七月\": 664,\r\n         \"八月\": 466\r\n     },\r\n     \"ie\": 9743\r\n };\r\n\r\n var downloadJson = {\r\n     \"部门1\": 123,\r\n     \"部门2\": 135,\r\n     \"部门3\": 135,\r\n     \"部门4\": 234\r\n };\r\n\r\n var themeJson = {\r\n     \"部门1\": 133,\r\n     \"部门2\": 342,\r\n     \"部门3\": 235,\r\n     \"部门4\": 334\r\n };\r\n\r\n\r\n var waterMarkText = '测试';\r\n\r\n var canvas = document.createElement('canvas');\r\n var ctx = canvas.getContext('2d');\r\n canvas.width = canvas.height = 100;\r\n ctx.textAlign = 'center';\r\n ctx.textBaseline = 'middle';\r\n ctx.globalAlpha = 0.08;\r\n ctx.font = '20px Microsoft Yahei';\r\n ctx.translate(50, 50);\r\n ctx.rotate(-Math.PI / 4);\r\n ctx.fillText(waterMarkText, 0, 0);\r\n\r\n option = {\r\n     legend: {\r\n         textStyle: {\r\n             color: '#fff'\r\n         },\r\n         x: 'left',\r\n         selected: {\r\n             '是部': false,\r\n             '测试': false\r\n         }\r\n     },\r\n     textStyle: {\r\n         color: '#000',\r\n         fontSize: 16\r\n\r\n     },\r\n     color: ['#C10000', '#0000F0', '#FF5706', '#00BDBD', '#C28585', '#00B55A', '#804000'],\r\n     backgroundColor: {\r\n         type: 'pattern',\r\n         image: canvas,\r\n         repeat: 'repeat'\r\n     },\r\n     tooltip: {},\r\n     title: [{\r\n         text: '',\r\n         // subtext: '总计 ' + builderJson.all,\r\n         color: '#000',\r\n         x: '25%',\r\n         textAlign: 'center'\r\n     }, {\r\n\r\n         textStyle: {\r\n             color: '#000'\r\n         },\r\n         text: '_2018年 总计 ' + Object.keys(downloadJson).reduce(function(all, key) {\r\n             return all + downloadJson[key];\r\n         }, 0),\r\n         subtextStyle: {\r\n             color: '#000'\r\n         },\r\n         subtext: '',\r\n\r\n\r\n         x: '72%',\r\n         textAlign: 'center'\r\n     }, {\r\n         color: '#000',\r\n         textStyle: {\r\n             color: '#000'\r\n         },\r\n         text: '_2019年 总计 ' + Object.keys(themeJson).reduce(function(all, key) {\r\n             return all + themeJson[key];\r\n         }, 0),\r\n         subtextStyle: {\r\n             color: '#000'\r\n         },\r\n         subtext: '',\r\n         x: '72%',\r\n         y: '50%',\r\n         textAlign: 'center'\r\n     }],\r\n     grid: [{\r\n         top: 50,\r\n         width: '50%',\r\n         bottom: '45%',\r\n         left: 10,\r\n         containLabel: true\r\n     }, {\r\n         top: '55%',\r\n         width: '50%',\r\n         bottom: 0,\r\n         left: 10,\r\n         containLabel: true\r\n     }],\r\n     xAxis: [{\r\n         axisLine: {\r\n             lineStyle: {\r\n                 color: '#000'\r\n             }\r\n         },\r\n         type: 'value',\r\n         max: builderJson.all,\r\n         splitLine: {\r\n             show: false\r\n         }\r\n     }, {\r\n         axisLine: {\r\n             lineStyle: {\r\n                 color: '#000'\r\n             }\r\n         },\r\n         type: 'value',\r\n         max: builderJson.all,\r\n         gridIndex: 1,\r\n         splitLine: {\r\n             show: false\r\n         }\r\n     }],\r\n     yAxis: [{\r\n         type: 'category',\r\n         data: Object.keys(builderJson.charts),\r\n         axisLabel: {\r\n             interval: 0,\r\n             rotate: 5\r\n         },\r\n         splitLine: {\r\n             lineStyle: {\r\n                 // 使用深浅的间隔色\r\n                 color: ['#fff']\r\n             }\r\n         },\r\n         nameTextStyle: {\r\n             color: ['#fff']\r\n         },\r\n         axisLine: {\r\n             lineStyle: {\r\n                 color: '#fff',\r\n                 width: 1, //这里是为了突出显示加上的\r\n             }\r\n\r\n         }\r\n     }, {\r\n         gridIndex: 1,\r\n         type: 'category',\r\n         data: Object.keys(builderJson.components),\r\n         axisLabel: {\r\n             interval: 0,\r\n             rotate: 5\r\n         },\r\n         splitLine: {\r\n             lineStyle: {\r\n                 // 使用深浅的间隔色\r\n                 color: ['#000']\r\n             }\r\n         },\r\n         nameTextStyle: {\r\n             color: ['#000']\r\n         },\r\n         axisLine: {\r\n             lineStyle: {\r\n                 color: '#000',\r\n                 width: 1, //这里是为了突出显示加上的\r\n             }\r\n\r\n         }\r\n     }],\r\n     series: [{\r\n         type: 'bar',\r\n         stack: 'chart',\r\n         z: 3,\r\n         label: {\r\n             normal: {\r\n                 position: 'right',\r\n                 show: true\r\n             }\r\n         },\r\n         data: Object.keys(builderJson.charts).map(function(key) {\r\n             return builderJson.charts[key];\r\n         })\r\n     }, {\r\n         type: 'bar',\r\n         stack: 'chart',\r\n         silent: true,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#eee'\r\n             }\r\n         },\r\n         data: Object.keys(builderJson.charts).map(function(key) {\r\n             return builderJson.all - builderJson.charts[key];\r\n         })\r\n     }, {\r\n         type: 'bar',\r\n         stack: 'component',\r\n         xAxisIndex: 1,\r\n         yAxisIndex: 1,\r\n         z: 3,\r\n         label: {\r\n             normal: {\r\n                 position: 'right',\r\n                 show: true\r\n             }\r\n         },\r\n         data: Object.keys(builderJson.components).map(function(key) {\r\n             return builderJson.components[key];\r\n         })\r\n     }, {\r\n         type: 'bar',\r\n         stack: 'component',\r\n         silent: true,\r\n         xAxisIndex: 1,\r\n         yAxisIndex: 1,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#eee'\r\n             }\r\n         },\r\n         data: Object.keys(builderJson.components).map(function(key) {\r\n             return builderJson.all - builderJson.components[key];\r\n         })\r\n     }, {\r\n         type: 'pie',\r\n         radius: [0, '30%'],\r\n         center: ['75%', '25%'],\r\n         data: Object.keys(downloadJson).map(function(key) {\r\n             return {\r\n                 name: key.replace('.js', ''),\r\n                 value: downloadJson[key]\r\n             }\r\n         })\r\n     }, {\r\n         type: 'pie',\r\n         radius: [0, '30%'],\r\n         center: ['75%', '75%'],\r\n         data: Object.keys(themeJson).map(function(key) {\r\n             return {\r\n                 name: key.replace('.js', ''),\r\n                 value: themeJson[key]\r\n             }\r\n         })\r\n     }]\r\n };","html":"","externalScripts":"","updaterUID":"bd-3530199113","theme":"","layout":"","viewCount":416,"userName":"夢***9","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xXKizz9OMQ.png?v=1564708076893","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"夢***9"}}