{"status":0,"data":{"cid":"xE1oQek3jr","authorUid":"bd-2291206321","authorUserName":"1***去","title":"能源数据总览","description":"多图双y轴","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-21T10:04:38.000Z","lastUpdateTime":"2021-01-21T10:04:38.000Z","auth":2,"uid":"bd-2291206321","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-21T10:04:38.000Z","code":"  \t/// 整体混合图借鉴 他的地址为  https://gallery.echartsjs.com/editor.html?c=xrySKpOnjM\r\n  \t///   嵌套图借鉴 他的地址为  https://gallery.echartsjs.com/editor.html?c=xAi9VBmJLg\r\n\r\n  \tvar overviewChartID = 'overview-chart';\r\n  \tvar overviewTitle = '能源数据总览'; //标题\r\n  \tvar overviewSubTitle = echarts.format.formatTime('yyyy年MM月dd', new Date());\r\n\r\n  \t//图表定位\r\n  \tvar chartGridTop = 30;\r\n  \tvar chartGridHeight = 95; //改变Y轴的高度\r\n\r\n  \t//时间轴\r\n  \t//SELECT WMSYS.WM_CONCAT('\"'||TO_CHAR(TRUNC(SYSDATE, 'MM') + ROWNUM - 1, 'YYYY-MM-DD')||'\"') DBTIME FROM DUAL CONNECT BY ROWNUM <= 30;\r\n  \tvar overviewDate = [\"00:00\", \"00:05\", \"00:10\", \"00:15\", \"00:20\", \"00:25\", \"00:30\"];\r\n\r\n  \t//表格数据\r\n  \t//SELECT WMSYS.WM_CONCAT(TRUNC(DBMS_RANDOM.VALUE(5, 60), 2)) DBTIME FROM DUAL CONNECT BY ROWNUM <= 30;\r\n\r\n\r\n  \tvar orddbtime1 = [36.59, 35.56, 32.84, 26.37, 35.94, 26.25, 24.11];\r\n  \tvar orddbtime2 = [22.18, 24.76, 20.37, 28.09, 22.25, 26.75, 20.14 ];\r\n     var dbrl = [31, 15, 17, 53, 46, 26, 11];\r\n     var dbr2 = [22, 33, 44, 11, 22, 44, 33];\r\n     var dbr3 = [32, 14, 53, 35, 56, 23, 52];\r\n     var dbr4 = [11, 24, 56, 67, 43, 54, 24];\r\n     \r\n     \r\n     \r\n  \tvar orddbproc1 = [99, 32, 53, 95, 73, 38, 99 ];\r\n  \t\r\n  \tvar ycrl1 = [59, 32, 73, 69, 63, 58, 79 ];\r\n\r\n  \t//直角坐标系内绘图网格\r\n  \tfunction makeGrid(top, height, opt) {\r\n  \t    return echarts.util.merge({\r\n  \t        left: 70, //居左的距离\r\n  \t        right: 60,\r\n  \t        top: top,\r\n  \t        height: height\r\n  \t    }, opt || {}, true);\r\n  \t}\r\n\r\n  \t//X轴生成器\r\n  \tfunction makeXAxis(gridIndex, opt) {\r\n  \t    //避免X轴数据显示过于频繁\r\n  \t    axisLabelFlag = false;\r\n  \t    //  if (gridIndex % 2 == 0) {\r\n  \t    //      axisLabelFlag = true;\r\n  \t    //  }\r\n  \t    if (gridIndex == 3) {\r\n  \t        axisLabelFlag = true;\r\n  \t    }\r\n\r\n  \t    return echarts.util.merge({\r\n  \t        type: 'category',\r\n  \t        gridIndex: gridIndex,\r\n  \t        //统一时间轴数据\r\n  \t        data: overviewDate,\r\n  \t        axisLabel: {\r\n  \t            show: axisLabelFlag,\r\n  \t            textStyle: {\r\n  \t                color: '#92a786' //X轴的字体颜色\r\n  \t            },\r\n  \t        },\r\n  \t        axisLine: {\r\n  \t            lineStyle: {\r\n  \t                color: '#92a786', //X轴的颜色\r\n  \t                width: 1, //X轴的粗细\r\n  \t            }\r\n  \t        },\r\n  \t    }, opt || {}, true);\r\n  \t}\r\n\r\n  \t//Y轴生成器\r\n  \tfunction makeYAxis(gridIndex, opt) {\r\n  \t    return echarts.util.merge({\r\n  \t        type: 'value',\r\n  \t        nameLocation: 'middle',\r\n  \t        nameGap: '40',\r\n  \t        gridIndex: gridIndex,\r\n  \t        nameTextStyle: {\r\n  \t            color: 'red', //设置左侧字体颜色\r\n  \t            fontSize: 20, //设置左侧字体的大小\r\n  \t        },\r\n  \t        axisLine: {\r\n  \t            lineStyle: {\r\n  \t                color: '#92a786', //设置Y轴的颜色\r\n  \t                width: 1, //设置Y轴的粗细\r\n  \t            }\r\n  \t        },\r\n  \t        axisTick: {\r\n  \t            show: false\r\n  \t        },\r\n\r\n  \t        axisLabel: {\r\n  \t            show: true,\r\n  \t            textStyle: {\r\n  \t             //   color: '#00FF00' //Y轴的数据字体颜色\r\n  \t            },\r\n  \t        },\r\n  \t        splitLine: {\r\n  \t            show: true,\r\n  \t            lineStyle: {\r\n  \t             //   color: '#b0bad4' //网格线的颜色\r\n  \t            }\r\n  \t        }\r\n\r\n  \t    }, opt || {}, true);\r\n  \t}\r\n\r\n  \t//数据生成器\r\n  \tfunction makeGridData(xAxisIndex, yAxisIndex, chartType, chartName, chartData, opt) {\r\n  \t    return echarts.util.merge({\r\n  \t        type: chartType,\r\n  \t        name: chartName,\r\n  \t        xAxisIndex: xAxisIndex,\r\n  \t        yAxisIndex: yAxisIndex,\r\n  \t        data: chartData,\r\n  \t    }, opt || {}, true);\r\n  \t}\r\n\r\n  \t// \t\tvar myChartOne = echarts.init(document.getElementById('NestingChart'));\r\n  \tvar option = {\r\n  \t    animation: false,\r\n  \t    //标题组件，包含主标题和副标题\r\n  \t    title: {\r\n  \t        x: 'center',\r\n  \t        text: overviewTitle, //标题\r\n  \t         textStyle: {\r\n  \t                //文字颜色\r\n        color:'#00C7E1',\r\n        //字体风格,'normal','italic','oblique'\r\n        fontStyle:'normal',\r\n        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...\r\n        fontWeight:'bold',\r\n        //字体系列\r\n        fontFamily:'sans-serif',\r\n        //字体大小\r\n　　　　 fontSize:18\r\n\r\n  \t        },\r\n  \t             //subtext: overviewSubTitle,\r\n  \t             //padding: 0,\r\n  \t             \r\n  \t    },\r\n  \t    tooltip: {\r\n  \t        //移动端展示方式\r\n  \t        trigger: 'axis',\r\n  \t        transitionDuration: 0,\r\n  \t        confine: true,\r\n  \t        bordeRadius: 5,\r\n  \t        borderWidth: 2, //提示框边框的大小\r\n  \t        borderColor: '#333', //提示框边框的颜色\r\n  \t        backgroundColor: 'rgba(255,255,255,0.9)', //提示框的背景颜色（0.9为透明度）\r\n  \t        textStyle: {\r\n  \t            fontSize: 12, //提示框的字体大小\r\n  \t            color: '#333', //提示框里的字体颜色\r\n  \t            aligin: 'center',\r\n\r\n  \t        },\r\n  \t        formatter: function(params) { //数据单位格式化  \r\n  \t            var relVal = params[0].name; //x轴名称  \r\n  \t            relVal += \"<div style='width:120px'>\"\r\n  \t            for (var i = 0, l = params.length; i < l; i++) {\r\n  \t                if (params[i].value) {\r\n\r\n  \t                    relVal += \"<span  style='display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:\" + params[i].color + \";'>\" + '<span  style=\"display:block;padding-left:15px;margin-top:-4px\">' + params[i].seriesName + ' : ' + params[i].value + '</span>' + \"</span>\" + '<br>';\r\n  \t                }\r\n  \t            }\r\n  \t            relVal += \"</div>\"\r\n  \t            return relVal;\r\n  \t        }\r\n  \t    },\r\n\r\n  \t    //坐标轴指示器（axisPointer）的全局公用设置\r\n  \t    axisPointer: {\r\n  \t        type: 'shadow',\r\n  \t        link: {\r\n  \t            xAxisIndex: 'all'\r\n  \t        }\r\n  \t    },\r\n  \t    //直角坐标系内绘图网格\r\n  \t    grid: [\r\n  \t        makeGrid(chartGridTop, chartGridHeight),\r\n  \t        makeGrid(chartGridTop + (chartGridHeight + 25), chartGridHeight),\r\n  \t        makeGrid(chartGridTop + (chartGridHeight + 25) * 2, chartGridHeight),\r\n  \t        makeGrid(chartGridTop + (chartGridHeight + 25) * 3, chartGridHeight),\r\n\r\n  \t    ],\r\n  \t    legend: {\r\n  \t        data: ['今日逐时热', '今日逐时冷', '今日逐时水', '今日逐时电','今日逐时气'],\r\n  \t        \"bottom\": 40, //最下方提示文字的距离\r\n  \t        textStyle: {\r\n  \t            color: '#1bb4f6' //最下面提示文字的颜色\r\n  \t        },\r\n  \t        //\t\t\t\ticon: 'roundRect',\r\n  \t    },\r\n  \t    xAxis: [\r\n\r\n  \t        makeXAxis(0),\r\n  \t        makeXAxis(1),\r\n  \t        makeXAxis(2),\r\n  \t        makeXAxis(3),\r\n\r\n  \t    ],\r\n  \t    yAxis: [\r\n  \t        makeYAxis(0, {\r\n  \t         //   name: '天气数据',\r\n  \t            splitNumber: 3,\r\n\r\n  \t        }),\r\n  \t        makeYAxis(1, {\r\n  \t         //   name: '预测实际能耗',\r\n\r\n  \t        }),\r\n  \t        makeYAxis(2, {\r\n  \t         //   name: '预测实际消耗',\r\n\r\n  \t        }),\r\n  \t          makeYAxis(3, {\r\n  \t         //   name: '预测实际消耗',\r\n\r\n  \t        }),\r\n  \t        makeYAxis(0, {\r\n                 splitLine:  false,//去除网格线\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(1, {\r\n                 splitLine:  false,//去除网格线\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(2, {\r\n                 splitLine:  false,//去除网格线\r\n\t\t\t\t}),\r\n\t\t\t\tmakeYAxis(3, {\r\n                 splitLine:  false,//去除网格线\r\n\t\t\t\t})\r\n  \t    ],\r\n  \t    //dataZoom 组件 用于区域缩放\r\n  \t    dataZoom: [{\r\n  \t        type: 'slider',\r\n  \t        xAxisIndex: [0, 1, 2,3],\r\n  \t        realtime: true,\r\n  \t        //移动端展示方式\r\n  \t        handleSize: '180%', //滑动条两侧的大小\r\n  \t         start: 0,\r\n             end: 80,\r\n  \t    }],\r\n\r\n  \t    //每个系列通过 type 决定自己的图表类型\r\n  \t    series: [\r\n  \t        makeGridData(0, 0, 'line', '今日逐时热', orddbtime1, {\r\n  \t            stack: 'DBTIME',\r\n  \t            smooth: true,\r\n  \t            color: '#d73d2d',\r\n  \t            lineStyle: {\r\n  \t                width: 2 //改变线条的粗细\r\n  \t            }\r\n  \t        }),\r\n  \t        makeGridData(0, 0, 'line', '今日逐时冷', orddbtime2, {\r\n  \t            stack: 'DBTIME',\r\n  \t            smooth: true,\r\n  \t            color: '#45d3cb',\r\n  \t            lineStyle: {\r\n  \t                width: 2 //改变线条的粗细\r\n  \t            }\r\n  \t        }),\r\n\r\n  \t        makeGridData(1, 1, 'line', '今日逐时水', orddbproc1, {\r\n  \t            smooth: true, //设置曲线\r\n  \t            color: '#63B8FF',\r\n  \t            lineStyle: {\r\n  \t                width: 2 //改变线条的粗细\r\n  \t            }\r\n  \t        }),\r\n  \t        makeGridData(2, 2, 'line', '今日逐时电', ycrl1, {\r\n  \t            smooth: true,\r\n  \t            color: '#6cd72d',\r\n  \t            lineStyle: {\r\n  \t                width: 2 //改变线条的粗细\r\n  \t            }\r\n  \t        }),\r\n  \t           makeGridData(3, 3, 'line', '今日逐时气', ycrl1, {\r\n  \t            smooth: true,\r\n  \t            color: '#d7a22d',\r\n  \t            lineStyle: {\r\n  \t                width: 2 //改变线条的粗细\r\n  \t            }\r\n  \t        }),\r\n  \t        \tmakeGridData(0, 4, 'line', '热量对比1', dbrl,{smooth: true,\tcolor:'#FF6A6A'}),\r\n  \t        \tmakeGridData(1, 5, 'line', '热量对比2', dbr2,{smooth: true,\tcolor:'#FF6A6A'}),\r\n  \t        \tmakeGridData(2, 6, 'line', '热量对比3', dbr3,{smooth: true,\tcolor:'#FF6A6A'}),\t\r\n  \t        \tmakeGridData(3, 7, 'line', '热量对比4', dbr4,{smooth: true,\tcolor:'#FF6A6A'}),\t\r\n  \t        \t\r\n  \t        \t\r\n\r\n  \t    ]\r\n\r\n  \t};","html":"","externalScripts":"","updaterUID":"bd-2291206321","theme":"","layout":"","viewCount":110,"userName":"1***去","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xE1oQek3jr.png?v=1611223478335","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-line","title","tooltip"],"customTags":["多图双y轴"],"updaterUserName":"1***去"}}