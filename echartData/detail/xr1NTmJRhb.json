{"status":0,"data":{"cid":"xr1NTmJRhb","authorUid":"bd-3357157585","authorUserName":"h943681093","title":"自定义系列 竖仪表盘","description":"自定义系列 竖仪表盘","latestVersion":2,"alwaysLatest":1,"createTime":"2017-10-13T06:57:00.000Z","lastUpdateTime":"2017-10-13T06:57:00.000Z","auth":2,"uid":"bd-3357157585","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"3.7.2","versionCreateTime":"2017-10-16T08:16:29.000Z","code":"var max = 10000;\nvar data = [{\n    name: 'value',\n    value: 0,\n    itemStyle: {\n        normal: {\n            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                offset: 0,\n                color: '#C96DD8'\n            }, {\n                offset: 1,\n                color: '#3023AE'\n            }])\n        }\n    }\n}];\n\n\nfunction renderItem(params, api) {\n    var start = api.coord([api.value(0), 0]);\n    var end = api.coord([api.value(1), 0]);\n    var height = api.size([0, api.value(1)])[1];\n\n    return {\n        type: 'rect',\n        shape: {\n            x: params.coordSys.x,\n            y: end[1],\n            width: params.coordSys.width,\n            height: -height\n        },\n        style: api.style()\n    };\n\n}\n\n\noption1 = {\n    grid: {\n        left: 'middle',\n        width: 70\n    },\n    tooltip: {},\n    xAxis: {\n        show: false,\n        data: [\n            [\n                ['test1']\n            ]\n        ],\n    },\n    yAxis: {\n        // show: false,\n        min: 0,\n        max: max,\n    },\n    series: [{\n        type: 'custom',\n        renderItem: renderItem,\n        encode: {\n            y: 0\n        },\n        data: [{\n            name: 'max',\n            value: max,\n            itemStyle: {\n                normal: {\n                    color: '#000',\n                    opacity: 0.5\n                }\n            }\n        }],\n        silent: true\n    }, {\n        type: 'custom',\n        renderItem: renderItem,\n        encode: {\n            y: 0\n        },\n        data: data,\n    }]\n};\nvar i = 0;\nsetInterval(function() {\n    if (option1.series[1].data[0].value >= 10000) {\n        i = 1;\n    } else if (option1.series[1].data[0].value <= 0) {\n        i = 0;\n    }\n    if (i) {\n        option1.series[1].data[0].value -= 1000;\n    } else {\n        option1.series[1].data[0].value += 1000;\n    }\n\n    myChart.setOption(option1);\n    var left = myChart.convertToPixel({\n        xAxisIndex: 0\n    }, [0]);\n    console.log(left);\n}, 1000)","html":"","externalScripts":"","updaterUID":"bd-3357157585","theme":"","layout":"","viewCount":365,"userName":"h943681093","commentCount":2,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xr1NTmJRhb.png?v=1508141789535","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","tooltip"],"customTags":["custom","竖仪表盘","自定义系列"],"updaterUserName":"h943681093"}}