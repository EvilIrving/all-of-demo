{"status":0,"data":{"cid":"x45Mma4Xf6","authorUid":"bd-696783921","authorUserName":"n***人","title":"定位-高德-天地图","description":"ip定位用户所在区域，并掩模处理","latestVersion":6,"alwaysLatest":1,"createTime":"2019-01-05T05:19:58.000Z","lastUpdateTime":"2019-08-28T09:46:18.000Z","auth":2,"uid":"bd-696783921","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":3,"echartsVersion":"4.2.0","versionCreateTime":"2019-01-25T06:32:37.000Z","code":" AMap.plugin([\"AMap.Geolocation\", 'AMap.DistrictSearch'], function() {\n     new AMap.Geolocation().getCurrentPosition(function(status, r) {\n         var marker = new AMap.Marker({\n             position: new AMap.LngLat(r.position.lng, r.position.lat),\n             title: r.formattedAddress,\n             /*label:{\n                 content:r.addressComponent.township\n             }*/\n         });\n         var district = new AMap.DistrictSearch({\n             subdistrict: 0, //返回下一级行政区\n             level: 'province',\n             extensions: 'all', //返回行政区边界坐标组等具体信息\n         }).search(r.addressComponent.province, function(status, result) {\n             result = result.districtList[0];\n             var bounds = result.boundaries;\n\n             var map = new AMap.Map('chart-panel', {\n                 mapStyle: \"amap://styles/3217e099bb7b1bb4a8e063ce169bbb5b\",\n                 mask: bounds.map(function(item) {\n                     return [item]\n                 }),\n                 center: result.center,\n                 pitch: 52,\n                 viewMode: '3D', //开启3D视图,默认为关闭\n                 buildingAnimation: true, //楼块出现是否带动画                \n                 labelzIndex: 130,\n                 cursor: 'pointer',\n                 features: ['road', 'building', 'point']\n             });\n\n             map.on('complete', function() {\n                 marker.setMap(this);\n                 this.setCity(r.addressComponent.adcode);\n                 map.plugin(['AMap.ControlBar'], function() {\n                     var controlBar = new AMap.ControlBar({\n                         position: {\n                             right: '0',\n                             bottom: '-173px'\n                         }\n                     });\n                     map.addControl(controlBar);\n                 });\n\n                 map.plugin(['AMap.Scale'], function() {\n                     var scale = new AMap.Scale();\n                     map.addControl(scale);\n                 });\n                 map.plugin(['AMap.ToolBar'], function() {\n                     var toolBar = new AMap.ToolBar();\n                     map.addControl(toolBar);\n                 });\n\n                 map.plugin(['AMap.DistrictLayer'], function() {\n                     var disCountry = new AMap.DistrictLayer.Country({\n                         SOC: 'CHN',\n                         zIndex: 1,\n                         depth: 2,\n                         styles: {\n                             'province-stroke': 'cornflowerblue',\n                             'city-stroke': 'white', //中国地级市边界\n                             'county-stroke': '#3c648780', //中国区县边界\n                             'fill': 'rgba(0,0,0,0)',\n                         }\n                     })\n\n                     disCountry.setMap(map);\n                 });\n                 var prism = new AMap.Object3D.Wall({\n                     path: bounds,\n                     height: 5000,\n                     color: '#0088ffcc'\n                 });\n                 prism.transparent = true;\n                 var object3Dlayer = new AMap.Object3DLayer({});\n                 object3Dlayer.add(prism)\n                 object3Dlayer.setMap(map);\n\n                 var tianditu = new AMap.TileLayer({\n                     zIndex: -1,\n                     getTileUrl: 'http://t{1,2,3,4}.tianditu.gov.cn/DataServer?tk=2ce94f67e58faa24beb7cb8a09780552&T=ter_w&x=[x]&y=[y]&l=[z]'\n                 })\n                 tianditu.setMap(map);\n             });\n         });\n     });\n });","html":"","externalScripts":"https://webapi.amap.com/maps?v=1.4.12&key=35a871e5905ecfd749bd998448b9cd03","updaterUID":"bd-696783921","theme":"default","layout":"","viewCount":228680,"userName":"n***人","commentCount":5,"starCount":47,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x45Mma4Xf6.png?v=1566985580224","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"n***人"}}