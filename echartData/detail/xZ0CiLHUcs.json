{"status":0,"data":{"cid":"xZ0CiLHUcs","authorUid":"obd-ojY2SoNvjWizfqUywqIqYSYrmEhJ9EZ","authorUserName":"溢***诗","title":"饼图-带标识","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-03-31T07:42:44.000Z","lastUpdateTime":"2021-03-31T07:42:44.000Z","auth":2,"uid":"obd-ojY2SoNvjWizfqUywqIqYSYrmEhJ9EZ","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-31T07:42:44.000Z","code":"chart_pie_school('echart', '升学率', 75.6, '#b25846', 1)\r\n\r\nfunction chart_pie_school(el, name, value, color, type) {\r\n    let upimg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAANCAMAAACn6Q83AAAABGdBTUEAALGPC/xhBQAAACBjSFJN\\n' +\r\n        'AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAM1BMVEX///9KulJKulJKulJK\\n' +\r\n        'ulJKulJKulJKulJKulJKulJKulJKulJKulJKulJKulJKulL///8tQVTZAAAAD3RSTlMAZjz5HOkK\\n' +\r\n        'y6JxcjAzh2nPVP2mAAAAAWJLR0QAiAUdSAAAAAd0SU1FB+UDHxcgIpwKzTsAAAA+SURBVAjXncy5\\n' +\r\n        'EQAgDANBgfk/9d8tNlABF22gEaA5h5cX8VchkjGYUqaWk7LwVIDKV0Mf0zBH18UyrvPwww37wgQc\\n' +\r\n        'NUTtbQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMy0zMVQxNTozMjozNCswODowMOdTocgAAAAl\\n' +\r\n        'dEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDMtMzFUMTU6MzI6MzQrMDg6MDCWDhl0AAAAIHRFWHRzb2Z0\\n' +\r\n        'd2FyZQBodHRwczovL2ltYWdlbWFnaWNrLm9yZ7zPHZ0AAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6\\n' +\r\n        'UGFnZXMAMaf/uy8AAAAXdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADEzbcWq4AAAABZ0RVh0VGh1\\n' +\r\n        'bWI6OkltYWdlOjpXaWR0aAAxMAxjO9cAAAAZdEVYdFRodW1iOjpNaW1ldHlwZQBpbWFnZS9wbmc/\\n' +\r\n        'slZOAAAAF3RFWHRUaHVtYjo6TVRpbWUAMTYxNzE3NTk1NDBrtScAAAARdEVYdFRodW1iOjpTaXpl\\n' +\r\n        'ADE5MkJC/UFMUAAAAEV0RVh0VGh1bWI6OlVSSQBmaWxlOi8vL2FwcC90bXAvaW1hZ2VsYy9pbWd2\\n' +\r\n        'aWV3Ml85XzE2MDk5MDM2NjI3OTQyMzA2XzNfWzBd/+8aCAAAAABJRU5ErkJggg=='\r\n    let dowmimg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAANBAMAAABiGeI2AAAABGdBTUEAALGPC/xhBQAAACBjSFJN\\n' +\r\n        'AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAMFBMVEX/////20z/20z/20z/\\n' +\r\n        '20z/20z/20z/20z/20z/20z/20z/20z/20z/20z/20z////YWt/+AAAADnRSTlMAaTAzh3KiCssc\\n' +\r\n        '6Tz5Zikt+0cAAAABYktHRACIBR1IAAAAB3RJTUUH5QMfFx4RYh+3UAAAADhJREFUCNdjYJB795CB\\n' +\r\n        'AT+p7PfuiRFD3Lt3754ysAHJBAb2vncvChgYZr1bCVTDfWYDkGS4y8AAAFWmHLHXwVI5AAAAJXRF\\n' +\r\n        'WHRkYXRlOmNyZWF0ZQAyMDIxLTAzLTMxVDE1OjMwOjE3KzA4OjAwkGtsFQAAACV0RVh0ZGF0ZTpt\\n' +\r\n        'b2RpZnkAMjAyMS0wMy0zMVQxNTozMDoxNyswODowMOE21KkAAAAgdEVYdHNvZnR3YXJlAGh0dHBz\\n' +\r\n        'Oi8vaW1hZ2VtYWdpY2sub3JnvM8dnQAAABh0RVh0VGh1bWI6OkRvY3VtZW50OjpQYWdlcwAxp/+7\\n' +\r\n        'LwAAABd0RVh0VGh1bWI6OkltYWdlOjpIZWlnaHQAMTNtxargAAAAFnRFWHRUaHVtYjo6SW1hZ2U6\\n' +\r\n        'OldpZHRoADEwDGM71wAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVY\\n' +\r\n        'dFRodW1iOjpNVGltZQAxNjE3MTc1ODE3zMxLrgAAABF0RVh0VGh1bWI6OlNpemUAMTkzQkL8gyZn\\n' +\r\n        'AAAARnRFWHRUaHVtYjo6VVJJAGZpbGU6Ly8vYXBwL3RtcC9pbWFnZWxjL2ltZ3ZpZXcyXzlfMTYw\\n' +\r\n        'OTkwMzUzMjYxMDY4MDBfOThfWzBdO1mFrwAAAABJRU5ErkJggg=='\r\n    let option = {\r\n        backgroundColor: '#081c47',\r\n        title: {\r\n            text: '{a|' + value + '}{c|%}',\r\n            x: 'center',\r\n            y: 'center',\r\n            textStyle: {\r\n                rich: {\r\n                    a: {\r\n                        fontSize: 18,\r\n                        color: '#fff'\r\n                    },\r\n\r\n                    c: {\r\n                        fontSize: 14,\r\n                        color: '#ffffff',\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        graphic: {\r\n            elements: [{\r\n                    type: \"text\",\r\n                    z: 4,\r\n                    style: {\r\n                        text: name,\r\n                        fill: '#75adde'\r\n                    },\r\n                    left: 'center',\r\n                    top: '35%'\r\n                },\r\n                {\r\n                    type: \"image\",\r\n                    z: 3,\r\n                    style: {\r\n                        image: type ? upimg : dowmimg,\r\n                        width: 10,\r\n                        height: 13\r\n                    },\r\n                    left: 'center',\r\n                    top: '60%'\r\n                }\r\n            ]\r\n        },\r\n        legend: {\r\n            show: false,\r\n        },\r\n        series: [{\r\n                name: \"外层细线\",\r\n                z: 0,\r\n                type: 'custom',\r\n                coordinateSystem: \"none\",\r\n                renderItem: function(params, api) {\r\n                    return {\r\n                        type: 'arc',\r\n                        shape: {\r\n                            cx: api.getWidth() / 2,\r\n                            cy: api.getHeight() / 2,\r\n                            r: Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8,\r\n                            startAngle: 0,\r\n                            endAngle: 360\r\n                        },\r\n                        style: {\r\n                            stroke: color,\r\n                            fill: \"transparent\",\r\n                            lineWidth: 0.5\r\n                        },\r\n                        silent: true\r\n                    };\r\n                },\r\n                data: [0]\r\n            },\r\n            {\r\n                name: \"外层圆点下\",\r\n                z: 0,\r\n                type: 'custom',\r\n                coordinateSystem: \"none\",\r\n                renderItem: function(params, api) {\r\n                    let x0 = api.getWidth() / 2;\r\n                    let y0 = api.getHeight() / 2;\r\n                    let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8\r\n                    let point = getCirlPoint(x0, y0, r, 45)\r\n                    return {\r\n                        type: 'circle',\r\n                        shape: {\r\n                            cx: point.x,\r\n                            cy: point.y,\r\n                            r: 1.2\r\n                        },\r\n                        style: {\r\n                            stroke: color,\r\n                            fill: color\r\n                        },\r\n                        silent: true\r\n                    };\r\n                },\r\n                data: [0]\r\n            },\r\n            {\r\n                name: \"外层圆点上\",\r\n                z: 0,\r\n                type: 'custom',\r\n                coordinateSystem: \"none\",\r\n                renderItem: function(params, api) {\r\n                    let x0 = api.getWidth() / 2;\r\n                    let y0 = api.getHeight() / 2;\r\n                    let r = Math.min(api.getWidth(), api.getHeight()) / 2 * 0.8;\r\n                    let point = getCirlPoint(x0, y0, r, 225)\r\n                    return {\r\n                        type: 'circle',\r\n                        shape: {\r\n                            cx: point.x,\r\n                            cy: point.y,\r\n                            r: 1.2\r\n                        },\r\n                        style: {\r\n                            stroke: color,\r\n                            fill: color\r\n                        },\r\n                        silent: true\r\n                    };\r\n                },\r\n                data: [0]\r\n            },\r\n            {\r\n                name: name,\r\n                type: 'pie',\r\n                radius: ['65%', '75%'],\r\n                silent: true,\r\n                clockwise: false,\r\n                startAngle: 90,\r\n                z: 1,\r\n                zlevel: 0,\r\n                label: {\r\n                    normal: {\r\n                        position: \"center\",\r\n\r\n                    }\r\n                },\r\n                data: [{\r\n                        value: value,\r\n                        name: \"\",\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: color,\r\n                            }\r\n                        }\r\n                    },\r\n                    {\r\n                        value: 100 - value,\r\n                        name: \"\",\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: \"rgba(0,0,0,0)\"\r\n                            }\r\n                        }\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                name: \"刻度间隔\",\r\n                z: 2,\r\n                type: \"gauge\",\r\n                radius: '75%',\r\n                center: ['50%', '50%'],\r\n                startAngle: 0,\r\n                endAngle: 359.9,\r\n                splitNumber: 30,\r\n                hoverAnimation: true,\r\n                axisTick: {\r\n                    show: true,\r\n                    splitNumber: 1,\r\n                    length: '14%',\r\n                    lineStyle: {\r\n                        width: 2,\r\n                        color: \"#061740\"\r\n                    }\r\n                },\r\n                splitLine: {\r\n                    show: false,\r\n                },\r\n                axisLabel: {\r\n                    show: false\r\n                },\r\n                pointer: {\r\n                    show: false\r\n                },\r\n                axisLine: {\r\n                    lineStyle: {\r\n                        opacity: 0,\r\n                    }\r\n                },\r\n                detail: {\r\n                    show: false\r\n                },\r\n                data: [0]\r\n            },\r\n            {\r\n                name: \"内层细线\",\r\n                type: \"pie\",\r\n                radius: ['54%', '55%'],\r\n                hoverAnimation: false,\r\n                startAngle: 135,\r\n                color: [color],\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                data: [100]\r\n            },\r\n            {\r\n                name: '内层饼图',\r\n                type: \"pie\",\r\n                radius: ['53%', '56%'],\r\n                hoverAnimation: false,\r\n                startAngle: 90,\r\n                color: [color],\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                data: [{\r\n                        value: value,\r\n                        name: \"\",\r\n                        itemStyle: {\r\n                            color: color,\r\n                        }\r\n                    },\r\n                    {\r\n                        value: 100 - value,\r\n                        name: \"\",\r\n                        itemStyle: {\r\n                            color: 'rgba(0,0,0,0)',\r\n                        }\r\n                    }\r\n                ]\r\n            }\r\n        ]\r\n    };\r\n\r\n    //获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\r\n    function getCirlPoint(x0, y0, r, angle) {\r\n        let x1 = x0 + r * Math.cos(angle * Math.PI / 180)\r\n        let y1 = y0 + r * Math.sin(angle * Math.PI / 180)\r\n        return {\r\n            x: x1,\r\n            y: y1\r\n        }\r\n    }\r\n\r\n    myChart.setOption(option)\r\n}","html":"","externalScripts":"","updaterUID":"obd-ojY2SoNvjWizfqUywqIqYSYrmEhJ9EZ","theme":"","layout":"","viewCount":54,"userName":"溢***诗","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xZ0CiLHUcs.png?v=1617176564747","isCustomThumbnail":0,"builtinTags":["category-work","graphic","legend","series-custom","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"溢***诗"}}