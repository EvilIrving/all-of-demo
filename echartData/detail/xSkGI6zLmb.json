{"status":0,"data":{"cid":"xSkGI6zLmb","authorUid":"bd-289361150","authorUserName":"嘉诚俊男","title":"1980年以来中国各省GDP排名变化情况","description":"GDP单位:亿元","latestVersion":1,"alwaysLatest":1,"createTime":"2017-06-20T03:58:01.000Z","lastUpdateTime":"2017-06-20T03:58:01.000Z","auth":2,"uid":"bd-289361150","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.6.2","versionCreateTime":"2017-06-20T03:58:01.000Z","code":" var data = [{\r\n    \"time\": 1980,\r\n    \"data\": [{\r\n        \"name\": \"台湾\",\r\n        \"value\": [633.76, 12.28, \"台湾\"]\r\n    }, {\r\n        \"name\": \"香港\",\r\n        \"value\": [432.47, 8.38, \"香港\"]\r\n    }, {\r\n        \"name\": \"江苏\",\r\n        \"value\": [319.80, 6.20, \"江苏\"]\r\n    }, {\r\n        \"name\": \"上海\",\r\n        \"value\": [311.89, 6.05, \"上海\"]\r\n    }, {\r\n        \"name\": \"山东\",\r\n        \"value\": [292.13, 5.66, \"山东\"]\r\n    }, {\r\n        \"name\": \"辽宁\",\r\n        \"value\": [281, 5.45, \"辽宁\"]\r\n    }, {\r\n        \"name\": \"广东\",\r\n        \"value\": [249.65, 4.84, \"广东\"]\r\n    }, {\r\n        \"name\": \"四川\",\r\n        \"value\": [229.31, 4.44, \"四川\"]\r\n    }, {\r\n        \"name\": \"河南\",\r\n        \"value\": [229.16, 4.44, \"河南\"]\r\n    }, {\r\n        \"name\": \"黑龙江\",\r\n        \"value\": [221.00, 4.28, \"黑龙江\"]\r\n    }]\r\n}, {\r\n    \"time\": 2000,\r\n    \"data\": [{\r\n        \"name\": \"台湾\",\r\n        \"value\": [27435.15, 19.47, \"台湾\"]\r\n    }, {\r\n        \"name\": \"香港\",\r\n        \"value\": [14201.59, 10.08, \"香港\"]\r\n    }, {\r\n        \"name\": \"广东\",\r\n        \"value\": [10741.25, 7.62, \"广东\"]\r\n    }, {\r\n        \"name\": \"江苏\",\r\n        \"value\": [8553.69, 6.07, \"江苏\"]\r\n    }, {\r\n        \"name\": \"山东\",\r\n        \"value\": [8337.47, 5.92, \"山东\"]\r\n    }, {\r\n        \"name\": \"浙江\",\r\n        \"value\": [6141.03, 4.36, \"浙江\"]\r\n    }, {\r\n        \"name\": \"河南\",\r\n        \"value\": [5052.99, 3.59, \"河南\"]\r\n    }, {\r\n        \"name\": \"河北\",\r\n        \"value\": [5043.96, 3.58, \"河北\"]\r\n    }, {\r\n        \"name\": \"上海\",\r\n        \"value\": [4771.17, 3.39, \"上海\"]\r\n    }, {\r\n        \"name\": \"辽宁\",\r\n        \"value\": [4669.10, 3.31, \"辽宁\"]\r\n    }]\r\n},{\r\n    \"time\": 2005,\r\n    \"data\": [{\r\n        \"name\": \"台湾\",\r\n        \"value\": [30792.89, 12.52, \"台湾\"]\r\n    }, {\r\n        \"name\": \"广东\",\r\n        \"value\": [22527.37, 9.16, \"广东\"]\r\n    }, {\r\n        \"name\": \"江苏\",\r\n        \"value\": [18598.69, 7.56, \"江苏\"]\r\n    }, {\r\n        \"name\": \"山东\",\r\n        \"value\": [18366.87, 7.47, \"山东\"]\r\n    }, {\r\n        \"name\": \"香港\",\r\n        \"value\": [14869.68, 6.05, \"香港\"]\r\n    }, {\r\n        \"name\": \"浙江\",\r\n        \"value\": [13417.68, 5.46, \"浙江\"]\r\n    }, {\r\n        \"name\": \"河南\",\r\n        \"value\": [10587.42, 4.30, \"河南\"]\r\n    }, {\r\n        \"name\": \"河北\",\r\n        \"value\": [10043.42, 4.08, \"河北\"]\r\n    }, {\r\n        \"name\": \"上海\",\r\n        \"value\": [9247.66, 3.76, \"上海\"]\r\n    }, {\r\n        \"name\": \"辽宁\",\r\n        \"value\": [8047.3, 3.27, \"辽宁\"]\r\n    }]\r\n} ,{\r\n    \"time\": 2010,\r\n    \"data\": [{\r\n        \"name\": \"广东\",\r\n        \"value\": [46036.25, 9.49, \"广东\"]\r\n    }, {\r\n        \"name\": \"江苏\",\r\n        \"value\": [41425.48, 8.54, \"江苏\"]\r\n    }, {\r\n        \"name\": \"山东\",\r\n        \"value\": [39169.92, 8.08, \"山东\"]\r\n    }, {\r\n        \"name\": \"台湾\",\r\n        \"value\": [30205.64, 6.23, \"台湾\"]\r\n    }, {\r\n        \"name\": \"浙江\",\r\n        \"value\": [27747.65, 5.72, \"浙江\"]\r\n    }, {\r\n        \"name\": \"河南\",\r\n        \"value\": [23092.36, 4.76, \"河南\"]\r\n    }, {\r\n        \"name\": \"河北\",\r\n        \"value\": [20394.26, 4.21, \"河北\"]\r\n    }, {\r\n        \"name\": \"辽宁\",\r\n        \"value\": [18457.3, 3.81, \"辽宁\"]\r\n    }, {\r\n        \"name\": \"四川\",\r\n        \"value\": [17185.48, 3.54, \"四川\"]\r\n    }, {\r\n        \"name\": \"上海\",\r\n        \"value\": [17165.98, 3.54, \"上海\"]\r\n    }]\r\n} ,{\r\n    \"time\": 2015,\r\n    \"data\": [{\r\n        \"name\": \"广东\",\r\n        \"value\": [72812.55, 9.35, \"广东\"]\r\n    }, {\r\n        \"name\": \"江苏\",\r\n        \"value\": [70116.38, 9, \"江苏\"]\r\n    }, {\r\n        \"name\": \"山东\",\r\n        \"value\": [63002.3, 8.09, \"山东\"]\r\n    }, {\r\n        \"name\": \"浙江\",\r\n        \"value\": [42886, 5.51, \"浙江\"]\r\n    }, {\r\n        \"name\": \"河南\",\r\n        \"value\": [37010.25, 4.75, \"河南\"]\r\n    }, {\r\n        \"name\": \"台湾\",\r\n        \"value\": [32604.52, 4.19, \"台湾\"]\r\n    }, {\r\n        \"name\": \"四川\",\r\n        \"value\": [30103.1, 3.87, \"四川\"]\r\n    }, {\r\n        \"name\": \"河北\",\r\n        \"value\": [29806.1, 3.83, \"河北\"]\r\n    }, {\r\n        \"name\": \"湖北\",\r\n        \"value\": [29550.19, 3.8, \"湖北\"]\r\n    }, {\r\n        \"name\": \"湖南\",\r\n        \"value\": [29047.20, 3.73, \"湖南\"]\r\n    }]\r\n} ]\r\n\r\n\r\nvar option = {\r\n    backgroundColor: '#25499F',\r\n    baseOption: {\r\n        animationDurationUpdate: 1000,\r\n        animationEasingUpdate: 'quinticInOut',\r\n        timeline: {\r\n            axisType: 'category',\r\n            orient: 'vertical',\r\n            autoPlay: true,\r\n            inverse: true,\r\n            playInterval: 5000,\r\n            left: null,\r\n            right: 5,\r\n            top: 20,\r\n            bottom: 20,\r\n            width: 46,\r\n            height: null,\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            symbol: 'none',\r\n            lineStyle: {\r\n                color: '#555'\r\n            },\r\n            checkpointStyle: {\r\n                color: '#bbb',\r\n                borderColor: '#777',\r\n                borderWidth: 1\r\n            },\r\n            controlStyle: {\r\n                showNextBtn: false,\r\n                showPrevBtn: false,\r\n                normal: {\r\n                    color: '#666',\r\n                    borderColor: '#666'\r\n                },\r\n                emphasis: {\r\n                    color: '#aaa',\r\n                    borderColor: '#aaa'\r\n                }\r\n            },\r\n            data: data.map(function(ele) {\r\n                return ele.time\r\n            })\r\n        },\r\n        backgroundColor: '#25499F',\r\n        title: {\r\n            text: '1980年以来中国各省GDP排名变化情况',\r\n            subtext: 'GDP单位:亿元',\r\n            left: 'center',\r\n            top: 'top',\r\n            textStyle: {\r\n                fontSize: 25,\r\n                color: 'rgba(255,255,255, 0.9)'\r\n            }\r\n        },\r\n        tooltip: {\r\n            formatter: function(params) {\r\n                if ('value' in params.data) {\r\n                    return params.data.value[2] + ': ' + params.data.value[0];\r\n                }\r\n            }\r\n        },\r\n        grid: {\r\n            left: 10,\r\n            right: '45%',\r\n            top: '70%',\r\n            bottom: 5\r\n        },\r\n        xAxis: {},\r\n        yAxis: {},\r\n        series: [{\r\n            id: 'map',\r\n            type: 'map',\r\n            mapType: 'china',\r\n            top: '10%',\r\n            //bottom: '25%',\r\n            //left: '5%',\r\n            //right: '10%',\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#323c48',\r\n                    borderColor: '#404a59'\r\n                },\r\n                emphasis: {\r\n                    label: {\r\n                        show: true\r\n                    },\r\n                    areaColor: 'rgba(255,255,255, 0.5)'\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'bar',\r\n            type: 'bar',\r\n            tooltip: {\r\n                show: false\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'pie',\r\n            type: 'pie',\r\n            radius: ['12%', '20%'],\r\n            center: ['75%', '85%'],\r\n            //roseType: 'area',\r\n            tooltip: {\r\n                formatter: '{b} {d}%'\r\n            },\r\n            data: [],\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: 'rgba(0,0,0,0.3)',\r\n                    borderSize: 1\r\n                }\r\n            }\r\n        }]\r\n    },\r\n    options: []\r\n}\r\n\r\nfor (var i = 0; i < data.length; i++) {\r\n    //计算其余省份GDP\r\n    var restPercent = 100;\r\n    var restValue = 0;\r\n    data[i].data.forEach(function(ele) {\r\n        restPercent = restPercent - ele.value[1];\r\n    });\r\n    restValue = data[i].data[0].value[0] * (restPercent / data[i].data[0].value[1]);\r\n    console.log(restPercent);\r\n    console.log(restValue);\r\n    option.options.push({\r\n        visualMap: [{\r\n            //type:'continous',\r\n            //type: 'continuous',\r\n            calculable: true,\r\n            dimension: 0,\r\n            left: 10,\r\n            top: 'center',\r\n            itemWidth: 12,\r\n            min: data[i].data[9].value[0],\r\n            max: data[i].data[0].value[0],\r\n            text: ['High', 'Low'],\r\n            textStyle: {\r\n                color: '#ddd'\r\n            },\r\n            inRange: {\r\n//                color: ['lightskyblue', 'yellow', 'orangered', 'red']\r\n                color: ['lightskyblue', 'yellow', 'orangered']\r\n            }\r\n        }],\r\n        xAxis: {\r\n            type: 'value',\r\n            boundaryGap: [0, 0.1],\r\n            axisLabel: {\r\n                show: false,\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            }\r\n        },\r\n        yAxis: {\r\n            type: 'category',\r\n            axisLabel: {\r\n                show: false,\r\n                textStyle: {\r\n                    color: '#ddd'\r\n                }\r\n            },\r\n\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[2]\r\n            }).reverse()\r\n        },\r\n        series: [{\r\n            id: 'map',\r\n            data: data[i].data\r\n        }, {\r\n            id: 'bar',\r\n            label: {\r\n                normal: {\r\n                    position: 'right',\r\n                    formatter: '{b} : {c}'\r\n                }\r\n            },\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[0]\r\n            }).sort(function(a, b) {\r\n                return a > b\r\n            })\r\n        }, {\r\n            id: 'pie',\r\n            data: data[i].data.map(function(ele) {\r\n                return {\r\n                    name: ele.value[2],\r\n                    value: ele.value\r\n                }\r\n            }).concat({\r\n                name: '其他省份',\r\n                value: restValue\r\n            }),\r\n        }]\r\n    })\r\n}","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-289361150","theme":"","layout":"","viewCount":9301,"userName":"嘉诚俊男","commentCount":0,"starCount":18,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkGI6zLmb.png?v=1497931081722","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-map","series-pie","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"嘉诚俊男"}}