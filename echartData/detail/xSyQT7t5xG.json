{"status":0,"data":{"cid":"xSyQT7t5xG","authorUid":"bd-536890673","authorUserName":"s***s","title":"温度计 x professional edition","description":"温度计的实现，带刻度","latestVersion":1,"alwaysLatest":1,"createTime":"2017-11-28T06:35:38.000Z","lastUpdateTime":"2017-11-28T06:35:38.000Z","auth":2,"uid":"bd-536890673","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2017-11-28T06:35:38.000Z","code":"//刻度\r\ntext = ['35', '36', '37', '38', '39', '40', '41'];\r\n\r\n//原始数据\r\nvar value = 37.5;\r\n\r\n//设置温度计颜色\r\nvar mercuryColor = '#fd4d49';\r\nvar borderColor = '#fd4d49';\r\n\r\n//计算x轴最大值和bar长度\r\nfunction getAxisMax(data) {\r\n    var Max = {};\r\n    Max.maxAxis0 = data.length * 20;\r\n    Max.maxAxis1 = data.length * 2 - 1;\r\n    Max.lenOuterBar = [data.length * 20];\r\n    Max.lenInnerBar = [data.length * 20 * 0.99];\r\n    return Max;\r\n}\r\nmax = getAxisMax(text)\r\n\r\n//将原始数据转换为图上显示的数值\r\nfunction getData(value) {\r\n    return [value * 20 + -684.5];\r\n}\r\nvar data = getData(value);\r\n\r\n//构造显示刻度\r\nfunction getScale(data) {\r\n    scale = [{\r\n        value: 0,\r\n        label: {\r\n            normal: {\r\n                formatter: ''\r\n            }\r\n        }\r\n    }];\r\n    for (var i in data) {\r\n        scale.push({\r\n            value: 10,\r\n            label: {\r\n                normal: {\r\n                    formatter: data[i]\r\n                }\r\n            }\r\n        });\r\n        if (i == (data.length - 1)) {\r\n            break;\r\n        }\r\n        scale.push({\r\n            value: 5,\r\n            label: {\r\n                normal: {\r\n                    formatter: ''\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return scale;\r\n}\r\nscale = getScale(text);\r\n\r\noption = {\r\n    title: {\r\n        text: '温度计 x professional edition',\r\n        show: false\r\n    },\r\n    xAxis: [{\r\n        show: false,\r\n        min: 0,\r\n        max: max.maxAxis0\r\n    }, {\r\n        show: false,\r\n        data: [],\r\n        min: 0,\r\n        max: max.maxAxis1,\r\n    }],\r\n    yAxis: [{\r\n        show: false,\r\n        data: [],\r\n    }, {\r\n        show: false,\r\n        data: [],\r\n    }, {\r\n        show: false,\r\n        data: [],\r\n    }, {\r\n        show: false,\r\n        min: -110, //根据容器大小调整此处最小值和最大值，以正常显示刻度\r\n        max: 93,\r\n    }],\r\n    series: [{\r\n        name: '条',\r\n        type: 'bar',\r\n        yAxisIndex: 0,\r\n        data: data,\r\n        barWidth: 18,\r\n        itemStyle: {\r\n            normal: {\r\n                color: mercuryColor,\r\n                barBorderRadius: 40,\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白框',\r\n        type: 'bar',\r\n        yAxisIndex: 1,\r\n        barGap: '-100%',\r\n        data: max.lenInnerBar,\r\n        barWidth: 28,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ffffff',\r\n                barBorderRadius: 40,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外框',\r\n        type: 'bar',\r\n        yAxisIndex: 2,\r\n        barGap: '-100%',\r\n        data: max.lenOuterBar,\r\n        barWidth: 38,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                barBorderRadius: 40,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        yAxisIndex: 0,\r\n        symbolSize: 48,\r\n        itemStyle: {\r\n            normal: {\r\n                color: mercuryColor,\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 2\r\n    }, {\r\n        name: '白圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        yAxisIndex: 1,\r\n        symbolSize: 60,\r\n        itemStyle: {\r\n            normal: {\r\n                color: '#ffffff',\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 1\r\n    }, {\r\n        name: '外圆',\r\n        type: 'scatter',\r\n        hoverAnimation: false,\r\n        data: [0],\r\n        yAxisIndex: 2,\r\n        symbolSize: 70,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                opacity: 1,\r\n            }\r\n        },\r\n        z: 0\r\n    }, {\r\n        name: '刻度',\r\n        type: 'bar',\r\n        xAxisIndex: 1,\r\n        yAxisIndex: 3,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top',\r\n                distance: 12,\r\n                color: '#525252',\r\n                fontSize: 20,\r\n            }\r\n        },\r\n        barGap: '-100%',\r\n        data: scale,\r\n        barWidth: 5,\r\n        itemStyle: {\r\n            normal: {\r\n                color: borderColor,\r\n                barBorderRadius: 10,\r\n            }\r\n        },\r\n        z: 0\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-536890673","theme":"","layout":"","viewCount":880,"userName":"s***s","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSyQT7t5xG.png?v=1511850938961","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter","title"],"customTags":["thermometer","温度计"],"updaterUserName":"s***s"}}