{"status":0,"data":{"cid":"xC20BoPPet","authorUid":"obd-oD-Fg87qxxsXi2S0LWsaFu11fZtBj1L","authorUserName":"少***i","title":"饼图渐变","description":"30%","latestVersion":1,"alwaysLatest":1,"createTime":"2021-01-05T06:24:34.000Z","lastUpdateTime":"2021-01-05T06:24:34.000Z","auth":2,"uid":"obd-oD-Fg87qxxsXi2S0LWsaFu11fZtBj1L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-05T06:24:35.000Z","code":"data = [{\r\n        name: \"公路工程\",\r\n        value: 754,\r\n        num: 12,\r\n        percentage: 20\r\n    },\r\n    {\r\n        name: \"高速公路\",\r\n        value: 611,\r\n        num: 13,\r\n        percentage: 40\r\n    },\r\n    {\r\n        name: \"综合交通枢纽及一体化设施\",\r\n        value: 400,\r\n        num: 14,\r\n        percentage: 10\r\n    },\r\n    {\r\n        name: \"普通公路\",\r\n        value: 200,\r\n        num: 15,\r\n        percentage: 30\r\n    }\r\n]\r\narrName = getArrayValue(data, \"name\");\r\nobjData = array2obj(data, \"name\");\r\nconsole.log(objData)\r\n\r\nfunction getArrayValue(array, key) {\r\n    var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction array2obj(array, key) {\r\n    var resObj = {};\r\n    for (var i = 0; i < array.length; i++) {\r\n        resObj[array[i][key]] = array[i];\r\n    }\r\n    return resObj;\r\n}\r\nvar option = {\r\n    backgroundColor: '#03060F',\r\n    legend: {\r\n        show: true,\r\n        icon: \"circle\",\r\n        top: \"center\",\r\n        right: '20%',\r\n        data: ['公路工程', '高速公路', '综合交通枢纽及一体化设施', '普通公路'],\r\n        width: 50,\r\n        padding: [0, 5],\r\n        itemGap: 25,\r\n        formatter: function(name) {\r\n            var text = name\r\n            if (name.length > 7 && name.length <= 16) {\r\n                text = `${name.slice(0,7)}\\n${name.slice(7)}`\r\n            }\r\n            var result = \"{title|\" + text + \" \" + (objData[name].percentage) + \"%}\"\r\n            return result\r\n        },\r\n\r\n        textStyle: {\r\n            rich: {\r\n                title: {\r\n                    fontSize: 14,\r\n                    lineHeight: 15,\r\n                    color: \"#ffffff\"\r\n                },\r\n            }\r\n        },\r\n    },\r\n    tooltip: {\r\n        show: true,\r\n        trigger: \"item\",\r\n        formatter: function(params) {\r\n            console.log(objData[params.name].num)\r\n            var result = params.name + '<br>';\r\n            result = '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;' +\r\n                'width:9px;height:9px;background-color:' + params.color.colorStops[0].color + '\"></span>' + result;\r\n            result += '\\n投资额(万元)：' + objData[params.name].value\r\n            result += '<br>项目数(件)：' + objData[params.name].num\r\n            // 判断设置增长还是降低\r\n            return result;\r\n        }\r\n    },\r\n    title: {\r\n        text: '普通公路',\r\n        subtext: '30%',\r\n        textStyle: {\r\n            fontSize: 14,\r\n            color: '#ffffff'\r\n        },\r\n        subtextStyle: {\r\n            color: '#ffffff',\r\n            fontSize: 32,\r\n        },\r\n        x: '22%',\r\n        y: '46%',\r\n    },\r\n    series: [{\r\n        type: 'pie',\r\n        center: [\"25%\", \"50%\"],\r\n        color: [{\r\n                type: 'radial',\r\n                x: 0.1,\r\n                r: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#007aff' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#133ffd' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n            {\r\n                type: 'radial',\r\n                x: 0.1,\r\n                r: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#6a47ff' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#637fea' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n            {\r\n                type: 'radial',\r\n                x: 0.1,\r\n                r: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#e4ad37' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#d5ffac' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n            {\r\n                type: 'radial',\r\n                x: 0.1,\r\n                r: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: '#29c5ff' // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: '#20ddff' // 100% 处的颜色\r\n                }],\r\n                global: false // 缺省为 false\r\n            },\r\n\r\n        ],\r\n        radius: [60, 90],\r\n        label: {\r\n            show: false,\r\n        },\r\n        data: data\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oD-Fg87qxxsXi2S0LWsaFu11fZtBj1L","theme":"","layout":"","viewCount":63,"userName":"少***i","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xC20BoPPet.png?v=1609827875189","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"少***i"}}