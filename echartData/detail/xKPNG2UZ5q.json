{"status":0,"data":{"cid":"xKPNG2UZ5q","authorUid":"bd-4256274292","authorUserName":"t***g","title":"EC模式3小时间隔10米风预报2","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-06T10:49:57.000Z","lastUpdateTime":"2019-03-06T10:49:57.000Z","auth":2,"uid":"bd-4256274292","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-06T10:49:57.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1551866913540-ONANuDLiY.json\";\n  var lat = \"35.24\",lon = \"113.6\";\n$.getJSON(uploadedDataURL, function(rawData) {\n\n    var directionMap = {};\n    echarts.util.each(\n        ['W', 'WSW', 'SW', 'SSW', 'S', 'SSE', 'SE', 'ESE', 'E', 'ENE', 'NE', 'NNE', 'N', 'NNW', 'NW', 'WNW'],\n        function (name, index) {\n            directionMap[name] = Math.PI / 8 * index;\n        }\n    );\n\n    var data = echarts.util.map(rawData.data, function (entry) {\n        return [entry.time, entry.windSpeed, entry.R];\n    });\n\n    var dims = {\n        time: 0,\n        windSpeed: 1,\n        R: 2,\n    };\n    var arrowSize = 18;\n\n    function renderArrow(param, api) {\n       var point = api.coord([\n            api.value(dims.time),\n            api.value(dims.windSpeed)\n        ]);\n    \n        var strokeColor = '';\n        if(api.value(dims.windSpeed)<9){\n            strokeColor = '#d88273'\n        }else if(api.value(dims.windSpeed)<10){\n            strokeColor = 'blue'\n        }else{\n            strokeColor = 'red'\n        }\n        return {\n            type: 'path',\n            shape: {\n                pathData: 'M22 6 L10 6 L10 16 L22 16 L10 16 L10 46',\n                x: -arrowSize / 2,\n                y: -arrowSize / 2,\n                width: arrowSize,\n                height: arrowSize\n            },\n            rotation: directionMap[api.value(dims.R)],\n            position: [point[0],100],\n            style: api.style({\n                stroke: strokeColor,\n                fill:'none',\n                lineWidth: 1\n            })\n      };\n    }\n\n    option = {\n        title: [{\n              text: 'EC模式3小时间隔10米风预报',\n              left: 'center',\n          }, {\n              text: `lat:+${lat} lon:${lon}`,\n              textStyle: {\n                  fontWeight: 'normal',\n                  color: 'red',\n              },\n              top: 30,\n              left: 70\n          }, {\n              text: `2017082912`,\n              textStyle: {\n                  fontWeight: 'normal',\n                  color: 'blue',\n              },\n              top: 30,\n              left: 'center',\n          }, {\n              text: `000-072`,\n              textStyle: {\n                  fontWeight: 'normal',\n                  color: 'blue',\n              },\n              top: 30,\n              right: '70',\n          },{\n              text: `Aug`,\n              textStyle: {\n                  fontWeight: 'normal',\n                  color: 'red',\n              },\n              bottom: 15,\n              left: '70',\n          }, {\n              text: `北京时`,\n              textStyle: {\n                  fontWeight: 'normal',\n              },\n              bottom: 15,\n              right: '70',\n        }],\n        tooltip: {\n            trigger: 'axis',\n            formatter: function (params) {\n                return [\n                    echarts.format.formatTime('yyyy-MM-dd', params[0].value[dims.time])\n                    + ' ' + echarts.format.formatTime('hh:mm', params[0].value[dims.time]),\n                    '风速：' + params[0].value[dims.windSpeed],\n                    '风向：' + params[0].value[dims.R]\n                ].join('<br>');\n            }\n        },\n        grid: {\n            top: 130,\n            bottom: 125\n        },\n        xAxis: {\n            type: 'time',\n            maxInterval: 3600 * 1000 * 24,\n            splitLine: {\n                lineStyle: {\n                    color: '#ddd'\n                }\n            }\n        },\n        yAxis: [{\n            type: 'value',\n            name: '风速 (米/秒)',\n            nameLocation: 'center',\n            nameGap: '40',\n            max: function(v) {\n                return Math.floor(v.max+10);\n            },\n        }, {\n            axisLine: {show: false},\n            axisTick: {show: false},\n            axisLabel: {show: false},\n            splitLine: {show: false},\n            \n        }],\n        dataZoom: [{\n            type: 'inside',\n            xAxisIndex: 0,\n            minSpan: 5\n        }, {\n            type: 'slider',\n            xAxisIndex: 0,\n            minSpan: 5,\n            height: 20,\n            bottom: 50,\n            show:false,\n            handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',\n            handleSize: '120%'\n        }],\n        series: [{\n            type: 'custom',\n            renderItem: renderArrow,\n            encode: {\n                x: dims.time,\n                y: dims.windSpeed\n            },\n            data: data,\n            z: 10\n        }, {\n            name: '风速',\n              type: 'bar',\n              xAxisIndex: 0,\n              yAxisIndex: 0,\n              label: {\n                  show: true,\n                  position: 'top',\n              },\n              encode: {\n                  x: dims.time,\n                  y: dims.windSpeed\n              },\n              data: data,\n              markPoint: {\n                  data: [{\n                      type: 'max',\n                      name: '最大值'\n                  }, ],\n                  symbol: 'rect',\n                  symbolSize: '1',\n                  symbolOffset: [0, '15'],\n                  label: {\n                      color: 'red'\n                  }\n              },\n        }]\n    };\n\n    myChart.setOption(option);\n})","html":"","externalScripts":"","updaterUID":"bd-4256274292","theme":"","layout":"","viewCount":120,"userName":"t***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xKPNG2UZ5q.png?v=1551869397896","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","markPoint","series-bar","series-custom","title","tooltip"],"customTags":[],"updaterUserName":"t***g"}}