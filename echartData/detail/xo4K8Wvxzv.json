{"status":0,"data":{"cid":"xo4K8Wvxzv","authorUid":"obd-oAYF5aLj7TyP90IaQ9NEoF7yGbKQY7Y","authorUserName":"灬***颜","title":"单地区发散图表","description":"描述某地区向其它地区输送物资等各种情况","latestVersion":1,"alwaysLatest":1,"createTime":"2021-04-17T04:56:05.000Z","lastUpdateTime":"2021-04-17T04:56:05.000Z","auth":2,"uid":"obd-oAYF5aLj7TyP90IaQ9NEoF7yGbKQY7Y","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-04-17T04:56:05.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\r\n\r\n\r\nvar geoGpsMap = [101.4038, 36.8207]\r\nvar geoCoordMap = {\r\n    \"江苏\": [118.8062, 31.9208],\r\n    '黑龙江': [127.9688, 45.368],\r\n    '内蒙古': [110.3467, 41.4899],\r\n    \"吉林\": [125.8154, 44.2584],\r\n    '北京市': [116.4551, 40.2539],\r\n    \"辽宁\": [123.1238, 42.1216],\r\n    \"河北\": [114.4995, 38.1006],\r\n    \"天津\": [117.4219, 39.4189],\r\n    \"山西\": [112.3352, 37.9413],\r\n    \"陕西\": [109.1162, 34.2004],\r\n    \"甘肃\": [103.5901, 36.3043],\r\n    \"宁夏\": [106.3586, 38.1775],\r\n    \"青海\": [101.4038, 36.8207],\r\n    \"新疆\": [87.9236, 43.5883],\r\n    \"四川\": [103.9526, 30.7617],\r\n    \"重庆\": [108.384366, 30.439702],\r\n    \"山东\": [117.1582, 36.8701],\r\n    \"河南\": [113.4668, 34.6234],\r\n    \"安徽\": [117.29, 32.0581],\r\n    \"湖北\": [114.3896, 30.6628],\r\n    \"浙江\": [119.5313, 29.8773],\r\n    \"福建\": [119.4543, 25.9222],\r\n    \"江西\": [116.0046, 28.6633],\r\n    \"湖南\": [113.0823, 28.2568],\r\n    \"贵州\": [106.6992, 26.7682],\r\n    \"云南\": [102.9199, 25.4663],\r\n    \"广东\": [113.12244, 23.009505],\r\n    \"广西\": [108.479, 23.1152],\r\n    \"海南\": [110.3893, 19.8516],\r\n    '上海': [121.4648, 31.2891],\r\n};\r\n\r\nvar value = {\r\n    '江苏': 10000,\r\n    '黑龙江': 10000,\r\n    '内蒙古': 10000,\r\n    '吉林': 10000,\r\n    '北京市': 35000,\r\n    '辽宁': 10000,\r\n    '河北': 10000,\r\n    '天津': 10000,\r\n    '山西': 10000,\r\n    '陕西': 10000,\r\n    '甘肃': 10000,\r\n    '宁夏': 10000,\r\n    '青海': 10000,\r\n    '新疆': 10000,\r\n    '四川': 10000,\r\n    '重庆': 10000,\r\n    '山东': 10000,\r\n    '河南': 10000,\r\n    '安徽': 10000,\r\n    '湖北': 10000,\r\n    '浙江': 10000,\r\n    '福建': 10000,\r\n    '江西': 10000,\r\n    '湖南': 10000,\r\n    '贵州': 10000,\r\n    '云南': 10000,\r\n    '广东': 25000,\r\n    '广西': 10000,\r\n    '海南': 10000,\r\n    '上海': 30000,\r\n\r\n\r\n\r\n};\r\nvar colors = '#25CEF3';\r\n$(function() {\r\n\r\n\r\n    var year = [\"长春\", \"长春\", \"青岛\", \"青岛\", \"成都\", \"成都\"];\r\n    var mapData = [];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var barData = [];\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData.push({\r\n            \"year\": '青海',\r\n            \"name\": key,\r\n            \"value\": value[key] / 100,\r\n            \"value1\": value[key] / 100,\r\n        });\r\n    }\r\n\r\n    mapData.sort(function sortNumber(a, b) {\r\n        return a.value - b.value\r\n    });\r\n    for (var j = 0; j < mapData.length; j++) {\r\n        barData.push(mapData[j].value1);\r\n        categoryData.push(mapData[j].name);\r\n    }\r\n    console.log(mapData)\r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n        console.log(geoJson)\r\n        echarts.registerMap('china', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var convertToLineData = function(data, gps) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var toCoord = geoCoordMap[dataItem.name];\r\n                debugger;\r\n                var fromCoord = gps; //郑州\r\n                //  var toCoord = geoGps[Math.random()*3]; \r\n                if (fromCoord && toCoord) {\r\n                    res.push([{\r\n                        coord: fromCoord,\r\n                        value: dataItem.value\r\n                    }, {\r\n                        coord: toCoord,\r\n                    }]);\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n   \r\n        optionXyMap01 = {\r\n            backgroundColor: '#132E75',\r\n            geo: {\r\n                show: true,\r\n                map: 'china',\r\n                roam: true,\r\n                zoom: 1,\r\n                center: [101.4038, 36.8207],\r\n                label: {\r\n                    emphasis: {\r\n                        show: false\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderColor: 'rgba(147, 235, 248, 1)',\r\n                        borderWidth: 1,\r\n                        areaColor: {\r\n                            type: 'radial',\r\n                            x: 0.5,\r\n                            y: 0.5,\r\n                            r: 0.8,\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                            }],\r\n                            globalCoord: false // 缺省为 false\r\n                        },\r\n                        shadowColor: 'rgba(128, 217, 248, 1)',\r\n                        // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                        shadowOffsetX: -2,\r\n                        shadowOffsetY: 2,\r\n                        shadowBlur: 10\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#389BB7',\r\n                        borderWidth: 0\r\n                    }\r\n                }\r\n            },\r\n            series: [\r\n\r\n                //地图？\r\n                {\r\n                    type: 'map',\r\n                    map: 'china',\r\n                    geoIndex: 0,\r\n                    aspectScale: 0.75, //长宽比\r\n                    showLegendSymbol: false, // 存在legend时显示\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        },\r\n                        emphasis: {\r\n                            show: false,\r\n                            textStyle: {\r\n                                color: '#fff'\r\n                            }\r\n                        }\r\n                    },\r\n                    roam: true,\r\n                    itemStyle: {\r\n                        normal: {\r\n                            areaColor: '#031525',\r\n                            borderColor: '#FFFFFF',\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#2B91B7'\r\n                        }\r\n                    },\r\n                    animation: false\r\n                },\r\n                //地图点的动画效果\r\n                {\r\n                    //  name: 'Top 5',\r\n                    type: 'effectScatter',\r\n                    coordinateSystem: 'geo',\r\n                    data: convertData(mapData.sort(function(a, b) {\r\n                        return b.value - a.value;\r\n                    }).slice(0, 20)),\r\n                    symbolSize: function(val) {\r\n                        return val[2] / 10;\r\n                    },\r\n                    showEffectOn: 'render',\r\n                    rippleEffect: {\r\n                        brushType: 'stroke'\r\n                    },\r\n                    hoverAnimation: true,\r\n                    label: {\r\n                        normal: {\r\n                            formatter: '{b}',\r\n                            position: 'right',\r\n                            show: true\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: colors,\r\n                            shadowBlur: 10,\r\n                            shadowColor: colors\r\n                        }\r\n                    },\r\n                    zlevel: 1\r\n                },\r\n                //地图线的动画效果\r\n                {\r\n                    type: 'lines',\r\n                    zlevel: 2,\r\n                    effect: {\r\n                        show: true,\r\n                        period: 4, //箭头指向速度，值越小速度越快\r\n                        trailLength: 0.02, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                        symbol: 'arrow', //箭头图标\r\n                        symbolSize: 3, //图标大小\r\n                    },\r\n                    lineStyle: {\r\n                        normal: {\r\n                            color: colors,\r\n                            width: 0.1, //尾迹线条宽度\r\n                            opacity: 0.5, //尾迹线条透明度\r\n                            curveness: .3 //尾迹线条曲直度\r\n                        }\r\n                    },\r\n                    data: convertToLineData(mapData, geoGpsMap)\r\n                }\r\n            ]\r\n\r\n        };\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-oAYF5aLj7TyP90IaQ9NEoF7yGbKQY7Y","theme":"","layout":"","viewCount":111,"userName":"灬***颜","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xo4K8Wvxzv.png?v=1618635365898","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-map"],"customTags":[],"updaterUserName":"灬***颜"}}