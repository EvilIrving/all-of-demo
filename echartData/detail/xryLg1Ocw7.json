{"status":0,"data":{"cid":"xryLg1Ocw7","authorUid":"bd-1998210850","authorUserName":"玉***秋","title":"复合饼图","description":"复合饼图","latestVersion":12,"alwaysLatest":1,"createTime":"2018-09-03T08:21:02.000Z","lastUpdateTime":"2018-09-03T08:21:02.000Z","auth":2,"uid":"bd-1998210850","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":12,"parentVersion":11,"echartsVersion":"4.1.0","versionCreateTime":"2018-09-07T02:58:37.000Z","code":"var data = [{\n        name: '小学',\n        value: 115\n    },\n    {\n        name: '初中及以上',\n        value: 70,\n        isExtend: true\n    },\n    {\n        name: '其他',\n        value: 15\n    }\n]\nvar data1 = [{\n        name: '小学',\n        value: 15\n    },\n    {\n        name: '初中及以上',\n        value: 50\n    },\n    {\n        name: '其他',\n        value: 35\n    }\n]\nvar bigCenterX = 22.5\nvar bigCenterY = 50\nvar bigRadiusInner = 0\nvar bigRadiusOuter = 35\nvar smallCenterX = 80\nvar smallCenterY = 50\nvar smallRadiusInner = 0\nvar smallRadiusOuter = 25\n\n// 扩展item的角度的一半\nvar extendAngle = 0\n// \nvar startAngle = 0\nvar angleCompute = function(arr) {\n    var total = arr.reduce(function(prev, curr, idx, arr) {\n        return prev + curr.value;\n    }, 0)\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i].isExtend) {\n            extendAngle = 360 * arr[i].value / (2 * total)\n        }\n        startAngle += !arr[i].isExtend ? 360 * (arr[i].value / total) : extendAngle\n        if (arr[i].isExtend) {\n            break;\n        }\n    }\n}\nangleCompute(data)\nvar contentWidth = document.querySelector('#chart-panel').offsetWidth - 20\nvar contentHeight = document.querySelector('#chart-panel').offsetHeight - 30\nvar minwidthHeight = Math.min(contentWidth, contentHeight);\nvar smallTopY = contentHeight * smallCenterY / 100 - minwidthHeight * smallRadiusOuter / 200\nvar smallBottomY = contentHeight * smallCenterY / 100 + minwidthHeight * smallRadiusOuter / 200\nvar bigX = contentWidth * bigCenterX / 100 + minwidthHeight * bigRadiusOuter / 200 * Math.cos(Math.PI * extendAngle / 180)\nvar bigTopY = contentHeight * bigCenterY / 100 - minwidthHeight * bigRadiusOuter / 200 * Math.sin(Math.PI * extendAngle / 180)\nvar bigBottomY = contentHeight * bigCenterY / 100 + minwidthHeight * bigRadiusOuter / 200 * Math.sin(Math.PI * extendAngle / 180)\noption = {\n    title: {\n        text: '复合饼图'\n    },\n    series: [{\n            type: 'pie',\n            data: data,\n            center: [bigCenterX + '%', bigCenterY + '%'],\n            radius: [bigRadiusInner + '%', bigRadiusOuter + '%'],\n            startAngle: startAngle,\n            // zlevel: 1,\n            markLine: {\n                silent: false,\n                tooltip: {\n                    show: false\n                },\n                symbol: '',\n                label: {\n                    position: 'middle'\n                },\n                // zlevel: 2,\n                lineStyle: {\n                    type: 'dotted'\n                },\n                data: [\n                    [{\n                            name: '其他',\n                            x: bigX,\n                            y: bigTopY\n                        },\n                        {\n                            x: smallCenterX + '%',\n                            y: smallTopY\n                        }\n                    ],\n                    [{\n                            name: '其他2',\n                            x: bigX,\n                            y: bigBottomY\n                        },\n                        {\n                            x: smallCenterX + '%',\n                            y: smallBottomY\n                        }\n                    ]\n                ]\n            }\n        },\n        {\n            type: 'pie',\n            data: data1,\n            center: [smallCenterX + '%', smallCenterY + '%'],\n            // zlevel: 1,\n            radius: [smallRadiusInner + '%', smallRadiusOuter + '%']\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-1998210850","theme":"","layout":"","viewCount":134,"userName":"玉***秋","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xryLg1Ocw7.png?v=1536289118029","isCustomThumbnail":0,"builtinTags":["category-work","markLine","series-pie","title"],"customTags":["pie"],"updaterUserName":"玉***秋"}}