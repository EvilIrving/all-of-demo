{"status":0,"data":{"cid":"x4BhYD9VgH","authorUid":"bd-3066546986","authorUserName":"G***魂","title":"等比拉升柱状图（升级版，可自由设置比例）","description":"","latestVersion":8,"alwaysLatest":1,"createTime":"2019-03-31T09:16:59.000Z","lastUpdateTime":"2019-03-31T09:53:36.000Z","auth":2,"uid":"bd-3066546986","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.4.0","versionCreateTime":"2020-03-17T03:11:38.000Z","code":"var datas = [1500, 1, 12, 30, 4, 85, 6, 2, 11, 545];\r\n\r\nvar ax = 5; //真实y轴数据间隔\r\nvar ay = 10; //虚拟y轴数据比例\r\n\r\n\r\nfunction setValue(datas) {\r\n    var list = [];\r\n    datas.forEach(function(data) {\r\n        var x = 1,\r\n            y = 1 / ay,\r\n            newv = 0,\r\n            z = 0;\r\n        while (data > ax * x) {\r\n            newv += ax;\r\n            x *= ay;\r\n            y *= ay;\r\n            z += 1;\r\n        }\r\n        if (z > 0) {\r\n            if (y > 1) {\r\n                data -= (x / ay * ax);\r\n            } else {\r\n                data -= ax;\r\n            }\r\n            data = data / (x - y);\r\n        }\r\n        newv += data;\r\n        list.push(newv);\r\n    });\r\n    return list;\r\n}\r\n\r\nfunction getValue(data) {\r\n    var x = 1,\r\n        y = 1 / ay,\r\n        newv = 0,\r\n        z = 0;\r\n    while (data >= ax * (z + 1)) {\r\n        newv += ((x - y) > 1 ? (x - y) : 1) * ax;\r\n        y *= ay;\r\n        x *= ay;\r\n        z += 1;\r\n    }\r\n    if (z > 0) {\r\n        if (y > 1) {\r\n            data -= z * ax;\r\n        } else {\r\n            data -= ax;\r\n        }\r\n        data = data * (x - y);\r\n    }\r\n    newv += data;\r\n    return Math.round(newv);\r\n\r\n    //return data;\r\n}\r\n\r\nfunction getYaxis(value) {\r\n    var x = ay,\r\n        y = 1,\r\n        newval = 0,\r\n        z = 0;\r\n    while (value >= ax) {\r\n        if (z > 0) {\r\n            newval += (x - y) * ax;\r\n            x *= ay;\r\n            y *= ay;\r\n        } else {\r\n            newval += ax;\r\n        }\r\n        value = value - ax;\r\n        z += 1;\r\n    }\r\n    return newval;\r\n\r\n}\r\n\r\noption = {\r\n    backgroundColor: '#000',\r\n    color: ['#2ea5c3', '#e08f68'],\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'shadow'\r\n        },\r\n\r\n        formatter: function(params) {\r\n            var tiplabel = params[0].name + '<br/>' +\r\n                '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + params[0].color.colorStops[0].color + '\"></span>' +\r\n                params[0].seriesName + ':' + getValue(params[0].value) + '<br/>' +\r\n                '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + params[1].color.colorStops[0].color + '\"></span>' +\r\n                params[1].seriesName + ':' + getValue(params[1].value);\r\n            return tiplabel;\r\n        }\r\n    },\r\n    legend: {\r\n        data: ['呼入量', '呼出量'],\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#fff'\r\n        }\r\n    },\r\n    grid: {\r\n        //top:80,\r\n        left: 10,\r\n        bottom: 50,\r\n        right: 50,\r\n        containLabel: true,\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        data: [\r\n            'a1',\r\n            'a2',\r\n            'a3',\r\n            'a4',\r\n            'a5',\r\n            'a6',\r\n            'a7',\r\n            'a8',\r\n            'a9',\r\n            'a10'\r\n        ],\r\n        axisLabel: {\r\n            tooltip: {\r\n                show: true,\r\n            },\r\n            inside: false,\r\n            textStyle: {\r\n                fontSize: 16\r\n            },\r\n            interval: 0,\r\n            color: '#00ffea'\r\n        },\r\n    },\r\n    yAxis: [{\r\n        type: 'value',\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: 'rgba(36,101,199,.5)',\r\n            }\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                fontSize: 12\r\n            },\r\n            formatter: function(value) {\r\n                return getYaxis(value);\r\n            },\r\n            color: '#00ffea'\r\n        },\r\n        minInterval: ax,\r\n        maxInterval: ax\r\n    }],\r\n    series: [{\r\n            name: '呼入量',\r\n            yAxisIndex: 0,\r\n            //barMinHeight:5,\r\n            barCategoryGap: '30%',\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: true,\r\n                        position: 'top',\r\n                        color: '#fff',\r\n                        fontSize: 14,\r\n                        formatter: function(params) {\r\n                            return getValue(params.value);\r\n                        },\r\n                    },\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: '#1a9afe'\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#71b5e8'\r\n                    }]),\r\n                    opacity: 1,\r\n                    barBorderRadius: 20,\r\n                    shadowBlur: 20,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n            },\r\n            type: 'bar',\r\n            data: setValue(datas)\r\n        },\r\n        {\r\n            name: '呼出量',\r\n            yAxisIndex: 0,\r\n            //barMinHeight:5,\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: true,\r\n                        position: 'top',\r\n                        color: '#fff',\r\n                        fontSize: 14\r\n                    },\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        offset: 0,\r\n                        color: '#e12945'\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#f7734e'\r\n                    }]),\r\n                    opacity: 1,\r\n                    barBorderRadius: 20,\r\n                    shadowBlur: 10,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n            },\r\n            type: 'bar',\r\n            data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\r\n        }\r\n    ]\r\n}","html":"","externalScripts":"","updaterUID":"bd-3066546986","theme":"default","layout":"","viewCount":2000,"userName":"G***魂","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4BhYD9VgH.png?v=1584414698297","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":["比例","等比"],"updaterUserName":"G***魂"}}