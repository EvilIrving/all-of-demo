{"status":0,"data":{"cid":"xulOYg1Pj","authorUid":"bd-3831842444","authorUserName":"晨***c","title":"多个实时电机参数监控","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-11-12T00:55:37.000Z","lastUpdateTime":"2019-11-12T00:55:37.000Z","auth":2,"uid":"bd-3831842444","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-12T00:55:37.000Z","code":"var new1 = 0, min1 = 0, max1 = 0, avg1 = 0\r\n            var new2 = 0, min2 = 0, max2 = 0, avg2 = 0\r\n            var new3 = 0, min3 = 0, max3 = 0, avg3 = 0\r\n            var new4 = 0, min4 = 0, max4 = 0, avg4 = 0\r\n            var new5 = 0, min5 = 0, max5 = 0, avg5 = 0\r\n            var date = [], data1 = [], data2 = [], data3 = [], data4 = [], data5 = []\r\n            // 格式化时间\r\n            function getTime() {\r\n                var ts = arguments[0] || 0;\r\n                var t, h, i, s;\r\n                t = ts ? new Date(ts * 1000) : new Date();\r\n                h = t.getHours();\r\n                i = t.getMinutes();\r\n                s = t.getSeconds();\r\n                // 可根据需要在这里定义时间格式\r\n                return (h < 10 ? '0' + h : h) + ':' + (i < 10 ? '0' + i : i) + ':' + (s < 10 ? '0' + s : s);\r\n            }\r\n            // 生成初始数据\r\n            data1.push(Math.ceil(Math.random() * 10));\r\n            data2.push(Math.ceil(Math.random() * 10));\r\n            data3.push(Math.ceil(Math.random() * 10));\r\n            data4.push(Math.ceil(Math.random() * 10));\r\n            data5.push(Math.ceil(Math.random() * 10));\r\n            date.push(getTime(Math.round(new Date().getTime() / 1000)))\r\n            var option = {\r\n                backgroundColor: '#193499',\r\n                title: [{\r\n                    text: '图表名称',\r\n                    x: 15,\r\n                    y: '20',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 20,\r\n                        fontWeight: '500',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: '设备接口',\r\n                    x: 15,\r\n                    y: '45',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        color: '#fff',\r\n                        fontSize: 16,\r\n                        fontWeight: '100',\r\n                    }\r\n                }, {\r\n                    text: '最新',\r\n                    x2: 235,\r\n                    y: '10',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: '最小',\r\n                    x2: 165,\r\n                    y: '10',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100', color: '#fff'\r\n\r\n                    }\r\n                }, {\r\n                    text: '最大',\r\n                    x2: 95,\r\n                    y: '10',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: '平均',\r\n                    x2: 20,\r\n                    y: '10',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: new1,\r\n                    x2: 235,\r\n                    y: '40',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: min1,\r\n                    x2: 165,\r\n                    y: '40',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: max1,\r\n                    x2: 95,\r\n                    y: '40',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n\r\n                    text: avg1,\r\n                    x2: 20,\r\n                    y: '40',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: new2,\r\n                    x2: 235,\r\n                    y: '55',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: min2,\r\n                    x2: 165,\r\n                    y: '55',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: max2,\r\n                    x2: 95,\r\n                    y: '55',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n\r\n                    text: avg2,\r\n                    x2: 20,\r\n                    y: '55',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: new3,\r\n                    x2: 235,\r\n                    y: '70',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: min3,\r\n                    x2: 165,\r\n                    y: '70',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: max3,\r\n                    x2: 95,\r\n                    y: '70',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n\r\n                    text: avg3,\r\n                    x2: 20,\r\n                    y: '70',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: new4,\r\n                    x2: 235,\r\n                    y: '85',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: min4,\r\n                    x2: 165,\r\n                    y: '85',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: max4,\r\n                    x2: 95,\r\n                    y: '85',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n\r\n                    text: avg4,\r\n                    x2: 20,\r\n                    y: '85',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: new5,\r\n                    x2: 235,\r\n                    y: '100',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: min5,\r\n                    x2: 165,\r\n                    y: '100',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n                    text: max5,\r\n                    x2: 95,\r\n                    y: '100',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }, {\r\n\r\n                    text: avg5,\r\n                    x2: 20,\r\n                    y: '100',\r\n                    textBaseline: 'middle',\r\n                    textStyle: {\r\n                        fontSize: 12,\r\n                        fontWeight: '100',\r\n                        color: '#fff'\r\n                    }\r\n                }],\r\n                legend: [{\r\n                    x2: 300,\r\n                    y: 33,\r\n                    icon: 'rect',\r\n                    itemGap: 3,\r\n                    itemWidth: 11,\r\n                    itemHeight: 11,\r\n                    orient: 'vertical',\r\n                    data: ['正压', '负压', '电压', '电流', '前轴温度'],\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }],\r\n                grid: [{\r\n                    left: 20,\r\n                    right: 30,\r\n                    top: 150,\r\n                    bottom: 20,\r\n                    containLabel: true\r\n                }],\r\n                tooltip: {\r\n                    trigger: 'axis',\r\n                    axisPointer: {\r\n                        lineStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                xAxis: [{\r\n                    type: 'category',\r\n                    boundaryGap: false,\r\n                    axisLine: {\r\n                        lineStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n                    data: date\r\n                }],\r\n                yAxis: [{\r\n                    type: 'value',\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        lineStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        formatter: '{value}m',\r\n                        textStyle: {\r\n                            fontSize: 12\r\n                        }\r\n                    },\r\n                    splitLine: {\r\n                        lineStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                }],\r\n                dataZoom: [\r\n                  {\r\n                      type: 'inside',\r\n                      start: 0,\r\n                      end: 100\r\n                  },\r\n                ],\r\n                series: [{\r\n                    name: '正压',\r\n                    type: 'line',\r\n                    smooth: true,\r\n                    showSymbol: false,\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'rgba(150,150,255)'\r\n                        }\r\n                    },\r\n                    areaStyle: {\r\n                        opacity: 1\r\n                    },\r\n                    data: data1\r\n                }, {\r\n                    name: '负压',\r\n                    type: 'line',\r\n                    smooth: true,\r\n                    showSymbol: false,\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'rgba(150,255,255)'\r\n                        }\r\n                    },\r\n                    areaStyle: {\r\n                        // normal: {\r\n                        //     color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                        //         offset: 0,\r\n                        //         color: 'rgba(0,255,255, 1)'\r\n                        //     }, {\r\n                        //         offset: 0.8,\r\n                        //         color: 'rgba(0,255,255, 0.5)'\r\n                        //     }])\r\n                        // },\r\n                        opacity: 1\r\n                    },\r\n                    data: data2\r\n                }, {\r\n                    name: '电压',\r\n                    type: 'line',\r\n                    smooth: true,\r\n                    showSymbol: false,\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'rgba(150,255,150)'\r\n                        }\r\n                    },\r\n                    areaStyle: {\r\n                        opacity: 1\r\n                    },\r\n                    data: data3\r\n                }, {\r\n                    name: '电流',\r\n                    type: 'line',\r\n                    smooth: true,\r\n                    showSymbol: false,\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'rgba(255,150,255)'\r\n                        }\r\n                    },\r\n                    areaStyle: {\r\n                        opacity: 1\r\n                    },\r\n                    data: data4\r\n                }, {\r\n                    name: '前轴温度',\r\n                    type: 'line',\r\n                    smooth: true,\r\n                    showSymbol: false,\r\n                    lineStyle: {\r\n                        normal: {\r\n                            width: 0\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: 'rgba(255,255,150)'\r\n                        }\r\n                    },\r\n                    areaStyle: {\r\n                        opacity: 1\r\n                    },\r\n                    data: data5\r\n                }, ]\r\n            };\r\n            //myChart.setOption(option)\r\n            setInterval(function () {\r\n                data1.push(Math.ceil(Math.random() * 10));\r\n                data2.push(Math.ceil(Math.random() * 10));\r\n                data3.push(Math.ceil(Math.random() * 10));\r\n                data4.push(Math.ceil(Math.random() * 10));\r\n                data5.push(Math.ceil(Math.random() * 10));\r\n                date.push(getTime(Math.round(new Date().getTime() / 1000)));\r\n                if (data1.length >= 20) {\r\n                    data1 = data1.slice(-20)\r\n                }\r\n                if (data2.length >= 20) {\r\n                    data2 = data2.slice(-20)\r\n                }\r\n                if (data2.length >= 20) {\r\n                    data2 = data2.slice(-20)\r\n                }\r\n                if (data3.length >= 20) {\r\n                    data3 = data3.slice(-20)\r\n                }\r\n                if (data4.length >= 20) {\r\n                    data4 = data4.slice(-20)\r\n                }\r\n                if (data5.length >= 20) {\r\n                    data5 = data5.slice(-20)\r\n                }\r\n\r\n                if (date.length >= 20) {\r\n                    date = date.slice(-20)\r\n                }\r\n                new1 = data1[data1.length - 1];\r\n                min1 = Math.min.apply(null, data1);\r\n                max1 = Math.max.apply(null, data1);\r\n                avg1 = data1.reduce(function (tmp, item, index) {\r\n                    if (index != data1.length - 1) {\r\n                        return tmp + item;\r\n                    } else {\r\n                        return ((tmp + item) / data1.length).toFixed(2);\r\n                    }\r\n                });\r\n                new2 = data2[data2.length - 1];\r\n                min2 = Math.min.apply(null, data2);\r\n                max2 = Math.max.apply(null, data2);\r\n                avg2 = data2.reduce(function (tmp, item, index) {\r\n                    if (index != data2.length - 1) {\r\n                        return tmp + item;\r\n                    } else {\r\n                        return ((tmp + item) / data2.length).toFixed(2);\r\n                    }\r\n                });\r\n                new3 = data3[data3.length - 1];\r\n                min3 = Math.min.apply(null, data3);\r\n                max3 = Math.max.apply(null, data3);\r\n                avg3 = data3.reduce(function (tmp, item, index) {\r\n                    if (index != data3.length - 1) {\r\n                        return tmp + item;\r\n                    } else {\r\n                        return ((tmp + item) / data3.length).toFixed(2);\r\n                    }\r\n                });\r\n                new4 = data1[data4.length - 1];\r\n                min4 = Math.min.apply(null, data4);\r\n                max4 = Math.max.apply(null, data4);\r\n                avg4 = data4.reduce(function (tmp, item, index) {\r\n                    if (index != data4.length - 1) {\r\n                        return tmp + item;\r\n                    } else {\r\n                        return ((tmp + item) / data4.length).toFixed(2);\r\n                    }\r\n                });\r\n                new5 = data5[data5.length - 1];\r\n                min5 = Math.min.apply(null, data5);\r\n                max5 = Math.max.apply(null, data5);\r\n                avg5 = data5.reduce(function (tmp, item, index) {\r\n                    if (index != data5.length - 1) {\r\n                        return tmp + item;\r\n                    } else {\r\n                        return ((tmp + item) / data5.length).toFixed(2);\r\n                    }\r\n                });\r\n                myChart.setOption({\r\n                    title: [{\r\n                        text: '实时电机参数监控'\r\n                    }, {\r\n                        text: '水泵'\r\n                    }, {\r\n                        text: '最新'\r\n                    }, {\r\n                        text: '最小',\r\n                    }, {\r\n                        text: '最大'\r\n                    }, {\r\n                        text: '平均'\r\n                    }, {\r\n                        text: new1 + 'm'\r\n                    }, {\r\n                        text: min1 + 'm'\r\n                    }, {\r\n                        text: max1 + 'm'\r\n                    }, {\r\n                        text: avg1 + 'm'\r\n                    }, {\r\n                        text: new2 + 'm'\r\n                    }, {\r\n                        text: min2 + 'm'\r\n                    }, {\r\n                        text: max2 + 'm'\r\n                    }, {\r\n                        text: avg2 + 'm'\r\n                    }, {\r\n                        text: new3 + 'm'\r\n                    }, {\r\n                        text: min3 + 'm'\r\n                    }, {\r\n                        text: max3 + 'm'\r\n                    }, {\r\n                        text: avg3 + 'm'\r\n                    }, {\r\n                        text: new4 + 'm'\r\n                    }, {\r\n                        text: min4 + 'm'\r\n                    }, {\r\n                        text: max4 + 'm'\r\n                    }, {\r\n                        text: avg4 + 'm'\r\n                    }, {\r\n                        text: new5 + 'm'\r\n                    }, {\r\n                        text: min5 + 'm'\r\n                    }, {\r\n                        text: max5 + 'm'\r\n                    }, {\r\n                        text: avg5 + 'm'\r\n                    }],\r\n                    series: [{\r\n                        data: data1\r\n                    }, {\r\n                        data: data2\r\n                    },\r\n                     {\r\n                         data: data3\r\n                     },\r\n                     {\r\n                         data: data4\r\n                     }, {\r\n                         data: data5\r\n                     },\r\n                    ],\r\n                    xAxis: [{\r\n                        data: date\r\n                    }],\r\n                });\r\n            }, 1000)","html":"","externalScripts":"","updaterUID":"bd-3831842444","theme":"","layout":"","viewCount":80,"userName":"晨***c","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xulOYg1Pj.png?v=1573520137590","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-line","title","tooltip"],"customTags":[],"updaterUserName":"晨***c"}}