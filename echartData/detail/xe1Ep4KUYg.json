{"status":0,"data":{"cid":"xe1Ep4KUYg","authorUid":"bd-2099726104","authorUserName":"p***0","title":"自定义趋势图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-05-25T05:15:57.000Z","lastUpdateTime":"2020-05-25T05:15:57.000Z","auth":2,"uid":"bd-2099726104","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-25T05:15:57.000Z","code":"var yearCount = 5;\r\nvar categoryCount = 12;\r\n\r\n\r\nvar xAxisData = ['海南','海口','琼海','三亚','儋州'];\r\nvar customData = [];\r\nvar legendData = [2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021];\r\nvar dataList = [\r\n    [2068,400,60,170,160],\r\n    [2284,600,80,210,210],\r\n    [2571,800,130,320,350],\r\n    [2759,1000,200,450,560],\r\n    [3150,1227,290,532,799],\r\n    [3414,1587,477,672,908],\r\n    [3581,1589,446,763,802],\r\n    [4091,1875,396,900,1082],\r\n    [4527,1945,438,936,1817],\r\n    [4789,1886,504,1021,1006],\r\n    [5325.7417,1903.365,526.2141,1144.0482,2772.0659],\r\n    ];\r\n\r\n\r\nvar encodeY = [1,2,3,4,5];\r\n\r\n\r\nfor (var i = 0; i < categoryCount; i++) {\r\n    var val;\r\n    var customVal = [i];\r\n    customData.push(customVal);\r\n\r\n\r\n    for (var j = 0; j < dataList.length; j++) {\r\n        var value = j === 0\r\n            ? echarts.number.round(val, 2)\r\n            : echarts.number.round(Math.max(0, dataList[j - 1][i] + (Math.random() - 0.5) * 200), 2);\r\n        //dataList[j].push(value);\r\n        customVal.push(value);\r\n    }\r\n}\r\n\r\n\r\nfunction renderItem(params, api) {\r\n    var xValue = api.value(0);\r\n    var currentSeriesIndices = api.currentSeriesIndices();\r\n    var barLayout = api.barLayout({\r\n        barGap: '30%', barCategoryGap: '20%', count: currentSeriesIndices.length - 1\r\n    });\r\n\r\n\r\n    var points = [];\r\n    for (var i = 0; i < currentSeriesIndices.length; i++) {\r\n        var seriesIndex = currentSeriesIndices[i];\r\n        if (seriesIndex !== params.seriesIndex) {\r\n            var point = api.coord([xValue, api.value(seriesIndex)]);\r\n            point[0] += barLayout[i - 1].offsetCenter;\r\n            point[1] -= 20;\r\n            points.push(point);\r\n        }\r\n    }\r\n    var style = api.style({\r\n        stroke: api.visual('color'),\r\n        fill: null\r\n    });\r\n\r\n\r\n    return {\r\n        type: 'polyline',\r\n        shape: {\r\n            points: points\r\n        },\r\n        style: style\r\n    };\r\n}\r\n\r\n\r\noption = {\r\n    title:{\r\n      text:''//各地区最大负荷变化趋势  \r\n    },\r\n    tooltip: {\r\n        trigger: 'axis'\r\n    },\r\n    legend: {\r\n        data: legendData\r\n    },\r\n    dataZoom: [{\r\n        type: 'slider',\r\n        start: 0,\r\n        end: 100\r\n    }, {\r\n        type: 'inside',\r\n        start: 50,\r\n        end: 70\r\n    }],\r\n    xAxis: {\r\n        data: xAxisData\r\n    },\r\n    yAxis: {\r\n        name:'负荷（MW）',\r\n    },\r\n    series: [{\r\n        type: 'custom',\r\n        name: 'trend',\r\n        renderItem: renderItem,\r\n        itemStyle: {\r\n            borderWidth: 2\r\n        },\r\n        encode: {\r\n            x: 0,\r\n            y: encodeY\r\n        },\r\n        data: customData,\r\n        z: 200\r\n    }].concat(echarts.util.map(dataList, function (data, index) {\r\n        return {\r\n            type: 'bar',\r\n            animation: false,\r\n            name: legendData[index + 1],\r\n            itemStyle: {\r\n                opacity: 0.5\r\n            },\r\n            data: data\r\n        };\r\n    }))\r\n};","html":"","externalScripts":"","updaterUID":"bd-2099726104","theme":"","layout":"","viewCount":178,"userName":"p***0","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xe1Ep4KUYg.png?v=1590383757845","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-custom","title","tooltip"],"customTags":[],"updaterUserName":"p***0"}}