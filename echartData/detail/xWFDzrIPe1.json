{"status":0,"data":{"cid":"xWFDzrIPe1","authorUid":"obd-oFw6glJj50ycBaKY4l0l_DeSck8-S55","authorUserName":"街***8","title":"带负数的饼","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2021-02-18T02:39:31.000Z","lastUpdateTime":"2021-02-18T02:39:31.000Z","auth":2,"uid":"obd-oFw6glJj50ycBaKY4l0l_DeSck8-S55","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-18T02:51:29.000Z","code":"\r\n    let data = [{\r\n        name: \"移动线上\",\r\n        value: 10,\r\n        truevalue: 10,\r\n    }, {\r\n        name: \"移动线下\",\r\n        value: 10,\r\n        truevalue: 10,\r\n    }, {\r\n        name: \"联通线上\",\r\n        value: 10,\r\n        truevalue: -8,\r\n        \r\n    }, ]\r\n    let name = data.map((item) => item.name)\r\n    let value = data.map((item) => item.truevalue)\r\n    let sum = value.reduce((a, b) => {\r\n        return a + b\r\n    })\r\n    let color = [\r\n        [\r\n            [\"#f24e50\", \"#f0de23\"],\r\n            [\"#19cddd\", \"#19ecb6\"],\r\n            [\"#29a0f9\", \"#5041f6\"],\r\n            [\"#d819a7\", \"#8719e5\"],\r\n        ],\r\n        [\"rgba(24, 183, 142,0.1)\",\r\n            \"rgba(1, 179, 238,0.1)\",\r\n            \"rgba(22, 75, 205,0.1)\",\r\n            \"rgba(52, 52, 176,0.1)\"\r\n        ]\r\n    ]\r\n    let series = []\r\n    let yAxis = []\r\n    for (let i = 0; i < data.length; i++) {\r\n        let fx = data[i].truevalue<0?true:false\r\n        \r\n        series.push({\r\n            name: \"\",\r\n            type: \"pie\",\r\n            clockWise: fx, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [82.5 - i * 20 + \"%\", 82 - i * 20 + \"%\"],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n            },\r\n            data: [\r\n                {\r\n                    value: Math.abs(data[i].value),\r\n                    name: data[i].name,\r\n                    itemStyle: {\r\n                        borderWidth: 3,\r\n                        borderRadius: 30,\r\n                        borderColor: {\r\n                            type: 'linear',\r\n                            x: 1,\r\n                            y: 0,\r\n                            x2: 0,\r\n                            y2: 0,\r\n                            // 0% 处的颜色                           // 100% 处的颜色\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: color[0][i][0]\r\n                            }, {\r\n                                offset: 1,\r\n                                color: color[0][i][1]\r\n                            }],\r\n                            global: false // 缺省为 false\r\n                        },\r\n                    }\r\n                },\r\n                {\r\n                    value: Math.abs(sum - data[i].value),\r\n                    name: \"\",\r\n                    itemStyle: {\r\n                        color: 'transparent',\r\n                    },\r\n                    tooltip: {\r\n                        show: false\r\n                    },\r\n                    hoverAnimation: false\r\n                }\r\n            ]\r\n        })\r\n        series.push({\r\n            name: \"\",\r\n            type: \"pie\",\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: false, //顺时加载\r\n            hoverAnimation: false, //鼠标移入变大\r\n            radius: [82.5 - i * 20 + \"%\", 82 - i * 20 + \"%\"],\r\n            center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5\r\n            },\r\n            data: [{\r\n                value: 10,\r\n                itemStyle: {\r\n                    color: \"#21446a\",\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            },\r\n            {\r\n                value: 0,\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 100,\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }\r\n            ]\r\n        })\r\n        yAxis.push({\r\n            name:data[i].name,\r\n            ratio:((data[i].value / sum) * 100).toFixed(2) + \"%\",\r\n            qoq: '50%'\r\n        })\r\n    }\r\n    option = {\r\n        backgroundColor: '#012248',\r\n        color: color[0],\r\n        tooltip: {\r\n            show: true,\r\n            trigger: \"item\",\r\n            formatter: \"{a}<br>{b}:{c}({d}%)\"\r\n        },\r\n        grid: {\r\n            top: \"4%\",\r\n            left: \"51%\",\r\n            width: \"40%\",\r\n            height: \"40%\",\r\n            containLabel: false\r\n        },\r\n        // yAxis: [{\r\n        //     type: \"category\",\r\n        //     inverse: true,\r\n        //     axisLine: {\r\n        //         show: false\r\n        //     },\r\n        //     axisTick: {\r\n        //         show: false\r\n        //     },\r\n        //     axisLabel: {\r\n        //         // formatter: \"{b}:{c}({d}%)\",\r\n        //         formatter: function (value,index) {\r\n        //             console.log(yAxis[index])\r\n        //             let ydataObj = `{name|${yAxis[index].name}.....}{qoq|环比${yAxis[index].qoq}}`\r\n        //             return ydataObj\r\n        //         },\r\n        //         rich: {\r\n        //             name: {\r\n        //                 color: '#2e96ff',\r\n        //                 fontSize: 14\r\n        //             },\r\n        //         },\r\n        //         interval: 0,\r\n        //         inside: true,\r\n        //         textStyle: {\r\n        //             color: function(value,index) { \r\n        //                 var colorList =  [\"rgb(242,81,80)\", \"rgb(25,206,220)\",\"rgb(43,156,249)\", \"rgb(212,25,170)\"]\r\n        //                 return  colorList[index]\r\n        //             },\r\n        //             fontSize: 14\r\n        //         },\r\n        //         show: true\r\n        //     },\r\n        //     data: yAxis\r\n        // }],\r\n        xAxis: [{\r\n            show: false,\r\n        }],\r\n        series: series\r\n    };","html":"","externalScripts":"","updaterUID":"obd-oFw6glJj50ycBaKY4l0l_DeSck8-S55","theme":"","layout":"","viewCount":48,"userName":"街***8","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWFDzrIPe1.png?v=1613616689144","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","tooltip"],"customTags":[],"updaterUserName":"街***8"}}