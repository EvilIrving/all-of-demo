{"status":0,"data":{"cid":"map-lines-elevation","authorUid":"bd-2135947294","authorUserName":"echarts","title":"登山线路和海拔","description":"杭州，登山线路和海拔。\nsee <http://www.wikiloc.com/>","latestVersion":6,"alwaysLatest":1,"createTime":"2016-07-27T12:46:56.000Z","lastUpdateTime":"2016-07-27T15:21:13.000Z","auth":2,"uid":"bd-2135947294","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"3.2.2","versionCreateTime":"2016-07-27T13:51:25.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1469613131944-r1NUN-Ud.json\";\n\n$.getJSON(uploadedDataURL, function (rawData) {\n    var lines = rawData.track.slice(0, rawData.track.length - 1).map(function (seg, idx) {\n        return [{\n            coord: seg.coord,\n            value: seg.elevation\n        }, {\n            coord: rawData.track[idx + 1].coord\n        }];\n    });\n\n    var waypointsData = rawData.waypoints.map(function (item) {\n        return {\n            name: item.name,\n            value: item.coord.concat([item.elevation])\n        };\n    });\n\n    myChart.setOption(option = {\n        animation: false,\n        bmap: {\n            center: [120.14266322374, 30.235018034923],\n            zoom: 14,\n            roam: true\n        },\n        tooltip: {\n            trigger: 'axis'\n        },\n        visualMap: {\n            top: 'top',\n            min: 0,\n            max: 500,\n            text: ['海拔 500 米', '海拔 0 米'],\n            seriesIndex: [0, 4],\n            inRange: {\n                color: ['#42810f', '#c9c367', '#b07a17', '#a23a05']\n            }\n        },\n        grid: [{\n            right: 10,\n            height: 140,\n            width: '50%',\n            bottom: 10,\n        }, {\n            show: true,\n            right: 0,\n            height: 170,\n            width: '53%',\n            bottom: 0,\n            backgroundColor: 'rgba(0,0,0,0.7)'\n        }],\n        xAxis: {\n            type: 'category',\n            show: false,\n            inverse: true,\n            data: rawData.track.map(function (seg) {\n                return seg.coord.join(',');\n            })\n        },\n        yAxis: {\n            position: 'right',\n            splitLine: {\n                show: false\n            },\n            axisLabel: {\n                inside: true,\n                formatter: '{value} m',\n                textStyle: {\n                    color: '#ddd'\n                }\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#ddd'\n                }  \n            },\n            axisTick: {\n                inside: true,\n                lineStyle: {\n                    color: '#ddd'\n                }\n            },\n            max: 500,\n            splitNumber: 2\n        },\n        series: [{\n            type: 'lines',\n            coordinateSystem: 'bmap',\n            data: lines,\n            tooltip: {\n                show: false\n            },\n            lineStyle: {\n                normal: {\n                    width: 6,\n                    opacity: 1,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)',\n                    shadowBlur: 3\n                },\n                emphasis: {\n                    color: '#f6fd40'\n                }\n            },\n            animationDelay: function (idx) {\n                return idx * 20;\n            }\n        }, {\n            type: 'scatter',\n            coordinateSystem: 'bmap',\n            symbolSize: [10, 5],\n            symbolOffset: [7, 0],\n            silent: true,\n            tooltip: {\n                show: false  \n            },\n            itemStyle: {\n                normal: {\n                    color: 'red',\n                    borderWidth: 1,\n                    borderColor: '#fff'\n                }\n            },\n            data: waypointsData\n        }, {\n            type: 'scatter',\n            coordinateSystem: 'bmap',\n            symbol: 'path://M54.227,12.611c-0.338-0.336-0.736-0.505-1.196-0.505c-0.229,0-0.712,0.188-1.446,0.559  c-0.735,0.372-1.515,0.786-2.336,1.248c-0.823,0.459-1.797,0.875-2.921,1.247c-1.123,0.371-2.163,0.559-3.12,0.559  c-0.884,0-1.664-0.168-2.336-0.505c-2.229-1.044-4.168-1.823-5.814-2.337c-1.646-0.513-3.416-0.771-5.311-0.771  c-3.272,0-6.999,1.064-11.177,3.188c-0.862,0.43-1.48,0.763-1.88,1.007l-0.397-2.911c0.897-0.779,1.476-1.914,1.476-3.195  c0-2.347-1.902-4.249-4.249-4.249c-2.347,0-4.249,1.902-4.249,4.249c0,1.531,0.818,2.862,2.032,3.61l5.74,42.09  c0.171,1.253,1.243,2.162,2.474,2.162c0.112,0,0.226-0.007,0.341-0.022c1.368-0.188,2.326-1.447,2.139-2.815L19.69,38.303  c4.186-2.077,7.807-3.124,10.853-3.124c1.293,0,2.554,0.193,3.783,0.583c1.23,0.391,2.253,0.815,3.067,1.274  c0.814,0.46,1.775,0.886,2.88,1.274c1.107,0.39,2.2,0.585,3.279,0.585c2.726,0,5.991-1.027,9.796-3.08  c0.478-0.248,0.828-0.492,1.049-0.731c0.221-0.239,0.332-0.579,0.332-1.021V13.806C54.729,13.347,54.562,12.948,54.227,12.611z',\n            symbolSize: 30,\n            symbolOffset: [15, -15],\n            tooltip: {\n                show: false  \n            },\n            itemStyle: {\n                normal: {\n                    color: 'red',\n                    borderWidth: 1,\n                    borderColor: '#fff'\n                }\n            },\n            label: {\n                normal: {\n                    textStyle: {\n                        fontWeight: 'bold',\n                        color: '#111'\n                    },\n                    show: true,\n                    position: 'right',\n                    formatter: '{b}'\n                }\n            },\n            data: waypointsData\n        }, {\n            type: 'scatter',\n            name: 'marker',\n            coordinateSystem: 'bmap',\n            symbolSize: 100,\n            symbolOffset: [0, -50],\n            itemStyle: {\n                normal: {\n                    color: '#555',\n                    borderColor: '#111',\n                    borderWidth: 5\n                }\n            },\n            tooltip: {\n                show: false  \n            },\n            symbol: 'path://M21.9,15c0,0-8.7,9.9-9.5,11c-0.9,1.1-2.3,0.3-2.3,0.3  s-8.8-9.7-9.8-11.4C-0.7,13.3,1.2,13,1.2,13H6V1c0-0.6,0.4-1,1-1h8c0.6,0,1,0.4,1,1v12h4.7C23.1,13,21.9,15,21.9,15z',\n            data: []\n        }, {\n            type: 'line',\n            showSymbol: false,\n            hoverAnimation: false,\n            areaStyle: {\n                normal: {}\n            },\n            z: 9999,\n            tooltip: {\n                trigger: 'axis',\n                axisPointer: {\n                    animation: false\n                },\n                transitionDuration: 0,\n                formatter: function (param) {\n                    return param[0].value;\n                },\n                position: function (pt) {\n                    return [pt[0], '10%'];\n                }\n            },\n            areaStyle: {\n                normal: {}\n            },\n            data: rawData.track.map(function (seg) {\n                return seg.elevation;\n            })\n        }]\n    });\n    \n    myChart.on('showtip', function (param) {\n        if (param.seriesIndex === 4) {\n            myChart.setOption({\n                series: [{\n                    name: 'marker',\n                    animation: false,\n                    data: [rawData.track[param.dataIndex].coord]\n                }]\n            });\n        }\n    });\n\n    \n});","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM","updaterUID":"bd-2135947294","theme":"default","layout":"","viewCount":40923,"userName":"echarts","commentCount":13,"starCount":62,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/map-lines-elevation.png?v=1469627382396","isCustomThumbnail":1,"builtinTags":["bmap","category-work","grid","series-line","series-lines","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"echarts"}}