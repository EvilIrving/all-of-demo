{"status":0,"data":{"cid":"xDy5RT4-tu","authorUid":"obd-olmfh18ylqdoP1ywfzxsVKLkgZPvK0d","authorUserName":"c***t","title":"进度条","description":"带分隔、边框 进度条","latestVersion":3,"alwaysLatest":0,"createTime":"2022-01-07T07:41:53.000Z","lastUpdateTime":"2022-01-07T07:43:25.000Z","auth":2,"uid":"obd-olmfh18ylqdoP1ywfzxsVKLkgZPvK0d","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-07T07:43:25.000Z","code":"let backgroundColor = 'rgba(0,0,0,1)';\nlet chartData = [\n    [0,20,333, 0],\n    ['AAA', 'BBB', 'CCC', 'DDD'],\n];\nlet getmydmc = chartData[1]; //数据点名称\nlet getmyd = chartData[0]; //收入金额\nlet getmydzd = [];\n\nlet big = 0;\ngetmyd.forEach((el) => {\n    if (!(el === undefined || el === '' || el === 0)) {\n        if (big < Number(el)) {\n            big = Number(el);\n        }\n    } else {\n        big = 100;\n    }\n});\nfor (let i = 0; i < getmyd.length; i++) {\n    getmydzd.push(big * 4);\n}\n//计算最大值\nfunction calMax(arr) {\n    let max = 0;\n    arr.forEach((el) => {\n        el.forEach((el1) => {\n            if (!(el1 === undefined || el1 === '' || el1 === 0)) {\n                if (max < Number(el1)) {\n                    max = Number(el1);\n                }\n            } else {\n                max == 100;\n            }\n        });\n    });\n    let maxint = Math.ceil(max / 9.5);\n    //不让最高的值超过最上面的刻度\n    let maxval = maxint * 10;\n    //让显示的刻度是整数\n    return maxval;\n}\n\nconst max = Math.ceil(calMax([getmyd]) / 10) * 10;\n\noption = {\n    backgroundColor: backgroundColor,\n    grid: {\n        left: '10%',\n        right: '10%',\n        bottom: '0%',\n        top: '5%',\n        // containLabel: true,\n    },\n    tooltip: {\n        formatter: (params) => {\n            if (params.name !== '') {\n                return params.name + ' : ' + getmyd[params.dataIndex];\n            }\n        },\n        textStyle: {\n            align: 'left',\n        },\n    },\n    xAxis: [\n        {\n            type: 'value',\n            axisLabel: {\n                show: false,\n                color: '#fff',\n                formatter: function (val) {\n                    return val + '';\n                },\n                textStyle: {\n                    fontSize: '13',\n                },\n            },\n            min: 0,\n            max: max, // 计算最大值\n            interval: max / 5, //  平均分为5份\n            splitNumber: 5,\n            splitLine: {\n                show: false,\n                lineStyle: {\n                    color: '#fff',\n                },\n            },\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: '#fff',\n                    width: 1,\n                    opacity: 0.3,\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n        },\n        {\n            type: 'value',\n            axisLabel: {\n                show: false,\n            },\n            min: 0,\n            max: max, // 计算最大值\n            interval: max / 10, //  平均分为5份\n            splitNumber: 10,\n            splitLine: {\n                show: false,\n                lineStyle: {\n                    type: 'dashed',\n                    color: '#D8D8D8',\n                },\n            },\n            axisLine: {\n                show: false,\n                lineStyle: {\n                    color: '#fff',\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n        },\n    ],\n    yAxis: [\n        {\n            inverse: false,\n            data: getmydmc,\n            axisLabel: {\n                padding: [0, 0, 20, -10],\n                inside: true,\n                textStyle: {\n                    fontSize: 14,\n                    fontFamily: 'PingFang SC',\n                    fontWeight: 400,\n                    color: '#d2d2d2',\n                    align: 'left',\n                    textShadowColor: '#00d6ff',\n                    textShadowOffsetX: 0,\n                    textShadowOffsetY: 0,\n                    textShadowBlur: 5,\n                },\n                formatter: '{value}\\n{a|占位}',\n                rich: {\n                    a: {\n                        color: 'transparent',\n                        lineHeight: 30,\n                        fontFamily: 'digital',\n                        fontSize: 14,\n                    },\n                },\n            },\n            // offset: 0,\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n        },\n\n        {\n            //左侧柱状图的Y轴\n            gridIndex: 0, //y轴所在的 grid 的索引\n            splitLine: 'none',\n            axisTick: 'none',\n            axisLine: 'none',\n            data: getmyd,\n            inverse: false,\n            axisLabel: {\n                show: true,\n                verticalAlign: 'bottom',\n                align: 'right',\n                padding: [0, 10, 18, 0],\n                textStyle: {\n                    color: '#fff',\n                    fontSize: '14',\n                },\n                formatter: function (value) {\n                    return '{x|' + value + '}';\n                    // return '{x|' + value + '}  {y|' + '%}';\n                },\n                rich: {\n                    y: {\n                        color: '#3dffef',\n                        fontFamily: 'Orbitron',\n                        fontSize: 14,\n                    },\n                    x: {\n                        color: '#3dffef',\n                        fontFamily: 'Orbitron',\n                        fontSize: 14,\n                    },\n                },\n            },\n        },\n    ],\n    dataZoom: [\n        {\n            type: 'inside',\n            show: true,\n            height: 15,\n            start: 1,\n            end: 100,\n            orient: 'vertical',\n            zlevel: 66,\n        },\n    ],\n    series: [\n        {\n            name: '值',\n            type: 'bar',\n            // barGap: '100%',\n            padding: 10,\n            // zlevel: 1,\n            xAxisIndex: 0,\n            label: {\n                show: false,\n                position: 'right',\n                textStyle: {\n                    color: '#fff',\n                    fontSize: 14,\n                },\n            },\n            itemStyle: {\n                normal: {\n                    borderRadius: 0,\n                    color: {\n                        colorStops: [\n                            {\n                                offset: 0,\n                                color: '#46B7ED', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: '#48EDD3', // 100% 处的颜色\n                            },\n                        ],\n                    },\n                },\n            },\n            barWidth: 18,\n            data: getmyd,\n            z: 0,\n        },\n        {\n            // 分隔\n            type: 'pictorialBar',\n            symbolRotate: '-25',\n            itemStyle: {\n                normal: {\n                    color: 'rgba(1, 12, 38, 0.4)',\n                },\n            },\n            symbolRepeat: 'fixed',\n            symbolMargin: 6,\n            symbol: 'rect',\n            symbolClip: true,\n            symbolSize: [5, 22],\n            symbolPosition: 'start',\n            symbolOffset: [0, -2],\n            data: getmyd,\n            z: 66,\n            animationEasing: 'elasticOut',\n        },\n        {\n            name: '背景',\n            type: 'bar',\n            barWidth: 24,\n            barGap: '-118%',\n            data: getmydzd,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(5,59,113,0.7)',\n                    borderRadius: 0,\n                    // borderColor: 'rgba(0, 255, 236, 1)',\n                    borderColor: new echarts.graphic.LinearGradient(\n                        0,\n                        0,\n                        0,\n                        1,\n                        [\n                            {\n                                offset: 0,\n                                color: '#015EFE', // 0% 处的颜色\n                            },\n                            {\n                                offset: 1,\n                                color: '#10C2E8', // 100% 处的颜色\n                            },\n                        ],\n                        false\n                    ),\n                },\n            },\n            z: -1,\n        },\n        {\n            type: 'pictorialBar',\n            name: '左内边框',\n            symbol: 'rect',\n            symbolSize: [3, 22],\n            symbolOffset: [0, -2],\n            animation: false,\n            // symbolKeepAspect: true,\n            // animationEasing: 'none',\n            itemStyle: {\n                normal: {\n                    color: 'rgba(5,59,113,1)',\n                },\n                opacity: 1,\n            },\n            z: 99,\n            data: new Array(getmyd.length).fill(1),\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"obd-olmfh18ylqdoP1ywfzxsVKLkgZPvK0d","theme":"","layout":"","viewCount":0,"userName":"c***t","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDy5RT4-tu.png?v=1641541405958","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"c***t"}}