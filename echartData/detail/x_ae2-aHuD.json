{"status":0,"data":{"cid":"x_ae2-aHuD","authorUid":"bd-3540791547","authorUserName":"龙***4","title":"可拖拽表","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-03-08T10:00:34.000Z","lastUpdateTime":"2019-03-08T10:00:34.000Z","auth":2,"uid":"bd-3540791547","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-08T10:00:34.000Z","code":"/**\r\n *\r\n * 测试关系图 graph type\r\n *\r\n */\r\nvar symbolSize =10;\r\nvar coors1 = [\r\n    [200, 200],\r\n    [400, 200],\r\n    [600, 200],\r\n    [800, 200],\r\n    [1000, 200],\r\n   \r\n];\r\n \r\nvar coors2 = [\r\n   [200, 400],\r\n    [400, 400],\r\n    [600, 400],\r\n    [800, 400],\r\n    [1000, 400],\r\n];\r\n \r\nvar coors3 = [\r\n    [200, 600],\r\n    [400, 600],\r\n    [600, 600],\r\n    [800, 600],\r\n    [1000, 600],\r\n];\r\n  var color = ['#a6c84c', '#ffa022', '#46bee9', '#c23531', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#bda29a', '#6e7074', '#546570', '#c4ccd3', ];\r\n \r\nvar data = [coors1, coors2, coors3];\r\n \r\n \r\nvar optionSeries = [];\r\n \r\n \r\n \r\n \r\nfor (var i = 0; i < data.length; i++) {\r\n    var links = data[i].map(function(item, j) {\r\n        return {\r\n            source: j,\r\n            target: j + 1\r\n        };\r\n    });\r\n \r\n    links.pop();\r\n    optionSeries.push({\r\n        type: 'graph',\r\n        layout: 'none', //布局\r\n        coordinateSystem: 'cartesian2d',\r\n        symbolSize: 8,\r\n        roam: true,\r\n        label: {\r\n            normal: {\r\n                show: true\r\n            }\r\n        },\r\n        edgeSymbol: ['circle', 'arrow'],\r\n        edgeSymbolSize: [0, 0],\r\n        data: data[i],\r\n        links: links,\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n               // opacity: 1,\r\n                width:1,\r\n            // curveness: 0.1\r\n            }\r\n        },\r\n        animationDelay: function(idx) {\r\n            return idx * 200;\r\n        }\r\n    });\r\n \r\n \r\n}\r\n \r\n \r\nif (!myChart.inNode) {\r\n    setTimeout(function() {\r\n        // Add shadow circles (which is not visible) to enable drag.\r\n        myChart.setOption({\r\n            graphic: echarts.util.map(data, function(element, index) {\r\n                console.log('1st layer!');\r\n                return {\r\n                    type: 'group',\r\n                    id: 'group' + (index + 1),\r\n                    children: echarts.util.map(element, function(item, dataIndex) {\r\n \r\n                        var i = index;\r\n                        return {\r\n                            type: 'circle',\r\n                            position: myChart.convertToPixel('grid', item),\r\n                            shape: {\r\n                                cx: 0,\r\n                                cy: 0,\r\n                                r: symbolSize / 2\r\n                            },\r\n                            invisible: true,\r\n                            draggable: true,\r\n                            ondrag: echarts.util.curry(onPointDragging, dataIndex, index),\r\n                            onmousemove: echarts.util.curry(showTooltip, dataIndex),\r\n                            onmouseout: echarts.util.curry(hideTooltip, dataIndex),\r\n                            z: 100\r\n                        };\r\n                    })\r\n                };\r\n            })\r\n \r\n        });\r\n    }, 0);\r\n \r\nwindow.addEventListener('resize', function() {\r\n \r\n    myChart.resize();\r\n         \r\n        myChart.setOption({\r\n            graphic: echarts.util.map(data, function(element, index) {\r\n                //console.log('1st layer!');\r\n                return {\r\n                    type: 'group',\r\n                    id: 'group' + (index + 1),\r\n                    children: echarts.util.map(element, function(item, dataIndex) {\r\n \r\n                        var i = index;\r\n                        return {\r\n                            type: 'circle',\r\n                            position: myChart.convertToPixel('grid', item),\r\n                            shape: {\r\n                                cx: 0,\r\n                                cy: 0,\r\n                                r: symbolSize / 2\r\n                            },\r\n                            invisible: true,\r\n                            draggable: true,\r\n                            ondrag: echarts.util.curry(onPointDragging, dataIndex, index),\r\n                            onmousemove: echarts.util.curry(showTooltip, dataIndex),\r\n                            onmouseout: echarts.util.curry(hideTooltip, dataIndex),\r\n                            z: 100\r\n                        };\r\n                    })\r\n                };\r\n            })\r\n \r\n        });\r\n         \r\n});\r\n}\r\n \r\n \r\n \r\n \r\nfunction showTooltip(dataIndex) {\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 0,\r\n        dataIndex: dataIndex\r\n    });\r\n}\r\n \r\nfunction hideTooltip(dataIndex) {\r\n    myChart.dispatchAction({\r\n        type: 'hideTip'\r\n    });\r\n}\r\n \r\nfunction onPointDragging(dataIndex, i) {\r\n     \r\n      var tmpPos = myChart.convertFromPixel({ 'seriesIndex': 0 }, this.position);\r\n    //console.log('Drag !' + i);\r\n    data[i][dataIndex][1] = tmpPos[1];\r\n \r\n    // Update data\r\n    myChart.setOption({\r\n        series: optionSeries\r\n    });\r\n     \r\n    \r\n}\r\n \r\n \r\noption = {\r\n    title: {\r\n        text: ''\r\n    },\r\n    legend: {\r\n                \r\n           \r\n        left: 0,\r\n        top: 100\r\n    },\r\n    grid: {\r\n        top: 100\r\n    },\r\n    xAxis: {\r\n        min: 0,\r\n        max: 1000\r\n    },\r\n    yAxis: {\r\n        min: 0,\r\n        max: 1000\r\n    },\r\n    series: optionSeries,\r\n    \r\n};","html":"","externalScripts":"","updaterUID":"bd-3540791547","theme":"","layout":"","viewCount":499,"userName":"龙***4","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_ae2-aHuD.png?v=1552039234523","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","legend","series-graph","title"],"customTags":[],"updaterUserName":"龙***4"}}