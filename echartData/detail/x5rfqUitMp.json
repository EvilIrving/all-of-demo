{"status":0,"data":{"cid":"x5rfqUitMp","authorUid":"obd-oD0FFHJpMhQm98f08NmRJwAGWUn5I1x","authorUserName":"心***7","title":"重点人群统计图","description":"带背景的颜色渐变柱状图，数据大于5条label可切斜显示","latestVersion":4,"alwaysLatest":1,"createTime":"2020-11-13T07:31:11.000Z","lastUpdateTime":"2020-11-13T07:31:11.000Z","auth":1,"uid":"obd-oD0FFHJpMhQm98f08NmRJwAGWUn5I1x","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-13T07:40:31.000Z","code":"let colorArr =  [\"#88d4ff\", \"#3a89ff\"]\nlet unit = '千人'\nlet dataArr = [\n        {\n            \"code\":\"1003\",\n            \"name\":\"刑释解教人员\",\n            \"num\":4\n        },\n        {\n            \"code\":\"1009\",\n            \"name\":\"社区矫正人员\",\n            \"num\":5\n        },\n        {\n            \"code\":\"1011\",\n            \"name\":\"精神病患者\",\n            \"num\":3\n        },\n        {\n            \"code\":\"1012\",\n            \"name\":\"信教人员\",\n            \"num\":4\n        }\n    ]\nlet TData = dataArr.map(item => Number(item.num));\nlet max = Math.max(...TData);\nlet dataShadow = [];\nfor (var i = 0; i < dataArr.length; i++) {\n    dataShadow.push((max * 100 + 100) / 100); //最大值+1\n}\n\noption = {\n    backgroundColor: '#080b30',\n    title: {\n        text: '重点人群',\n        textStyle: {\n            align: 'center',\n            color: '#fff',\n            fontSize: 20,\n        },\n        top: '3%',\n        left: 'center'\n    },\n    grid: {\n          left: '5%',\n          right: 10,\n          top: '15%',\n          bottom: 25,\n          containLabel: true\n        },\n    tooltip: {\n          formatter: \"{b}: {c}\" + unit\n        },\n    xAxis: [\n          {\n            type: \"category\",\n            data: dataArr.map(item => item.name),\n            axisLabel: {\n              interval: 0,\n              rotate: dataArr.length > 5 ? 15 : 0, //数据大于5条时切斜显示\n              color: \"rgba(255,255,255,.8)\",\n              fontSize: 14,\n              align: \"center\",\n              padding: dataArr.length > 5 ? [30, 0, 0, -24] : [0, 0, 0, -24]\n            },\n            axisTick: {\n              show: false\n            },\n            axisLine: {\n              lineStyle: {\n                color: \"rgba(135,142,148,0.5)\"\n              }\n            }\n          }\n        ],\n    yAxis: {\n          type: \"value\",\n          name: \"单位（\" + unit + \"）\",\n          nameTextStyle: {\n            fontSize: 14,\n            color: \"#9ca2a8\",\n            padding: [0, 0, 10, -30]\n          },\n          scale: false,\n          axisLabel: {\n            color: \"#a0a5ab\",\n            fontSize: 12,\n          },\n          splitLine: {\n            show: true,\n            lineStyle: {\n              color: \"rgba(255,255,255,.1)\"\n            }\n          },\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          }\n        },\n    series: [{\n            type: \"bar\",\n            data: TData,\n            zlevel: 2, //修改层级，确保鼠标可移入\n            barMaxWidth: 30,\n            itemStyle: {\n              normal: {//默认渐变\n                barBorderRadius: 2,\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                  { offset: 0, color: colorArr[0] },\n                  { offset: 1, color: colorArr[1] }\n                ])\n              },\n              emphasis: {//高亮时渐变\n                barBorderRadius: 2,\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                  { offset: 0, color: colorArr[1] },\n                  { offset: 1, color: colorArr[0] }\n                ])\n              }\n            },\n            label: {\n              normal: {\n                show: true,\n                position: \"top\",\n                color: \"#fff\",\n                fontSize: \"16\"\n              },\n              emphasis: {\n                color: colorArr[0]\n              }\n            }\n          },\n          { //背景条\n            type: \"bar\",\n            itemStyle: {\n              color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n                { offset: 0, color: \"rgba(0,196,255,0.2)\" },\n                { offset: 1, color: \"rgba(0,0,0,0)\" }\n              ])\n            },\n            barMaxWidth: 30 * 2.8,\n            barGap: \"-190%\",\n            tooltip: {\n              show: false\n            },\n            cursor: \"default\",\n            data: dataShadow,\n            animation: false\n          }]\n};","html":"","externalScripts":"","updaterUID":"obd-oD0FFHJpMhQm98f08NmRJwAGWUn5I1x","theme":"default","layout":"","viewCount":111,"userName":"心***7","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5rfqUitMp.png?v=1605253231440","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","title","tooltip"],"customTags":["color","rotate"],"updaterUserName":"心***7"}}