{"status":0,"data":{"cid":"xEvXqBDagq","authorUid":"bd-2291206321","authorUserName":"1***去","title":"水","description":"水测试","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-27T06:18:25.000Z","lastUpdateTime":"2020-09-27T06:18:25.000Z","auth":2,"uid":"bd-2291206321","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-27T11:59:19.000Z","code":"var data = [{\r\n        name: \"水耗\",\r\n        value: 536\r\n    },\r\n    {\r\n        name: \"能耗指标\",\r\n        value: 500\r\n    }\r\n    \r\n];\r\narrName = getArrayValue(data, \"name\");\r\nsumValue = 1000; //总数\r\noptionData = getData(data);\r\n\r\nfunction getArrayValue(array, key) {\r\n    // var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction array2obj(array, key) {\r\n    var resObj = {};\r\n    for (var i = 0; i < array.length; i++) {\r\n        resObj[array[i][key]] = array[i];\r\n    }\r\n    return resObj;\r\n}\r\n\r\nfunction getData(data) {\r\n    var res = {\r\n        series: [{\r\n            // name: \"大环\",\r\n            type: 'gauge',\r\n            // splitNumber: 15,\r\n            radius: '90%',\r\n              \r\n            center: ['50%', '50%'],\r\n            startAngle: 90,\r\n            endAngle: -270,\r\n            axisLine: {\r\n                show: false,\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            detail: {\r\n                show: false\r\n            },\r\n            // itemStyle: {\r\n            //     normal: {\r\n            //         label: {\r\n            //             show: true,\r\n            //             position: 'inner'\r\n            //         }\r\n            //     }\r\n            // }\r\n        }],\r\n        yAxis: []\r\n    };\r\n    for (var i = 0; i < data.length; i++) {\r\n        res.series.push({\r\n            // name: '按单位',\r\n            type: 'pie',\r\n            clockWise: true,\r\n            z: 2,\r\n            hoverAnimation: false,\r\n            // radius: [65 - i * 7 + '%', 60 - i * 7 + '%'],\r\n              radius: [65 - i * 25 + '%', 50- i * 5 + '%'],\r\n            // center: [\"50%\", \"50%\"],\r\n            label: {\r\n                show: true,\r\n                position: 'inside',\r\n                color: '#ffff',\r\n                formatter: function(params) {\r\n                    return params.value;\r\n                }\r\n            },\r\n            labelLine: {\r\n                // show: false\r\n            },\r\n            data: [{\r\n                    value: data[i].value,\r\n                    name: data[i].name\r\n                },\r\n                {\r\n                    value: sumValue - data[i].value,\r\n                    name: '',\r\n                    itemStyle: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderWidth: 0\r\n                    },\r\n                    tooltip: {\r\n                        show: false\r\n                    },\r\n                    label: {\r\n                        show: false\r\n                    },\r\n                    hoverAnimation: false\r\n                }\r\n            ],\r\n            itemStyle: {\r\n                emphasis: {\r\n                    shadowBlur: 10,\r\n                    shadowOffsetX: 0,\r\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                }\r\n            }\r\n        });\r\n        res.yAxis.push(data[i].name);\r\n    }\r\n    return res;\r\n}\r\n\r\noption = {\r\n       backgroundColor: '#0b214a',\r\n    title: {\r\n        text: '水',\r\n        x: 'center',\r\n        y: 15,\r\n        textStyle: { // 文本样式\r\n            fontSize: 32,\r\n            fontWeight: 700,\r\n            color: '#99FFFF'\r\n        }\r\n    },\r\n    color: ['#5DC4C4', '#C43CA9', '#655AB8', '#11AAB0', '#1582E8', '#4F7FD3', '#38BFB8'],\r\n    // legend: {\r\n    //     show: true,\r\n    //     data: arrName,\r\n    //     left: 'center',\r\n    //     bottom: 40,\r\n    //     textStyle: {\r\n    //         color: '#99FFFF',\r\n    //         fontSize: 20\r\n    //     }\r\n    // },\r\n     tooltip: {\r\n        show: true,\r\n        trigger: 'item', //提示框触发类型，item数据项图形触发，主要应用于无类目轴的图表（散点图、饼形图等）\r\n        // formatter: function(params, ticket, callback) { //第一个参数数据集、第二个参数是异步回调标志、第三个参数是异步回调\r\n        //     return params.seriesName + \": \" + params.value + \"℃\"; //系列名称：数据值\r\n        // }\r\n    },\r\n    grid: {\r\n        top: '16%',\r\n        bottom: '60%',\r\n        left: \"50%\",\r\n        containLabel: false\r\n    },\r\n    yAxis: [{\r\n        type: 'category',\r\n        inverse: true,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            inside: false,\r\n            textStyle: {\r\n                color: '#99FFFF',\r\n                fontSize: 15,\r\n            },\r\n            show: true\r\n        },\r\n        max: 5,\r\n        data: optionData.yAxis\r\n    }],\r\n    xAxis: [{\r\n        show: false\r\n    }],\r\n    series: optionData.series\r\n};\r\n\r\n\r\n","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-2291206321","theme":"","layout":"","viewCount":89,"userName":"1***去","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xEvXqBDagq.png?v=1601207959850","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-gauge","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"1***去"}}