{"status":0,"data":{"cid":"xdysA_7PCd","authorUid":"bd-3476712581","authorUserName":"温***孔","title":"饼图","description":"内部可切换内容，支持legend点击事件。","latestVersion":1,"alwaysLatest":1,"createTime":"2019-04-25T07:34:42.000Z","lastUpdateTime":"2019-04-25T07:34:42.000Z","auth":2,"uid":"bd-3476712581","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-04-25T07:34:42.000Z","code":"const dataSetArr = [\n  {\"name\":\"本科\", \"value\": 56},\n  {\"name\":\"硕士\", \"value\": 40},\n  {\"name\":\"博士\", \"value\": 15},\n  {\"name\":\"留学\", \"value\": 76}\n];\nlet currName = \"\";\nlet myChart = echarts.getInstanceByDom(document.getElementById('chart-panel'));\n//console.log(myChart);\nmyChart.on('mouseover', (params) => {\n\tcurrName = params.name;\n\n\tlet op = myChart.getOption();\n\tif(params.seriesIndex === 0){\n\t\tlet _label = {\n\t\t\tnormal:{\n\t\t\t\tshow: true,\n\t\t\t\tposition: 'center',\n\t\t\t\tformatter: [\n\t\t\t\t\t`{a|${params.name}}`,\n\t\t\t\t\t`{b|${params.percent + \"%\"}}`\n\t\t\t\t].join('\\n'),\n\t\t\t\trich: {\n\t\t\t\t\ta: {\n\t\t\t\t\t\tcolor:'#fff',\n\t\t\t\t\t\tfontSize: 18,\n\t\t\t\t\t\tlineHeight: 30\n\t\t\t\t\t},\n\t\t\t\t\tb: {\n\t\t\t\t\t\tcolor:'yellow',\n\t\t\t\t\t\tfontSize: 20,\n\t\t\t\t\t\tfoneWeight:'bold',\n\t\t\t\t\t\ttextShadowBlur: 20,\n\t\t\t\t\t\ttextShadowColor: 'yellow'\n\t\t\t\t\t},\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}  \n\t\t}\n\t\n\t\top.series[2].label = _label;\n\t\tmyChart.setOption(op,true)\n\t\t\n\t}\n\t\n\n})\nlet colors = _colors(),itemCol =_itemColor();\nlet dataSorce =_yAxisData()\nlet centerData =_getCenterData()\nlet legendData =_legData()\n\noption = {\n\tbackgroundColor:\"#0C1D38\",\n\tcolor:colors,\n\tlegend:{\n\t\tshow:true,\n\t\tright:'3%',\n\t\ttop:\"12%\",\n\t\ttype:'scroll',\n\t\titemWidth: 12,\n\t\titemHeight: 12,\n\t\torient:\"vertical\",\n\t\tdata:legendData\n\t},\n\ttooltip:{\n\t\tshow:true,\n\t\tbackgroundColor:'rgba(3,43,80,0.7)',\n\t\ttextStyle:{\n\t\t\tcolor:'rgba(255,255,255,0.7)',\n\t\t\tfontSize:16\n\t\t},\n\t\textraCssText:'text-align:left',\n\t\tformatter:function(params,m){\n\t\t\tlet item = `<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:${itemCol[params.dataIndex]};\"></span>`;\n\t\t\tlet\tstr = `${item} ${params.name}&nbsp;${params.value}`;\n\t\t\treturn str\n\t\t}\n\t},\n\tseries : [\n\t\t{\n\t\t\tname:'',\n\t\t\ttype:'pie',\n\t\t\thoverAnimation:false,\n\t\t\tradius: ['43%', '63%'],\n\t\t\tcenter: ['42%', '47%'],\n\t\t\tavoidLabelOverlap: true,\n\t\t\tlabel: {\n\t\t\t\t// normal: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\tposition: 'outside',\n\t\t\t\t\tformatter:function(params){\n\t\t\t\t\t\tlet nm = params.name,per = Number(params.percent).toFixed(2) ;\n\t\t\t\t\t\treturn [`{a|${nm}}\\n`,`{b|${per}%}`]\n\t\t\t\t\t},\n\t\t\t\t\trich: {\n\t\t\t\t\t\ta: {\n\t\t\t\t\t\t\tcolor:'#fff',\n\t\t\t\t\t\t\tfontSize:14,\n\t\t\t\t\t\t\tlineHeight: 20\n\t\t\t\t\t\t},\n\t\t\t\t\t\tb: {\n\t\t\t\t\t\t\tcolor:'yellow',\n\t\t\t\t\t\t\tfontSize:14,\n\t\t\t\t\t\t\tfoneWeight:'bold'\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t// }\n\t\t\t},\n\t\t\tlabelLine: {\n\t\t\t\tnormal: {\n\t\t\t\t\tshow: true,\n\t\t\t\t\tlength:22,\n\t\t\t\t\tlength2: 40,\n\t\t\t\t\tlineStyle:{\n\t\t\t\t\t\tcolor: '#fff',\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdata:dataSorce\n\t\t},\n\t\t{\n\t\t\tname: '边框1',\n\t\t\ttype: 'pie',\n\t\t\thoverAnimation:false,\n\t\t\tradius:['73%', '73.5%'],\n\t\t\tcenter: ['42%', '47%'],\n\t\t\tlabelLine:{\n\t\t\t  normal:{\n\t\t\t\t  show: false\n\t\t\t  }  \n\t\t\t},\n\t\t\titemStyle:{\n\t\t\t\tnormal:{\n\t\t\t\t\tcolor: '#2bb0eb',\n\t\t\t\t\tshadowColor: '#2bb0eb', \n\t\t\t\t\tborderWidth:5,\n                    borderColor:\"rgba(43,176,235,0.2)\" ,\n\t\t\t\t\tshadowBlur: 20,\n\t\t\t\t\topacity:0.3\n\t\t\t\t}\n\t\t\t},\n\t\t\tdata: [\n\t\t\t\t{\n\t\t\t\t\tvalue: 100,\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\tshow:false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tname: '内框',\n\t\t\ttype: 'pie',\n\t\t\thoverAnimation:false,\n\t\t\tradius:['38%', '38.5%'],\n\t\t\tcenter: ['42%', '47%'],\n\t\t\tlabel: {\n\t\t\t  normal:{\n\t\t\t\t\tshow: true,\n\t\t\t\t\tposition: 'center',\n\t\t\t\t\t\n\t\t\t\t\tformatter: [\n\t\t\t\t\t\t`{a|${centerData[0].name}}`,\n\t\t\t\t\t\t`{b|${centerData[0].value + \"%\"}}`\n\t\t\t\t\t].join('\\n'),\n\t\t\t\t\trich: {\n\t\t\t\t\t\ta: {\n\t\t\t\t\t\t\tcolor:'#fff',\n\t\t\t\t\t\t\tfontSize: 18,\n\t\t\t\t\t\t\tlineHeight: 30\n\t\t\t\t\t\t},\n\t\t\t\t\t\tb: {\n\t\t\t\t\t\t\tcolor:'yellow',\n\t\t\t\t\t\t\tfontSize: 20,\n\t\t\t\t\t\t\tfoneWeight:'bold',\n\t\t\t\t\t\t\ttextShadowBlur: 20,\n\t\t\t\t\t\t\ttextShadowColor: 'yellow'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}  \n\t\t\t},\n\t\t\tlabelLine:{\n\t\t\t  normal:{\n\t\t\t\t  show: false\n\t\t\t  }  \n\t\t\t},\n\t\t\titemStyle:{\n\t\t\t\tnormal:{\n\t\t\t\t\tcolor: '#2bb0eb',\n\t\t\t\t\tshadowColor: '#2bb0eb', \n\t\t\t\t\tborderWidth:5,\n                    borderColor:\"rgba(43,176,235,0.2)\" ,\n\t\t\t\t// \tshadowBlur: 2,\n\t\t\t\t// \topacity:0.3\n\t\t\t\t}\t\n\t\t\t},\n\t\t\tdata: [\n\t\t\t\t{\n\t\t\t\t\tvalue: 100,\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\tshow:false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t]\n\t\n}\n\nfunction _legData() {\n\tlet dataArr = [];\n\tdataSetArr && dataSetArr.map((item,i)=>{\n\t\tdataArr.push({name:item.name,icon:\"circle\",textStyle:{color:'#ccc',fontSize:12}})\n\t})\n\treturn dataArr;\n}\nfunction _yAxisData() {\n\treturn dataSetArr && dataSetArr.map(item => item)\n}\nfunction _dySum(){\n\tlet dySum = 0,arr = [];\n\tdataSetArr.map((item)=>{\n\t\tdySum += Number(item.value);\n\t})\n\t\n\tdataSetArr && dataSetArr.map((item)=>{\n\t\tlet val = (Number(item.value)/dySum*100).toFixed(2);\n\t\tarr.push({\n\t\t\tname:item.name,\n\t\t\tvalue:val\n\t\t})\n\t})\n\treturn arr\n\n}\nfunction _getCenterData() {\n\tlet dtS = _dySum();\n\n\tif(currName !== ''){\n\n\t\treturn dtS && dtS.filter(item => {return item.name === currName})\n\t}else{\n\n\t\treturn [dtS && dtS[0]]\n\t}\n\t\n}\nfunction _axisLine() {\n\treturn {\n\t\tlineStyle: {\n\t\t\tcolor: '#3398DB', //坐标轴线颜色\n\t\t\twidth: 2\n        }\n\t}\n}\nfunction _itemColor(){\n\treturn ['#327bfa','#f6973d','#17d8a1','#7a3ceb','#e40036','#ffde1d','#f8492c','#1da349','#eb3d7e']\n}\nfunction _colors() {\n\treturn [\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#327bfa'  }, // 1\n\t\t\t{offset: 1, color: '#77a6f8' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#f6973d'  }, //2\n\t\t\t{offset: 1, color: '#ffc58e' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#17d8a1'  }, //3\n\t\t\t{offset: 1, color: '#b9ffeb' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#7a3ceb'  }, //4\n\t\t\t{offset: 1, color: '#b691f9' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#e40036'  }, //5\n\t\t\t{offset: 1, color: '#f97695' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#ffde1d'  }, //6\n\t\t\t{offset: 1, color: '#fff2a5' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#f8492c'  },//7\n\t\t\t{offset: 1, color: '#fea191' } \n\t\t], false),\n\t\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#1da349'  }, //8\n\t\t\t{offset: 1, color: '#39d16b' } \n\t\t], false),\n\t\tnew this.echarts.graphic.LinearGradient(0, 0, 0, 1, \n\t\t[\n\t\t\t{offset: 0,color: '#eb3d7e'  }, //9\n\t\t\t{offset: 1, color: '#fd97bd' } \n\t\t], false)\n\t];\n}\n\n\n","html":"","externalScripts":"https://cdn.rawgit.com/ecomfe/echarts-wordcloud/833ed011/dist/echarts-wordcloud.min.js","updaterUID":"bd-3476712581","theme":"","layout":"","viewCount":1329,"userName":"温***孔","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xdysA_7PCd.png?v=1556177683059","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"温***孔"}}