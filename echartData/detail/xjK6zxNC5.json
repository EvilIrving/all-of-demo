{"status":0,"data":{"cid":"xjK6zxNC5","authorUid":"bd-2552167583","authorUserName":"z***g","title":"柱状图","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-03-07T10:22:03.000Z","lastUpdateTime":"2020-03-07T10:22:03.000Z","auth":2,"uid":"bd-2552167583","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.4.0","versionCreateTime":"2020-03-07T10:43:51.000Z","code":"var list = [{\r\n    \"count\": 3,\r\n    \"province\": \"北京\"\r\n}, {\r\n    \"count\": 10,\r\n    \"province\": \"天津\"\r\n}, {\r\n    \"count\": 60,\r\n    \"province\": \"河北\"\r\n}];\r\n\r\nfunction min(array) {\r\n    var min = array[0];\r\n    var len = array.length;\r\n    for (var i = 1; i < len; i++) {\r\n        if ((array[i] && array[i] < min) || array[i] == 0 && array[i] < min) {\r\n            min = array[i];\r\n        }\r\n    }\r\n    return min;\r\n}\r\n\r\nfunction max(array) {\r\n    var max = array[0];\r\n    var len = array.length;\r\n    for (var i = 0; i < len; i++) {\r\n        if ((array[i] && array[i] > max) || array[i] == 0 && array[i] > max) {\r\n            max = array[i];\r\n        }\r\n    }\r\n    return max;\r\n}\r\nvar xAxis = new Array();\r\nvar data = new Array();\r\nlist.forEach((value, index, arr) => {\r\n    xAxis.push(value.province);\r\n    data.push(value.count);\r\n})\r\n\r\nvar minarr = Number(min(data)),\r\n    maxarr = Number(max(data)),\r\n    min, max;\r\nmin = minarr / 1.2, max = maxarr * 1.2;\r\n/**\r\n * 柱状图比例\r\n * @param count\r\n * @returns {string}\r\n */\r\nfunction percent(count) {\r\n    var a = (count / 100) * 4 * 100;\r\n    return a.toFixed(0) + \"%\";\r\n}\r\nvar name = \"数量\";\r\n\r\nvar barWidth = percent(xAxis.length);\r\noption = {\r\n    backgroundColor: \"#000C3B\",\r\n    color: ['#38b3f1'],\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'line' // 默认为直线，可选为：'line' | 'shadow'\r\n        }\r\n    },\r\n    textStyle: {\r\n        color: '#ccc'\r\n    },\r\n    grid: {\r\n        top: '10%',\r\n        left: '3%',\r\n        right: '3%',\r\n        bottom: '6%',\r\n        containLabel: true\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#57617B'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#83c7e3'\r\n            }\r\n        },\r\n        //\tdata: xAxis\r\n    }],\r\n    yAxis: [{\r\n        type: 'value',\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#57617B'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            margin: 10,\r\n            textStyle: {\r\n                fontSize: 12,\r\n                color: '#83c7e3'\r\n            }\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: '#57617B'\r\n            }\r\n        },\r\n\r\n        min: min.toFixed(0) < 10 ? 0 : min.toFixed(0),\r\n        max: max.toFixed(0) < 10 ? 10 : max.toFixed(0)\r\n    }],\r\n    series: [{\r\n        name: name,\r\n        type: 'bar',\r\n        barWidth: barWidth,\r\n        data: [3]\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-2552167583","theme":"","layout":"","viewCount":19,"userName":"z***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjK6zxNC5.png?v=1583577831802","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"z***g"}}