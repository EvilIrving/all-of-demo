{"status":0,"data":{"cid":"xSkIQYV2Rz","authorUid":"bd-515267931","authorUserName":"杀猪杀红眼","title":"Echarts 折线打点","description":"为了解决个别数据显示方便查看。与数据之间视觉一目了然做了坐标系处理\n\n\n使用：点击出现单个Y轴所有数据，再次点击消除。","latestVersion":1,"alwaysLatest":1,"createTime":"2018-05-18T11:29:33.000Z","lastUpdateTime":"2018-05-18T11:29:33.000Z","auth":2,"uid":"bd-515267931","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.1.0","versionCreateTime":"2018-05-18T11:29:33.000Z","code":"\r\n       var dataSource = [];\r\n       var dataSource2 = [];\r\n       var xAxisFlag = \"\";\r\n       var index = 0;\r\n        var option = {\r\n            title: {\r\n                text: 'ECharts'\r\n            },\r\n            tooltip: {\r\n                show:true,\r\n                trigger: 'axis',\r\n                backgroundColor:['skyblue'],\r\n                textStyle:{\r\n                    color:['#003']\r\n                }, \r\n            },\r\n            legend: {\r\n                data:['销量']\r\n            },\r\n            dataZoom: [{\r\n                show: true,\r\n                realtime: true,\r\n                start: 20,\r\n                end: 80\r\n            }, {\r\n                type: 'inside',\r\n                realtime: true,\r\n                start: 20,\r\n                end: 80\r\n            }],\r\n            xAxis: {\r\n                data: [\"0\",\"1\",\"2\",\"3\",\"4\",\"5\"],\r\n                boundaryGap: false,\r\n            },\r\n            yAxis: {\r\n\r\n            },\r\n            toolbox: {\r\n                show: true,\r\n                feature: {\r\n                    mark: true,\r\n                    dataView: { show: true, readOnly: false },\r\n                    restore: { show: true},\r\n                    saveAsImage: { show: true }\r\n                },\r\n\r\n            },\r\n            series: [\r\n                {\r\n                    name: '折线A',\r\n                    type: 'line',\r\n                    data: [5, 20, 36, 10, 10, 20],\r\n                    showSymbol:false,\r\n                    markLine: { // 设置警戒线（图表标线）\r\n                  \t\tsilent: true, // 图形是否不响应和触发鼠标事件\r\n                  \t\tlineStyle: {\r\n                    \t\tnormal: {\r\n                      \t\t\ttype: 'solid'\r\n                    \t\t}\r\n                  \t\t},\r\n                  \t\tdata: [],\r\n               \t\t},\r\n                    markPoint: {\r\n                        data: [\r\n                        //     {xAxis: 2, yAxis: 15,label: {\r\n                        //     label: true,\r\n                        //     formatter: '1111',\r\n                        //     position: [40, 100],\r\n                        // } },\r\n                        //      {xAxis: 4, yAxis: 15,label: {\r\n                        //     label: true,\r\n                        //     formatter: '2222',\r\n                        //     position: [40, 100],\r\n                        // } }\r\n                            \r\n                        ],\r\n                        \r\n                        \r\n                    },\r\n                },\r\n                {\r\n                    name: '折线B',\r\n                    type: 'line',\r\n                    data: [15, 22, 10, 30, 20, 40],\r\n                    showSymbol:false,\r\n                },\r\n                {\r\n                    name: '折线C',\r\n                    type: 'line',\r\n                    data: [21, 14, 16, 21, 12, 16],\r\n                    showSymbol:false,\r\n                },\r\n                {\r\n                    name: '折线D',\r\n                    type: 'line',\r\n                    data: [25, 8, 12, 30, 26, 22],\r\n                    showSymbol:false,\r\n                },\r\n            ]\r\n        };\r\n\r\n        myChart.setOption(option);\r\n        myChart.on('click',function(param){\r\n            dataIndex = param.dataIndex;//X轴的索引\r\n            // alert(param.data)//y轴点位置\r\n            // alert(dataIndex)\r\n            var xAxisValue = option.xAxis.data[dataIndex];  \r\n            // console.log(xAxisValue);\r\n            if (option.series[0].markLine.data.length == 0) {\r\n            var value = \"\";\r\n            value += xAxisValue;\r\n            for (var i = 0; i < option.series.length; i++) {\r\n            \tvalue += '\\n' + option.series[i].name + '：' + option.series[i].data[dataIndex];\r\n            }\r\n            // alert(value);                  \r\n            var obj = {//标线\r\n            \ttype: 'average',\r\n            \txAxis: xAxisValue, // 设定值\r\n            \tlabel: {}\r\n            }\r\n            var obj2 = {//数据位置\r\n                xAxis: dataIndex,\r\n                yAxis: param.data,\r\n                symbol:\"circle\",\r\n                symbolSize:1,\r\n                label:{\r\n                    show:true,\r\n                    formatter:value,\r\n                    position:[10,10]\r\n                },\r\n            }\r\n            // dataSource3.push(obj3);\r\n          \r\n            dataSource2.push(obj2);\r\n            dataSource.push(obj);\r\n            option.series[0].markPoint.data = dataSource2;\r\n            option.series[0].markLine.data = dataSource;\r\n        \tmyChart.setOption(option);\r\n            } else {          \t             \r\n            \tfor (var i = 0; i < option.series[0].markLine.data.length; i++) {\r\n            \tvar xAxisIndex = option.series[0].markLine.data[i].xAxis;\r\n            \t\tif (xAxisIndex == xAxisValue) {\r\n            \t\t\tindex = i;\r\n            \t\t\tconsole.log('值相等');\r\n            \t\t\tbreak;\r\n            \t\t} else {\r\n            \t\t\tindex = -1;\r\n            \t\t\tconsole.log('值不相等');\r\n            \t\t}\r\n            \t}\r\n            \r\n            \tif (index == -1) {\r\n            \t\t var value = \"\";\r\n            \t\tvar xAxisValue = option.xAxis.data[dataIndex];\r\n            \t\tvalue += xAxisValue;\r\n            \t\tfor (var i = 0; i < option.series.length; i++) {\r\n            \t\t\tvalue += '\\n' + option.series[i].name + '：' + option.series[i].data[dataIndex];\r\n            \t\t}\r\n                       \r\n            \t\tvar obj = {\r\n            \t\t\ttype: 'average',\r\n            \t\t\txAxis: xAxisValue, // 设定值\r\n            \t\t\tlabel: {}\r\n            \t    }\r\n            \t    var obj2 = {\r\n            \t        xAxis: dataIndex,\r\n                        yAxis: param.data,\r\n                        symbol:\"circle\",\r\n                        symbolSize:1,\r\n                        label:{\r\n                            show:true,\r\n                            formatter:value,\r\n                            position:[10,10]\r\n                        }\r\n            \t    }\r\n            \tdataSource.push(obj);\r\n            \tdataSource2.push(obj2);\r\n            \toption.series[0].markPoint.data = dataSource2\r\n            \toption.series[0].markLine.data = dataSource;\r\n        \t\tmyChart.setOption(option);\r\n            \t} else {\r\n            \t\tconsole.log('剔除相等值');\r\n            \t\toption.series[0].markPoint.data.splice(index,1);\r\n            \t\toption.series[0].markLine.data.splice(index,1);\r\n            \t\tmyChart.setOption(option);\r\n            \t}\r\n            }\r\n\t\t})","html":"","externalScripts":"","updaterUID":"bd-515267931","theme":"","layout":"","viewCount":8453,"userName":"杀猪杀红眼","commentCount":2,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkIQYV2Rz.png?v=1526642973972","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","markLine","markPoint","series-line","title","toolbox","tooltip"],"customTags":[],"updaterUserName":"杀猪杀红眼"}}