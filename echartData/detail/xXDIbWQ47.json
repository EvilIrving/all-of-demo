{"status":0,"data":{"cid":"xXDIbWQ47","authorUid":"bd-365218436","authorUserName":"G***G","title":"转圈","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-01-02T07:32:41.000Z","lastUpdateTime":"2020-01-02T07:32:41.000Z","auth":2,"uid":"bd-365218436","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-02T07:32:41.000Z","code":"var cl = 0 // 循环小球初始化\r\n\r\nball_border = 85 // 外边框大小\r\nborder_width = 1.5 // 外圈宽度\r\nborder_color = \"#b0cdf2\" // 外边框颜色 红色 \"#ff8377\"\r\nfont_color = \"#333\"\r\n\r\ninside_track = 65 // 内圈大小\r\ninside_width = 3.5 // 内圈宽度\r\n\r\n// 判断屏幕宽度\r\n// if ($(window).width() < 1400) {\r\n//     inside_width = 10\r\n// }\r\n\r\n// 正常率低于90就显示红色\r\nvar nml = 100\r\nvar ok = 50\r\nvar bl = 0\r\nbl = ok / nml * 100\r\nbl = bl.toFixed(1)\r\nif (bl < 90) {\r\n    border_color = \"#ff8377\"\r\n    font_color = \"#ff8377\"\r\n}\r\n\r\nvar xjpointColor = [ // 控制小点的颜色\r\n    'rgba(13,197,113,1)',\r\n    'rgba(13,197,113,1)',\r\n    'rgba(13,197,113,1)'\r\n]\r\n\r\noption = {\r\n    backgroundColor: \"#fff\",\r\n    color: border_color,\r\n    title: {\r\n        text: '\\n{a|正常率\\n\\n}' + \"{c|\" + bl + \"}\" + \"{b|%}\\n\",\r\n        textStyle: {\r\n            color: font_color,\r\n            rich: {\r\n                a: {\r\n                    color: \"#333\",\r\n                    fontSize: 14\r\n                },\r\n                b: {\r\n                    fontSize: 18\r\n                },\r\n                c: {\r\n                    fontSize: 35,\r\n                    fontWeight: 600\r\n                }\r\n            }\r\n        },\r\n        x: 'center',\r\n        y: 'center',\r\n    },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b} {c} ({d}%)\"\r\n    },\r\n    polar: {\r\n        center: ['50.35%', 50 + '%'],\r\n        radius: ball_border + \"%\"\r\n    },\r\n    visualMap: {\r\n        show: false,\r\n        seriesIndex: 1,\r\n        dimension: 1,\r\n        type: 'continuous',\r\n        min: 0,\r\n        max: 180,\r\n        text: ['High', 'Low'],\r\n        realtime: false,\r\n        calculable: true,\r\n        inRange: {\r\n            color: xjpointColor,\r\n            symbolSize: [10, 20]\r\n        }\r\n    },\r\n    angleAxis: {\r\n        type: 'value',\r\n        min: 0,\r\n        max: 180,\r\n        startAngle: 180,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n    },\r\n    radiusAxis: {\r\n        min: 0,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        }\r\n    },\r\n    series: [\r\n\r\n        {\r\n            name: \"覆盖外边框\",\r\n            type: \"gauge\",\r\n            radius: ball_border + \"%\",\r\n            startAngle: 0,\r\n            endAngle: 359.9,\r\n            splitNumber: 100,\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                length: 20,\r\n                lineStyle: {\r\n                    width: 2,\r\n                    color: \"#fff\"\r\n                }\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            pointer: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                lineStyle: {\r\n                    opacity: 0\r\n                }\r\n            },\r\n            detail: {\r\n                show: false\r\n            },\r\n            data: [{\r\n                value: 0,\r\n                name: \"\"\r\n            }]\r\n        }, {\r\n            name: '外边框',\r\n            type: 'pie',\r\n            radius: [ball_border - 1 - border_width + \"%\", ball_border - 1 + \"%\"],\r\n            silent: true,\r\n            z: 0,\r\n            labelLine: {\r\n                normal: {\r\n                    show: false,\r\n                }\r\n            },\r\n            data: [{\r\n                value: 150,\r\n                itemStyle: {\r\n                    normal: {\r\n                        show: true,\r\n                        color: \"#b0cdf2\",\r\n                        backgroundColor: \"red\"\r\n                    }\r\n                }\r\n            }]\r\n        },\r\n        {\r\n            name: \"内圈\",\r\n            type: \"pie\",\r\n            radius: [inside_track - inside_width + \"%\", inside_track + \"$\"],\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                    position: \"center\"\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            z: 2,\r\n            zlevel: 0,\r\n            itemStyle: {\r\n                borderWidth: 0,\r\n            },\r\n            data: [{\r\n                    value: bl,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#b0cdf2\",\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    value: 100 - bl,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false,\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#fb4b4b\",\r\n                        }\r\n                    }\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            // 还没调试出来\r\n            name: \"内圈\",\r\n            type: \"pie\",\r\n            radius: [65 + \"%\", 70 + \"$\"],\r\n            silent: true,\r\n            label: {\r\n                normal: {\r\n                    show: false,\r\n                    position: \"center\"\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            z: 3,\r\n            zlevel: 0,\r\n            itemStyle: {\r\n                borderWidth: 0,\r\n            },\r\n            data: [{\r\n                    value: bl,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"rgba(0,0,0,0)\",\r\n                            border: 0\r\n                        }\r\n                    }\r\n                },\r\n                {\r\n                    value: 100 - bl,\r\n                    name: \"\",\r\n                    label: {\r\n                        normal: {\r\n                            show: false,\r\n                        }\r\n                    },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            color: \"#fb4b4b\", //#ff8377\r\n                        }\r\n                    }\r\n                },\r\n            ]\r\n        },\r\n        {\r\n            // 给小球定位 不能删除\r\n            name: 'line',\r\n            type: 'line',\r\n            coordinateSystem: 'polar',\r\n            showSymbol: false,\r\n            lineStyle: {\r\n                normal: {\r\n                    width: 15,\r\n                    opacity: 0,\r\n                    color: {\r\n                        type: 'linear',\r\n                        x: 0,\r\n                        y: 0,\r\n                        x2: 1,\r\n                        y2: 0,\r\n                        colorStops: [{\r\n                            offset: 0,\r\n                            color: 'lightskyblue' // 0% 处的颜色\r\n                        }, {\r\n                            offset: 0.5,\r\n                            color: 'yellow' // 100% 处的颜色\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'orangered' // 100% 处的颜色\r\n                        }],\r\n                        globalCoord: false // 缺省为 false\r\n                    }\r\n                }\r\n            },\r\n            data: data\r\n        },\r\n        {\r\n            name: 'point',\r\n            type: \"effectScatter\",\r\n            coordinateSystem: \"polar\",\r\n            zlevel: 0,\r\n            z: 14,\r\n            rippleEffect: {\r\n                //涟漪特效\r\n                period: 4, //动画时间，值越小速度越快\r\n                brushType: \"stroke\", //波纹绘制方式 stroke, fill\r\n                scale: 4 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: \"right\", //显示位置\r\n                    offset: [5, 0], //偏移设置\r\n                    formatter: \"{b}\", //圆环显示文字,\r\n                    color: \"red\"\r\n                },\r\n                emphasis: {\r\n                    show: true\r\n                }\r\n            },\r\n            symbol: \"circle\",\r\n            symbolSize: 11,\r\n            itemStyle: {\r\n                normal: {\r\n                    show: true,\r\n                    color: border_color //408def  b0cdf2\r\n                }\r\n            },\r\n\r\n            data: [\r\n                [9.9, cl]\r\n            ]\r\n        },\r\n    ]\r\n};\r\n\r\n\r\nsetInterval(function() {\r\n    if (cl >= 180) {\r\n        cl = 0\r\n    }\r\n    cl = cl + 0.2\r\n\r\n    sdoption[\"series\"][sdoption[\"series\"].length - 1].data[0][1] = cl\r\n\r\n    sdChart.setOption(sdoption);\r\n\r\n}, 50)","html":"","externalScripts":"","updaterUID":"bd-365218436","theme":"","layout":"","viewCount":353,"userName":"G***G","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xXDIbWQ47.png?v=1577950361416","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-effectScatter","series-gauge","series-line","series-pie","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"G***G"}}