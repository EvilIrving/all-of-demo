{"status":0,"data":{"cid":"xVEs5tUwsU","authorUid":"obd-otBkh-twA9VLc7yc6UjsLy4Jpf5gd88","authorUserName":"U***1","title":"聚合分析","description":"","latestVersion":11,"alwaysLatest":0,"createTime":"2021-09-20T03:31:26.000Z","lastUpdateTime":"2021-09-25T07:55:41.000Z","auth":2,"uid":"obd-otBkh-twA9VLc7yc6UjsLy4Jpf5gd88","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":11,"parentVersion":10,"echartsVersion":"5.2.0","versionCreateTime":"2021-09-25T07:55:41.000Z","code":"// See https://github.com/ecomfe/echarts-stat\necharts.registerTransform(ecStat.transform.clustering);\n\n/*-------------------------数据配置-----------------------*/\n/**\n{\n    \"measures\": [\n        {\n            \"aliasName\": \"F16\",\n            \"comments\": \"销售额\",\n            \"valueType\": \"Left\",   //X轴\n            \"aggregationType\": \"Sum\"\n        },\n        {\n            \"aliasName\": \"F17\",\n            \"comments\": \"数量\",\n            \"valueType\": \"Right\",   //Y轴\n            \"aggregationType\": \"Sum\"\n        }\n    ],\n    \"dimensions\": [\n        {\n            \"aliasName\": \"F9\",     //维度\n            \"comments\": \"省/自治区\",\n        }\n    ]\n}\n*/\n\n/*-------------------------数据-----------------------*/\n/**\n{\n//维度\n\"F9\":[\n        \"上海\",\"云南\",\"内蒙古\",\"北京\",\"吉林\",\"四川\",\"天津\",\"宁夏\",\n        \"安徽\",\"山东\",\"山西\",\"广东\",\"广西\",\"新疆\",\"江苏\",\"江西\",\n        \"河北\",\"河南\",\"浙江\",\"海南\",\"湖北\",\"湖南\",\"甘肃\",\"福建\",\n        \"西藏\",\"贵州\",\"辽宁\",\"重庆\",\"陕西\",\"青海\",\"黑龙江\"\n     ],\n//X轴\n\"F16\":[\n        582450.57,422328.2,273453.01,409147.2,666791.64,400877.6,\n        549906.63,58121,628965.19,1586782.99,423878.77,1458879.88,\n        377653.83,70607.74,653052.96,237328.7,790915.41,853574.8,\n        456981.06,107854.41,627201.85,723442.21,179270.03,546903.53,\n        10015.18,108141.6,835974.66,361761.93,457688.17,49863.38,\n        1208457.08\n     ],\n//Y轴\n\"F17\":[     \n        1080,815,833,956,1362,1438,1096,126,1302,3399,750,3102,797,\n        139,2252,506,1511,1763,1583,250,2153,1658,538,962,34,276,2583,\n        836,909,81,2587\n      ]\n}\n*/\n\n//维度\nvar names = [\n    '上海',\n    '云南',\n    '内蒙古',\n    '北京',\n    '吉林',\n    '四川',\n    '天津',\n    '宁夏',\n    '安徽',\n    '山东',\n    '山西',\n    '广东',\n    '广西',\n    '新疆',\n    '江苏',\n    '江西',\n    '河北',\n    '河南',\n    '浙江',\n    '海南',\n    '湖北',\n    '湖南',\n    '甘肃',\n    '福建',\n    '西藏',\n    '贵州',\n    '辽宁',\n    '重庆',\n    '陕西',\n    '青海',\n    '黑龙江',\n];\nvar data = [\n    //X轴 ,  //Y轴\n    [582450.57, 1080],\n    [422328.2, 815],\n    [273453.01, 833],\n    [409147.2, 956],\n    [666791.64, 1362],\n    [400877.6, 1438],\n    [549906.63, 1096],\n    [58121, 126],\n    [628965.19, 1302],\n    [1586782.99, 3399],\n    [423878.77, 750],\n    [1458879.88, 3102],\n    [377653.83, 797],\n    [70607.74, 139],\n    [653052.96, 2252],\n    [237328.7, 506],\n    [790915.41, 1511],\n    [853574.8, 1763],\n    [456981.06, 1583],\n    [107854.41, 250],\n    [627201.85, 2153],\n    [723442.21, 1658],\n    [179270.03, 538],\n    [546903.53, 962],\n    [10015.18, 34],\n    [108141.6, 276],\n    [835974.66, 2583],\n    [361761.93, 836],\n    [457688.17, 909],\n    [49863.38, 81],\n    [1208457.08, 2587],\n];\nvar CLUSTER_COUNT = 3; //个数\nvar DIENSIION_CLUSTER_INDEX = 2; //簇的索引\n\n\n\n\n\n/*--------------------以下配置，不需要关注------------------*/\n\nvar COLOR_ALL = ['#37A2DA', '#e06343', '#37a354', '#b55dba', '#b5bd48', '#8378EA', '#96BFFF'];\nvar pieces = [];\nfor (var i = 0; i < CLUSTER_COUNT; i++) {\n    pieces.push({\n        value: i,\n        label: 'cluster ' + i,\n        color: COLOR_ALL[i],\n    });\n}\n\noption = {\n    dataset: [\n        {\n            dimensions: ['销售额', '数量'],\n            source: data,\n        },\n        {\n            transform: {\n                type: 'ecStat:clustering',\n                //print: true,\n                config: {\n                    clusterCount: CLUSTER_COUNT,\n                    outputType: 'single',\n                    outputClusterIndexDimension: DIENSIION_CLUSTER_INDEX,\n                },\n            },\n        },\n    ],\n    tooltip: {\n        position: 'top',\n        formatter: function (params) {\n            var item = params;\n            var dimensionNames = item.dimensionNames;\n            var value = item.value;\n            var name = names[item.dataIndex];\n            return (\n                '省/自治区' +\n                ' : ' +\n                name +\n                '<br/>' +\n                dimensionNames[0] +\n                ' : ' +\n                value[0] +\n                '<br/>' +\n                dimensionNames[1] +\n                ' : ' +\n                value[1]\n            );\n        },\n    },\n    visualMap: {\n        type: 'piecewise',\n        top: 'middle',\n        min: 0,\n        max: CLUSTER_COUNT,\n        left: 10,\n        splitNumber: CLUSTER_COUNT,\n        dimension: DIENSIION_CLUSTER_INDEX,\n        pieces: pieces,\n    },\n    grid: {\n        left: 120,\n    },\n    xAxis: {\n        name: 'X:销售额',\n        splitLine: {\n            lineStyle: {\n                type: 'dashed',\n            },\n        },\n    },\n    yAxis: {\n        name: 'Y:数量',\n        splitLine: {\n            lineStyle: {\n                type: 'dashed',\n            },\n        },\n    },\n    series: {\n        type: 'scatter',\n        encode: { tooltip: [0, 1] },\n        symbolSize: 15,\n        itemStyle: {\n            borderColor: '#555',\n        },\n        datasetIndex: 1,\n        label: {\n            show: true,\n            fontSize: 12,\n            position: 'bottom',\n            formatter: function (params) {\n                var item = params;\n                var name = names[item.dataIndex];\n                return name;\n            },\n        },\n    },\n};\n","html":"","externalScripts":"https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js","updaterUID":"obd-otBkh-twA9VLc7yc6UjsLy4Jpf5gd88","theme":"","layout":"","viewCount":0,"userName":"U***1","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xVEs5tUwsU.png?v=1632556541461","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","series-scatter","tooltip","visualMap"],"customTags":[],"updaterUserName":"U***1"}}