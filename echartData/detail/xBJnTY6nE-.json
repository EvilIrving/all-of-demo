{"status":0,"data":{"cid":"xBJnTY6nE-","authorUid":"bd-2215764494","authorUserName":"p***g","title":"Mapbox 视角切换","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2017-07-07T08:43:48.000Z","lastUpdateTime":"2017-07-07T08:43:48.000Z","auth":2,"uid":"bd-2215764494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"3.6.2","versionCreateTime":"2017-08-14T08:56:08.000Z","code":"mapboxgl.accessToken = mapboxglToken;\n\n\n$.getJSON('/asset/get/s/data-1491887968120-rJODPy9ae.json', function (data) {\n\n    data = data.filter(function (dataItem) {\n        return dataItem[2] > 0;\n    }).map(function (dataItem) {\n        return [dataItem[0], dataItem[1], dataItem[2]];\n    });\n    \n    myChart.setOption({\n        title: {\n            text: '空格键切换视角',\n            left: 'center'\n        },\n        visualMap: {\n            show: false,\n            max: 1000,\n            calculable: true,\n            realtime: false,\n            inRange: {\n                color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n            },\n            outOfRange: {\n                colorAlpha: 0\n            }\n        },\n        mapbox: {\n            center: [104.114129, 37.550339],\n            zoom: 3,\n            pitch: 50,\n            bearing: -10,\n            style: 'mapbox://styles/mapbox/light-v9',\n            boxHeight: 20,\n            // altitudeScale: 3e2,\n            postEffect: {\n                enable: true,\n                SSAO: {\n                    enable: true,\n                    radius: 2\n                }\n            },\n            light: {\n                main: {\n                    intensity: 2,\n                    shadow: true,\n                    shadowQuality: 'high'\n                },\n                ambient: {\n                    intensity: 0.\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491896094618-H1DmP-5px.hdr',\n                    exposure: 2,\n                    diffuseIntensity: 0.5\n                }\n            }\n        },\n        series: [{\n            type: 'bar3D',\n            coordinateSystem: 'mapbox',\n            shading: 'lambert',\n            minHeight: 0.1,\n            barSize: 0.3,\n            data: data,\n            silent: true\n        }]\n    });\n    \n    function top() {\n        myChart.setOption({\n            mapbox: {\n                pitch: 0,\n                bearing: 0,\n                boxHeight: 0\n            }\n        });\n    }\n    \n    function perspective() {\n        myChart.setOption({\n            mapbox: {\n                pitch: 50,\n                bearing: -10,\n                boxHeight: 20,\n            }\n        });\n    }\n    \n    var isPerspective = true;\n    window.addEventListener('keydown', function (e) {\n        if (e.keyCode === 32) {\n            isPerspective ? top() : perspective();\n            isPerspective = !isPerspective;\n        }\n    })\n});","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js,http://echarts.baidu.com/resource/echarts-gl-latest/mapboxgl-token.js","updaterUID":"bd-2215764494","theme":"","layout":"","viewCount":5072,"userName":"p***g","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBJnTY6nE-.png?v=1499417030553","isCustomThumbnail":1,"builtinTags":["category-work","mapbox","series-bar3D","title","visualMap"],"customTags":["echarts-gl"],"updaterUserName":"p***g"}}