{"status":0,"data":{"cid":"x7qzHZ-a29","authorUid":"obd-ojazCfL_sSLdvfEqAYLBaeVDVsjenE4","authorUserName":"点***滴","title":"仪表盘","description":"仪表盘","latestVersion":4,"alwaysLatest":1,"createTime":"2020-08-21T02:32:58.000Z","lastUpdateTime":"2020-08-21T02:32:58.000Z","auth":1,"uid":"obd-ojazCfL_sSLdvfEqAYLBaeVDVsjenE4","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.9.0","versionCreateTime":"2021-05-27T07:34:20.000Z","code":"// 最大值和当前值根据后台返回\r\nlet max =100;\r\nlet currentNum = 50;\r\n\r\n\r\nlet linearEndColor = '#FFCC59';\r\nlet linearStartColor = '#1AF6EE';\r\n\r\nvar db_options = { //用于改变dashboard_option里的参数\r\n    data: [{\r\n        value: currentNum,\r\n        name: ''\r\n    }],\r\n    color: [],\r\n    title: {\r\n        show: false,\r\n        offsetCenter: [0, 0],\r\n        backgroundColor: '#fff',\r\n        borderRadius: 5,\r\n        padding: 5\r\n    }\r\n};\r\n\r\nvar dashboard_option = { //echarts的设置\r\n    grid: {\r\n        left: 0,\r\n        right: 0\r\n    },\r\n    title: {\r\n        show: false  \r\n    },\r\n    polar: {\r\n        // 圆弧大小\r\n        radius: '115%',\r\n        center: [\"55%\", \"52%\"]\r\n    },\r\n    angleAxis: {\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        min: 0,\r\n        max: 2 * max,\r\n        boundaryGap: ['0', '100'],\r\n        startAngle: 180\r\n    },\r\n    radiusAxis: {\r\n        type: 'category',\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: false\r\n        },\r\n        data: ['a', 'b', 'c'],\r\n        z: 10\r\n    },\r\n    series: [{\r\n            type: 'bar',\r\n            data: [, , 100],\r\n            coordinateSystem: 'polar',\r\n            barMaxWidth: 50,\r\n            z: 2,\r\n            roundCap: 1,\r\n            color: {\r\n                type: 'linear',\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                colorStops: [{\r\n                    offset: 0,\r\n                    color: linearEndColor // 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: linearStartColor // 100% 处的颜色\r\n                }],\r\n            },\r\n            barGap: '-100%',\r\n        }, {\r\n            type: 'bar',\r\n            data: [, , 100],\r\n            z: 0,\r\n            silent: true,\r\n            coordinateSystem: 'polar',\r\n            barMaxWidth: 50,\r\n            name: 'C',\r\n            roundCap: 1,\r\n            color: '#D2D2D2',\r\n            barGap: '-100%',\r\n        },\r\n        {\r\n            name: \"内部进度条\",\r\n            type: \"gauge\",\r\n            center: ['55%', '53%'],\r\n            radius: '78%',\r\n            startAngle: 182,\r\n            endAngle: -2,\r\n            splitNumber: 10,\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [currentNum / max, {\r\n                            type: 'linear',\r\n                            x: 0,\r\n                            y: 0,\r\n                            x2: 0,\r\n                            y2: 1,\r\n                            colorStops: [{\r\n                                offset: 0,\r\n                                color: linearEndColor // 0% 处的颜色\r\n                            }, {\r\n                                offset: 1,\r\n                                color: linearStartColor // 100% 处的颜色\r\n                            }],\r\n                        }],\r\n                        [1, \"#D2D2D2\"]\r\n                    ],\r\n                    width: 1\r\n                }\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            },\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            itemStyle: {\r\n                show: false,\r\n                opacity: 0\r\n            },\r\n            detail: {\r\n                formatter: function (value) {\r\n                    if (value !== 0) {\r\n                        var num = Math.round(value);\r\n                        return parseInt(num).toFixed(0) + \"%\";\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                },\r\n                offsetCenter: [0, 82],\r\n                textStyle: {\r\n                    padding: [0, 0, 0, 0],\r\n                    fontSize: 18,\r\n                    fontWeight: '700',\r\n                    color: 'red'\r\n                }\r\n            },\r\n            title: { //标题\r\n                show: false,\r\n            },\r\n            data: [{\r\n                name: '',\r\n                value: currentNum,\r\n            }],\r\n            pointer: {\r\n                show: true,\r\n                length: '75%',\r\n                radius: '20%',\r\n                width: 10, //指针粗细\r\n            },\r\n            animationDuration: 4000,\r\n        },\r\n        {\r\n            \"type\": \"pie\",\r\n            radius: ['82%', '82%'],\r\n            \"hoverAnimation\": false,\r\n            startAngle: 225,\r\n            endAngle: 0,\r\n            \"data\": [{\r\n                \"name\": \"\",\r\n                \"value\": currentNum / 5,\r\n                \"label\": {\r\n                    show: false\r\n                },\r\n                \"labelLine\": {\r\n                    show: false\r\n                },\r\n                itemStyle: {\r\n                    color: 'rgba(0,0,0,0)'\r\n                }\r\n            }, {\r\n                //画中间的小圆点图标\r\n                \"name\": \"\",\r\n                \"value\": 0,\r\n                \"label\": {\r\n                    position: 'inside',\r\n                    backgroundColor: '#f7b365',\r\n                    borderRadius: 15,\r\n                    padding: 8,\r\n                    borderWidth: 8,\r\n                    borderColor: \"#f7b365\"\r\n\r\n                }\r\n            }, {\r\n                \"name\": \"\",\r\n                value: 1.33 - currentNum / 5,\r\n                \"label\": {\r\n                    show: false\r\n                },\r\n                \"labelLine\": {\r\n                    show: false\r\n                },\r\n                itemStyle: {\r\n                    color: 'rgba(255,255,255,0)'\r\n                }\r\n            }]\r\n        }\r\n    ]\r\n};\r\n\r\nfunction init_dashboard(value) { //此函数根据value的范围大小，为仪表盘参数设置不同的颜色、数字\r\n    db_options.data[0].value = value;\r\n    db_options.color.splice(0, db_options.color.length);\r\n    db_options.color.push([value / max, '#00BAFF']);\r\n\r\n    db_options.color.push([1, 'rgba(49,58,92,0)']);\r\n}\r\n\r\nfunction db_init(value) { //改变option的入口，需要传入一个值\r\n    var option_dashboard = [];\r\n    init_dashboard(value);\r\n    option_dashboard = dashboard_option;\r\n    return option_dashboard;\r\n}\r\noption = db_init(currentNum || 0);","html":"","externalScripts":"","updaterUID":"obd-oMizjY1mU-CbpswVFgpQbzisxb-UV2k","theme":"","layout":"","viewCount":1456,"userName":"点***滴","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x7qzHZ-a29.png?v=1622100860521","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-gauge","title"],"customTags":[],"updaterUserName":"鱼***丶"}}