{"status":0,"data":{"cid":"xUmZboKdhv","authorUid":"bd-1277561159","authorUserName":"执***开","title":"XX产品需求分析","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-12-08T13:24:12.000Z","lastUpdateTime":"2021-12-14T07:15:57.000Z","auth":2,"uid":"bd-1277561159","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-14T07:15:57.000Z","code":"const result = [\n  {\n    sop_id: 28,\n    period_code: '2022年01月第01期',\n    sop_line_type: 'SUPPLY',\n    sop_line_type_name: '供应能力(ATP)',\n    qty_horizon1: 80,\n    qty_horizon2: 120,\n    qty_horizon3: 160,\n    qty_horizon4: 200,\n    qty_horizon5: 240,\n  },\n  {\n    sop_id: 28,\n    period_code: '2022年01月第01期',\n    sop_line_type: 'SOP_NOW',\n    sop_line_type_name: '本期S&OP计划',\n    qty_horizon1: 1538,\n    qty_horizon2: 1440,\n    qty_horizon3: 1532,\n    qty_horizon4: 1624,\n    qty_horizon5: 1716,\n  },\n  {\n    sop_id: 28,\n    period_code: '2022年01月第01期',\n    sop_line_type: 'DEMAND_NOW',\n    sop_line_type_name: '本期需求计划',\n    qty_horizon1: 1348,\n    qty_horizon2: 1440,\n    qty_horizon3: 1532,\n    qty_horizon4: 1624,\n    qty_horizon5: 1716,\n  },\n]\n\nconst series = []\nconst xAxis = []\nconst legendData = []\nconst prefixKey = 'qty_horizon'\n\nresult.forEach((item, index) => {\n  const keys = Object.keys(item)\n  const data = []\n  legendData.push(item.sop_line_type_name)\n  keys.forEach((key) => {\n    if (key.startsWith(prefixKey)) {\n      data.push(item[key])\n      if (index === 0) {\n        xAxis.push(`${key.replace(prefixKey, '')}月`)\n      }\n    }\n  })\n  series.push({\n    name: item.sop_line_type_name,\n    type: 'bar',\n    data,\n  })\n})\n\nconsole.log(series, xAxis, legendData)\n\noption = {\n    title: {\n        text: 'XX产品需求分析',\n    },\n    legend: {\n        data: legendData,\n    },\n    xAxis: {\n        data: xAxis,\n    },\n    yAxis: {},\n    series,\n};\n","html":"","externalScripts":"","updaterUID":"bd-1277561159","theme":"","layout":"","viewCount":0,"userName":"执***开","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUmZboKdhv.png?v=1639466157903","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","title"],"customTags":[],"updaterUserName":"执***开"}}