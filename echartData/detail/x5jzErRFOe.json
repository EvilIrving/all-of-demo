{"status":0,"data":{"cid":"x5jzErRFOe","authorUid":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","authorUserName":"逆***h","title":"人民币配款量统计","description":"","latestVersion":7,"alwaysLatest":1,"createTime":"2020-05-11T12:09:59.000Z","lastUpdateTime":"2020-05-11T12:09:59.000Z","auth":2,"uid":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-15T09:07:52.000Z","code":"var oldData =[\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-01\",\r\n      \"COFFERS_NO\": \"第一金库\",\r\n      \"sumAmt\": 243.35\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-02\",\r\n      \"COFFERS_NO\": \"第一金库\",\r\n      \"sumAmt\": 40\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-03\",\r\n      \"COFFERS_NO\": \"第一金库\",\r\n      \"sumAmt\": 300\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-01\",\r\n      \"COFFERS_NO\": \"第二金库\",\r\n      \"sumAmt\": 100\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-02\",\r\n      \"COFFERS_NO\": \"第二金库\",\r\n      \"sumAmt\": 341.4514\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-03\",\r\n      \"COFFERS_NO\": \"第二金库\",\r\n      \"sumAmt\": 45.78\r\n    },    \r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-01\",\r\n      \"COFFERS_NO\": \"第三金库\",\r\n      \"sumAmt\": 89.6\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-02\",\r\n      \"COFFERS_NO\": \"第三金库\",\r\n      \"sumAmt\": 25.645\r\n    },\r\n    {\r\n      \"ALLOCATION_DATE\": \"2020-05-03\",\r\n      \"COFFERS_NO\": \"第三金库\",\r\n      \"sumAmt\": 7.685\r\n    },\r\n  ];\r\n\r\n\r\nvar dataset={\r\n    source: [['product']]\r\n};\r\n\r\nlet coffersArr=[],dateArr=[];\r\noldData.forEach((item)=>{  \r\n    if(dateArr.indexOf(item.ALLOCATION_DATE)<0){\r\n        dateArr.push(item.ALLOCATION_DATE);\r\n    }  \r\n    if(coffersArr.indexOf(item.COFFERS_NO)<0){\r\n        coffersArr.push(item.COFFERS_NO);\r\n    }      \r\n});\r\n\r\nfor(var i = 0; i < dateArr.length+1; i++){\r\n  if(i === 0){\r\n    for(var j = 0; j < coffersArr.length; j++){\r\n    dataset.source[i][j+1] = coffersArr[j];\r\n    }\r\n  }else{\r\n   dataset.source[i] = [];\r\n   dataset.source[i][0] = dateArr[i-1]\r\n  }\r\n}\r\n\r\nfor(var i = 1; i < dataset.source.length; i++){\r\n  for(var j = 1; j < dataset.source[0].length; j++){\r\n    for(var k = 0; k < oldData.length; k++){\r\n     //console.log(i+'-'+j+'-'+k);\r\n     if(dataset.source[i][0] == oldData[k].ALLOCATION_DATE &&\r\n          dataset.source[0][j] == oldData[k].COFFERS_NO){\r\n         dataset.source[i][j] = oldData[k].sumAmt;\r\n        }\r\n   }\r\n  }\r\n}\r\nconsole.log(dataset);\r\n/*\r\nvar dataset={\r\n    source: [\r\n        ['product', '第一金库', '第二金库', '第三金库'],\r\n        ['2020-05-01', 41.1, 30.4, 65.1],\r\n        ['2020-05-02', 86.5, 92.1, 85.7],\r\n        ['2020-05-03', 24.1, 67.2, 79.5]\r\n    ]\r\n};\r\nconsole.log(dataset);\r\n*/\r\n\r\nvar fontColor = '#30eee9';\r\n\r\noption = {\r\n    title: {\r\n        text: '人民币配款量统计',\r\n        top: '5%',\r\n        left: 'center',\r\n        textStyle: {\r\n            color: '#FFF',\r\n            align: 'center',\r\n        }\r\n    },\r\n    dataset: dataset,\r\n    backgroundColor: '#11183c',\r\n    grid: {\r\n        left: '9%',\r\n        right: '10%',\r\n        top: '20%',\r\n        bottom: '15%',\r\n        containLabel: true\r\n    },\r\n    tooltip: {\r\n        show: true,\r\n        trigger: 'item'\r\n    },\r\n    legend: {\r\n        show: true,\r\n        x: 'center',\r\n        top: '12%',\r\n        y: '35',\r\n        icon: 'stack',\r\n        itemWidth: 10,\r\n        itemHeight: 10,\r\n        textStyle: {\r\n            color: '#1bb4f6'\r\n        }\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        axisLabel: {\r\n            color: fontColor\r\n        },\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#397cbc'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#195384'\r\n            }\r\n        }\r\n\r\n    }],\r\n    yAxis: [{\r\n        type: 'value',\r\n        name: '配款量（万元）',\r\n        axisLabel: {\r\n            formatter: '{value}',\r\n            textStyle: {\r\n                color: '#2ad1d2'\r\n            }\r\n        },\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: '#27b4c2'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#11366e'\r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n            name:'第一金库',\r\n            type: 'line',\r\n            stack: '总量',\r\n            symbol: 'circle',\r\n            symbolSize: 8,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#0092f6',\r\n                    lineStyle: {\r\n                        color: \"#0092f6\",\r\n                        width: 1\r\n                    },\r\n                    areaStyle: {\r\n                        //color: '#94C9EC'\r\n                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                            offset: 0,\r\n                            color: 'rgba(7,44,90,0.3)'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'rgba(0,146,246,0.9)'\r\n                        }]),\r\n                    }\r\n                }\r\n            },\r\n            markPoint: {\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'red'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            name:'第二金库',\r\n            type: 'line',\r\n            stack: '总量',\r\n            symbol: 'circle',\r\n            symbolSize: 8,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#00d4c7',\r\n                    lineStyle: {\r\n                        color: \"#00d4c7\",\r\n                        width: 1\r\n                    },\r\n                    areaStyle: {\r\n                        //color: '#94C9EC'\r\n                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                            offset: 0,\r\n                            color: 'rgba(7,44,90,0.3)'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'rgba(0,212,199,0.9)'\r\n                        }]),\r\n                    }\r\n                }\r\n            },\r\n             markPoint: {\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'red'\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            name:'第三金库',\r\n            type: 'line',\r\n            stack: '总量',\r\n            symbol: 'circle',\r\n            symbolSize: 8,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#aecb56',\r\n                    lineStyle: {\r\n                        color: \"#aecb56\",\r\n                        width: 1\r\n                    },\r\n                    areaStyle: {\r\n                        //color: '#94C9EC'\r\n                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n                            offset: 0,\r\n                            color: 'rgba(7,44,90,0.3)'\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'rgba(114,144,89,0.9)'\r\n                        }]),\r\n                    }\r\n                }\r\n            },\r\n             markPoint: {\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'red'\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oNSDCqu42JEySyKzZOfcy6UjgFt5dCi","theme":"","layout":"","viewCount":67,"userName":"逆***h","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5jzErRFOe.png?v=1589533672444","isCustomThumbnail":0,"builtinTags":["category-work","dataset","grid","legend","markPoint","series-line","title","tooltip"],"customTags":[],"updaterUserName":"逆***h"}}