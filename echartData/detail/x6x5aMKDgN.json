{"status":0,"data":{"cid":"x6x5aMKDgN","authorUid":"obd-o2tTFxTbU03Zv9r1ID53336yheSPF6d","authorUserName":"187*****097","title":"安徽省各市房屋均价历年变化","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-31T07:32:18.000Z","lastUpdateTime":"2021-10-31T07:32:18.000Z","auth":2,"uid":"obd-o2tTFxTbU03Zv9r1ID53336yheSPF6d","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-31T07:32:18.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1482909768458-HJlU_yWBe.json\";\r\n\r\n\r\nvar t = 1; //流入流出控制\r\nvar r = 1; //右侧流入流出文字控制\r\n\r\n\r\nvar geoCoordMap = {\r\n    '合肥市': [117.25, 31.83],\r\n    '滁州市': [118.32, 32.3],\r\n    '芜湖市': [118.43, 31.35],\r\n    '阜阳市': [115.38, 32.89],\r\n    '蚌埠市': [117.39, 32.92],\r\n    '淮南市': [116.99, 32.63],\r\n    '马鞍山市': [118.5, 31.71],\r\n    '安庆市': [117.05, 30.52],\r\n    '黄山市': [118.33, 29.71],\r\n    '铜陵市': [117.81, 30.94],\r\n    '宿州市': [116.98, 33.64],\r\n    '淮北市': [116.8, 33.9],\r\n    '六安市': [116.51, 31.75],\r\n    '池州市': [117.49, 30.66],\r\n    '宣城市': [118.76, 30.94],\r\n    '亳州市': [115.78, 33.84],\r\n};\r\n\r\nvar d1 = {\r\n    '合肥市': 8461,\r\n    '芜湖市': 5896,\r\n    '滁州市': 4708,\r\n    '阜阳市': 6309,\r\n    '安庆市': 5484,\r\n    '马鞍山市':4985,\r\n    '蚌埠市': 5307,\r\n    '宿州市': 5166,\r\n    '亳州市': 4577,\r\n    '六安市': 5150,\r\n    '宣城市': 4458,\r\n    '淮南市': 4283,\r\n    '淮北市': 5073,\r\n    '铜陵市': 5381,\r\n    '池州市': 5609,\r\n    '黄山市': 5627,\r\n\r\n};\r\n\r\nvar d2 = {\r\n\r\n    '合肥市': 14983,\r\n    '芜湖市': 6613,\r\n    '滁州市': 941,\r\n    '阜阳市': 6650,\r\n    '安庆市': 5391,\r\n    '马鞍山市':4872,\r\n    '蚌埠市': 5153,\r\n    '宿州市': 5056,\r\n    '亳州市': 4575,\r\n    '六安市': 5788,\r\n    '宣城市': 4912,\r\n    '淮南市': 4289,\r\n    '淮北市': 5416,\r\n    '铜陵市': 219,\r\n    '池州市': 5615,\r\n    '黄山市': 5652,\r\n   \r\n};\r\n\r\nvar d3 = {\r\n\r\n    '合肥市': 14362,\r\n    '芜湖市': 9175,\r\n    '滁州市': 6508,\r\n    '阜阳市': 9012,\r\n    '安庆市': 6979,\r\n    '马鞍山市':5939,\r\n    '蚌埠市': 6466,\r\n    '宿州市': 5629,\r\n    '亳州市': 5507,\r\n    '六安市': 7870,\r\n    '宣城市': 8156,\r\n    '淮南市': 5407,\r\n    '淮北市': 5942,\r\n    '铜陵市': 7305,\r\n    '池州市': 7552,\r\n    '黄山市': 7890,\r\n};\r\nvar d4 = {\r\n    '合肥市': 14217,\r\n    '芜湖市': 10316,\r\n    '滁州市': 6490,\r\n    '阜阳市': 8746,\r\n    '安庆市': 8673,\r\n    '马鞍山市':6514,\r\n    '蚌埠市': 6858,\r\n    '宿州市': 6283,\r\n    '亳州市': 6108,\r\n    '六安市': 7746,\r\n    '宣城市': 8321,\r\n    '淮南市': 5738,\r\n    '淮北市': 6290,\r\n    '铜陵市': 8550,\r\n    '池州市': 8400,\r\n    '黄山市': 9061,\r\n};\r\n\r\nvar d5 = {\r\n\r\n    '合肥市': 14226,\r\n    '芜湖市': 9671,\r\n    '滁州市': 7170,\r\n    '阜阳市': 8002,\r\n    '安庆市': 8521,\r\n    '马鞍山市':7173,\r\n    '蚌埠市': 7113,\r\n    '宿州市': 6526,\r\n    '亳州市': 6308,\r\n    '六安市': 7610,\r\n    '宣城市': 8200,\r\n    '淮南市': 6008,\r\n    '淮北市': 6831,\r\n    '铜陵市': 5780,\r\n    '池州市': 8838,\r\n    '黄山市': 8571\r\n};\r\n\r\nvar d6 = {\r\n    '合肥市': 14594,\r\n    '芜湖市': 9506,\r\n    '滁州市': 6945,\r\n    '阜阳市': 7459,\r\n    '安庆市': 8523,\r\n    '马鞍山市':7667,\r\n    '蚌埠市': 7294,\r\n    '宿州市': 6642,\r\n    '亳州市': 6271,\r\n    '六安市': 7373,\r\n    '宣城市': 8179,\r\n    '淮南市': 6205,\r\n    '淮北市': 7322,\r\n    '铜陵市': 7775,\r\n    '池州市': 9012,\r\n    '黄山市': 8617,\r\n};\r\nvar d7 = {\r\n    '合肥市': 15907,\r\n    '芜湖市': 9988,\r\n    '滁州市': 7165,\r\n    '阜阳市': 7273,\r\n    '安庆市': 8188,\r\n    '马鞍山市':9195,\r\n    '蚌埠市': 7446,\r\n    '宿州市': 6651,\r\n    '亳州市': 6370,\r\n    '六安市': 7231,\r\n    '宣城市': 8206,\r\n    '淮南市': 6148,\r\n    '淮北市': 7624,\r\n    '铜陵市': 7852,\r\n    '池州市': 9010,\r\n    '黄山市': 8690,\r\n};\r\nvar colors = [\"#1DE9B6\", \"#EEDD78\", \"#FFFF00\", \"#FFDB5C\", \"#37A2DA\", \"#04B9FF\"];\r\nvar colorIndex = 0;\r\n$(function() {\r\n\r\n    var year = [ \"2015\", \"2016\", \"2017\", \"2018\", \"2019\",\"2020\",\"2021\"];\r\n    var mapData = [\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n        [],\r\n       \r\n    ];\r\n\r\n    /*柱子Y名称*/\r\n    var categoryData = [];\r\n    var barData = [];\r\n\r\n    for (var key in geoCoordMap) {\r\n        mapData[0].push({\r\n            \"year\": '2015',\r\n            \"name\": key,\r\n            \"value\": d1[key] / 10,\r\n            \"value1\": d1[key] / 10,\r\n        });\r\n        mapData[1].push({\r\n            \"year\": '2016',\r\n            \"name\": key,\r\n            \"value\": d2[key] / 10,\r\n            \"value1\": d2[key] / 10,\r\n        });\r\n        mapData[2].push({\r\n            \"year\": '2017',\r\n            \"name\": key,\r\n            \"value\": d3[key] / 10,\r\n            \"value1\": d3[key] / 10,\r\n        });\r\n        mapData[3].push({\r\n            \"year\": '2018',\r\n            \"name\": key,\r\n            \"value\": d4[key] / 10,\r\n            \"value1\": d4[key] / 10,\r\n        });\r\n        mapData[4].push({\r\n            \"year\": '2019',\r\n            \"name\": key,\r\n            \"value\": d5[key] / 10,\r\n            \"value1\": d5[key] / 10,\r\n        });\r\n        mapData[5].push({\r\n            \"year\": '2020',\r\n            \"name\": key,\r\n            \"value\": d6[key] / 10,\r\n            \"value1\": d6[key] / 10,\r\n        });\r\n     mapData[6].push({\r\n            \"year\": '2021',\r\n            \"name\": key,\r\n            \"value\": d6[key] / 10,\r\n            \"value1\": d6[key] / 10,\r\n        });\r\n    }\r\n\r\n    for (var i = 0; i < mapData.length; i++) {\r\n        mapData[i].sort(function sortNumber(a, b) {\r\n            return a.value - b.value\r\n        });\r\n        barData.push([]);\r\n        categoryData.push([]);\r\n        for (var j = 0; j < mapData[i].length; j++) {\r\n            barData[i].push(mapData[i][j].value1 * 10);\r\n            categoryData[i].push(mapData[i][j].name);\r\n        }\r\n    }\r\n    \r\n\r\n    \r\n    $.getJSON(uploadedDataURL, function(geoJson) {\r\n      \r\n  // echarts.registerMap(nameMap, gdMap);\r\n     echarts.registerMap('anhui', geoJson);\r\n        var convertData = function(data) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i].name];\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i].name,\r\n                        value: geoCoord.concat(data[i].value)\r\n                    });\r\n                }\r\n            }\r\n            return res;\r\n        };\r\n\r\n        var convertToLineData = function(data, gps) {\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var dataItem = data[i];\r\n                var toCoord = geoCoordMap[dataItem.name];\r\n                var fromCoord = gps; //郑州\r\n                //  var toCoord = geoGps[Math.random()*3]; \r\n                if (fromCoord && toCoord) {\r\n                    if (t == 1) {\r\n                        res.push([{\r\n                            coord: toCoord,\r\n                        }, {\r\n                            coord: fromCoord,\r\n                            value: dataItem.value\r\n                        }]);\r\n                    } else {\r\n                        res.push([{\r\n                            coord: fromCoord,\r\n                            value: dataItem.value\r\n                        }, {\r\n                            coord: toCoord,\r\n                        }]);\r\n                    }\r\n\r\n                }\r\n            }\r\n            if (t === 0) {\r\n                t = 1;\r\n            } else {\r\n                t = 0;\r\n            }\r\n            return res;\r\n        };\r\n\r\n        optionXyMap01 = {\r\n            timeline: {\r\n                data: year,\r\n                axisType: 'category',\r\n                autoPlay: true,\r\n                playInterval: 1500,\r\n                left: '10%',\r\n                right: '10%',\r\n                bottom: '3%',\r\n                width: '80%',\r\n                //  height: null,\r\n                label: {\r\n                    normal: {\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                symbolSize: 10,\r\n                lineStyle: {\r\n                    color: '#FFFFFF'\r\n                },\r\n                checkpointStyle: {\r\n                    borderColor: '#FFFFFF',\r\n                    borderWidth: 2\r\n                },\r\n                controlStyle: {\r\n                    showNextBtn: true,\r\n                    showPrevBtn: true,\r\n                    normal: {\r\n                        color: '#666',\r\n                        borderColor: '#666'\r\n                    },\r\n                    emphasis: {\r\n                        color: '#FFFFFF',\r\n                        borderColor: '#aaa'\r\n                    }\r\n                },\r\n\r\n            },\r\n            baseOption: {\r\n\r\n                animation: true,\r\n                animationDuration: 1000,\r\n                animationEasing: 'cubicInOut',\r\n                animationDurationUpdate: 1000,\r\n                animationEasingUpdate: 'cubicInOut',\r\n                grid: {\r\n                    right: '2%',\r\n                    top: '10%',\r\n                    bottom: '10%',\r\n                    width: '18%'\r\n                },\r\n                tooltip: {\r\n                    trigger: 'axis', // hover触发器\r\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\r\n                        shadowStyle: {\r\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\r\n                        }\r\n                    }\r\n                },\r\n                visualMap: {\r\n                    min: 200,\r\n                    max: 15000,\r\n                    left: 'left',\r\n                    top: 'bottom',\r\n                    text: ['高', '低'],\r\n                    textStyle: {\r\n                        color: 'white'\r\n                    },\r\n                    calculable: true,\r\n                    colorLightness: [0.8, 100],\r\n                    color: ['#c05050', '#e5cf0d', '#5ab1ef'],\r\n                    dimension: 0,\r\n\r\n                },\r\n                geo: {\r\n                    show: true,\r\n                    map: 'anhui',\r\n                    roam: true,\r\n                    zoom: 1,\r\n                   center: [117.284922, 31.861184],\r\n                     label: {\r\n                       emphasis: {\r\n                         show: true\r\n                        }\r\n                  },\r\n                    itemStyle: {\r\n                        normal: {\r\n                            borderColor: 'rgba(147, 235, 248, 1)',\r\n                            borderWidth: 1,\r\n                            areaColor: {\r\n                                type: 'radial',\r\n                                x: 0.5,\r\n                                y: 0.5,\r\n                                r: 0.8,\r\n                                colorStops: [{\r\n                                    offset: 0,\r\n                                    color: 'rgba(3, 0, 38,9)' // 0% 处的颜色\r\n                                }, {\r\n                                    offset: 1,\r\n                                    color: 'rgba(3, 0, 38,9)' // 100% 处的颜色\r\n                                }],\r\n                                globalCoord: false // 缺省为 false\r\n                            },\r\n                            shadowColor: 'rgba(128, 217, 248, 9)',\r\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\r\n                            shadowOffsetX: -2,\r\n                            shadowOffsetY: 2,\r\n                            shadowBlur: 10\r\n                        },\r\n                        emphasis: {\r\n                            areaColor: '#FCFFD9',\r\n                            borderWidth: 1\r\n                        }\r\n                    }\r\n                },\r\n            },\r\n            options: []\r\n\r\n        };\r\n\r\n        for (var n = 0; n < year.length; n++) {\r\n            var statistic_name = \"安徽省各市房屋均价\";\r\n            optionXyMap01.options.push({\r\n                backgroundColor: '#555555',\r\n\r\n                title: [{\r\n                        text: '安徽省各市房屋均价历年变化',\r\n                        //subtext: '   ',\r\n                        left: '25%',\r\n                        top: '1%',\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 25\r\n                        }\r\n                    },\r\n                    {\r\n                        id: 'statistic',\r\n                        text: statistic_name,\r\n                        left: '75%',\r\n                        top: '3%',\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 16\r\n                        }\r\n                    }\r\n                ],\r\n                xAxis: {\r\n                    type: 'value',\r\n                    scale: true,\r\n                    position: 'top',\r\n                    min: 0,\r\n                    boundaryGap: false,\r\n                    splitLine: {\r\n                        show: false\r\n                    },\r\n                    axisLine: {\r\n                        show: false\r\n                    },\r\n                    axisTick: {\r\n                        show: false\r\n                    },\r\n                    axisLabel: {\r\n                        margin: 1,\r\n                        textStyle: {\r\n                            color: '#aaa'\r\n                        }\r\n                    },\r\n                },\r\n                yAxis: {\r\n                    type: 'category',\r\n                    //  name: 'TOP 20',\r\n                    nameGap: 16,\r\n                    axisLine: {\r\n                        show: true,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisTick: {\r\n                        show: false,\r\n                        lineStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    axisLabel: {\r\n                        interval: 0,\r\n                        textStyle: {\r\n                            color: '#ddd'\r\n                        }\r\n                    },\r\n                    data: categoryData[n]\r\n                },\r\n\r\n                series: [{\r\n                        //文字和标志\r\n                        name: 'light',\r\n                        type: 'scatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n]),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 50;\r\n                        },\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            },\r\n                            emphasis: {\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[colorIndex][n]\r\n                            }\r\n                        }\r\n                    },\r\n                    //地图？\r\n                    {\r\n                        type: 'map',\r\n                        map: 'anhui',\r\n                        geoIndex: 0,\r\n                        //aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: false, // 存在legend时显示\r\n                        label: {\r\n                            normal: {\r\n                                show: false\r\n                            },\r\n                            emphasis: {\r\n                                show: false,\r\n                                textStyle: {\r\n                                    color: '#fff'\r\n                                }\r\n                            }\r\n                        },\r\n                        roam: true,\r\n                        itemStyle: {\r\n                            normal: {\r\n                                areaColor: '#031525',\r\n                                borderColor: '#FFFFFF',\r\n                            },\r\n                            emphasis: {\r\n                                areaColor: '#2B91B7'\r\n                            }\r\n                        },\r\n                        animation: false,\r\n                        data: mapData\r\n                    },\r\n                    //地图点的动画效果\r\n                    {\r\n                        //  name: 'Top 5',\r\n                        type: 'effectScatter',\r\n                        coordinateSystem: 'geo',\r\n                        data: convertData(mapData[n].sort(function(a, b) {\r\n                            return b.value - a.value;\r\n                        }).slice(0, 20)),\r\n                        symbolSize: function(val) {\r\n                            return val[2] / 50;\r\n                        },\r\n                        showEffectOn: 'render',\r\n                        rippleEffect: {\r\n                            brushType: 'stroke'\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: '{b}',\r\n                                position: 'right',\r\n                                show: true\r\n                            }\r\n                        },\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: '#031525',\r\n                                shadowBlur: 100,\r\n                                shadowColor: colors[colorIndex][n]\r\n                            }\r\n                        },\r\n                        zlevel: 1\r\n                    },\r\n                    //地图线的动画效果\r\n\r\n                    //柱状图\r\n                    {\r\n                        zlevel: 1,\r\n                        type: 'bar',\r\n                        barMaxWidth: 8,\r\n                        symbol: 'none',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[n],\r\n                                barBorderRadius: [0, 30, 30, 0]\r\n                            }\r\n                        },\r\n                        data: barData[n]\r\n                    }\r\n                ]\r\n            });\r\n            if (r === 0) {\r\n                r = 1;\r\n            } else {\r\n                r = 0;\r\n            }\r\n        }\r\n        myChart.setOption(optionXyMap01);\r\n    });\r\n});","html":"","externalScripts":"","updaterUID":"obd-o2tTFxTbU03Zv9r1ID53336yheSPF6d","theme":"","layout":"","viewCount":0,"userName":"187*****097","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6x5aMKDgN.png?v=1635665538424","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-bar","series-effectScatter","series-map","series-scatter","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"187*****097"}}