{"status":0,"data":{"cid":"x5ZoMkywXG","authorUid":"bd-1847551832","authorUserName":"s***0","title":"平滑折线测试","description":"平滑折线测试","latestVersion":2,"alwaysLatest":1,"createTime":"2020-04-15T09:45:30.000Z","lastUpdateTime":"2020-04-15T09:45:30.000Z","auth":2,"uid":"bd-1847551832","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-15T10:19:13.000Z","code":"\n// 折线平滑函数\n// a, b, c 连续3点\n// level 平滑强度，0-1\n// return 新的 b 点\nconst smoothness = function (prev, current, next, level = 0.5) {\n  if (prev === undefined || next === undefined) {\n    return current\n  }\n  const tmp = (next - prev) / 2 + prev\n  const newPoint = (tmp - current) * level + current\n  return newPoint\n}\n\n\n// 折线平滑函数\n// list [number] 待平滑列表\n// level 平滑强度，0-1\n// return [number] 平滑列表\nconst smoothness2 = function (list = [], level = 0.5) {\n  if (list.length <= 2) {\n    return list\n  }\n  const start = list[0]\n  const end = list[list.length -1]\n  const rate = (end - start) / (list.length - 1)\n  return list.map((item, i) => {\n    const target = rate * i + start\n    return (target - item) * level + item\n  })\n}\n\n// 折线平滑函数\n// list [number] 待平滑列表\n// level 平滑强度，0-1\n// return [number] 平滑列表\nconst smoothness3 = function (list = [], level = 0.5) {\n  if (list.length <= 2) {\n    return list\n  }\n  return list.map((current, i) => {\n    const prev = list[i - 1]\n    const next = list[i + 1]\n    return smoothness(prev, current, next, level)\n  })\n}\n\nconst data = [10, 182, 191, 534, 590, 330, 210, 50, 100, 300, 400, 500, 200]\nconst series = [{\n    name: 'origin',\n    type: 'line',\n    lineStyle: {width: 3},\n    data\n}]\nseries.push({\n    name: 'smooth2-1',\n    type: 'line',\n    data: smoothness2(data, 1),\n    lineStyle: {width: 1},\n})\nseries.push({\n    name: 'smooth2-0.5',\n    type: 'line',\n    data: smoothness2(data),\n    lineStyle: {width: 1},\n})\nseries.push({\n    name: 'smooth3-0.5',\n    type: 'line',\n    data: smoothness3(data),\n    lineStyle: {width: 1},\n})\nseries.push({\n    name: 'smooth3-1.0',\n    type: 'line',\n    data: smoothness3(data, 1),\n    lineStyle: {width: 1},\n})\n\n\nconsole.log(series.map(i=>i.data))\n\noption = {\n    title: {\n        text: '平滑折线测试'\n    },\n    tooltip: {\n        trigger: 'axis'\n    },\n    legend: series.map((item => ({ name: item.name }))),\n    xAxis: {\n        data: data\n    },\n    yAxis: {},\n    series\n};","html":"","externalScripts":"","updaterUID":"bd-1847551832","theme":"","layout":"","viewCount":62,"userName":"s***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x5ZoMkywXG.png?v=1586945953619","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title","tooltip"],"customTags":[],"updaterUserName":"s***0"}}