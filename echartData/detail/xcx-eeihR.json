{"status":0,"data":{"cid":"xcx-eeihR","authorUid":"bd-1785988351","authorUserName":"百度用户#0971362260","title":"t1","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2019-11-11T03:54:22.000Z","lastUpdateTime":"2019-11-11T03:54:22.000Z","auth":1,"uid":"bd-1785988351","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.4.0","versionCreateTime":"2019-11-11T03:56:17.000Z","code":"option = {\n    backgroundColor:\"#fff\",\n    dataset: {\n        source: [\n            [\"value\", \"首笔土地类资金流出10%\", \"首次开盘\", \"回款30%\", \"现金流回正\", \"销售95%\", \"梭备\", \"结利\", \"交房\"],\n            [\"首开奖\", null, 3, 0, 0, 0, null, null, null],\n            [\"周转奖\", null, null, 200000, 200000, 500000, null, null, null],\n            [\"利润奖\", null, null, 100000, 100000, null, null, null, null],\n            [\"目前节点\", 201810, 201811, 201812, 201901, 201810, 201904, 201905, 201906],\n            [\"与预计偏差\", null, -1, 1, 0, null, 1, null, null],\n            [\"启动会节点\", 201810, 201812, 201811, 201901, 201903, 201903, 201905, 201906]\n        ]\n    },\n    series: {\n        \"type\": \"custom\",\n        \"coordinateSystem\": \"none\",\n        \"seriesLayoutBy\": \"row\",\n        \"label\": {\n            \"show\":true,\n            \"formatter\": function(arg) {\n                return arg.value[0]\n            }\n        },\n        \"renderItem\": function a(params, api) {\n            var left = 100,right=20,bp=50,diff=api.value(5)>0;\n            var style = api.style(),\n                cw = api.getWidth(),\n                ch = api.getHeight(),\n                w = (cw-left-right)/8,\n                text = style.text,\n                v = api.value(1),\n                index = params.dataIndex,\n                date = new Date(),\n                now = date.getFullYear()*100+date.getMonth()+1,\n                before = now-api.value(4)>0;\n                if(params.context.now==1){\n                    params.context.now=2\n                }else if(before){\n                    params.context.now = 0;\n                }else if(params.context.now!=2){\n                    params.context.now = 1;\n                }\n                console.log(params.context.now);\n            var result={\n                type:'group',\n                position:[left+w*index+w/2,ch*2/5],\n                children:[\n                    {\n                        type:'text',\n                        style:{\n                            text:text,\n                            fill:params.context.now==0?'#999':'#333',\n                            textAlign:'center',\n                            textVerticalAlign:'middle'\n                        },\n                        position:[0,-30]\n                    },{\n                        type:'text',\n                        style:{\n                            text:api.value(4)?(api.value(4).toString().substring(0,4)+'.'+api.value(4).toString().substring(4,6)):'',\n                            fill:params.context.now==0?'#999':'#2872eb',\n                            textAlign:'center',\n                            textVerticalAlign:'middle'\n                        },\n                        position:[0,30]\n                    },{\n                        type:'line',\n                        style:{\n                            stroke:params.context.now==0?'#e3eaf6':'#2872eb',\n                            lineWidth:2\n                        },\n                        styleEmphasis:{\n                            stroke:params.context.now==0?'#e3eaf6':'#2872eb'\n                        },\n                        shape:{\n                            x1:-w/2,x2:w/2,y1:0,y2:0\n                        }\n                    },{\n                        type:'ring',\n                        style:{\n                            fill:'#fff',\n                        },\n                        shape:{\n                            r:8,r0:0\n                        }\n                    },{\n                        type:'ring',\n                        style:{\n                            fill:params.context.now==0?'#e3eaf6':'#2872eb',\n                        },\n                        styleEmphasis:{\n                            fill:params.context.now==0?'#e3eaf6':'#2872eb'\n                        },\n                        shape:{\n                            r:8,r0:params.context.now==0?6:0\n                        }\n                    }]\n            }\n            if(api.value(1)||api.value(2)||api.value(3)){\n                var t1='';\n                if(api.value(1)){\n                    t1='奖\\n';\n                    for(var i=0;i<api.value(1);i++){\n                        t1+='★'\n                    }\n                }else{\n                    if(api.value(2)){\n                        t1+='周转奖'+Math.round(api.value(2)/10000)+'万';\n                        if(api.value(3)){\n                            t1+='\\n';\n                        }\n                    }\n                    if(api.value(3)){\n                        t1+='利润奖'+Math.round(api.value(3)/10000)+'万';\n                    }\n                }\n                var obj = {\n                    type:'rect',\n                    shape:{\n                        x:-50,y:-30,width:100,height:50\n                    },\n                    style:{\n                        text:t1,\n                        fill:params.context.now==0?'#fff':'#2872eb',\n                        textFill:params.context.now==0?'#333':'#fff',\n                        shadowBlur:10,\n                        shadowColor:'rgba(0,0,0,.2)'\n                    },\n                    position:[0,-ch/5-15]\n                };\n                result.children.push(obj);\n            }\n            if(api.value(5)){\n                result.children.push({\n                    type: 'polygon',\n                    shape: {\n                        points: params.context.now==0?[\n                            [-50, -15],\n                            [40,-15],\n                            [50,0],\n                            [40,15],\n                            [-50,15],\n                            [-40,0]\n                        ]:[\n                            [-55, -15],\n                            [45,-15],\n                            [55,0],\n                            [45,15],\n                            [-55,15],\n                            [-45,0]\n                        ]\n                    },\n                    style: {\n                        text:(params.context.now==0?'':'预计')+(diff?'延迟':'提前')+Math.abs(api.value(5))+'个月',\n                        stroke:diff?'#ff9498':'#16c3ca',\n                        textFill:diff?'#ff9498':'#16c3ca',\n                        fill:'#fff'\n                    },\n                    position:[0,ch/5+15]\n                })\n            }\n            if(api.value(6)){\n                result.children.push({\n                    type: 'polygon',\n                    shape: {\n                        points: [\n                            [-50, -15],\n                            [40,-15],\n                            [50,0],\n                            [40,15],\n                            [-50,15],\n                            [-40,0]\n                        ]\n                    },\n                    style: {\n                        text:api.value(6).toString().substring(0,4)+'.'+api.value(6).toString().substring(4,6),\n                        stroke:'#999',\n                        textFill:'#999',\n                        fill:'#fff'\n                    },\n                    position:[0,ch*2/5+15]\n                })\n            }\n            if(params.context.now==1){\n                result.children.push({\n                    type:'group',\n                    position:[-w/2,0],\n                    children:[{\n                        type:'text',\n                        style:{\n                            text:'▼',\n                            fill:'#2872eb',\n                            textAlign:'center',\n                            textVerticalAlign:'bottom'\n                        },\n                        position:[0,-10]\n                    },{\n                        type:'text',\n                        style:{\n                            text:'现在',\n                            fill:'#2872eb',\n                            textAlign:'center',\n                            textVerticalAlign:'top'\n                        },\n                        position:[0,10]\n                    }]\n                })\n            }\n            if(index==0){\n                result.children.push({\n                    type:'group',\n                    position:[-w/2-20,0],\n                    children:[{\n                        type:'text',\n                        style:{\n                            text:'目前节点',\n                            fill:'#999',\n                            textAlign:'right',\n                            textVerticalAlign:'middle'\n                        },\n                        position:[0,0]\n                    },{\n                        type:'text',\n                        style:{\n                            text:'与预计偏差',\n                            fill:'#999',\n                            textAlign:'right',\n                            textVerticalAlign:'middle'\n                        },\n                        position:[0,ch/5+15]\n                    },{\n                        type:'text',\n                        style:{\n                            text:'启动会节点',\n                            fill:'#999',\n                            textAlign:'right',\n                            textVerticalAlign:'middle'\n                        },\n                        position:[0,ch*2/5+15]\n                    }]\n                })\n            }\n            return result;\n        }\n    }\n};\n\n\n\n// option = {\n//     backgroundColor:\"#f7f9fd\",\n//     // title:{\n//     //     show:true,\n//     //     text:'项目考核节点预告{a|(未来半年)}',\n//     //     textStyle:{\n//     //         color:'#3677eb',\n//     //         rich:{\n//     //             a:{\n//     //                 fontSize:14,\n//     //                 fontWeight:'bold',\n//     //             }\n//     //         }\n//     //     },\n//     //     textAlign:'center',\n//     //     textVerticalAlign:'middle',\n//     //     left:'50%',\n//     //     top:'10%',\n        \n        \n//     // },\n//     dataset:{\n//         source:[\n//             [\"V\",\"月度运维时间节点\"],\n//             [\"春森彼岸_回款30%节点\",\"2015-01-04\"],\n//             [\"春森彼岸2_回款30%节点\",\"2015-01-03\"],\n//             [\"春森彼岸3_回款30%节点\",\"2015-01-02\"],\n//         ]\n//     },\n//     \"tooltip\": {\n//         \"show\": false\n//     },\n//     \"series\":{\n//             \"type\": \"custom\",\n//             \"coordinateSystem\": \"none\",\n//             \"renderItem\":function(params, api) {\n//                 var ih=50,count=3;\n//                 var style = api.style(),cw = api.getWidth(),ch = api.getHeight(),index = params.dataIndex+1;\n//                 var mh=ih*(count+1),sy=(ch-mh)/2;\n                \n//                 var text = style.text.split('_')[0]+style.text.split('_')[1]+'节点：'+api.value(1);\n//                 var item = {\n//                         type: 'group',\n//                         position:[0,sy],\n//                         children: [{\n//                             type: 'text',\n//                             style: {\n//                                 // fill: '#747475',\n//                                 textFill:'#747475',\n//                                 textVerticalAlign:'middle',\n//                                 fontSize:16,\n//                                 text:'{a|●}'+text,\n//                                 rich:{\n//                                     a:{\n//                                         fontSize:14,\n//                                         fontWeight:'bold',\n//                                         textFill:'#3677eb'\n//                                     }\n//                                 }\n//                             },\n//                             styleEmphasis:{\n//                                 fill: '#f6f8fc'\n//                             },\n//                             position:[cw/2-150,(index+0.5)*ih]\n//                         }]\n//                     }\n//                 if(index==1){\n//                     item.children.unshift({\n//                         type: 'text',\n//                         style: {\n//                             textAlign:'center',\n//                             textFill:'#3677eb',\n//                             textVerticalAlign:'bottom',\n//                             fontSize:20,\n//                             text:'项目考核节点预告{a|(未来半年)}',\n//                             rich:{\n//                                 a:{\n//                                     fontSize:16,\n//                                     fontWeight:'bold',\n//                                 }\n//                             }\n//                         },\n//                         styleEmphasis:{\n//                             fill: '#f6f8fc'\n//                         },\n//                         position:[cw/2,ih/2]\n//                     })\n//                 }    \n//                 return item;\n//             },\n//             json:\"function render(params, api) {\\n                var ih=50,count=3;\\n                var style = api.style(),cw = api.getWidth(),ch = api.getHeight(),index = params.dataIndex+1;\\n                var mh=ih*(count+1),sy=(ch-mh)/2;\\n                \\n                var text = style.text.split('_')[0]+style.text.split('_')[1]+'节点：'+api.value(1);\\n                var item = {\\n                        type: 'group',\\n                        position:[0,sy],\\n                        children: [{\\n                            type: 'text',\\n                            style: {\\n                                // fill: '#747475',\\n                                textFill:'#747475',\\n                                textVerticalAlign:'middle',\\n                                fontSize:16,\\n                                text:'{a|●}'+text,\\n                                rich:{\\n                                    a:{\\n                                        fontSize:14,\\n                                        fontWeight:'bold',\\n                                        textFill:'#3677eb'\\n                                    }\\n                                }\\n                            },\\n                            styleEmphasis:{\\n                                fill: '#f6f8fc'\\n                            },\\n                            position:[cw/2-150,(index+0.5)*ih]\\n                        }]\\n                    }\\n                if(index==1){\\n                    item.children.unshift({\\n                        type: 'text',\\n                        style: {\\n                            textAlign:'center',\\n                            textFill:'#3677eb',\\n                            textVerticalAlign:'bottom',\\n                            fontSize:20,\\n                            text:'项目考核节点预告{a|(未来半年)}',\\n                            rich:{\\n                                a:{\\n                                    fontSize:16,\\n                                    fontWeight:'bold',\\n                                }\\n                            }\\n                        },\\n                        styleEmphasis:{\\n                            fill: '#f6f8fc'\\n                        },\\n                        position:[cw/2,ih/2]\\n                    })\\n                }    \\n                return item;\\n            }\",\n//             \"label\": {\n//                 \"normal\": {\n//                     \"show\": true,\n//                     \"formatter\": function(v){return v.value[0]}\n//                 }\n//             }\n//         }\n// };\n\n","html":"","externalScripts":"","updaterUID":"bd-1413358150","theme":"","layout":"","viewCount":15,"userName":"百度用户#0971362260","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xcx-eeihR.png?v=1573444577783","isCustomThumbnail":0,"builtinTags":["category-work","dataset","series-custom"],"customTags":[],"updaterUserName":"灬***o"}}