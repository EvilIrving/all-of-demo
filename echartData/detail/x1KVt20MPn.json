{"status":0,"data":{"cid":"x1KVt20MPn","authorUid":"bd-2013481626","authorUserName":"じ***ゞ","title":"折线图+柱状图","description":" 多Y轴对齐","latestVersion":8,"alwaysLatest":1,"createTime":"2020-06-04T06:52:56.000Z","lastUpdateTime":"2020-06-04T06:52:56.000Z","auth":2,"uid":"bd-2013481626","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.9.0","versionCreateTime":"2021-06-07T08:05:10.000Z","code":"let localdata = {\n    rain: [8, 18, 8, 12, 0, 19, 21, 19, 24.8, 23, 29.7],\n    tmp: [12, 13, 9.7, 8, -6, 15, 25, 15, 23, 14, 23],\n    winds: [3, 2.8, 5, 6.8, 6.4, 8, 7, 8.4, 7, 8, 10],\n    pre: [600, 400, 550, 580, 400, 500, 700, 500, 600, 700, 650]\n};\n\nlet colors = ['#4BC946', '#FDA975', '#27D3E2', '#FF0014'];\nlet splitNumber = 5; // 分割段数\n\n//计算最大值\nfunction calMax(arr) {\n    let min = Math.min.apply(null, arr);\n    let max = Math.max.apply(null, arr);\n    let interval = (max - min) / splitNumber; // 平均值\n    max = Math.ceil(max + interval); // 向上取整\n    // console.log(min, max, interval);\n    return max;\n}\n\n//计算最小值\nfunction calMin(arr) {\n    let min = Math.min.apply(null, arr);\n    let max = Math.max.apply(null, arr);\n    let interval = (max - min) / splitNumber; // 平均值\n    min = min === 0 ? min : Math.floor(min - interval); // 向下取整\n    // console.log(min, max, interval);\n    return min;\n}\n\noption = {\n    color: colors,\n    backgroundColor: '#fff',\n    title: {\n        text: '2020年2月4日某站雷暴天气时序图',\n        subtext: '灾害时间：2020/2/4 08:30-20202/4 10:20',\n        top: '1%',\n        x: 'center',\n        textStyle: { color: '#2D527C', fontSize: '20', fontWeight: 'bold'},\n        subtextStyle: { color: '#2D527C', fontSize: '14', fontWeight: 'bold' }\n    },\n    grid: {\n        top: '15%',\n        bottom: '10%',\n        left: '15%',\n        right: '15%',\n    },\n    legend: {\n        top: '9%'\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { type: 'shadow' }\n    },\n    xAxis: {\n        type: 'category',\n        axisTick: { show: false },\n        axisLabel: {\n            textStyle: { color: '#333333', fontSize: 14 }\n        },\n        axisLine: {\n            show: false,\n            lineStyle: { color: '#707070' }\n        },\n        data: ['02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12']\n    },\n    yAxis: [{\n        // name: '降水(mm)',\n        type: 'value',\n        position: 'left',\n        min: calMin(localdata.rain),\n        max: calMax(localdata.rain),\n        splitNumber: splitNumber,\n        interval: (calMax(localdata.rain) - calMin(localdata.rain)) / splitNumber,\n        splitLine: {\n            lineStyle: { type: 'dashed', color: '#707070' }\n        },\n        axisLabel: {\n            // formatter: '{value}mm',\n            formatter: function(value, index) {\n                return (value + '').indexOf('.') != -1 ? value.toFixed(1) + 'mm' : value + 'mm';\n            },\n            textStyle: { color: colors[0], fontSize: 14 }\n        },\n        axisLine: { show: false },\n        axisTick: { show: false }\n    }, {\n        // name: '气温(°C)',\n        type: 'value',\n        position: 'left',\n        offset: 65,\n        min: calMin(localdata.tmp),\n        max: calMax(localdata.tmp),\n        splitNumber: splitNumber,\n        interval: (calMax(localdata.tmp) - calMin(localdata.tmp)) / splitNumber,\n        splitLine: { show: false },\n        axisLine: { show: false },\n        axisLabel: {\n            // formatter: '{value}°C',\n            formatter: function(value, index) {\n                return parseInt(value) + '°C';\n            },\n            textStyle: { color: colors[1], fontSize: 14 }\n        },\n        axisTick: { show: false }\n    }, {\n        // name: '风速(m/s)',\n        type: 'value',\n        position: 'right',\n        min: calMin(localdata.winds),\n        max: calMax(localdata.winds),\n        splitNumber: splitNumber,\n        interval: (calMax(localdata.winds) - calMin(localdata.winds)) / splitNumber,\n        splitLine: { show: false },\n        axisLine: { show: false },\n        axisLabel: {\n            // formatter: '{value}m/s',\n            formatter: function(value, index) {\n                return parseInt(value) + 'm/s';\n            },\n            textStyle: { color: colors[3], fontSize: 14 }\n        },\n        axisTick: { show: false }\n    }, {\n        // name: '气压(hPa)',\n        type: 'value',\n        position: 'right',\n        offset: 54,\n        min: calMin(localdata.pre),\n        max: calMax(localdata.pre),\n        splitNumber: splitNumber,\n        interval: (calMax(localdata.pre) - calMin(localdata.pre)) / splitNumber,\n        splitLine: { show: false },\n        axisLine: { show: false },\n        axisLabel: {\n            // formatter: '{value}hPa',\n            formatter: function(value, index) {\n                return parseInt(value) + 'hPa';\n            },\n            textStyle: { color: colors[2], fontSize: 14 }\n        },\n        axisTick: { show: false }\n    }],\n    series: [{\n            name: '降水',\n            type: 'bar',\n            barWidth: '40%',\n            data: localdata.rain\n        },\n        {\n            name: '温度',\n            type: 'line',\n            symbol: 'circle',\n            symbolSize: 8,\n            yAxisIndex: 1,\n            data: localdata.tmp\n        },\n        {\n            name: '气压',\n            type: 'line',\n            symbol: 'circle',\n            symbolSize: 8,\n            yAxisIndex: 3,\n            data: localdata.pre\n        },\n        {\n            name: '风速',\n            type: 'line',\n            symbol: 'circle',\n            symbolSize: 8,\n            yAxisIndex: 2,\n            data: localdata.winds\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-2013481626","theme":"default","layout":"","viewCount":10385,"userName":"じ***ゞ","commentCount":0,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1KVt20MPn.png?v=1623053110583","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","title","tooltip"],"customTags":[],"updaterUserName":"じ***ゞ"}}