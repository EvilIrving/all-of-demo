{"status":0,"data":{"cid":"x50Wfh7b9j","authorUid":"obd-oEygZsDTLxuwmnak0OUEpb82X1KBU4e","authorUserName":"谢***4","title":"南京市溧水区地图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-11-26T01:27:08.000Z","lastUpdateTime":"2021-11-26T01:27:08.000Z","auth":1,"uid":"obd-oEygZsDTLxuwmnak0OUEpb82X1KBU4e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-11-26T01:27:08.000Z","code":"/**\n * 使用5.0以下版本\n */\nvar uploadedDataURL = 'https://geo.datav.aliyun.com/areas_v3/bound/320117.json';\nmyChart.showLoading();\nvar colorList = ['rgba(34, 222, 81, 1)', 'rgba(255, 210, 0, 1)'];\n$.getJSON(uploadedDataURL, function (geoJson) {\n    echarts.registerMap('nanjing', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n        明觉支行: [118.89945, 31.57325],\n        群力支行: [119.02001, 31.74368],\n        在城支行: [119.038417, 31.661258],\n        柘塘支行: [118.928829, 31.761365],\n        开发区支行: [119.037774, 31.681536],\n        秦淮支行: [119.050675, 31.657801],\n        乌山支行: [118.976787, 31.735993],\n        宝塔路支行: [119.024971, 31.679448],\n    };\n\n    var data = [\n        {\n            name: '明觉支行',\n            data1: '1',\n            value: 149,\n        },\n        {\n            name: '群力支行',\n            data1: '2',\n            value: 0,\n        },\n        {\n            name: '在城支行',\n            data1: '1',\n            value: 0,\n        },\n        {\n            name: '柘塘支行',\n            data1: '1',\n            value: 0,\n        },\n        {\n            name: '开发区支行',\n            data1: '1',\n            value: 0,\n        },\n        {\n            name: '秦淮支行',\n            data1: '1',\n            value: 0,\n        },\n        {\n            name: '乌山支行',\n            data1: '1',\n            value: 0,\n        },\n        {\n            name: '宝塔路支行',\n            data1: '1',\n            value: 0,\n        },\n    ];\n    var convertData = function (data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value),\n                    typeDataVlaue: data[i].data1,\n                });\n            }\n        }\n        return res;\n    };\n\n    option = {\n        backgroundColor: 'rgba(90, 198, 245, 0.3);',\n        tooltip: {\n            trigger: 'item',\n            backgroundColor: 'transparent', //背景颜色（此时为默认色）\n            formatter: function (params) {\n                if (params.name == '溧水区') {\n                    return;\n                }\n                let html = '';\n                if (params.data.typeDataVlaue == '1') {\n                    html += `\n              <div style=\"text-align: center;width: 132px;height: 26px;border: 2px solid #19F402;transform: skewX(-20deg);background: linear-gradient(-90deg, #19F402 0%, #138D07 100%);opacity: 0.7;border-radius: 2px;\">\n              <span style=\"font-size: 15px;font-family: Microsoft YaHei;font-weight: bold;color: #FFFFFF; line-height: 4px;display: inline-block;transform: skewX(20deg);\">${params.name}(${params.value[2]})</span>\n              </div>\n              `;\n                } else if (params.data.typeDataVlaue == '2') {\n                    html += `\n              <div style=\"text-align: center;width: 132px;height: 26px;border: 2px solid #feff00;transform: skewX(-20deg);background: linear-gradient(-90deg, #ffd200 0%, #fff600 100%);opacity: 0.8;border-radius: 2px;\">\n              <span style=\"font-size: 15px;font-family: Microsoft YaHei;font-weight: bold;color: #6C530B; line-height: 4px;display: inline-block;transform: skewX(20deg);\">${params.name}(${params.value[2]})</span>\n              </div>\n              `;\n                }\n\n                return html;\n            },\n        },\n        geo: {\n            show: true,\n            map: 'nanjing',\n            geoIndex: -1,\n            zoom: 1.25,\n            selectedMode: true,\n            aspectScale: 0.9,\n            hoverAnimation: true,\n            label: {\n                normal: {\n                    show: false,\n                },\n                emphasis: {\n                    show: false,\n                },\n            },\n            roam: false,\n            itemStyle: {\n                normal: {\n                    label: { show: false },\n                    // borderWidth: 0,\n                    // borderColor: '#00a4e7',\n                    // areaColor: '#00a4e7',\n                },\n                emphasis: {\n                    label: { show: false },\n                    // borderWidth: 0,\n                    // borderColor: '#00a4e7',\n                    // areaColor: '#00a4e7',\n                },\n            },\n        },\n        series: [\n            {\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(data),\n                hoverAnimation: false,\n                aspectScale: 0.9,\n                symbolSize: [20, 20],\n                label: {\n                    normal: {\n                        formatter(value) {\n                            if (value.data.typeDataVlaue == '1') {\n                                return '{a|' + value.data.name[0] + '}';\n                            } else if (value.data.typeDataVlaue == '2') {\n                                return '{b|' + value.data.name[0] + '}';\n                            }\n                        },\n                        show: true,\n                        rich: {\n                            a: {\n                                color: '#053319',\n                                fontFamily: 'Microsoft YaHei',\n                                fontWeight: 'bold',\n                                fontSize: 15,\n                            },\n                            b: {\n                                color: '#6C530B',\n                                fontFamily: 'Microsoft YaHei',\n                                fontWeight: 'bold',\n                                fontSize: 15,\n                            },\n                        },\n                    },\n                },\n                itemStyle: {\n                    normal: {\n                        color: (params) => {\n                            console.log(params);\n                            if (params.data.typeDataVlaue == '1') {\n                                return 'rgba(26, 244, 8, 1)';\n                            } else if (params.data.typeDataVlaue == '2') {\n                                return 'rgba(255, 246, 0, 1)';\n                            }\n                        },\n                    },\n                },\n            },\n            {\n                type: 'map',\n                mapType: 'nanjing',\n                animation: false,\n                hoverAnimation: true,\n                zoom: 1.25,\n                aspectScale: 0.9,\n                selectedMode: false,\n                /**\n                 * 填充颜色 和边框颜色为透明 可以显示背景图 可以使用以下这个样式\n                 */\n                //     itemStyle: {\n                //   normal: {\n                //     label: { show: false },\n                //     borderWidth: 0, //区域边框宽度\n                //     borderColor: \"rgba(128, 128, 128, 0)\", //区域边框颜色\n                //     areaColor: \"rgba(128, 128, 128, 0)\" //rgba设置透明度0\n                //   },\n                //   // 鼠标划入\n                //   emphasis: {\n                //     label: { show: false },\n                //     borderWidth: 0, //区域边框宽度\n                //     borderColor: \"rgba(128, 128, 128, 0)\", //区域边框颜色\n                //     areaColor: \"rgba(128, 128, 128, 0)\" //rgba设置透明度0\n                //   }\n                // }\n                itemStyle: {\n                    normal: {\n                        label: { show: false },\n                        borderWidth: 2, //区域边框宽度\n                        borderColor: '#01D6F8', //区域边框颜色\n                        areaColor: 'rgba(1, 199, 243, .3)', //区域颜色\n                    },\n                    emphasis: {\n                        label: { show: false, color: '#fff', fontSize: '18px' },\n                        borderWidth: 2,\n                        borderColor: '#01D6F8',\n                        areaColor: 'rgba(1, 199, 243, .3)',\n                    },\n                },\n            },\n        ],\n    };\n    myChart.setOption(option);\n});\n","html":"","externalScripts":"","updaterUID":"obd-oEygZsDTLxuwmnak0OUEpb82X1KBU4e","theme":"","layout":"","viewCount":0,"userName":"谢***4","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x50Wfh7b9j.png?v=1637890028519","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","tooltip"],"customTags":["map"],"updaterUserName":"谢***4"}}