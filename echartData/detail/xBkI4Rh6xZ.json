{"status":0,"data":{"cid":"xBkI4Rh6xZ","authorUid":"bd-167860219","authorUserName":"n***1","title":"上海房价可视化","description":"数据提取自链家","latestVersion":22,"alwaysLatest":1,"createTime":"2017-05-20T13:01:33.000Z","lastUpdateTime":"2021-08-01T03:29:20.000Z","auth":2,"uid":"bd-167860219","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":22,"parentVersion":21,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-01T03:29:20.000Z","code":"//关于这个图表我做的视频简介：https://www.bilibili.com/video/BV1pD4y127tW\n//各位观众老爷们一键三连，下次一定！\n\nvar uploadedDataURL = \"/asset/get/s/data-1495284690309-Bk9Ro3Te-.json\";\nvar t_pos = {\n    left: 0,\n    top: 0\n}\n\nvar last_point = [0, 0];\nvar counter = 0;\nmyChart.showLoading();\nmyChart.setOption(option = {\n    title: {\n        x: 'right',\n        text: \"上海房价可视化\",\n        subtext: '随机抽样10000个,数据提取自链家',\n        textStyle: {\n            color: '#000',\n            fontSize: 30\n        }\n    },\n    tooltip: {\n        trigger: 'item',\n        transitionDuration: 0,\n        position: function(point, params, dom, rect, size) {\n            var least_area = 20;\n            var offset_x = 30; /* 相对于point的偏移 */\n            var offset_y = 30;\n\n            /* last_point的least_area范围内不会产生新的t_pos */\n            if (Math.abs(point[0] - last_point[0]) < least_area &&\n                Math.abs(point[1] - last_point[1]) < least_area &&\n                counter >= 2) {\n                return t_pos;\n            }\n            if (Math.abs(point[0] - last_point[0]) >= least_area ||\n                Math.abs(point[1] - last_point[1]) >= least_area) {\n                counter = 0;\n            }\n            counter += 1;\n            /* 使real_x,real_y有数值 */\n            if (counter == 1) {\n                t_pos.left = point[0] + offset_x;\n                t_pos.top = point[1] + offset_y;\n                last_point = [point[0], point[1]];\n            }\n            /* 此处进行修正tooltip的位置 */\n            if (counter == 2) {\n                var real_x = $(dom).position().left;\n                var real_y = $(dom).position().top;\n                t_pos.left += point[0] - real_x + offset_x;\n                t_pos.top += point[1] - real_y + offset_y;\n            }\n            return t_pos;\n        },\n        formatter: function(params) {\n            return params.name + ' : ' + params.value[2] + '元/平方米';\n        }\n    },\n\n    bmap: {\n        center: [121.4693, 31.123070],\n        zoom: 11,\n       roam: true\n        \n    },\n    visualMap: {\n        //type: 'piecewise',\n        top: '5%',\n        splitNumber: 5,\n        min: 0,\n        max: 10,\n        seriesIndex: 0,\n        calculable: true,\n        inRange: {\n            color: ['green', '#eac736', '#d94e5d']\n        },\n        textStyle: {\n            color: '#000',\n            formatter: 'aaaa{value}bbbb{value2}' // 范围标签显示内容。\n        }\n\n    },\n    series: [{\n        type: 'scatter',\n        coordinateSystem: 'bmap',\n        symbolSize: 8,\n        label: {\n            normal: {\n                show: false\n            },\n            emphasis: {\n                show: false\n            }\n        },\n    }]\n});\nif (!app.inNode) {\n    // 添加百度地图插件\n    var bmap = myChart.getModel().getComponent('bmap').getBMap();\n    bmap.addControl(new BMap.MapTypeControl());\n}\n\n\nif (option && typeof option === \"object\") {\n    myChart.setOption(option, true);\n}\n\n;\n$.getJSON(uploadedDataURL, function(linedata) {\n\n    myChart.hideLoading();\n    myChart.setOption({\n\n        visualMap: {\n            max: linedata[1]\n        },\n        series: [{\n            data: linedata[0]\n        }]\n    });\n});","html":"","externalScripts":"https://api.map.baidu.com/getscript?v=3.0&ak=KOmVjPVUAey1G2E8zNhPiuQ6QiEmAwZu&services=&t=20200327103013,https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/bmap.js","updaterUID":"bd-167860219","theme":"default","layout":"","viewCount":21835,"userName":"n***1","commentCount":3,"starCount":78,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBkI4Rh6xZ.png?v=1589033365970","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"n***1"}}