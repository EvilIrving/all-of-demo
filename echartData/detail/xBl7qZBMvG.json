{"status":0,"data":{"cid":"xBl7qZBMvG","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"环形百分比","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-06-09T01:36:54.000Z","lastUpdateTime":"2021-06-09T01:36:54.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-09T01:36:54.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\nlet value = 80;\nvar timerId;\noption = {\n    backgroundColor: '#000E1A',\n    angleAxis: {\n        type: 'value',\n        min: 0,\n        max: 100,\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n        splitLine: {\n            show: false,\n        },\n        axisLabel: {\n            show: false,\n        },\n    },\n    radiusAxis: {\n        type: 'category',\n        data: ['其他', '资源加工工业', '轻纺工业', '机械电子制造业'],\n        z: 100,\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n        axisLabel: {\n            show: true,\n            // margin: 20,\n            padding: 50,\n            fontSize: 10,\n            formatter: function (value, index) {\n                var list = [12, 25, 48, 60];\n                return list[index] + '%';\n            },\n            textStyle: {\n                color: '#96F5F6',\n            },\n            interval: 0,\n        },\n    },\n    polar: {\n        center: ['50%', '50%'],\n        radius: ['20%', '94.5%'],\n    },\n    tooltip: {\n        show: false,\n    },\n    series: [\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            animation: false,\n            radius: ['85.3%', '85.3%'],\n            startAngle: 0,\n            hoverAnimation: false,\n            clockWise: true,\n            itemStyle: {\n                borderWidth: 1,\n                borderColor: '#fff',\n                borderType: 'dashed',\n            },\n            label: {\n                show: false,\n            },\n            data: [0],\n            z: 1,\n        },\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            animation: false,\n            radius: ['66.5%', '66.5%'],\n            startAngle: 0,\n            hoverAnimation: false,\n            clockWise: true,\n            itemStyle: {\n                borderWidth: 1,\n                borderColor: '#fff',\n                borderType: 'dashed',\n            },\n            label: {\n                show: false,\n            },\n            data: [0],\n            z: 1,\n        },\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            animation: false,\n            radius: ['47.8%', '47.8%'],\n            startAngle: 0,\n            hoverAnimation: false,\n            clockWise: true,\n            itemStyle: {\n                borderWidth: 1,\n                borderColor: '#fff',\n                borderType: 'dashed',\n            },\n            label: {\n                show: false,\n            },\n            data: [0],\n            z: 1,\n        },\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            radius: ['29.1%', '29.1%'],\n            startAngle: 0,\n            animation: false,\n            hoverAnimation: false,\n            clockWise: true,\n            itemStyle: {\n                borderWidth: 1,\n                borderColor: '#fff',\n                borderType: 'dashed',\n            },\n            label: {\n                show: false,\n            },\n            data: [0],\n            z: 1,\n        },\n        {\n            type: 'bar',\n            barWidth: '20%',\n            data: [12, 0, 0, 0],\n            coordinateSystem: 'polar',\n            name: '其他',\n            stack: 'a',\n            roundCap: true,\n            itemStyle: {\n                color: '#CC1CAA',\n                barBorderRadius: 5,\n            },\n            z: 2,\n        },\n        {\n            type: 'bar',\n            data: [0, 25, 0, 0],\n            coordinateSystem: 'polar',\n            name: '资源加工工业',\n            stack: 'a',\n            roundCap: true,\n            itemStyle: {\n                color: '#8D67FF',\n            },\n        },\n        {\n            type: 'bar',\n            data: [0, 0, 40, 0],\n            coordinateSystem: 'polar',\n            name: '轻纺工业',\n            stack: 'a',\n            roundCap: true,\n            itemStyle: {\n                color: '#00FFFF',\n                barBorderRadius: 5,\n            },\n        },\n        {\n            type: 'bar',\n            data: [0, 0, 0, 60],\n            coordinateSystem: 'polar',\n            name: '机械电子制造业',\n            stack: 'a',\n            roundCap: true,\n            itemStyle: {\n                color: '#48DE13',\n                barBorderRadius: 5,\n            },\n        },\n        {\n            type: 'pie',\n            name: '内层细圆环',\n            radius: ['15%', '15.1%'],\n            startAngle: 0,\n            animation: false,\n            hoverAnimation: false,\n            clockWise: true,\n            itemStyle: {\n                borderWidth: 1,\n                borderColor: '#FF8E89',\n                // borderType: 'dashed',\n            },\n            label: {\n                show: false,\n            },\n            data: [0],\n            z: 1,\n        },\n        {\n            name: 'ring5', //紫点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.15;\n                let point = getCirlPoint(x0, y0, r, 90 + angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 8,\n                    },\n                    style: {\n                        stroke: '#FF8E89', //粉\n                        fill: '#FF8E89',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n    ],\n};\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\n\nfunction draw() {\n    angle = angle + 3;\n    myChart.setOption(option, true);\n    //window.requestAnimationFrame(draw);\n}\nif (timerId) {\n    clearInterval(timerId);\n}\ntimerId = setInterval(function () {\n    //用setInterval做动画感觉有问题\n    draw();\n}, 30);\n","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":0,"userName":"S***l","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBl7qZBMvG.png?v=1623202614293","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-bar","series-custom","series-pie","tooltip"],"customTags":[],"updaterUserName":"S***l"}}