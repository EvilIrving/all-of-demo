{"status":0,"data":{"cid":"xSJu1CVV47","authorUid":"bd-3959597918","authorUserName":"风***落","title":"图表联动","description":"点击左边右边图表数据刷新","latestVersion":2,"alwaysLatest":1,"createTime":"2018-07-24T05:49:19.000Z","lastUpdateTime":"2021-12-04T08:38:00.000Z","auth":2,"uid":"bd-3959597918","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.9.0","versionCreateTime":"2021-12-04T08:38:01.000Z","code":"   var data = [143, 125, 170, 175, 110, 80, 115, 70, 60];\r\n        var data2 = [110, 90, 50, 15, 20, 25, 5, 10, 8];\r\n         var data3 = [9, 90, 50, 15, 20, 25, 5, 10, 8];\r\n        var dataCategory = [2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016];\r\n        var pieData1 = [335, 310, 234, 135, 548];\r\n        var pieData2 = [335, 0, 234, 548];\r\n          var pieData3 = [1, 310, 234, 548];\r\n        var pieDataCategory1 = [\"住宅房屋\", \"厂房及建筑物\", \"商业及服务用房屋\", \"办公用房屋\", \"其他\"];\r\n        var pieDataCategory2 = [\"科研、教育和医疗用房屋\", \"仓库\", \"文化、体育和娱乐用房屋\", \"其他未列明的房屋建筑物\"];\r\n        var chart = echarts.init($(\"#chart-panel\")[0]);\r\n        var option = {\r\n            title: [\r\n                {\r\n                    text: '资源目录',\r\n                    textStyle: {\r\n                        color: '#0094ff',\r\n                        fontSize: '40'\r\n                    },\r\n                    top: '30',\r\n                    left: '70'\r\n                }\r\n            ],\r\n\r\n            legend: [\r\n                {\r\n                    orient: 'horizontal',\r\n                    icon: \"rect\",\r\n                    textStyle: { color: \"#ccc\" },\r\n                    data: pieDataCategory1,\r\n                    bottom: 80,\r\n                    left: \"23%\",\r\n                    width: 300,\r\n                    height: 400,\r\n                    padding: 20,\r\n                    backgroundColor: 'rgba(255,255,255,0.1)'\r\n                }, {\r\n                    orient: 'horizontal',\r\n                    icon: \"rect\",\r\n                    textStyle: { color: \"#ccc\" },\r\n                    data: pieDataCategory2,\r\n                    bottom: 80,\r\n                    width: 300,\r\n                    padding: 20,\r\n                    height: 400,\r\n                    left: \"65%\",\r\n                    backgroundColor: 'rgba(255,255,255,0.1)'\r\n                }\r\n            ],\r\n            series: [\r\n                {\r\n                    name: '饼图1',\r\n                    type: 'pie',\r\n                    radius: '40%',\r\n                    center: ['30%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            rData.push({ value: pieData1[i], name: pieDataCategory1[i], selected: true })\r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n                        normal: {\r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\"\r\n                            },\r\n                            formatter: \"{d}%\\n{b}\"\r\n                        }\r\n                    },\r\n                    animationDelay: 400,\r\n                },\r\n                {\r\n                    name: '饼图2',\r\n                    type: 'pie',\r\n                    radius: '25%',\r\n                    center: ['70%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            console.log(pieData3[i])\r\n                            if(pieData3[i]==0)\r\n                            {\r\n                                \r\n                                rData.push({ value: pieData3[i], name: pieDataCategory2[i], lable:{show:false},labelLine:{show:false}})\r\n                            }\r\n                            else{\r\n                                rData.push({ value: pieData3[i], name: pieDataCategory2[i], selected: true })\r\n                            }\r\n                            \r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n                        normal: {\r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\",\r\n                            },\r\n                            formatter: \"{d}%\\n{b}\"\r\n                        }\r\n                    },\r\n                    animationDelay: 1000,\r\n                }\r\n            ]\r\n        };\r\n         chart.setOption(option);\r\n        //点击事件\r\n        chart.on('click', function (params) {\r\n           console.log(params)\r\n                     chart.setOption(getOption(data));\r\n        });\r\nvar now=1\r\n          \r\n          // 设置data到option中\r\n    function getOption( data) {\r\n        if(now==1)\r\n        {\r\n            now=2\r\n             var option = {\r\n\r\n            series :  [\r\n                {\r\n                    name: '饼图1',\r\n                    type: 'pie',\r\n                    radius: '40%',\r\n                    center: ['30%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            rData.push({ value: pieData1[i], name: pieDataCategory1[i], selected: true })\r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n                        normal: {\r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\"\r\n                            },\r\n                            formatter: \"{d}%\\n{b}\"\r\n                        }\r\n                    },\r\n                    animationDelay: 400,\r\n                },\r\n                {\r\n                    name: '饼图2',\r\n                    type: 'pie',\r\n                    radius: '25%',\r\n                    center: ['70%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                       for (var i = 0; i < data.length; i++) {\r\n                            console.log(pieData3[i])\r\n                            if(pieData3[i]==0)\r\n                            {\r\n                                \r\n                                rData.push({ value: pieData3[i], name: pieDataCategory2[i], lable:{show:false},labelLine:{show:false}})\r\n                            }\r\n                            else{\r\n                                rData.push({ value: pieData3[i], name: pieDataCategory2[i], selected: true })\r\n                            }\r\n                            \r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n                        normal: {\r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\",\r\n                            },\r\n                            formatter: \"{d}%\\n{b}\"\r\n                        }\r\n                    },\r\n                    animationDelay: 1000,\r\n                }\r\n            ]\r\n        };\r\n        }\r\n        else{\r\n            now=1\r\n             var option = {\r\n\r\n            series :  [\r\n                {\r\n                    name: '饼图1',\r\n                    type: 'pie',\r\n                    radius: '40%',\r\n                    center: ['30%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            rData.push({ value: pieData1[i], name: pieDataCategory1[i], selected: true })\r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n              \r\n                        normal: {\r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\"\r\n                            },\r\n                            formatter: \"{d}%\\n{b}\"\r\n                        }\r\n                    },\r\n                    animationDelay: 400,\r\n                },\r\n                {\r\n                    name: '饼图2',\r\n                    type: 'pie',\r\n                    radius: '25%',\r\n                    center: ['70%', '40%'],\r\n                    data: (function () {\r\n                        var rData = [];\r\n                       for (var i = 0; i < data.length; i++) {\r\n                            console.log( pieData2[i])\r\n                            if(pieData2[i]==0)\r\n                            {\r\n                               \r\n                                rData.push({ value: pieData2[i], name: pieDataCategory2[i],  label: {\r\n                        normal: {\r\n                                \r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\",\r\n                            },\r\n                            formatter: \"\"\r\n                        }\r\n                    },labelLine:{show:false},show:false})\r\n                            }\r\n                            else{\r\n                                rData.push({ value: pieData2[i], name: pieDataCategory2[i], selected: true })\r\n                            }\r\n                            \r\n                        }\r\n                        return rData;\r\n                    })(),\r\n                    label: {\r\n                        normal: {\r\n                                \r\n                            textStyle: {\r\n                                fontSize: 20,\r\n                                color: \"white\",\r\n                            },\r\n                            formatter: \"1111\"\r\n                        }\r\n                    },\r\n                    animationDelay: 1000,\r\n                }\r\n            ]\r\n        };\r\n        }\r\n       \r\n        return option;\r\n    }","html":"","externalScripts":"","updaterUID":"bd-3959597918","theme":"","layout":"","viewCount":183,"userName":"风***落","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSJu1CVV47.png?v=1638607081093","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title"],"customTags":[],"updaterUserName":"风***落"}}