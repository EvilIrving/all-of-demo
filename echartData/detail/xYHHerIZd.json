{"status":0,"data":{"cid":"xYHHerIZd","authorUid":"bd-2384254881","authorUserName":"y***g","title":"custom实现立体柱状图","description":"解决了多个系列无法使用pictorialBar无法定位的问题","latestVersion":1,"alwaysLatest":1,"createTime":"2020-02-26T08:41:41.000Z","lastUpdateTime":"2020-02-26T08:41:41.000Z","auth":2,"uid":"bd-2384254881","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-26T08:41:41.000Z","code":"var colors = [{\n    type: 'linear',\n    x: 0, x2: 1, y: 0, y2: 0,\n    colorStops: [{\n        offset: 0,\n        color: '#27f7fa'\n    }, {\n        offset: 0.5,\n        color: '#27f7fa'\n    }, {\n        offset: 0.5,\n        color: '#23c3e2dd'\n    }, {\n        offset: 1,\n        color: '#23c3e2dd'\n    }]\n}, {\n    type: 'linear',\n    x: 0, x2: 1, y: 0, y2: 0,\n    colorStops: [{\n        offset: 0,\n        color: '#7153d3aa'\n    }, {\n        offset: 0.5,\n        color: '#7153d3aa'\n    }, {\n        offset: 0.5,\n        color: '#352a6b'\n    }, {\n        offset: 1,\n        color: '#352a6b'\n    }]\n}];\n\n\nvar barWidth = 30;\n\nvar renderItem = function(params , api){\n              \n    var yValue = api.value(1);\n    var start = api.coord([api.value(0), yValue]);\n    var size = api.size([api.value(1) - api.value(0), yValue]);\n    var style = api.style();\n    // 可以建泰定义\n    var currentSeriesIndices = api.currentSeriesIndices();\n    var barLayout = api.barLayout({\n        barGap: '30%', barCategoryGap: '20%', count: currentSeriesIndices.length\n    });\n\n    var width = size[0] * 0.3;\n    var x = start[0]  - width / 2 + barLayout[params.seriesIndex].offsetCenter;\n    var y = start[1];\n    var rectShape = {\n        x: x,\n        y: y,\n        width: width,\n        height: size[1]\n    };\n    \n    var lineWidth = 2;\n    \n    var upPoints = [\n        [x + lineWidth , start[1]],\n        [x + width / 2  , y - width * 0.3 + lineWidth ],\n        [x + width - lineWidth , y],\n        [x + width / 2 , y + width * 0.3 - lineWidth]\n    ];\n    \n    \n    var bottomPoints = [\n        [x  , size[1] + y],\n        [x + width / 2  ,size[1] + y - width * 0.3  ],\n        [x + width  , size[1] + y],\n        [x + width / 2 , size[1] + y + width * 0.3]\n        \n    ];\n    \n    var group = {\n        type : 'group',\n        children : [{\n            // 顶部\n            z2: 3,\n            type :'polygon',\n            shape : {\n                points : upPoints\n            },\n            style:{\n                fill : style.fill.colorStops[2].color  ,\n                stroke:style.fill.colorStops[0].color,\n                lineWidth : lineWidth,\n            }\n        },{\n            z2: 2,\n            type: 'rect',\n            shape:rectShape,\n            style: style\n        },{\n            // 顶部\n            z2: 3,\n            type :'polygon',\n            shape : {\n                points : bottomPoints\n            },\n            style:style\n        }],\n    };\n    \n\n    return group; \n  \n}\n\n\n\n\noption = {\n    title: {\n        text: 'Awesome Chart'\n    },\n    xAxis: {\n        data: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    yAxis: {},\n    series: [{\n        type : 'custom',\n        itemStyle:{\n            normal:{\n                color:colors[0] ,\n            }\n        },\n        data:[220, 182, 191, 234, 290, 330, 310],\n        renderItem : renderItem\n    },{\n        type : 'custom',\n        itemStyle:{\n            normal:{\n                color:colors[1],\n            }\n        },\n        data:[220, 182, 191, 234, 290, 330, 310],\n        renderItem:renderItem\n    }]\n      \n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","html":"","externalScripts":"","updaterUID":"bd-2384254881","theme":"","layout":"","viewCount":113,"userName":"y***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xYHHerIZd.png?v=1582706501685","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","title"],"customTags":[],"updaterUserName":"y***g"}}