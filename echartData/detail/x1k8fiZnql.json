{"status":0,"data":{"cid":"x1k8fiZnql","authorUid":"bd-3244135873","authorUserName":"金***1","title":"时间轴","description":"模拟视频时间轴，自动播放，可定位播放时间","latestVersion":7,"alwaysLatest":0,"createTime":"2021-11-05T01:25:03.000Z","lastUpdateTime":"2021-11-09T01:11:24.000Z","auth":2,"uid":"bd-3244135873","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-09T01:11:24.000Z","code":"function formatSeconds(value) {\n    var secondTime = parseInt(value); // 秒\n    var minuteTime = 0; // 分\n    var hourTime = 0; // 小时\n    if (secondTime >= 60) {\n        minuteTime = parseInt(secondTime / 60);\n        secondTime = parseInt(secondTime % 60);\n        if (minuteTime >= 60) {\n            hourTime = parseInt(minuteTime / 60);\n            minuteTime = parseInt(minuteTime % 60);\n        }\n    }\n    var result = '' + (parseInt(secondTime) < 10 ? '0' + parseInt(secondTime) : parseInt(secondTime));\n    result = '' + (parseInt(minuteTime) < 10 ? '0' + parseInt(minuteTime) : parseInt(minuteTime)) + ':' + result;\n    result = '' + (parseInt(hourTime) < 10 ? '0' + parseInt(hourTime) : parseInt(hourTime)) + ':' + result;\n    return result;\n}\n\nfunction getData() {\n    let times = 24 * 60 * 60; // 24小时转化为秒\n    let categoryData = [];\n    let values = [];\n    for (let i = 0; i < times; i++) {\n        categoryData.push(formatSeconds(i));\n        values.push(2); // 固定值\n    }\n    return {\n        categoryData: categoryData,\n        values: values,\n    };\n}\nconst chartsData = getData();\nmyChart.setOption({\n    // animation: false,\n    /*tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'cross',\n        },\n        showContent: false,\n    },*/\n    axisPointer: {\n        link: [\n            {\n                xAxisIndex: 'all',\n            },\n        ],\n        label: {\n            backgroundColor: '#777',\n        },\n        lineStyle: {\n            width: 1,\n            color: 'blue',\n            type: 'solid',\n        },\n    },\n    toolbox: {\n        show: false,\n    },\n    grid: {\n        top: '40%',\n        left: '10%',\n        right: '8%',\n        height: '20',\n    },\n    xAxis: {\n        type: 'category',\n        scale: true,\n        data: chartsData.categoryData,\n        boundaryGap: false,\n        position: 'top',\n        axisPointer: {\n            show: true,\n            triggerTooltip: false,\n        },\n    },\n    yAxis: {\n        scale: true,\n        axisLabel: { show: false },\n        axisLine: { show: false },\n        axisTick: { show: false },\n        splitLine: { show: false },\n        axisPointer: {\n            show: false,\n        },\n    },\n    dataZoom: [\n        {\n            type: 'inside',\n            start: 0,\n            end: 1,\n            minValueSpan: 60*5,\n        },\n    ],\n    brush: {\n        xAxisIndex: 'all',\n        brushLink: 'all',\n        brushType: 'lineX',\n        transformable: false,\n        brushStyle: {\n            borderWidth: 2,\n            color: 'red',\n            borderColor: 'red',\n        },\n        throttleType: 'debounce',\n        throttleDelay: 'debounce',\n        /*outOfBrush: {\n                colorAlpha: 1\n            }*/\n    },\n    series: [\n        {\n            name: 'time',\n            type: 'line',\n            data: chartsData.values,\n            symbol: 'path://M367.0528 7.84896h291.48672v1009.95072H367.0528V7.84896z',\n            smooth: true,\n            symbolSize: [4,15],\n            lineStyle: {\n                color: '#5B9FF1',\n                width: 15,\n            },\n             itemStyle: {\n                    normal: {\n                        color: 'transparent',\n                        borderColor: 'transparent', //拐点边框颜色\n                    },\n                },\n            emphasis: {\n                scale: false,\n                lineStyle: {\n                    color: '#5B9FF1',\n                    width: 15,\n                },\n            },\n        },\n    ],\n});\n\nlet len = 0;\nlet timeinterval = null;\nlet startValue = myChart.getModel().option.dataZoom[0].startValue;\nlet endValue = myChart.getModel().option.dataZoom[0].endValue;\nfunction chartsSetInterval() {\n    timeinterval = setInterval(function () {\n        if (len === chartsData.categoryData.length) {\n            return false;\n        }\n        // 鼠标到了最后的位置\n        if (len === endValue) {\n            myChart.dispatchAction({\n                type: 'dataZoom',\n                // 可选，dataZoom 组件的 index，多个 dataZoom 组件时有用，默认为 0\n                dataZoomIndex: 0,\n                // 开始位置的数值\n                startValue: endValue,\n                // 结束位置的数值\n                endValue: endValue + (endValue - startValue),\n            });\n        }\n        if (!mouseFlag) {\n            myChart.dispatchAction({\n                type: 'brush',\n                areas: [\n                    {\n                        brushType: 'lineX',\n                        coordRange: [len, len],\n                        xAxisIndex: 0,\n                    },\n                ],\n            });\n        }\n        len++;\n    }, 1000);\n}\n\nchartsSetInterval();\n\nmyChart.on('click', function (params) {\n    clearInterval(timeinterval);\n    timeinterval = null;\n    //debugger\n    console.log(params);\n    myChart.dispatchAction({\n        type: 'brush',\n        areas: [\n            {\n                brushType: 'lineX',\n                coordRange: [params.dataIndex, params.dataIndex],\n                xAxisIndex: 0,\n            },\n        ],\n    });\n    len = params.dataIndex;\n    mouseFlag = false;\n    chartsSetInterval();\n    \n});\n\nmyChart.on('dataZoom', function (params) {\n    mouseFlag = false;\n    startValue = myChart.getModel().option.dataZoom[0].startValue;\n    endValue = myChart.getModel().option.dataZoom[0].endValue;\n    //console.log(startValue, endValue)\n});\n\nlet mouseFlag = false;\n\nmyChart.on('mousemove', function (params) {\n    mouseFlag = true;\n});\n\nmyChart.on('mouseout', function (params) {\n    mouseFlag = false;\n});\n","html":"","externalScripts":"","updaterUID":"bd-3244135873","theme":"","layout":"","viewCount":0,"userName":"金***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1k8fiZnql.png?v=1636420284121","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-line","toolbox","tooltip"],"customTags":[],"updaterUserName":"金***1"}}