{"status":0,"data":{"cid":"xHkS1tOlXX","authorUid":"bd-2889079406","authorUserName":"六***论","title":"医院运营构成图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2018-07-09T05:55:41.000Z","lastUpdateTime":"2018-07-09T05:55:41.000Z","auth":2,"uid":"bd-2889079406","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.1.0","versionCreateTime":"2018-07-09T06:30:16.000Z","code":" var colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];\n var bgColor = '#FFF';\n\n var itemStyle = {\n     star5: {\n         color: colors[0]\n     },\n     star4: {\n         color: colors[1]\n     },\n     star3: {\n         color: colors[2]\n     },\n     star2: {\n         color: colors[3]\n     }\n };\n\n var data = [{\n     name: '门诊',\n     itemStyle: {\n         normal: {\n             color: colors[1]\n         }\n     },\n     children: [{\n         name: '五官科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '眼科'\n             }, {\n                 name: '鼻科'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '耳科'\n             }]\n         }, {\n             name: '3☆',\n             children: [{\n                 name: '口腔科'\n             }]\n         }]\n     }, {\n         name: '内科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '心脏内科'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '肺科'\n             }, {\n                 name: '肝科'\n             }]\n         }, {\n             name: '3☆',\n             children: [{\n                 name: '肠胃科'\n             }]\n         }]\n     }]\n }, {\n     name: '住院',\n     itemStyle: {\n         color: colors[2]\n     },\n     children: [{\n         name: '骨科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '骨折'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '骨质酥松'\n             }, {\n                 name: '粉碎性骨折'\n             }]\n         }, {\n             name: '3☆',\n             children: [{\n                 name: '截肢'\n             }]\n         }]\n     }, {\n         name: '外科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '金创处理'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '断指再造'\n             }, {\n                 name: '外部肿瘤处理'\n             }, {\n                 name: '感染处理',\n             }]\n         }, {\n             name: '3☆',\n             children: [{\n                 name: '断指缝合处理'\n             }]\n         }]\n     }, {\n         name: '心内科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '冠心病'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '中风'\n             }, {\n                 name: '脑血栓'\n             }]\n         }, {\n             name: '3☆',\n         }, {\n             name: '2☆',\n             children: [{\n                 name: '动脉粥样硬化'\n             }]\n         }]\n     }, {\n         name: '胸外科',\n         children: [{\n             name: '4☆',\n             children: [{\n                 name: '胸板结'\n             }, {\n                 name: '胸腔手术'\n             }, {\n                 name: '开胸术'\n             }]\n         }]\n     }, {\n         name: '肛肠科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '痔疮'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '肛瘘'\n             }, {\n                 name: '脱肛'\n             }]\n         }, {\n             name: '3☆',\n             children: [{\n                 name: '肛裂'\n             }]\n         }]\n     }, {\n         name: '牙科',\n         children: [{\n             name: '4☆',\n             children: [{\n                 name: '拔智齿'\n             }]\n         }]\n     }, {\n         name: '美容科',\n         children: [{\n             name: '5☆',\n             children: [{\n                 name: '整形'\n             }]\n         }, {\n             name: '4☆',\n             children: [{\n                 name: '祛痘'\n             }]\n         }]\n     }]\n }];\n\n for (var j = 0; j < data.length; ++j) {\n     var level1 = data[j].children;\n     for (var i = 0; i < level1.length; ++i) {\n         var block = level1[i].children;\n         var bookScore = [];\n         var bookScoreId;\n         for (var star = 0; star < block.length; ++star) {\n             var style = (function(name) {\n                 switch (name) {\n                     case '5☆':\n                         bookScoreId = 0;\n                         return itemStyle.star5;\n                     case '4☆':\n                         bookScoreId = 1;\n                         return itemStyle.star4;\n                     case '3☆':\n                         bookScoreId = 2;\n                         return itemStyle.star3;\n                     case '2☆':\n                         bookScoreId = 3;\n                         return itemStyle.star2;\n                 }\n             })(block[star].name);\n\n             block[star].label = {\n                 color: style.color,\n                 downplay: {\n                     opacity: 0.5\n                 }\n             };\n\n             if (block[star].children) {\n                 style = {\n                     opacity: 1,\n                     color: style.color\n                 };\n                 block[star].children.forEach(function(book) {\n                     book.value = 1;\n                     book.itemStyle = style;\n\n                     book.label = {\n                         color: style.color\n                     };\n\n                     var value = 1;\n                     if (bookScoreId === 0 || bookScoreId === 3) {\n                         value = 5;\n                     }\n\n                     if (bookScore[bookScoreId]) {\n                         bookScore[bookScoreId].value += value;\n                     } else {\n                         bookScore[bookScoreId] = {\n                             color: colors[bookScoreId],\n                             value: value\n                         };\n                     }\n                 });\n             }\n         }\n\n         level1[i].itemStyle = {\n             color: data[j].itemStyle.color\n         };\n     }\n }\n\n option = {\n     backgroundColor: bgColor,\n     color: colors,\n     series: [{\n         type: 'sunburst',\n         center: ['50%', '48%'],\n         data: data,\n         sort: function(a, b) {\n             if (a.depth === 1) {\n                 return b.getValue() - a.getValue();\n             } else {\n                 return a.dataIndex - b.dataIndex;\n             }\n         },\n         label: {\n             rotate: 'radial',\n             color: bgColor\n         },\n         itemStyle: {\n             borderColor: bgColor,\n             borderWidth: 2\n         },\n         levels: [{}, {\n             r0: 0,\n             r: 40,\n             label: {\n                 rotate: 0\n             }\n         }, {\n             r0: 40,\n             r: 105\n         }, {\n             r0: 115,\n             r: 140,\n             itemStyle: {\n                 shadowBlur: 2,\n                 shadowColor: colors[2],\n                 color: 'transparent'\n             },\n             label: {\n                 rotate: 'tangential',\n                 fontSize: 10,\n                 color: colors[0]\n             }\n         }, {\n             r0: 140,\n             r: 145,\n             itemStyle: {\n                 //     shadowBlur: 80,\n                 shadowColor: colors[0]\n             },\n             label: {\n                 position: 'outside',\n                 //        textShadowBlur: 5,\n                 textShadowColor: '#333',\n             },\n             downplay: {\n                 label: {\n                     opacity: 1\n                 }\n             }\n         }]\n     }]\n };","html":"","externalScripts":"","updaterUID":"bd-2889079406","theme":"","layout":"","viewCount":224,"userName":"六***论","commentCount":1,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHkS1tOlXX.png?v=1531117816504","isCustomThumbnail":0,"builtinTags":["category-work","series-sunburst"],"customTags":[],"updaterUserName":"六***论"}}