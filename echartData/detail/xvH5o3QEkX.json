{"status":0,"data":{"cid":"xvH5o3QEkX","authorUid":"obd-olXfj4pUZZ8jycolmlNWbeF0EpXmd0b","authorUserName":"塵***","title":"北京朝阳区地图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-04T03:57:31.000Z","lastUpdateTime":"2020-12-04T03:57:31.000Z","auth":2,"uid":"obd-olXfj4pUZZ8jycolmlNWbeF0EpXmd0b","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-04T03:57:59.000Z","code":"var imgUrl = \"/asset/get/s/data-1597998044111-QKRPvTkC7.jpeg\";\n\nvar uploadedDataURL = \"/asset/get/s/data-1597996859368-p2XZDxby3.json\";\n//地理位置信息\nvar geoCoordMap = {\n    \"A城\": [117.760945, 39.000893],\n    \"B城\": [117.702878, 39.024217],\n    \"C城\": [117.671833, 39.04137],\n    \"D城\": [117.674276, 39.035316],\n    \"E城\": [117.709346, 39.034083],\n    'F城': [117.718545, 39.042154],\n    'G城': [117.719695, 39.033411],\n    'H城': [117.703022, 39.02276],\n    \"I城\": [117.763101, 39.023769],\n    'J城': [117.70834, 38.995173],\n\n};\nvar geoCoordData = [{\n        name: 'A城',\n        value: \"35\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'B城',\n        value: \"60\",\n        info: {\n            img: imgUrl\n        }\n    },\n\n    {\n        name: 'C城',\n        value: \"25\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'E城',\n        value: \"45\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'D城',\n        value: \"55\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'F城',\n        value: \"10\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'G城',\n        value: \"20\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'H城',\n        value: \"30\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'I城',\n        value: \"40\",\n        info: {\n            img: imgUrl\n        }\n    },\n    {\n        name: 'J城',\n        value: \"50\",\n        info: {\n            img: imgUrl\n        }\n    }\n];\nvar convertData = function(data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value),\n                info: data[i].info || {}\n            });\n        }\n    }\n    return res;\n};\nvar option = {\n    backgroundColor: '#020933',\n    title: {\n        text: '北京朝阳区地图',\n        top: 20,\n        subtext: '',\n        sublink: '',\n        left: 'center',\n        textStyle: {\n            color: '#ccc'\n        }\n    },\n    tooltip: {\n        trigger: 'item',\n        triggerOn: 'click',\n        showDelay: 0, //浮层显示的延迟\n        transitionDuration: 0.2, // 提示框浮层的移动动画过渡时间\n        enterable: true,\n        formatter: function(params) {\n            console.log(params)\n            if (params.data) {\n                let info = params.data.info || {};\n                let html = `\n          <div>\n            <img src=\"${info.img}\" alt=\"\">\n            <div>\n            <span>名字：</span>\n            <span>${params.name}</span>\n</div>\n<button onclick=\"lookVideoGo('${params.name}')\">查看</button>\n\t\t\t\t\t</div>\n        `;\n                return html\n            } else {\n                return\n            }\n\n\n\n        },\n        // position: [10, 10],\n        backgroundColor: \"#fff\"\n    },\n    visualMap: { //图例值控制\n        min: 0,\n        max: 100,\n        calculable: true,\n        show: true,\n        color: ['#f44336', '#fc9700', '#ffde00', '#ffde00', '#00eaff'],\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    //地理坐标\n    geo: {\n        map: 'tjbh',\n        type: \"map\",\n        aspectScale: 0.75, //长宽比\n        zoom: 1.1,\n        roam: false,\n        itemStyle: {\n            normal: {\n                areaColor: '#013C62',\n                shadowColor: '#182f68',\n                shadowOffsetX: 0,\n                shadowOffsetY: 25,\n            },\n            emphasis: {\n                areaColor: '#2AB8FF',\n                borderWidth: 0,\n                color: 'green',\n                label: {\n                    show: false\n                }\n            }\n        }\n    },\n    series: [{\n            map: 'tjbh', //使用\n            type: 'map',\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                },\n                emphasis: {\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n\n            itemStyle: {\n                normal: {\n                    borderColor: '#2ab8ff',\n                    borderWidth: 1.5,\n                    areaColor: '#12235c'\n                },\n                emphasis: {\n                    areaColor: '#2AB8FF',\n                    borderWidth: 0,\n                    color: 'green'\n                }\n            },\n            zoom: 1.1,\n            roam: true,\n\n        },\n\n\n        //标记 图形 原点 scatter点 effectScatter涟漪特效\n        {\n\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbolSize: 5,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                    color: '#fff'\n                }\n            },\n            zlevel: 1,\n            data: convertData(geoCoordData)\n        },\n        //标记图形 大头针\n        {\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin', //标记的图形 图片参考：https://echarts.apache.org/zh/option.html#series-scatter.symbol\n            symbolSize: [40, 40],\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    },\n                    formatter(value) {\n                        return value.data.value[2]\n                    }\n                }\n            },\n            hoverAnimation: true,\n            itemStyle: {\n                normal: {\n                    color: '#D8BC37', //标志颜色\n                    // shadowBlur: 10,\n                    // shadowColor: '#333'\n                }\n            },\n            zlevel: 1,\n            data: convertData(geoCoordData)\n        }\n    ]\n};\nvar lookVideoGo = function(name) {\n    console.log(name)\n}\nvar getData = function() {\n    $.get(uploadedDataURL, function(geojson) {\n        echarts.registerMap('tjbh', geojson);\n        myChart.setOption(option);\n    })\n}\n\ngetData()\n\nmyChart.on('georoam', function(params) {\n    var option = myChart.getOption(); //获得option对象\n    if (params.zoom != null && params.zoom != undefined) { //捕捉到缩放时\n        option.geo[0].zoom = option.series[0].zoom; //下层geo的缩放等级跟着上层的geo一起改变\n        option.geo[0].center = option.series[0].center; //下层的geo的中心位置随着上层geo一起改变\n    } else { //捕捉到拖曳时\n        option.geo[0].center = option.series[0].center; //下层的geo的中心位置随着上层geo一起改变\n    }\n    myChart.dispatchAction({\n        type: 'restore'\n    })\n    myChart.setOption(option); //设置option\n});","html":"","externalScripts":"","updaterUID":"obd-olXfj4pUZZ8jycolmlNWbeF0EpXmd0b","theme":"","layout":"","viewCount":349,"userName":"塵***","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xvH5o3QEkX.png?v=1607054279343","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","title","tooltip","visualMap"],"customTags":["朝阳"],"updaterUserName":"塵***"}}