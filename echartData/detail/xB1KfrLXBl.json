{"status":0,"data":{"cid":"xB1KfrLXBl","authorUid":"bd-3929898319","authorUserName":"潇***扬","title":"青岛地图下钻","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2016-12-30T03:31:29.000Z","lastUpdateTime":"2016-12-30T03:31:29.000Z","auth":2,"uid":"bd-3929898319","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.3.2","versionCreateTime":"2016-12-30T03:31:29.000Z","code":"var pingdu = \"/asset/get/s/data-1483067894283-HJ0xGUXrg.json\";//pingdu\r\n\r\nvar laixi = \"/asset/get/s/data-1483067888252-B1ugMUXrl.json\";//laixi\r\n\r\nvar jimo = \"/asset/get/s/data-1483067881660-BJfxf8Xrg.json\";//jimo\r\n\r\nvar jiaozhou = \"/asset/get/s/data-1483067768021-BJlYWI7Hl.json\";//jiaozhou\r\n\r\nvar laoshan = \"/asset/get/s/data-1483067759307-HkwuZI7He.json\";//laoshan\r\n\r\nvar huangdao = \"/asset/get/s/data-1483067748020-rJhwZLmrl.json\";//huangdao\r\n\r\nvar chengyang = \"/asset/get/s/data-1483067726478-HyIUZ8QHe.json\";//chengyang\r\n\r\nvar licang = \"/asset/get/s/data-1483067720288-S1lLZ8mSl.json\";//licang\r\n\r\nvar shinan = \"/asset/get/s/data-1483067708437-H1VSZLQrg.json\";//shinan\r\n\r\nvar shibei = \"/asset/get/s/data-1483067702527-BkJBZ87rx.json\";//shibei\r\n\r\nvar qingdao = \"/asset/get/s/data-1483067692839-rkBEZ87rl.json\";//qingdao\r\n\r\n\r\n\r\nvar chart = myChart;\r\n\r\n\r\nvar cityProper = {\r\n    '城阳区': chengyang,\r\n    '崂山区': laoshan,\r\n    '李沧区': licang,\r\n    '市北区': shibei,\r\n    '市南区': shinan,\r\n    '黄岛区': huangdao,\r\n    '胶州市': jiaozhou,\r\n    '即墨市': jimo,\r\n    '莱西市': laixi,\r\n    '平度市': pingdu\r\n};\r\nvar data = [{\r\n    name: '城阳区'\r\n}, {\r\n    name: '崂山区'\r\n}, {\r\n    name: '李沧区'\r\n}, {\r\n    name: '市北区'\r\n}, {\r\n    name: '市南区'\r\n}, {\r\n    name: '黄岛区'\r\n}, {\r\n    name: '胶州市'\r\n}, {\r\n    name: '即墨市'\r\n}, {\r\n    name: '莱西市'\r\n}, {\r\n    name: '平度市'\r\n}];\r\nfor (var i = 0; i < data.length; i++) {\r\n    data[i].value = Math.round(Math.random() * 10000);\r\n}\r\n\r\n$.get(qingdao, function(getJSON) {\r\n    echarts.registerMap(\"青岛\",getJSON)\r\n        option = {\r\n            tooltip: {\r\n                trigger: 'item'\r\n            },\r\n            toolbox: {\r\n                show: true,\r\n                orient: 'vertical',\r\n                x: 'right',\r\n                y: 'center',\r\n                feature: {\r\n                    mark: {\r\n                        show: true\r\n                    },\r\n                    dataView: {\r\n                        show: true,\r\n                        readOnly: false\r\n                    }\r\n                }\r\n            },\r\n            series: [{\r\n                tooltip: {\r\n                    trigger: 'item'\r\n                },\r\n                name: '选择器',\r\n                type: 'map',\r\n                mapType: '青岛',\r\n                left: 'left',\r\n                top: 'top',\r\n                width: '30%',\r\n                roam: true,\r\n                selectedMode: 'single',\r\n                itemStyle: {\r\n                    normal: {\r\n                        label: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    emphasis: {\r\n                        label: {\r\n                            show: true\r\n                        }\r\n                    }\r\n                },\r\n                data: data\r\n            }],\r\n            animation: false\r\n        };\r\n\r\n\r\n        chart.setOption(option, true);\r\n        \r\n        chart.on(\"click\", chartClick);\r\n    })\r\n    //var ecConfig = echarts.config;\r\nfunction chartClick(param)\r\n{ \r\n    //var selected = param.selected;\r\n    //console.log(option.series[0].data[1].selected);\r\n    var selectedProvince = param.name;\r\n    if (!cityProper[selectedProvince]) {\r\n        option.series.splice(1);\r\n        option.legend = null;\r\n        option.visualMap = null;\r\n        chart.setOption(option, true);\r\n        return;\r\n    }\r\n    console.log(cityProper[selectedProvince]);\r\n    $.get(cityProper[selectedProvince], function(geojson) {\r\n        echarts.registerMap(selectedProvince, geojson);\r\n        option.series[1] = {\r\n            name: '选择器',\r\n            type: 'map',\r\n            mapType: selectedProvince,\r\n            left: '50%',\r\n            top: 'top',\r\n            width: '30%',\r\n            roam: true,\r\n            selectedMode: 'single',\r\n            itemStyle: {\r\n                normal: {\r\n                    label: {\r\n                        show: true\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    label: {\r\n                        show: true\r\n                    }\r\n                }\r\n            },\r\n            data: data\r\n        };\r\n        option.legend = {\r\n            left: 'right',\r\n            data: ['随机数据']\r\n        };\r\n        option.visualMap = {\r\n            seriesIndex: 1,\r\n            orient: 'horizontal',\r\n            left: 'right',\r\n            min: 0,\r\n            max: 1000,\r\n            color: ['orange', 'yellow'],\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            splitNumber: 0\r\n        };\r\n        chart.setOption(option, true);\r\n    })\r\n\r\n};","html":"","externalScripts":"","updaterUID":"bd-3929898319","theme":"","layout":"","viewCount":6213,"userName":"潇***扬","commentCount":10,"starCount":7,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1KfrLXBl.png?v=1483068689439","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-map","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"潇***扬"}}