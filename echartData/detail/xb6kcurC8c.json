{"status":0,"data":{"cid":"xb6kcurC8c","authorUid":"obd-oEygZsDTLxuwmnak0OUEpb82X1KBU4e","authorUserName":"谢***4","title":"图例带图片","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-10-27T07:03:03.000Z","lastUpdateTime":"2021-11-01T08:50:29.000Z","auth":1,"uid":"obd-oEygZsDTLxuwmnak0OUEpb82X1KBU4e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-11-01T08:50:29.000Z","code":"let bgColor = '#fff';\r\nlet title = '总量';\r\nlet color = ['#69D5FE', '#FF8352', '#E271DE', '#F8456B', '#00FFFF', '#4AEAB0'];\r\nvar sportsIcon = {\r\n  a: '/asset/get/s/data-1559121268278-ozjd-lXoz.png',\r\n  b: '/asset/get/s/data-1559121263841-UC5w7mTJ9.png',\r\n  c: '/asset/get/s/data-1559121259198-sxyPSimU9.png',\r\n  d: '/asset/get/s/data-1559121254241-xj5JAIBzC.png',\r\n  e: '/asset/get/s/data-1559121249274-QxHDAdQGy.png',\r\n};\r\nlet echartData = [\r\n  {\r\n    name: '工程预警',\r\n    value: '3720',\r\n    proportion: '6.91',\r\n    image: '/asset/get/s/data-1628212428005-4Lcn5RtIF.png',\r\n    itemStyle: {\r\n      normal: {\r\n        //颜色渐变\r\n        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n          { offset: 0, color: '#7CF0FE' },\r\n          { offset: 1, color: '#5DC4FE ' },\r\n        ]),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    name: '六类对象预警',\r\n    value: '2200',\r\n    proportion: '0.23',\r\n    image: '/asset/get/s/data-1628212428005-4Lcn5RtIF.png',\r\n    itemStyle: {\r\n      normal: {\r\n        //颜色渐变\r\n        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n          { offset: 0, color: '#8FFB80' },\r\n          { offset: 1, color: '#5CCF78 ' },\r\n        ]),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    name: '合同预警',\r\n    value: '1420',\r\n    proportion: '16.7',\r\n    image: '/asset/get/s/data-1628212428005-4Lcn5RtIF.png',\r\n    itemStyle: {\r\n      normal: {\r\n        //颜色渐变\r\n        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n          { offset: 0, color: '#7ACBFD' },\r\n          { offset: 1, color: '#2D6AFF ' },\r\n        ]),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    name: '资产预警',\r\n    value: '1420',\r\n    proportion: '0.54',\r\n    image: '/asset/get/s/data-1628212428005-4Lcn5RtIF.png',\r\n    itemStyle: {\r\n      normal: {\r\n        //颜色渐变\r\n        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n          { offset: 0, color: '#88A6FD' },\r\n          { offset: 1, color: '#7D82FC' },\r\n        ]),\r\n      },\r\n    },\r\n  },\r\n  {\r\n    name: '资金预警',\r\n    value: '2920',\r\n    proportion: '0.23',\r\n    image: '/asset/get/s/data-1628212428005-4Lcn5RtIF.png',\r\n    itemStyle: {\r\n      normal: {\r\n        //颜色渐变\r\n        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\r\n          { offset: 0, color: '#FFB759' },\r\n          { offset: 1, color: '#F9687A ' },\r\n        ]),\r\n      },\r\n    },\r\n  },\r\n];\r\n\r\nlet formatNumber = function (num) {\r\n  let reg = /(?=(\\B)(\\d{3})+$)/g;\r\n  return num.toString().replace(reg, ',');\r\n};\r\nlet total = echartData.reduce((a, b) => {\r\n  return a + b.value * 1;\r\n}, 0);\r\n\r\noption = {\r\n  backgroundColor: bgColor,\r\n  color: color,\r\n  // tooltip: {\r\n  //     trigger: 'item'\r\n  // },\r\n  title: [\r\n    {\r\n      text: '{name|' + title + '}\\n{val|' + formatNumber(total) + '}',\r\n      top: 'center',\r\n      left: 'center',\r\n      textStyle: {\r\n        rich: {\r\n          name: {\r\n            fontSize: 14,\r\n            fontWeight: 'normal',\r\n            color: '#666666',\r\n            padding: [10, 0],\r\n          },\r\n          val: {\r\n            fontSize: 32,\r\n             fontWeight: 'bold',\r\n            color: '#333333',\r\n          },\r\n        },\r\n      },\r\n    },\r\n    {\r\n      text: '单位：个',\r\n      top: 20,\r\n      left: 20,\r\n      textStyle: {\r\n        fontSize: 14,\r\n        color: '#666666',\r\n        fontWeight: 400,\r\n      },\r\n    },\r\n  ],\r\n  legend: {\r\n    icon: 'circle',\r\n    orient: 'horizontal',\r\n    x: '70%',\r\n    y: 'center',\r\n    itemWidth: 8,\r\n    itemHeight: 8,\r\n    align: 'left',\r\n    textStyle: {\r\n      rich: {\r\n        a: {\r\n          width: 18,\r\n          height: 18,\r\n          lineHeight: 50,\r\n          backgroundColor: {\r\n            image: sportsIcon.a,\r\n          },\r\n          align: 'left',\r\n        },\r\n        b: {\r\n          width: 18,\r\n          height: 18,\r\n          lineHeight: 50,\r\n          backgroundColor: {\r\n            image: sportsIcon.b,\r\n          },\r\n          align: 'left',\r\n        },\r\n        c: {\r\n          width: 18,\r\n          height: 18,\r\n          lineHeight: 50,\r\n          backgroundColor: {\r\n            image: sportsIcon.c,\r\n          },\r\n          align: 'left',\r\n        },\r\n        d: {\r\n          width: 18,\r\n          height: 18,\r\n          lineHeight: 50,\r\n          backgroundColor: {\r\n            image: sportsIcon.d,\r\n          },\r\n          align: 'left',\r\n        },\r\n        e: {\r\n          width: 18,\r\n          height: 18,\r\n          lineHeight: 50,\r\n          backgroundColor: {\r\n            image: sportsIcon.e,\r\n          },\r\n          align: 'left',\r\n        },\r\n        proportionA: {\r\n          fontSize: 14,\r\n          lineHeight: 17,\r\n          color: '#fd5656',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n        },\r\n        proportionB: {\r\n          fontSize: 14,\r\n          lineHeight: 17,\r\n          color: '#fd5656',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n        },\r\n        proportionC: {\r\n          fontSize: 14,\r\n          lineHeight: 17,\r\n          color: '#fd5656',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n        },\r\n        proportionD: {\r\n          fontSize: 14,\r\n          lineHeight: 17,\r\n          color: '#fd5656',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n        },\r\n        proportionE: {\r\n          fontSize: 14,\r\n          lineHeight: 17,\r\n          color: '#8aed3e',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n        },\r\n        nameStyle: {\r\n          fontSize: 12,\r\n          lineHeight: 17,\r\n          width: 80,\r\n          color: '#A3A3AB',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n          fontWeight: 400,\r\n        },\r\n        rate: {\r\n          fontSize: 17,\r\n          lineHeight: 17,\r\n          color: '#4A4D68',\r\n          fontFamily: 'PingFangSC-Medium, PingFang SC',\r\n          fontWeight: 600,\r\n        },\r\n      },\r\n    },\r\n    formatter: function (name) {\r\n      let res = echartData.filter((v) => v.name === name);\r\n      res = res[0] || {};\r\n      console.log(res);\r\n      var str = '';\r\n      switch (res.name) {\r\n        case '工程预警':\r\n          str =\r\n            '{nameStyle|' +\r\n            res.name +\r\n            ' }' +\r\n            '{rate|' +\r\n            res.value +\r\n            '}' +\r\n            '  ' +\r\n            '{a|}' +\r\n            ' ' +\r\n            '{proportionA|' +\r\n            res.proportion +\r\n            '%}';\r\n          break;\r\n        case '六类对象预警':\r\n          str =\r\n            '{nameStyle|' +\r\n            res.name +\r\n            ' }' +\r\n            '{rate|' +\r\n            res.value +\r\n            '}' +\r\n            '  ' +\r\n            '{b|}' +\r\n            ' ' +\r\n            '{proportionB|' +\r\n            res.proportion +\r\n            '%}';\r\n          break;\r\n        case '合同预警':\r\n          str =\r\n            '{nameStyle|' +\r\n            res.name +\r\n            ' }' +\r\n            '{rate|' +\r\n            res.value +\r\n            '}' +\r\n            '  ' +\r\n            '{c|}' +\r\n            ' ' +\r\n            '{proportionC|' +\r\n            res.proportion +\r\n            '%}';\r\n          break;\r\n        case '资产预警':\r\n          str =\r\n            '{nameStyle|' +\r\n            res.name +\r\n            ' }' +\r\n            '{rate|' +\r\n            res.value +\r\n            '}' +\r\n            '  ' +\r\n            '{d|}' +\r\n            ' ' +\r\n            '{proportionD|' +\r\n            res.proportion +\r\n            '%}';\r\n          break;\r\n        case '资金预警':\r\n          str =\r\n            '{nameStyle|' +\r\n            res.name +\r\n            ' }' +\r\n            '{rate|' +\r\n            res.value +\r\n            '}' +\r\n            '  ' +\r\n            '{e|}' +\r\n            ' ' +\r\n            '{proportionE|' +\r\n            res.proportion +\r\n            '%}';\r\n          break;\r\n      }\r\n      return str;\r\n      // return '{name|' + name + '}  {value|' + res.value + '}   {img1|} {value|' + res.proportion + ' %}';\r\n    },\r\n  },\r\n  series: [\r\n    {\r\n      type: 'pie',\r\n      radius: ['25%', '35%'],\r\n      center: ['50%', '50%'],\r\n      data: echartData,\r\n      hoverAnimation: false,\r\n      itemStyle: {\r\n        normal: {\r\n          borderColor: '#fff',\r\n          borderWidth: 4,\r\n        },\r\n      },\r\n      labelLine: {\r\n        normal: {\r\n          length: 15,\r\n          length2: 20,\r\n          lineStyle: {\r\n            color: '#e6e6e6',\r\n          },\r\n        },\r\n      },\r\n      label: {\r\n        normal: {\r\n          formatter: (params) => {\r\n            return '{value|' + formatNumber(params.value) + '}' + '\\n' + '{value|' + params.percent + '%}';\r\n          },\r\n          rich: {\r\n            value: {\r\n              fontSize: 12,\r\n              fontFamily: 'PingFangSC-Regular, PingFang SC',\r\n              fonwweight: 400,\r\n              color: 'rgba(0, 0, 0, 0.65)',\r\n              lineHeight: 17,\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  ],\r\n};","html":"","externalScripts":"","updaterUID":"obd-oNx29S95SNSaA0L7NkI7_ggXQbTc3C8","theme":"","layout":"","viewCount":0,"userName":"谢***4","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xb6kcurC8c.png?v=1635756629217","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title"],"customTags":[],"updaterUserName":"湖***科"}}