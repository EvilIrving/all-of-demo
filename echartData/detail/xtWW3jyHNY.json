{"status":0,"data":{"cid":"xtWW3jyHNY","authorUid":"obd-ojGzG56XInvQGs1Z7JfoehUMcn4DsEo","authorUserName":"风***伟","title":"饼图-荧光花","description":"荧光效果的饼图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-07T01:52:08.000Z","lastUpdateTime":"2021-12-07T01:52:08.000Z","auth":2,"uid":"obd-ojGzG56XInvQGs1Z7JfoehUMcn4DsEo","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-12-07T01:52:08.000Z","code":"chartXData = ['无数据一', '无数据二', '无数据三', '无数据四', '无数据五'];\r\nchartYData = [\r\n    { value: 0, name: '无数据一' },\r\n    { value: 0, name: '无数据二' },\r\n    { value: 0, name: '无数据三' },\r\n    { value: 0, name: '无数据四' },\r\n    { value: 0, name: '无数据五' },\r\n];\r\n\r\n//var colorList =['#228c38', '#1a57b2', '#b04b07', '#af8108'];\r\nvar colorList = [\r\n    '#9EEDFF',\r\n    '#FFF693',\r\n    '#8CC7FE',\r\n    '#F5D0FC',\r\n    '#F5C19B',\r\n    '#CDFBC1',\r\n    '#b9b7ff',\r\n    '#FDB3B0',\r\n    '#AC94FF',\r\n    '#7ACC63',\r\n];\r\nvar colorListSub = ['rgba(35,143,56,.5)', 'rgba(26,87,178,.5)', 'rgba(176,75,7,.5)', 'rgba(175,129,8,.5)'];\r\n// 设置数据\r\nfunction setChartOption(data) {\r\n    const formatData = [];\r\n    var total = 0;\r\n    var valueT = 0;\r\n    for (var i = 0; i < chartYData.length; i++) {\r\n        total += chartYData[i].value;\r\n    }\r\n    if(total>0){\r\n        valueT=10;\r\n    }\r\n    data.forEach(function (item, index) {\r\n        formatData.push(\r\n            {\r\n                value: item.value,\r\n                name: item.name,\r\n                itemStyle: {\r\n                    normal: {\r\n                        label: {\r\n                            show: false,\r\n                        },\r\n                        borderWidth: 10,\r\n                        shadowBlur: 12,\r\n                        borderRadius: 10,\r\n                        borderColor: colorList[index],\r\n                        shadowColor: colorList[index],\r\n                        color: colorList[index],\r\n                    },\r\n                },\r\n            },\r\n            {\r\n                value: valueT,\r\n                name: '',\r\n                itemStyle: {\r\n                    normal: {\r\n                        label: {\r\n                            show: false,\r\n                        },\r\n                        labelLine: {\r\n                            show: false,\r\n                        },\r\n                        color: 'rgba(0, 0, 0, 0)',\r\n                        borderColor: 'rgba(0, 0, 0, 0)',\r\n                        borderWidth: 0,\r\n                    },\r\n                },\r\n            }\r\n        );\r\n    });\r\n\r\n    return formatData;\r\n}\r\nfunction generateData(totalNum, bigvalue, smallvalue, color) {\r\n    let dataArr = [];\r\n    for (var i = 0; i < totalNum; i++) {\r\n        if (i % 4 === 0) {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: bigvalue,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderWidth: 8,\r\n                        shadowBlur: 10,\r\n                        borderRadius: 10,\r\n                        borderColor: color,\r\n                        shadowColor: color,\r\n                        color: color,\r\n                    },\r\n                },\r\n            });\r\n        } else {\r\n            dataArr.push({\r\n                name: (i + 1).toString(),\r\n                value: smallvalue,\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'rgba(0,0,0,0)',\r\n                         borderWidth: 0,\r\n                    },\r\n                },\r\n            });\r\n        }\r\n    }\r\n    return dataArr;\r\n}\r\nlet dolitData = generateData(100, 25, 20, '#AC94FF');\r\nfunction getOption(radius) {\r\n    let option = {\r\n        backgroundColor: '#0A1934',\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function (params) {\r\n                var percent = 0;\r\n                                var total = 0;\r\n                                for (var i = 0; i < chartYData.length; i++) {\r\n                                    total += chartYData[i].value;\r\n                                }\r\n                                if (total !== 0) {\r\n                                    percent = ((params.value / total) * 100).toFixed(0);\r\n                                }\r\n                if (params.name !== '') {\r\n                   return params.name+': '+params.value+' ('+percent+'%)';\r\n                }else{\r\n                    return '';\r\n                }\r\n            },\r\n        },\r\n        legend: {\r\n            orient: 'vertical',\r\n            textStyle: {\r\n                color: '#fff',\r\n            },\r\n            right: '10%',\r\n            top: '25%',\r\n            show: false,\r\n            data: chartXData,\r\n        },\r\n        series: [\r\n            {\r\n                type: 'pie',\r\n                radius: ['50%', '75%'],\r\n                //            roseType: 'radius',\r\n                clockwise: false,\r\n                z: 10,\r\n                itemStyle: {\r\n                    normal: {\r\n                        label: {\r\n                            position: 'outside',\r\n                            alignTo: 'edge',\r\n                            margin: 1,\r\n                            formatter: function (params) {\r\n                                var percent = 0;\r\n                                var total = 0;\r\n                                for (var i = 0; i < chartYData.length; i++) {\r\n                                    total += chartYData[i].value;\r\n                                }\r\n                                if (total !== 0) {\r\n                                    percent = ((params.value / total) * 100).toFixed(0);\r\n                                }\r\n\r\n                                if (params.name !== '') {\r\n                                    return (\r\n                                        '{b|' + params.name + '}\\n{hr|}\\n{d|' + params.value + ' (' + percent + '%)} '\r\n                                    );\r\n                                } else {\r\n                                    return '';\r\n                                }\r\n                            },\r\n                            rich: {\r\n                                b: {\r\n                                    fontSize: 10,\r\n                                    color: '#fff',\r\n                                    align: 'left',\r\n                                    padding: 4,\r\n                                },\r\n                                hr: {\r\n                                    borderColor: '#12EABE',\r\n                                    width: '100%',\r\n                                    borderWidth: 1,\r\n                                    height: 0,\r\n                                },\r\n                                d: {\r\n                                    fontSize: 8,\r\n                                    color: '#fff',\r\n                                    align: 'left',\r\n                                    padding: 4,\r\n                                },\r\n                                c: {\r\n                                    fontSize: 10,\r\n                                    color: '#fff',\r\n                                    align: 'center',\r\n                                    padding: 4,\r\n                                },\r\n                            },\r\n                        },\r\n                        labelLine: {\r\n                            normal: {\r\n                                length: 5,\r\n                                length2: 5,\r\n                                lineStyle: {\r\n                                    width: 1,\r\n                                },\r\n                            },\r\n                        },\r\n                    },\r\n                },\r\n                data: setChartOption(chartYData),\r\n            },\r\n            // 中心的圆圈\r\n            {\r\n                color: '#FFFFFF',\r\n                type: 'pie',\r\n                silent: true,\r\n                radius: [radius + 1 + '%', radius + '%'],\r\n                label: {\r\n                    normal: {\r\n                        show: false,\r\n                    },\r\n                    emphasis: {\r\n                        show: false,\r\n                    },\r\n                },\r\n                labelLine: {\r\n                    normal: {\r\n                        show: false,\r\n                    },\r\n                    emphasis: {\r\n                        show: false,\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    show: false,\r\n                },\r\n                data: dolitData,\r\n                animation: false,\r\n            },\r\n        ],\r\n    };\r\n    return option;\r\n}\r\n\r\nvar timerId;\r\nlet [minradius, radius, maxradius] = [24, 24, 28]; // 初始缩放尺寸\r\n/**let isBig = true // 缩放动画 标识\r\nfunction draw() {\r\n            if (isBig) {\r\n                radius = radius + 0.4;\r\n                if (radius > maxradius) {\r\n                    isBig = false;\r\n                }\r\n            } else {\r\n                radius = radius - 0.3;\r\n                if (radius < minradius) {\r\n                    isBig = true;\r\n                }\r\n            }\r\n            let option = getOption(radius);\r\n    myChart.setOption(option, true);\r\n    //window.requestAnimationFrame(draw);\r\n}\r\nif (timerId) {\r\n    clearInterval(timerId);\r\n}\r\ntimerId = setInterval(function () {\r\n    //用setInterval做动画感觉有问题\r\n    draw();\r\n}, 100);**/\r\nmyChart.setOption(getOption(radius), true);\r\n","html":"","externalScripts":"","updaterUID":"obd-ojGzG56XInvQGs1Z7JfoehUMcn4DsEo","theme":"","layout":"","viewCount":0,"userName":"风***伟","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xtWW3jyHNY.png?v=1638841928686","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"风***伟"}}