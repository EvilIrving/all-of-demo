{"status":0,"data":{"cid":"xSkOKwGW-M","authorUid":"bd-1403751951","authorUserName":"北京华联高超","title":"新疆设备部署图","description":"散点圆的大小随设备数量改变而改变","latestVersion":1,"alwaysLatest":1,"createTime":"2017-12-03T06:19:44.000Z","lastUpdateTime":"2017-12-03T10:25:02.000Z","auth":2,"uid":"bd-1403751951","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2017-12-03T06:19:44.000Z","code":"// 获取新疆地区的json文件\nvar uploadedDataURL = \"/asset/get/s/data-1507863641060-Sy-whsTh-.json\";\n\n// 请求的方式获取\n$.get(uploadedDataURL, function(as) {\n    // 引入新疆地区地图\n    echarts.registerMap('新疆', as);\n    // 每个地区的坐标\n    var geoCoordMap = {\n        '巴音郭楞蒙古': [88.1653, 39.6002],\n        '和田': [81.167, 36.9855],\n        '哈密': [93.7793, 42.9236],\n        '阿克苏': [82.9797, 41.0229],\n        '阿勒泰': [88.2971, 47.0929],\n        '喀什': [77.168, 37.8534],\n        '塔城': [86.6272, 45.8514],\n        '昌吉': [89.6814, 44.4507],\n        '克孜勒苏柯尔克孜': [74.6301, 39.5233],\n        '吐鲁番': [89.6375, 42.4127],\n        '伊犁哈萨克': [82.5513, 43.5498],\n        '博尔塔拉蒙古': [81.8481, 44.6979],\n        '乌鲁木齐': [87.9236, 43.5883],\n        '克拉玛依': [85.2869, 45.5054],\n        '阿拉尔': [81.2769, 40.6549],\n        '图木舒克': [79.1345, 39.8749],\n        '五家渠': [87.5391, 44.3024],\n        '石河子': [86.0229, 44.2914]\n    };\n\n    // 每个地区的设备数量值\n    var data = [{\n        name: '巴音郭楞蒙古',\n        value: 390,\n        alarm_num: 54\n    }, {\n        name: '和田',\n        value: 119\n    }, {\n        name: '哈密',\n        value: 55,\n        alarm_num: 9\n    }, {\n        name: '阿克苏',\n        value: 329\n    }, {\n        name: '阿勒泰',\n        value: 219,\n        alarm_num: 14\n    }, {\n        name: '喀什',\n        value: 290\n    }, {\n        name: '塔城',\n        value: 319,\n        alarm_num: 2\n    }, {\n        name: '昌吉',\n        value: 199\n    }, {\n        name: '克孜勒苏柯尔克孜',\n        value: 419,\n        alarm_num: 11\n    }, {\n        name: '吐鲁番',\n        value: 299\n    }, {\n        name: '伊犁哈萨克',\n        value: 49\n    }, {\n        name: '博尔塔拉蒙古',\n        value: 219,\n        alarm_num: 15\n    }, {\n        name: '乌鲁木齐',\n        value: 89\n    }, {\n        name: '克拉玛依',\n        value: 49\n    }, {\n        name: '阿拉尔',\n        value: 209,\n        alarm_num: 27\n    }, {\n        name: '图木舒克',\n        value: 129\n    }, {\n        name: '五家渠',\n        value: 49,\n        alarm_num: 7\n    }, {\n        name: '石河子',\n        value: 229\n    }];\n\n    // 每个地区的设备告警数量\n    var data2 = [{\n        name: '巴音郭楞蒙古',\n        value: 54\n    }, {\n        name: '哈密',\n        value: 9\n    }, {\n        name: '阿勒泰',\n        value: 14\n    }, {\n        name: '塔城',\n        value: 2\n    }, {\n        name: '克孜勒苏柯尔克孜',\n        value: 11\n    }, {\n        name: '博尔塔拉蒙古',\n        value: 15\n    }, {\n        name: '乌鲁木齐',\n        value: 12\n    }, {\n        name: '阿拉尔',\n        value: 27\n    }, {\n        name: '五家渠',\n        value: 7\n    }]\n\n\n    var convertData = function(data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var geoCoord = geoCoordMap[data[i].name];\n            if (geoCoord) {\n                res.push({\n                    name: data[i].name,\n                    value: geoCoord.concat(data[i].value),\n                });\n            }\n        }\n        // 有数据的地区的名称和value值\n        return res;\n    };\n\n    // 设定series是一个空的数组\n    var series = [];\n    [\n        ['新疆', data]\n    ].forEach(function(item, i) {\n        series.push({\n            name: '定位点',\n            type: 'effectScatter', // 散点图\n            coordinateSystem: 'geo', // 使用地理坐标系\n            hoverAnimation: 'false',\n            legendHoverLink: 'false',\n            rippleEffect: {\n                period: 4,\n                brushType: 'stroke',\n                scale: 3\n            },\n            data: convertData(item[1]),\n            symbolSize: function(val) {\n                if (val[2] <= 100) {\n                    return 4\n                }\n                if (val[2] > 100 && val[2] <= 200) {\n                    return 8\n                }\n                if (val[2] > 200 && val[2] <= 300) {\n                    return 12\n                }\n                if (val[2] > 300 && val[2] <= 400) {\n                    return 16\n                }\n                if (val[2] > 400 && val[2] <= 500) {\n                    return 20\n                }\n                if (val[2] > 500) {\n                    return 24\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#5599E4',\n                }\n            },\n            zlevel: 1,\n        }, {\n            type: 'map',\n            map: '新疆',\n            zlevel: 0,\n            itemStyle: {\n                normal: {\n                    areaColor: '#323c48',\n                    borderColor: '#111'\n                },\n                emphasis: {\n                    areaColor: '#2a333d'\n                }\n            },\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#ddb926',\n                        fontSize: 10\n                    },\n                },\n                emphasis: {\n                    textStyle: {\n                        color: '#ddb926',\n                        fontSize: 10\n                    },\n                }\n\n            },\n            data: data\n        }, {\n            name: '点',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin',\n            symbolSize: 25,\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#F62157', //标志颜色\n                }\n            },\n            zlevel: 6,\n            data: convertData(data2)\n        });\n    });\n\n    option = {\n        backgroundColor: '#4f5555',\n        title: {\n            text: '新疆设备部署图',\n            subtext: '散点圆的大小随设备数量改变而改变',\n            left: 'center',\n            textStyle: {\n                color: '#7bbfea'\n            }\n        },\n        geo: {\n            map: '新疆',\n            label: {\n                textStyle: {\n                    fontSize: '.1rem',\n                }\n            },\n            itemStyle: {\n                normal: {\n                    areaColor: '#fff',\n                    borderColor: '#587A9F'\n                },\n                emphasis: {\n                    areaColor: '#ccc'\n                }\n            }\n        },\n        series: series\n    };\n    myChart.setOption(option);\n\n});","html":"","externalScripts":"","updaterUID":"bd-1403751951","theme":"macarons","layout":"","viewCount":2878,"userName":"北京华联高超","commentCount":0,"starCount":12,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xSkOKwGW-M.png?v=1512281984177","isCustomThumbnail":0,"builtinTags":[],"customTags":[],"updaterUserName":"北京华联高超"}}