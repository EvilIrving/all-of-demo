{"status":0,"data":{"cid":"xwOwafdKHd","authorUid":"obd-o0N9XgjzEtK8qv4eJ75aguEaOF08uFv","authorUserName":"我***1","title":"饼图实现刻度效果","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-12-14T08:57:12.000Z","lastUpdateTime":"2021-12-14T08:57:12.000Z","auth":2,"uid":"obd-o0N9XgjzEtK8qv4eJ75aguEaOF08uFv","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-14T08:57:12.000Z","code":"option= {\n    backgroundColor: \"#000911\",\n    polar: {\n        radius: ['61%', '57%'],\n        center: ['50%', '50%'],\n    },\n    title: {\n        zlevel: 0,\n        text: 88,\n        subtext: '总案件数',\n        top: '42%',\n        left: '50%',\n        textAlign: 'center',\n        textStyle: {\n            color: '#FFA042',\n            fontSize: 50,\n        },\n        subtextStyle: {\n            fontSize: 40,\n            color: '#fff',\n        },\n    },\n    angleAxis: {\n        max: 1,\n        show: false,\n        startAngle: 0,\n    },\n    radiusAxis: {\n        type: 'category',\n        show: true,\n        axisLabel: { show: false },\n        axisLine: { show: false },\n        axisTick: { show: false },\n    },\n    series: [\n        // 外层刻度\n        {\n            hoverAnimation: false,\n            type: 'pie',\n            z: 2,\n            data: [],\n            radius: ['65%', '75%'],\n            zlevel: -2,\n            label: {\n                normal: {\n                    position: 'inside',\n                    show: false,\n                },\n            },\n        },\n        // 内层饼图\n        {\n            type: 'pie',\n            radius: ['56%', '60%'],\n            center: ['50%', '50%'],\n            data: [],\n            labelLine: {\n                length: 40,\n            },\n            // 提示线设置\n            label: {\n                formatter: '{a|{c}}\\n{hr|}\\n {per|{d}%} ',\n                backgroundColor: 'rgba(0, 0, 0, 0)',\n                borderColor: 'rgba(0, 0, 0, 0)',\n                borderWidth: 1,\n                borderRadius: 4,\n\n                rich: {\n                    a: {\n                        color: '#fff',\n                        lineHeight: 26,\n                        align: 'center',\n                        fontSize: 16,\n                    },\n                    hr: {\n                        borderColor: 'auto',\n                        width: '100%',\n                        borderWidth: 1,\n                        height: 0,\n                    },\n                    per: {\n                        color: '#1ef0ed',\n                        backgroundColor: 'rgba(0, 0, 0, 0)',\n                        padding: [5, 5],\n                        borderRadius: 4,\n                        fontSize: 16,\n                    }\n                }\n            },\n        },\n    ]\n    }\nchartData=[\n    {color: '#a18cd1', data: 256,ratio: '0.54'}, \n    {color: '#fbc2eb', data: 82,ratio: '0.17'}, \n    {color: '#8fd3f4', data: 74,ratio: '0.15'}, \n    {color: '#fee140', data: 60,ratio: '0.12'}, \n]\ntotal = 472\nchartData.map(item=>{\n        if (item.data > 0) {\n            let num = Math.round((item.data / total) * 100)\n            for (let i = 0; i < num; ++i) {\n                option.series[0].data.push({\n                    value: 2, // 有颜色部分的宽度\n                    name: i,\n                    ratio: item.ratio,\n                    itemStyle: {\n                        normal: {color: item.color,}\n                    },\n                }, {\n                    value: 1, // 无颜色部分的宽度\n                    name: '',\n                    itemStyle: {\n                        normal: {\n                            label: { show: false },\n                            labelLine: { show: false },\n                            color: 'rgba(0, 0, 0, 0)',\n                            borderColor: 'rgba(0, 0, 0, 0)',\n                            borderWidth: 0,\n                        }\n                    }\n                })\n          }\n        }\n        // 内层饼图数据\n        option.series[1].data.push({\n            hoverOffset: 1,\n            value: item.data,\n            itemStyle: { color: item.color },\n        })\n    })\n    // 如果总数据为0时，每个颜色的值设为25%（本文实现的是四色图），可视具体情况而定\n    if (total == 0) {\n        chartData.map(item=>{\n            for (let i = 0; i < 25; ++i) {\n                option.series[0].data.push({\n                    value: 2,\n                    name: i,\n                    ratio: item.ratio,\n                    itemStyle: {\n                        normal: {color: item.color,}\n                    },\n                },{\n                    value: 1,\n                    name: '',\n                    itemStyle: {\n                        normal: {\n                            label: { show: false },\n                            labelLine: { show: false },\n                            color: 'rgba(0, 0, 0, 0)',\n                            borderColor: 'rgba(0, 0, 0, 0)',\n                            borderWidth: 0\n                        }\n                    }\n                })\n            }\n        })\n\n    }\n","html":"","externalScripts":"","updaterUID":"obd-o0N9XgjzEtK8qv4eJ75aguEaOF08uFv","theme":"","layout":"","viewCount":0,"userName":"我***1","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xwOwafdKHd.png?v=1639472233054","isCustomThumbnail":0,"builtinTags":["category-work","polar","series-pie","title"],"customTags":[],"updaterUserName":"我***1"}}