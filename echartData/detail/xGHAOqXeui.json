{"status":0,"data":{"cid":"xGHAOqXeui","authorUid":"obd-oPLA4L_tWBl2tT52IKBs7vdCBYAIh9J","authorUserName":"l***b","title":"渠道分布-饼图","description":"","latestVersion":6,"alwaysLatest":1,"createTime":"2020-05-22T01:46:30.000Z","lastUpdateTime":"2020-05-22T01:46:30.000Z","auth":2,"uid":"obd-oPLA4L_tWBl2tT52IKBs7vdCBYAIh9J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-12T06:13:13.000Z","code":"/**\n * 获取字符串的字节长度\n * @param str\n * @returns {number}\n */\nfunction getByteLength(str) {\n    let byteLen = 0\n    if (typeof str === 'string') {\n        const len = str.length\n        for (let i = 0; i < len; i++) {\n            const code = str.charCodeAt(i)\n            let byte\n            // 单字节加1\n            if ((code >= 0x0001 && code <= 0x007e) || (code >= 0xff60 && code <= 0xff9f)) {\n                byte = 1\n            } else {\n                byte = 2\n            }\n            byteLen += byte\n        }\n    }\n    return byteLen\n}\n\n/**\n * 按字节长度截取字符串，返回截取的endIndex\n * @param str\n * @param cutByteLen\n * @returns {number}\n */\nfunction cutString(str, cutByteLen = 20) {\n    if (typeof str === 'string' && typeof cutByteLen === 'number') {\n        const len = str.length\n        let cutIndex = len\n        let byteLen = 0\n        for (let i = 0; i < len; i++) {\n            const code = str.charCodeAt(i)\n            let byte\n            if ((code >= 0x0001 && code <= 0x007e) || (code >= 0xff60 && code <= 0xff9f)) {\n                byte = 1\n            } else {\n                byte = 2\n            }\n            if (byteLen + byte < cutByteLen) {\n                byteLen += byte\n            } else {\n                cutIndex = i\n                break\n            }\n        }\n        return cutIndex\n    }\n    return -1\n}\n\n/**\n * 分割字符串\n * @param str\n * @param cutByteLen\n * @returns {[]}\n */\nfunction splitStr(str, cutByteLen = 20) {\n    let text = str\n    const strs = []\n    for (let i = 0; getByteLength(text) > 0; i++) {\n        const cutIndex = cutString(text, cutByteLen)\n        strs.push(text.substr(0, cutIndex + 1))\n        text = text.substr(cutIndex + 1)\n    }\n    return strs\n}\n\n/**\n * 字符串超过一定长度添加省略号\n * @param str\n * @param cutByteLen\n * @returns {string|*}\n */\nfunction omitStr(str, cutByteLen = 20) {\n    const cutIndex = cutString(str, cutByteLen)\n    if (cutIndex < str.length - 1) {\n        return `${str.substr(0, cutIndex + 1)}...`\n    }\n    return str\n}\n\nconst data = [{\n        \"name\": \"默认渠道\",\n        \"value\": 118\n    },\n    {\n        \"name\": \"网页渠道\",\n        \"value\": 16\n    },\n    {\n        \"name\": \"test hello world\",\n        \"value\": 6\n    },\n    {\n        \"name\": \"零一二三四五六七八九零一二三四五六七八九\",\n        \"value\": 2\n    },\n    {\n        \"name\": \"未知渠道\",\n        \"value\": 10\n    },\n    {\n        \"name\": \"1\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"2\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"3\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"4\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"5\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"6\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"7\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"8\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"9\",\n        \"value\": 1,\n    },\n    {\n        \"name\": \"10\",\n        \"value\": 1,\n    },\n];\n\noption = {\n    \"backgroundColor\": \"#FFF\",\n    \"color\": [\n        \"#1791FF\",\n        \"#7870FF\",\n        \"#41CBAB\",\n        \"#FFC653\",\n        \"#FF6519\",\n        \"#EE3939\",\n        \"#407AFB\",\n        \"#4391FF\",\n        \"#38A5FD\",\n        \"#36B0FE\",\n        \"#60AABD\",\n        \"#6BB092\",\n        \"#CBC718\",\n        \"#F57C00\",\n        \"#FF1A19\"\n    ],\n    \"tooltip\": {\n        \"trigger\": \"item\",\n        \"show\": false\n    },\n    \"legend\": {\n        \"type\": \"scroll\",\n        \"icon\": \"circle\",\n        \"itemGap\": 24,\n        \"itemWidth\": 8,\n        \"pageIconColor\": \"#595959\",\n        \"orient\": \"vertical\",\n        \"top\": \"4.6%\",\n        \"left\": \"70%\",\n        \"bottom\": \"4.6%\",\n        \"data\": [\n            \"默认渠道\",\n            \"网页渠道\",\n            \"test hello world\",\n            \"零一二三四五六七八九零一二三四五六七八九\",\n            \"未知渠道\",\n            \"1\",\n            \"2\",\n            \"3\",\n            \"4\",\n            \"5\",\n            \"6\",\n            \"7\",\n            \"8\",\n            \"9\",\n            \"10\",\n        ],\n        \"formatter\": function(name) {\n            return omitStr(name)\n        },\n        \"textStyle\": {\n            \"color\": \"#595959\",\n            \"fontSize\": 14\n        }\n    },\n    \"series\": [{\n        \"name\": \"人数\",\n        \"type\": \"pie\",\n        \"data\": data,\n        \"itemStyle\": {\n            \"borderColor\": \"#fff\",\n            \"borderWidth\": 1\n        },\n        \"radius\": [\n            \"40%\",\n            \"50.2%\"\n        ],\n        \"center\": [\n            \"50%\",\n            \"50%\"\n        ],\n        \"splitNumber\": -1,\n        \"label\": {\n            position: 'center', // 标签在饼图中心位置\n            formatter() {\n                const name = data.length ? '渠道分布' : ''\n                return `{name|${name}}`\n            },\n            backgroundColor: '#fff',\n            rich: {\n                name: {\n                    fontSize: 12,\n                    color: '#222',\n                },\n            },\n        },\n        \"labelLine\": {\n            \"show\": false\n        },\n\n    }]\n};","html":"","externalScripts":"","updaterUID":"obd-oPLA4L_tWBl2tT52IKBs7vdCBYAIh9J","theme":"","layout":"","viewCount":210,"userName":"l***b","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xGHAOqXeui.png?v=1610431993559","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"l***b"}}