{"status":0,"data":{"cid":"x6av-1ZSix","authorUid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","authorUserName":"S***l","title":"动态切换横向柱状图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-15T05:30:38.000Z","lastUpdateTime":"2020-10-15T05:30:38.000Z","auth":2,"uid":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-15T05:30:38.000Z","code":"var tarr = [\r\n    \"左涉207\",\r\n    \"吕梁209\",\r\n    \"隰吉高速\",\r\n    \"昔榆高速\",\r\n    \"离隰高速\",\r\n    \"黎霍高速\"\r\n];\r\nvar arr = [{\r\n        name: '报告总数',\r\n        data: ['12', '23', '34', '4', '15', '76']\r\n    }\r\n\r\n];\r\n\r\nvar colorArray = [{\r\n        top: \"#D1D579\", //黄\r\n        bottom: \"#07151E\",\r\n    },\r\n    {\r\n        top: \"#57CC73\", //绿\r\n        bottom: \"#02141E\",\r\n    },\r\n    {\r\n        top: \"#D1D479\", //黄\r\n        bottom: \"#07151E\",\r\n    },\r\n    {\r\n        top: \"#57CC73\", //绿\r\n        bottom: \"#02141E\",\r\n    },\r\n    {\r\n        top: \"#D1D479\", //黄\r\n        bottom: \"#07151E\",\r\n    },\r\n    {\r\n        top: \"#57CC73\", //绿\r\n        bottom: \"#02141E\",\r\n    },\r\n];\r\n\r\n\r\n\r\nvar pj = function(v, x) {\r\n    return v.concat(x);\r\n}\r\n\r\nvar dataArrs = []\r\nvar setDataObj = function() {\r\n    for (let key in tarr) {\r\n\r\n        if (key == 0) {\r\n            dataArrs.push({\r\n                yAxis: {\r\n                    'data': [tarr[tarr.length - 1], tarr[Number(key)], tarr[Number(key) + 1], tarr[Number(key) + 2]]\r\n                },\r\n                name: tarr[key],\r\n                series: [{\r\n                        'data': [100, 100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: pj(arr[0].data.slice(arr[0].data.length - 1), arr[0].data.slice(0, 3)), //0 军委首长 数据3条 第一天线 1月份 2y月份 月份数据3y\r\n                    },\r\n\r\n\r\n                ],\r\n            })\r\n        } else if (key == tarr.length - 1) {\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                yAxis: {\r\n                    'data': [tarr[tarr.length - 2], tarr[tarr.length - 1], tarr[0], tarr[1]]\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: pj(arr[0].data.slice(arr[0].data.length - 2), arr[0].data.slice(0, 2)),\r\n                    },\r\n\r\n                ],\r\n            })\r\n        } else if (key == tarr.length - 2) {\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                yAxis: {\r\n                    // 'data': [tarr[Number(key) - 1], tarr[Number(key)], tarr[Number(key) + 1],tarr[Number(key) + 2]]\r\n                    'data': [tarr[tarr.length - 4], tarr[Number(key) - 1], tarr[Number(key)], tarr[Number(key) + 1]]\r\n\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: arr[0].data.slice(key - 2, Number(key) + 2),\r\n                    },\r\n\r\n                ],\r\n            })\r\n        } else {\r\n\r\n            dataArrs.push({\r\n                name: tarr[key],\r\n                yAxis: {\r\n                    'data': [tarr[Number(key) - 1], tarr[Number(key)], tarr[Number(key) + 1], tarr[Number(key) + 2]]\r\n                },\r\n                series: [{\r\n                        'data': [100, 100, 100, 100]\r\n                    },\r\n                    {\r\n                        data: arr[0].data.slice(key - 1, Number(key) + 3),\r\n                    },\r\n\r\n\r\n                ],\r\n            })\r\n        }\r\n    }\r\n};\r\n\r\n\r\nconsole.log(dataArrs)\r\noption = {\r\n    baseOption: {\r\n        timeline: {\r\n            data: [\"左涉207\",\r\n                \"吕梁209\",\r\n                \"隰吉高速\",\r\n                \"昔榆高速\",\r\n                \"离隰高速\",\r\n                \"黎霍高速\"\r\n            ],\r\n            axisType: 'category',\r\n            show: false,\r\n            autoPlay: true,\r\n            currentIndex: 0,\r\n            loop: true,\r\n            playInterval: 3000,\r\n\r\n            lineStyle: {\r\n                color: {\r\n                    type: 'radial',\r\n                    x: 0.5,\r\n                    y: 0.5,\r\n                    r: 0.5,\r\n                    colorStops: [{\r\n                        offset: 0,\r\n                        color: '#F8E240' // 0% 处的颜色\r\n                    }, {\r\n                        offset: 1,\r\n                        color: '#1A8AD8' // 100% 处的颜色\r\n                    }],\r\n                    global: false // 缺省为 false\r\n                },\r\n                shadowBlur: \"\",\r\n                type: \"dashed\",\r\n                width: 1\r\n            },\r\n            controlStyle: {\r\n                showNextBtn: true,\r\n                showPrevBtn: true,\r\n                showPlayBtn: true\r\n            },\r\n\r\n        },\r\n\r\n        backgroundColor: \"#000f1c\",\r\n\r\n        calculable: true,\r\n\r\n        grid: {\r\n            top: \"30%\",\r\n            'y': 10,\r\n            'y2': 80\r\n        },\r\n\r\n\r\n        xAxis: {\r\n            'type': 'value',\r\n            show: false,\r\n            axisLabel: {\r\n                show: false,\r\n                interval: 0,\r\n                color: \"#a5a8a8\",\r\n                fontSize: \"12\",\r\n            },\r\n\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n                interval: 0,\r\n                color: \"#a5a8a8\",\r\n                fontSize: \"12\",\r\n            },\r\n\r\n            splitLine: {\r\n                show: false,\r\n\r\n            },\r\n\r\n        },\r\n        yAxis: [{\r\n                type: \"category\",\r\n                // name: \"数量\",\r\n                nameTextStyle: {\r\n                    color: \"#a5a8a8\",\r\n                    align: \"right\",\r\n                    lineHeight: 10,\r\n                },\r\n                axisLine: {\r\n                    show: false,\r\n                    lineStyle: {\r\n                        color: \"#858B8E\",\r\n                    },\r\n                },\r\n                axisTick: {\r\n                    show: false,\r\n                },\r\n                axisLabel: {\r\n\r\n                    interval: 0,\r\n                    color: \"#a5a8a8\",\r\n                    fontSize: \"12\",\r\n                },\r\n\r\n                splitLine: {\r\n                    show: false,\r\n                    lineStyle: {\r\n                        type: \"dotted\",\r\n                        color: [\"#212E37\"],\r\n                    },\r\n                },\r\n                // data:attr\r\n            },\r\n            {\r\n                'type': 'category',\r\n\r\n                'show': false\r\n            }\r\n        ],\r\n        series: [{\r\n                type: 'line',\r\n                barWidth: 50,\r\n                symbol: 'circle',\r\n                symbolSize: 25,\r\n                animation: false,\r\n                data: [100, 100, 100],\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: 'transparent',\r\n                        opacity: 0.8\r\n                    },\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                }\r\n\r\n            },\r\n            {\r\n                'name': '能耗值',\r\n                'yAxisIndex': 1,\r\n                'type': 'bar',\r\n                type: \"bar\",\r\n                barWidth: \"20px\",\r\n\r\n                lineStyle: {\r\n                    normal: {\r\n                        color: \"#4D67D6\",\r\n\r\n                    },\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: \"right\",\r\n                        formatter: \"{c}%\",\r\n                        textStyle: {\r\n                            color: \"#fff\", //color of value\r\n                        },\r\n                    },\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        show: true,\r\n                        color: function(params) {\r\n                            let num = colorArray.length;\r\n                            return {\r\n                                type: \"linear\",\r\n                                colorStops: [{\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                    {\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                    {\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                    {\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                    {\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                    {\r\n                                        offset: 0,\r\n                                        color: colorArray[params.dataIndex % num].bottom,\r\n                                    },\r\n                                    {\r\n                                        offset: 1,\r\n                                        color: colorArray[params.dataIndex % num].top,\r\n                                    },\r\n                                ],\r\n\r\n                            };\r\n                        },\r\n                        barBorderRadius: 50,\r\n                        borderWidth: 1,\r\n                        borderColor: \"transparent\",\r\n                    },\r\n                },\r\n                barGap: \"0%\",\r\n                barCategoryGap: \"50%\",\r\n\r\n                'data': [10, 10, 10],\r\n\r\n\r\n            },\r\n\r\n\r\n        ],\r\n    },\r\n    options: dataArrs,\r\n};\r\n\r\nsetDataObj();","html":"","externalScripts":"","updaterUID":"obd-oCXhu5Ci-jvoIw7NPqT4YgxkmbLM53L","theme":"","layout":"","viewCount":317,"userName":"S***l","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6av-1ZSix.png?v=1602739838520","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-line","timeline"],"customTags":[],"updaterUserName":"S***l"}}