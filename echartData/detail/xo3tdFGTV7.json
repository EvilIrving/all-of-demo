{"status":0,"data":{"cid":"xo3tdFGTV7","authorUid":"bd-1177271758","authorUserName":"s***五","title":"时间轴-条形图加伪折线图（散点加连线）","description":"创建时间轴表述时间内区段数据","latestVersion":3,"alwaysLatest":1,"createTime":"2021-02-09T08:59:48.000Z","lastUpdateTime":"2021-02-09T08:59:48.000Z","auth":2,"uid":"bd-1177271758","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-09T10:54:14.000Z","code":"var data = generateData();\nvar links = data.valueData5.map(function (item, i) {\n    return {\n        source: i,\n        target: i + 1\n    };\n});\nlinks.pop();\nvar option = {\n    tooltip: {\n        trigger:'item',axisPointer:{type:'shadow'},\n        textStyle:{align:'left'},transitionDuration:0,\n        formatter: function (params, ticket, callback) {\n            var seriesName = params.seriesName;\n            var ter = '';\n            if (seriesName=='线路拜访') {\n                ter = data.valueData1[params.dataIndex].title+\"<br/>得分：\";\n            }\n            if (seriesName=='线外拜访') {\n                ter = data.valueData2[params.dataIndex].title+\"<br/>得分：\";\n            }\n            if (seriesName=='线路新增') {\n                ter = data.valueData3[params.dataIndex].title+\"<br/>得分：\";\n            }\n            if (seriesName=='订单金额') {\n                ter = data.valueData4[params.dataIndex].title+\"<br/>成交金额：\";\n            }\n            if (seriesName=='订单金额') {\n                ter = data.valueData5[params.dataIndex].title+\"<br/>成交金额：\";\n            }\n            return params.seriesName+\"<br/>\"\n                +ter+params.value+\"<br/>\"+params.name;\n        }\n    },\n    grid: [{top:'30',bottom: '15%',right:'50',left:'55'}, \n           {top: '85%',bottom:'50',right:'50',left:'55'}\n    ],\n    dataZoom: [{type: 'slider', startValue: 465, endValue: 1260, zoomLock:'true',brushSelect:false}],       \n    xAxis:[{type: 'category', data: data.categoryData,\n           \taxisLabel:{fontWeight:\"bold\",fontSize:10,interval:59}, axisTick:{interval:15}}\n    ],\n    yAxis:[{max:data.maxAmount,axisLine:{show:true},name: '订单金额',\n            axisLabel:{\n                \tformatter: function (value, index) {\n                \t    if (value>999999){\n                \t        value = value+\"\"; return value.substring(0, 6)+\"\\n\"+value.substring(6)\n                \t    } else return value; \n                \t},fontSize:10\n                },\n            },\n           {max:data.maxScore,name: '分数',\n            axisLabel:{fontSize:10},axisLine:{show:true}},\n        {inverse: true, max:10,axisLabel:{fontSize:10 },axisLine:{show:false},interval:10}\n    ],\n    //legend:{},\n    series: [{\n        type: 'bar',\n        name: \"线路拜访\",\n        data: data.valueData1,barGap: '-100%',barWidth: \"100%\",\n        itemStyle:{\n            color:\"#003366\"\n        }\n    },{\n        type: 'bar',\n        name: \"线外拜访\",\n        data: data.valueData2,barGap: '-100%',barWidth: \"100%\",\n        itemStyle:{\n            color:\"#006699\"\n        }\n    },{\n        type: 'bar',\n        name: \"线路新增\",\n        data: data.valueData3,barGap: '-100%',barWidth: \"100%\",\n        itemStyle:{\n            color:\"#4cabce\"\n        }\n    },\n    {   name: '得分',\n        symbolSize: 5,\n         //type: 'scatter',\n        yAxisIndex: 1,\n        data: data.valueData5,\n        type: 'graph',\n        links: links,\n        lineStyle: {\n            color:'#E43961',\n            width: 2,\n        },\n        label: {\n            show: false\n        },\n        coordinateSystem:'cartesian2d',\n        zlevel:999999,\n        itemStyle:{\n            color:\"#E43961\"\n        }\n    }\n    ,{\n        type: 'bar',yAxisIndex: 2,\n        name: \"任务\",\n        data: data.valueData4,barGap: '-100%',barWidth: \"100%\",\n        itemStyle:{\n            color:\"#4cabce\"\n        }\n    }\n    ]\n};\n\nfunction generateData() {\n    var time = +new Date(2020, 10, 17);\n\n    var categoryData = [];\n\tvar valueData1 = [];\n\tvar valueData2 = [];\n\tvar valueData3 = [];\n\tvar valueData4 = [];\n\tvar valueData5 = [];\n    var maxS = 100;\n    var maxA = 1100;\n    var minA = Math.floor(maxA*0.11);\n\n    for (var i = 0; i <= 1440; i++) {\n        categoryData.push(echarts.format.formatTime('hh:mm', time));\n\t\tif (i>=495 && i<500){\n\t\t\tvalueData1.push({value:556,title:\"门店1<br>工时30\",type:\"1\"});\n\t\t}else {\n\t\t\tvalueData1.push({value:0,title:\"\"});\n\t\t}\n\t\tif (i>=510 && i<520){\n\t\t\tvalueData2.push({value:681,title:\"门店2<br>工时35\",type:\"1\"});\n\t\t}else{\n\t\t\tvalueData2.push({value:0,title:\"\"});\n\t\t}\n\t\tif (i>=930 && i<=933) {\n\t\t\tvalueData3.push({value:742,title:\"门店3<br>工时35\",type:\"1\"});\n\t\t}else{\n\t\t\tvalueData3.push({value:0,title:\"\"});\n\t\t}\n\t\tif (i>=495 && i<500) {\n\t\t\tvalueData4.push({value:10,title:\"门店1\",type:\"1\"});\n\t\t}\n\t\telse{\n\t\t\tvalueData4.push({value:0,title:\"\",type:\"0\"});\n\t\t}\n\t\tif (i==931 || i==953 || i==1013 || i==1133\n\t\t    || i==431 || i==453 || i==513 || i==533\n\t\t    || i==631 || i==653 || i==713 || i==733\n\t\t    || i==831 || i==853 ){\n\t\t    valueData5.push([echarts.format.formatTime('hh:mm', time),Math.floor(Math.random()*100)]);\n\t\t}\n        time += 60000;\n    }\n\t\n    return {\n        categoryData: categoryData,\n        valueData1: valueData1,\n        valueData2: valueData2,\n        valueData3: valueData3,\n        valueData4: valueData4,\n        valueData5: valueData5,\n        maxAmount:maxA,\n        maxScore:maxS\n    };\n}","html":"","externalScripts":"","updaterUID":"bd-1177271758","theme":"","layout":"","viewCount":68,"userName":"s***五","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xo3tdFGTV7.png?v=1612868054251","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","series-graph","tooltip"],"customTags":[],"updaterUserName":"s***五"}}