{"status":0,"data":{"cid":"x47FL9r-PV","authorUid":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","authorUserName":"J***x","title":"柱状图","description":"主要亮点是柱状颜色的变化","latestVersion":1,"alwaysLatest":1,"createTime":"2020-06-02T02:25:21.000Z","lastUpdateTime":"2020-06-02T02:25:21.000Z","auth":2,"uid":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-06-02T02:25:21.000Z","code":"// mock 数据\nlet dataArr = [\n    { streetname: '茶山', num: 442, contractnum: 465 },\n    { streetname: '南城', num: 412, contractnum: 435 },\n    { streetname: '东城', num: 992, contractnum: 513 },\n    { streetname: '常平', num: 223, contractnum: 132 },\n    { streetname: '松山湖', num: 42, contractnum: 86 },\n    { streetname: '横沥', num: 72, contractnum: 165 }\n]\n\nlet markPointData = [],xdataName = [], dataNum = [], contractnum = []\ndataArr.map( v => {\n    xdataName.push(v.streetname)\n    dataNum.push( (v.num|| 0))\n    contractnum.push(v.contractnum || 0)\n    if( (v.num) / v.contractnum * 100 >= 100 ) {\n        markPointData.push({\n            value : v.num, xAxis: v.streetname, yAxis: v.num,\n            // symbol:'image://' + symbolImg, // 可自定义图片\n            symbolSize: [65,35], // 大小\n            symbolOffset: [0,-5], //偏移量 \n        })\n    }\n})\n\noption = {\n   tooltip: {\n        trigger: 'axis',\n        textStyle: { fontSize: 18 },\n        axisPointer: { \n            type: 'cross', \n            label: { \n                backgroundColor: '#283b56' \n            }\n        },\n        formatter: v => {\n            const [a, b] = v\n            return `\n            <div class='u-p-2'>\n                <div>进厂量：${b.value}</div>\n                <div class='u-mt-2'>合同量：${a.value}</div>\n            </div>\n            `\n        }\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: true,\n        data: xdataName,\n        axisLine: { lineStyle: { color: 'rgba(0,129,251,1)' } },\n        axisLabel: {\n            textStyle: { fontSize: 16, color: \"#000\" },\n            formatter: v => v.length > 4 ? v.slice(0, 4) + '\\n' + v.slice(4) : v,\n            rotate: 0\n        },\n    },\n    yAxis: {\n        type: 'value', scale: true, min: 0,\n        // name: '当日垃圾进场图',\n        nameTextStyle: { color: '#f29f02', fontSize: 20, padding: [0, 0, 5, 30]},\n        boundaryGap: [0.2, 0.2],\n        splitLine: { show: false },\n        axisLine: { lineStyle: { color: 'rgba(0,129,251,1)' } },\n        axisLabel: { textStyle: { fontSize: 16, color: \"#000\"  } }\n    },\n    series: [{\n        name: '垃圾合同量',\n        type: 'bar',\n        barWidth: 20,\n        data: contractnum,\n        itemStyle: {\n            color: params => {\n                return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                    offset: 0,\n                    color: '#0ef565'\n                }, {\n                    offset: 1,\n                    color: '#0ef565'\n                }])\n            }\n        }\n    },{\n        name: '垃圾产生量',\n        type: 'bar',\n        barWidth: 20,\n        data: dataNum,\n        markPoint: {\n            data: markPointData,\n            // ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\n            symbol: 'pin',\n            itemStyle: {\n              color: '#f00'  \n            },\n            label: {\n                color: '#fff',\n                fontSize: 12\n            }\n        },\n        itemStyle: {\n            color: params => {\n                // 进厂量 和 合同量的占比 \n                let percent = params.value / contractnum[params.dataIndex] * 100\n                if( percent <= 80 ) {\n                    return '#00deff'\n                } else if(percent >= 80 && percent < 100) {\n                    return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: '#f9d000'\n                    }, {\n                        offset: 0.3,\n                        color: '#00deff'\n                    },{\n                        offset: 1,\n                        color: '#00deff'\n                    }])\n                } else {\n                    return '#ff393e'\n                }\n            },\n        }\n    }]\n};","html":"","externalScripts":"","updaterUID":"obd-oCTc_U8hPZbn_FmFJxbd5rj6Wwbow3n","theme":"","layout":"","viewCount":235,"userName":"J***x","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x47FL9r-PV.png?v=1591064721427","isCustomThumbnail":0,"builtinTags":["category-work","grid","markPoint","series-bar","tooltip"],"customTags":[],"updaterUserName":"J***x"}}