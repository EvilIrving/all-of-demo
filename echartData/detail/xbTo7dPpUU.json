{"status":0,"data":{"cid":"xbTo7dPpUU","authorUid":"obd-oDlaDs0J42nfV34ZIq3ZyQK0OiRx31H","authorUserName":"林***Y","title":"双饼图","description":"双饼图","latestVersion":1,"alwaysLatest":0,"createTime":"2021-09-16T06:16:55.000Z","lastUpdateTime":"2021-09-16T06:16:55.000Z","auth":2,"uid":"obd-oDlaDs0J42nfV34ZIq3ZyQK0OiRx31H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.0","versionCreateTime":"2021-09-16T06:16:55.000Z","code":"const payload = {\n    id: 'echarts-0-1',\n    wordNum: 3,\n    data: {\n        title1: '总数',\n        title2: '总数',\n        label1: '总数',\n        label2: '总数',\n        tooltip: true,\n        total1: 492,\n        scaleData1: [{\n            name: '123',\n            value: 123\n        }, {\n            name: '1234',\n            value: 123\n        }, {\n            name: '12345',\n            value: 123\n        }, {\n            name: '123456',\n            value: 123\n        }],\n        total2: 492,\n        scaleData2: [{\n            name: '123',\n            value: 123\n        }, {\n            name: '1234',\n            value: 123\n        }, {\n            name: '12345',\n            value: 123\n        }, {\n            name: '123456',\n            value: 123\n        }]\n    }\n}\n\nconst getRadius = radius1 => {\n    let radius2 = radius1 - 5\n    let radius3 = radius2 - 20\n\n    if (window.innerWidth < 1600) {\n        radius1 *= 0.8\n        radius2 *= 0.8\n        radius3 *= 0.8\n    }\n    return {\n        radius1,\n        radius2,\n        radius3\n    }\n}\n\nconst getData = (scaleData, total) => {\n    const color1 = ['#FFF43D', '#FF863D', '#594BDF', '#FF6363', '#0080FF', '#31CC72', '#3DCFFF']\n    const data = []\n    for (let i = 0; i < scaleData.length; i++) {\n        data.push(\n            {\n                value: scaleData[i].value,\n                name: scaleData[i].name,\n                itemStyle: {\n                    color: color1[i]\n                },\n                label: {\n                    color: color1[i]\n                }\n            },\n            {\n                value: total / 100,\n                name: '',\n                tooltip: {\n                    show: false\n                },\n                itemStyle: {\n                    label: {\n                        show: false\n                    },\n                    labelLine: {\n                        show: false\n                    },\n                    color: 'rgba(0, 0, 0, 0)',\n                    borderColor: 'rgba(0, 0, 0, 0)',\n                    borderWidth: 0\n                }\n            }\n        )\n    }\n    return data\n}\n\nconst getPie = config => {\n    const { title, centerData, radius, data, label, showLable, total, totalFontSize = 14 } = config\n    const { radius1, radius2, radius3 } = radius\n    return [\n        {\n            name: title,\n            type: 'pie',\n            clockwise: false,\n            center: centerData,\n            avoidLabelOverlap: true,\n            radius: [radius3 + '%', radius2 + '%'],\n            emphasis: {\n                scale: false\n            },\n            labelLine: {\n                length2: 5\n            },\n            label: {\n                show: showLable,\n                position: 'outer',\n                alignTo: 'none',\n                bleedMargin: -20,\n                distanceToLabelLine: 5,\n                formatter(e) {\n                    if (e.name) {\n                        return `{c|${e.name} ${e.value}}`\n                    }\n                },\n                padding: -5,\n                rich: {\n                    a: {\n                        padding: [0, 0, 3, 0],\n                        fontSize: 14,\n                        color: '#fff',\n                        lineHeight: 16\n                    },\n                    c: {\n                        lineHeight: 18\n                    }\n                }\n            },\n            data\n        },\n        {\n            name: title,\n            type: 'pie',\n            clockwise: false,\n            center: centerData,\n            radius: [radius2 + '%', radius1 + '%'],\n            emphasis: {\n                scale: false\n            },\n            tooltip: {\n                show: false\n            },\n            label: {\n                show: true,\n                position: 'center',\n                formatter: total ? '{value|' + total + '}\\n{label|' + label + '}' : '{value|' + label + '}',\n                rich: {\n                    value: {\n                        padding: 5,\n                        align: 'center',\n                        verticalAlign: 'middle',\n                        fontSize: totalFontSize,\n                        color: '#0080FF',\n                        opacity: 1\n                    },\n                    label: {\n                        align: 'center',\n                        verticalAlign: 'middle',\n                        fontSize: 14,\n                        color: '#0080FF',\n                        opacity: 1\n                    }\n                }\n            },\n            labelLine: {\n                show: false\n            },\n            data: JSON.parse(JSON.stringify(data)).map(item => {\n                item.itemStyle.opacity = 0.3\n                return item\n            })\n        }\n    ]\n}\n\nconst getTooltip = (tooltip, title) => {\n    return {\n        show: !!tooltip,\n        backgroundColor: 'rgba(9, 30, 60, 0.6)',\n        extraCssText: 'box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;',\n        borderWidth: 0,\n        confine: false,\n        appendToBody: true,\n        textStyle: {\n            color: '#fff',\n            fontSize: 10\n        },\n        // 轴触发提示才有效\n        axisPointer: {\n            type: 'shadow'\n        },\n        shadowStyle: {\n            color: 'rgba(157, 168, 245, 0.1)'\n        },\n        formatter(data) {\n            var tmp = ['<h5 class=\"echarts-tip-h5\">' + data.name + '</h5>']\n            tmp.push(\n                '<div class=\"echarts-tip-div\"><div class=\"left\">' +\n                    data.marker +\n                    ' ' +\n                    (title || data.seriesName) +\n                    '：</div><div class=\"right\">' +\n                    data.value +\n                    '</div></div>'\n            )\n            let html1 = ''\n            html1 += '<div class=\"echarts-tip-div\">'\n            html1 += '<div class=\"left\">' + data.marker + ' 占比：</div>'\n            html1 += '<div class=\"right\">' + (data.data.percent || data.percent.toFixed(2)) + '%</div>'\n            html1 += '</div>'\n            tmp.push(html1)\n            return tmp.join('')\n        }\n    }\n}\n\nconst {\n    scaleData1 = [],\n    total1 = 0,\n    scaleData2 = [],\n    total2 = 0,\n    title1,\n    title2,\n    label1,\n    label2,\n    radius = 60,\n    center1 = ['25%', '50%'],\n    center2 = ['75%', '50%'],\n    tooltip\n} = payload.data\n\noption = {\n    tooltip: getTooltip(tooltip),\n    legend: [],\n    toolbox: {\n        show: false\n    },\n    series: []\n}\n\noption.series = option.series.concat(\n    getPie({\n        title: title1,\n        centerData: center1,\n        radius: getRadius(radius),\n        data: getData(scaleData1, total1),\n        label: label1,\n        showLable: true,\n        total: null,\n        totalFontSize: 14\n    })\n)\noption.series = option.series.concat(\n    getPie({\n        title: title2,\n        centerData: center2,\n        radius: getRadius(radius),\n        data: getData(scaleData2, total2),\n        label: label2,\n        showLable: true,\n        total: null,\n        totalFontSize: 14\n    })\n)","html":"","externalScripts":"","updaterUID":"obd-oDlaDs0J42nfV34ZIq3ZyQK0OiRx31H","theme":"","layout":"","viewCount":0,"userName":"林***Y","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xbTo7dPpUU.png?v=1631773015342","isCustomThumbnail":0,"builtinTags":["category-work","series-pie","toolbox","tooltip"],"customTags":[],"updaterUserName":"林***Y"}}