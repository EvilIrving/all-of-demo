{"status":0,"data":{"cid":"xDqDpe_pK6","authorUid":"bd-51445384","authorUserName":"b***0","title":"立体柱状图","description":"立体柱状图","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-13T02:26:14.000Z","lastUpdateTime":"2020-07-13T02:26:14.000Z","auth":2,"uid":"bd-51445384","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-13T02:26:14.000Z","code":"        var MyCubeRect = echarts.graphic.extendShape({\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 12, //柱宽\r\n            zWidth: 6, //阴影折角宽\r\n            zHeight: 3, //阴影折角高\r\n        },\r\n        buildPath: function (ctx, shape) {\r\n            const api = shape.api;\r\n            const xAxisPoint = api.coord([shape.xValue, 0]);\r\n            const p0 = [shape.x - shape.width / 2, shape.y];\r\n            const p1 = [shape.x - shape.width / 2, shape.y];\r\n            const p4 = [shape.x + shape.width - shape.width / 2, shape.y];\r\n            const p2 = [xAxisPoint[0] - shape.width / 2, xAxisPoint[1]];\r\n            const p3 = [xAxisPoint[0] + shape.width - shape.width / 2, xAxisPoint[1]];\r\n\r\n            ctx.moveTo(p0[0], p0[1]); //0\r\n            ctx.lineTo(p1[0], p1[1]); //1\r\n            ctx.lineTo(p2[0], p2[1]); //2\r\n            ctx.lineTo(p3[0], p3[1]); //3\r\n            ctx.lineTo(p4[0], p4[1]); //4\r\n            ctx.lineTo(p0[0], p0[1]); //0\r\n            ctx.closePath();\r\n        }\r\n    });\r\n    //单体阴影柱状图\r\n    var MyCubeShadow = echarts.graphic.extendShape({\r\n        shape: {\r\n            x: 0,\r\n            y: 0,\r\n            width: 12,\r\n            zWidth: 6,\r\n            zHeight: 3,\r\n        },\r\n        buildPath: function (ctx, shape) {\r\n            const api = shape.api;\r\n            const xAxisPoint = api.coord([shape.xValue, 0]);\r\n            const p0 = [shape.x - shape.width / 2, shape.y];\r\n            const p1 = [shape.x - shape.width / 2, shape.y];\r\n            const p4 = [shape.x + shape.width - shape.width / 2, shape.y];\r\n            const p6 = [shape.x + shape.width + shape.zWidth - shape.width / 2, shape.y - shape.zHeight];\r\n            const p7 = [shape.x + shape.zWidth - shape.width / 2, shape.y - shape.zHeight];\r\n            const p3 = [xAxisPoint[0] + shape.width - shape.width / 2, xAxisPoint[1]];\r\n            const p5 = [xAxisPoint[0] + shape.width + shape.zWidth - shape.width / 2, xAxisPoint[1] - shape.zHeight];\r\n\r\n            ctx.moveTo(p4[0], p4[1]); //4\r\n            ctx.lineTo(p3[0], p3[1]); //3\r\n            ctx.lineTo(p5[0], p5[1]); //5\r\n            ctx.lineTo(p6[0], p6[1]); //6\r\n            ctx.lineTo(p4[0], p4[1]); //4\r\n\r\n            ctx.moveTo(p4[0], p4[1]); //4\r\n            ctx.lineTo(p6[0], p6[1]); //6\r\n            ctx.lineTo(p7[0], p7[1]); //7\r\n            ctx.lineTo(p1[0], p1[1]); //1\r\n            ctx.lineTo(p4[0], p4[1]); //4\r\n            ctx.closePath();\r\n        }\r\n    });\r\n    echarts.graphic.registerShape('MyCubeRect', MyCubeRect);\r\n    echarts.graphic.registerShape('MyCubeShadow', MyCubeShadow);\r\n    option = {\r\n            tooltip: {\r\n                trigger: 'item',\r\n                axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n                },\r\n                formatter: function (params) {\r\n                    var color = params.color; //图例颜色\r\n                    var htmlStr = '<div>';\r\n                    htmlStr += params.name + '<br/>'; //x轴的名称\r\n                    htmlStr += '<span ></span>';\r\n                    htmlStr += params.seriesName + '：' + params.value + ' %<br/>';\r\n                    htmlStr += '<span ></span>';\r\n                    if (params.name == \"自开工累计\") {\r\n                        htmlStr += '金额(万元)：' + data_str[1] + '<br/>';\r\n                    }\r\n                    if (params.name == \"本年\") {\r\n                        htmlStr += '金额(万元)：' + data_str[3] + '<br/>';\r\n                    }\r\n                    if (params.name == \"本月\") {\r\n                        htmlStr += '金额(万元)：' + data_str[5] + '<br/>';\r\n                    }\r\n                    if (params.name == \"设计\") {\r\n                        htmlStr += '金额(万元)：' + E_value + '<br/>';\r\n                    }\r\n                    if (params.name == \"采购\") {\r\n                        htmlStr += '金额(万元)：' + P_value + '<br/>';\r\n                    }\r\n                    if (params.name == \"施工\") {\r\n                        htmlStr += '金额(万元)：' + C_value + '<br/>';\r\n                    }\r\n                    htmlStr += '</div>';\r\n                    return htmlStr;\r\n                }\r\n            },\r\n            grid: {\r\n                borderWidth: 0,\r\n                x: 50,\r\n                x2: 10,\r\n                y: 5,\r\n                y2: 50\r\n            },\r\n            calculable: true,\r\n            xAxis: [{\r\n                type: 'category',\r\n                axisLabel: {\r\n                    rotate: 27  \r\n                },\r\n                data: ['监造委托', '制造问题整改', '到货验收', '桩基检测', '混凝土强度评定', '焊接一次', '质量控制点报验', '现场质量问题整改', '工程质量验收'],\r\n            }],\r\n            yAxis: [{\r\n                type: 'value',\r\n                min: 0,\r\n                max: 105,\r\n                axisLabel: {\r\n                    formatter: '{value} %'\r\n                }\r\n            }],\r\n            series: [{\r\n                name: '完成率',\r\n                barWidth: '33%',\r\n                type: 'custom',\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: function (params) {\r\n                            var colorList = ['#EE6911', '#EE6666', '#AECC33', '#EEEE66', '#EE6666', '#2BD5B3', '#33CCCC', '#CC33CC', '#C7F709'];\r\n                            return colorList[params.dataIndex]\r\n                        }\r\n                    },\r\n                },\r\n                renderItem: function (params, api) {\r\n                    var colorList = ['#EE6911', '#EE6666', '#AECC33', '#EEEE66', '#EE6666', '#2BD5B3', '#33CCCC', '#CC33CC', '#C7F709'];\r\n                    var colorList1 = ['#EE6911', '#EE6666', '#AECC33', '#EEEE66', '#EE6666', '#2BD5B3', '#33CCCC', '#CC33CC', '#C7F709'];\r\n                    let location = api.coord([api.value(0), api.value(1)]);\r\n                    return {\r\n                        type: 'group',\r\n                        children: [{\r\n                            type: 'MyCubeRect',\r\n                            shape: {\r\n                                api,\r\n                                xValue: api.value(0),\r\n                                yValue: api.value(1),\r\n                                x: location[0],\r\n                                y: location[1]\r\n                            },\r\n                            style: {\r\n                                fill: colorList[params.dataIndex]\r\n                            }\r\n                        }, {\r\n                            type: 'MyCubeShadow',\r\n                            shape: {\r\n                                api,\r\n                                xValue: api.value(0),\r\n                                yValue: api.value(1),\r\n                                x: location[0],\r\n                                y: location[1]\r\n                            },\r\n                            style: {\r\n                                fill: colorList1[params.dataIndex]\r\n                            }\r\n                        }]\r\n                    };\r\n                },\r\n                data: [36.92, 89.74, 98.45, 98.61, 99.86, 98.13, 98.78, 99.14, 14.34]\r\n            }]\r\n        }; \r\n        ","html":"","externalScripts":"","updaterUID":"bd-51445384","theme":"","layout":"","viewCount":25,"userName":"b***0","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDqDpe_pK6.png?v=1594607174962","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","tooltip"],"customTags":[],"updaterUserName":"b***0"}}