{"status":0,"data":{"cid":"xWoE4A_-0G","authorUid":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","authorUserName":"仰***鬙","title":"桑基图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-30T09:49:56.000Z","lastUpdateTime":"2020-11-30T09:49:56.000Z","auth":2,"uid":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-30T09:49:56.000Z","code":"\nconst colors = [\n    '#E7DC54',\n    '#67A15D',\n    '#F47A80',\n    '#AD7152',\n    '#DB3F92',\n    '#834DA0',\n    '#58A5AA',\n    '#71BD41',\n    '#EE3420',\n    '#9DD927',\n    '#E7DC54',\n    '#67A15D',\n    '#F47A80',\n    '#AD7152',\n    '#DB3F92',\n    '#834DA0',\n    '#58A5AA',\n    '#71BD41',\n    '#EE3420',\n    '#979067'\n\n\n]\nconst res = [\n    { arrearscompany: 'a公司', city: '合肥', cumulativearrearsmoney: 238 },\n    { arrearscompany: 'b公司', city: '合肥', cumulativearrearsmoney: 2318 },\n    { arrearscompany: 'c公司', city: '合肥', cumulativearrearsmoney: 1238 },\n    { arrearscompany: 'd公司', city: '合肥', cumulativearrearsmoney: 218 },\n    { arrearscompany: 'e公司', city: '合肥', cumulativearrearsmoney: 2381 },\n    { arrearscompany: 'f公司', city: '合肥', cumulativearrearsmoney: 3238 },\n    { arrearscompany: 'f公司', city: '六安', cumulativearrearsmoney: 1221 },\n    { arrearscompany: '六安', city: '合肥', cumulativearrearsmoney: 3238 },\n]\n\nconst nodesSet = new Set([...res.map(e => e.arrearscompany), ...res.map(e => e.city)])\nconst nodeList = Array.from(nodesSet)\nconst nodeJson = {}\nconst data = []\nconst links = []\nnodeList.forEach((name, i) => {\n    nodeJson[name] = colors[i % colors.length]\n    data.push({\n        name,\n        itemStyle: {\n            color: nodeJson[name] || colors[0]\n        }\n    })\n\n})\nres.forEach(e => {\n    const color = new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\n        offset: 0,\n        color: nodeJson[e.city] || colors[0]\n    }, {\n        offset: 1,\n        color: nodeJson[e.cumulativearrearsmoney] || colors[colors.length - 1]\n    }])\n    links.push({\n        source: e.city,\n        target: e.arrearscompany,\n        value: e.cumulativearrearsmoney,\n        lineStyle: {\n            color: color\n        }\n    })\n})\noption =  {\n            series: {\n                type: 'sankey',\n                layout: 'none',\n                layble: {\n\n                },\n                focusNodeAdjacency: 'allEdges',\n                data: data,\n                links: links,\n                itemStyle: {\n                    borderWidth: 1,\n                    borderColor: '#aaa',\n                    opacity: 1\n                },\n                lineStyle: {\n                    color: 'source',\n                    curveness: 0.5,\n                    opacity: 0.6\n                },\n                label: {\n                    // color: '#fff',\n                    // fontSize: 48,\n                    padding: [0, 0, 0, 20]\n                }\n            }\n        }","html":"","externalScripts":"","updaterUID":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","theme":"","layout":"","viewCount":74,"userName":"仰***鬙","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWoE4A_-0G.png?v=1606729796241","isCustomThumbnail":0,"builtinTags":["category-work","series-sankey"],"customTags":[],"updaterUserName":"仰***鬙"}}