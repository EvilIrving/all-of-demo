{"status":0,"data":{"cid":"x0ORgAgaSV","authorUid":"obd-o-HS0ZTEBpotGpv-NJsAwpsi1oLQiAQ","authorUserName":"s***1","title":"产品比例图","description":"gauge+pie 实现","latestVersion":1,"alwaysLatest":1,"createTime":"2020-10-28T06:05:08.000Z","lastUpdateTime":"2020-10-28T06:05:08.000Z","auth":1,"uid":"obd-o-HS0ZTEBpotGpv-NJsAwpsi1oLQiAQ","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-28T06:05:08.000Z","code":"data = [{\r\n        name: \"投入品\",\r\n        value: 754\r\n    },\r\n    {\r\n        name: \"产出品\",\r\n        value: 611\r\n    },\r\n\r\n];\r\n\r\n\r\nvar sum = 0\r\ndata.map(item => {\r\n    sum += item.value;\r\n})\r\n\r\nvar seriesData = getSeriesData(data)\r\n\r\nfunction getSeriesData(data) {\r\n\r\n    var series = [{\r\n            name: \"大环\",\r\n            type: 'gauge',\r\n            splitNumber: 12,\r\n            radius: '82%',\r\n            center: ['50%', '55%'],\r\n            startAngle: 0,\r\n            endAngle: 359.9999,\r\n            axisLine: {\r\n                show: false,\r\n                lineStyle: {\r\n                    color: [\r\n                        [1, '#0E8564']\r\n                    ]\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            splitLine: {\r\n                show: true,\r\n                length: 32,\r\n                lineStyle: {\r\n                    color: 'auto',\r\n                    width: 3.5\r\n                }\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            detail: {\r\n                show: false\r\n            }\r\n        },\r\n        {\r\n            name: '小环',\r\n            type: 'gauge',\r\n            splitNumber: 12,\r\n            radius: '78%',\r\n            center: ['50%', '55%'],\r\n            startAngle: 0,\r\n            endAngle: 359.9999,\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisTick: {\r\n                show: true,\r\n                lineStyle: {\r\n                    color: '#0E8564',\r\n                    width: 3\r\n                },\r\n                length: 20,\r\n                splitNumber: 3\r\n            },\r\n            splitLine: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                show: false\r\n            },\r\n            detail: {\r\n                show: false\r\n            }\r\n        },\r\n    ]\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n        series.push({\r\n            name: data[i].name,\r\n            type: 'pie',\r\n            clockWise: true,\r\n            z: 2,\r\n            hoverAnimation: false,\r\n            radius: [71 - i * 30 + '%', 64 - i * 30 + '%'],\r\n            center: [\"50%\", \"55%\"],\r\n            label: {\r\n                show: true,\r\n                position: 'outside',\r\n                formatter: '{a|{b}：{d}%}\\n{hr|}',\r\n                rich: {\r\n                    // hr: {\r\n                    //     backgroundColor: 't',\r\n                    //     borderRadius: 3,\r\n                    //     width: 3,\r\n                    //     height: 3,\r\n                    //     padding: [3, 3, 0, -12]\r\n                    // },\r\n                    a: {\r\n                        color: '#fff',\r\n                        fontSize:13,\r\n                        padding: [10, 0, 0, -110]\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    length: 70 + i * 135,\r\n                    length2: 100,\r\n                    lineStyle: {\r\n                        width: 1\r\n                    }\r\n                }\r\n            },\r\n            data: [{\r\n                value: data[i].value,\r\n                name: data[i].name\r\n            }, {\r\n                value: sum - data[i].value,\r\n                name: '',\r\n                itemStyle: {\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                label: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        series.push({\r\n            name: '背景线',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: true,\r\n            hoverAnimation: false,\r\n            radius: [69.5 - i * 30 + '%', 66.5 - i * 30 + '%'],\r\n            center: [\"50%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n                color: \"RGB(14,115,92)\",\r\n            },\r\n            data: [{\r\n                value: 100,\r\n\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n    }\r\n    return series;\r\n}\r\n\r\noption = {\r\n    backgroundColor: '#090F29',\r\n    color: [{\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 1,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(21,215,142,1)'\r\n        }, {\r\n            offset: 1,\r\n            color: 'rgba(97,252,104,1)'\r\n        }],\r\n        global: false\r\n    }, {\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 1,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(21,215,142,1)'\r\n        }, {\r\n            offset: 1,\r\n            color: 'rgba(97,252,104,1)'\r\n        }],\r\n        global: false\r\n    }],\r\n    grid: {\r\n        top: '10%',\r\n        bottom: '0%',\r\n        left: \"0%\",\r\n        containLabel: false\r\n    },\r\n    xAxis: [{\r\n        show: false\r\n    }],\r\n    yAxis: [{\r\n        type: 'category',\r\n        inverse: false,\r\n        z: 3,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            inside: false,\r\n            textStyle: {\r\n                color: \"RGB(78,184,252)\",\r\n                fontSize: 25,\r\n            },\r\n            show: false\r\n        },\r\n        // data: optionData.yAxis\r\n    }],\r\n\r\n    series: seriesData\r\n};","html":"","externalScripts":"","updaterUID":"obd-o-HS0ZTEBpotGpv-NJsAwpsi1oLQiAQ","theme":"dark","layout":"","viewCount":533,"userName":"s***1","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0ORgAgaSV.png?v=1603865108439","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-gauge","series-pie"],"customTags":[],"updaterUserName":"s***1"}}