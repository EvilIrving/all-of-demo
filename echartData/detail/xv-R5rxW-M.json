{"status":0,"data":{"cid":"xv-R5rxW-M","authorUid":"obd-o-3zLks2c_VS1OLn4_Qy0T4JHiC72A1","authorUserName":"c***蝎","title":"机房选点-国内","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-09-18T07:26:30.000Z","lastUpdateTime":"2020-09-18T07:26:30.000Z","auth":2,"uid":"obd-o-3zLks2c_VS1OLn4_Qy0T4JHiC72A1","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-18T09:58:57.000Z","code":"// 国内节点\n\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\n\n//如果想要修改，请点击上方克隆，然后在自己的版本上修改，不要在lz的版本上改！！\n\nvar geoGpsMap = {\n    '1': [125.8154, 44.2584],\n    '2': [125.8154, 44.2584],\n    '3': [117.1582, 36.8701],\n    '4': [117.1582, 36.8701],\n};\nvar geoCoordMap = {\n    '沈阳市': [123.43, 41.8],\n    '济南市': [116.98, 36.67],\n    '青岛市': [120.38, 36.07],\n    '南京市': [118.78, 32.07],\n    '无锡市': [120.3, 31.57],\n    '郑州市': [113.62, 34.75],\n    '武汉市': [114.3, 30.6],\n    '石家庄市': [114.52, 38.05],\n    '西安市': [108.93, 34.27],\n    '重庆市': [106.55, 29.57],\n    '杭州市': [120.15, 30.28],\n    '合肥市': [117.25, 31.83],\n    '福州市': [119.3, 26.08],\n    '宁波市': [121.55, 29.88],\n    '东莞市': [113.75, 23.05],\n    \"芜湖市\": [118.38, 31.33],\n    \"昆明市\": [102.72, 25.05],\n    \"呼和浩特市\": [111.73, 40.83],\n    \"天津市\": [117.2, 39.12],\n    \"上海市\": [121.47, 31.23],\n    \"长沙市\": [112.93, 28.23],\n    \"北京市\": [116.4, 39.9],\n    \"太原市\": [112.55, 37.87],\n    \"深圳市\": [114.05, 22.55],\n    \"广州市\": [113.27, 23.13],\n    \"南宁市\": [108.37, 22.82],\n    \"成都市\": [104.07, 30.67],\n    \"南昌市\": [115.85, 28.68],\n    \"淮南市\": [117.0, 32.63],\n    \"泉州市\": [118.67, 24.88]\n};\n\n// 电信节点\nvar d1 = [\"芜湖市\", \"石家庄市\", \"昆明市\", \"呼和浩特市\", \"宁波市\", \"天津市\", \"上海市\", \"长沙市\", \"北京市\", \"太原市\", \"深圳市\", \"广州市\", \"南宁市\", \"成都市\", \"南昌市\"]\n// 联通节点\nvar d3 = [\"沈阳市\", \"合肥市\", \"南昌市\", \"郑州市\", \"东莞市\", \"天津市\", \"上海市\", \"长沙市\", \"北京市\", \"太原市\", \"深圳市\", \"广州市\", \"南宁市\", \"成都市\", \"南昌市\"]\n// 移动节点\nvar d2 = [\"淮南市\", \"南京市\", \"杭州市\", \"泉州市\", \"武汉市\", \"上海市\", \"长沙市\", \"北京市\", \"太原市\", \"深圳市\", \"广州市\", \"南宁市\", \"成都市\", \"南昌市\"]\n// 三通节点\nvar d4 = [\"沈阳市\", \"济南市\", \"青岛市\", \"南京市\", \"无锡市\", \"郑州市\", \"武汉市\", \"石家庄市\", \"西安市\", \"重庆市\", \"杭州市\", \"合肥市\", \"福州市\", \"宁波市\", \"东莞市\"]\n\nvar colors = [\n    [\"#FFDB5C\", \"#FFDB5C\", \"#FFDB5C\", \"#FFDB5C\", \"#04B9FF\", \"#04B9FF\"],\n    [\"#1DE9B6\", \"#F46E36\", \"#04B9FF\", \"#5DBD32\", \"#FFC809\", \"#FB95D5\", \"#BDA29A\", \"#6E7074\", \"#546570\", \"#C4CCD3\"],\n    [\"#37A2DA\", \"#67E0E3\", \"#32C5E9\", \"#9FE6B8\", \"#FFDB5C\", \"#FF9F7F\", \"#FB7293\", \"#E062AE\", \"#E690D1\", \"#E7BCF3\", \"#9D96F5\", \"#8378EA\", \"#8378EA\"],\n    [\"#DD6B66\", \"#759AA0\", \"#E69D87\", \"#8DC1A9\", \"#EA7E53\", \"#EEDD78\", \"#73A373\", \"#73B9BC\", \"#7289AB\", \"#91CA8C\", \"#F49F42\"],\n];\nvar colorIndex = 0;\n$(function() {\n    var year = [\"中国电信\", \"中国移动\", \"中国联通\", \"三通节点\"];\n    var mapData = [\n        d1.map(item => {\n            return {\n                year: \"中国电信\",\n                name: item,\n                value: 25.2,\n                value1: 25.2\n            }\n        }),\n        d2.map(item => {\n            return {\n                year: \"中国移动\",\n                name: item,\n                value: 25.2,\n                value1: 25.2\n            }\n        }),\n        d3.map(item => {\n            return {\n                year: \"中国联通\",\n                name: item,\n                value: 25.2,\n                value1: 25.2\n            }\n        }),\n        d4.map(item => {\n            return {\n                year: \"三通节点\",\n                name: item,\n                value: 25.2,\n                value1: 25.2\n            }\n        })\n    ];\n\n\n    for (var key in geoCoordMap) {\n        // mapData[0].push({\n        //     \"year\": '中国电信',\n        //     \"name\": key,\n        //     \"value\": 25.2,\n        //     \"value1\": 25.2,\n        // });\n        mapData[1].push({\n            \"year\": '中国移动',\n            \"name\": key,\n            \"value\": 25.2,\n            \"value1\": 25.2,\n        });\n        mapData[2].push({\n            \"year\": '中国联通',\n            \"name\": key,\n            \"value\": 25.2,\n            \"value1\": 25.2,\n        });\n        mapData[3].push({\n            \"year\": '三通节点',\n            \"name\": key,\n            \"value\": 25.2,\n            \"value1\": 25.2,\n        });\n    }\n\n    /*柱子Y名称*/\n    var categoryData = [];\n    for (var i = 0; i < mapData.length; i++) {\n        mapData[i].sort(function sortNumber(a, b) {\n            return a.value - b.value\n        });\n        categoryData.push([]);\n        for (var j = 0; j < mapData[i].length; j++) {\n            categoryData[i].push(mapData[i][j].name);\n        }\n    }\n\n    $.getJSON(uploadedDataURL, function(geoJson) {\n        echarts.registerMap('china', geoJson);\n        var convertData = function(data) {\n            var res = [];\n            for (var i = 0; i < data.length; i++) {\n                var geoCoord = geoCoordMap[data[i].name];\n                if (geoCoord) {\n                    res.push({\n                        name: data[i].name,\n                        value: geoCoord.concat(data[i].value)\n                    });\n                }\n            }\n            return res;\n        };\n\n        optionXyMap01 = {\n            // 底部tab切换\n            timeline: {\n                data: year,\n                axisType: 'category',\n                autoPlay: true,\n                playInterval: 3000,\n                left: '10%',\n                right: '10%',\n                bottom: '3%',\n                width: '80%',\n                //  height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbolSize: 10,\n                lineStyle: {\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: true,\n                    showPrevBtn: true,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n\n            },\n            baseOption: {\n                animation: true,\n                animationDuration: 1000,\n                animationEasing: 'cubicInOut',\n                animationDurationUpdate: 1000,\n                animationEasingUpdate: 'cubicInOut',\n                grid: {\n                    right: '1%',\n                    top: '15%',\n                    bottom: '10%',\n                    width: '20%'\n                },\n                tooltip: {\n                    trigger: 'axis', // hover触发器\n                    axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                        type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n                        shadowStyle: {\n                            color: 'rgba(150,150,150,0.1)' //hover颜色\n                        }\n                    }\n                },\n                geo: {\n                    show: true,\n                    map: 'china',\n                    roam: true,\n                    zoom: 1,\n                    center: [113.83531246, 34.0267395887],\n                    label: {\n                        emphasis: {\n                            show: true\n                        }\n                    },\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            areaColor: {\n                                type: 'radial',\n                                x: 0.5,\n                                y: 0.5,\n                                r: 0.8,\n                                colorStops: [{\n                                    offset: 0,\n                                    color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\n                                }, {\n                                    offset: 1,\n                                    color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\n                                }],\n                                globalCoord: false // 缺省为 false\n                            },\n                            shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: -2,\n                            shadowOffsetY: 2,\n                            shadowBlur: 10\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0\n                        }\n                    }\n                },\n            },\n            options: []\n\n        };\n\n        for (var n = 0; n < year.length; n++) {\n            // 地图叠加显示\n            optionXyMap01.options.push({\n                backgroundColor: '#013954',\n                title: {\n                    text: year[n],\n                    subtext: '',\n                    left: 'center',\n                    top: '15%',\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 25\n                    }\n                },\n                xAxis: {\n                    type: 'value',\n                    scale: true,\n                    position: 'top',\n                    min: 0,\n                    boundaryGap: false,\n                    splitLine: {\n                        show: false\n                    },\n                    axisLine: {\n                        show: false\n                    },\n                    axisTick: {\n                        show: false\n                    },\n                    axisLabel: {\n                        margin: 2,\n                        textStyle: {\n                            color: '#aaa'\n                        }\n                    },\n                },\n                yAxis: {\n                    type: 'category',\n                    name: 'TOP 20',\n                    nameGap: 16,\n                    show: false,\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisTick: {\n                        show: false,\n                        lineStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    axisLabel: {\n                        interval: 0,\n                        textStyle: {\n                            color: '#ddd'\n                        }\n                    },\n                    data: []\n                },\n\n                series: [\n                    //地图？\n                    {\n                        type: 'map',\n                        map: 'china',\n                        geoIndex: 0,\n                        aspectScale: 0.75, //长宽比\n                        showLegendSymbol: false, // 存在legend时显示\n                        label: {\n                            normal: {\n                                show: false\n                            },\n                            emphasis: {\n                                show: false,\n                                textStyle: {\n                                    color: '#fff'\n                                }\n                            }\n                        },\n                        roam: true,\n                        itemStyle: {\n                            normal: {\n                                areaColor: '#031525',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                areaColor: '#2B91B7'\n                            }\n                        },\n                        animation: false,\n                        data: mapData\n                    },\n                    //地图点的动画效果\n                    {\n                        //  name: 'Top 5',\n                        type: 'effectScatter',\n                        coordinateSystem: 'geo',\n                        data: convertData(mapData[n].sort(function(a, b) {\n                            return b.value - a.value;\n                        }).slice(0, 20)),\n                        symbolSize: function(val) {\n                            return val[2] / 10;\n                        },\n                        showEffectOn: 'render',\n                        rippleEffect: {\n                            brushType: 'stroke'\n                        },\n                        hoverAnimation: true,\n                        label: {\n                            normal: {\n                                formatter: '{b}',\n                                position: 'right',\n                                show: true\n                            }\n                        },\n                        itemStyle: {\n                            normal: {\n                                color: colors[colorIndex][n],\n                                shadowBlur: 10,\n                                shadowColor: colors[colorIndex][n]\n                            }\n                        },\n                        zlevel: 1\n                    }\n                ]\n            })\n        }\n        myChart.setOption(optionXyMap01);\n    });\n});","html":"","externalScripts":"","updaterUID":"obd-o-3zLks2c_VS1OLn4_Qy0T4JHiC72A1","theme":"","layout":"","viewCount":411,"userName":"c***蝎","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xv-R5rxW-M.png?v=1600423137240","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-effectScatter","series-map","timeline","title","tooltip"],"customTags":[],"updaterUserName":"c***蝎"}}