{"status":0,"data":{"cid":"xgJHFW0oE3","authorUid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","authorUserName":"宁***群","title":"地图—散点涟漪效果","description":"非原创，自测试！！！\n出处：https://www.makeapie.com/editor.html?c=x0dK5jItt&v=151","latestVersion":4,"alwaysLatest":0,"createTime":"2021-07-09T09:52:33.000Z","lastUpdateTime":"2021-07-12T09:05:58.000Z","auth":2,"uid":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-12T09:05:58.000Z","code":"// /dep/echarts/map/js/china.js\r\nvar uploadedDataURL = \"/asset/get/s/data-1612933506802-jiXTaHwkp.xlsx\";\r\n\r\nvar uploadedDataURL = \"/asset/get/s/data-1612933506802-jiXTaHwkp.xlsx\";\r\n\r\nwindow.dataList = [{\r\n    name: '安徽',value: 2\r\n}, {\r\n    name: '澳门',value: 0\r\n}, {\r\n    name: '北京',value: 73\r\n}, {\r\n    name: '福建',value: 3\r\n}, {\r\n    name: '甘肃',value: 1\r\n}, {\r\n    name: '广东',value: 154\r\n}, {\r\n    name: '广西',value: 2\r\n}, {\r\n    name: '贵州',value: 0\r\n}, {\r\n    name: '海南',value: 6\r\n}, {\r\n    name: '河北',value: 118\r\n}, {\r\n    name: '河南',value: 5\r\n}, {\r\n    name: '黑龙江',value: 59\r\n}, {\r\n    name: '湖北',value: 4\r\n}, {\r\n    name: '湖南',value: 7\r\n}, {\r\n    name: '吉林',value: 24\r\n}, {\r\n    name: '江苏',value: 6\r\n}, {\r\n    name: '江西',value: 5\r\n}, {\r\n    name: '辽宁',value: 15\r\n}, {\r\n    name: '内蒙古',value: 13\r\n}, {\r\n    name: '宁夏',value: 1\r\n}, {\r\n    name: '青海',value: 1\r\n}, {\r\n    name: '山东',value: 6\r\n}, {\r\n    name: '山西',value: 7\r\n}, {\r\n    name: '陕西',value: 6\r\n}, {\r\n    name: '上海',value: 46\r\n}, {\r\n    name: '四川',value: 11\r\n}, {\r\n    name: '台湾',value: 0\r\n}, {\r\n    name: '天津',value: 13\r\n}, {\r\n    name: '西藏',value: 0\r\n}, {\r\n    name: '香港',value: 0\r\n}, {\r\n    name: '新疆',value: 1\r\n}, {\r\n    name: '云南',value: 1\r\n}, {\r\n    name: '浙江',value: 4\r\n}, {\r\n    name: '重庆',value: 2\r\n}\r\n];\r\n\r\nvar colors = [\"#000080\", \"#0000FF\", \"#4169E1\", \"#6495ED\", \"#B0C4DE\", \"#C0C0C0\"]\r\n\r\nvar geoData = [{\r\n\t    name: \"乌鲁木齐\",\r\n\t    value: [87.68, 43.77]\r\n}, {\r\n\t\tname: \"广州\",\r\n\t\tvalue: [113.23, 23.16]\r\n}, {\r\n\t\tname: \"上海\",\r\n\t\tvalue: [121.48, 31.22]\r\n}]\r\nvar mapDatas = []\r\nfor (let j = 0; j < geoData.length; j++) {\r\n  mapDatas.push({\r\n    name: geoData[j].name + \"\",\r\n    value: geoData[j].value.concat(Math.random() * 500),\r\n  });\r\n}\r\n\r\n// 平滑开关配置\r\nvar roam = false\r\nvar icon = \"path://M739.475397 914.697813h-312.445457c-35.729688 0-69.154895-19.156254-87.189607-49.912683L195.799017 619.145061c-25.954063-44.29679-16.656322-99.996259 21.938617-133.534029l3.201919-3.060702c37.552193-30.928345 95.473254-29.803733 131.764736 1.122564v-272.771955c0-56.00953 45.559548-101.598753 101.5701-101.598752 27.471623 0 52.989759 10.674086 72.147036 29.971555 19.241188 19.436639 29.69117 45.25051 29.436368 72.637199l-1.600448 165.416093 210.275701 14.521709c45.027429 4.465699 78.310397 41.402886 78.310396 85.89615l-2.105959 335.943591c-0.364296 55.673886-45.784674 101.00933-101.262086 101.009329zM259.141544 525.693856l-2.613519 2.414998c-18.509526 15.252348-23.172723 41.319998-11.066011 61.934461l144.01164 245.640068c7.894792 13.45338 21.909965 21.460735 37.556286 21.460735h312.445457c23.96169 0 43.594804-19.63516 43.734996-43.791278l2.10903-335.749163c0-14.689531-11.012799-26.991694-25.647072-28.453995l-209.515386-14.465427c-30.223288-2.078331-53.720398-27.500276-53.441036-57.921062l1.600448-165.41507c0.112563-11.937866-4.409418-23.145093-12.780046-31.54335-8.257041-8.342999-19.269841-12.949914-30.952904-12.949914-24.605348 0-44.353072 19.7467-44.353072 44.045057v450.4063l-87.834288-126.400576c-14.015174-19.295423-43.564104-24.098813-63.254523-9.211784z\"\r\n\r\noption = {\r\n    tooltip: {\r\n        triggerOn: \"click\",\r\n        formatter: function(e, t, n) {\r\n            return .5 == e.value ? e.name + \"：有疑似病例\" : e.seriesName + \"<br />\" + e.name + \"：\" + e.value\r\n        }\r\n    },\r\n    toolbox: {\r\n        show: true,\r\n        feature: {\r\n            myTool:{ //自定义方法 配置   我这是为了实现 饼图切换为柱状图\r\n                show : true,\r\n                title : '平滑开关',\r\n                icon : icon,\r\n                onclick : function (){\r\n                   roam = !roam\r\n                //   只更新数据，此方法不会恢复图形位置\r\n                //   myChart.setOption({\r\n                //         geo:{\r\n                //             roam: roam,\r\n                //         }\r\n                //   })\r\n                \r\n                // setOption第二个参数：是否不跟之前设置的 option 进行合并。\r\n                // 默认为 false，即表示合并。\r\n                // 如果为 true，表示所有组件都会被删除，\r\n                // 然后根据新 option 创建所有新组件。\r\n                \r\n                // 先改变option的值，再进行setOption设置，\r\n                // 添加【true】，表示重新绘制\r\n                // 使用此方法可使其在更新后图形恢复到中心位置\r\n                   option.geo.roam = roam\r\n                   myChart.setOption(option, true)\r\n                }\r\n            },\r\n        },\r\n        left:10,\r\n        top: 10,\r\n    },\r\n    visualMap: {\r\n        min: 0,\r\n        max: 2000,\r\n        left: 26,\r\n        bottom: 50,\r\n        showLabel: !0,\r\n        text: [\"高\", \"低\"],\r\n        pieces: [{\r\n            gt: 100,\r\n            label: \"> 100\",\r\n            color: colors[0]\r\n        }, {\r\n            gte: 80,\r\n            lte: 100,\r\n            label: \"80 - 100\",\r\n            color: colors[1]\r\n        }, {\r\n            gte: 50,\r\n            lte: 80,\r\n            label: \"50 - 80\",\r\n            color: colors[2]\r\n        }, {\r\n            gte: 20,\r\n            lt: 50,\r\n            label: \"20 - 50\",\r\n            color: colors[3]\r\n        }, {\r\n            gte: 1,\r\n            lt: 20,\r\n            label: \"1 - 20\",\r\n            color: colors[4]\r\n        }, {\r\n            value: 0,\r\n            color: colors[5]\r\n        }],\r\n        show: !0\r\n    },\r\n    geo: {\r\n        map: \"china\",\r\n        roam: roam,\r\n        scaleLimit: {\r\n            min: 1,\r\n            max: 2\r\n        },\r\n        zoom: 1.23,\r\n        top: 51,\r\n        label: {\r\n            normal: {\r\n                show: !0,\r\n                fontSize: \"12\",\r\n                color: \"rgba(0,0,0,0.7)\"\r\n            },\r\n            emphasis: {\r\n                color: \"red\"\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                //shadowBlur: 50,\r\n                //shadowColor: 'rgba(0, 0, 0, 0.2)',\r\n                borderColor: \"rgba(0, 0, 0, 0.2)\",\r\n                //color: \"red\"\r\n            },\r\n            emphasis: {\r\n                areaColor: \"#f2d5ad\",\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 0,\r\n                borderWidth: 0,\r\n            }\r\n        }\r\n    },\r\n    series: [{\r\n        name: \"数据数量\",\r\n        type: \"map\",\r\n        geoIndex: 0,\r\n        data: window.dataList\r\n    },{\r\n        type: `effectScatter`,\r\n        coordinateSystem: `geo`,\r\n        showEffectOn: \"render\",\r\n        zlevel: 1,\r\n        rippleEffect: {\r\n            period: 5,\r\n            scale: 4,\r\n            brushType: \"fill\",\r\n        },\r\n\r\n        hoverAnimation: true,\r\n        label: {\r\n            normal: {\r\n                formatter: \"{b}\",\r\n                position: \"bottom\",\r\n                offset: [0, -50],\r\n                // color: \"#fff\",\r\n                show: true,\r\n                fontSize: 16,\r\n            },\r\n        }, \r\n\t\titemStyle: {\r\n\t\t    // 当存在visualMap时，会导致此处设置无效，除非设置它的visualMap:false\r\n\t\t\tcolor: \"rgba(241, 199, 48, 0.93)\",\r\n\t\t\tshadowBlur: 2\r\n    \t\t\t\t\r\n\t\t},\r\n\r\n        emphasis: {\r\n            label: {\r\n                //show: true,\r\n                offset: [0, -70],\r\n                formatter: function (data) {\r\n                    return \"地址：\" + data.name + \"\\n 订单量：\" + data.value[2];\r\n                },\r\n                // 兼容4.9.0版本的文本标签样式\r\n                color: \"#fff\",\r\n                backgroundColor: 'rgba(73, 80, 77, 0.5)',\r\n                borderRadius: 5,\r\n                padding: 5,\r\n            }\r\n        },\r\n        symbolSize: function(val) {\r\n            console.log(Math.sqrt(val[2]),11,'--',val[2]);\r\n            // return Math.sqrt(val[2]) / 5e2\r\n            let value = val[2]\r\n            if (value >= 100) {\r\n                return 25\r\n            }\r\n            return 16\r\n        },\r\n        data: mapDatas,\r\n    }]\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"obd-oP4yFspLjRVwrJMfdPnGV7KDfYDUc9Q","theme":"","layout":"","viewCount":0,"userName":"宁***群","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xgJHFW0oE3.png?v=1626080759182","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"宁***群"}}