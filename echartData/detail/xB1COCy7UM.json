{"status":0,"data":{"cid":"xB1COCy7UM","authorUid":"bd-3255677701","authorUserName":"Do裁决","title":"购买对象所在省份TOP10","description":"销售面积区间","latestVersion":1,"alwaysLatest":1,"createTime":"2018-02-03T08:10:30.000Z","lastUpdateTime":"2018-02-03T08:10:30.000Z","auth":2,"uid":"bd-3255677701","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.8.0","versionCreateTime":"2018-02-03T08:10:30.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1517645039291-B1vgpymUz.json\";\r\n\r\n$.getJSON(uploadedDataURL, function(geoJson) {\r\n    echarts.registerMap('zhongguo', geoJson);\r\n    myChart.hideLoading();\r\n    var geoCoordMap = {\r\n        \"海南\": [110.17, 19.92],\r\n        \"河南\": [113.700339, 34.751827],\r\n        \"河北\": [114.54095, 38.058913],\r\n        \"湖北\": [114.289984, 30.5942],\r\n        \"广东\": [113.293215, 23.102603],\r\n        \"湖南\": [113.03042, 28.188898],\r\n        \"江西\": [115.911671, 28.658012],\r\n        \"黑龙江\": [126.629804, 45.774197],\r\n        \"四川\": [104.112035, 30.630737],\r\n        \"安徽\": [117.321109, 31.850184],\r\n    }\r\n    var data = [{\r\n            name: '海南',\r\n            value: 99925.73\r\n        },\r\n        {\r\n            name: '河南',\r\n            value: 17737.01\r\n        },\r\n        {\r\n            name: '河北',\r\n            value: 13177.64\r\n        },\r\n        {\r\n            name: '湖北',\r\n            value: 12174.96\r\n        },\r\n        {\r\n            name: '广东',\r\n            value: 8230.15\r\n        },\r\n        {\r\n            name: '湖南',\r\n            value: 8173.05\r\n        },\r\n        {\r\n            name: '江西',\r\n            value: 7423.08\r\n        },\r\n        {\r\n            name: '黑龙江',\r\n            value: 6829.69\r\n        },\r\n        {\r\n            name: '四川',\r\n            value: 6158.43\r\n        },\r\n        {\r\n            name: '安徽',\r\n            value: 5930.80\r\n        },\r\n    ];\r\n    var max = 100000,\r\n        min = 900; // todo \r\n    var maxSize4Pin = 100,\r\n        minSize4Pin = 20;\r\n\r\n    var convertData = function(data) {\r\n        var res = [];\r\n        for (var i = 0; i < data.length; i++) {\r\n            var geoCoord = geoCoordMap[data[i].name];\r\n            if (geoCoord) {\r\n                res.push({\r\n                    name: data[i].name,\r\n                    value: geoCoord.concat(data[i].value)\r\n                });\r\n            }\r\n        }\r\n        return res;\r\n    };\r\n\r\n    console.log(convertData(data));\r\n\r\n    option = {\r\n        title: {\r\n            text: '购买对象所在省份TOP10',\r\n            subtext: '销售面积区间',\r\n            x: 'center',\r\n            textStyle: {\r\n                color: '#ccc'\r\n            }\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: function(params) {\r\n                if (typeof(params.value)[2] == \"undefined\") {\r\n                    return params.name + ' : ' + params.value;\r\n                } else {\r\n                    return params.name + ' : ' + params.value[2];\r\n                }\r\n            }\r\n        },\r\n        legend: {\r\n            orient: 'vertical',\r\n            y: 'bottom',\r\n            x: 'right',\r\n            data: ['sell_area'],\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        visualMap: {\r\n            show: false,\r\n            min: 0,\r\n            max: 500,\r\n            left: 'left',\r\n            top: 'bottom',\r\n            text: ['高', '低'], // 文本，默认为数值文本\r\n            calculable: true,\r\n            seriesIndex: [1],\r\n            inRange: {\r\n                // color: ['#3B5077', '#031525'] // 蓝黑\r\n                // color: ['#ffc0cb', '#800080'] // 红紫\r\n                // color: ['#3C3B3F', '#605C3C'] // 黑绿\r\n                color: ['#0f0c29', '#302b63', '#24243e'] // 黑紫黑\r\n                // color: ['#23074d', '#cc5333'] // 紫红\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#1488CC', '#2B32B2'] // 浅蓝\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n                // color: ['#00467F', '#A5CC82'] // 蓝绿\r\n\r\n            }\r\n        },\r\n        // toolbox: {\r\n        //     show: true,\r\n        //     orient: 'vertical',\r\n        //     left: 'right',\r\n        //     top: 'center',\r\n        //     feature: {\r\n        //             dataView: {readOnly: false},\r\n        //             restore: {},\r\n        //             saveAsImage: {}\r\n        //             }\r\n        // },\r\n        geo: {\r\n            show: true,\r\n            map: 'zhongguo',\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n                emphasis: {\r\n                    show: false,\r\n                }\r\n            },\r\n            roam: true,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#031525',\r\n                    borderColor: '#3B5077',\r\n                },\r\n                emphasis: {\r\n                    areaColor: '#2B91B7',\r\n                }\r\n            }\r\n        },\r\n        series: [{\r\n                name: 'credit_pm2.5',\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                data: convertData(data),\r\n                symbolSize: function(val) {\r\n                    return val[2] / 10000;\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        formatter: '{b}',\r\n                        position: 'right',\r\n                        show: true\r\n                    },\r\n                    emphasis: {\r\n                        show: true\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#05C3F9'\r\n                    }\r\n                }\r\n            },\r\n            {\r\n                type: 'map',\r\n                map: 'zhongguo',\r\n                geoIndex: 0,\r\n                aspectScale: 0.75, //长宽比\r\n                showLegendSymbol: false, // 存在legend时显示\r\n                label: {\r\n                    normal: {\r\n                        show: false\r\n                    },\r\n                    emphasis: {\r\n                        show: false,\r\n                        textStyle: {\r\n                            color: '#fff'\r\n                        }\r\n                    }\r\n                },\r\n                roam: true,\r\n                itemStyle: {\r\n                    normal: {\r\n                        areaColor: '#031525',\r\n                        borderColor: '#3B5077',\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#2B91B7'\r\n                    }\r\n                },\r\n                animation: false,\r\n                data: data\r\n            },\r\n            {\r\n                name: '点',\r\n                type: 'scatter',\r\n                coordinateSystem: 'geo',\r\n                symbol: 'pin',\r\n                symbolSize: function(val) {\r\n                    var a = (maxSize4Pin - minSize4Pin) / (max - min);\r\n                    var b = minSize4Pin - a * min;\r\n                    b = maxSize4Pin - a * max;\r\n                    return a * val[2] + b;\r\n                },\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        textStyle: {\r\n                            color: '#fff',\r\n                            fontSize: 9,\r\n                        }\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#F62157', //标志颜色\r\n                    }\r\n                },\r\n                zlevel: 6,\r\n                data: convertData(data),\r\n            },\r\n            {\r\n                name: 'Top 5',\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                data: convertData(data.sort(function(a, b) {\r\n                    return b.value - a.value;\r\n                }).slice(0, 5)),\r\n                symbolSize: function(val) {\r\n                    return val[2] / 5000;\r\n                },\r\n                showEffectOn: 'render',\r\n                rippleEffect: {\r\n                    brushType: 'stroke'\r\n                },\r\n                hoverAnimation: true,\r\n                label: {\r\n                    normal: {\r\n                        formatter: '{b}',\r\n                        position: 'right',\r\n                        show: false\r\n                    }\r\n                },\r\n                itemStyle: {\r\n                    normal: {\r\n                        color: '#05C3F9',\r\n                        shadowBlur: 10,\r\n                        shadowColor: '#05C3F9'\r\n                    }\r\n                },\r\n                zlevel: 1\r\n            },\r\n\r\n        ]\r\n    };\r\n    myChart.setOption(option);\r\n});","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,http://gallery.echartsjs.com/dep/jquery/jquery.min.js,/dep/echarts/map/js/china.js","updaterUID":"bd-3255677701","theme":"","layout":"","viewCount":42638,"userName":"Do裁决","commentCount":12,"starCount":64,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB1COCy7UM.png?v=1517645430286","isCustomThumbnail":0,"builtinTags":["category-work","geo","legend","series-effectScatter","series-map","series-scatter","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"Do裁决"}}