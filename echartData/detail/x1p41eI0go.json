{"status":0,"data":{"cid":"x1p41eI0go","authorUid":"bd-588530789","authorUserName":"f***0","title":"山东地图下钻","description":"","latestVersion":8,"alwaysLatest":0,"createTime":"2021-08-31T07:20:14.000Z","lastUpdateTime":"2021-10-15T01:20:09.000Z","auth":1,"uid":"bd-588530789","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"4.8.0","versionCreateTime":"2021-10-15T01:20:09.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1630393536588-VjFEPRwC-.json';\nvar nameMap = '山东省';\n//各地市的地图json文件\nvar citys = {\n    济南市: '/asset/get/s/data-1482909799572-Hkgu_yWSg.json',\n    青岛市: '/asset/get/s/data-1482909909703-SyCA_JbSg.json',\n    烟台市: '/asset/get/s/data-1482909841923-rkqqdyZSe.json',\n    潍坊市: '/asset/get/s/data-1482909836074-rJV9O1-Hg.json',\n    菏泽市: '/asset/get/s/data-1482909832739-rJ-cdy-Hx.json',\n    黑龙江: '/asset/get/s/data-1482909803892-Hy4__J-Sx.json',\n    日照市: '/asset/get/s/data-1482909823260-HkDtOJZBx.json',\n    威海市: '/asset/get/s/data-1482909960637-rkZMYkZBx.json',\n    枣庄市: '/asset/get/s/data-1482909768458-HJlU_yWBe.json',\n    临沂市: '/asset/get/s/data-1478782908884-B1H6yezWe.json',\n    滨州市: '/asset/get/s/data-1482909827542-r12YOJWHe.json',\n    东营市: '/asset/get/s/data-1482909892121-BJ3auk-Se.json',\n    淄博市: '/asset/get/s/data-1482909807135-SJPudkWre.json',\n    泰安市: '/asset/get/s/data-1482909813213-Hy6u_kbrl.json',\n    聊城市: '/asset/get/s/data-1482909818685-H17FOkZSl.json',\n    济宁市: '/asset/get/s/data-1482909784051-BJgwuy-Sl.json',\n    德州市: '/asset/get/s/data-1482909787648-SyEPuJbSg.json',\n};\n\n//各省份的数据\nvar allData = [\n    { name: '济南市', value: 396 },\n    { name: '青岛市', value: 66 },\n    { name: '烟台市', value: 222 },\n    { name: '潍坊市', value: 688 },\n    { name: '菏泽市', value: 75 },\n    { name: '日照市', value: 121 },\n    { name: '威海市', value: 91 },\n    { name: '枣庄市', value: 479 },\n    { name: '临沂市', value: 34 },\n    { name: '滨州市', value: 631 },\n    { name: '东营市', value: 1203 },\n    { name: '淄博市', value: 988 },\n    { name: '泰安市', value: 693 },\n    { name: '聊城市', value: 934 },\n    { name: '济宁市', value: 748 },\n    { name: '德州市', value: 1267 },\n];\nloadMap('/asset/get/s/data-1630393536588-VjFEPRwC-.json', nameMap); //初始化全省地图\n\nvar timeFn = null;\n\n//单击切换到省级地图，当mapCode有值,说明可以切换到下级地图\nmyChart.on('click', function (params) {\n    clearTimeout(timeFn);\n    //由于单击事件和双击事件冲突，故单击的响应事件延迟250毫秒执行\n    timeFn = setTimeout(function () {\n        var name = params.name; //地区name\n        var mapCode = citys[name]; //地区的json数据\n        if (!mapCode) {\n            alert('无此区域地图显示');\n            return;\n        }\n        loadMap(mapCode, name);\n    }, 250);\n});\n\n// 绑定双击事件，返回全国地图\nmyChart.on('dblclick', function (params) {\n    //当双击事件发生时，清除单击事件，仅响应双击事件\n    clearTimeout(timeFn);\n    //返回全国地图\n    loadMap('/asset/get/s/data-1630393536588-VjFEPRwC-.json', nameMap);\n});\n\n/**\n 获取对应的json地图数据，然后向echarts注册该区域的地图，最后加载地图信息\n @params {String} mapCode:json数据的地址\n @params {String} name: 地图名称\n */\nfunction loadMap(mapCode, name) {\n    $.get(mapCode, function (data) {\n        if (data) {\n            echarts.registerMap(name, data);\n            var option = {\n                backgroundColor: '#000f1e',\n                geo: {\n                    map: name,\n                    zoom: 1.3, //当前视角的缩放比例\n                    aspectScale: 0.85,\n                    layoutCenter: ['50%', '50%'], //地图位置\n                    layoutSize: '100%',\n                    roam: false,\n                    itemStyle: {\n                        normal: {\n                            borderColor: 'rgba(147, 235, 248, 1)',\n                            borderWidth: 1,\n                            shadowColor: 'rgba(128, 217, 248, 1)',\n                            // shadowColor: 'rgba(255, 255, 255, 1)',\n                            shadowOffsetX: 0,\n                            shadowOffsetY: 15,\n                            shadowBlur: 10,\n                        },\n                        emphasis: {\n                            areaColor: '#389BB7',\n                            borderWidth: 0,\n                        },\n                    },\n                },\n                tooltip: {\n                    show: true,\n                    formatter: (params) => {\n                        if (params.data)\n                            return (\n                                '<span style=\"width:195px;height:35px;line-height:28px;float:left;\">&nbsp;&nbsp;' +\n                                params.name +\n                                '</span></br><span style=\"float:left;magin-top:50px;width:195px;height:35px;line-height:25px;\">&nbsp;&nbsp;闲散总面积：' +\n                                params.data['value'] +\n                                '万亩</span>'\n                            );\n                    },\n                    extraCssText:\n                        \"background:url('/asset/get/s/data-1630478118371-aR5gezvxy.png') 100% 100% repeat;width:195px;height:142px;\",\n                },\n                series: [\n                    {\n                        name: 'Map',\n                        type: 'map',\n                        mapType: name,\n                        selectedMode: 'false', //是否允许选中多个区域\n                        aspectScale: 0.85,\n                        layoutCenter: ['50%', '50%'], //地图位置\n                        layoutSize: '100%',\n                        roam: true,\n                        zoom: 1.3, //当前视角的缩放比例\n                        roam: false, //是否开启平游或缩放\n                        scaleLimit: {\n                            //滚轮缩放的极限控制\n                            min: 1,\n                            max: 2,\n                        },\n                        itemStyle: {\n                            normal: {\n                                areaColor: 'rgba(0, 38, 66, 0.8)',\n                                borderColor: '#FFFFFF',\n                            },\n                            emphasis: {\n                                borderColor: '#FFF',\n                                borderWidth: '2',\n                                shadowColor: 'rgba(255, 255, 255, 0.5)',\n                                shadowBlur: 5,\n                                label: {\n                                    show: true,\n                                    textStyle: {\n                                        color: '#FFF',\n                                        fontSize: 16,\n                                    },\n                                },\n                                areaColor: {\n                                    type: 'radial',\n                                    x: 0.5,\n                                    y: 0.5,\n                                    r: 2,\n                                    colorStops: [\n                                        {\n                                            offset: 0,\n                                            color: 'rgba(0, 38, 66, 1)', // 0% 处的颜色\n                                        },\n                                        {\n                                            offset: 1,\n                                            color: 'rgba(0, 38, 66, 0.1)', // 100% 处的颜色\n                                        },\n                                    ],\n                                    globalCoord: false, // 缺省为 false\n                                },\n                            },\n                        },\n                        data: allData,\n                    },\n                ],\n            };\n            myChart.setOption(option);\n        } else {\n            alert('无法加载该地图');\n        }\n    });\n}\n","html":"","externalScripts":"","updaterUID":"obd-ojCMfnM7AsXoumRY9U_Orl5M-SZ-ODP","theme":"","layout":"","viewCount":0,"userName":"f***0","commentCount":0,"starCount":6,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1p41eI0go.png?v=1634260809256","isCustomThumbnail":0,"builtinTags":["category-work","series-map","tooltip"],"customTags":[],"updaterUserName":"w***9"}}