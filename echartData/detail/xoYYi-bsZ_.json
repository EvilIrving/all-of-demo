{"status":0,"data":{"cid":"xoYYi-bsZ_","authorUid":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","authorUserName":"仰***鬙","title":"custom - 立体柱状图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-11-30T09:23:14.000Z","lastUpdateTime":"2020-11-30T09:23:14.000Z","auth":2,"uid":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-30T09:23:14.000Z","code":"\nconst xData = ['一月', '二月', '三月', '四月', '五月']\nconst colors = ['rgba(0,137,255,1.0)', 'rgba(0,25,255,1.0)', 'rgba(115,5,255,1.0)']\nconst yData = [70, 90, 100, 30, 150]\nconst yDataWidthStyle = []\nconst yDataMaxWithStyle = []\nconst max = Math.max(...yData)\nconst itemMax = {\n  value: max,\n  itemStyle: {\n    color: 'rgba(0,137,255,.1)'\n  }\n}\nyData.forEach((value, i) => {\n  const color = colors[i % colors.length]\n  const item = {\n    value,\n    itemStyle: { color }\n  }\n  yDataWidthStyle.push(item)\n  yDataMaxWithStyle.push(itemMax)\n})\n\n\n// 绘制左侧面\nconst CubeLeft = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0\n  },\n  buildPath: function (ctx, shape) { // shape是从custom传入的\n    const xAxisPoint = shape.xAxisPoint\n    const c0 = [shape.x, shape.y]\n    const c1 = [shape.x - 13, shape.y - 13]\n    const c2 = [xAxisPoint[0] - 13, xAxisPoint[1] - 13]\n    const c3 = [xAxisPoint[0], xAxisPoint[1]]\n    ctx.moveTo(c0[0], c0[1]).lineTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).closePath()\n  }\n})\n// 绘制右侧面\nconst CubeRight = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0\n  },\n  buildPath: function (ctx, shape) {\n    const xAxisPoint = shape.xAxisPoint\n    const c1 = [shape.x, shape.y]\n    const c2 = [xAxisPoint[0], xAxisPoint[1]]\n    const c3 = [xAxisPoint[0] + 18, xAxisPoint[1] - 9]\n    const c4 = [shape.x + 18, shape.y - 9]\n    ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\n  }\n})\n// 绘制顶面\nconst CubeTop = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0\n  },\n  buildPath: function (ctx, shape) {\n    const c1 = [shape.x, shape.y]\n    const c2 = [shape.x + 18, shape.y - 9]\n    const c3 = [shape.x + 5, shape.y - 22]\n    const c4 = [shape.x - 13, shape.y - 13]\n    ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath()\n  }\n})\n// 注册三个面图形\necharts.graphic.registerShape('CubeLeft', CubeLeft)\necharts.graphic.registerShape('CubeRight', CubeRight)\necharts.graphic.registerShape('CubeTop', CubeTop)\nconst MAX = [300, 300, 300, 300, 300]\noption = {\n          backgroundColor: \"transparent\",\n          tooltip: {\n            textStyle: {\n              color: '#fff',\n              fontStyle: 'normal',\n              fontFamily: '微软雅黑',\n              fontSize: 12,\n            },\n            trigger: 'axis',\n            axisPointer: {\n              lineStyle: {\n                color: {\n                  type: 'linear',\n                  x: 0,\n                  y: 0,\n                  x2: 0,\n                  y2: 1,\n                  colorStops: [{\n                    offset: 0,\n                    color: 'rgba(0, 255, 233,0)'\n                  }, {\n                    offset: 0.5,\n                    color: 'rgba(255, 255, 255,1)',\n                  }, {\n                    offset: 1,\n                    color: 'rgba(0, 255, 233,0)'\n                  }],\n                  global: false\n                }\n              },\n            },\n            formatter: function (params, ticket, callback) {\n              const item = params[1]\n              return item.name + ' : ' + item.value + '人';\n            }\n          },\n          grid: {  //图表的上下左右的距离\n            left: '1%',\n            right: '4%',\n            bottom: '10%',\n            top: '20%',\n            padding: '0 0 0 0',\n            containLabel: true,\n          },\n          xAxis: {  //x轴的样式设置\n            type: 'category',\n            data: xData,\n            axisLine: {\n              show: false,\n              lineStyle: {\n                color: 'rgba(255, 168, 1,1.0)'\n              }\n            },\n            offset: 20,\n            axisTick: {\n              show: false,\n            },\n            axisLabel: {\n              interval: 0,\n              margin: 0,\n              textStyle: {\n                color: '#7B4D9F',\n                fontStyle: 'normal',\n                fontFamily: '微软雅黑',\n                fontSize: 12,\n              }\n            }\n          },\n          yAxis: {  //y轴的样式设置\n            type: 'value',\n            name: \"人数\",\n            nameTextStyle: {\n              color: '#7B4D9F',\n              fontSize: 15,\n              offset: [2, -25]\n            },\n            axisLine: {\n              show: false,\n              lineStyle: {\n                color: '#7B4D9F'\n              }\n            },\n            splitLine: {\n              show: false\n            },\n            axisTick: {\n              show: false\n            },\n            axisLabel: {\n              fontSize: 16\n            },\n            boundaryGap: false\n          },\n          series: [\n            { // 每个柱的颜色设置\n              type: 'custom',\n              renderItem: (params, api) => {\n                const location = api.coord([api.value(0), api.value(1)])\n                return {\n                  type: 'group',\n                  children: [{\n                    type: 'CubeLeft',\n                    shape: {\n                      api,\n                      xValue: api.value(0),\n                      yValue: api.value(1),\n                      x: location[0],\n                      y: location[1],\n                      xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                      fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: api.style().fill\n                      },\n                        {\n                          offset: 1,\n                          color: 'rgba(210, 218, 226,1.0)'\n                        }\n                      ])\n                    }\n                  },\n                    {\n                      type: 'CubeRight',\n                      shape: {\n                        api,\n                        xValue: api.value(0),\n                        yValue: api.value(1),\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                      },\n                      style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: api.style().fill\n                        },\n                          {\n                            offset: 1,\n                            color: 'rgba(210, 218, 226,1.0)'\n                          }\n                        ])\n                      }\n                    },\n                    {\n                      type: 'CubeTop',\n                      shape: {\n                        api,\n                        xValue: api.value(0),\n                        yValue: api.value(1),\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                      },\n                      style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: api.style().fill\n                        },\n                          {\n                            offset: 1,\n                            color: api.style().fill\n                          }\n                        ])\n                      }\n                    }\n                  ]\n                }\n              },\n              data: yDataMaxWithStyle\n            },\n            {\n              type: 'custom',\n              renderItem: (params, api) => {\n                const location = api.coord([api.value(0), api.value(1)])\n                return {\n                  type: 'group',\n                  children: [{\n                    type: 'CubeLeft',\n                    shape: {\n                      api,\n                      xValue: api.value(0),\n                      yValue: api.value(1),\n                      x: location[0],\n                      y: location[1],\n                      xAxisPoint: api.coord([api.value(0), 0])\n                    },\n                    style: {\n                      fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                        offset: 0,\n                        color: api.style().fill\n                      },\n                        {\n                          offset: 1,\n                          color: 'rgba(210, 218, 226,1.0)'\n                        }\n                      ])\n                    }\n                  },\n                    {\n                      type: 'CubeRight',\n                      shape: {\n                        api,\n                        xValue: api.value(0),\n                        yValue: api.value(1),\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                      },\n                      style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: api.style().fill\n                        },\n                          {\n                            offset: 1,\n                            color: 'rgba(210, 218, 226,1.0)'\n                          }\n                        ])\n                      }\n                    },\n                    {\n                      type: 'CubeTop',\n                      shape: {\n                        api,\n                        xValue: api.value(0),\n                        yValue: api.value(1),\n                        x: location[0],\n                        y: location[1],\n                        xAxisPoint: api.coord([api.value(0), 0])\n                      },\n                      style: {\n                        fill: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: api.style().fill\n                        },\n                          {\n                            offset: 1,\n                            color: api.style().fill\n                          }\n                        ])\n                      }\n                    }\n                  ]\n                }\n              },\n              data: yDataWidthStyle\n            },\n            {\n              type: 'bar',\n              label: {\n                normal: {\n                  show: true,\n                  position: 'top',\n                  fontSize: 14,\n                  color: '#fff',\n                  offset: [2, -25]\n                }\n              },\n              itemStyle: {\n                color: 'transparent'\n              },\n              tooltip: {},\n              data: yData\n            }\n          ]\n        }","html":"","externalScripts":"","updaterUID":"obd-oM38E-fFdk95w31elliR2xN-UIRBp2P","theme":"","layout":"","viewCount":91,"userName":"仰***鬙","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xoYYi-bsZ_.png?v=1606728194275","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-custom","tooltip"],"customTags":[],"updaterUserName":"仰***鬙"}}