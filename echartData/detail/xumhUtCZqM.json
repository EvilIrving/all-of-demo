{"status":0,"data":{"cid":"xumhUtCZqM","authorUid":"bd-1298913600","authorUserName":"思***展","title":"显示四个省份","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2021-03-18T07:02:50.000Z","lastUpdateTime":"2021-03-18T07:02:50.000Z","auth":1,"uid":"bd-1298913600","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-03-19T07:35:41.000Z","code":"//各省份的地图json文件\r\nvar provinces = {\r\n    '浙江': '/asset/get/s/data-1482909960637-rkZMYkZBx.json',\r\n    '安徽': '/asset/get/s/data-1482909768458-HJlU_yWBe.json',\r\n    '湖南': '/asset/get/s/data-1482909818685-H17FOkZSl.json',\r\n    '上海': '/asset/get/s/data-1482909900836-H1BC_1WHg.json',\r\n};\r\n\r\n// '上海': '/mapjson/shanghai.json',\r\n//     '河北': '/mapjson/hebei.json',\r\n//     '山西': '/asset/get/s/data-1591153103530-woA5PfbnV.json',\r\n//     '内蒙古': '/mapjson/neimeng.json',\r\n//     '辽宁': '/mapjson/liaoning.json',\r\n//     '吉林': '/mapjson/jilin.json',\r\n//     '黑龙江': '/mapjson/heilongjiang.json',\r\n//     '江苏': '/mapjson/jiangsu.json',\r\n//     '浙江': '/mapjson/zhejiang.json',\r\n//     '安徽': '/mapjson/anhui.json',\r\n//     '福建': '/mapjson/fujian.json',\r\n//     '江西': '/mapjson/jiangxi.json',\r\n//     '山东': '/mapjson/shandong.json',\r\n//     '河南': '/mapjson/hainan.json',\r\n//     '湖北': '/mapjson/hubei.json',\r\n//     '湖南': '/mapjson/hunan.json',\r\n//     '广东': '/mapjson/guangdong.json',\r\n//     '广西': '/mapjson/guangxi.json',\r\n//     '海南': '/mapjson/hainan.json',\r\n//     '四川': '/mapjson/sichuan.json',\r\n//     '贵州': '/mapjson/guizhou.json',\r\n//     '云南': '/mapjson/yunnan.json',\r\n//     '西藏': '/mapjson/xizang.json',\r\n//     '陕西': '/mapjson/shanxi.json',\r\n//     '甘肃': '/mapjson/gansu.json',\r\n//     '青海': '/mapjson/qinghai.json',\r\n//     '宁夏': '/mapjson/ningxia.json',\r\n//     '新疆': '/mapjson/xinjiang.json',\r\n//     '北京': '/mapjson/beijing.json',\r\n//     '天津': '/mapjson/tianjin.json',\r\n//     '重庆': '/mapjson/chongqing.json',\r\n//     '香港': '/mapjson/xiangang.json',\r\n//     '澳门': '/mapjson/aomen.json'\r\n\r\n//各省份的数据\r\nvar allData = [{\r\n    name: '浙江'\r\n}, {\r\n    name: '湖南'\r\n}, {\r\n    name: '杭州'\r\n}, {\r\n    name: '安徽'\r\n}, {\r\n    name: '上海'\r\n}];\r\nfor (var i = 0; i < allData.length; i++) {\r\n    allData[i].value = Math.round(Math.random() * 100);\r\n}\r\n\r\n\r\nloadMap('/asset/get/s/data-1527045631990-r1dZ0IM1X.json', 'china');//初始化全国地图\r\n\r\nvar timeFn = null;\r\n\r\n//单击切换到省级地图，当mapCode有值,说明可以切换到下级地图\r\nmyChart.on('click', function(params) {\r\n    clearTimeout(timeFn);\r\n    //由于单击事件和双击事件冲突，故单击的响应事件延迟250毫秒执行\r\n    timeFn = setTimeout(function() {\r\n        var name = params.name; //地区name\r\n        var mapCode = provinces[name]; //地区的json数据\r\n        if (!mapCode) {\r\n            alert('无此区域地图显示');\r\n            return;\r\n        }\r\n\r\n        loadMap(mapCode, name);\r\n        \r\n    }, 250);\r\n});\r\n\r\n\r\n// 绑定双击事件，返回全国地图\r\nmyChart.on('dblclick', function(params) {\r\n    //当双击事件发生时，清除单击事件，仅响应双击事件\r\n    clearTimeout(timeFn);\r\n    \r\n    //返回全国地图\r\n    loadMap('/asset/get/s/data-1527045631990-r1dZ0IM1X.json', 'china');\r\n});\r\n\r\n/**\r\n 获取对应的json地图数据，然后向echarts注册该区域的地图，最后加载地图信息\r\n @params {String} mapCode:json数据的地址\r\n @params {String} name: 地图名称\r\n */\r\nfunction loadMap(mapCode, name) {\r\n    $.get(mapCode, function(data) {\r\n        if (data) {\r\n            echarts.registerMap(name, data);\r\n            var option = {\r\n                tooltip: {\r\n                    show: true,\r\n                    formatter: function(params) {\r\n                        if (params.data) return params.name + '：' + params.data['value']\r\n                    },\r\n                },\r\n                visualMap: {\r\n                    type: 'continuous',\r\n                    text: ['', ''],\r\n                    showLabel: true,\r\n                    left: '50',\r\n                    min: 0,\r\n                    max: 100,\r\n                    inRange: {\r\n                        color: ['#edfbfb', '#b7d6f3', '#40a9ed', '#3598c1', '#215096', ]\r\n                    },\r\n                    splitNumber: 0\r\n                },\r\n                series: [{\r\n                    name: 'MAP',\r\n                    type: 'map',\r\n                    mapType: name,\r\n                    itemStyle: {\r\n                      borderColor: 'rgba(147, 235, 248, 1)',\r\n                      borderWidth: 0,\r\n                    },\r\n                    selectedMode: 'false',//是否允许选中多个区域\r\n                    label: {\r\n                        normal: {\r\n                            show: false\r\n                        },\r\n                        emphasis: {\r\n                            show: true\r\n                        }\r\n                    },\r\n                    data: allData\r\n                }]\r\n            };\r\n            myChart.setOption(option);\r\n            // curMap = {\r\n            //     mapCode: mapCode,\r\n            //     mapName: name\r\n            // };\r\n        } else {\r\n            alert('无法加载该地图');\r\n        }\r\n    });\r\n}","html":"","externalScripts":"","updaterUID":"bd-1298913600","theme":"","layout":"","viewCount":52,"userName":"思***展","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xumhUtCZqM.png?v=1616139342012","isCustomThumbnail":0,"builtinTags":["category-work","series-map","tooltip","visualMap"],"customTags":[],"updaterUserName":"思***展"}}