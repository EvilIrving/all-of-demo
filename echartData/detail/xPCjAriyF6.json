{"status":0,"data":{"cid":"xPCjAriyF6","authorUid":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","authorUserName":"阳***2","title":"机具开机率情况表","description":"单位：百分比","latestVersion":1,"alwaysLatest":1,"createTime":"2020-05-20T01:43:04.000Z","lastUpdateTime":"2020-05-20T01:43:04.000Z","auth":2,"uid":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-20T01:43:04.000Z","code":"var oldData = [{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 45.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 56.56,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 98.34,\n        \"INTACT_RATE\": 76.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 75.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 35.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 35.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 36.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 87.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 56.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 54.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 54.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 33.4,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 33.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 55.34,\n        \"INTACT_RATE\": 4.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 93.34,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 99.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 45.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 98.34,\n        \"INTACT_RATE\": 87.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 32.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 65.34\n    }\n];\n\n\n\n\n\nlet dateArr = [],\n    hierarchyArr = [],\n    dataset = {};\n\noldData.forEach((item) => {\n    if (dateArr.indexOf(item.RPT_DATE) < 0) {\n        dateArr.push(item.RPT_DATE);\n    }\n    if (hierarchyArr.indexOf(item.HIERARCHY) < 0) {\n        hierarchyArr.push(item.HIERARCHY);\n    }\n});\n\n\n\ndataset = hierarchyArr.map((HIERARCHY) => {\n    return {\n        name: HIERARCHY,\n        type: 'line',\n        stack: '',\n        data: []\n    };\n});\n\n\nfor (var i = 0; i < dataset.length; i++) {\n    for (var j = 0; j < oldData.length; j++) {\n        for (var k = 0; k < dateArr.length; k++) {\n            if (dataset[i].name == oldData[j].HIERARCHY &&\n                dateArr[k] == oldData[j].RPT_DATE) {\n                dataset[i].data[k] = oldData[j].POWERON_RATE;\n            }\n        }\n    }\n}\noption = {\n    title: {\n        text: '机具开机率情况表',\n        subtext: '单位：百分比',\n        left: 'center'\n    },\n    legend: {\n        bottom: 0,\n        data: hierarchyArr\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: dateArr\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series: dataset\n};\n\n","html":"","externalScripts":"","updaterUID":"obd-oEy_EUNgOZEBor92UXh4rt8Z_hzq84N","theme":"","layout":"","viewCount":130,"userName":"阳***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPCjAriyF6.png?v=1589938985142","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-line","title"],"customTags":[],"updaterUserName":"阳***2"}}