{"status":0,"data":{"cid":"xB9i7zW6lu","authorUid":"bd-3976868572","authorUserName":"z***9","title":"温度计","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-05-19T02:31:07.000Z","lastUpdateTime":"2020-05-19T02:31:07.000Z","auth":2,"uid":"bd-3976868572","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-19T02:31:08.000Z","code":" var TP_value = 40;\r\n var kd = [];\r\n var Gradient = [];\r\n var leftColor = '';\r\n var showValue = '';\r\n var boxPosition = [65, 0];\r\n var TP_txt = ''\r\n // 刻度使用柱状图模拟，短设置1，长的设置3；构造一个数据\r\n for (var i = 0, len = 135; i <= len; i++) {\r\n     if (i < 10 || i > 130) {\r\n         kd.push('')\r\n     } else {\r\n         if ((i - 10) % 20 === 0) {\r\n             kd.push('-3');\r\n         } else if ((i - 10) % 4 === 0) {\r\n             kd.push('-1');\r\n         } else {\r\n             kd.push('');\r\n         }\r\n     }\r\n\r\n }\r\n //中间线的渐变色和文本内容\r\n if (TP_value > 20) {\r\n     TP_txt = '温度偏高';\r\n     Gradient.push({\r\n         offset: 0,\r\n         color: '#93FE94'\r\n     }, {\r\n         offset: 0.5,\r\n         color: '#E4D225'\r\n     }, {\r\n         offset: 1,\r\n         color: '#E01F28'\r\n     })\r\n } else if (TP_value > -20) {\r\n     TP_txt = '温度正常';\r\n     Gradient.push({\r\n         offset: 0,\r\n         color: '#93FE94'\r\n     }, {\r\n         offset: 1,\r\n         color: '#E4D225'\r\n     })\r\n } else {\r\n     TP_txt = '温度偏低';\r\n     Gradient.push({\r\n         offset: 1,\r\n         color: '#93FE94'\r\n     })\r\n }\r\n if (TP_value > 62) {\r\n     showValue = 62\r\n } else {\r\n     if (TP_value < -60) {\r\n         showValue = -60\r\n     } else {\r\n         showValue = TP_value\r\n     }\r\n }\r\n if (TP_value < -10) {\r\n     boxPosition = [65, -120];\r\n }\r\n leftColor = Gradient[Gradient.length - 1].color;\r\n // 因为柱状初始化为0，温度存在负值，所以加上负值60和空出距离10\r\n var option = {\r\n     backgroundColor: '#0C2F6F',\r\n     title: {\r\n         text: '温度计',\r\n         show: false\r\n     },\r\n     yAxis: [{\r\n         show: false,\r\n         data: [],\r\n         min: 0,\r\n         max: 135,\r\n         axisLine: {\r\n             show: false\r\n         }\r\n     }, {\r\n         show: false,\r\n         min: 0,\r\n         max: 50,\r\n     }, {\r\n         type: 'category',\r\n         data: ['', '', '', '', '', '', '', '', '', '', '°C'],\r\n         position: 'left',\r\n         offset: -80,\r\n         axisLabel: {\r\n             fontSize: 10,\r\n             color: 'white'\r\n         },\r\n         axisLine: {\r\n             show: false\r\n         },\r\n         axisTick: {\r\n             show: false\r\n         },\r\n     }],\r\n     xAxis: [{\r\n         show: false,\r\n         min: -10,\r\n         max: 80,\r\n         data: []\r\n     }, {\r\n         show: false,\r\n         min: -10,\r\n         max: 80,\r\n         data: []\r\n     }, {\r\n         show: false,\r\n         min: -10,\r\n         max: 80,\r\n         data: []\r\n     }, {\r\n         show: false,\r\n         min: -5,\r\n         max: 80,\r\n\r\n     }],\r\n     series: [{\r\n         name: '条',\r\n         type: 'bar',\r\n         // 对应上面XAxis的第一个对)象配置\r\n         xAxisIndex: 0,\r\n         data: [{\r\n             value: (showValue + 70),\r\n             label: {\r\n                 normal: {\r\n                     show: true,\r\n                     position: boxPosition,\r\n                     backgroundColor: {\r\n                         image: 'plugin/subway_beijing/images/power/bg5Valuebg.png', //文字框背景图\r\n                     },\r\n                     width: 200,\r\n                     height: 100,\r\n                     formatter: '{back| ' + TP_value + ' }{unit|°C}\\n{downTxt|' + TP_txt + '}',\r\n                     rich: {\r\n                         back: {\r\n                             align: 'center',\r\n                             lineHeight: 50,\r\n                             fontSize: 40,\r\n                             fontFamily: 'digifacewide',\r\n                             color: leftColor\r\n                         },\r\n                         unit: {\r\n                             fontFamily: '微软雅黑',\r\n                             fontSize: 15,\r\n                             lineHeight: 50,\r\n                             color: leftColor\r\n                         },\r\n                         downTxt: {\r\n                             lineHeight: 50,\r\n                             fontSize: 25,\r\n                             align: 'center',\r\n                             color: '#fff'\r\n                         }\r\n                     }\r\n                 }\r\n             }\r\n         }],\r\n\r\n         barWidth: 18,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: new echarts.graphic.LinearGradient(0, 1, 0, 0, Gradient)\r\n             }\r\n         },\r\n         z: 2\r\n     }, {\r\n         name: '白框',\r\n         type: 'bar',\r\n         xAxisIndex: 1,\r\n         barGap: '-100%',\r\n         data: [134],\r\n         barWidth: 28,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0C2E6D',\r\n                 barBorderRadius: 50,\r\n             }\r\n         },\r\n         z: 1\r\n     }, {\r\n         name: '外框',\r\n         type: 'bar',\r\n         xAxisIndex: 2,\r\n         barGap: '-100%',\r\n         data: [135],\r\n         barWidth: 38,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#4577BA',\r\n                 barBorderRadius: 50,\r\n             }\r\n         },\r\n         z: 0\r\n     }, {\r\n         name: '圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 0,\r\n         symbolSize: 48,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#93FE94',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 2\r\n     }, {\r\n         name: '白圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 1,\r\n         symbolSize: 60,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0C2E6D',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 1\r\n     }, {\r\n         name: '外圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 2,\r\n         symbolSize: 70,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#4577BA',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 0\r\n     }, {\r\n         name: '刻度',\r\n         type: 'bar',\r\n         yAxisIndex: 0,\r\n         xAxisIndex: 3,\r\n         label: {\r\n             normal: {\r\n                 show: true,\r\n                 position: 'left',\r\n                 distance: 10,\r\n                 color: 'white',\r\n                 fontSize: 14,\r\n                 formatter: function(params) {\r\n                     if (params.dataIndex > 130 || params.dataIndex < 10) {\r\n                         return '';\r\n                     } else {\r\n                         if ((params.dataIndex - 10) % 20 === 0) {\r\n                             return params.dataIndex - 70;\r\n                         } else {\r\n                             return '';\r\n                         }\r\n                     }\r\n                 }\r\n             }\r\n         },\r\n         barGap: '-100%',\r\n         data: kd,\r\n         barWidth: 1,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: 'white',\r\n                 barBorderRadius: 120,\r\n             }\r\n         },\r\n         z: 0\r\n     }]\r\n };","html":"","externalScripts":"","updaterUID":"bd-3976868572","theme":"","layout":"","viewCount":3929,"userName":"z***9","commentCount":0,"starCount":39,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB9i7zW6lu.png?v=1589855468118","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter","title"],"customTags":[],"updaterUserName":"z***9"}}