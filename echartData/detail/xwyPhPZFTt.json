{"status":0,"data":{"cid":"xwyPhPZFTt","authorUid":"obd-oPvAREXTazzId1kFvHZ8Ys9_oW1tD92","authorUserName":"177*****802","title":"Awesome Chart","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2021-01-07T16:39:02.000Z","lastUpdateTime":"2021-01-07T16:39:02.000Z","auth":2,"uid":"obd-oPvAREXTazzId1kFvHZ8Ys9_oW1tD92","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.8.0","versionCreateTime":"2021-01-07T16:42:22.000Z","code":"\n/**\n此版本通过设置geoindex && seriesIndex: [1] 属性来实现geo和map共存，来达到hover散点和区域显示tooltip的效果\n\n默认情况下，map series 会自己生成内部专用的 geo 组件。但是也可以用这个 geoIndex 指定一个 geo 组件。这样的话，map 和 其他 series（例如散点图）就可以共享一个 geo 组件了。并且，geo 组件的颜色也可以被这个 map series 控制，从而用 visualMap 来更改。\n当设定了 geoIndex 后，series-map.map 属性，以及 series-map.itemStyle 等样式配置不再起作用，而是采用 geo 中的相应属性。\n\nhttp://echarts.baidu.com/option.html#series-map.geoIndex\n\n并且加了pin气泡图标以示数值大小\n*/\n\nvar uploadedDataURL = \"/asset/get/s/data-1528971808162-BkOXf61WX.json\";\nmyChart.showLoading();\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('china', geoJson);\n    myChart.hideLoading();\n    var geoCoordMap = {\n       '台湾': [121.5135,25.0308],\n    '黑龙江': [127.9688, 45.368],\n    '内蒙古': [110.3467, 41.4899],\n    \"吉林\": [125.8154, 44.2584],\n    '北京市': [116.4551, 40.2539],\n    \"辽宁\": [123.1238, 42.1216],\n    \"河北\": [114.4995, 38.1006],\n    \"天津\": [117.4219, 39.4189],\n    \"山西\": [112.3352, 37.9413],\n    \"陕西\": [109.1162, 34.2004],\n    \"甘肃\": [103.5901, 36.3043],\n    \"宁夏\": [106.3586, 38.1775],\n    \"青海\": [101.4038, 36.8207],\n    \"新疆\": [87.9236, 43.5883],\n    \"西藏\": [91.11, 29.97],\n    \"四川\": [103.9526, 30.7617],\n    \"重庆\": [108.384366, 30.439702],\n    \"山东\": [117.1582, 36.8701],\n    \"河南\": [113.4668, 34.6234],\n    \"江苏\": [118.8062, 31.9208],\n    \"安徽\": [117.29, 32.0581],\n    \"湖北\": [114.3896, 30.6628],\n    \"浙江\": [119.5313, 29.8773],\n    \"福建\": [119.4543, 25.9222],\n    \"江西\": [116.0046, 28.6633],\n    \"湖南\": [113.0823, 28.2568],\n    \"贵州\": [106.6992, 26.7682],\n    \"云南\": [102.9199, 25.4663],\n    \"广东\": [113.12244, 23.009505],\n    \"广西\": [108.479, 23.1152],\n    \"海南\": [110.3893, 19.8516],\n    '上海': [121.4648, 31.2891],\n    \"台北\": [121.5200760,25.0307240],\n    \"香港\": [114.165460,22.275340],\n    \"澳门\": [113.549130,22.198750],\n    \n};\n    var data = [\n    {name:\"北京\",value:'北京烤鸭-全聚德'},\n    {name:\"天津\",value:'八珍豆腐-普天和'},\n    {name:\"河北\",value:'金毛狮子鱼-正太饭庄'},\n    {name:\"山西\",value:'过油肉-老太原菜馆'},\n    {name:\"内蒙古\",value:'手扒肉-额尔敦手扒肉'},\n    {name:\"辽宁\",value:'熏肉大饼-李连贵熏肉大饼'},\n    {name:\"吉林\",value:'烧鸡-道口烧鸡'},\n    {name:\"黑龙江\",value:'锅包肉-老厨家'},\n    {name:\"上海\",value:'生煎-大壶春'},\n    {name:\"江苏\",value:'酱鸭-章云板鸭'},\n    {name:\"浙江\",value:'西湖醋鱼-杭州酒家'},\n    {name:\"安徽\",value:'臭鳜鱼-木桶记臭鳜鱼'},\n    {name:\"福建\",value:'佛跳墙-老福洲'},\n    {name:\"江西\",value:'瓦罐汤-万方圆'},\n    {name:\"山东\",value:'九转大肠-城南往事'},\n    {name:\"河南\",value:'郑州烩面-老四厂烩面'},\n    {name:\"湖北\",value:'排骨藕汤-燕子煨汤'},\n    {name:\"湖南\",value:'小龙虾-文和友'},\n    {name:\"重庆\",value:'火锅-老城九宫格火锅'},\n    {name:\"四川\",value:'麻辣兔头-邓氏兔头'},\n    {name:\"贵州\",value:'酸汤鱼-亮欢寨'},\n    {name:\"云南\",value:'过桥米线-巅味'},\n    {name:\"西藏\",value:'甜茶-光明港琼甜茶馆'},\n    {name:\"陕西\",value:'泡馍-刘信牛羊肉小炒泡馍'},\n    {name:\"甘肃\",value:'兰州牛肉面-白健强牛肉面'},\n    {name:\"青海\",value:'杂碎汤-马尔沙牛杂'},\n    {name:\"宁夏\",value:'手抓羊肉-国强手抓'},\n    {name:\"新疆\",value:'炒米粉-贵府爆辣米粉'},\n    {name:\"广东\",value:'虾饺-点都德'},\n    {name:\"广西\",value:'桂林米粉-桂林卤王米粉'},\n    {name:\"海南\",value:'清补凉-打铁力量'},\n    {name:\"台湾\",value:'大肠包小肠-官芝霖'},\n    {name:\"香港\",value:'车仔面-荣记粉面'},\n    {name:\"澳门\",value:'猪扒包-大利来'},\n    ];\n   var max = 480, min = 9; // todo \n    var maxSize4Pin = 100, minSize4Pin = 20;\n\n  var convertData = function (data) {\n    var res = [];\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord) {\n            res.push({\n                name: data[i].name,\n                value: geoCoord.concat(data[i].value)\n            });\n        }\n    }\n    return res;\n};\n\n\n\n    option = {\n        backgroundColor: {\n        type: 'linear',\n        x: 0,\n        y: 0,\n        x2: 1,\n        y2: 1,\n        colorStops: [{\n            offset: 0, color: '#0f378f' // 0% 处的颜色\n        }, {\n            offset: 1, color: '#00091a' // 100% 处的颜色\n        }],\n        globalCoord: false // 缺省为 false\n    },\n        title: {\n            top:20,\n            text: '“美食地图” - 中国',\n            subtext: '',\n            x: 'center',\n            textStyle: {\n                color: '#ccc'\n            }\n        },    \n\n       tooltip: {\n            trigger: 'item',\n            formatter: function (params) {\n              if(typeof(params.value)[2] == \"undefined\"){\n              \treturn params.name + ' : ' + params.value;\n              }else{\n              \treturn params.name + ' : ' + params.value[2];\n              }\n            }\n        },\n     /*   legend: {\n            orient: 'vertical',\n            y: 'bottom',\n            x: 'right',\n             data:['pm2.5'],\n            textStyle: {\n                color: '#fff'\n            }\n        },*/\n            legend: {\n        orient: 'vertical',\n        y: 'bottom',\n        x:'right',\n        data:['pm2.5'],\n        textStyle: {\n            color: '#fff'\n        }\n    }, \n        visualMap: {\n            show: false,\n            min: 0,\n            max: 500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高', '低'], // 文本，默认为数值文本\n            calculable: true,\n            seriesIndex: [1],\n            inRange: {\n\n            }\n        },\n        geo: {\n            map: 'china',\n            show: true,\n            roam: true,\n            label: {\n\t\t\t\tnormal: {\n\t\t\t\t\tshow: false\n\t\t\t\t},\n\t\t\t\temphasis: {\n\t\t\t\t\tshow: false,\n\t\t\t\t}\n\t\t\t},\n            itemStyle: {\n                normal: {\n                    areaColor: '#3a7fd5',\n                    borderColor: '#0a53e9',//线\n                    shadowColor: '#092f8f',//外发光\n                    shadowBlur: 20\n                },\n\t\t\t\t emphasis: {\n                    areaColor: '#0a2dae',//悬浮区背景\n                }\n            }\n        },\n        series : [\n      {\n         \n            symbolSize: 5,\n            label: {\n                normal: {\n                    formatter: '{b}',\n                    position: 'right',\n                    show: true\n                },\n                emphasis: {\n                    show: true\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#fff'\n                }\n            },\n            name: 'light',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            data: convertData(data),\n            \n        },\n         {\n            type: 'map',\n            map: 'china',\n            geoIndex: 0,\n            aspectScale: 0.75, //长宽比\n            showLegendSymbol: false, // 存在legend时显示\n            label: {\n                normal: {\n                    show: false\n                },\n                emphasis: {\n                    show: false,\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#031525',\n                    borderColor: '#FFFFFF',\n                },\n                emphasis: {\n                    areaColor: '#2B91B7'\n                }\n            },\n            animation: false,\n            data: data\n        },\n        {\n            name: 'Top 5',\n            type: 'scatter',\n            coordinateSystem: 'geo',\n            symbol: 'pin',\n            symbolSize: [50,50],\n            label: {\n                normal: {\n                    show: true,\n                    textStyle: {\n                        color: '#fff',\n                        fontSize: 9,\n                    },\n                    formatter (value){\n                        return value.data.value[2]\n                    }\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#D8BC37', //标志颜色\n                }\n            },\n            data: convertData(data),\n            showEffectOn: 'render',\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            hoverAnimation: true,\n            zlevel: 1\n        },\n         \n    ]\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"obd-oPvAREXTazzId1kFvHZ8Ys9_oW1tD92","theme":"","layout":"","viewCount":68,"userName":"177*****802","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xwyPhPZFTt.png?v=1610037742824","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-line","title"],"customTags":[],"updaterUserName":"177*****802"}}