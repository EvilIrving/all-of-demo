{"status":0,"data":{"cid":"xkIIb5qiR3","authorUid":"bd-4233009854","authorUserName":"大***e","title":"如何实现柱状图和折线图的部分虚线功能","description":"实现柱状图和折线图的虚线部分","latestVersion":3,"alwaysLatest":1,"createTime":"2019-06-11T15:14:25.000Z","lastUpdateTime":"2019-06-11T15:14:25.000Z","auth":2,"uid":"bd-4233009854","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-11T15:29:28.000Z","code":"    var dateData = [\"2019-06-01\", \"2019-06-02\", \"2019-06-03\", \"2019-06-04\", '2019-06-05', '2019-06-06', \"2019-06-07\"];\n    var dataD = [22, 34, 44, 15, 15, 22, 16, 24, 23, 20, 8, 9];\n    var chooseDate = \"2019-06-04\";\n    var len;\n    for (var i = 0; i < dateData.length; i++) {\n        if (chooseDate == dateData[i]) {\n            len = i;\n            break;\n        }\n    }\n    var newDataD = [];\n    for (var j = 0; j < len; j++) {\n        newDataD.push(dataD[j]);\n    }\n    for (var k = len; k < dataD.length; k++) {\n        var data2 = {};\n        data2.value = dataD[k];\n        data2.itemStyle = {\n            normal: {\n                color: '#fff',\n                borderType: \"dashed\",\n                barBorderColor: 'red',\n                barBorderWidth: 3,\n                barBorderRadius: 0\n            }\n        }\n        newDataD.push(data2)\n        data2 = {};\n    }\n    var d = [11.0, 4.9, 7.0, 23.2, 25.6, 76.7, 11.6, 16.2, 32.6, 20.0, \n    {\n        itemStyle: {\n            normal: {\n                color: '#fff',\n                borderType: \"dashed\"\n            }\n        },\n        value: 21,\n    },\n    {\n        value: 22,\n        itemStyle: {\n            normal: {\n                color: '#fff',\n                borderType: \"dashed\"\n            }\n        }\n    }]\n    var seriesData = [{\n            name: '蒸发量',\n            type: 'bar',\n            itemStyle: {\n                normal: {\n                    color: \"blue\",\n                    barBorderColor: 'blue',\n                    barBorderWidth: 3,\n                    barBorderRadius: 0,\n                    borderType: \"solid\"\n                }\n            },\n            data: d,\n        },\n        {\n            name: '降水量',\n            type: 'bar',\n            data: newDataD\n        },\n        {\n            name: '平均温度',\n            type: 'line',\n            smooth: true,\n            yAxisIndex: 1,\n            itemStyle: {\n                normal: {\n                    color: \"#000\",\n                    lineStyle: {\n                        type: \"solid\",\n                        width: 2\n                    }\n                }\n            },\n            data: [1100, 1202, 1303, 1405, 1300, 1020, 2030, 2340, 2300, \"-\", \"-\", \"-\"]\n        },\n        {\n            name: '平均温度',\n            type: 'line',\n            smooth: true,\n            yAxisIndex: 1,\n            itemStyle: {\n                normal: {\n                    color: \"#000\",\n                    lineStyle: {\n                        type: \"dotted\",\n                        width: 2\n                    }\n                }\n            },\n            data: [\"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", \"-\", 2300, 1005, 1200, 602]\n        }\n    ]\n\n    option = {\n        tooltip: {\n            show: true,\n            trigger: 'axis',\n            axisPointer: {\n                //  type: 'cross',\n                crossStyle: {\n                    // color: '#999'\n                }\n            },\n            formatter: function(params, ticket, callback) {\n                console.log(params, 'params')\n                var htmlStr = '';\n                var valMap = {};\n                for (var i = 0; i < params.length; i++) {\n                    var param = params[i];\n                    var xName = param.name; //x轴的名称  \n                    var seriesName = param.seriesName; //图例名称  \n                    var value = param.value; //y轴值  \n                    var color = param.color; //图例颜色  \n                    if (seriesName == \"蒸发量\") {\n                        color = \"blue\";\n                    } else if (seriesName == \"降水量\") {\n                        color = \"red\"\n                    }\n                    //过滤无效值\n                    if (value == '-') {\n                        continue;\n                    }\n\n                    //过滤重叠值\n                    if (valMap[seriesName] == value) {\n                        continue;\n                    }\n\n                    if (i === 0) {\n                        htmlStr += xName + '<br/>'; //x轴的名称  \n                    }\n                    htmlStr += '<div>';\n                    //为了保证和原来的效果一样，这里自己实现了一个点的效果  \n                    htmlStr += '<span style=\"margin-right:5px;display:inline-block;width:10px;height:10px;border-radius:5px;background-color:' + color + ';\"></span>';\n\n                    //圆点后面显示的文本  \n                    // htmlStr += seriesName + '：' + value; \n                    if (seriesName == \"平均温度\") {\n                        var value1 = \"\";\n                        value = value + \"\";\n                        if (value.length > 3) {\n                            value1 = value.slice(0, 2) + \":\" + value.slice(-2);\n                        } else {\n                            value1 = \"0\" + value.slice(0, 1) + \":\" + value.slice(-2);\n                        }\n                        htmlStr += seriesName + '：' + value1;\n                    } else {\n                        htmlStr += seriesName + '：' + value;\n                    }\n\n                    htmlStr += '</div>';\n                    valMap[seriesName] = value;\n                }\n                return htmlStr;\n            }\n\n\n        },\n        grid: {\n            bottom: \"20%\",\n            left: 30,\n            right: 30,\n            containLabel: true\n        },\n        legend: {\n            bottom: \"10%\",\n            data: ['蒸发量', '降水量', '平均温度']\n\n        },\n        xAxis: [{\n            axisLabel: {\n                //  padding: [0, 110, 0,50], // 上右下左\n                //  interval :10\n                // margin :1\n            },\n            type: 'category',\n            axisLine: {\n                show: true,\n                // onZero :false,\n                // lineStyle:{width:1}\n            },\n            // nameLocation :\"middle\",\n            data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],\n            axisPointer: {\n                // type: 'shadow'\n            },\n            splitLine: { //网格线\n                show: false\n            },\n            axisTick: { //y轴刻度线\n                show: false,\n                alignWithLabel: true,\n\n            },\n            boundaryGap: true\n        }],\n        yAxis: [{\n                type: 'value',\n                name: '水量',\n                axisLabel: {\n                    formatter: '{value} ml'\n                },\n                splitLine: { //网格线\n                    show: false\n                }\n            },\n            {\n                type: 'value',\n                name: '温度',\n                axisLabel: {\n                    formatter: '{value} °C'\n                },\n                splitLine: { //网格线\n                    show: false\n                },\n                axisTick: { //y轴刻度线\n                    show: false\n                }\n            },\n\n        ],\n        series: seriesData,\n        dataZoom: [{\n                type: 'slider',\n                show: true,\n                xAxisIndex: [0],\n                start: 1,\n                end: 100,\n                bottom: \"0\",\n            },\n            {\n                bottom: \"10%\",\n                type: 'inside',\n                xAxisIndex: [0],\n                start: 1,\n                end: 35\n            }\n        ],\n\n    };","html":"","externalScripts":"","updaterUID":"bd-4233009854","theme":"","layout":"","viewCount":178,"userName":"大***e","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xkIIb5qiR3.png?v=1560266968819","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"大***e"}}