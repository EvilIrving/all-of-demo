{"status":0,"data":{"cid":"x6zxnGW5_G","authorUid":"obd-oAF5L7r9_ycRTVNprHUZ2oT8jlDVH7b","authorUserName":"钰***","title":"柱状图轮播","description":"","latestVersion":5,"alwaysLatest":0,"createTime":"2021-12-07T12:06:48.000Z","lastUpdateTime":"2021-12-10T09:23:36.000Z","auth":2,"uid":"obd-oAF5L7r9_ycRTVNprHUZ2oT8jlDVH7b","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.2.2","versionCreateTime":"2021-12-10T09:23:36.000Z","code":"myChart.hideLoading();\ndata = {\n    xData: [1, 2, 3, 4, 5, 6, 7, 8, 9, 'fdaddsfsfsdfda10', 'fdafda11', 'fdafdfsdfsda12'],\n    onlineData: [450, 351, 165, 18, 151, 25, 45, 12, 48, 89, 790, 123, 42, 24],\n    outlineData: [50, 51, 35, 17, 119, 21, 450, 12, 48, 89, 80, 17, 402, 204],\n    licenseData: [520, 452, 235, 62, 270, 46, 495, 24, 96, 178, 870, 140, 444, 228],\n    unuseData: [20, 50, 200, 35, 27, 46, 495, 24, 96, 178, 870, 140, 444, 228],\n};\n\nlet percentData = new Map();\n// percentData = percentData.set(mockData.result[1].data,diamondData[1])\nfor (var i = 0; i < data.onlineData.length; i = i + 1) {\n    let percentValue = (((data.onlineData[i] + data.outlineData[i]) / data.licenseData[i]) * 100).toFixed(0);\n    percentData.set(data.licenseData[i], percentValue);\n}\n// console.log(percentData);\n// 指定图表的配置项和数据\noption = {\n    title: {\n        text: '设备license利用率',\n        subtext: '百分比为已放号占比',\n        left: 'left',\n    },\n    color:[\"#05F612\",\"#A61961\",\"A49696\"],\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n        },\n    },\n    legend: {\n        top: '3%',\n        data: ['在线', '离线', '未使用'],\n        left: 'right',\n    },\n    xAxis: {\n        type: 'value',\n    },\n    yAxis: {\n        type: 'category',\n        inverse: true,\n        data: data.xData,\n    },\n    dataZoom: [\n        {\n            yAxisIndex: 0,\n            show: false,\n            type: 'slider', // 这个 dataZoom 组件是 slider 型 dataZoom 组件\n            startValue: 0, // 从头开始。\n            endValue: 7, // 一次性展示8个。\n        },\n    ],\n    series: [\n        {\n            name: '在线',\n            type: 'bar',\n            stack: 'total',\n            barGap: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'inside',\n                },\n            },\n            data: data.onlineData,\n        },\n        {\n            name: '离线',\n            type: 'bar',\n            stack: 'total',\n            barGap: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'inside',\n                },\n            },\n            data: data.outlineData,\n        },\n        {\n            name: '未使用',\n            type: 'bar',\n            stack: 'total',\n            barGap: '20%',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'inside',\n                },\n            },\n            data: data.unuseData,\n        },\n        {\n            name: 'license',\n            type: 'bar',\n            // stack: 'total',\n            barGap: '-100%',\n            itemStyle: {\n                color: '#000',\n                opacity: 0,\n            },\n            label: {\n                show: true,\n                // color: '#F37879',\n                position: 'right',\n                opacity: 1,\n                formatter: function (v) {\n                    let val = v.data;\n                    return percentData.get(val) + '%';\n                },\n            },\n\n            data: data.licenseData,\n        },\n    ],\n};\nmyChart.setOption(option);\n// 定时器\nsetInterval(function () {\n    // 每次向后滚动一个，最后一个从头开始。\n    if (option.dataZoom[0].endValue == data.xData.length - 1) {\n        option.dataZoom[0].endValue = 7;\n        option.dataZoom[0].startValue = 0;\n    } else {\n        option.dataZoom[0].endValue = option.dataZoom[0].endValue + 1;\n        option.dataZoom[0].startValue = option.dataZoom[0].startValue + 1;\n    }\n    myChart.setOption(option);\n}, 3000);\n","html":"","externalScripts":"","updaterUID":"obd-oAF5L7r9_ycRTVNprHUZ2oT8jlDVH7b","theme":"","layout":"","viewCount":0,"userName":"钰***","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x6zxnGW5_G.png?v=1639128216391","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"钰***"}}