{"status":0,"data":{"cid":"xCO4kP9rrB","authorUid":"obd-oC-hJTVsHyT-vo_I9vqLbnICgMo5h3t","authorUserName":"f***x","title":"2012","description":"","latestVersion":7,"alwaysLatest":1,"createTime":"2020-11-24T07:09:20.000Z","lastUpdateTime":"2020-11-24T07:09:20.000Z","auth":2,"uid":"obd-oC-hJTVsHyT-vo_I9vqLbnICgMo5h3t","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-24T09:41:02.000Z","code":"\n\nvar countries = ['奥地利', '比利时', '加拿大', '智利', '中国', '捷克共和国', '德国', '丹麦', '西班牙', '爱沙尼亚', '芬兰', '法国', '英国', '希腊', '匈牙利', '爱尔兰', '以色列', '意大利', '日本', '大韩民国', '卢森堡', '墨西哥', '荷兰', '挪威', '波兰', '葡萄牙', '罗马尼亚', '俄罗斯联邦', '新加坡', '斯洛伐克共和国', '瑞典', '土耳其', '美国'];\n\nvar years = ['2011', '2012', '2013', '2014'];\n\nvar data = [\n    [\n        [3888, 2.681634155, 0.115044968],\n        [2630, 2.155333864, 0.113580762],\n        [4754, 1.798516848, 0.321718039],\n        [339, 0.353431105, 0.008865196],\n        [415829, 1.794378769, 1.344426108],\n        [947, 1.560055473, 0.035462114],\n        [73216, 2.793094646, 1.049495413],\n        [3372, 2.966252937, 0.101297148],\n        [4846, 1.325123536, 0.197168399],\n        [92, 2.306546282, 0.005343989],\n        [3221, 3.638811596, 0.099578704],\n        [14655, 2.190640728, 0.627071365],\n        [20107, 1.690647615, 0.438706938],\n        [798, 0.671962477, 0.019337731],\n        [759, 1.196201683, 0.016738569],\n        [1089, 1.532655096, 0.03705727],\n        [1360, 4.010980069, 0.104993157],\n        [12776, 1.208805643, 0.275376703],\n        [287580, 3.383130198, 1.99795231],\n        [138034, 3.743612984, 0.450155865],\n        [454, 1.495255394, 0.008776758],\n        [1065, 0.425630318, 0.049771599],\n        [8195, 1.903056123, 0.170076448],\n        [1585, 1.627537229, 0.081076972],\n        [4134, 0.746011795, 0.039444782],\n        [648, 1.456831329, 0.035674867],\n        [1445, 0.493159407, 0.009141344],\n        [26879, 1.090685987, 0.207753205],\n        [1056, 2.150545396, 0.059218391],\n        [269, 0.664985831, 0.006511529],\n        [5614, 3.249186329, 0.182966043],\n        [4258, 0.859523484, 0.066591939],\n        [247750, 2.762901434, 4.28745]\n    ],\n    [\n        [4137, 2.885611751, 0.117552039],\n        [2656, 2.362687426, 0.117609858],\n        [4709, 1.786069239, 0.327335695],\n        [336, 0.364786726, 0.009675296],\n        [535313, 1.928096899, 1.631482938],\n        [1005, 1.790383224, 0.036960954],\n        [73905, 2.871666001, 1.016459314],\n        [3013, 3.000847221, 0.096710267],\n        [4816, 1.284108385, 0.172063689],\n        [61, 2.114262278, 0.004891402],\n        [3600, 3.419483165, 0.087780344],\n        [14540, 2.229066585, 0.597705505],\n        [20108, 1.621774512, 0.426603403],\n        [708, 0.699567292, 0.017186316],\n        [795, 1.27038148, 0.016156227],\n        [1059, 1.563616123, 0.03512697],\n        [1319, 4.128561592, 0.107183065],\n        [12192, 1.269762162, 0.263428865],\n        [287013, 3.34313709, 1.990663159],\n        [148136, 4.025543282, 0.492246329],\n        [502, 1.288387196, 0.007213256],\n        [1294, 0.431925327, 0.051161548],\n        [7443, 1.939447342, 0.160769869],\n        [1565, 1.620240469, 0.082584443],\n        [4795, 0.881090883, 0.04407462],\n        [696, 1.377767686, 0.029810508],\n        [1057, 0.482513568, 0.008301336],\n        [29174, 1.125617969, 0.226937204],\n        [1081, 1.999471183, 0.057971785],\n        [205, 0.808098834, 0.007519337],\n        [5758, 3.281344985, 0.178466004],\n        [4833, 0.921956332, 0.072729752],\n        [268782, 2.699295093, 4.362913307]\n    ],\n    [\n        [4159, 2.964367964, 0.127082033],\n        [2600, 2.429639368, 0.126681978],\n        [4567, 1.688282406, 0.310469086],\n        [340, 0.391102941, 0.01082079],\n        [704936, 2.014663128, 1.912036712],\n        [1134, 1.909524273, 0.03978082],\n        [73929, 2.826465631, 1.05860102],\n        [3275, 3.05717828, 0.102683755],\n        [4532, 1.261723192, 0.172762921],\n        [66, 1.71468405, 0.004329026],\n        [3492, 3.296833923, 0.088747507],\n        [14690, 2.243278709, 0.630417223],\n        [19552, 1.664319816, 0.451412843],\n        [764, 0.812521634, 0.019460694],\n        [745, 1.397306603, 0.018780049],\n        [881, 1.535990932, 0.036596513],\n        [1201, 4.088166123, 0.119541383],\n        [12017, 1.30581673, 0.278601131],\n        [271731, 3.474087952, 1.709099492],\n        [159978, 4.148528466, 0.541633943],\n        [515, 1.301430349, 0.008042125],\n        [1210, 0.501060466, 0.063072179],\n        [8151, 1.957941606, 0.169199292],\n        [1612, 1.652425456, 0.086314296],\n        [4608, 0.870823097, 0.045636272],\n        [741, 1.326410846, 0.029986633],\n        [1023, 0.386661981, 0.007407949],\n        [29120, 1.132793839, 0.235510646],\n        [1143, 2.000481989, 0.060463749],\n        [213, 0.827352135, 0.008110851],\n        [6000, 3.306047971, 0.191334882],\n        [4769, 0.944772769, 0.077777718],\n        [287831, 2.742439075, 4.598536376]\n    ],\n    [\n        [4058, 2.986101514, 0.130459055],\n        [2811, 2.464682772, 0.131009371],\n        [4198, 1.611535199, 0.287721343],\n        [452, 0.379277698, 0.009787698],\n        [801135, 2.046036451, 2.118636316],\n        [1077, 1.997342028, 0.040999382],\n        [73826, 2.842110679, 1.099411182],\n        [3359, 3.051451057, 0.104470235],\n        [4416, 1.222219162, 0.168830279],\n        [80, 1.4323688, 0.003793652],\n        [3615, 3.173878291, 0.086398228],\n        [25116, 2.255988303, 0.638262415],\n        [19922, 1.700690197, 0.508318151],\n        [745, 0.834537526, 0.019659541],\n        [659, 1.370716837, 0.018963411],\n        [881, 1.518890182, 0.038095833],\n        [1125, 4.108562894, 0.125588429],\n        [12243, 1.28699587, 0.275566578],\n        [265959, 3.583492875, 1.648930345],\n        [164073, 4.291634971, 0.605284896],\n        [586, 1.256096937, 0.008148799],\n        [1246, 0.540771351, 0.070013112],\n        [9150, 1.972795993, 0.173471763],\n        [1632, 1.705111816, 0.085224411],\n        [4424, 0.940505393, 0.051254398],\n        [834, 1.285201947, 0.02957467],\n        [980, 0.382832013, 0.007620028],\n        [24370, 1.186906229, 0.220835526],\n        [1303, '-', 0],\n        [238, 0.886220557, 0.008884238],\n        [5852, 3.160839968, 0.180512561],\n        [5170, 1.007124663, 0.080411777],\n        [285096, '-', 0]\n    ]\n];\n\n// 如果看不懂这段代码，那么就不用这段代码，\n// 自己估计一个最大值也可以。\nfunction getMax(dim) {\n    var max = 0;\n    data.forEach(function (dataByYear) {\n        dataByYear.forEach(function (item) {\n            if (item[dim] > max) {\n                max = item[dim];\n            }\n        });\n    });\n    var exp = Math.round(Math.log(max) / Math.log(10));\n    var exp10 = Math.pow(10, exp);\n    max = Math.ceil(max / exp10 * 10) / 10 * exp10;\n\n    return max;\n}\n\n\nvar itemStyle = {\n    normal: {\n        opacity: 0.8,\n        shadowBlur: 10,\n        shadowOffsetX: 0,\n        shadowOffsetY: 0,\n        shadowColor: 'rgba(0, 0, 0, 0.5)'\n    }\n};\n\noption = {\n    baseOption: {\n        timeline: {\n            axisType: 'category',\n            orient: 'vertical',\n            autoPlay: false,\n            inverse: true,\n            playInterval: 3000,\n            left: null,\n            right: 10,\n            top: 20,\n            bottom: 20,\n            width: 55,\n            height: null,\n            label: {\n                normal: {\n                    textStyle: {\n                        color: '#ddd'\n                    }\n                },\n                emphasis: {\n                    textStyle: {\n                        color: '#fff'\n                    }\n                }\n            },\n            symbol: 'none',\n            lineStyle: {\n                color: '#555'\n            },\n            checkpointStyle: {\n                color: '#bbb',\n                borderColor: '#777',\n                borderWidth: 2\n            },\n            controlStyle: {\n                showNextBtn: false,\n                showPrevBtn: false,\n                normal: {\n                    color: '#666',\n                    borderColor: '#666'\n                },\n                emphasis: {\n                    color: '#aaa',\n                    borderColor: '#aaa'\n                }\n            },\n            data: years\n        },\n        backgroundColor: '#333',\n        title: {\n            text: '',\n            textAlign: 'center',\n            right: '3%',\n            bottom: 110,\n            textStyle: {\n                fontSize: 70,\n                color: 'rgba(255, 255, 255, 0.9)'\n            }\n        },\n        tooltip: {\n            padding: 5,\n            backgroundColor: '#222',\n            borderColor: '#777',\n            borderWidth: 1\n        },\n        xAxis: {\n            type: 'value',\n            name: '专利申请量（千亿 $）',\n            nameGap: 25,\n            min: 0,\n            max: getMax(0),\n            nameLocation: 'middle',\n            nameTextStyle: {\n                fontSize: 18\n            },\n            splitLine: {\n                show: false\n            },\n            axisTick: {\n                lineStyle: {\n                    color: '#ddd'\n                }\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#ddd'\n                }\n            },\n            axisLabel: {\n                textStyle: {\n                    color: '#ddd'\n                }\n            }\n        },\n        yAxis: {\n            type: 'value',\n            name: 'R&D 经费支出占比',\n            nameGap: 25,\n            min: 0,\n            max: getMax(1),\n            nameTextStyle: {\n                color: '#ccc',\n                fontSize: 18\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#ddd'\n                }\n            },\n            axisTick: {\n                lineStyle: {\n                    color: '#ddd'\n                }\n            },\n            splitLine: {\n                show: false\n            },\n            axisLabel: {\n                formatter: '{value} %',\n                textStyle: {\n                    color: '#ddd'\n                }\n            }\n        },\n        grid: {\n            left: 180,\n            right: 110,\n            bottom: 100\n        },\n        geo: {\n            top: 20,\n            left: 170,\n            right: 120,\n            height: '38%',\n            name: 'World Population (2010)',\n            type: 'map',\n            map: 'world',\n            roam: false,\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            itemStyle: {\n                normal: {\n                    borderColor: '#aaa',\n                    areaColor: '#555'\n                },\n                emphasis: {\n                    areaColor: '#555'\n                }\n            }\n        },\n        toolbox: {\n            top: 25,\n            left: 10,\n            itemSize: 20,\n            iconStyle: {\n                normal: {\n                    borderColor: '#eee'\n                },\n                emphasis: {\n                    borderColor: '#fffb60'\n                }\n            }\n        },\n        visualMap: [{\n            type: 'piecewise',\n            dimension: 3,\n            categories: countries,\n            left: 10,\n            bottom: 35,\n            calculable: true,\n            precision: 0.1,\n            textGap: 10,\n            itemGap: 3,\n            textStyle: {\n                color: '#ccc'\n            },\n            inRange: {\n                color: ['#bcd3bb', '#e88f70', '#9dc5c8', '#e1e8c8', '#7b7c68', '#e5b5b5', '#f0b489', '#928ea8', '#bda29a', '#376956', '#c3bed4', '#495a80', '#9966cc', '#bdb76a', '#eee8ab', '#a35015', '#04dd98', '#d9b3e6', '#b6c3fc','#315dbc','#c5c975','#476a54','#66e638','#a59619','#822ee2','#49450d','#eeebd4','#2b98dc','#b95c25', '#8f1ec2', '#d50390', '#36a15d', '#edc1a5']\n            },\n            outOfRange: {\n                color: '#555'\n            }\n        }, {\n            show: false,\n            type: 'continuous',\n            dimension: 2,\n            min: 0,\n            max: 5,\n            inRange: {\n                symbolSize: [10, 50]\n            }\n        }],\n        dataZoom: [{\n            type: 'inside',\n            xAxisIndex: 0\n        }, {\n            show: true,\n            type: 'slider',\n            xAxisIndex: 0\n        }],\n        series: [{\n            name: 'mymaindata',\n            type: 'scatter',\n            id: 'gridScatter',\n            itemStyle: itemStyle,\n            data: [],\n            tooltip: {\n                formatter: function(obj) {\n                    var value = obj.value;\n                    //alert('test');\n                    //for(var i=0;i<data.length;i++){console.log(data[i][4])};\n                    return '<div style=\"border-bottom: 1px solid #555;padding-bottom: 5px; margin-bottom: 5px;\">' + value[3] + '</div>'\n                        + '专利申请量：' + value[0] + '<br>'\n                        + 'R&D 经费支出占比：' + value[1] + ' %<br>'\n                        + 'R&D 经费支出：' + value[2] + ' 千亿 $<br>';\n                }\n            }\n        },\n        {name:'数据1',\n            type:'line',\n            id:'flash1',\n            itemStyle: itemStyle,\n            data:[],},\n            ],\n        animationDurationUpdate: 1000,\n        animationEasingUpdate: 'quinticInOut'\n    },\n    options: []\n};\n\n\n\nfor (var n = 0; n < years.length; n++) {\n    option.options.push({\n        title: {\n            text: years[n]\n        },\n        series: [{\n            id: 'gridScatter',\n            type: 'scatter',\n            itemStyle: itemStyle,\n            data: data[n].map(function (item, index) {\n                return item.concat([countries[index]]);\n            }),\n            symbolSize: 10\n        },\n        {name:'数据1',\n            type:'line',\n            id:'flash1',\n            itemStyle: itemStyle,\n            data:[],},]\n        \n    });\n};\n\nmyChart.setOption(option);\n\n\n// 自己估计一个最大值也可以。\nfunction myupdate(datatemp) {\n    for (var n = 0; n < years.length; n++) {\n        option.options[n].series[1].data=[];\n        \n    };\n    myChart.setOption(option);\n     for (var n = 0; n < years.length; n++) {\n        option.options[n].series[1].data=datatemp.slice(0,n+1);\n        myChart.setOption(option);\n    };\n    console.log(option);\n    \n    console.log(datatemp);\n    return 1;\n}\n\nmyChart.on('click', {seriesName: 'mymaindata'}, function (parmas) {\n    console.log(parmas);\n    console.log(parmas['dataIndex']);\n    var countryindex=parmas['dataIndex'];\n    var datatemp=[];\n    for(var i=0;i<data.length;i++){\n        \n        datatemp=datatemp.concat([data[i][countryindex]]) \n        \n    };\n    myupdate(datatemp);\n    \n    // series name 为 'uuu' 的系列中的图形元素被 'mouseover' 时，此方法被回调。\n});","html":"","externalScripts":"","updaterUID":"obd-oC-hJTVsHyT-vo_I9vqLbnICgMo5h3t","theme":"","layout":"","viewCount":344,"userName":"f***x","commentCount":0,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xCO4kP9rrB.png?v=1606210862792","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","geo","grid","series-line","series-scatter","timeline","title","toolbox","tooltip","visualMap"],"customTags":["bubble","scatter","timeline"],"updaterUserName":"f***x"}}