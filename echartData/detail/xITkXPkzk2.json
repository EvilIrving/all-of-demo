{"status":0,"data":{"cid":"xITkXPkzk2","authorUid":"bd-353054937","authorUserName":"t***g","title":"温度计","description":"整理可配置项","latestVersion":3,"alwaysLatest":1,"createTime":"2020-10-16T06:39:38.000Z","lastUpdateTime":"2020-10-16T06:39:38.000Z","auth":2,"uid":"bd-353054937","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-16T07:05:21.000Z","code":" /*****设置*****/\r\n var TP_name=\"温度\";\r\n var TP_value = -60;//值\r\n var min = 0;//最小刻度\r\n var max = 1000;//最大刻度\r\n var offset = 50;//负数设置\r\n var step = max/5;//步长\r\n var range = [0,200,500]//范围[高,中,低]\r\n var unit = '°C';//单位\r\n /**************/\r\n var scale = step/20;//比例\r\n var kd = [];\r\n var Gradient = [];\r\n var leftColor = '';\r\n var showValue = '';\r\n var len = max+(scale*15);//刻度+15\r\n var TP_txt = '';\r\n // 刻度使用柱状图模拟，短设置1，长的设置3；构造一个数据\r\n for (var i = 0; i <= len; i++) {\r\n     if (i < (min+(scale*10)) || i > (max+(scale*10))) {\r\n         kd.push('')\r\n     } else {\r\n         if ((i - (scale*10)) % step === 0) {\r\n             kd.push('-3');\r\n         } else if ((i - (scale*10)) % (step/5) === 0) {\r\n             kd.push('-1');\r\n         } else {\r\n             kd.push('');\r\n         }\r\n     }\r\n\r\n }\r\n //中间线的渐变色和文本内容\r\n if (TP_value > range[2]) {\r\n     Gradient.push({\r\n         offset: 0,\r\n         color: '#93FE94'\r\n     }, {\r\n         offset: 0.5,\r\n         color: '#E4D225'\r\n     }, {\r\n         offset: 1,\r\n         color: '#E01F28'\r\n     })\r\n } else if (TP_value > range[1]) {\r\n     Gradient.push({\r\n         offset: 0,\r\n         color: '#93FE94'\r\n     }, {\r\n         offset: 1,\r\n         color: '#E4D225'\r\n     })\r\n } else {\r\n     Gradient.push({\r\n         offset: 1,\r\n         color: '#93FE94'\r\n     })\r\n }\r\n if (TP_value > (max-offset+(scale*2))) {\r\n     showValue = max-offset+(scale*2);\r\n } else if (TP_value < min-offset) {\r\n     showValue = min-offset;\r\n } else {\r\n     showValue = TP_value\r\n }\r\n \r\n offset = offset+(scale*10);//负数设置+10\r\n leftColor = Gradient[Gradient.length - 1].color;\r\n // 因为柱状初始化为0，温度存在负值，所以加上负值60和空出距离10\r\n var option = {\r\n     backgroundColor: '#0C2F6F',\r\n     grid:{\r\n         top:'10%',\r\n         bottom:'15%',\r\n     },\r\n     yAxis: [{\r\n         show: false,\r\n         data: [],\r\n         min: 0,\r\n         max: len,\r\n         axisLine: {\r\n             show: false\r\n         }\r\n     }, {\r\n         show: false,\r\n         min: 0,\r\n         max: 50,\r\n     }],\r\n     xAxis: [{\r\n         show: true,\r\n         min: -10,\r\n         max: 80,\r\n        axisTick: 'none',\r\n        axisLine: 'none',\r\n        offset: 40,\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#ffffff',\r\n                fontSize: '24',\r\n            },\r\n        },\r\n        data: [TP_name],\r\n     }, {\r\n         show: true,\r\n         min: -10,\r\n         max: 80,\r\n        axisTick: 'none',\r\n        axisLine: 'none',\r\n        offset: 0,\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: '#66b1fd',\r\n                fontSize: '24',\r\n            },\r\n        },\r\n        data: [TP_value+unit],\r\n        z: 9,\r\n     }, {\r\n         show: false,\r\n         min: -10,\r\n         max: 80,\r\n         data: []\r\n     }, {\r\n         show: false,\r\n         min: -5,\r\n         max: 80,\r\n\r\n     }],\r\n     series: [{\r\n         name: '条',\r\n         type: 'bar',\r\n         // 对应上面XAxis的第一个对)象配置\r\n         xAxisIndex: 0,\r\n         data: [{\r\n             value: (showValue + offset),\r\n         }],\r\n         barWidth: 18,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: new echarts.graphic.LinearGradient(0, 1, 0, 0, Gradient)\r\n             }\r\n         },\r\n         z: 2\r\n     }, {\r\n         name: '白框',\r\n         type: 'bar',\r\n         xAxisIndex: 1,\r\n         barGap: '-100%',\r\n         data: [len-scale],\r\n         barWidth: 28,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0C2E6D',\r\n                 barBorderRadius: 50,\r\n             }\r\n         },\r\n         z: 1\r\n     }, {\r\n         name: '外框',\r\n         type: 'bar',\r\n         xAxisIndex: 2,\r\n         barGap: '-100%',\r\n         data: [len],\r\n         barWidth: 38,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#4577BA',\r\n                 barBorderRadius: 50,\r\n             }\r\n         },\r\n         z: 0\r\n     }, {\r\n         name: '圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 0,\r\n         symbolSize: 48,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#93FE94',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 2\r\n     }, {\r\n         name: '白圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 1,\r\n         symbolSize: 60,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#0C2E6D',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 1\r\n     }, {\r\n         name: '外圆',\r\n         type: 'scatter',\r\n         hoverAnimation: false,\r\n         data: [0],\r\n         xAxisIndex: 2,\r\n         symbolSize: 70,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: '#4577BA',\r\n                 opacity: 1,\r\n             }\r\n         },\r\n         z: 0\r\n     }, {\r\n         name: '刻度',\r\n         type: 'bar',\r\n         yAxisIndex: 0,\r\n         xAxisIndex: 3,\r\n         label: {\r\n             normal: {\r\n                 show: true,\r\n                 position: 'left',\r\n                 distance: 10,\r\n                 color: 'white',\r\n                 fontSize: 14,\r\n                 formatter: function(params) {\r\n                     if (params.dataIndex > (max+(scale*10)) || params.dataIndex < (min+(scale*10))) {\r\n                         return '';\r\n                     } else {\r\n                         if ((params.dataIndex - (scale*10)) % step === 0) {\r\n                             return params.dataIndex - offset;\r\n                         } else {\r\n                             return '';\r\n                         }\r\n                     }\r\n                 }\r\n             }\r\n         },\r\n         barGap: '-100%',\r\n         data: kd,\r\n         barWidth: 1,\r\n         itemStyle: {\r\n             normal: {\r\n                 color: 'white',\r\n                 barBorderRadius: 120,\r\n             }\r\n         },\r\n         z: 0\r\n     }]\r\n };","html":"","externalScripts":"","updaterUID":"bd-353054937","theme":"","layout":"","viewCount":792,"userName":"t***g","commentCount":0,"starCount":10,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xITkXPkzk2.png?v=1602831921167","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-scatter"],"customTags":[],"updaterUserName":"t***g"}}