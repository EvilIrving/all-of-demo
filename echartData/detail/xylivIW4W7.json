{"status":0,"data":{"cid":"xylivIW4W7","authorUid":"bd-1275590612","authorUserName":"n***2","title":"柱状图-圆柱型","description":"","latestVersion":14,"alwaysLatest":1,"createTime":"2020-11-16T06:33:28.000Z","lastUpdateTime":"2020-11-16T06:33:28.000Z","auth":1,"uid":"bd-1275590612","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":14,"parentVersion":12,"echartsVersion":"4.8.0","versionCreateTime":"2020-11-18T08:30:57.000Z","code":"var xData = [\"电子信息工程\", \"智能工程\", \"汽车工程\", \"物理网工程\", \"商学院\", \"建筑工程\", '艺术设计', '士官']\r\n\r\nvar data = [{\r\n        name: '理论课',\r\n        value: [\"13\", \"25\", \"84\", \"68\", \"89\", \"45\", 23, 23]\r\n    },\r\n    {\r\n        name: '理实一体课',\r\n        value: [\"13\", \"25\", \"84\", \"68\", \"89\", \"45\", 23, 23]\r\n    },\r\n    {\r\n        name: '实践课',\r\n        value: [\"13\", \"25\", \"84\", \"68\", \"89\", \"45\", 23, 23]\r\n    },\r\n]\r\n\r\nvar barWidth = 30\r\nvar imgurl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAADHQAAAAyCAYAAACHgW2RAAAQvklEQVR4Xu3dXYildR0H8N//HBZ39zzncV1Y2W62bhavlroS9qrIq8L1pTLNSCo2DERoQ0HIXoRCaS8KjEXI0kAt03wPQfBCEIRCEKTwIhFKpHYl95znmR3X5swvRjA0X3Z25syZc858nqth5v//vXyeuf3ylNhCz2AwuLDT6TwSER/bQmtblQABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIzILAG6WUK6qqenoWhl3vjGW9BWblftM0V0TEbyJix6zMbE4CBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQILDFBP6TmdfVdf3Led977gMdmVnatr05Im6JiLnfd97/Ye1HgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAvMvkJk/6/f7N5ZSRvO67VwHHDJze9u2d0bEV+f1BdqLAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMo0Ap5YnFxcWr9+zZ08zlfvO41MpOTdOcHxGPRMTBed3RXgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYM4FXux2uxfv3Lnz7/O251x+oaNt2wMR8VhmfmLeXph9CBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAFhP4V2ZeXtf1c/O099wFOhYWFj63vLx8f0T05+lF2YUAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECGxhgTdLKd+squq382IwV4GOtm2PZObRiOjOywuyBwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPC2QEbEj6uq+mEpZeXnmX7mItCRmdvatr09Iq6d6bdheAIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQOBMAvdXVfWNUsrimQ5O899nPtBx8uTJ87rd7gMRcdE0Q5uNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQGI9AKeVPEXFpVVX/HE/FyVeZ6UDHYDDY3+l0Ho+ICyZPpyMBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwiQL/KKVcUlXVC5s4w5pbz2ygo2maT0fEQxGxe83bu0iAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMskCbmVfXdb3ysYiZemYy0DEcDg+XUo5FxLaZ0jYsAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMG6B5cy8qa7ro+MuvJH1ZirQkZndhYWFWzPzxo1EUZsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYOYE7q6q6rpTy1ixMPjOBjuPHj1c7d+68LzMPzQKsGQkQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIGJCzyzvLz8hXPPPfffE+98lg1nItBx6tSpfaPR6NGI+NRZ7uc4AQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsLUE/rbyMYm6rl+a5rWnPtAxGAwu7HQ6K2GOvdMMaTYCBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgagTeKKVcUVXV01Mz0f8NMtWBjqZproqIX0fEjmkFNBcBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlQJLEXF9v9+/Yxqnm8pAR2aWtm1vjohbImIqZ5zGl2kmAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBA4H0CP6+q6oZSymiabKYuLJGZ29u2vSsiVr7O4SFAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIrEsgM588ffr0lXv27GnWVWiMl6cq0NG27d7MfCgiDo5xR6UIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAi+ORqNLd+3a9co0UExNoKNt2wOZ+URE7JsGGDMQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECcydwPDMvq+v6uc3ebCoCHcPh8FAp5d6I6G82iP4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAXAu8WUr5VlVV92zmlpse6Gjb9khmHo2I7mZC6E2AAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsGYGMiJ9UVfWDUsrKzxN/Ni3QkZnb2rY9FhGHJ761hgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBiAerqrqmlLI4aYxNCXQMBoPdnU7n9xFx0aQX1o8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg8I5AZv652+1e1uv1XpukysQDHYPBYH+n0/ljROyf5KJ6ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQ+RODVUsqhqqpemJTQRAMdTdN8NiIeiIjdk1pQHwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAKgTazLymruuHV3F23UcmFugYDoeHSynHImLbuqdWgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwfoHlzLypruuj4y/93oobHujIzG7TND8tpXx3o5dRnwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwXoFSyt29Xu/aUspb6631Yfc3NNBx4sSJ/o4dO+7NzEMbtYC6BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIENEHgmM79U1/XrG1A7NizQcerUqX2j0eiJiDiwEYOrSYAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBDYYIGXM/Piuq5fGnefDQl0DIfDg6WUhyJi77gHVo8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMEGBk6WUK6uqemqcPcce6Gia5qqIuCsito9zULUIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABApsksBQR1/f7/TvG1X9sgY7MLG3b/igivh8RY6s7rkXVIUCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAisU+AXVVV9p5QyWmed8QQvMnN727YrX+VY+TqHhwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlwKZ+eTS0tJXdu/ePVjPguv+kkbbtnsj4tHMvHA9g7hLgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEJgRgb+MRqNDu3btemWt864r0NG27Scz87GI2LfWAdwjQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECMygwPHM/GJd18+uZfY1BzqGw+GhUsp9EVGtpbE7BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEZFzhdSjlcVdU9Z7vHmgIdbdvekJm3RUT3bBs6T4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYI4EspdzW6/W+V0rJ1e51VoGOzNzWtu2xiDi82gbOESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgS2gMCDCwsLX9+7d+/CanZddaBjMBjs7nQ6f4iIz6ymsDMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0m8Hyn07mk1+u9dqa9VxXoGA6HF5RSHo+I/Wcq6O8ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0s8Gqn07ms1+s9/1EGZwx0tG17UWY+EBHnbWFMqxMgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIEViVQSllYXl7+Wl3XD3/YhY8MdDRNc21E3B4R21bV0SECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEVgeXMvLmu61s/iOMDAx2Z2W2a5mgp5QhDAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBtQmUUu7u9XrfLqWcfneF9wU6Tpw40T/nnHN+V0r5/NpauUWAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPAugWcz8/K6rl9/53fvCXQsLi5+fGlp6fGIOICNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgbAIvR8Ql/X7/rysV/xfoGA6HB0spj0TE+WNrpRABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMA7AoNSyperqnrq7UBH27ZXZ+avImI7IwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgQ0TWIqII/8FUR7Qhy+AhvIAAAAASUVORK5CYII='\r\n//背景图片不接受百分比，只接受数值，获取图表的宽度实现动态背景宽度\r\nvar imgwidth = myChart.getWidth()\r\n\r\n// console.log(myChart.getWidth())\r\n\r\nvar colorsTop = {\r\n    '理论课':new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n            offset: 0,\r\n            color: \"rgba(128, 195, 255, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(128, 195, 255, 1)\"\r\n        }\r\n    ]),\r\n    '理实一体课':new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n            offset: 0,\r\n            color: \"rgba(122, 240, 205, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(122, 240, 205, 1)\"\r\n        }\r\n    ]),\r\n    '实践课':new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n            offset: 0,\r\n            color: \"rgba(255, 209, 155, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(255, 209, 155, 1)\"\r\n        }\r\n    ])\r\n}\r\nvar colorsBottom = {\r\n    '理论课':'rgba(10, 121, 223, 1)',\r\n    '理实一体课':'rgba(97, 233, 193, 1)',\r\n    '实践课':'rgba(255, 189, 111, 1)'\r\n}\r\n// var colorsTop = [\r\n//     new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n//             offset: 0,\r\n//             color: \"rgba(128, 195, 255, 1)\"\r\n//         },\r\n//         {\r\n//             offset: 1,\r\n//             color: \"rgba(128, 195, 255, 1)\"\r\n//         }\r\n//     ]), new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n//             offset: 0,\r\n//             color: \"rgba(122, 240, 205, 1)\"\r\n//         },\r\n//         {\r\n//             offset: 1,\r\n//             color: \"rgba(122, 240, 205, 1)\"\r\n//         }\r\n//     ]), new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n//             offset: 0,\r\n//             color: \"rgba(255, 209, 155, 1)\"\r\n//         },\r\n//         {\r\n//             offset: 1,\r\n//             color: \"rgba(255, 209, 155, 1)\"\r\n//         }\r\n//     ])\r\n// ]\r\n\r\n// var colorsBottom = [\r\n//     'rgba(10, 121, 223, 1)', 'rgba(97, 233, 193, 1)', 'rgba(255, 189, 111, 1)'\r\n// ]\r\n\r\nvar colors = [\r\n    new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n            offset: 0,\r\n            color: \"rgba(10, 121, 223, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(78, 164, 243, 1)\"\r\n        }\r\n    ]), new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n            offset: 0,\r\n            color: \"rgba(97, 233, 193, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(11, 201, 145, 1)\"\r\n        }\r\n    ]), new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\n            offset: 0,\r\n            color: \"rgba(255, 189, 111, 1)\"\r\n        },\r\n        {\r\n            offset: 1,\r\n            color: \"rgba(255, 161, 38, 1)\"\r\n        }\r\n    ])\r\n]\r\nvar option = chuliData(data, barWidth)\r\n\r\nfunction chuliData(data, barWidth) {\r\n    let baseWidth = data.length == 3 ? 0 :1.5 / data.length\r\n    console.log(data)\r\n    var seriesData = []\r\n\r\n    data.forEach((item, i) => {\r\n        var item = {\r\n            name: data[i].name,\r\n            type: 'bar',\r\n            barWidth: barWidth,\r\n            barGap: '50%',\r\n            data: data[i].value,\r\n        }\r\n\r\n        var itemBottom = { //柱底圆片\r\n            name: data[i].name,\r\n            type: \"pictorialBar\",\r\n            symbolSize: [barWidth, barWidth * 0.5],\r\n            symbolOffset: [baseWidth*barWidth + (i - 1) * barWidth * 1.5, barWidth * 0.25],\r\n            z: 12,\r\n            silent: true,\r\n            // color: colorsBottom,\r\n            itemStyle: {\r\n                \"normal\": {\r\n                    color: colorsBottom[item.name]\r\n                }\r\n            },\r\n            data: data[i].value\r\n        }\r\n        //柱顶圆片\r\n        var itemTop = {\r\n            name: data[i].name,\r\n            type: \"pictorialBar\",\r\n            symbolSize: [barWidth, barWidth * 0.5],\r\n            symbolOffset: [baseWidth*barWidth + (i - 1) * barWidth * 1.5, -barWidth * 0.25],\r\n            z: 12,\r\n            symbolPosition: \"end\",\r\n            silent: true,\r\n            itemStyle: {\r\n                \"normal\": {\r\n                    color: colorsTop[item.name]\r\n                }\r\n            },\r\n            data: data[i].value\r\n        }\r\n\r\n        seriesData.push(itemTop)\r\n        seriesData.push(item)\r\n        seriesData.push(itemBottom)\r\n    })\r\n\r\n\r\n    var option = {\r\n        color: colors,\r\n        tooltip: {\r\n            // show:true,\r\n            trigger: 'item',\r\n            // trigger: 'axis',\r\n            // axisPointer: {\r\n            //     type: 'shadow'\r\n            // },\r\n            // formatter(params) {\r\n            //     const data = []\r\n            //     params.map(item => {\r\n            //         if (item.seriesType === 'bar') {\r\n            //             data.push(item)\r\n            //         }\r\n            //     })\r\n            //     var text = data[0].name + '</br>' +\r\n            //         data[0].seriesName + ':' + data[0].value + '</br>' +\r\n            //         data[1].seriesName + ':' + data[1].value + '</br>' +\r\n            //         data[2].seriesName + ':' + data[2].value\r\n            //     return text\r\n            // }\r\n        },\r\n        grid: {\r\n            top: 100,\r\n            right: 0,\r\n            left: 0,\r\n            bottom: 0,\r\n            containLabel: true\r\n        },\r\n        legend: {\r\n            show: true,\r\n            selectedMode: true,\r\n            orient: 'horizontal',\r\n            top: 0,\r\n            left: 0,\r\n            itemWidth: 16,\r\n            itemHeight: 16,\r\n            textStyle: {\r\n                color: 'rgba(102, 102, 102, 1)',\r\n                fontSize: 14\r\n            },\r\n            data: [{\r\n                    name: '理论课',\r\n                    icon: 'rect',\r\n                },\r\n                {\r\n                    name: '理实一体课',\r\n                    icon: 'rect',\r\n                },\r\n                {\r\n                    name: '实践课',\r\n                    icon: 'rect',\r\n                },\r\n            ]\r\n        },\r\n        graphic: {\r\n            type: 'image',\r\n            id: 'logo',\r\n            left: 22,\r\n            bottom: 44,\r\n            z: 0,\r\n            left: 'center',\r\n            style: {\r\n                image: imgurl,\r\n                width: imgwidth,\r\n                height: 50,\r\n            }\r\n        },\r\n\r\n        xAxis: [{\r\n            data: xData,\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#aaaaaa',\r\n                    fontSize: 14\r\n                },\r\n                margin: 30, //刻度标签与轴线之间的距离。\r\n            },\r\n\r\n            axisLine: {\r\n                show: false //不显示x轴\r\n            },\r\n            axisTick: {\r\n                show: false //不显示刻度\r\n            },\r\n            boundaryGap: true,\r\n            splitLine: {\r\n                show: false,\r\n                width: 0.08,\r\n                lineStyle: {\r\n                    type: \"solid\",\r\n                    color: \"#03202E\"\r\n                }\r\n            }\r\n        }],\r\n        yAxis: [{\r\n            splitLine: {\r\n                // show: false,\r\n                lineStyle: {\r\n                    color: 'rgba(216, 216, 216, 1)',\r\n                    type: 'solid'\r\n                }\r\n            },\r\n            axisTick: {\r\n                show: false\r\n            },\r\n            axisLine: {\r\n                show: false\r\n            },\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#888'\r\n                },\r\n            }\r\n        }],\r\n        series: seriesData\r\n    };\r\n\r\n    return option\r\n}\r\n// console.log(seriesData)\r\nmyChart.setOption(option);\r\nmyChart.on('legendselectchanged', function(obj) {\r\nconst selectedList = []\r\ndata.forEach((item,i) => { \r\n    if (obj['selected'][item['name']]) {\r\n        selectedList.push(item)\r\n    }\r\n})\r\nvar option = chuliData(selectedList, 30)\r\nmyChart.setOption(option);\r\n});","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":246,"userName":"n***2","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xylivIW4W7.png?v=1605688257417","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"m***h"}}