{"status":0,"data":{"cid":"xwEPS_yHQb","authorUid":"bd-4286708132","authorUserName":"L***h","title":"项目记录","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-09-18T08:40:41.000Z","lastUpdateTime":"2021-09-18T08:40:41.000Z","auth":2,"uid":"bd-4286708132","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.9.0","versionCreateTime":"2021-09-18T08:40:41.000Z","code":"var xAxisData =  ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']\nvar barData = [20, 30, 50, -10, -20, 5, 25, 30, 35, -15, 40, -15];\n// 柱子处理\nvar zt = [];\nvar label = [];\nfor (var i = 0; i < barData.length; i++) {\n    var obj = [];\n    if (i === 0) {\n        var x = parseFloat(barData[i]);\n        if (x < 0) {\n            label.push({\n                value: barData[i],\n                coord: [i, x],\n                label: { position: 'bottom', show: true, fontSize: 10, color: 'green' },\n            });\n        } else {\n            label.push({ value: barData[i], coord: [i, x] });\n        }\n        obj.push(0);\n        obj.push(barData[i]);\n        obj.push(barData[i]);\n        obj.push(barData[i]);\n        zt.push(obj);\n    } else {\n        var start = zt[i - 1][1];\n        var val = parseFloat(barData[i]);\n        var end = start + val;\n        if (barData[i] < 0) {\n            label.push({\n                value: barData[i],\n                coord: [i, end],\n                label: { position: 'bottom', show: true, fontSize: 10, color: '#E3E3E5' },\n            });\n        } else {\n            label.push({ value: barData[i], coord: [i, end] });\n        }\n\n        obj.push(start);\n        obj.push(end);\n        obj.push(end);\n        obj.push(end);\n        zt.push(obj);\n    }\n}\n\nvar seriesData = [\n    {\n        type: 'candlestick',\n        //开始值、结束值、最大值、最小值\n        //[[1,2,3,4]\n        data: zt,\n        itemStyle: {\n            color: '#4BCD6C',\n            color0: '#F54D4D',\n            borderWidth: 0,\n        },\n        markPoint: {\n            symbol: 'rect',\n            //图形上面的小头隐藏\n            symbolSize: 0.000000000000001,\n            label: {\n                show: true,\n                color: '#E3E3E5',\n                position: 'top',\n                fontSize: 10,\n                formatter: function (res) {\n                    return res.data.value;\n                },\n            },\n            data: label,\n        },\n        emphasis: {\n            itemStyle: {\n                borderWidth: 0,\n            },\n        },\n    },\n];\n// 折线处理\nvar lineData = [20, 50, 100, 90, 70, 75, 100, 130, 165, 150, 190, 175];\nlet btn = true; //默认首次第一个和第二个比较是升就是false?否则是true\nlet lineNewArr = [];\nlet startIndex = 0;\nfor (var i = 0; i < lineData.length; i++) {\n    let next = lineData[i + 1];\n    if (i == lineData.length - 1) {\n        var flagArr = lineData.slice(startIndex);\n        if (startIndex > 0) {\n            for (var j = 0; j < startIndex; j++) {\n                flagArr.unshift('');\n            }\n        }\n        if (flagArr.length > 0) {\n            lineNewArr.push({\n                nullData: startIndex,\n                data: flagArr,\n                status: btn,\n            });\n        }\n    }\n    if (next) {\n        if (btn == false) {\n            if (next < lineData[i]) {\n                if (lineNewArr.length == 0) {\n                    startIndex = 0;\n                }\n                var flagArr = lineData.slice(startIndex, i + 1);\n                if (startIndex > 0) {\n                    for (var j = 0; j < startIndex; j++) {\n                        flagArr.unshift('');\n                    }\n                }\n                lineNewArr.push({\n                    nullData: startIndex,\n                    data: flagArr,\n                    status: btn,\n                });\n                btn = true;\n                startIndex = i;\n            }\n        } else {\n            if (next > lineData[i]) {\n                var flagArr = lineData.slice(startIndex, i + 1);\n                if (startIndex > 0) {\n                    for (var j = 0; j < startIndex; j++) {\n                        flagArr.unshift('');\n                    }\n                }\n                lineNewArr.push({\n                    nullData: startIndex,\n                    data: flagArr,\n                    status: btn,\n                });\n                startIndex = i;\n                btn = false;\n            }\n        }\n    }\n}\nlineNewArr.forEach(function (item, i) {\n    if (lineNewArr[i].status == false) {\n        seriesData.push({\n            data: lineNewArr[i].data,\n            type: 'line',\n            lineStyle: {\n                normal: {\n                    width: 1,\n                    color: '#33AEEE',\n                },\n            },\n        });\n    } else {\n        seriesData.push({\n            data: lineNewArr[i].data,\n            type: 'line',\n            lineStyle: {\n                normal: {\n                    width: 1,\n                    color: '#F54D4D',\n                },\n            },\n        });\n    }\n});\n\noption = {\n    backgroundColor: '#010e28',\n    xAxis: {\n        axisTick: {\n            show: false, // 隐藏x轴的分割点\n        },\n        axisLabel: {\n            textStyle: {\n                fontSize: 12,\n                color: '#E3E3E5',\n                fontFamily: 'PingFang',\n            },\n            formatter: function (params) {\n                let valueTxt = '';\n                if (params.length > 3) {\n                    valueTxt = params.substring(0, 3) + '\\n' + params.substring(3, params.length);\n                } else {\n                    valueTxt = params;\n                }\n                return valueTxt;\n            },\n        },\n        axisLine: {\n            show: false,\n        },\n        splitLine: {\n            show: false,\n        },\n        data:xAxisData,\n    },\n    yAxis: {\n        type: 'value',\n        scale: true,\n        axisTick: {\n            show: false, // 隐藏x轴的分割点\n        },\n        axisLabel: {\n            textStyle: {\n                fontSize: 12,\n                color: '#E3E3E5',\n                fontFamily: 'PingFang',\n            },\n            formatter: function (params) {\n                let valueTxt = '';\n                if (params.length > 3) {\n                    valueTxt = params.substring(0, 3) + '\\n' + params.substring(3, params.length);\n                } else {\n                    valueTxt = params;\n                }\n                return valueTxt;\n            },\n        },\n        axisLine: {\n            show: false,\n            lineStyle: {\n                color: '#CCCCCC',\n                type: 'dashed',\n            },\n        },\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#CCCCCC',\n                type: 'dashed',\n            },\n        },\n    },\n    series: seriesData,\n};\n","html":"","externalScripts":"","updaterUID":"bd-4286708132","theme":"","layout":"","viewCount":0,"userName":"L***h","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xwEPS_yHQb.png?v=1631954441363","isCustomThumbnail":0,"builtinTags":["category-work","grid","markPoint","series-candlestick","series-line"],"customTags":[],"updaterUserName":"L***h"}}