{"status":0,"data":{"cid":"xavDBnmkbV","authorUid":"obd-oMLzPX7UjuFLGhwK9id9zEbmJY1QN2S","authorUserName":"铁***猪","title":"圆环","description":"","latestVersion":6,"alwaysLatest":0,"createTime":"2021-11-10T07:39:31.000Z","lastUpdateTime":"2021-11-10T07:54:27.000Z","auth":2,"uid":"obd-oMLzPX7UjuFLGhwK9id9zEbmJY1QN2S","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":6,"parentVersion":5,"echartsVersion":"5.2.2","versionCreateTime":"2021-11-10T07:54:27.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\nlet value = 1;\noption = {\n    backgroundColor: '#061740',\n    title: {\n        text: '{a|' + value + '}{c|%}',\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            rich: {\n                a: {\n                    fontSize: 48,\n                    color: '#29EEF3',\n                },\n\n                c: {\n                    fontSize: 20,\n                    color: '#ffffff',\n                    // padding: [5,0]\n                },\n            },\n        },\n    },\n    legend: {\n        type: 'plain',\n        orient: 'vertical',\n        right: 0,\n        top: '10%',\n        align: 'auto',\n        data: [\n            {\n                name: '涨价后没吃过',\n                icon: 'circle',\n            },\n            {\n                name: '天天吃',\n                icon: 'circle',\n            },\n            {\n                name: '三五天吃一次',\n                icon: 'circle',\n            },\n            {\n                name: '半个月吃一次',\n                icon: 'circle',\n            },\n        ],\n        textStyle: {\n            color: 'white',\n            fontSize: 16,\n            padding: [10, 1, 10, 0],\n        },\n        selectedMode: false,\n    },\n    series: [\n        {\n            //顺时针线条 \n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((90 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            //顺时针线条 \n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((180 + angle) * Math.PI) / 180,\n                        endAngle: ((270 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            //逆时针线条 \n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((270 + -angle) * Math.PI) / 180,\n                        endAngle: ((40 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            //逆时针线条 \n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((90 + -angle) * Math.PI) / 180,\n                        endAngle: ((220 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            //逆时针线条 圆点\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 90 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#0CD3DB', //粉\n                        fill: '#0CD3DB',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            //逆时针线条 圆点\n            name: 'ring5', //绿点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 270 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#0CD3DB', //绿\n                        fill: '#0CD3DB',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            // 饼图 进度\n            name: '吃猪肉频率',\n            type: 'pie',\n            radius: ['58%', '45%'],\n            silent: true,\n            clockwise: true,\n            startAngle: 90,\n            z: 0,\n            zlevel: 0,\n            label: {\n                normal: {\n                    position: 'center',\n                },\n            },\n            data: [\n                {\n                    value: value,\n                    name: '',\n                    itemStyle: {\n                        normal: {\n                            color: {\n                                // 完成的圆环的颜色\n                                colorStops: [\n                                    {\n                                        offset: 0,\n                                        color: '#4FADFD', // 0% 处的颜色\n                                    },\n                                    {\n                                        offset: 1,\n                                        color: '#28E8FA', // 100% 处的颜色\n                                    },\n                                ],\n                            },\n                        },\n                    },\n                },\n                {\n                    value: 100 - value,\n                    name: '',\n                    label: {\n                        normal: {\n                            show: false,\n                        },\n                    },\n                    itemStyle: {\n                        normal: {\n                            color: '#173164',\n                        },\n                    },\n                },\n            ],\n        },\n\n        {\n            // 分割槽\n            name: '',\n            type: 'gauge',\n            radius: '58%',\n            center: ['50%', '50%'],\n            startAngle: 0,\n            endAngle: 359.9,\n            splitNumber: 36,\n            hoverAnimation: true,\n            axisTick: {\n                show: false,\n            },\n            splitLine: {\n                length: 60,\n                lineStyle: {\n                    width: 5,\n                    color: '#061740',\n                },\n            },\n            axisLabel: {\n                show: false,\n            },\n            pointer: {\n                show: false,\n            },\n            axisLine: {\n                lineStyle: {\n                    opacity: 0,\n                },\n            },\n            detail: {\n                show: false,\n            },\n            data: [\n                {\n                    value: 0,\n                    name: '',\n                },\n            ],\n        },\n    ],\n};\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\n\nfunction draw() {\n    angle = angle + 3;\n    myChart.setOption(option, true);\n    //window.requestAnimationFrame(draw);\n}\n\nsetInterval(function () {\n    //用setInterval做动画感觉有问题\n    draw();\n}, 100);\n","html":"","externalScripts":"","updaterUID":"obd-oMLzPX7UjuFLGhwK9id9zEbmJY1QN2S","theme":"","layout":"","viewCount":0,"userName":"铁***猪","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xavDBnmkbV.png?v=1636530867791","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"铁***猪"}}