{"status":0,"data":{"cid":"xjzMHHs0tH","authorUid":"obd-oPqAKh0-fm0uZGg7S3zMMEMApr42J9g","authorUserName":"l***3","title":"柱状图滚动","description":"","latestVersion":2,"alwaysLatest":0,"createTime":"2021-09-29T00:53:53.000Z","lastUpdateTime":"2021-09-29T00:55:48.000Z","auth":2,"uid":"obd-oPqAKh0-fm0uZGg7S3zMMEMApr42J9g","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-09-29T00:55:48.000Z","code":"\r\n\t\tfunction getPageList(arrays, pageNum, pageSize){\r\n\t\t\t//计算分页页数\r\n\t\t\tpageNum = pageNum - 1;\r\n\t\t\tconst dataList = [];\r\n\t\t\tconst pageRows = arrays.length;\r\n\t\t\tconst pageTotal = (pageRows + pageSize - 1) / pageSize;\r\n\t\t\t//循环判断值\r\n\t\t\tlet startIndex = pageNum <= 0 ?  0 : pageNum * pageSize;\r\n\t\t\tlet endIndex = (pageNum + 1) * pageSize > pageRows ? pageRows : (pageNum + 1) * pageSize;\r\n\t\t\tif(startIndex > pageRows) return dataList;\r\n\t\t\tfor(startIndex; startIndex < endIndex; startIndex ++){\r\n\t\t\t  dataList.push(arrays[startIndex]);\r\n\t\t\t}\r\n\t\t\treturn dataList;\r\n\t\t}\r\n\t\t\r\n\t\tlet yLabel = ['幼儿园', '小一', '小二', '小三','小四','小五','小六','初一','初二','初三','高一','高二','高三','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26']\t\t\r\n\t\tvar pageNum = 1, pageSize = 10;\r\n\t\tvar baseRows = getPageList(yLabel, pageNum, pageSize);\r\n\t\t\r\n\t\tlet yData = []\r\n\t\tbaseRows.forEach(item => {\r\n\t\t\tyData.push(Math.random() * 1000)\r\n\t\t});\r\n\t\tlet bgData = []\r\n\t\tfor(let i in yData){\r\n\t\t\tbgData.push(2000)\r\n\t\t}\r\n\t\t\r\n\t\tvar option = {\r\n\t\t\tgrid: {\r\n\t\t\t\tleft: '5%',\r\n\t\t\t\tright: '5%',\r\n\t\t\t\tbottom: '5%',\r\n\t\t\t\ttop: '5%',\r\n\t\t\t\tcontainLabel: true\r\n\t\t\t},\r\n\t\t\ttooltip: {\r\n\t\t\t\ttrigger: 'axis',\r\n\t\t\t\taxisPointer: {\r\n\t\t\t\t\ttype: 'none'\r\n\t\t\t\t},\r\n\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\treturn params[0].name + '<br/>' +\r\n\t\t\t\t\t\t\"<span style='display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:rgba(36,207,233,0.9)'></span>\" +\r\n\t\t\t\t\t\tparams[0].seriesName + ' : ' + params[0].value + ' <br/>'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbackgroundColor: 'rgb(20,28,52)',\r\n\t\t\txAxis: {\r\n\t\t\t\tshow: false,\r\n\t\t\t\ttype: 'value'\r\n\t\t\t},\r\n\t\t\tyAxis: [{\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tinverse: true,\r\n\t\t\t\taxisLabel: {\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tmargin:15,\r\n\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\tcolor: '#fff',\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tsplitLine: {\r\n\t\t\t\t\tshow: false\r\n\t\t\t\t},\r\n\t\t\t\taxisTick: {\r\n\t\t\t\t\tshow: false\r\n\t\t\t\t},\r\n\t\t\t\taxisLine: {\r\n\t\t\t\t\tshow: false\r\n\t\t\t\t},\r\n\t\t\t\tdata: baseRows\r\n\t\t\t}, \r\n\t\t\t{\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tinverse: true,\r\n\t\t\t\taxisTick: 'none',\r\n\t\t\t\taxisLine: 'none',\r\n\t\t\t\tshow: true,\r\n\t\t\t\taxisLabel: {\r\n\t\t\t\t\ttextStyle: {\r\n\t\t\t\t\t\tcolor: '#9aeced',\r\n\t\t\t\t\t\tfontSize: '12'\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tdata: yData\r\n\t\t\t}\r\n\t\t\t],\r\n\t\t\tseries: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '人数',\r\n\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\tzlevel: 1,\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\tbarBorderRadius: [0,30,30,0],\r\n\t\t\t\t\t\t\tcolor: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{\r\n\t\t\t\t\t\t\t\toffset: 0,\r\n\t\t\t\t\t\t\t\tcolor: '#52d8da'\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\toffset: 1,\r\n\t\t\t\t\t\t\t\tcolor: '#57dcde'\r\n\t\t\t\t\t\t\t}]),\r\n\t\t\t\t\t\t\tshadowBlur:0,\r\n\t\t\t\t\t\t\tshadowColor:'rgba(87,220,222,0.7)'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbarWidth: 20,\r\n\t\t\t\t\tdata: yData\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tname: '背景',\r\n\t\t\t\t\ttype: 'bar',\r\n\t\t\t\t\tbarWidth: 20,\r\n\t\t\t\t\tbarGap: '-100%',\r\n\t\t\t\t\tdata: bgData,\r\n\t\t\t\t\titemStyle: {\r\n\t\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\t\tcolor: 'rgba(24,31,68,1)',\r\n\t\t\t\t\t\t\tbarBorderRadius: [0,30,30,0],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t]\r\n\t\t};\r\n\t\t\r\n\t\t\r\n\t\tsetInterval(()=>{\r\n\t\t\tpageNum++;\r\n\t\t\tvar rows = getPageList(yLabel, pageSize + pageNum, 1);\r\n\t\t\tif(rows.length ==0){\r\n\t\t\t\tpageSize = 0;\r\n\t\t\t\tpageNum = 0;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//原始数组\r\n\t\t\tbaseRows.splice(0,1);\r\n\t\t\tbaseRows.push(...rows);\r\n\t\t\t//原始数组y刻度值\r\n\t\t\tyData.splice(0,1);\r\n\t\t\trows.forEach(item => {\r\n\t\t\t\tyData.push(Math.random() * 1000)\r\n\t\t\t});\r\n\t\t\t//x轴\r\n\t\t\tbgData.splice(0,1);\r\n\t\t\trows.forEach(item => {\r\n\t\t\t\tbgData.push(2000)\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tmyChart.setOption({\r\n\t\t\t\tyAxis: [{\r\n\t\t\t\t\tdata: baseRows\r\n\t\t\t\t}, \r\n\t\t\t\t{\r\n\t\t\t\t\tdata: yData\r\n\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tseries: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '人数',\r\n\t\t\t\t\t\tdata: yData\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '背景',\r\n\t\t\t\t\t\tdata: bgData,\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t});\r\n\t\t}, 1000);","html":"","externalScripts":"","updaterUID":"obd-oPqAKh0-fm0uZGg7S3zMMEMApr42J9g","theme":"","layout":"","viewCount":0,"userName":"l***3","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xjzMHHs0tH.png?v=1632876948588","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"l***3"}}