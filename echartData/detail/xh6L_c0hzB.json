{"status":0,"data":{"cid":"xh6L_c0hzB","authorUid":"bd-2536962124","authorUserName":"韩***翎","title":"啥玩意","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-20T09:56:56.000Z","lastUpdateTime":"2021-08-20T09:56:56.000Z","auth":2,"uid":"bd-2536962124","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-20T09:56:56.000Z","code":"let angle = 0; //角度，用来做简单的动画效果的\nlet value = 80;\nvar timerId;\nvar color = [\n    'rgba(22, 172, 142, 1)',\n    'rgba(0, 251, 183, 1)',\n    'rgba(248, 136, 42, 1)',\n    'rgba(20, 218, 255, 1)',\n    'rgba(6, 232, 219, 1)',\n].reverse();\nvar scaleData = [\n    {\n        name: '办公类',\n        value: 10,\n    },\n    {\n        name: '照明类',\n        value: 10,\n    },\n    {\n        name: '空调类',\n        value: 10,\n    },\n    {\n        name: '其他',\n        value: 10,\n    },\n\n    {\n        name: '电梯类',\n        value: 10,\n    },\n].reverse();\nvar data = [],\n    datas = [];\nfor (var i = 0; i < scaleData.length; i++) {\n    data.push(\n        {\n            data: scaleData[i].value,\n            value: 1,\n            name: scaleData[i].name,\n            itemStyle: {\n                normal: {\n                    color: color[i],\n                },\n            },\n        },\n        {\n            value: 45,\n            name: '',\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false,\n                    },\n                    labelLine: {\n                        show: false,\n                    },\n                    color: 'rgba(0, 0, 0, 0)',\n                    borderColor: 'rgba(0, 0, 0, 0)',\n                    borderWidth: 0,\n                },\n            },\n        }\n    );\n    datas.push(\n        {\n            data: scaleData[i].value,\n            value: 15,\n            name: scaleData[i].name,\n            itemStyle: {\n                normal: {\n                    color: color[i],\n                    // borderWidth: 10,\n                    // borderColor: colorBorder[i]\n                },\n            },\n        },\n        {\n            value: 2,\n            name: '',\n            itemStyle: {\n                normal: {\n                    label: {\n                        show: false,\n                    },\n                    labelLine: {\n                        show: false,\n                    },\n                    color: 'rgba(0, 0, 0, 0)',\n                    borderColor: 'rgba(0, 0, 0, 0)',\n                    borderWidth: 0,\n                },\n            },\n        }\n    );\n}\noption = {\n    backgroundColor: '#000E1A',\n    title: {\n        text: '{a|' + value + '}{c|%}',\n        x: 'center',\n        y: 'center',\n        textStyle: {\n            rich: {\n                a: {\n                    fontSize: 48,\n                    color: '#29EEF3',\n                },\n\n                c: {\n                    fontSize: 20,\n                    color: '#ffffff',\n                    // padding: [5,0]\n                },\n            },\n        },\n    },\n\n    series: [\n        // 紫色\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((0 + angle) * Math.PI) / 180,\n                        endAngle: ((90 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#8383FA',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5', //紫点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6;\n                let point = getCirlPoint(x0, y0, r, 90 + angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#8450F9', //绿\n                        fill: '#8450F9',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        // 蓝色\n\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6,\n                        startAngle: ((180 + angle) * Math.PI) / 180,\n                        endAngle: ((270 + angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#4386FA',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5', // 蓝色\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.6;\n                let point = getCirlPoint(x0, y0, r, 180 + angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#4386FA', //绿\n                        fill: '#4386FA',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((270 + -angle) * Math.PI) / 180,\n                        endAngle: ((40 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#0CD3DB',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        // 橘色\n\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                return {\n                    type: 'arc',\n                    shape: {\n                        cx: api.getWidth() / 2,\n                        cy: api.getHeight() / 2,\n                        r: (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65,\n                        startAngle: ((90 + -angle) * Math.PI) / 180,\n                        endAngle: ((220 + -angle) * Math.PI) / 180,\n                    },\n                    style: {\n                        stroke: '#FF8E89',\n                        fill: 'transparent',\n                        lineWidth: 1.5,\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5',\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 90 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#FF8E89', //粉\n                        fill: '#FF8E89',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: 'ring5', //绿点\n            type: 'custom',\n            coordinateSystem: 'none',\n            renderItem: function (params, api) {\n                let x0 = api.getWidth() / 2;\n                let y0 = api.getHeight() / 2;\n                let r = (Math.min(api.getWidth(), api.getHeight()) / 2) * 0.65;\n                let point = getCirlPoint(x0, y0, r, 270 + -angle);\n                return {\n                    type: 'circle',\n                    shape: {\n                        cx: point.x,\n                        cy: point.y,\n                        r: 4,\n                    },\n                    style: {\n                        stroke: '#0CD3DB', //绿\n                        fill: '#0CD3DB',\n                    },\n                    silent: true,\n                };\n            },\n            data: [0],\n        },\n        {\n            name: '',\n            type: 'pie',\n            clockWise: false,\n            // radius: [40, 32],\n            radius: ['40%', '35%'],\n            hoverAnimation: false,\n            label: {\n                normal: {\n                    formatter: (params) => {\n                        return '△';\n                    },\n                    rich: {\n                        icon: {},\n                    },\n                },\n            },\n            itemStyle: {\n                normal: {\n                    borderColor: '#0A1934',\n                    borderWidth: 5,\n                    color: function (params) {\n                        return color[params.dataIndex];\n                    },\n                },\n            },\n            labelLine: {\n                show: false,\n            },\n            // itemStyle: {\n            //     normal: {\n            //         label: {\n            //             show: true,\n            //             position: 'outside',\n            //             color: '#ddd',\n            //             formatter: function (params) {\n            //                 var percent = 0;\n            //                 var total = 0;\n            //                 for (var i = 0; i < scaleData.length; i++) {\n            //                     total += scaleData[i].value;\n            //                 }\n            //                 percent = ((params.value / total) * 100).toFixed(0);\n            //                 if (params.name !== '') {\n            //                     return params.name;\n            //                 } else {\n            //                     return '';\n            //                 }\n            //             },\n            //             rich: {\n            //                 white: {\n            //                     color: '#ddd',\n            //                     align: 'center',\n            //                     padding: [3, 0],\n            //                 },\n            //             },\n            //         },\n            //         labelLine: {\n            //             show: false,\n            //         },\n            //     },\n            // },\n            data: data,\n        },\n        {\n            type: 'pie',\n            zlevel: 3,\n             hoverAnimation: false,\n            radius: ['45%', '50%'],\n            clockWise: false,\n            labelLine: {\n                show: false,\n            },\n            label: {\n                show: false,\n            },\n            data: datas,\n        },\n        // {\n        //     name: '',\n        //     type: 'pie',\n        //     clockWise: false,\n        //     radius: [80, 100],\n        //     hoverAnimation: false,\n        //     itemStyle: {\n        //         normal: {\n        //             label: {\n        //                 show: true,\n        //                 position: 'outside',\n        //                 color: '#ddd',\n        //                 formatter: function (params) {\n        //                     var percent = 0;\n        //                     var total = 0;\n        //                     for (var i = 0; i < scaleData.length; i++) {\n        //                         total += scaleData[i].value;\n        //                     }\n        //                     percent = ((params.value / total) * 100).toFixed(0);\n        //                     if (params.name !== '') {\n        //                         return params.name;\n        //                     } else {\n        //                         return '';\n        //                     }\n        //                 },\n        //                 rich: {\n        //                     white: {\n        //                         color: '#ddd',\n        //                         align: 'center',\n        //                         padding: [3, 0],\n        //                     },\n        //                 },\n        //             },\n        //             labelLine: {\n        //                 length: 30,\n        //                 length2: 60,\n        //                 show: false,\n        //             },\n        //         },\n        //     },\n        //     data: data,\n        // },\n        //  {\n        //      name: '吃猪肉频率',\n        //      type: 'pie',\n        //      radius: ['52%', '40%'],\n        //      silent: true,\n        //      clockwise: true,\n        //      startAngle: 90,\n        //      z: 0,\n        //      zlevel: 0,\n        //      label: {\n        //          normal: {\n        //              position: \"center\",\n\n        //          }\n        //      },\n        //      data: [{\n        //              value: value,\n        //              name: \"\",\n        //              itemStyle: {\n        //                  normal: {\n        //                      color: { // 完成的圆环的颜色\n        //                          colorStops: [{\n        //                                  offset: 0,\n        //                                  color: '#A098FC' // 0% 处的颜色\n        //                              },\n        //                              {\n        //                                  offset: 0.3,\n        //                                  color: '#4386FA' // 0% 处的颜色\n        //                              },\n        //                              {\n        //                                  offset: 0.6,\n        //                                  color: '#4FADFD' // 0% 处的颜色\n        //                              },\n        //                              {\n        //                                  offset: 0.8,\n        //                                  color: '#0CD3DB' // 100% 处的颜色\n        //                              }, {\n        //                                  offset: 1,\n        //                                  color: '#646CF9' // 100% 处的颜色\n        //                              }\n        //                          ]\n        //                      },\n        //                  }\n        //              }\n        //          },\n        //          {\n        //              value: 100 - value,\n        //              name: \"\",\n        //              label: {\n        //                  normal: {\n        //                      show: false\n        //                  }\n        //              },\n        //              itemStyle: {\n        //                  normal: {\n        //                      color: \"#173164\"\n        //                  }\n        //              }\n        //          }\n        //      ]\n        //  },\n        //  {\n        //      name: '吃猪肉频率',\n        //      type: 'pie',\n        //      radius: ['32%', '35%'],\n        //      silent: true,\n        //      clockwise: true,\n        //      startAngle: 270,\n        //      z: 0,\n        //      zlevel: 0,\n        //      label: {\n        //          normal: {\n        //              position: \"center\",\n\n        //          }\n        //      },\n        //      data: [{\n        //              value: value,\n        //              name: \"\",\n        //              itemStyle: {\n        //                  normal: {\n        //                      color: { // 完成的圆环的颜色\n        //                          colorStops: [{\n        //                              offset: 0,\n        //                              color: '#00EDF3' // 0% 处的颜色\n        //                          }, {\n        //                              offset: 1,\n        //                              color: '#646CF9' // 100% 处的颜色\n        //                          }]\n        //                      },\n        //                  }\n        //              }\n        //          },\n        //          {\n        //              value: 100 - value,\n        //              name: \"\",\n        //              label: {\n        //                  normal: {\n        //                      show: false\n        //                  }\n        //              },\n        //              itemStyle: {\n        //                  normal: {\n        //                      color: \"#173164\"\n        //                  }\n        //              }\n        //          }\n        //      ]\n        //  },\n    ],\n};\n\n//获取圆上面某点的坐标(x0,y0表示坐标，r半径，angle角度)\nfunction getCirlPoint(x0, y0, r, angle) {\n    let x1 = x0 + r * Math.cos((angle * Math.PI) / 180);\n    let y1 = y0 + r * Math.sin((angle * Math.PI) / 180);\n    return {\n        x: x1,\n        y: y1,\n    };\n}\n\nfunction draw() {\n    angle = angle + 3;\n    myChart.setOption(option, true);\n    //window.requestAnimationFrame(draw);\n}\nif (timerId) {\n    clearInterval(timerId);\n}\ntimerId = setInterval(function () {\n    //用setInterval做动画感觉有问题\n    draw();\n}, 100);\n","html":"","externalScripts":"","updaterUID":"bd-2536962124","theme":"","layout":"","viewCount":0,"userName":"韩***翎","commentCount":0,"starCount":5,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xh6L_c0hzB.png?v=1629453417116","isCustomThumbnail":0,"builtinTags":["category-work","series-custom","series-pie","title"],"customTags":[],"updaterUserName":"韩***翎"}}