{"status":0,"data":{"cid":"xb2fn3_29E","authorUid":"obd-oDVarXwzQoZVyB1GMFzJmCL7LH5pp1e","authorUserName":"小***7","title":"实现ECharts双Y轴左右刻度线一致","description":"实现ECharts双Y轴左右刻度线一致","latestVersion":2,"alwaysLatest":0,"createTime":"2021-10-31T06:28:04.000Z","lastUpdateTime":"2021-10-31T07:14:11.000Z","auth":2,"uid":"obd-oDVarXwzQoZVyB1GMFzJmCL7LH5pp1e","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-31T07:14:11.000Z","code":"//计算最大值\nfunction calMax(arr) {\n  let max = 0;\n  arr.forEach((el) => {\n    el.forEach((el1) => {\n      if (!(el1 === undefined || el1 === '')) {\n        if (max < el1) {\n          max = el1;\n        }\n      }\n    });\n  });\n  let maxint = Math.ceil(max / 9.5); //不让最高的值超过最上面的刻度\n  let maxval = maxint * 10; //让显示的刻度是整数\n  return maxval;\n}\n\n//计算最小值\nfunction calMin(arr) {\n  let min = 0;\n  arr.forEach((el) => {\n    el.forEach((el1) => {\n      if (!(el1 === undefined || el1 === '')) {\n        if (min > el1) {\n          min = el1;\n        }\n      }\n    });\n  });\n  let minint = Math.floor(min / 10);\n  let minval = minint * 10; //让显示的刻度是整数\n  return minval;\n}\n\nvar data1 = [59357.9, 52789.77, 24837.98, 14345.02, 2291.93],\n  data2 = [-23.81, 36.43, 23.75, -86.83, -23.95];\n\nvar Min1 = calMin([data1]),\n  Min2 = calMin([data2]),\n  Max1 = calMax([data1]),\n  Max2 = calMax([data2]),\n  option = {\n    grid: { left: '100', right: '100', bottom: '100', top: '100' },\n    color: ['#0698d6', '#fd8246', '#d773b4', '#41ac7c', '#e86367', '#aada9c'],\n    tooltip: { trigger: 'axis', axisPointer: { type: 'cross', crossStyle: { color: '#999' } } },\n    legend: { data: ['市值', '涨幅'] },\n    xAxis: [\n      {\n        type: 'category',\n        show: true,\n        lineWidth: 0,\n        axisPointer: {\n          type: 'shadow',\n        },\n        data: ['2013-12-31', '2014-12-31', '2015-12-31', '2016-12-31', '2017-12-31'],\n      },\n    ],\n    yAxis: [\n      {\n        name: '单位：万元',\n        nameTextStyle: { color: '#999999' },\n        type: 'value',\n        axisLine: { show: false },\n        axisTick: { show: false },\n        axisLabel: { verticalAlign: 'bottom', color: '#999999' },\n        min: Min1,\n        max: Max1,\n        splitNumber: 5,\n        interval: (Max1 - Min1) / 5,\n        axisLabel: {\n          formatter: (val) => {\n            if (val == Min1) return val;\n            else if (val == Max1) return val;\n            else return '';\n          },\n        },\n      },\n      {\n        name: '单位：%',\n        type: 'value',\n        nameTextStyle: { color: '#999999' },\n        axisLine: { show: false },\n        axisTick: { show: false },\n        axisLabel: { verticalAlign: 'bottom', color: '#999999' },\n        min: Min2,\n        max: Max2,\n        splitNumber: 5,\n        interval: (Max2 - Min2) / 5,\n        axisLabel: {\n          formatter: (val) => {\n            if (val == Min2) return val;\n            else if (val == Max2) return val;\n            else return '';\n          },\n        },\n      },\n    ],\n    series: [\n      { name: '市值', type: 'bar', barGap: 0, barWidth: 30, data: data1 },\n      { name: '涨幅', type: 'line', barGap: 0, barWidth: 30, data: data2, yAxisIndex: 1 },\n    ],\n  };\n","html":"","externalScripts":"","updaterUID":"obd-oDVarXwzQoZVyB1GMFzJmCL7LH5pp1e","theme":"","layout":"","viewCount":0,"userName":"小***7","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xb2fn3_29E.png?v=1635664451941","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":[],"updaterUserName":"小***7"}}