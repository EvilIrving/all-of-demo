{"status":0,"data":{"cid":"x1adHnLs-6","authorUid":"bd-1335944923","authorUserName":"锃***6","title":"伪旭日图","description":"旭日图上有些官方bug待修改，希望越来越完善吧","latestVersion":7,"alwaysLatest":1,"createTime":"2018-12-11T03:03:25.000Z","lastUpdateTime":"2018-12-11T03:03:25.000Z","auth":1,"uid":"bd-1335944923","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":7,"parentVersion":6,"echartsVersion":"4.2.0","versionCreateTime":"2018-12-26T02:10:57.000Z","code":"/**\n * @author liang\n * 近期开发旭日图发现有好多官方bug，使用不是很爽，\n * 于是用饼+环做了一个伪旭日图\n * 有需要3级或以上的可以模仿哦，也是类似的\n * tooltip和label一做了处理，一二级展示不同，二级会展示具体的一级大类\n */\n \nlet pieData = [{\n            name: '一般隐患',\n            value: 1584,\n            children: [{\n                name: '企业自查',\n                value: 1420\n            }, \n            {\n                name: '监督检查',\n                value: 164\n            }]\n        },\n        {\n            name: '重大隐患',\n            value: 268,\n            children: [{\n             name: '企业自查',\n                value: 50\n            }, {\n                name: '监督检查',\n                value: 218\n            }]\n        }, \n       \n    ],\n    colorList = ['#4169E1', '#EE82EE', '#DB7093', '#6495ED', '#44aff0']\n    \nlet sInner\nlet sOuter = []\nsInner = pieData.map(d => {\n    if (d.children) {\n        d.children.forEach(r => {\n            sOuter.push({\n                name: r.name,\n                value: r.value,\n                type: d.name.replace(/中国|定电/g, '')\n            })\n        })\n    }\n    return {\n        name: d.name.replace(/中国|定电/g, ''),\n        value: d.value\n    }\n})\noption = {\n    backgroundColor: 'rgba(0,51,102, 1)',\n    color: colorList,\n    tooltip: {\n        formatter(data) {\n            let d = data.data\n            if (d.type) {\n                return d.type + '</br>' + d.name + '：' + d.value\n            }\n            return d.name + '：' + d.value\n        }\n    },\n    legend: {\n        show: false\n    },\n    series: [{\n            name: '运营商',\n            type: 'pie',\n            selectedMode: 'single',\n            radius: [0, '25%'],\n    \n            label: {\n                normal: {\n                    position: 'inner',\n                      fontSize: 20,\n                    formatter(d) {\n                        return d.name + d.value\n                    }\n                }\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            data: sInner\n        },\n        {\n            name: '通联行为',\n            type: 'pie',\n            radius: ['30%', '40%'],\n            label: {\n                normal: {\n                    color: '#fff',\n                    fontSize: 20,\n                    formatter(d) {\n                        return d.data.type + d.name + d.value\n                    }\n                }\n            },\n            data: sOuter\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-2508331564","theme":"","layout":"","viewCount":2521,"userName":"锃***6","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x1adHnLs-6.png?v=1545790257702","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":["sunburst"],"updaterUserName":"Q***s"}}