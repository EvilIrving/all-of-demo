{"status":0,"data":{"cid":"xB3HEvArbq","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"地区区域划分","description":"地图区域划分","latestVersion":2,"alwaysLatest":1,"createTime":"2020-12-03T01:47:38.000Z","lastUpdateTime":"2020-12-03T01:47:38.000Z","auth":1,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-03T02:46:10.000Z","code":"\n\nvar uploadedDataURL = \"/asset/get/s/data-1606959574704-fdtWnfPRB.json\";\n\n// 方法一：coordinates合并，但合并后省份交界处存在边界\n// https://www.cnblogs.com/zzwlong/p/10338950.html\n// var uploadedDataURL = \"/asset/get/s/data-1606901385551-N8C_biM-e.json\";\n// var mergeProvinces = function(chinaJson, names, properties) { //合并大区里省份的coordinates\n//     var features = chinaJson.features;\n//     var polygons = [];\n//     var polygons2 = [];\n//     for (var i = 0; i < names.length; i++) {\n//         var polygonsCoordinates = [];\n//         var polygonsEncodeOffsets = [];\n//         for (var z = 0; z < names[i].length; z++) {\n//             for (var j = 0; j < features.length; j++) {\n//                 if (features[j].properties.name.includes(names[i][z])) {\n//                     if (features[j].geometry.coordinates[0].constructor == String) { //合并coordinates\n//                         for (var l = 0; l < features[j].geometry.coordinates.length; l++) {\n//                             polygonsCoordinates.push(features[j].geometry.coordinates[l]);\n//                         }\n\n//                     } else if (features[j].geometry.coordinates[0].constructor == Array) {\n//                         for (var k = 0; k < features[j].geometry.coordinates.length; k++) {\n//                             for (var d = 0; d < features[j].geometry.coordinates[k].length; d++) {\n//                                 polygonsCoordinates.push(features[j].geometry.coordinates[k][d]);\n//                             }\n//                         }\n//                     }\n//                     break;\n//                 }\n//             }\n//         }\n//         polygons.push(polygonsCoordinates);\n//         polygons2.push(polygonsEncodeOffsets);\n//     }\n\n//     // 构建新的合并区域\n//     var features = [];\n//     for (var a = 0; a < names.length; a++) {\n//         var feature = {\n//             id: features.length.toString(),\n//             type: \"FeatureCollection\",\n//             geometry: {\n//                 type: \"Polygon\",\n//                 coordinates: polygons[a],\n//                 encodeOffsets: polygons2[a]\n//             },\n//             properties: {\n//                 name: properties.name[a] || \"\",\n//                 childNum: polygons[a].length\n//             }\n//         };\n//         if (properties.cp[a]) {\n//             feature.properties.cp = properties.cp[a];\n//         }\n\n//         // 将新的合并区域添加到地图中\n//         features.push(feature);\n//     }\n//     console.log('features', features)\n//     chinaJson.features = features;\n//     return chinaJson\n\n// };\n\n// 方法二：在此网站可进行地图合并  https://mapshaper.org/ \n// 具体教程  https://www.lizenghai.com/archives/60916.html\n// 仅需处理json数据，然后进行合并即可，会消除共同边界，返回新的json\n\n// 颜色待补充\nlet colorList = [\n    new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }]), new echarts.graphic.RadialGradient(0.5, 0.5, 1, [{\n        offset: 0,\n        color: 'red',\n    }, {\n        offset: 1,\n        color: 'blue'\n    }])\n]\n\n\n\n\n\n$.get(uploadedDataURL, function(chinaJson) {\n    // 方法一：\n    // var params = {\n    //     names: [ //把各个大区的省份用二维数组分开\n    //         ['北京', '天津', '河北', '山西', '内蒙古'],\n    //         [\"黑龙江\", \"吉林\", \"辽宁\"],\n    //         ['山东', '江苏', '安徽', '江西', '浙江', '福建', '上海', '台湾'],\n    //         ['河南', '湖北', '湖南'],\n    //         ['广东', '广西', '海南', '香港', '澳门'],\n    //         ['重庆', '四川', '云南', '西藏', '贵州'],\n    //         ['陕西', '甘肃', '青海', '宁夏', '新疆']\n    //     ],\n    //     properties: { //自定义大区的名字，要和上面的大区省份一一对应\n    //         name: ['华北', '东北', '华东', '华中', '华南', '西南', '西北'],\n    //         cp: [ //经纬度可以自己随意定义\n    //             [116.24, 39.54],\n    //             [126.32, 43.50],\n    //             [121.28, 31.13],\n    //             [114.20, 30.32],\n    //             [113.15, 23.08],\n    //             [104.04, 30.39],\n    //             [103.49, 36.03]\n    //         ]\n    //     }\n    // };\n    // let newMap = mergeProvinces(JSON.parse(chinaJson), params.names, params.properties);\n    // echarts.registerMap('china', newMap);\n    \n    echarts.registerMap('china',chinaJson);\n\n    option = {\n        geo: [{\n            center: [103.49, 36.03],\n            map: 'china',\n            show: true, //显示地图\n            roam: false,\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            aspectScale: 1, //地图的长宽比拉升地图\n            layoutSize:100, //地图的大小\n            itemStyle: {\n                normal: {\n                    opacity: 1\n                },\n                emphasis: {\n                    label: {\n                        show: true,\n                        opacity: 0\n                    }\n                }\n            },\n            // 区域颜色部分\n            regions: [{\n                name: '华北',\n                itemStyle: {\n                    areaColor: 'red',\n                    borderColor: 'pink',\n                    borderWidth:2\n                }\n            }, {\n                name: '东北',\n                itemStyle: {\n                    areaColor: 'blue',\n                    borderColor: 'red',\n                    borderWidth:2\n                }\n            }, {\n                name: '华东',\n                itemStyle: {\n                    areaColor: 'green',\n                    borderColor: 'blue',\n                    borderWidth:2\n                }\n            }, {\n                name: '华中',\n                itemStyle: {\n                    areaColor: 'yellow',\n                    borderColor: 'green',\n                    borderWidth:2\n                }\n            }, {\n                name: '华南',\n                itemStyle: {\n                    areaColor: 'orange',\n                    borderColor: 'yellow',\n                    borderWidth:2\n                }\n            }, {\n                name: '西南',\n                itemStyle: {\n                    areaColor: 'gray',\n                    borderColor: 'orange',\n                    borderWidth:2\n                }\n            }, {\n                name: '西北',\n                itemStyle: {\n                    areaColor: 'pink',\n                    borderColor: 'gray',\n                    borderWidth:2\n                }\n            }, {\n                name: \"南海诸岛\",\n                itemStyle: {\n                    // 隐藏地图\n                    normal: {\n                        opacity: 0, // 为 0 时不绘制该图形\n                    }\n                },\n                label: {\n                    show: false // 隐藏文字\n                }\n            }]\n        }\n        ],\n        series: []\n    };\n    myChart.setOption(option);\n});","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":46,"userName":"m***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xB3HEvArbq.png?v=1606963570425","isCustomThumbnail":0,"builtinTags":["category-work","geo"],"customTags":[],"updaterUserName":"m***h"}}