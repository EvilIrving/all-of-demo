{"status":0,"data":{"cid":"xlbzEHlcAM","authorUid":"bd-1731291088","authorUserName":"走***a","title":"多pie","description":"pie","latestVersion":4,"alwaysLatest":1,"createTime":"2020-09-17T08:41:00.000Z","lastUpdateTime":"2020-09-17T08:41:00.000Z","auth":2,"uid":"bd-1731291088","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-18T06:22:45.000Z","code":"data = [{\r\n        name: \"数据1\",\r\n        value: 754,\r\n    },\r\n    {\r\n        name: \"数据2\",\r\n        value: 611\r\n    },\r\n    {\r\n        name: \"数据3\",\r\n        value: 450\r\n    },\r\n    {\r\n        name: \"数据4\",\r\n        value: 400\r\n    },\r\n    {\r\n        name: \"数据5\",\r\n        value: 300\r\n    },\r\n    {\r\n        name: \"数据6\",\r\n        value: 200\r\n    }\r\n];\r\nlegend_data = {\r\n    '数据1': ' 数据1  8 | 4%'\r\n};\r\ncolors = [\"RGB(15,204,152)\", \"RGB(54,197,246)\", \"RGB(1,149,233)\", \"RGB(195,231,3)\", \"RGB(238,190,59)\", \"RGB(248,44,96)\"]\r\narrName = getArrayValue(data, \"name\");\r\narrValue = getArrayValue(data, \"value\");\r\nsumValue = data.reduce((pre, item) => {\r\n    return pre + item.value\r\n}, 0);\r\nconsole.log(sumValue);\r\nobjData = array2obj(data, \"name\");\r\noptionData = getData(data)\r\n\r\nfunction getArrayValue(array, key) {\r\n    var key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction array2obj(array, key) {\r\n    var resObj = {};\r\n    for (var i = 0; i < array.length; i++) {\r\n        resObj[array[i][key]] = array[i];\r\n    }\r\n    return resObj;\r\n}\r\n\r\nfunction getData(data) {\r\n    var res = {\r\n        series: [],\r\n        yAxis: []\r\n    };\r\n    for (let i = 0; i < data.length; i++) {\r\n        res.series.push({\r\n            name: '学历',\r\n            type: 'pie',\r\n            clockWise: true,\r\n            z: 2,\r\n            hoverAnimation: false,\r\n            radius: [70 - i * 12 + '%', 68 - i * 12 + '%'],\r\n            center: [\"50%\", \"55%\"],\r\n            label: {\r\n                show: true,\r\n                formatter: '{d}%',\r\n                color: 'RGB(246,175,101)',\r\n                fontSize: 25,\r\n                position: 'inside'\r\n            },\r\n            labelLine: {\r\n                show: false\r\n            },\r\n            data: [{\r\n                    value: data[i].value,\r\n                    name: data[i].name,\r\n                    itemStyle: {\r\n                        color: colors[i]\r\n                    }\r\n                },\r\n                {\r\n                    value: sumValue - data[i].value,\r\n                    name: '',\r\n                    itemStyle: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderWidth: 0\r\n                    },\r\n                    tooltip: {\r\n                        show: false\r\n                    },\r\n                    label: {\r\n                        show: false\r\n                    },\r\n                    hoverAnimation: false\r\n                }\r\n            ]\r\n        });\r\n        res.series.push({\r\n            name: '背景线',\r\n            type: 'pie',\r\n            silent: true,\r\n            z: 1,\r\n            clockWise: true,\r\n            hoverAnimation: false,\r\n            radius: [70 - i * 12 + '%', 68 - i * 12 + '%'],\r\n            center: [\"50%\", \"55%\"],\r\n            label: {\r\n                show: false\r\n            },\r\n            itemStyle: {\r\n                label: {\r\n                    show: false,\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                borderWidth: 5,\r\n            },\r\n            data: [{\r\n                value: 100,\r\n                itemStyle: {\r\n                    color: \"RGB(13,46,49)\",\r\n                    borderWidth: 0\r\n                },\r\n                tooltip: {\r\n                    show: false\r\n                },\r\n                hoverAnimation: false\r\n            }]\r\n        });\r\n        res.yAxis.push(data[i].name);\r\n    }\r\n    return res;\r\n}\r\n\r\noption = {\r\n    backgroundColor: 'RGB(0,10,16)',\r\n    color: [{\r\n        type: 'linear',\r\n        x: 0,\r\n        y: 0,\r\n        x2: 1,\r\n        y2: 1,\r\n        colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(10,31,95,1)'\r\n        }, {\r\n            offset: 1,\r\n            color: 'rgba(1,232,254,1)'\r\n        }],\r\n        global: false\r\n    }],\r\n    grid: {\r\n        top: '16%',\r\n        bottom: '54%',\r\n        left: \"50%\",\r\n        containLabel: false\r\n    },\r\n    legend: [{\r\n            x: '70%',\r\n            y: '3%',\r\n            icon:'rect',\r\n            data: ['数据1'],\r\n            formatter: function(name) {\r\n                console.log(name);\r\n                return legend_data[name];\r\n            },\r\n            textStyle:{\r\n                color:colors[0],\r\n            }\r\n        },\r\n        {\r\n            x: '85%',\r\n            y: '3%',\r\n            data: ['数据2'],\r\n            formatter: function(params) {\r\n                console.log(params);\r\n                return 'Legend ' + name;\r\n            },\r\n        },\r\n\r\n        {\r\n            x: 'right',\r\n            y: '6%',\r\n            data: ['数据3', '数据4']\r\n        },\r\n        {\r\n            x: 'right',\r\n            y: '8%',\r\n            data: ['数据5', '数据6']\r\n        },\r\n    ],\r\n\r\n    yAxis: [{\r\n        type: 'category',\r\n        inverse: true,\r\n        z: 3,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            inside: false,\r\n            textStyle: {\r\n                color: \"RGB(78,184,252)\",\r\n                fontSize: 25,\r\n            },\r\n            show: true\r\n        },\r\n        data: optionData.yAxis\r\n    }],\r\n    xAxis: [{\r\n        show: false\r\n    }],\r\n    series: optionData.series\r\n};","html":"","externalScripts":"","updaterUID":"bd-1731291088","theme":"","layout":"","viewCount":123,"userName":"走***a","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xlbzEHlcAM.png?v=1600410165714","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-pie"],"customTags":[],"updaterUserName":"走***a"}}