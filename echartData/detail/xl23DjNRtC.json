{"status":0,"data":{"cid":"xl23DjNRtC","authorUid":"bd-3959925009","authorUserName":"随***缘","title":"地图","description":"","latestVersion":4,"alwaysLatest":1,"createTime":"2021-01-09T04:09:29.000Z","lastUpdateTime":"2021-10-22T18:01:29.000Z","auth":2,"uid":"bd-3959925009","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.9.0","versionCreateTime":"2021-10-22T18:01:29.000Z","code":"option = {\n    toolbox: {\n        show: true,\n        feature: {\n            dataView: {\n                show: true,\n                readOnly: true,\n            },\n            restore: {\n                show: true,\n            },\n            saveAsImage: {\n                show: true,\n            },\n        },\n    },\n};\n\n//各省份的数据\nvar allData = [\n    { name: '内蒙古', value: 0 },\n    { name: '青海', value: 0 },\n    { name: '吉林', value: 0 },\n    { name: '甘肃', value: 0 },\n    { name: '黑龙江', value: 0 },\n    { name: '山东', value: 0 },\n    { name: '天津', value: 0 },\n    { name: '新疆', value: 0 },\n    { name: '云南', value: 150000 },\n    { name: '浙江', value: 3380000 },\n    { name: '江苏', value: 300000 },\n    { name: '河北', value: 0 },\n    { name: '北京', value: 2563455 },\n    { name: '河南', value: 980000 },\n    { name: '宁夏', value: 0 },\n    { name: '上海', value: 380300 },\n    { name: '辽宁', value: 0 },\n    { name: '江西', value: 0 },\n    { name: '山西', value: 0 },\n    { name: '福建', value: 1418900 },\n    { name: '重庆', value: 0 },\n    { name: '四川', value: 286917 },\n    { name: '湖南', value: 256096 },\n    { name: '安徽', value: 0 },\n    { name: '湖北', value: 0 },\n    { name: '陕西', value: 0 },\n    { name: '贵州', value: 98000 },\n    { name: '广东', value: 1188980 },\n    { name: '广西', value: 286889 },\n    { name: '西藏', value: 0 },\n    { name: '台湾', value: 0 },\n    { name: '海南', value: 336126 },\n];\nloadMap('/asset/get/s/data-1527045631990-r1dZ0IM1X.json', 'china'); //初始化全国地图\n\nvar timeFn = null;\n\n//单击切换到省级地图，当mapCode有值,说明可以切换到下级地图\nmyChart.on('click', function (params) {\n    clearTimeout(timeFn);\n    //由于单击事件和双击事件冲突，故单击的响应事件延迟250毫秒执行\n    timeFn = setTimeout(function () {\n        var name = params.name; //地区name\n        var mapCode = provinces[name]; //地区的json数据\n        if (!mapCode) {\n            alert('无此区域地图显示');\n            return;\n        }\n        loadMap(mapCode, name);\n    }, 250);\n});\n\n// 绑定双击事件，返回全国地图\n\n/**\n获取对应的json地图数据，然后向echarts注册该区域的地图，最后加载地图信息\n@params {String} mapCode:json数据的地址\n@params {String} name: 地图名称\n*/\nfunction loadMap(mapCode, name) {\n    $.get(mapCode, function (data) {\n        if (data) {\n            echarts.registerMap(name, data);\n            var option = {\n                tooltip: {\n                    show: true,\n                    formatter: function (params) {\n                        if (params.data) return params.name + '：' + params.data['value'];\n                    },\n                },\n                visualMap: {\n                    type: 'continuous',\n                    text: ['', ''],\n                    showLabel: true,\n                    left: '50',\n                    min: 0, //最小值，根据项目需要进行修改\n                    max: 2400000, //最大值，根据项目需要进行修改\n                    calculable: true,\n                    label: ['0', '24000000'],\n                    inRange: {\n                        color: ['#ffffff', '#A2CFD9', '#5593B2', '#1A527F', '#113F67'], //可以更换颜色\n                    },\n                    splitNumber: 0,\n                },\n                series: [\n                    {\n                        name: 'MAP',\n                        type: 'map',\n                        mapType: name,\n                        selectedMode: 'false', //是否允许选中多个区域\n                        label: {\n                            normal: {\n                                show: true,\n                            },\n                            emphasis: {\n                                show: true,\n                            },\n                        },\n                        data: allData,\n                    },\n                ],\n            };\n            myChart.setOption(option);\n            // curMap = {\n            //     mapCode: mapCode,\n            //     mapName: name\n            // };\n        } else {\n            alert('无法加载该地图');\n        }\n    });\n}\n","html":"","externalScripts":"","updaterUID":"bd-3959925009","theme":"","layout":"","viewCount":97,"userName":"随***缘","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xl23DjNRtC.png?v=1634925689767","isCustomThumbnail":0,"builtinTags":["category-work","series-map","toolbox","tooltip","visualMap"],"customTags":[],"updaterUserName":"随***缘"}}