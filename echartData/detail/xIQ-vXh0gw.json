{"status":0,"data":{"cid":"xIQ-vXh0gw","authorUid":"bd-3969692056","authorUserName":"r***y","title":"地图点击切换颜色,并显示自己的值","description":"地图点击变色,并显示自己的值","latestVersion":1,"alwaysLatest":1,"createTime":"2019-05-21T08:32:46.000Z","lastUpdateTime":"2019-05-21T08:32:46.000Z","auth":2,"uid":"bd-3969692056","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-21T08:32:46.000Z","code":"   var geoCoordMap = {\r\n            '黑龙江': [127.9688, 45.368],\r\n            '内蒙古': [110.3467, 41.4899],\r\n            \"吉林\": [125.8154, 44.2584],\r\n            '北京': [116.4551, 40.2539],\r\n            \"辽宁\": [123.1238, 42.1216],\r\n            \"河北\": [114.4995, 38.1006],\r\n            \"天津\": [117.4219, 39.4189],\r\n            \"山西\": [112.3352, 37.9413],\r\n            \"陕西\": [109.1162, 34.2004],\r\n            \"甘肃\": [103.5901, 36.3043],\r\n            \"宁夏\": [106.3586, 38.1775],\r\n            \"青海\": [101.4038, 36.8207],\r\n            \"新疆\": [87.9236, 43.5883],\r\n            \"西藏\": [91.11, 29.97],\r\n            \"四川\": [103.9526, 30.7617],\r\n            \"重庆\": [108.384366, 30.439702],\r\n            \"山东\": [117.1582, 36.8701],\r\n            \"河南\": [113.4668, 34.6234],\r\n            \"江苏\": [118.8062, 31.9208],\r\n            \"安徽\": [117.29, 32.0581],\r\n            \"湖北\": [114.3896, 30.6628],\r\n            \"浙江\": [119.5313, 29.8773],\r\n            \"福建\": [119.4543, 25.9222],\r\n            \"江西\": [116.0046, 28.6633],\r\n            \"湖南\": [113.0823, 28.2568],\r\n            \"贵州\": [106.6992, 26.7682],\r\n            \"云南\": [102.9199, 25.4663],\r\n            \"广东\": [113.12244, 23.009505],\r\n            \"广西\": [108.479, 23.1152],\r\n            \"海南\": [110.3893, 19.8516],\r\n            '上海': [119.1803, 31.2891],\r\n            '台湾': [121.4648, 25.5630]\r\n        };\r\n        var chinaDatas = [\r\n            [{\r\n                name: '黑龙江',\r\n                value: 100\r\n            }],\r\n            [{\r\n                name: '内蒙古',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '吉林',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '辽宁',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '河北',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '天津',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '山西',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '陕西',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '甘肃',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '宁夏',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '青海',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '新疆',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '西藏',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '四川',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '重庆',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '山东',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '河南',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '江苏',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '安徽',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '湖北',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '浙江',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '福建',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '江西',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '湖南',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '贵州',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '广西',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '海南',\r\n                value: 300\r\n            }],\r\n            [{\r\n                name: '上海',\r\n                value: 1300\r\n            }],\r\n            [{\r\n                name: '广东',\r\n                value: 1300\r\n            }],\r\n            [{\r\n                name: '云南',\r\n                value: 1300\r\n            }],\r\n            [{\r\n                name: '北京',\r\n                value: 1300\r\n            }],\r\n            [{\r\n                name: '台湾',\r\n                value: 1300\r\n            }]\r\n        ];\r\n        var defaultP = [\r\n            [{\r\n                name: '四川',\r\n                value: 300,\r\n                selected: true\r\n            }]\r\n        ]\r\n        var convertData = function(data) {\r\n            console.log(data)\r\n            var res = [];\r\n            for (var i = 0; i < data.length; i++) {\r\n                var geoCoord = geoCoordMap[data[i][0].name];\r\n                console.log(geoCoord, 'geoCoord')\r\n                if (geoCoord) {\r\n                    res.push({\r\n                        name: data[i][0].name,\r\n                        value: geoCoord.concat(data[i][0].value)\r\n                    });\r\n                }\r\n            }\r\n            console.log(res, '///')\r\n            return res;\r\n        };\r\n\r\n         option = {\r\n            backgroundColor: 'transparent',\r\n            tooltip: {\r\n                trigger: 'item',\r\n                triggerOn: 'click',\r\n                backgroundColor: 'transparent',\r\n                alwaysShowContent: true,\r\n                formatter(params, p, a) {\r\n                    console.log(params.data.name)\r\n                    return params.data.name + params.data.value\r\n                }\r\n            },\r\n            geo: {\r\n                map: 'china',\r\n                label: {\r\n                    emphasis: {\r\n                        color: 'white',\r\n                        show: false\r\n                    }\r\n                },\r\n                zoom: 1.2,\r\n                itemStyle: {\r\n                    normal: {\r\n                        borderWidth: 1, // 区域边框宽度\r\n                        borderColor: 'rgba(37, 88, 184, 0.8)', // 区域边框颜色\r\n                        areaColor: '#0183C3' // 区域颜色\r\n                    },\r\n                    emphasis: {\r\n                        areaColor: '#3889FF'\r\n                    }\r\n                },\r\n                regions: defaultP[0],\r\n                tooltip: {\r\n                    show: false\r\n                }\r\n            },\r\n            series: [\r\n                {\r\n                type: 'effectScatter',\r\n                coordinateSystem: 'geo',\r\n                z:1,\r\n               \r\n                data: convertData(defaultP),\r\n               \r\n                symbolSize: 14,\r\n                itemStyle: {              \r\n                       color:'#fff',       \r\n                },\r\n                tooltip: {\r\n                    show: true\r\n                }\r\n            }, {\r\n                type: 'map',\r\n                mapType: 'china',\r\n                geoIndex: 0,\r\n                z: 0,\r\n                data: convertData(chinaDatas)\r\n            }]\r\n        };\r\n        setTimeout(() => {\r\n            myChart.dispatchAction({\r\n                type: 'showTip',\r\n                seriesIndex: 0,\r\n                dataIndex: 0\r\n            })\r\n\r\n        }, 0)\r\n        // var mymap = echarts.init(document.getElementById('main'));\r\n        // mymap.setOption(options);\r\n        myChart.on('click', params => {\r\n            if (params.seriesType === 'map') {\r\n                // 如果不存在，则不能选中\r\n                console.log(params)\r\n                const selectData = convertData([\r\n                    [{\r\n                        name: params.name,\r\n                        value: params.data.value[2]\r\n                    }]\r\n                ])\r\n                option.geo.regions = [{\r\n                    name: params.name,\r\n                    selected: true\r\n                }]\r\n\r\n                // 显示光圈\r\n                option.series[0].data = selectData\r\n                myChart.setOption(option)\r\n                setTimeout(() => {\r\n                    myChart.dispatchAction({\r\n                        type: 'showTip',\r\n                        seriesIndex: 0,\r\n                        dataIndex: 0\r\n                    })\r\n\r\n                }, 0)\r\n\r\n            }\r\n        })","html":"","externalScripts":"/dep/echarts/latest/extension/bmap.min.js,/dep/echarts/map/js/china.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js","updaterUID":"bd-3969692056","theme":"","layout":"","viewCount":6398,"userName":"r***y","commentCount":2,"starCount":13,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIQ-vXh0gw.png?v=1558427567069","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","tooltip"],"customTags":["china","map","地图点击"],"updaterUserName":"r***y"}}