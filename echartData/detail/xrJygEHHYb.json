{"status":0,"data":{"cid":"xrJygEHHYb","authorUid":"bd-2310194360","authorUserName":"A***3","title":"MapBox可视化","description":"FR 国金中心  ","latestVersion":1,"alwaysLatest":1,"createTime":"2017-08-31T08:08:06.000Z","lastUpdateTime":"2017-08-31T08:08:06.000Z","auth":2,"uid":"bd-2310194360","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"3.7.0","versionCreateTime":"2017-08-31T08:08:06.000Z","code":"$.getJSON('/asset/get/s/data-1504165783912-rylo1HSFb.json', function(data) {\n\n    mapboxgl.accessToken = 'pk.eyJ1IjoiYWFyb242NjYiLCJhIjoiY2o2M2NmZmJ4MWc0ZDJxbnI3dmZ5OXB2MSJ9.T3trJ5Tu66Kw-w-1ELpzBA';\n    var mapboxgl_style = 'mapbox://styles/mapbox/dark-v9';\n    var mapboxgl_center = [120.30327558517455, 31.55755415024492];\n\n    echarts.registerMap('buildings', data);\n\n    myChart.hideLoading();\n\n    var regionsData = data.features.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: feature.properties.height,\n            height: +feature.properties.height * 10 + 0.1,\n            emphasis: {\n                label: {\n                    show: true\n                }\n            }\n        };\n    });\n\n    var roadData = data.features.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: feature.properties.height,\n            coords: feature.geometry.coordinates\n        };\n    });\n\n    myChart.setOption({\n        visualMap: {\n            show: false,\n            min: 2,\n            max: 35,\n            inRange: {\n                color: ['#696868', '#594e76', '#635177', '#7b5675', '#94596d', '#da6b58', '#ff6029', '#f23e19', '#e42e16'] //aaron\n            }\n        },\n        tooltip: {\n            trigger: 'item',\n            formatter: \"{a} <br/>{b} : {c} ({d}%)\",\n            triggerOn: 'mousemove',\n            position: [10, 10]\n        },\n        mapbox: {\n            center: mapboxgl_center,\n            zoom: 16,\n            pitch: 50,\n            bearing: -10,\n            style: mapboxgl_style,\n            shading: 'realistic',\n            postEffect: {\n                enable: true,\n                SSAO: {\n                    enable: true,\n                    intensity: 1.3,\n                    radius: 5,\n                    quality: 'low'\n                },\n                depthOfField: {\n                    enable: false,\n                    blurRadius: 1,\n                    focalDistance: 90,\n                    quality: 'low'\n                }\n            },\n            light: {\n                main: {\n                    intensity: 0.5,\n                    shadow: false,\n                    alpha: 10,\n                    beta: -10\n                },\n                ambient: {\n                    intensity: 0.2\n                },\n                ambientCubemap: {\n                    texture: './img_mapbox/sunlight.hdr',\n                    exposure: 0.5,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            },\n            zlevel: 10\n        },\n        series: [{\n            //路线数据\n            type: 'lines3D',\n            coordinateSystem: 'mapbox',\n            effect: {\n                show: true,\n                constantSpeed: 24,\n                trailWidth: 2,\n                trailLength: 0.5,\n                trailOpacity: 1,\n                trailColor: '#ff8022',\n                spotIntensity: 2\n            },\n            lineStyle: {\n                width: 1,\n                color: '#ff8022',\n                opacity: 0.1\n            },\n            blendMode: 'realistic',\n            polyline: true,\n            data: roadData,\n            zlevel: -99\n        }, {\n            //建筑数据\n            type: 'map3D',\n            silent: false,\n            name: 'buildings',\n            coordinateSystem: 'mapbox',\n            map: 'buildings',\n            data: regionsData,\n            shading: 'realistic',\n            instancing: true,\n            realisticMaterial: {\n                metalness: 0,\n                roughness: 0.5\n            },\n            label: {\n                show: false,\n                distance: 10,\n                formatter: '{b}: {c}',\n                textStyle: {\n                    color: '#272727',\n                    borderWidth: 0,\n                    fontFamily: 'sans-serif',\n                    fontWeight: 'lighter',\n                    fontSize: 12\n                }\n            },\n            itemStyle: {\n                opacity: 1\n            },\n            emphasis: {\n                label: {\n                    show: true,\n                    distance: 2,\n                    formatter: '{b}: {c}',\n                    textStyle: {\n                        color: '#272727',\n                        borderWidth: 0,\n                        fontFamily: 'sans-serif',\n                        fontWeight: 'lighter',\n                        fontSize: 12\n                    }\n                },\n                itemStyle: {\n                    opacity: 1,\n                    borderWidth: 1,\n                    borderColor: '#ff8022'\n                }\n            },\n            zlevel: -100\n        }]\n    });\n\n});","html":"","externalScripts":"http://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css,https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js","updaterUID":"bd-2310194360","theme":"","layout":"","viewCount":7964,"userName":"A***3","commentCount":3,"starCount":29,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJygEHHYb.png?v=1504166887729","isCustomThumbnail":1,"builtinTags":["category-work","mapbox","series-lines3D","series-map3D","tooltip","visualMap"],"customTags":["MapBox"],"updaterUserName":"A***3"}}