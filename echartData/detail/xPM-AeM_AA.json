{"status":0,"data":{"cid":"xPM-AeM_AA","authorUid":"obd-oAlFYisM8E7gN8M2hZfP9KB4LbEBg7b","authorUserName":"c***9","title":"农房危房","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-10-24T17:32:30.000Z","lastUpdateTime":"2021-10-24T17:32:30.000Z","auth":2,"uid":"obd-oAlFYisM8E7gN8M2hZfP9KB4LbEBg7b","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.1","versionCreateTime":"2021-10-24T17:32:30.000Z","code":"var data1 = [\r\n    { name: \"个人贷记卡利息收入\", value: 100000 },\r\n    { name: \"违约金\", value: 13000 },\r\n    { name: \"分期收入\", value: 150000 }\r\n].sort( (a, b) => {\r\n    return b.value - a.value\r\n})\r\n\r\nvar data2 = [\r\n    { name: \"发卡方收入\", value: 90000 },\r\n    { name: \"年费\", value: 20000 },\r\n    { name: \"取现费\", value: 40000 },\r\n    { name: \"收单业务\", value: 600 },\r\n    { name: \"其他收入\", value:-11000 }\r\n].sort( (a, b) => {\r\n    return b.value - a.value\r\n})\r\n\r\nvar data = data1.concat(data2)\r\nconsole.log(data)\r\nfunction getNum(num, d) {\r\n    let maxX = data[0].value\r\n    let minX = data[data.length - 1].value\r\n    let maxY = 5\r\n    let minY = 1\r\n    let a = (maxX - minX) / (maxY - minY)\r\n    let b = maxY - maxX / a\r\n    // console.log(maxX, minX, maxY, minY, a, b)\r\n    return +(num / a + b).toFixed(2)\r\n}\r\n\r\nfunction sum(start, end){\r\n    let num = 0\r\n    let d = data.slice(start, end)\r\n    for (let i = 0; i < d.length; i++) {\r\n        num += d[i].value\r\n    }\r\n\r\n    return num\r\n}\r\n\r\nvar getColor1 = function (x, y, r) {\r\n    return {\r\n        type: \"radial\",\r\n        x,\r\n        y,\r\n        r,\r\n        colorStops: [\r\n            { offset: 0, color: \"rgba(0, 42, 254, 0)\" },\r\n            { offset: 1, color: \"rgba(0, 180, 255, 0.3)\" }\r\n        ]\r\n    }\r\n}\r\nvar getColor2 = function (x, y, r) {\r\n    return {\r\n        type: \"radial\",\r\n        x,\r\n        y,\r\n        r,\r\n        colorStops: [\r\n            { offset: 1, color: \"rgba(0, 245, 254, 0.3)\" },\r\n            { offset: 0, color: \"rgba(0, 180, 255, 0)\" }\r\n        ]\r\n    }\r\n}\r\n\r\n// var colorList = [\"yellow\", \"blue\", \"red\"]\r\nvar colorList = [\r\n    getColor1(0.18, 1.1, 0.8), \r\n    getColor1(-0.1, 0.26, 0.8), \r\n    getColor1(0, 0, 0.8),\r\n    getColor2(0.8, 0, 0.8),\r\n    getColor2(0.8, 0.35, 0.8), \r\n    getColor2(0.8, 0.65, 0.8),\r\n    getColor2(0.6, 0.75, 0.8),\r\n    getColor2(0.6, 0.65, 0.8)\r\n]\r\n\r\nvar lineLength = [[10, 0],[-20, -0],[-100, 0],[-30, 0],[-60, 0],[-100, 0],[-120, 0],[-130, 0]]\r\n\r\nvar text = [\"个人贷记卡利息收入\", \"违约金\", \"分期收入\", \"发卡方收入\", \"年费\", \"取现费\", \"收单业务\", \"其他收入\"]\r\n\r\ndata = data.map( (item, index) => {\r\n    return {\r\n        name: item.name,\r\n        value: getNum(item.value),\r\n        value1: item.value,\r\n        itemStyle: {\r\n            color: colorList[index]  \r\n        },\r\n        labelLine: {\r\n            length: lineLength[index][0],\r\n            length2 : lineLength[index][1]\r\n        }\r\n    }\r\n})\r\n\r\nvar option = {\r\n    backgroundColor: \"#000\",\r\n    // color: colorList,\r\n    // color: [\"yellow\", \"blue\", \"red\"],\r\n    color: [\"yellow\", \"blue\", \"red\",\"rgba(0,0,0,0)\", \"rgba(0,0,0,0)\", \"rgba(0,0,0,0)\", \"rgba(0,0,0,0)\", \"rgba(0,0,0,0)\", \"rgba(0,0,0,0)\"],\r\n    series: [\r\n    {\r\n        type: 'pie',\r\n        radius: [\"28%\", \"31%\"],\r\n        startAngle: 100,\r\n        data: [\r\n            {\r\n                name: \"利息收入\",\r\n                value: sum(0, 3),\r\n                value1: 2100000,\r\n                itemStyle: {\r\n                    color: \"#00d8ff\"    \r\n                }\r\n            }, \r\n            {\r\n                name: \"中间业务收入\",\r\n                // value: 1150500,\r\n                value: sum(3),\r\n                value1: 1150500,\r\n                itemStyle: {\r\n                    color: \"#00fe5e\"    \r\n                }\r\n              \r\n            }\r\n        ],\r\n        label: {\r\n            formatter: function(params) {\r\n                return \"{n|\" +  params.name + \"}\\n{hr|}\\n{d|\" + params.data.value1 + \"}{unit| 万元}\"\r\n            },\r\n            rich: {\r\n                hr: {\r\n                    borderColor: \"#fff\",\r\n                    width: \"100%\",\r\n                    borderWidth: 2,\r\n                    height: 0\r\n                },\r\n                n: {\r\n                    fontSize: 16,\r\n                    color: \"#fff\",\r\n                    padding: 7\r\n                },\r\n                d: {\r\n                    fontSize: 23,\r\n                    color: \"#ffb400\",\r\n                    fontFamily: \"DINCond-Regular\",\r\n                    fontWeight: \"bold\",\r\n                    padding: 4\r\n                },\r\n                unit: {\r\n                    fontSize: 9,\r\n                    color: \"#ffb400\"\r\n                }\r\n            }\r\n        },\r\n        labelLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: \"#fff\"\r\n            }\r\n        },\r\n        z: 3\r\n    },\r\n    {\r\n        type: \"pie\",\r\n        startAngle: 100,\r\n        radius: [\"31%\", \"75%\"],\r\n        roseType: 'radius',\r\n        labelLine: {\r\n            show: false,\r\n        },\r\n        label: {\r\n            color: '#fff',\r\n            formatter: function(params) {\r\n                return \"{n|\" +  params.name + \"}\\n{d|\" + params.data.value1 + \"}\"\r\n            },\r\n            rich: {\r\n                n: {\r\n                    fontSize: 10,\r\n                    color: \"#fff\",\r\n                    // padding: 7\r\n                },\r\n                d: {\r\n                    fontSize: 12,\r\n                    color: \"#fff\",\r\n                    // fontFamily: \"DINCond-Regular\",\r\n                    // fontWeight: \"bold\",\r\n                    padding: [4, 0]\r\n                },\r\n                unit: {\r\n                    fontSize: 9,\r\n                    color: \"#ffb400\"\r\n                }\r\n            }\r\n        },\r\n        itemStyle: {\r\n            color: colorList\r\n        },\r\n        data: data\r\n    },\r\n    {\r\n        type: 'pie',\r\n        roseType: 'radius',\r\n        // clockwise: false,\r\n        radius: [\"80%\", \"84%\"],\r\n        data: [\r\n            data.map( item => {\r\n                return {\r\n                    value: item.value,\r\n                    itemStyle: {\r\n                        color: \"rgba(0,0,0,0)\",\r\n                        borderColor: \"black\",\r\n                        borderWidth: 2\r\n                    }\r\n                }\r\n            })[0], \r\n            { \r\n                value: 3250500 - data[0].value,\r\n                itemStyle: {\r\n                    borderWidth: 20,\r\n                    borderColor: \"black\",\r\n                    color: \"rgba(0,0,0,0)\",\r\n                    opacity: 0\r\n                }\r\n            }\r\n        ],\r\n        labelLine: {\r\n            show: false\r\n        },\r\n        label: {\r\n            show: false,\r\n        },\r\n    }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oAlFYisM8E7gN8M2hZfP9KB4LbEBg7b","theme":"","layout":"","viewCount":0,"userName":"c***9","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xPM-AeM_AA.png?v=1635096751007","isCustomThumbnail":0,"builtinTags":["category-work","series-pie"],"customTags":[],"updaterUserName":"c***9"}}