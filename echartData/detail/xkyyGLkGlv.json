{"status":0,"data":{"cid":"xkyyGLkGlv","authorUid":"bd-2552167583","authorUserName":"z***g","title":"饼图-横着","description":"","latestVersion":5,"alwaysLatest":0,"createTime":"2021-05-28T02:00:35.000Z","lastUpdateTime":"2021-05-28T02:00:35.000Z","auth":2,"uid":"bd-2552167583","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"5.1.1","versionCreateTime":"2021-06-15T03:48:03.000Z","code":"function minArray(array) {\n    let min = array[0];\n    const len = array.length;\n    for (let i = 1; i < len; i++) {\n        if ((array[i] && array[i] < min) || (array[i] == 0 && array[i] < min)) {\n            min = array[i];\n        }\n    }\n    return min;\n}\nfunction maxArray(array) {\n    let max = array[0];\n    const len = array.length;\n    for (let i = 0; i < len; i++) {\n        if ((array[i] && array[i] > max) || (array[i] == 0 && array[i] > max)) {\n            max = array[i];\n        }\n    }\n    return max;\n}\nvar data = { xAxis: ['企业总数', '废气企业', '废水企业', '铅污染', '铬污染'], data: [417, 74, 72, 67, 55] };\n\nif (!Object.keys(data).length) {\n    return false;\n} else {\n    var maxarr = Number(maxArray(data.data));\n}\n\nvar salvProMax = []; // 背景按最大值\n let fontSizeMax = data.xAxis[0].length\nfor (let i = 0; i < data.xAxis.length; i++) {\n    if (data.xAxis[i].length > fontSizeMax) {\n          fontSizeMax = data.xAxis[i].length\n        }\n    salvProMax.push(maxarr);\n}\noption = {\n    backgroundColor: '#000C3B',\n    grid: {\n        left: '5%',\n        right: '5%',\n        bottom: '-3%',\n        top: '3%',\n        containLabel: true,\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'none',\n        },\n        formatter: function (params) {\n            return params[0].name + ' : ' + params[0].value + '次';\n        },\n    },\n    xAxis: [{\n        show: false,\n        type: \"value\",\n        splitLine: {\n            show: false\n        },\n        max: function(value) {\n            return value.max\n        }\n    }],\n    yAxis: [\n        {\n            type: 'category',\n            inverse: true,\n            axisLabel: {\n                show: true,\n                textStyle: {\n                    color: '#fff',\n                },\n                rich: {\n                  a3: {\n                    color: 'rgba(225,225,225,0)'\n                  }\n                },\n                formatter: function (value, index) {\n                  const indx = index + 1\n    \n                  const extent = (val) => {\n                    var str = '';\n                    if (str.length < fontSizeMax) {\n                      for (let i = 0; i < (fontSizeMax - val.length); i++) {\n                        str += '空'\n                      }\n                    }\n                    return str\n                  }\n                   return indx + value + `{a3|${extent(value)}}`\n                }\n            },\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                show: false,\n            },\n            axisLine: {\n                show: false,\n            },\n            data: data.xAxis,\n        },\n        {\n            type: 'category',\n            inverse: true,\n            axisTick: 'none',\n            axisLine: 'none',\n            show: true,\n            axisLabel: {\n                textStyle: {\n                    color: '#ffffff',\n                    fontSize: '12',\n                },\n                formatter: '{value}次',\n            },\n            data: data.data,\n        },\n    ],\n    series: [\n        {\n            name: '值',\n            type: 'bar',\n            zlevel: 1,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: 30,\n                    color: '#FF1F22',\n                },\n            },\n            barWidth: 10,\n            data: data.data,\n        },\n        {\n            name: '背景',\n            type: 'bar',\n            barWidth: 10,\n            barGap: '-100%',\n            data: salvProMax,\n            itemStyle: {\n                normal: {\n                    color: 'rgba(24,31,68,1)',\n                    barBorderRadius: 30,\n                },\n            },\n        },\n    ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-2552167583","theme":"","layout":"","viewCount":0,"userName":"z***g","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xkyyGLkGlv.png?v=1623728883803","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"z***g"}}