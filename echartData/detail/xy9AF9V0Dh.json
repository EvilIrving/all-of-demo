{"status":0,"data":{"cid":"xy9AF9V0Dh","authorUid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","authorUserName":"衰***命","title":"","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-17T06:50:30.000Z","lastUpdateTime":"2020-09-17T06:50:30.000Z","auth":2,"uid":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-17T06:50:30.000Z","code":"var getname = ['本校', '省内外校', '省外院校', '境外院校', '测试', '测试', '测试']\r\nvar getvalue = [39, 31, 18, 12, 0, 0, 0]\r\nvar sumvalue = sum(getvalue)\r\nvar data = []\r\nfor (var i = 0; i < getname.length; i++) {\r\n    data.push({\r\n        name: getname[i],\r\n        value: getvalue[i],\r\n    })\r\n}\r\n\r\nfunction sum(getvalue) {\r\n    var s = 0;\r\n    for (var i = getvalue.length - 1; i >= 0; i--) {\r\n        s += getvalue[i];\r\n    }\r\n    return s;\r\n}\r\n\r\nvar wordLength = (value) => {\r\n    var ret = \"\"; //拼接加\\n返回的类目项\r\n    var maxLength = 4; //每项显示文字个数\r\n    var valLength = value.length; //X轴类目项的文字个数\r\n    var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数\r\n    if (rowN > 1) //如果类目项的文字大于3,\r\n    {\r\n        for (var i = 0; i < rowN; i++) {\r\n            var temp = \"\"; //每次截取的字符串\r\n            var start = i * maxLength; //开始截取的位置\r\n            var end = start + maxLength; //结束截取的位置\r\n            if (end >= valLength) {\r\n                temp = value.substring(start, end);\r\n            } else {\r\n                temp = value.substring(start, end) + \"\\n\";\r\n            }\r\n            ret += temp; //凭借最终的字符串\r\n        }\r\n        return ret;\r\n    } else {\r\n        return value;\r\n    }\r\n}\r\n\r\nvar colorList = [{\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n        offset: 0,\r\n        color: '#7BB1FF' // 0% 处的颜色\r\n    }, {\r\n        offset: 1,\r\n        color: '#4185FF' // 100% 处的颜色\r\n    }],\r\n}, {\r\n    type: 'linear',\r\n    x: 0,\r\n    y: 0,\r\n    x2: 0,\r\n    y2: 1,\r\n    colorStops: [{\r\n        offset: 0,\r\n        color: '#00CFBF' // 0% 处的颜色\r\n    }, {\r\n        offset: 1,\r\n        color: '#05C398' // 100% 处的颜色\r\n    }],\r\n}]\r\n\r\nvar opacityList = [1, 1, 0.85, 0.85, 0.65, 0.65, 0.45, 0.45, 0.25, 0.25]\r\n\r\nvar offsetData = [\r\n    [50, 50],\r\n    [75, 75],\r\n    [70, 23],\r\n    [20, 45],\r\n    [30, 70],\r\n    [40, 15],\r\n    [80, 45]\r\n];\r\n\r\nvar datas = [];\r\nfor (var i = 0; i < data.length; i++) {\r\n    var item = data[i];\r\n    if (item.name === '测试') {\r\n        var colortxt = 'transparent';\r\n        var size = 35\r\n    } else {\r\n        var colortxt = '#fff';\r\n        var size = 50\r\n    }\r\n    datas.push({\r\n        name: '{value|' + item.value + \"%}\" + \"\\n\" + '{name|' + wordLength(item.name) + '}',\r\n        value: offsetData[i],\r\n        symbolSize: item.value / sumvalue * 200 + size,\r\n        label: {\r\n            normal: {\r\n                textStyle: {\r\n                    fontSize: 14,\r\n                    lineHeight: 20\r\n                },\r\n                rich: {\r\n                    name: {\r\n                        color: colortxt,\r\n                        fontSize: 15,\r\n                        fontWeight: '400',\r\n                        lineHeight: 20,\r\n                        align: 'center',\r\n                    },\r\n                    value: {\r\n                        color: colortxt,\r\n                        fontSize: 18,\r\n                        fontWeight: 'bold',\r\n                        lineHeight: 30,\r\n                        align: 'center',\r\n                    },\r\n\r\n                }\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: colorList[i % 2],\r\n                opacity: opacityList[i],\r\n            },\r\n\r\n        }\r\n    });\r\n}\r\nvar option = {\r\n    grid: {\r\n        show: false,\r\n        top: 10,\r\n        bottom: 10\r\n    },\r\n    xAxis: [{\r\n        gridIndex: 0,\r\n        type: \"value\",\r\n        show: false,\r\n        min: 0,\r\n        max: 100,\r\n        nameLocation: \"middle\",\r\n        nameGap: 5\r\n    }],\r\n    yAxis: [{\r\n        gridIndex: 0,\r\n        min: 0,\r\n        show: false,\r\n        max: 100,\r\n        nameLocation: \"middle\",\r\n        nameGap: 30\r\n    }],\r\n\r\n    series: [{\r\n        type: \"scatter\",\r\n        symbol: \"circle\",\r\n        symbolSize: 120,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                formatter: \"{b}\",\r\n                color: \"#fff\",\r\n                textStyle: {\r\n                    fontSize: \"20\"\r\n                }\r\n            }\r\n        },\r\n\r\n        itemStyle: {\r\n            normal: {\r\n                color: \"#00acea\"\r\n            }\r\n        },\r\n        data: datas\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"obd-o2-aTjNCXh_ADELOPM4d70VB1G3Oy6I","theme":"","layout":"","viewCount":545,"userName":"衰***命","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xy9AF9V0Dh.png?v=1600325430848","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-scatter"],"customTags":[],"updaterUserName":"衰***命"}}