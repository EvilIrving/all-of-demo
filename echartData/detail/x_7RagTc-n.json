{"status":0,"data":{"cid":"x_7RagTc-n","authorUid":"bd-2083624178","authorUserName":"霸***7","title":"自定义分段柱状图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-09-27T06:08:49.000Z","lastUpdateTime":"2020-09-27T06:08:49.000Z","auth":2,"uid":"bd-2083624178","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-09T01:09:05.000Z","code":"var categories = ['一', '二', '三', '四', '五', '六', '日'];\r\n\r\nvar step = 14399285;\r\n\r\nvar data = [{\r\n    name: 'JS Heap',\r\n    value: [0, '2020-09-27 22:05', '2020-09-28 04:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'Documents',\r\n    value: [1, '2020-09-27 23:05', '2020-09-28 06:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'Nodes',\r\n    value: [2, '2020-09-27 21:05', '2020-09-28 05:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'Listeners',\r\n    value: [3, '2020-09-27 21:05', '2020-09-28 05:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'GPU Memory',\r\n    value: [4, '2020-09-27 21:05', '2020-09-28 05:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'GPU',\r\n    value: [5, '2020-09-27 21:05', '2020-09-28 05:55'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}, {\r\n    name: 'GPU',\r\n    value: [6, '2020-09-27 23:55', '2020-09-28 07:30'],\r\n    itemStyle: {\r\n        normal: {\r\n            color: '#5a61bb'\r\n        }\r\n    }\r\n}]\r\nconsole.log(data)\r\n\r\nfunction renderItem(params, api) {\r\n    var categoryIndex = api.value(0);\r\n    var end = api.coord([categoryIndex, api.value(1)]);\r\n    var start = api.coord([categoryIndex, api.value(2)]);\r\n    var width = 50;\r\n    var rectShape = echarts.graphic.clipRectByRect({\r\n        x: start[0] - width / 2,\r\n        y: start[1],\r\n        width: 50,\r\n        height: end[1] - start[1]\r\n    }, {\r\n        x: params.coordSys.x,\r\n        y: params.coordSys.y,\r\n        width: params.coordSys.width,\r\n        height: params.coordSys.height\r\n    });\r\n\r\n    return rectShape && {\r\n        type: 'rect',\r\n        shape: rectShape,\r\n        style: api.style()\r\n    };\r\n}\r\n\r\n\r\noption = {\r\n    // tooltip: {\r\n    //     formatter: function(params) {\r\n    //         return params.marker + params.name + ': ' + params.value[1] + ' ms';\r\n    //     }\r\n    // },\r\n    title: {\r\n        text: '自定义分段柱状图',\r\n        left: 'center'\r\n    },\r\n    grid: {\r\n        height: 300\r\n    },\r\n    yAxis: [{\r\n        min: '2020-09-27 21:05',\r\n        max: '2020-09-28 07:30',\r\n        type: 'time',\r\n        splitNumber: 5,\r\n        axisLabel: {\r\n            formatter: function(value) {\r\n                var date = new Date(value);\r\n                var texts = [date.getHours() < 10 ? '0' + date.getHours() : date.getHours(), date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()];\r\n\r\n                return texts.join(':')\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                type: 'dashed'\r\n            }\r\n        }\r\n\r\n    }],\r\n    xAxis: {\r\n        data: categories,\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    series: [{\r\n        type: 'custom',\r\n        renderItem: renderItem,\r\n        itemStyle: {\r\n\r\n            opacity: 0.8\r\n\r\n        },\r\n        encode: {\r\n            y: [1, 2],\r\n            x: 0\r\n        },\r\n        data: data\r\n    }]\r\n};","html":"","externalScripts":"","updaterUID":"bd-2083624178","theme":"","layout":"","viewCount":6,"userName":"霸***7","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x_7RagTc-n.png?v=1602205745302","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-custom","title"],"customTags":[],"updaterUserName":"霸***7"}}