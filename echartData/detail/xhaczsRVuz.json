{"status":0,"data":{"cid":"xhaczsRVuz","authorUid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","authorUserName":"林***影","title":"半圆环图v2","description":"半圆环图v2","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-31T02:02:31.000Z","lastUpdateTime":"2021-08-31T02:02:31.000Z","auth":2,"uid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-31T02:02:31.000Z","code":"const payload = {\n    data: {\n        x: ['已覆盖', '未覆盖'],\n        title: {\n            value: '',\n            unit: '',\n            name: '透明现场情况'\n        },\n        data: [11, 22],\n        color: ['#f2c96b', '#ed8a5d'],\n        titleColor: {\n            value: '',\n            unit: '',\n            name: 'rgba(255,255,255,0.7)'\n        },\n        legendShowValue: false\n    }\n}\n\nconst { x: dataX, title, data: dataY, color, legendShowValue, titleColor = {} } = payload.data\n\nconst getSum = arr => {\n    return arr.reduce(function (prev, curr) {\n        return Number(prev) + Number(curr)\n    }, 0)\n}\n\nconst total = getSum(dataY)\nconst data1 = []\ndataY.forEach((item, index) => {\n    data1.push({\n        name: dataX[index],\n        value: item,\n        itemStyle: {\n            color: color[index] || 'transparent'\n        }\n    })\n})\ndata1.push({\n    name: '',\n    value: total,\n    itemStyle: {\n        color: 'transparent'\n    }\n})\n\noption = {\n    title: {\n        text: '{a|' + title.value + '}{c|' + title.unit + '}\\n{b|' + title.name + '}',\n        x: 'center',\n        y: '40%',\n        textStyle: {\n            fontSize: 12,\n            rich: {\n                a: {\n                    color: titleColor.value,\n                    fontSize: 18,\n                    align: 'center'\n                },\n                c: {\n                    color: titleColor.unit,\n                    fontSize: 12,\n                    height: 16,\n                    align: 'center'\n                },\n                b: {\n                    color: titleColor.name,\n                    fontSize: 16,\n                    height: 16,\n                    align: 'center'\n                }\n            }\n        }\n    },\n    legend: {\n        icon: 'circle',\n        bottom: '45%',\n        itemWidth: 12,\n        itemHeight: 6,\n        align: 'left',\n        textStyle: {\n            color: '#77899c',\n            fontSize: 12,\n            rich: {\n                a: {\n                    color: '#ABD5FA'\n                },\n                c: {\n                    color: '#f2c96b',\n                    align: 'right',\n                    padding: [0, 0, 0, 4]\n                }\n            }\n        },\n        formatter(name) {\n            const obj = data1.find(item => item.name === name)\n            if (obj) {\n                if (legendShowValue) return `{a|${name}}{c|${obj.value} 个}`\n                else return `{a|${name}}{c|${(obj.value / total).toFixed(4) * 100} %}`\n            }\n        }\n    },\n    series: [\n        {\n            type: 'pie',\n            emphasis: {\n                scale: false\n            },\n            label: {\n                show: false\n            },\n            center: ['50%', '50%'],\n            radius: ['0%', '40%'],\n            startAngle: 180,\n            data: [\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'rgba(226, 107, 67, 0.2)'\n                    }\n                },\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'transparent'\n                    }\n                }\n            ]\n        },\n        {\n            type: 'pie',\n            emphasis: {\n                scale: false\n            },\n            label: {\n                show: false\n            },\n            center: ['50%', '50%'],\n            radius: ['72%', '73%'],\n            startAngle: 180,\n            data: [\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'rgba(226, 107, 67, 0.2)'\n                    }\n                },\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'transparent'\n                    }\n                }\n            ]\n        },\n        {\n            type: 'pie',\n            emphasis: {\n                scale: false\n            },\n            label: {\n                show: false\n            },\n            center: ['50%', '50%'],\n            radius: ['50%', '70%'],\n            startAngle: 180,\n            data: [\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'rgba(226, 107, 67, 0.2)'\n                    }\n                },\n                {\n                    name: '',\n                    value: 100,\n                    itemStyle: {\n                        color: 'transparent'\n                    }\n                }\n            ]\n        },\n        {\n            name: '',\n            type: 'gauge',\n            min: 0, //最小刻度\n            max: 100, //最大刻度\n            splitNumber: 20, //刻度数量\n            center: ['50%', '50%'],\n            radius: '50%',\n            startAngle: 180,\n            endAngle: 0,\n            axisLine: {\n                show: false\n            }, //仪表盘轴线\n            axisLabel: {\n                show: false\n            }, //刻度标签。\n            axisTick: {\n                show: true,\n                splitNumber: 7,\n                lineStyle: {\n                    color: 'rgba(235, 185, 33, 1)', //用颜色渐变函数不起作用\n                    width: 1\n                },\n                length: 0 //不显示的刻度长度\n            }, //刻度样式\n            splitLine: {\n                show: true,\n                length: 8, //显示的刻度长度\n                lineStyle: {\n                    color: 'rgba(235, 185, 33, 1)' //用颜色渐变函数不起作用\n                }\n            }, //分隔线样式\n            detail: {\n                show: false\n            },\n            pointer: {\n                show: false\n            }\n        },\n        {\n            type: 'pie',\n            label: {\n                show: false\n            },\n            center: ['50%', '50%'],\n            radius: ['57%', '63%'],\n            startAngle: 180,\n            data: data1\n        }\n    ]\n}","html":"","externalScripts":"","updaterUID":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","theme":"","layout":"","viewCount":0,"userName":"林***影","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xhaczsRVuz.png?v=1630375352138","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-gauge","series-pie","title"],"customTags":[],"updaterUserName":"林***影"}}