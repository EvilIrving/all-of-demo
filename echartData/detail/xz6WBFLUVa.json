{"status":0,"data":{"cid":"xz6WBFLUVa","authorUid":"obd-o2HdDLuLPo6xEKGLgG2P_MgVQ2XePBc","authorUserName":"安***5","title":"仪表盘01","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-09-30T07:42:02.000Z","lastUpdateTime":"2020-09-30T07:42:02.000Z","auth":2,"uid":"obd-o2HdDLuLPo6xEKGLgG2P_MgVQ2XePBc","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-30T07:53:39.000Z","code":" // 获取容器尺寸\n        const w = document.documentElement.clientWidth - 20\n        const h =document.documentElement.clientHeight -30\n\n// 默认设置数据值\nconst baseValue = 3\n// 描述信息\nconst baseText = '安全风险等级'\n// 等级\nlet baseGrade = '较低'\nif (baseValue <= 3) {\n    baseGrade = '较低'\n} else if (baseValue <= 7) {\n    baseGrade = '居中'\n} else {\n    baseGrade = '较高'\n}\n// 边缘圆弧基础半径\nconst baseRadius0 = '69%'\nconst baseRadius1 = '74%'\n// 边缘圆弧开始圆角圆心位置\n// 边缘圆弧半径绝对值\nlet baseRadiusAbs0 = 0\nlet baseRadiusAbs1 = 0\nlet baseRadiusAbs = 0\nif (w < h) {\n    baseRadiusAbs0 = w * baseRadius0.substr(0, baseRadius0.length - 1) / 100 / 2\n    baseRadiusAbs1 = w * baseRadius1.substr(0, baseRadius1.length - 1) / 100 / 2\n} else {\n    baseRadiusAbs0 = h * baseRadius0.substr(0, baseRadius0.length - 1) / 100 / 2\n    baseRadiusAbs1 = h * baseRadius1.substr(0, baseRadius1.length - 1) / 100 / 2\n}\nbaseRadiusAbs = (baseRadiusAbs0 + baseRadiusAbs1) / 2\n// 开始圆角中心\nconst startCenterX = w / 2 - baseRadiusAbs\n// 开始圆角半径\nconst startRadius = (baseRadiusAbs1 - baseRadiusAbs0) / 2\n// 结束圆基底坐标x,y\nconst endBaseCenterX = w / 2 - baseRadiusAbs * Math.cos(baseValue / 10 * Math.PI)\nconst endBaseCenterY = h / 2 - baseRadiusAbs * Math.sin(baseValue / 10 * Math.PI)\n// 边缘圆弧渐变色\nlet edgeGradient = [{\n    offset: 0,\n    color: '#02F7D7' // 0% 处的颜色\n}, {\n    offset: 0.2,\n    color: '#09EAE2' // 20% 处的颜色\n}, {\n    offset: 0.4,\n    color: '#22A2F9' // 40% 处的颜色\n}, {\n    offset: 0.6,\n    color: '#2E43EB' // 60% 处的颜色\n}, {\n    offset: 0.8,\n    color: '#A5107A' // 80% 处的颜色\n}, {\n    offset: 1,\n    color: '#D20C58' // 100% 处的颜色\n}]\nif (baseValue <= 2) {\n    edgeGradient = [{\n        offset: 0,\n        color: '#02F7D7'\n    }, {\n        offset: 1,\n        color: '#09EAE2'\n    }]\n} else if (baseValue <= 4) {\n    edgeGradient = [{\n        offset: 0,\n        color: '#02F7D7'\n    }, {\n        offset: 0.5,\n        color: '#09EAE2'\n    }, {\n        offset: 1,\n        color: '#22A2F9'\n    }]\n} else if (baseValue <= 6) {\n    edgeGradient = [{\n        offset: 0,\n        color: '#02F7D7'\n    }, {\n        offset: 0.33,\n        color: '#09EAE2'\n    }, {\n        offset: 0.66,\n        color: '#22A2F9'\n    }, {\n        offset: 1,\n        color: '#2E43EB'\n    }]\n} else if (baseValue <= 8) {\n    edgeGradient = [{\n        offset: 0,\n        color: '#02F7D7'\n    }, {\n        offset: 0.33,\n        color: '#09EAE2'\n    }, {\n        offset: 0.66,\n        color: '#22A2F9'\n    }, {\n        offset: 0.88,\n        color: '#2E43EB'\n    }, {\n        offset: 1,\n        color: '#A5107A'\n    }]\n}\noption = {\n    backgroundColor: '#000312',\n    title: {\n        text: '仪表盘',\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    series: [\n        // 底部仪表\n        {\n            type: 'gauge',\n            startAngle: 180,\n            endAngle: 0,\n            min: 0,\n            max: 10,\n            splitNumber: 5,\n            axisLine: {\n                show: false\n            },\n            splitLine: {\n                length: 10,\n                lineStyle: {\n                    width: 1\n                }\n            },\n            axisTick: {\n                splitNumber: 20,\n                length: 1,\n                lineStyle: {\n                    color: '#4A90E2'\n                }\n            },\n            axisLabel: {\n                distance: -40,\n                formatter: function(value) {\n                    let richIndex = 'a'\n                    switch (value) {\n                        case 0:\n                            richIndex = 'a';\n                            break;\n                        case 2:\n                            richIndex = 'b';\n                            break;\n                        case 4:\n                            richIndex = 'c';\n                            break;\n                        case 6:\n                            richIndex = 'd';\n                            break;\n                        case 8:\n                            richIndex = 'e';\n                            break;\n                        case 10:\n                            richIndex = 'f';\n                            break;\n                    }\n                    return `{${richIndex}|${value}}`\n                },\n                rich: {\n                    a: {\n                        color: '#02F7D7'\n                    },\n                    b: {\n                        color: '#09EAE2'\n                    },\n                    c: {\n                        color: '#22A2F9'\n                    },\n                    d: {\n                        color: '#2E43EB'\n                    },\n                    e: {\n                        color: '#A5107A'\n                    },\n                    f: {\n                        color: '#D20C58'\n                    }\n                }\n            },\n            pointer: {\n                width: 60\n            },\n            itemStyle: {\n                color: '#023A79'\n               \n            },\n            title: {\n                show: false\n            },\n            detail: {\n                show: false\n            },\n            data:[{\n                 name: \"完成率\",\n                value: baseValue\n            }]\n        },\n        // 外层环形\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            startAngle: 200,\n            radius: ['55%', '74%'],\n            z: 1,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 220,\n                itemStyle: {\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 1,\n                        y2: 0,\n                        colorStops: [{\n                            offset: 0,\n                            color: 'RGBA(8, 27, 63, 1)' // 0% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: 'rgba(0, 3, 18, 0.1)' // 100% 处的颜色\n                        }],\n                        global: false // 缺省为 false\n                    }\n                }\n            }, {\n                value: 140,\n                itemStyle: {\n                    color: 'rgba(0,0,0,0)'\n                }\n            }]\n        },\n        // 中层窄圆环\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: ['50%', '55%'],\n            z: 10,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 220,\n                itemStyle: {\n                    color: 'RGBA(9, 27, 61, 1)'\n                }\n            }]\n        },\n        // 内部圆\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: [0, '50%'],\n            z: 10,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            // 模拟中间文字\n            label: {\n                show: true,\n                position: 'center',\n                formatter: function() {\n                    return `{a|${baseValue}}\\n{b|${baseGrade}}\\n{c|${baseText}}`\n                },\n                rich: {\n                    a: {\n                        fontSize: 72,\n                        color: '#fff'\n                    },\n                    b: {\n                        fontSize: 13,\n                        color: '#fff'\n                    },\n                    c: {\n                        fontSize: 12,\n                        color: '#fff'\n                    }\n                }\n            },\n            silent: true,\n            data: [{\n                value: 220,\n                itemStyle: {\n                    color: {\n                        type: 'radial',\n                        x: 0.5,\n                        y: 0.5,\n                        r: 0.5,\n                        colorStops: [{\n                            offset: 0,\n                            color: 'rgba(0, 88, 170, 1)' // 0% 处的颜色\n                        }, {\n                            offset: .6,\n                            color: 'rgba(2, 49, 108, 1)' // 50% 处的颜色\n                        }, {\n                            offset: 1,\n                            color: 'rgba(3, 11, 48, 1)' // 100% 处的颜色\n                        }],\n                        global: false // 缺省为 false\n                    }\n                }\n            }]\n        },\n        // 边缘圆弧\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            startAngle: 180,\n            radius: [baseRadius0, baseRadius1],\n            z: 1,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: baseValue,\n                itemStyle: {\n                    color: {\n                        type: 'linear',\n                        x: 0,\n                        y: 0,\n                        x2: 1,\n                        y2: 0,\n                        colorStops: edgeGradient,\n                        global: false // 缺省为 false\n                    }\n                }\n            }, {\n                value: 20 - baseValue,\n                itemStyle: {\n                    color: 'rgba(0,0,0,0)'\n                }\n            }]\n        },\n        // 边缘圆弧开始圆角\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: [0, startRadius],\n            center: [w / 2 - baseRadiusAbs, '50%'],\n            z: 20,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 100,\n                itemStyle: {\n                    color: '#02F7D7'\n                  \n                }\n            }]\n        },\n        // 边缘圆弧结束圆白底\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: [0, startRadius + 3],\n            center: [endBaseCenterX, endBaseCenterY + 1],\n            z: 20,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 100,\n                itemStyle: {\n                    color: '#fff'\n                }\n            }]\n        },\n        // 边缘圆弧结束圆红底\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: [startRadius, startRadius + 3],\n            center: [endBaseCenterX, endBaseCenterY],\n            z: 20,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 100,\n                itemStyle: {\n                    color: edgeGradient[edgeGradient.length - 1].color\n                    \n                }\n            }]\n        },\n        // 边缘圆弧结束中间圆\n        {\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: [0, startRadius - 2],\n            center: [endBaseCenterX, endBaseCenterY],\n            z: 20,\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            silent: true,\n            data: [{\n                value: 100,\n                itemStyle: {\n                    color: edgeGradient[edgeGradient.length - 1].color\n                  \n                }\n            }]\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"obd-o2HdDLuLPo6xEKGLgG2P_MgVQ2XePBc","theme":"","layout":"","viewCount":3389,"userName":"安***5","commentCount":0,"starCount":28,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xz6WBFLUVa.png?v=1601452419273","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","series-pie","title"],"customTags":["仪表盘"],"updaterUserName":"安***5"}}