{"status":0,"data":{"cid":"x0sdj4shH_","authorUid":"bd-944243892","authorUserName":"韩***能","title":"【饼图+堆叠柱形图】-【1112*320】","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2021-01-14T09:11:57.000Z","lastUpdateTime":"2021-01-14T09:11:57.000Z","auth":2,"uid":"bd-944243892","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-19T09:03:14.000Z","code":"//  数据配置\nconst source = [\n    ['日期', '正向消息', '中性消息', '负向消息'],\n    ['2019/10/01', 338, 110, 206],\n    ['2019/10/02', 416, 45, 113],\n    ['2019/10/03', 452, 56, 79],\n    ['2019/10/04', 129, 84, 99],\n    ['2019/10/05', 383, 71, 256],\n    ['2019/10/06', 461, 28, 126],\n    ['2019/10/07', 377, 60, 76],\n    ['2019/10/08', 423, 73, 238],\n    ['2019/10/09', 252, 98, 130],\n    ['2019/10/10', 40, 119, 67],\n    ['2019/10/11', 267, 70, 257],\n    ['2019/10/12', 290, 101, 254],\n    ['2019/10/13', 295, 41, 51],\n    ['2019/10/14', 53, 110, 151],\n    ['2019/10/15', 447, 47, 54]\n];\nconst pietheme = '消息情感';\nconst piedata = [{\n        name: '正向消息',\n        value: 1834\n    },\n    {\n        name: '中性消息',\n        value: 123\n    },\n    {\n        name: '负向消息',\n        value: 325\n    }\n];\nmyChart.resize({\n    height: 320,\n    width: 1112\n})\n\n// 图表配置\n\noption = {\n    // backgroundColor: '#fff',\n    dataset: {\n        source: source\n    },\n    grid: {\n        left: 408,\n        right: 40,\n        top: 64,\n        bottom: 64\n    },\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'cross'\n        },\n        // backgroundColor:'rgba(255,255,255,0.7)',\n        padding:16,\n        formatter:params => {\n            var result = params[0].axisValue\n            console.log(params)\n            return params.reduce((acc, cur) => {\n                    const {\n                        data: data,\n                        seriesIndex: seriesIndex,\n                        seriesName: seriesName,\n                        marker: marker,\n                        componentSubType: componentSubType\n                    } = cur;\n                    const num = componentSubType === \"line\" ?\n                        `${data[seriesIndex+1]}` :\n                        `${data[seriesIndex+1]}`;\n                    return [...acc,\n                        `${marker} ${seriesName}：${num}`]\n                }, [\n                    `<span style=\"font-size: 14px; color: #FFFFFF; font-weight: bold; padding-bottom: 8px; display: inline-block;\">${params[0].name}</span>`])\n                .join(\"</br>\")\n        },\n    },\n    legend: {\n        show: true,\n        left: 372,\n        top: 16,\n        itemWidth: 12,\n        itemHeight: 12\n    },\n    dataZoom: {\n        height: 16,\n        bottom: 8\n    },\n    color: ['#15B374 ', '#1574B3', '#D96969'],\n    xAxis: {\n        type: 'category',\n    },\n    yAxis: {\n        type: 'value',\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false\n        },\n        splitNumber:4,\n        axisLabel:{\n            color:'#8C8C8C'\n        },\n        splitLine:{\n            lineStyle:{\n                type:'dashed'\n            }\n        }\n    },\n    series: [{\n            type: 'bar',\n            name:source[0][1],\n            barWidth:'50%',\n            stack:true,\n            encode: {\n                x: 0,\n                y: 1\n            },\n        },{\n            type: 'bar',\n            name:source[0][2],\n            barWidth:'50%',\n            stack:true,\n            encode: {\n                x: 0,\n                y: 2\n            },\n        },{\n            type: 'bar',\n            name:source[0][3],\n            barWidth:'50%',\n            stack:true,\n            encode: {\n                x: 0,\n                y: 3\n            },\n        },\n        {\n            name: pietheme,\n            type: 'pie',\n            z: 100,\n            radius: ['40%', '60%'],\n            center: [180, '55%'],\n            data: piedata,\n            itemStyle: {\n                emphasis: {\n                    shadowBlur: 10,\n                    shadowOffsetX: 0,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            },\n            tooltip: {\n                trigger: 'item',\n                formatter: \"{a} <br/>{b} : {c}  ({d}%)\"\n            },\n            label: {\n                show: true,\n                fontSize: 12,\n                formatter: \"{b}\\n{d}%\",\n                color:'#A3A3A3'\n            },\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-944243892","theme":"","layout":"","viewCount":154,"userName":"韩***能","commentCount":0,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x0sdj4shH_.png?v=1610615517283","isCustomThumbnail":1,"builtinTags":["category-work","dataset","dataZoom","grid","legend","series-bar","series-pie","tooltip"],"customTags":[],"updaterUserName":"韩***能"}}