{"status":0,"data":{"cid":"xEUTJL2H08","authorUid":"bd-4028402768","authorUserName":"y***3","title":"炫酷的仪表盘效果","description":"纯 echarts 实现的 炫酷的仪表盘效果","latestVersion":1,"alwaysLatest":1,"createTime":"2019-05-17T10:49:18.000Z","lastUpdateTime":"2019-05-17T10:49:18.000Z","auth":2,"uid":"bd-4028402768","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-05-17T10:49:18.000Z","code":"var numberBackground = \"/asset/get/s/data-1558089401788-vabbsuamA.png\";\r\n\r\noption = {\r\n    grid: {\r\n        left: '0',\r\n        right: '0',\r\n        top: '0',\r\n        bottom: '0'\r\n    },\r\n    tooltip: {\r\n        formatter: '{a} <br/>{b} : {c}%',\r\n    },\r\n    series: getSeriesDatas(),\r\n};\r\n\r\nfunction getSeriesDatas() {\r\n    let series = [{\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [1, '#3E789F']\r\n                    ],\r\n                    width: 2,\r\n                },\r\n            },\r\n        },\r\n        {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [1, '#3E789F']\r\n                    ],\r\n                    width: 2,\r\n                },\r\n            },\r\n        },\r\n        {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [1, '#022e5d']\r\n                    ],\r\n                    width: 200,\r\n                },\r\n            },\r\n        },\r\n        {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [1, '#045d97']\r\n                    ],\r\n                    width: 2,\r\n                },\r\n            },\r\n        },\r\n        {\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: Array(...Array(36)).map((val, index) => {\r\n                        let color = '#0096fb';\r\n                        if (index % 3 === 0) {\r\n                            color = '#0096fb00';\r\n                        }\r\n                        return [index / 36, color];\r\n                    }),\r\n                    width: 4,\r\n                },\r\n            },\r\n        },\r\n        {\r\n            clockwise: false,\r\n            startAngle: 25,\r\n            endAngle: 155,\r\n            axisLine: {\r\n                lineStyle: {\r\n                    color: [\r\n                        [0, new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n\r\n                            offset: 0,\r\n                            color: 'rgba(5,251,251,1)',\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'rgba(38,197,254,0.00)',\r\n                        }])],\r\n                        [1, new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n\r\n                            offset: 0,\r\n                            color: 'rgba(5,251,251,1)',\r\n                        }, {\r\n                            offset: 1,\r\n                            color: 'rgba(38,197,254,0.00)',\r\n                        }])],\r\n                    ],\r\n                    shadowColor: '#05fbfb', // 默认透明\r\n                    shadowBlur: 10,\r\n                    width: 4,\r\n                },\r\n            },\r\n        },\r\n    ];\r\n\r\n    const radiusList = ['80%', '75%', '10%', '18%', '26%', '75%'];\r\n    series = series.map((item, index, array) => {\r\n        const publicSection = {\r\n            type: 'gauge',\r\n            radius: radiusList[index],\r\n            detail: {\r\n                show: false,\r\n            },\r\n            axisTick: {\r\n                show: false,\r\n            },\r\n            splitLine: {\r\n                show: false,\r\n            },\r\n            axisLabel: {\r\n                show: false,\r\n            },\r\n            pointer: {\r\n                show: false,\r\n            },\r\n        };\r\n\r\n        if (array.length !== (index + 1)) {\r\n            Object.assign(publicSection, {\r\n                startAngle: 359.99,\r\n                endAngle: 0,\r\n            });\r\n        }\r\n\r\n        return Object.assign(item, publicSection);\r\n    });\r\n\r\n    series.push({\r\n        startAngle: 225,\r\n        endAngle: -45,\r\n        type: 'gauge',\r\n        radius: '42%',\r\n        min: 0,\r\n        max: 6,\r\n        splitNumber: 6,\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: [\r\n                    [1, '#69aed1'],\r\n                ],\r\n                width: 2,\r\n            },\r\n        },\r\n        axisTick: {\r\n            show: true,\r\n            length: 5,\r\n            lineStyle: {\r\n                color: '#0092ef',\r\n            },\r\n        },\r\n        detail: {\r\n            show: false,\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            length: 10,\r\n            lineStyle: {\r\n                color: '#0092ef',\r\n            },\r\n        },\r\n        axisLabel: {\r\n            show: false,\r\n        },\r\n        pointer: {\r\n            show: false,\r\n        },\r\n    });\r\n\r\n    series.push({\r\n        name: '',\r\n        type: 'gauge',\r\n        startAngle: 225,\r\n        endAngle: -45,\r\n        radius: '58%',\r\n        data: [0.000],\r\n        min: 0,\r\n        max: 6,\r\n        splitNumber: 6,\r\n        axisLine: {\r\n            lineStyle: {\r\n                color: [\r\n                    [0, '#045d97'],\r\n                    [1, '#045d97'],\r\n                ],\r\n                width: 40,\r\n            },\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n        },\r\n        splitLine: {\r\n            show: false,\r\n        },\r\n        detail: {\r\n            // backgroundColor: '#07263f50',\r\n            backgroundColor: {\r\n                image: numberBackground,\r\n            },\r\n            offsetCenter: [0, '84%'], // x, y，单位px\r\n            textStyle: { // 其余属性默认使用全局文本样式，详见TEXTSTYLE\r\n                fontWeight: 'bolder',\r\n                color: '#00f0ff',\r\n                fontSize: 36,\r\n            },\r\n            formatter(value) {\r\n                return value.toFixed(3);\r\n            },\r\n            padding: [10, 10, 15, 10],\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            color: '#fff',\r\n            fontSize: 20,\r\n            distance: -27,\r\n        },\r\n        pointer: {\r\n            length: '92%',\r\n        },\r\n        itemStyle: {\r\n            color: '#90ccff',\r\n        },\r\n    });\r\n\r\n    series = series.map(item => Object.assign(item, {\r\n        center: ['50%', '58%'],\r\n    }));\r\n\r\n    return series;\r\n}\r\n\r\ndoAnimate();\r\n\r\nfunction doAnimate() {\r\n    const cardinalNumber = 0.1;\r\n    let cur = getCurrent();\r\n    let target = getTarget();\r\n\r\n    function animate() {\r\n        const data = option.series[option.series.length - 1].data;\r\n\r\n        if (isEqual(cur, target)) {\r\n            target = getTarget();\r\n            setTimeout(animate, Math.random() * 5000);\r\n        } else {\r\n            let pow;\r\n            if (cur > target) {\r\n                pow = -1 * cardinalNumber;\r\n            } else if (cur < target) {\r\n                pow = cardinalNumber;\r\n            }\r\n            cur += pow;\r\n\r\n            data[0] = cur;\r\n            myChart.setOption(option, true);\r\n            \r\n            setTimeout(animate, 66);\r\n        }\r\n    }\r\n    setTimeout(animate, 66);\r\n}\r\n\r\nfunction getTarget() {\r\n    return (Math.random() * 6).toFixed(1);\r\n}\r\n\r\nfunction getCurrent() {\r\n    const data = option.series[option.series.length - 1].data;\r\n\r\n    return data[0];\r\n}\r\n\r\nfunction isEqual(a, b) {\r\n    return Math.abs(a - b) < 0.01;\r\n}","html":"","externalScripts":"","updaterUID":"bd-4028402768","theme":"dark","layout":"","viewCount":725,"userName":"y***3","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xEUTJL2H08.png?v=1558090158378","isCustomThumbnail":0,"builtinTags":["category-work","series-gauge","tooltip"],"customTags":[],"updaterUserName":"y***3"}}