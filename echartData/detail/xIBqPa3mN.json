{"status":0,"data":{"cid":"xIBqPa3mN","authorUid":"bd-3611983648","authorUserName":"h***大","title":"全国图","description":"中国、美国、巴西、澳大利亚间的放射效果，默认显示IP","latestVersion":1,"alwaysLatest":1,"createTime":"2020-01-22T09:02:27.000Z","lastUpdateTime":"2020-01-22T09:02:27.000Z","auth":2,"uid":"bd-3611983648","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-22T09:02:27.000Z","code":"var GeoCoordMap = {\r\n    '中国': [100.501765, 30.756331],\r\n    '美国': [-83.357567, 35.951935],\r\n    '巴西': [-56.903606, -5.480594],\r\n    '澳大利亚': [135.209296, -20.86882]\r\n};\r\nvar Datas = [\r\n    [{\r\n        name: '中国',\r\n        value: \"192.168.0.1\",\r\n        price: 100,\r\n        num: 2\r\n    }],\r\n    [{\r\n        name: '美国',\r\n        value: \"192.168.0.1\",\r\n        price: 100,\r\n        num: 2\r\n    }],\r\n    [{\r\n        name: '巴西',\r\n        value: \"192.168.0.1\",\r\n        price: 100,\r\n        num: 2\r\n    }],\r\n    [{\r\n        name: '澳大利亚',\r\n        value: \"192.168.0.1\",\r\n        price: 100,\r\n        num: 2\r\n    }],\r\n];\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        // \t\t\tconsole.log('dataItem',dataItem) //第二个数据\r\n        var fromCoord = [100.501765, 30.756331];\r\n        var toCoord = GeoCoordMap[dataItem[0].name];\r\n        // \t\t\tconsole.log('toCoord',toCoord);//第一个地址\r\n        if (fromCoord && toCoord) {\r\n            res.push([{\r\n                coord: fromCoord,\r\n                value: dataItem[0].value,\r\n            }, {\r\n                coord: toCoord,\r\n                dataItem: dataItem\r\n            }]);\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar series = [];\r\n[\r\n    ['中国', Datas]\r\n].forEach(function(item, i) {\r\n    series.push(\r\n\r\n        {\r\n            type: 'lines',\r\n            zlevel: 0,\r\n            effect: {\r\n                // 括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\r\n                show: true,\r\n                period: 4, //箭头指向速度，值越小速度越快\r\n                trailLength: 0.1, //特效尾迹长度[0,1]值越大，尾迹越长重\r\n                symbol: 'circle', //箭头图标\r\n                symbolSize: 3, //图标大小\r\n                color: \"#fff\"\r\n            },\r\n            lineStyle: {\r\n                normal: {\r\n                    width: .7, //尾迹线条宽度\r\n                    opacity: 1, //尾迹线条透明度\r\n                    curveness: 0.2, //尾迹线条曲直度\r\n                    color: function(params) { //圆环显示文字\r\n                        return '\t#359fd1'\r\n                    },\r\n                },\r\n                color: 'red'\r\n            },\r\n            data: convertData(item[1])\r\n        }, {\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 2,\r\n            rippleEffect: { //涟漪特效\r\n                period: 4, //动画时间，值越小速度越快\r\n                brushType: 'fill', //波纹绘制方式 stroke, fill\r\n                scale: 4.2 //波纹圆环最大限制，值越大波纹越大\r\n            },\r\n            // 括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow', 'none'\r\n            // symbol: 'none',\r\n            symbol: 'circle',\r\n            symbolSize: function(val) {\r\n                return 5; //圆环大小\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    show: false,\r\n                    // color: '#f00'\r\n                    color: function(params) { //圆环显示文字\r\n                        return '\t#ffffff'\r\n                    },\r\n                    borderWidth: 0,\r\n                    shadowColor: '#359fd1', //发光?效果\r\n                    shadowBlur: 4\r\n                }\r\n            },\r\n            data: item[1].map(function(dataItem) {\r\n                // \tconsole.log('dataItem',dataItem[0]);\r\n                return {\r\n                    dataItem: dataItem,\r\n                    name: dataItem[0].name,\r\n                    value: GeoCoordMap[dataItem[0].name].concat([dataItem[0].value])\r\n                };\r\n            }),\r\n        },\r\n        //被攻击点\r\n        {\r\n            type: 'scatter',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 1,\r\n            rippleEffect: {\r\n                period: 4,\r\n                brushType: 'stroke',\r\n                scale: 4\r\n            },\r\n            symbol: 'circle',\r\n            color: 'rgba(128, 220, 251, .6)',\r\n            symbolSize: 20,\r\n            data: [{\r\n                name: item[0],\r\n                value: GeoCoordMap[item[0]].concat([\"192.168.0.1\"]),\r\n            }],\r\n        }\r\n    );\r\n});\r\n\r\noption = {\r\n    type: 'map',\r\n    mapType: 'world',\r\n    tooltip: {\r\n        formatter: function(e) {\r\n            if (typeof(e.value)[2] == \"undefined\" || e.name == \"\") {\r\n                return e.name;\r\n            } else {\r\n                return 'IP<br>' + e.name + ':' + e.value[2];\r\n            }\r\n        }\r\n    },\r\n    geo: {\r\n        map: 'world',\r\n        zoom: 1.2,\r\n        label: {\r\n            emphasis: {\r\n                show: true,\r\n                color:'white'\r\n            }\r\n        },\r\n        roam: true, //是否允许缩放\r\n        itemStyle: {\r\n            normal: {\r\n                color: \"#68d9fb\", //地图背景色\r\n                borderColor: '#68d9fb', //省市边界线00fcff 516a89\r\n                borderWidth: 1\r\n            },\r\n            emphasis: {\r\n                color: 'rgba(104, 217, 251, 127)' //悬浮背景\r\n            }\r\n        },\r\n    },\r\n    series: series\r\n\r\n};","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-3611983648","theme":"dark","layout":"","viewCount":1970,"userName":"h***大","commentCount":0,"starCount":9,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIBqPa3mN.png?v=1579683747394","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-lines","series-scatter","tooltip"],"customTags":["IP","world"],"updaterUserName":"h***大"}}