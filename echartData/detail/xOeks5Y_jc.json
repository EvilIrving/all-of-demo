{"status":0,"data":{"cid":"xOeks5Y_jc","authorUid":"bd-925573494","authorUserName":"群***乐","title":"树状图动态加载子节点数据","description":"树状图动态加载子节点数据","latestVersion":1,"alwaysLatest":1,"createTime":"2020-09-07T10:02:25.000Z","lastUpdateTime":"2020-09-07T10:02:25.000Z","auth":2,"uid":"bd-925573494","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-09-07T10:02:25.000Z","code":"myChart.showLoading();\r\nvar data = [{\r\n    \"children\": [{\r\n            \"children\": [{\r\n                \"children\": [{\r\n                    \"children\": [],\r\n                    \"name\": \"子部门XXX\",\r\n                    \"hasChild\": true\r\n                }],\r\n                \"name\": \"部门A\"\r\n            }],\r\n            \"name\": \"分公司A\"\r\n        },\r\n        {\r\n            \"children\": [{\r\n                \"children\": [],\r\n                \"name\": \"部门\",\r\n                \"hasChild\": true\r\n            }],\r\n            \"name\": \"分公司B\"\r\n        }\r\n    ],\r\n    \"name\": \"总部\"\r\n}];\r\nconsole.log(data);\r\nmyChart.hideLoading();\r\n\r\nmyChart.setOption(option = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        triggerOn: 'mousemove'\r\n    },\r\n    series: [{\r\n        type: 'tree',\r\n\r\n        data: data,\r\n        initialTreeDepth: 1,\r\n        top: '1%',\r\n        left: '7%',\r\n        bottom: '1%',\r\n        right: '20%',\r\n\r\n        symbolSize: 7,\r\n\r\n        label: {\r\n            normal: {\r\n                position: 'left',\r\n                verticalAlign: 'middle',\r\n                align: 'right',\r\n                fontSize: 9\r\n            }\r\n        },\r\n\r\n        leaves: {\r\n            label: {\r\n                normal: {\r\n                    position: 'right',\r\n                    verticalAlign: 'middle',\r\n                    align: 'left'\r\n                }\r\n            }\r\n        },\r\n\r\n        expandAndCollapse: true,\r\n        animationDuration: 0,\r\n        animationDurationUpdate: 0\r\n    }]\r\n});\r\nclickFun = function(param) {\r\n    console.log(param.seriesIndex);\r\n    if (typeof param.seriesIndex == 'undefined') {\r\n        return;\r\n    }\r\n    if (param.type == 'click') {\r\n        if (!param.data.hasChild) {\r\n            //param.data.collapsed=true;\r\n            console.log(param.data.collapsed);\r\n            if (param.data.collapsed === undefined || param.data.collapsed === true) {\r\n                console.log(\"未定义或者是未展开，下次即将展开\");\r\n                param.data.collapsed = false;\r\n            } else {\r\n                console.log(\"下次不展开\");\r\n                param.data.collapsed = true;\r\n            }\r\n            return;\r\n        }\r\n        param.data.children.push({\r\n            name: \"子部门测试\",\r\n            children: []\r\n        });\r\n        param.data.hasChild = false;\r\n        param.data.collapsed = false;\r\n\r\n        console.log(param.data);\r\n        console.log(myChart.getOption().series[0].data);\r\n        data = myChart.getOption().series[0].data;\r\n        myChart.clear();\r\n        myChart.setOption(option = {\r\n            tooltip: {\r\n                trigger: 'item',\r\n                triggerOn: 'mousemove'\r\n            },\r\n            series: [{\r\n                type: 'tree',\r\n\r\n                data: data,\r\n                initialTreeDepth: 1,\r\n                top: '1%',\r\n                left: '7%',\r\n                bottom: '1%',\r\n                right: '20%',\r\n\r\n                symbolSize: 7,\r\n\r\n                label: {\r\n                    normal: {\r\n                        position: 'left',\r\n                        verticalAlign: 'middle',\r\n                        align: 'right',\r\n                        fontSize: 9\r\n                    }\r\n                },\r\n\r\n                leaves: {\r\n                    label: {\r\n                        normal: {\r\n                            position: 'right',\r\n                            verticalAlign: 'middle',\r\n                            align: 'left'\r\n                        }\r\n                    }\r\n                },\r\n\r\n                expandAndCollapse: true,\r\n                animationDuration: 100,\r\n                animationDurationUpdate: 0\r\n            }]\r\n        });\r\n    }\r\n};\r\nmyChart.on(\"click\", clickFun);","html":"","externalScripts":"","updaterUID":"bd-925573494","theme":"","layout":"","viewCount":63,"userName":"群***乐","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xOeks5Y_jc.png?v=1599472945591","isCustomThumbnail":0,"builtinTags":["category-work","series-tree","tooltip"],"customTags":["动态添加子节点"],"updaterUserName":"群***乐"}}