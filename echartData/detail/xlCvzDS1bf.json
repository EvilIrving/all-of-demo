{"status":0,"data":{"cid":"xlCvzDS1bf","authorUid":"bd-3913771301","authorUserName":"因***凡","title":"每分钟都更新数据--baiyf","description":"每分钟都更新数据--baiyf","latestVersion":2,"alwaysLatest":1,"createTime":"2020-05-26T02:46:11.000Z","lastUpdateTime":"2020-05-26T02:46:11.000Z","auth":1,"uid":"bd-3913771301","publishedVersion":1,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-05-26T02:46:11.000Z","code":"\r\n//x轴-时间\r\nvar date = [];\r\n//y轴-数据\r\nvar data = [];\r\n//下标\r\nvar index = 0;\r\nvar allData = [\r\n    {\"time\":\"01:01:00\",\"num\":73},\r\n    {\"time\":\"01:02:00\",\"num\":42},\r\n    {\"time\":\"01:03:00\",\"num\":88},\r\n    {\"time\":\"01:04:00\",\"num\":50},\r\n    {\"time\":\"01:05:00\",\"num\":36},\r\n    {\"time\":\"01:06:00\",\"num\":81},\r\n    {\"time\":\"01:07:00\",\"num\":83},\r\n    {\"time\":\"01:08:00\",\"num\":29},\r\n]\r\nallData.map( (val,idx) => {\r\n    data.push(val.num);\r\n    date.push(val.time)\r\n});\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        position: function (pt) {\r\n            return [pt[0], '10%'];\r\n        }\r\n    },\r\n    title: {\r\n        left: 'center',\r\n        text: '每分钟都更新数据--baiyf',\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        data: date\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        min:0,\r\n        max:120\r\n    },\r\n    dataZoom: [{\r\n        type: 'inside',\r\n         xAxisIndex:0,\r\n        startValue: \"01:01:00\",\r\n        endValue: \"01:08:00\"\r\n    }],\r\n    series: [\r\n        {\r\n            name:'模拟数据',\r\n            type:'line',\r\n            smooth:false,    //拐弯处变锋利\r\n            symbol: 'none',//去除圆角\r\n            sampling: 'average',\r\n            animationDurationUpdate:1000,    //数据更新时的动画时长\r\n            animationEasing:\"bounceIn\",\r\n            animationDelayUpdate: function (idx) {\r\n                // 越往后的数据延迟越大\r\n                return idx * 10;\r\n            },\r\n            itemStyle: {\r\n                color: 'rgb(255, 70, 131)'\r\n            },\r\n            areaStyle: {\r\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color: 'rgb(255, 158, 68)'\r\n                }, {\r\n                    offset: 1,\r\n                    color: 'rgb(255, 70, 131)'\r\n                }])\r\n            },\r\n            data: data\r\n        }\r\n    ]\r\n};\r\n\r\n  setInterval(() => {\r\n      data.push(20*1 + sum(10,30)*1);\r\n      date.push(index+\"天！\");\r\n      option.dataZoom[0].startValue = date[index];\r\n      option.dataZoom[0].endValue = date[date.length-1];\r\n      index+=1;\r\n      option.xAxis.data = date;\r\n      option.series[0].data = data;\r\n      myChart.setOption(option);\r\n      console.log(option.dataZoom[0]);\r\n      console.log(date);\r\n  }, 1000);\r\n\r\nfunction sum (m,n){\r\n　　var num = Math.floor(Math.random()*(m - n) + n);\r\n    return num;\r\n}\r\n","html":"","externalScripts":"","updaterUID":"bd-3913771301","theme":"","layout":"","viewCount":606,"userName":"因***凡","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xlCvzDS1bf.png?v=1590461171707","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","series-line","title","tooltip"],"customTags":["datazoom","line"],"updaterUserName":"因***凡"}}