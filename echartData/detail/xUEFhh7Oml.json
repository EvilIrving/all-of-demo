{"status":0,"data":{"cid":"xUEFhh7Oml","authorUid":"bd-2940081396","authorUserName":"w***色","title":"新能源立体柱图","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-13T04:07:19.000Z","lastUpdateTime":"2021-08-13T04:07:19.000Z","auth":2,"uid":"bd-2940081396","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-13T04:07:19.000Z","code":"// 绘制左侧面\nconst CubeLeft = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0,\n  },\n  buildPath: function (ctx, shape) {\n    // 会canvas的应该都能看得懂，shape是从custom传入的\n    const xAxisPoint = shape.xAxisPoint;\n    const c0 = [shape.x, shape.y];\n    const c1 = [shape.x - 33, shape.y - 10];\n    const c2 = [xAxisPoint[0] - 33, xAxisPoint[1] - 0];\n    const c3 = [xAxisPoint[0], xAxisPoint[1] + 13];\n    ctx.moveTo(c0[0], c0[1]).lineTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).closePath();\n  },\n});\n// 绘制右侧面\nconst CubeRight = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0,\n  },\n  buildPath: function (ctx, shape) {\n    const xAxisPoint = shape.xAxisPoint;\n    const c1 = [shape.x, shape.y];\n    const c2 = [xAxisPoint[0], xAxisPoint[1] + 14];\n    const c3 = [xAxisPoint[0] + 33, xAxisPoint[1] - 9];\n    const c4 = [shape.x + 33, shape.y - 9];\n    ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath();\n  },\n});\n// 绘制顶面\nconst CubeTop = echarts.graphic.extendShape({\n  shape: {\n    x: 0,\n    y: 0,\n  },\n  buildPath: function (ctx, shape) {\n    const c1 = [shape.x, shape.y];\n    const c2 = [shape.x + 33, shape.y - 9];\n    const c3 = [shape.x, shape.y - 18];\n    const c4 = [shape.x - 33, shape.y - 10];\n    ctx.moveTo(c1[0], c1[1]).lineTo(c2[0], c2[1]).lineTo(c3[0], c3[1]).lineTo(c4[0], c4[1]).closePath();\n  },\n});\n\n// 注册三个面图形;\necharts.graphic.registerShape('CubeLeft', CubeLeft);\necharts.graphic.registerShape('CubeRight', CubeRight);\necharts.graphic.registerShape('CubeTop', CubeTop);\n\nconst MAX = [100, 100];\nyList = [32, 58];\nxList = ['光伏', '风力'];\n\nxData = xList.map((item, index) => {\n  return {\n    value: item,\n  };\n});\ndom = 1300;\nbarWidth = dom / 20;\ncolors = [\n  {\n    type: 'linear',\n    x: 0,\n    x2: 0,\n    y: 1,\n    y2: 0,\n    colorStops: [\n      {\n        offset: 0,\n        color: '#EB5118',\n      },\n      {\n        offset: 0.5,\n        color: '#EB5118',\n      },\n      {\n        offset: 0.5,\n        color: '#EB5118',\n      },\n      {\n        offset: 1,\n        color: '#EB5118',\n      },\n    ],\n  },\n  {\n    type: 'linear',\n    x: 0,\n    x2: 1,\n    y: 0,\n    y2: 0,\n    colorStops: [\n      {\n        offset: 0,\n        color: '#239cf9',\n      },\n      {\n        offset: 0.5,\n        color: '#239cf9',\n      },\n      {\n        offset: 0.5,\n        color: '#239cf9',\n      },\n      {\n        offset: 1,\n        color: '#239cf9',\n      },\n    ],\n  },\n];\noption = {\n  backgroundColor: '#010d3a',\n  //提示框\n  tooltip: {\n    trigger: 'axis',\n    formatter: '{b} : {c}',\n    axisPointer: {\n      // 坐标轴指示器，坐标轴触发有效\n      type: 'shadow', // 默认为直线，可选为：'line' | 'shadow'\n    },\n  },\n  legend: {\n        data: [\n          {\n            name: '风力',\n            icon: 'rect',\n            itemStyle: {\n              color: '#239cf9'\n            },\n          },\n          {\n            name: '光伏',\n            icon: 'rect',\n            itemStyle: {\n              color: '#EB5118'\n            },\n          },\n        ],\n        itemWidth: 20,\n        itemHeight: 20,\n        itemGap:100,\n        textStyle: {\n          fontSize: 14,\n          color: '#fff'\n        },\n        top:'3%',\n        right: '2%'\n      },\n  /**区域位置*/\n  grid: {\n    left: '10%',\n    right: '10%',\n    top: 150,\n    bottom: 70,\n  },\n  xAxis: [\n    {\n      axisTick: {\n        show: false,\n      },\n      data: xData,\n\n      show: true,\n      type: 'category',\n      axisLine: {\n        show: false,\n      },\n      splitLine: {\n        show: false,\n      },\n      axisLabel: {\n        show: true,\n        fontSize: 12,\n        textStyle: {\n          fontSize: 25,\n          fontWeight: 'bold',\n          color: '#CEF4FF',\n          lineHeight: 45,\n        },\n      },\n    }\n  ],\n  yAxis: {\n    show: true,\n    splitNumber: 4,\n    axisLine: {\n      show: true,\n      lineStyle: {\n        color: 'rgba(255,255,255,0.2)',\n      },\n    },\n    splitLine: {\n      show: true,\n      lineStyle: {\n        color: 'rgba(255,255,255,0.2)',\n      },\n    },\n    axisLabel: {\n      color: '#CEF4FF',\n      textStyle: {\n        fontSize: 15,\n      },\n      formatter: function(item) {\n          return item + '%'\n        }\n    },\n    \n  },\n  series: [\n    {\n      type: 'custom',\n      renderItem: function (params, api) {\n        const location = api.coord([api.value(0), api.value(1)]);\n        return {\n          type: 'group',\n          children: [\n            {\n              type: 'CubeLeft',\n              shape: {\n                api,\n                x: location[0],\n                y: location[1],\n                xAxisPoint: api.coord([api.value(0), 0]),\n              },\n              style: {\n                fill: '#239cf920',\n              },\n            },\n            {\n              type: 'CubeRight',\n              shape: {\n                api,\n                x: location[0],\n                y: location[1],\n                xAxisPoint: api.coord([api.value(0), 0]),\n              },\n              style: {\n                fill: '#239cf930',\n              },\n            },\n            {\n              type: 'CubeTop',\n              shape: {\n                api,\n                x: location[0],\n                y: location[1],\n                xAxisPoint: api.coord([api.value(0), 0]),\n              },\n              style: {\n                fill: '#239cf940',\n              },\n            },\n          ],\n        };\n      },\n      data: MAX,\n    },\n    {\n      name: '光伏',\n      type: 'bar',\n      barWidth: barWidth,\n      itemStyle: {\n        normal: {\n          color: function (params) {\n            return colors[params.dataIndex % 7];\n          },\n        },\n      },\n      label: {\n        show: true,\n        position: [barWidth / 2, -40],\n        color: '#ffffff',\n        fontSize: 22,\n        fontStyle: 'bold',\n        align: 'center',\n        formatter: function(item) {\n          return item.data + '%'\n        }\n      },\n      data: yList,\n    },\n    {\n      z: 2,\n      type: 'pictorialBar',\n      data: yList,\n      symbol: 'diamond',\n      symbolOffset: [0, '50%'],\n      symbolSize: [barWidth, barWidth * 0.4],\n      itemStyle: {\n        normal: {\n          color: function (params) {\n            return colors[params.dataIndex % 7];\n          },\n        },\n      },\n    },\n    {\n      name: '风力',\n      z: 3,\n      type: 'pictorialBar',\n      symbolPosition: 'end',\n      data: yList,\n      symbol: 'diamond',\n      symbolOffset: [0, '-50%'],\n      symbolSize: [barWidth, barWidth * 0.4],\n      itemStyle: {\n        normal: {\n          borderWidth: 0,\n          color: function (params) {\n            return colors[params.dataIndex % 7].colorStops[0].color;\n          },\n        },\n      },\n    },\n  ],\n};\n","html":"","externalScripts":"","updaterUID":"bd-2940081396","theme":"","layout":"","viewCount":0,"userName":"w***色","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xUEFhh7Oml.png?v=1628827639247","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","series-custom","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"w***色"}}