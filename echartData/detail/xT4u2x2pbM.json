{"status":0,"data":{"cid":"xT4u2x2pbM","authorUid":"obd-oFbxvYoSWxSLUyDt5qcvCYwk1vh505o","authorUserName":"情***6","title":"tooltip自动轮播","description":"tooltip自动轮播","latestVersion":1,"alwaysLatest":0,"createTime":"2021-08-27T02:03:25.000Z","lastUpdateTime":"2021-08-27T02:03:25.000Z","auth":2,"uid":"obd-oFbxvYoSWxSLUyDt5qcvCYwk1vh505o","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.1.2","versionCreateTime":"2021-08-27T02:03:25.000Z","code":"var uploadedDataURL = '/asset/get/s/data-1619418162876-vDvrq4dZv.json';\nlet valArr1 = [\n  {\n    name: '成都',\n    value: [103.942877, 30.498243],\n  },\n  {\n    name: '绵阳',\n    value: [104.755866, 31.421492],\n  },\n  {\n    name: '南充',\n    value: [106.184088, 30.819564],\n  },\n  {\n    name: '巴中',\n    value: [106.77735, 31.833093],\n  },\n  {\n    name: '广元',\n    value: [105.810553, 32.39142],\n  },\n  {\n    name: '凉山',\n    value: [102.163092, 27.90934],\n  },\n  {\n    name: '乐山',\n    value: [103.679205, 29.604364],\n  },\n  {\n    name: '阿坝',\n    value: [102.360846, 31.889079],\n  },\n  {\n    name: '广安',\n    value: [106.645514, 30.403534],\n  },\n];\nlet valArr2 = [\n  {\n    name: '成都',\n    value: 111,\n  },\n  {\n    name: '绵阳',\n    value: 132,\n  },\n  {\n    name: '南充',\n    value: 345,\n  },\n  {\n    name: '巴中',\n    value: 543,\n  },\n  {\n    name: '广元',\n    value: 634,\n  },\n  {\n    name: '凉山',\n    value: 456,\n  },\n  {\n    name: '乐山',\n    value: 567,\n  },\n  {\n    name: '阿坝',\n    value: 765,\n  },\n  {\n    name: '广安',\n    value: 234,\n  },\n];\nvalArr1.forEach((item) => {\n  let val = valArr2.find((ele) => ele.name == item.name).value;\n  item.value.push(val);\n});\n$.getJSON(uploadedDataURL, function (geoJson) {\n  echarts.registerMap('chinamap', geoJson);\n  loadMap('chinamap');\n});\nfunction loadMap(name) {\n  option = {\n    backgroundColor:'rgba(0,0,0,0.5)',\n    tooltip: {\n      show: true,\n      // padding: [6, 10],\n      // backgroundColor: 'transparent',\n      borderColor:'#fff',\n      textStyle: {\n        align: 'left',\n        verticalAlign: 'middle',\n        lineHeight: 26,\n        // color:'#fff'\n      },\n    },\n    geo: {\n      map: name,\n      aspectScale: 1, //长宽比\n      zoom: 0.9,\n      selectedMode: 'false', //是否允许选中多个区域\n      label: {\n        normal: {\n          show: false,\n        },\n        emphasis: {\n          show: false,\n          color: '#fff',\n        },\n      },\n      itemStyle: {\n        areaColor: {\n          type: 'linear',\n          x: 0,\n          y: 0,\n          x2: 0,\n          y2: 1,\n          colorStops: [\n            {\n              offset: 0,\n              color: '#144a69', // 0% 处的颜色\n            },\n            {\n              offset: 1,\n              color: '#0c6c96', // 100% 处的颜色\n            },\n          ],\n          global: false, // 缺省为 false\n        },\n        label: { show: false },\n        shadowColor: 'rgba(0,243,255,0.2)',\n        shadowOffsetY: 5,\n        shadowBlur: 10,\n        borderColor: 'rgba(184, 239, 243,0.6)',\n        borderWidth: 2,\n        opacity: 1,\n      },\n      emphasis: {\n        label: { show: false },\n        itemStyle: {\n          areaColor: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [\n              {\n                offset: 0,\n                color: '#144a69', // 0% 处的颜色\n              },\n              {\n                offset: 1,\n                color: '#0c6c96', // 100% 处的颜色\n              },\n            ],\n            global: false, // 缺省为 false\n          },\n          opacity: 0,\n        },\n      },\n      tooltip: {\n        show: false,\n      },\n    },\n    series: [\n      {\n        name: '',\n        type: 'scatter',\n        coordinateSystem: 'geo',\n        data: valArr1,\n        symbol: 'circle',\n        symbolOffset: [-10, 10],\n        symbolSize: [10, 10],\n        label: {\n          normal: {\n            show: false,\n          },\n        },\n        itemStyle: {\n          opacity: 0,\n          color: 'red',\n        },\n        emphasis: {\n          show: true,\n          itemStyle: {\n            opacity: 1,\n          },\n        },\n        tooltip: {\n          show: true,\n        },\n      },\n      {\n        name: 'MAP',\n        type: 'map',\n        map: name,\n        // geoIndex: 0,\n        label: {\n          normal: {\n            show: false,\n            color: '#fff',\n          },\n          emphasis: {\n            show: false,\n            color: '#fff',\n          },\n        },\n        aspectScale: 1, //长宽比\n        zoom: 0.9,\n        selectedMode: 'false', //是否允许选中多个区域\n        itemStyle: {\n          normal: {\n            // areaColor: \"#3facd3\",\n            areaColor: {\n              type: 'linear',\n              x: 0,\n              y: 0,\n              x2: 0,\n              y2: 1,\n              colorStops: [\n                {\n                  offset: 0,\n                  color: '#144a69', // 0% 处的颜色\n                },\n                {\n                  offset: 1,\n                  color: '#0c6c96', // 100% 处的颜色\n                },\n              ],\n              global: false, // 缺省为 false\n            },\n            label: { show: false },\n            borderColor: '#6bd4f8',\n            borderWidth: 1,\n            opacity: 1,\n          },\n        },\n        emphasis: {\n          label: { show: false },\n          itemStyle: {\n            areaColor: {\n              type: 'linear',\n              x: 0,\n              y: 0,\n              x2: 0,\n              y2: 1,\n              colorStops: [\n                {\n                  offset: 0,\n                  color: '#144a69', // 0% 处的颜色\n                },\n                {\n                  offset: 1,\n                  color: '#0c6c96', // 100% 处的颜色\n                },\n              ],\n              global: false, // 缺省为 false\n            },\n            opacity: 1,\n          },\n        },\n        tooltip: {\n          show: false,\n        },\n        data: valArr2,\n      },\n    ],\n  };\nmyChart.setOption(option);\n  // tooltip轮播\n  var faultByHourIndex = 0; //播放所在下标\n  function tooltipcart() {\n    //使得tootip每隔三秒自动显示\n    myChart.dispatchAction({\n      type: 'showTip', // 根据 tooltip 的配置项显示提示框。\n      seriesIndex: 0,\n      dataIndex: faultByHourIndex,\n    });\n    myChart.dispatchAction({\n      type: 'highlight', // 高亮显示\n      seriesIndex: 0,\n      dataIndex: faultByHourIndex,\n    });\n    myChart.dispatchAction({\n      type: 'downplay', // 取消高亮\n      seriesIndex: 0,\n      dataIndex: faultByHourIndex == 0 ? option.series[0].data.length - 1 : faultByHourIndex - 1,\n    });\n\n    faultByHourIndex++;\n    if (faultByHourIndex > option.series[0].data.length - 1) {\n      faultByHourIndex = 0;\n    }\n  }\n  let faultByHourTime = setInterval(tooltipcart, 2000);\n}\n","html":"","externalScripts":"","updaterUID":"obd-oFbxvYoSWxSLUyDt5qcvCYwk1vh505o","theme":"","layout":"","viewCount":0,"userName":"情***6","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xT4u2x2pbM.png?v=1630029805989","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-map","series-scatter","tooltip"],"customTags":["map","tooltip"],"updaterUserName":"情***6"}}