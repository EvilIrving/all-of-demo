{"status":0,"data":{"cid":"xIkoVD2c5k","authorUid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","authorUserName":"林***影","title":"柱状叠加图","description":"柱状叠加图","latestVersion":2,"alwaysLatest":0,"createTime":"2021-07-07T02:37:13.000Z","lastUpdateTime":"2021-07-14T05:31:59.000Z","auth":2,"uid":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"5.1.2","versionCreateTime":"2021-07-14T05:31:59.000Z","code":"const payload = {\n    id: 'right-center',\n    wordNum: 4,\n    data: {\n        unit: ['单位：人'],\n        title: ['计划', '年限', '不交流'],\n        color: ['rgba(230, 189, 46, 1)', 'rgba(218, 83, 56, 1)'],\n        x: ['试用期', '一类岗位', '二类岗位', '偏远地区', '其他情形'],\n        bar1: ['0', '1', '0', '0', '1'],\n        bar2: ['0', '1', '2', '1', '1'],\n        bar3: ['20', '0', '0', '0', '0'],\n        min: 0,\n        max: 10,\n    },\n};\n\nconst wordNum = payload.wordNum\nconst bar1 = payload.data.bar1 || []\nconst bar2 = payload.data.bar2 || []\nconst bar3 = payload.data.bar3 || []\nconst bar4 = payload.data.bar4 || []\nconst tip = payload.data.tip || []\nconst tipTitle = payload.data.tipTitle || []\nconst title = payload.data.title\nconst x = payload.data.x\nconst unit = payload.data.unit\n\nlet isChildren = false\n\nconst formatter = (params, wordNum) => {\n    if (!wordNum) return params\n    let newParamsName = ''\n    const paramsNameNumber = params.length\n    const provideNumber = wordNum\n    const rowNumber = Math.ceil(paramsNameNumber / provideNumber)\n    if (paramsNameNumber > provideNumber) {\n        for (let p = 0; p < rowNumber; p++) {\n            let tempStr = ''\n            const start = p * provideNumber\n            const end = start + provideNumber\n            if (p === rowNumber - 1) {\n                tempStr = params.substring(start, paramsNameNumber)\n            } else {\n                tempStr = params.substring(start, end) + '\\n'\n            }\n            newParamsName += tempStr\n        }\n    } else {\n        newParamsName = params\n    }\n    return newParamsName\n}\n\nconst getOpion = (title, x, unit, tip) => {\n    return {\n        tooltip: {\n            // 触发类型  经过轴触发axis  经过轴触发item\n            trigger: 'axis',\n            backgroundColor: 'rgba(9, 30, 60, 0.6)',\n            extraCssText: 'box-shadow: 0 0 8px rgba(0, 128, 255, 0.27) inset;',\n            borderWidth: 0,\n            confine: false,\n            appendToBody: true,\n            textStyle: {\n                color: '#fff',\n                fontSize: 10\n            },\n            // 轴触发提示才有效\n            axisPointer: {\n                type: 'shadow'\n            },\n            shadowStyle: {\n                color: 'rgba(157, 168, 245, 0.1)'\n            },\n            formatter(data) {\n                var tmp = ['<h5 class=\"echarts-tip-h5\">' + data[0].name + '</h5>']\n                data.forEach(item => {\n                    const html =\n                        '<div class=\"echarts-tip-div\">' +\n                        // eslint-disable-next-line prettier/prettier\n                            '<div class=\"left\">' + item.marker + ' ' + item.seriesName + '：</div>' +\n                        // eslint-disable-next-line prettier/prettier\n                            '<div class=\"right\">' + item.data + '</div>' +\n                        '</div>'\n                    tmp.push(html)\n                })\n                if (tip && tip.length > 0) {\n                    tip.forEach((item, index) => {\n                        const html =\n                            '<div class=\"echarts-tip-div\">' +\n                            // eslint-disable-next-line prettier/prettier\n                                '<div class=\"left\"><span style=\"display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:rgba(24, 122, 220, 1);\"></span> ' + tipTitle[index] + '：</div>' +\n                            // eslint-disable-next-line prettier/prettier\n                                '<div class=\"right\">' + item[data[0].dataIndex] + (payload.data.showBarText || '') + '</div>' +\n                            '</div>'\n                        tmp.push(html)\n                    })\n                }\n                return tmp.join('')\n            }\n        },\n        grid: {\n            // 距离 上右下左 的距离\n            left: 0,\n            right: 0,\n            bottom: 2,\n            top: 45,\n            // 是否包含文本\n            containLabel: true\n        },\n        legend: {\n            type: 'scroll',\n            itemWidth: 10,\n            itemHeight: 3,\n            itemGap: 10,\n            left: 'right',\n            itemStyle: {\n                color: 'inherit'\n            },\n            textStyle: {\n                color: 'inherit'\n            },\n            data: title.map(item => {\n                return { name: item }\n            })\n        },\n        xAxis: {\n            type: 'category',\n            data: x,\n            axisLine: {\n                lineStyle: {\n                    type: 'solid',\n                    color: '#4176a3',\n                    width: '0.5' //坐标线的宽度\n                }\n            },\n            axisTick: {\n                show: false\n            },\n            //坐标轴斜着显示\n            axisLabel: {\n                interval: 0,\n                rotate: 0,\n                color: '#96cbfa',\n                fontSize: 12,\n                formatter(params) {\n                    return formatter(params, wordNum)\n                }\n            }\n        },\n        yAxis: {\n            name: unit[0],\n            nameGap: 10,\n            nameTextStyle: {\n                align: 'left',\n                fontSize: 11,\n                color: '#4176a3'\n            },\n            minInterval: 1,\n            type: 'value',\n            axisLine: {\n                lineStyle: {\n                    type: 'solid',\n                    color: '#4176a3', //左边线的颜色\n                    width: '1' //坐标线的宽度\n                },\n                color: '#4176a3',\n                minInterval: 1\n            },\n            axisLabel: {\n                fontSize: 14\n            },\n            //   刻度\n            axisTick: {\n                show: false\n            },\n            //   y轴线\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    color: 'rgba(65, 118, 163, 0.3)',\n                    width: 1,\n                    type: 'solid'\n                }\n            }\n        },\n        // 字体\n        textStyle: {\n            fontSize: 10,\n            color: '#4176a3'\n        },\n        series: []\n    }\n}\n\nconst getBar = (name, color, data) => {\n    return {\n        showBackground: false,\n        barMaxWidth: 8,\n        name,\n        data,\n        type: 'bar',\n        stack: 'number',\n        itemStyle: {\n            color\n        }\n    }\n}\n\noption = getOpion(title, x, unit, tip)\n\nif (payload.data.max !== undefined) {\n    option.yAxis.max = payload.data.max\n}\nif (payload.data.min !== undefined) {\n    option.yAxis.min = payload.data.min\n}\nif (bar1.length > 0) {\n    option.series.push(getBar(payload.data.title[0], payload.data.color[0], bar1))\n}\nif (bar2.length > 0) {\n    option.series.push(getBar(payload.data.title[1], payload.data.color[1], bar2))\n}\nif (bar3.length > 0) {\n    option.series.push(getBar(payload.data.title[2], payload.data.color[2], bar3))\n}\nif (bar4.length > 0) {\n    option.series.push(getBar(payload.data.title[3], payload.data.color[3], bar4))\n}","html":"","externalScripts":"","updaterUID":"obd-oNlOavm5mIyDmHx5vL644Fy6r7YbdCs","theme":"","layout":"","viewCount":0,"userName":"林***影","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xIkoVD2c5k.png?v=1626240719285","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"林***影"}}