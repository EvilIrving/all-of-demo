{"status":0,"data":{"cid":"xaRatL0X9r","authorUid":"obd-oDoZIY2Utcmo-T-oDy9pwF--e8gVz15","authorUserName":"q***6","title":"医疗机构监管","description":"","latestVersion":1,"alwaysLatest":0,"createTime":"2022-01-04T08:45:30.000Z","lastUpdateTime":"2022-01-04T08:45:30.000Z","auth":2,"uid":"obd-oDoZIY2Utcmo-T-oDy9pwF--e8gVz15","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"5.2.2","versionCreateTime":"2022-01-04T08:45:30.000Z","code":"data = [\n    {\n        name: '新增项目',\n        value: 100,\n    },\n    {\n        name: '竣工项目',\n        value: 75,\n    },\n    {\n        name: '结项项目',\n        value: 50,\n    },\n    {\n        name: '终止项目',\n        value: 25,\n    },\n    {\n        name: '终止1项目',\n        value: 30,\n    },\n];\narrName = getArrayValue(data, 'name');\narrValue = getArrayValue(data, 'value');\nsumValue = eval(arrValue.join('+'));\nobjData = array2obj(data, 'name');\noptionData = getData(data);\n\nfunction getArrayValue(array, key) {\n    var key = key || 'value';\n    var res = [];\n    if (array) {\n        array.forEach(function (t) {\n            res.push(t[key]);\n        });\n    }\n    return res;\n}\n\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\n\nfunction getData(data) {\n    var res = {\n        series: [],\n        yAxis: [],\n    };\n    for (let i = 0; i < data.length; i++) {\n        res.series.push({\n            name: '',\n            type: 'pie',\n            clockWise: false, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\n            center: ['50%', '50%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n            },\n            data: [\n                {\n                    value: data[i].value,\n                    name: data[i].name,\n                },\n                {\n                    value: sumValue - data[i].value,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n        res.series.push({\n            name: '',\n            type: 'pie',\n            silent: true,\n            z: 1,\n            clockWise: false, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            radius: [73 - i * 15 + '%', 68 - i * 15 + '%'],\n            center: ['50%', '50%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n            },\n            data: [\n                {\n                    value: 7.5,\n                    itemStyle: {\n                        color: 'rgb(3, 31, 62)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n                {\n                    value: 2.5,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n        res.yAxis.push(((data[i].value / sumValue) * 100).toFixed(2) + '%');\n    }\n    return res;\n}\n\noption = {\n    backgroundColor: '#013A54',\n    title: {\n        text: '医疗机构监管',\n    },\n    legend: {\n        show: true,\n        icon: 'circle',\n        // top: \"center\",\n        top: '13%',\n        bottom: '53%',\n        left: '50%',\n        data: arrName,\n        width: 50,\n        padding: [0, 18],\n        itemGap: 36,\n        formatter: function (name) {\n            return '{title|' + name + '} {value|' + objData[name].value + '}  {title|%}';\n        },\n        textStyle: {\n            rich: {\n                title: {\n                    fontSize: 20,\n                    lineHeight: 30,\n                    color: 'rgb(0, 178, 246)',\n                },\n                value: {\n                    fontSize: 18,\n                    lineHeight: 20,\n                    color: '#fff',\n                },\n            },\n        },\n    },\n    tooltip: {\n        show: true,\n        trigger: 'item',\n        formatter: '{a}<br>{b}:{c}({d}%)',\n    },\n    color: ['rgb(9,187,247)', 'rgb(184,254,165)', 'rgb(253,218,23)', 'rgb(252,152,12)'],\n    xAxis: [\n        {\n            show: false,\n        },\n    ],\n    series: optionData.series,\n};\n","html":"","externalScripts":"","updaterUID":"obd-oDoZIY2Utcmo-T-oDy9pwF--e8gVz15","theme":"","layout":"","viewCount":0,"userName":"q***6","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xaRatL0X9r.png?v=1641285930215","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":[],"updaterUserName":"q***6"}}