{"status":0,"data":{"cid":"xfwZ722K82","authorUid":"bd-2437013587","authorUserName":"就***呵","title":"柱图标签文字过长","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-06-18T06:46:26.000Z","lastUpdateTime":"2019-06-18T06:46:26.000Z","auth":2,"uid":"bd-2437013587","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.2.1","versionCreateTime":"2019-06-18T06:46:26.000Z","code":"option = {\r\n    \"chartex\": {\r\n        \"displayMode\": \"stack_horizontal_bar\"\r\n    },\r\n    \"chart\": {\r\n        \"width\": 480,\r\n        \"height\": 320,\r\n        \"theme\": \"demo\"\r\n    },\r\n    \"grid\": {\r\n        \"containLabel\": true,\r\n        \"containLabelX\": true,\r\n        \"horizontalAxisLabelHeight\": 12,\r\n        \"bottom\": 28\r\n    },\r\n    \"xAxis\": {\r\n        \"name\": \"数值\",\r\n        \"axisLabel\": {\r\n            \"show\": true,\r\n            \"margin\": 8,\r\n            \"rotate\": 0\r\n        },\r\n        \"isAxisLabelLineFeed\": false,\r\n        \"type\": \"value\",\r\n        \"fieldFormat\": {\r\n            \"dateFormat\": \"\",\r\n            \"decimal\": 2,\r\n            \"forceDecimal\": true,\r\n            \"prefix\": \"\",\r\n            \"scale\": 1,\r\n            \"source\": \"SpreadSheet\",\r\n            \"suffix\": \"\",\r\n            \"timeFormat\": \"\",\r\n            \"type\": \"DOUBLE\",\r\n            \"viewType\": \"DISPLAYVALUE\"\r\n        }\r\n    },\r\n    \"yAxis\": {\r\n        nameTextStyle: {\r\n            color: \"yellow\"\r\n        },\r\n        \"name\": \"名称\",\r\n        \"axisLabel\": {\r\n\r\n            \"show\": true,\r\n            \"margin\": 8,\r\n            \"rotate\": 0,\r\n            \"interval\": 0,\r\n            formatter: function(params) {\r\n                var newParamsName = \"\"; // 最终拼接成的字符串\r\n                var paramsNameNumber = params.length; // 实际标签的个数\r\n                var provideNumber = 4; // 每行能显示的字的个数\r\n                var rowNumber = Math.ceil(paramsNameNumber / provideNumber); // 换行的话，需要显示几行，向上取整\r\n                /**\r\n                 * 判断标签的个数是否大于规定的个数， 如果大于，则进行换行处理 如果不大于，即等于或小于，就返回原标签\r\n                 */\r\n                // 条件等同于rowNumber>1\r\n                if (paramsNameNumber > provideNumber) {\r\n                    /** 循环每一行,p表示行 */\r\n                    for (var p = 0; p < rowNumber; p++) {\r\n                        var tempStr = \"\"; // 表示每一次截取的字符串\r\n                        var start = p * provideNumber; // 开始截取的位置\r\n                        var end = start + provideNumber; // 结束截取的位置\r\n                        // 此处特殊处理最后一行的索引值\r\n                        if (p == rowNumber - 1) {\r\n                            // 最后一次不换行\r\n                            tempStr = params.substring(start, paramsNameNumber);\r\n                        } else {\r\n                            // 每一次拼接字符串并换行\r\n                            tempStr = params.substring(start, end) + \"\\n\";\r\n                        }\r\n                        newParamsName += tempStr; // 最终拼成的字符串\r\n                    }\r\n\r\n                } else {\r\n                    // 将旧标签的值赋给新标签\r\n                    newParamsName = params;\r\n                }\r\n                //将最终的字符串返回\r\n                return newParamsName\r\n            }\r\n\r\n\r\n        },\r\n        \"isAxisLabelLineFeed\": true,\r\n        \"type\": \"category\",\r\n        \"filedName\": \"名称\",\r\n        \"fieldFormat\": {\r\n            \"dateFormat\": \"\",\r\n            \"decimal\": -1,\r\n            \"forceDecimal\": true,\r\n            \"prefix\": \"\",\r\n            \"scale\": 1,\r\n            \"source\": \"SpreadSheet\",\r\n            \"suffix\": \"\",\r\n            \"timeFormat\": \"\",\r\n            \"type\": \"STRING\",\r\n            \"viewType\": \"DISPLAYVALUE\"\r\n        },\r\n        \"data\": [\"这是一个很长很长很长的名称1\", \"这是一个很长很长很长的名称2\", \"这是一个很长很长很长的名称3\", \"这是一个很长很长很长的名称4\", \"这是一个很长很长很长的名称5\"]\r\n    },\r\n    \"legend\": {\r\n        \"show\": false,\r\n        \"data\": []\r\n    },\r\n    \"sendDataSetting\": {\r\n        \"selectParams\": false,\r\n        \"selectCell\": false\r\n    },\r\n    \"chartTemplate\": {\r\n        \"id\": \"echarts_bar_horizontal_stack\",\r\n        \"type\": \"echarts_bar\"\r\n    },\r\n    \"series\": [{\r\n        \"name\": \"数值\",\r\n        \"fieldFormat\": {\r\n            \"dateFormat\": \"\",\r\n            \"decimal\": 2,\r\n            \"forceDecimal\": true,\r\n            \"prefix\": \"\",\r\n            \"scale\": 1,\r\n            \"source\": \"SpreadSheet\",\r\n            \"suffix\": \"\",\r\n            \"timeFormat\": \"\",\r\n            \"type\": \"DOUBLE\",\r\n            \"viewType\": \"DISPLAYVALUE\"\r\n        },\r\n        \"data\": [{\r\n            \"rowIndex\": 0,\r\n            \"value\": [200, 0],\r\n            \"displayValue\": \"200\",\r\n            \"rawRowIndex\": 0,\r\n            \"itemColorFrom\": \"default\",\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"color\": \"#c12e34\"\r\n                }\r\n            }\r\n        }, {\r\n            \"rowIndex\": 1,\r\n            \"value\": [50, 1],\r\n            \"displayValue\": \"50\",\r\n            \"rawRowIndex\": 1,\r\n            \"itemColorFrom\": \"default\",\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"color\": \"#e6b600\"\r\n                }\r\n            }\r\n        }, {\r\n            \"rowIndex\": 2,\r\n            \"value\": [300, 2],\r\n            \"displayValue\": \"300\",\r\n            \"rawRowIndex\": 2,\r\n            \"itemColorFrom\": \"default\",\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"color\": \"#0098d9\"\r\n                }\r\n            }\r\n        }, {\r\n            \"rowIndex\": 3,\r\n            \"value\": [68, 3],\r\n            \"displayValue\": \"68\",\r\n            \"rawRowIndex\": 3,\r\n            \"itemColorFrom\": \"default\",\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"color\": \"#2b821d\"\r\n                }\r\n            }\r\n        }, {\r\n            \"rowIndex\": 4,\r\n            \"value\": [239, 4],\r\n            \"displayValue\": \"239\",\r\n            \"rawRowIndex\": 4,\r\n            \"itemColorFrom\": \"default\",\r\n            \"itemStyle\": {\r\n                \"normal\": {\r\n                    \"color\": \"#005eaa\"\r\n                }\r\n            }\r\n        }],\r\n        \"type\": \"bar\",\r\n        \"stack\": \"default\"\r\n    }],\r\n    \"resId\": \"I8aaa80a001695dc45dc41ba0016aa22fe14a325c\",\r\n    \"id\": \"I8aaa80a001695dc45dc41ba0016b6af07654706e\",\r\n    \"chartdata\": {\r\n        \"columnsCount\": 2,\r\n        \"data\": [\r\n            [{\r\n                \"col\": 0,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": -1,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"STRING\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"这是一个很长很长很长的名称1\",\r\n                \"row\": 1,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": \"这是一个很长很长很长的名称1\"\r\n            }, {\r\n                \"col\": 1,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": 2,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"DOUBLE\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"200\",\r\n                \"row\": 1,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": 200\r\n            }],\r\n            [{\r\n                \"col\": 0,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": -1,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"STRING\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"这是一个很长很长很长的名称2\",\r\n                \"row\": 2,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": \"这是一个很长很长很长的名称2\"\r\n            }, {\r\n                \"col\": 1,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": 2,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"DOUBLE\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"50\",\r\n                \"row\": 2,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": 50\r\n            }],\r\n            [{\r\n                \"col\": 0,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": -1,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"STRING\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"这是一个很长很长很长的名称3\",\r\n                \"row\": 3,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": \"这是一个很长很长很长的名称3\"\r\n            }, {\r\n                \"col\": 1,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": 2,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"DOUBLE\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"300\",\r\n                \"row\": 3,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": 300\r\n            }],\r\n            [{\r\n                \"col\": 0,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": -1,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"STRING\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"这是一个很长很长很长的名称4\",\r\n                \"row\": 4,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": \"这是一个很长很长很长的名称4\"\r\n            }, {\r\n                \"col\": 1,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": 2,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"DOUBLE\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"68\",\r\n                \"row\": 4,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": 68\r\n            }],\r\n            [{\r\n                \"col\": 0,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": -1,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"STRING\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"这是一个很长很长很长的名称5\",\r\n                \"row\": 5,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": \"这是一个很长很长很长的名称5\"\r\n            }, {\r\n                \"col\": 1,\r\n                \"df\": {\r\n                    \"dateFormat\": \"\",\r\n                    \"decimal\": 2,\r\n                    \"forceDecimal\": true,\r\n                    \"prefix\": \"\",\r\n                    \"scale\": 1,\r\n                    \"source\": \"SpreadSheet\",\r\n                    \"suffix\": \"\",\r\n                    \"timeFormat\": \"\",\r\n                    \"type\": \"DOUBLE\",\r\n                    \"viewType\": \"DISPLAYVALUE\"\r\n                },\r\n                \"displayValue\": \"239\",\r\n                \"row\": 5,\r\n                \"sheetName\": \"Sheet1\",\r\n                \"value\": 239\r\n            }]\r\n        ],\r\n        \"fields\": [{\r\n            \"alias\": \"名称\",\r\n            \"dataFormat\": {\r\n                \"dateFormat\": \"\",\r\n                \"decimal\": -1,\r\n                \"forceDecimal\": true,\r\n                \"prefix\": \"\",\r\n                \"scale\": 1,\r\n                \"source\": \"SpreadSheet\",\r\n                \"suffix\": \"\",\r\n                \"timeFormat\": \"\",\r\n                \"type\": \"STRING\",\r\n                \"viewType\": \"DISPLAYVALUE\"\r\n            },\r\n            \"id\": \"Sheet1!$A$2:$A$6\",\r\n            \"name\": \"\",\r\n            \"realName\": \"\"\r\n        }, {\r\n            \"alias\": \"数值\",\r\n            \"dataFormat\": {\r\n                \"dateFormat\": \"\",\r\n                \"decimal\": 2,\r\n                \"forceDecimal\": true,\r\n                \"prefix\": \"\",\r\n                \"scale\": 1,\r\n                \"source\": \"SpreadSheet\",\r\n                \"suffix\": \"\",\r\n                \"timeFormat\": \"\",\r\n                \"type\": \"DOUBLE\",\r\n                \"viewType\": \"DISPLAYVALUE\"\r\n            },\r\n            \"id\": \"Sheet1!$B$2:$B$6\",\r\n            \"name\": \"\",\r\n            \"realName\": \"\"\r\n        }],\r\n        \"mergeData\": [],\r\n        \"mergerOtherObj\": null,\r\n        \"paramsData\": [],\r\n        \"rowsCount\": 5\r\n    },\r\n    \"chartDefine\": \"{\\\"chartDatas\\\":{\\\"fieldList\\\":[{\\\"id\\\":\\\"Sheet1!$A$2:$A$6\\\",\\\"alias\\\":\\\"名称\\\",\\\"axisType\\\":\\\"categories\\\"},{\\\"id\\\":\\\"Sheet1!$B$2:$B$6\\\",\\\"alias\\\":\\\"数值\\\",\\\"axisType\\\":\\\"yAxis\\\"}],\\\"insertMode\\\":\\\"SmartbiOfficeAddIn2007.InsertChart2\\\",\\\"datasetMode\\\":false}}\",\r\n    \"tooltip\": {}\r\n}","html":"","externalScripts":"","updaterUID":"bd-2437013587","theme":"","layout":"","viewCount":106,"userName":"就***呵","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xfwZ722K82.png?v=1560840386420","isCustomThumbnail":0,"builtinTags":["category-work","grid","legend","series-bar","tooltip"],"customTags":["format"],"updaterUserName":"就***呵"}}