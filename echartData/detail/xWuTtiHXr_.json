{"status":0,"data":{"cid":"xWuTtiHXr_","authorUid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","authorUserName":"m***h","title":"","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2021-02-04T03:52:28.000Z","lastUpdateTime":"2021-02-04T03:52:28.000Z","auth":2,"uid":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2021-02-04T03:52:28.000Z","code":"var xData = [\"东北师范大学\", \"华东师范大学\", \"华中师范大学\"]\r\r\rvar data = [{\r\r    name: '学校',\r\r    value: [\"13\", \"25\", \"84\"]\r\r}]\r\rvar average = parseFloat(data[0].value.reduce((current, next) => {\r    return Number(current) + Number(next)\r}) / data[0].value.length).toFixed(2)\rconsole.log('average',average)\rvar lineData = data[0].value.map((item, index) => {\r    return {\r        value: average,\r    }\r})\r\r\r\rvar barWidth = 30\r\rvar imgurl = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAADHQAAAAyCAYAAACHgW2RAAAQvklEQVR4Xu3dXYildR0H8N//HBZ39zzncV1Y2W62bhavlroS9qrIq8L1pTLNSCo2DERoQ0HIXoRCaS8KjEXI0kAt03wPQfBCEIRCEKTwIhFKpHYl95znmR3X5swvRjA0X3Z25syZc858nqth5v//vXyeuf3ylNhCz2AwuLDT6TwSER/bQmtblQABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIzILAG6WUK6qqenoWhl3vjGW9BWblftM0V0TEbyJix6zMbE4CBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQILDFBP6TmdfVdf3Led977gMdmVnatr05Im6JiLnfd97/Ye1HgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAvMvkJk/6/f7N5ZSRvO67VwHHDJze9u2d0bEV+f1BdqLAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMo0Ap5YnFxcWr9+zZ08zlfvO41MpOTdOcHxGPRMTBed3RXgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAYM4FXux2uxfv3Lnz7/O251x+oaNt2wMR8VhmfmLeXph9CBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAFhP4V2ZeXtf1c/O099wFOhYWFj63vLx8f0T05+lF2YUAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECGxhgTdLKd+squq382IwV4GOtm2PZObRiOjOywuyBwECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPC2QEbEj6uq+mEpZeXnmX7mItCRmdvatr09Iq6d6bdheAIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQOBMAvdXVfWNUsrimQ5O899nPtBx8uTJ87rd7gMRcdE0Q5uNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQGI9AKeVPEXFpVVX/HE/FyVeZ6UDHYDDY3+l0Ho+ICyZPpyMBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwiQL/KKVcUlXVC5s4w5pbz2ygo2maT0fEQxGxe83bu0iAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAjMskCbmVfXdb3ysYiZemYy0DEcDg+XUo5FxLaZ0jYsAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMG6B5cy8qa7ro+MuvJH1ZirQkZndhYWFWzPzxo1EUZsAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYOYE7q6q6rpTy1ixMPjOBjuPHj1c7d+68LzMPzQKsGQkQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIGJCzyzvLz8hXPPPfffE+98lg1nItBx6tSpfaPR6NGI+NRZ7uc4AQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgsLUE/rbyMYm6rl+a5rWnPtAxGAwu7HQ6K2GOvdMMaTYCBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgagTeKKVcUVXV01Mz0f8NMtWBjqZproqIX0fEjmkFNBcBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlQJLEXF9v9+/Yxqnm8pAR2aWtm1vjohbImIqZ5zGl2kmAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBA4H0CP6+q6oZSymiabKYuLJGZ29u2vSsiVr7O4SFAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIrEsgM588ffr0lXv27GnWVWiMl6cq0NG27d7MfCgiDo5xR6UIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAi+ORqNLd+3a9co0UExNoKNt2wOZ+URE7JsGGDMQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECcydwPDMvq+v6uc3ebCoCHcPh8FAp5d6I6G82iP4ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAXAu8WUr5VlVV92zmlpse6Gjb9khmHo2I7mZC6E2AAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAhsGYGMiJ9UVfWDUsrKzxN/Ni3QkZnb2rY9FhGHJ761hgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBiAerqrqmlLI4aYxNCXQMBoPdnU7n9xFx0aQX1o8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAg8I5AZv652+1e1uv1XpukysQDHYPBYH+n0/ljROyf5KJ6ESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQ+RODVUsqhqqpemJTQRAMdTdN8NiIeiIjdk1pQHwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIDAKgTazLymruuHV3F23UcmFugYDoeHSynHImLbuqdWgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwfoHlzLypruuj4y/93oobHujIzG7TND8tpXx3o5dRnwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECCwXoFSyt29Xu/aUspb6631Yfc3NNBx4sSJ/o4dO+7NzEMbtYC6BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIENEHgmM79U1/XrG1A7NizQcerUqX2j0eiJiDiwEYOrSYAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBDYYIGXM/Piuq5fGnefDQl0DIfDg6WUhyJi77gHVo8AAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgMEGBk6WUK6uqemqcPcce6Gia5qqIuCsito9zULUIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABApsksBQR1/f7/TvG1X9sgY7MLG3b/igivh8RY6s7rkXVIUCAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAisU+AXVVV9p5QyWmed8QQvMnN727YrX+VY+TqHhwABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECAwlwKZ+eTS0tJXdu/ePVjPguv+kkbbtnsj4tHMvHA9g7hLgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEJgRgb+MRqNDu3btemWt864r0NG27Scz87GI2LfWAdwjQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECMygwPHM/GJd18+uZfY1BzqGw+GhUsp9EVGtpbE7BAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEZFzhdSjlcVdU9Z7vHmgIdbdvekJm3RUT3bBs6T4AAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBCYI4EspdzW6/W+V0rJ1e51VoGOzNzWtu2xiDi82gbOESBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgS2gMCDCwsLX9+7d+/CanZddaBjMBjs7nQ6f4iIz6ymsDMECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0m8Hyn07mk1+u9dqa9VxXoGA6HF5RSHo+I/Wcq6O8ECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgS0s8Gqn07ms1+s9/1EGZwx0tG17UWY+EBHnbWFMqxMgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIEViVQSllYXl7+Wl3XD3/YhY8MdDRNc21E3B4R21bV0SECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAIEVgeXMvLmu61s/iOMDAx2Z2W2a5mgp5QhDAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBtQmUUu7u9XrfLqWcfneF9wU6Tpw40T/nnHN+V0r5/NpauUWAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIPAugWcz8/K6rl9/53fvCXQsLi5+fGlp6fGIOICNAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIECAAAECBAgQIEBgbAIvR8Ql/X7/rysV/xfoGA6HB0spj0TE+WNrpRABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMA7AoNSyperqnrq7UBH27ZXZ+avImI7IwIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAAQIECBAgQIAAgQ0TWIqII/8FUR7Qhy+AhvIAAAAASUVORK5CYII='\r\r//背景图片不接受百分比，只接受数值，获取图表的宽度实现动态背景宽度\r\rvar imgwidth = myChart.getWidth()\r\r\r\r// console.log(myChart.getWidth())\r\r\r\rvar colorsTop = {\r\r    '学校': new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\r            offset: 0,\r\r            color: \"rgba(128, 195, 255, 1)\"\r\r        },\r\r        {\r\r            offset: 1,\r\r            color: \"rgba(128, 195, 255, 1)\"\r\r        }\r\r    ])\r}\r\rvar colorsBottom = {\r\r    '学校': 'rgba(10, 121, 223, 1)',\r\r}\r\rvar colors = [\r\r    new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\r            offset: 0,\r\r            color: \"rgba(10, 121, 223, 1)\"\r\r        },\r\r        {\r\r            offset: 1,\r\r            color: \"rgba(78, 164, 243, 1)\"\r\r        }\r\r    ])\r\r]\r\rvar option = chuliData(data, barWidth)\r\rconsole.log(option,'option')\r\rfunction chuliData(data, barWidth) {\r\r    // console.log(data)\r\r\r    let max = Math.max(...data[0].value);\r    let barDataBtm = []\r    let barData = []\r    let barDataTop = []\r    data[0].value.map((item) => {\r        let colorBottom = 'rgba(10, 121, 223, 1)'\r        let colorBody = new echarts.graphic.LinearGradient(0, 1, 0, 0, [{\r\r                offset: 0,\r\r                color: \"rgba(10, 121, 223, 1)\"\r\r            },\r\r            {\r\r                offset: 1,\r\r                color: \"rgba(78, 164, 243, 1)\"\r\r            }\r\r        ])\r        let colorTop = new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\r                offset: 0,\r\r                color: \"rgba(128, 195, 255, 1)\"\r\r            },\r\r            {\r\r                offset: 1,\r\r                color: \"rgba(128, 195, 255, 1)\"\r\r            }\r\r        ])\r\r        barDataTop.push({\r            name: data[0].name,\r            value: item,\r            itemStyle: {\r                normal: {\r                    color: colorTop\r                }\r            }\r        })\r        barData.push({\r            name: data[0].name,\r            value: item,\r            itemStyle: {\r                normal: {\r                    color: colorBody\r                }\r            }\r        })\r        barDataBtm.push({\r            name: data[0].name,\r            value: item,\r            itemStyle: {\r                normal: {\r                    color: colorBottom\r                }\r            }\r        })\r    })\r    // console.log(barData)\r\r    // let baseWidth = data.length == 4 ? 0 : 2.25/ data.length\r\r    let baseWidth = 0;\r    if (data.length == 4) {\r        baseWidth = 0\r\r    } else if (data.length == 2) {\r        baseWidth = 1.5\r    } else {\r        baseWidth = 2.25 / data.length\r    }\r\r    var seriesData = []\r\r\r\r    data.forEach((item, i) => {\r\r        var item = {\r\r            name: data[i].name,\r\r            type: 'bar',\r\r            barWidth: barWidth,\r\r            barGap: '50%',\r\r            data: barData,\r            symbolOffset: [0, 30],\r\r            itemStyle: {\r                normal: {\r                    label: {\r                        show: true, //开启显示\r                        position: 'top', //在上方显示\r                        distance: 10,\r                        textStyle: { //数值样式\r                            color: barDataBtm,\r                            fontSize: 16\r                        }\r                    }\r                }\r            },\r\r        }\r\r\r\r        var itemBottom = { //柱底圆片\r\r            name: data[i].name,\r\r            type: \"pictorialBar\",\r\r            symbolSize: [barWidth, barWidth * 0.5],\r\r            symbolOffset: [baseWidth * barWidth + (i - 1.5) * barWidth * 1.5, barWidth * 0.25],\r\r            z: 12,\r\r            silent: true,\r\r            // color: colorsBottom,\r\r            itemStyle: {\r\r                \"normal\": {\r\r                    color: colorsBottom[item.name]\r\r                }\r\r            },\r\r            data: barDataBtm\r\r        }\r\r        //柱顶圆片\r\r        var itemTop = {\r\r            name: data[i].name,\r\r            type: \"pictorialBar\",\r\r            symbolSize: [barWidth, barWidth * 0.5],\r\r            symbolOffset: [baseWidth * barWidth + (i - 1.5) * barWidth * 1.5, -barWidth * 0.25],\r\r            z: 12,\r\r            symbolPosition: \"end\",\r\r            silent: true,\r\r            itemStyle: {\r\r                \"normal\": {\r\r                    color: colorsTop[item.name]\r\r                }\r\r            },\r\r            data: barDataTop\r\r        }\r        //平均线\r        var ave = {\r            name: '平均值',\r            type: 'line',\r            xAxisIndex: 1,\r            data: lineData,\r            lineStyle: {\r                type: 'dashed',\r                color: 'rgba(0,0,0,0)'\r            },\r            symbolSize: 0.0000001,\r            silent: true,\r            label: {\r                show: false\r            },\r            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r                offset: 0,\r                color: 'rgba(255, 163, 135, 1)'\r            }, {\r                offset: 1,\r                color: 'rgba(255, 99, 136, 1)'\r            }]),\r            symbol: 'none',\r            markLine: {\r                silent: true,\r                data: [{\r                    type: 'average',\r                    name: '平均值'\r                }],\r                lineStyle: {\r                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r                        offset: 0,\r                        color: '#ff6388'\r                    }, {\r                        offset: 1,\r                        color: '#ffa387'\r                    }]),\r                    textStyle: {\r                        color: 'red',\r                    }\r                },\r                symbol: 'none',\r                label: {\r                    show: true,\r                    position: 'top',\r                    align: 'center',\r                    lineHeight: 28,\r                    distance: [20, 20],\r                    textStyle: { //数值样式\r                        fontSize: 16,\r                    },\r                    formatter: item => {\r                        console.log('markLine', item)\r                        return `{circle|${item.value}}\\n`\r                    },\r                    rich: {\r                        circle: {\r                            // backgroundColor:'rgba(74, 202, 255, 0.1)',\r                            backgroundColor: 'rgba(255, 99, 136, 1)',\r                            color: '#FFFFFF',\r                            borderRadius: 3,\r                            fontSize: 14,\r                            padding: [0, 5, 2, 5]\r                        },\r                        mb: {\r                            padding: [0, 0, 20, 0]\r                        }\r                    }\r                }\r\r            },\r            markArea: {\r                data: [\r                    [{\r                        yAxis: 'average',\r                        itemStyle: {\r                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r                                offset: 0,\r                                color: 'rgba(255, 99, 136, 0.05)'\r                            }, {\r                                offset: 1,\r                                color: 'rgba(255, 163, 135, 0.05)'\r                            }])\r                        }\r                    }, {\r                        yAxis: '0'\r                    }]\r                ],\r            }\r        }\r        console.log('ave', ave)\r\r\r\r        seriesData.push(itemTop)\r\r        seriesData.push(item)\r\r        seriesData.push(itemBottom)\r\r        seriesData.push(ave)\r\r    })\r\r\r\r\r\r    var option = {\r\r        color: colors,\r\r        tooltip: {\r\r            trigger: 'item',\r\r        },\r\r        grid: {\r\r            top: 100,\r\r            right: 0,\r\r            left: 0,\r\r            bottom: 0,\r\r            containLabel: true\r\r        },\r\r\r        graphic: {\r\r            type: 'image',\r\r            id: 'logo',\r\r            left: 22,\r\r            bottom: 44,\r\r            z: 0,\r\r            left: 'center',\r\r            style: {\r\r                image: imgurl,\r\r                width: imgwidth,\r\r                height: 50,\r\r            }\r\r        },\r\r\r\r        xAxis: [{\r\r            data: xData,\r\r            axisLabel: {\r\r                textStyle: {\r\r                    color: '#aaaaaa',\r\r                    fontSize: 14\r\r                },\r\r                margin: 30, //刻度标签与轴线之间的距离。\r\r            },\r\r\r\r            axisLine: {\r\r                show: false //不显示x轴\r\r            },\r\r            axisTick: {\r\r                show: false //不显示刻度\r\r            },\r\r            boundaryGap: true,\r\r            splitLine: {\r\r                show: false,\r\r                width: 0.08,\r\r                lineStyle: {\r\r                    type: \"solid\",\r\r                    color: \"#03202E\"\r\r                }\r\r            }\r\r        },{\r            data:xData,\r            boundaryGap:false,\r            show:false\r        }],\r\r        yAxis: [{\r\r            splitLine: {\r\r                // show: false,\r\r                lineStyle: {\r\r                    color: 'rgba(216, 216, 216, 1)',\r\r                    type: 'solid'\r\r                }\r\r            },\r\r            axisTick: {\r\r                show: false\r\r            },\r\r            axisLine: {\r\r                show: false\r\r            },\r\r            axisLabel: {\r\r                textStyle: {\r\r                    color: '#888'\r\r                },\r\r            }\r\r        }],\r\r        series: seriesData\r\r    };\r\r\r\r    return option\r\r}\r\r// console.log(seriesData)\r\rmyChart.setOption(option);\r\rmyChart.on('legendselectchanged', function(obj) {\r\r    const selectedList = []\r\r    data.forEach((item, i) => {\r\r        if (obj['selected'][item['name']]) {\r\r            selectedList.push(item)\r\r        }\r\r    })\r\r    var option = chuliData(selectedList, 30)\r\r    myChart.setOption(option);\r\r});","html":"","externalScripts":"","updaterUID":"obd-o2TqhU5V49yi28tSjDqysoIw4zUTi6H","theme":"","layout":"","viewCount":106,"userName":"m***h","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xWuTtiHXr_.png?v=1612410749069","isCustomThumbnail":0,"builtinTags":["category-work","graphic","grid","markArea","markLine","series-bar","series-line","series-pictorialBar","tooltip"],"customTags":[],"updaterUserName":"m***h"}}