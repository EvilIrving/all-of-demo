{"status":0,"data":{"cid":"xDNWZTJrA2","authorUid":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","authorUserName":"h***笙","title":"河南省周口市川汇区 迁徙+百度地图","description":"自定义百度地图作为底图，","latestVersion":2,"alwaysLatest":1,"createTime":"2020-08-11T02:08:25.000Z","lastUpdateTime":"2020-08-11T02:08:25.000Z","auth":2,"uid":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-11T02:24:13.000Z","code":"//固定点的位置\r\nvar geoCoordMap = {\r\n    \"1\": [114.622534, 33.641938],\r\n    \"2\": [114.649555, 33.642419],\r\n    \"3\": [114.637194, 33.6429],\r\n    \"4\": [114.638632, 33.61741],\r\n    \"5\": [114.661628, 33.618853],\r\n    \"6\": [114.661628, 33.637851],\r\n    \"7\": [114.609311, 33.612118],\r\n    \"8\": [114.652142, 33.622701],\r\n    \"9\": [114.673989, 33.610194],\r\n    \"10\": [114.676289, 33.656845],\r\n    \"11\": [114.645531, 33.656364],\r\n    \"12\": [114.639207, 33.609232]\r\n};\r\n//三个数据，相当于三个出发点/终点\r\nvar oneData = [\r\n    //从1点开始到2点，小飞机轨迹\r\n    [{\r\n            name: \"1\"\r\n        },\r\n        {\r\n            name: \"2\",\r\n            value: 20\r\n        }\r\n    ],\r\n\r\n\r\n\r\n    [{\r\n            name: \"1\"\r\n        },\r\n        {\r\n            name: \"7\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"1\"\r\n        },\r\n        {\r\n            name: \"11\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"1\"\r\n        },\r\n        {\r\n            name: \"4\",\r\n            value: 20\r\n        }\r\n    ]\r\n];\r\nvar twoData = [\r\n    [{\r\n            name: \"5\"\r\n        },\r\n        {\r\n            name: \"6\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"5\"\r\n        },\r\n        {\r\n            name: \"7\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"5\"\r\n        },\r\n        {\r\n            name: \"11\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"5\"\r\n        },\r\n        {\r\n            name: \"8\",\r\n            value: 20\r\n        }\r\n    ]\r\n];\r\nvar threeData = [\r\n    [{\r\n            name: \"9\"\r\n        },\r\n        {\r\n            name: \"10\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"9\"\r\n        },\r\n        {\r\n            name: \"1\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"9\"\r\n        },\r\n        {\r\n            name: \"11\",\r\n            value: 20\r\n        }\r\n    ],\r\n    [{\r\n            name: \"9\"\r\n        },\r\n        {\r\n            name: \"12\",\r\n            value: 20\r\n        }\r\n    ]\r\n];\r\n\r\n//小飞机的环境\r\nvar planePath =\r\n    \"path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z\";\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var dataItem = data[i];\r\n        var fromCoord = geoCoordMap[dataItem[1].name];\r\n        var toCoord = geoCoordMap[dataItem[0].name];\r\n        if (fromCoord && toCoord) {\r\n            res.push({\r\n                fromName: dataItem[1].name,\r\n                toName: dataItem[0].name,\r\n                coords: [fromCoord, toCoord]\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n//三个出发点/终点的颜色\r\nvar color = [\"#a6c84c\", \"#ffa022\", \"#46bee9\"];\r\n\r\n//系列列表。每个系列通过 type 决定自己的图表类型，这里相当于三个出发点/终点的三个配置，用下标表示（例如：name: item[0],）\r\nvar series = [];\r\n[\r\n    [\"1\", oneData],\r\n    [\"5\", twoData],\r\n    [\"9\", threeData]\r\n].forEach(function(\r\n    item,\r\n    i\r\n) {\r\n    series.push({\r\n        //第一个点\r\n        name: item[0],\r\n        //涟漪特效类型\r\n        type: \"effectScatter\",\r\n        //地理坐标系采用bmap里配置的百度地图\r\n        coordinateSystem: \"bmap\",\r\n        //用于 Canvas 分层（相当于z-index），z相比zlevel优先级更低，而且不会创建新的 Canvas,为了使点位于底图（bmap配置的百度地图）之上\r\n        zlevel: 2,\r\n        //涟漪特效相关配置\r\n        rippleEffect: {\r\n            //波纹的绘制方式可选 'stroke' 和 'fill'。 相当于丢石头那个涟漪效果，一个类似圆环，一个类似圆饼\r\n            brushType: \"stroke\"\r\n        },\r\n        //配置线条样式\r\n        label: {\r\n\r\n            normal: {\r\n                show: true,\r\n                position: \"right\",\r\n                //采用 rich 中定义样式。\r\n                formatter: \"{b}\"\r\n            }\r\n        },\r\n\r\n        symbolSize: function(val) {\r\n            return val[2] / 4;\r\n        },\r\n\r\n        //配置何时显示特效。'render' 绘制完成后显示特效  'emphasis' 高亮（hover）的时候显示特效。\r\n        showEffectOn: \"render\",\r\n\r\n\r\n        itemStyle: {\r\n            normal: {\r\n                color: color[i]\r\n            }\r\n        },\r\n        data: [{\r\n            name: item[0],\r\n            value: geoCoordMap[item[0]].concat([100])\r\n        }]\r\n    }, {\r\n        name: item[0] + \" Top10\",\r\n        type: \"lines\",\r\n        coordinateSystem: \"bmap\",\r\n        zlevel: 1,\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0.7,\r\n            color: \"#fff\",\r\n            symbolSize: 3\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 0,\r\n                curveness: 0.2\r\n            }\r\n        },\r\n        data: convertData(item[1])\r\n    }, {\r\n        name: item[0] + \" Top10\",\r\n        type: \"lines\",\r\n        coordinateSystem: \"bmap\",\r\n        zlevel: 2,\r\n        effect: {\r\n            show: true,\r\n            period: 6,\r\n            trailLength: 0,\r\n            symbol: planePath,\r\n            symbolSize: 15\r\n        },\r\n        lineStyle: {\r\n            normal: {\r\n                color: color[i],\r\n                width: 1,\r\n                opacity: 0.4,\r\n                curveness: 0.2\r\n            }\r\n        },\r\n        data: convertData(item[1])\r\n    }, {\r\n        name: item[0] + \" Top10\",\r\n        type: \"effectScatter\",\r\n        coordinateSystem: \"bmap\",\r\n        zlevel: 2,\r\n        rippleEffect: {\r\n            brushType: \"stroke\"\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: \"right\",\r\n                formatter: \"{b}\"\r\n            }\r\n        },\r\n        symbolSize: function(val) {\r\n            return val[2] / 4;\r\n        },\r\n        showEffectOn: \"render\",\r\n        itemStyle: {\r\n            normal: {\r\n                color: color[i]\r\n            }\r\n        },\r\n        data: item[1].map(function(dataItem) {\r\n            return {\r\n                name: dataItem[1].name,\r\n                value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\r\n            };\r\n        })\r\n    });\r\n});\r\nvar option = {\r\n    bmap: {\r\n        center: [114.659329, 33.62703],\r\n        zoom: 14,\r\n        roam: true,\r\n        mapStyle: {\r\n            styleJson: [{\r\n                    featureType: \"water\",\r\n                    elementType: \"all\",\r\n                    stylers: {\r\n                        color: \"#021019\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"highway\",\r\n                    elementType: \"geometry.fill\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"highway\",\r\n                    elementType: \"geometry.stroke\",\r\n                    stylers: {\r\n                        color: \"#147a92\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"arterial\",\r\n                    elementType: \"geometry.fill\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"arterial\",\r\n                    elementType: \"geometry.stroke\",\r\n                    stylers: {\r\n                        color: \"#0b3d51\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"local\",\r\n                    elementType: \"geometry\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"land\",\r\n                    elementType: \"all\",\r\n                    stylers: {\r\n                        color: \"#08304b\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"railway\",\r\n                    elementType: \"geometry.fill\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"railway\",\r\n                    elementType: \"geometry.stroke\",\r\n                    stylers: {\r\n                        color: \"#08304b\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"subway\",\r\n                    elementType: \"geometry\",\r\n                    stylers: {\r\n                        lightness: -70\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"building\",\r\n                    elementType: \"geometry.fill\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"all\",\r\n                    elementType: \"labels.text.fill\",\r\n                    stylers: {\r\n                        color: \"#857f7f\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"all\",\r\n                    elementType: \"labels.text.stroke\",\r\n                    stylers: {\r\n                        color: \"#000000\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"building\",\r\n                    elementType: \"geometry\",\r\n                    stylers: {\r\n                        color: \"#022338\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"green\",\r\n                    elementType: \"geometry\",\r\n                    stylers: {\r\n                        color: \"#062032\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"boundary\",\r\n                    elementType: \"all\",\r\n                    stylers: {\r\n                        color: \"#1e1c1c\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"manmade\",\r\n                    elementType: \"geometry\",\r\n                    stylers: {\r\n                        color: \"#022338\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"poi\",\r\n                    elementType: \"all\",\r\n                    stylers: {\r\n                        visibility: \"off\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"all\",\r\n                    elementType: \"labels.icon\",\r\n                    stylers: {\r\n                        visibility: \"off\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"all\",\r\n                    elementType: \"labels.text.fill\",\r\n                    stylers: {\r\n                        color: \"#2da0c6\",\r\n                        visibility: \"on\"\r\n                    }\r\n                },\r\n                {\r\n                    featureType: \"background\",\r\n                    elementType: \"all\",\r\n                    stylers: {\r\n                        color: \"#0e1054ff\"\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    series: series\r\n};","html":"","externalScripts":"http://api.map.baidu.com/api?v=2.0&ak=liBNdtdzQWqL9k7IMUXcoHkAgdNKAzWZ\",/dep/echarts/map/js/china.js,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"obd-oCXcyPuzu5FKR0sIDwh3Tu_r7s61y3x","theme":"","layout":"","viewCount":1403,"userName":"h***笙","commentCount":0,"starCount":17,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xDNWZTJrA2.png?v=1597111706150","isCustomThumbnail":1,"builtinTags":["category-work"],"customTags":[],"updaterUserName":"h***笙"}}