{"status":0,"data":{"cid":"xHzpPc7bY","authorUid":"bd-3993925410","authorUserName":"c***0","title":"互动营销中心全球用户","description":"单位:人","latestVersion":1,"alwaysLatest":1,"createTime":"2020-02-05T00:06:41.000Z","lastUpdateTime":"2020-02-05T00:06:41.000Z","auth":2,"uid":"bd-3993925410","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-05T00:06:41.000Z","code":"var data = [{\r\n        \"time\": 2020,\r\n        \"data\": [{\r\n                \"name\": \"美国\",\r\n                \"value\": [1025000, 31.222, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"俄国\",\r\n                \"value\": [433412, 13.202, \"俄国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [209071, 6.369, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [208867, 6.362, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [146982, 4.477, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [124970, 3.807, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [109260, 3.328, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [91506, 2.787, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [86303, 2.629, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"India\",\r\n                \"value\": [61470, 1.873, \"印度\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2019,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [2768900, 23.337, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [1086988, 9.027, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Russia\",\r\n                \"value\": [940038, 7.923, \"俄国\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [919651, 6.253, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [691157, 5.825, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [541917, 4.567, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [459811, 3.875, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [306520, 2.583, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [268889, 2.266, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Mexico\",\r\n                \"value\": [227664, 1.919, \"墨西哥\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2018,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [5754800, 25.921, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [3103698, 13.774, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [1714447, 7.722, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [1244419, 5.605, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [1133465, 5.105, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [1012617, 4.561, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"Russia\",\r\n                \"value\": [775810, 3.501, \"俄国\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [582735, 2.625, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Spain\",\r\n                \"value\": [520938, 2.346, \"西班牙\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [404494, 1.822, \"中国\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2017,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [9898800, 30.659, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [4731199, 14.456, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [1886400, 5.843, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [1477132, 4.575, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [1326333, 4.108, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [1192836, 3.695, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [1097343, 3.399, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [724914, 2.245, \"加拿大\"]\r\n            },\r\n            {\r\n                \"name\": \"Brazil\",\r\n                \"value\": [644729, 1.997, \"巴西\"]\r\n            },\r\n            {\r\n                \"name\": \"Mexico\",\r\n                \"value\": [636731, 1.972, \"墨西哥\"]\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"time\": 2016,\r\n        \"data\": [{\r\n                \"name\": \"United States of America\",\r\n                \"value\": [14419600, 22.679, \"美国\"]\r\n            },\r\n            {\r\n                \"name\": \"China\",\r\n                \"value\": [5951462, 9.360, \"中国\"]\r\n            },\r\n            {\r\n                \"name\": \"Japan\",\r\n                \"value\": [5488424, 8.632, \"日本\"]\r\n            },\r\n            {\r\n                \"name\": \"Germany\",\r\n                \"value\": [3306028, 5.200, \"德国\"]\r\n            },\r\n            {\r\n                \"name\": \"France\",\r\n                \"value\": [2565755, 4.035, \"法国\"]\r\n            },\r\n            {\r\n                \"name\": \"United Kingdom\",\r\n                \"value\": [2266049, 3.564, \"英国\"]\r\n            },\r\n            {\r\n                \"name\": \"Brazil\",\r\n                \"value\": [2143035, 3.371, \"巴西\"]\r\n            },\r\n            {\r\n                \"name\": \"Italy\",\r\n                \"value\": [2056941, 3.235, \"意大利\"]\r\n            },\r\n            {\r\n                \"name\": \"India\",\r\n                \"value\": [1678297, 2.640, \"印度\"]\r\n            },\r\n            {\r\n                \"name\": \"Canada\",\r\n                \"value\": [1577040, 2.480, \"加拿大\"]\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n\r\nvar option = {\r\n    baseOption: {\r\n        animationDurationUpdate: 1000,\r\n        animationEasingUpdate: 'quinticInOut',\r\n        timeline: {\r\n            axisType: 'category',\r\n            orient: 'vertical',\r\n            autoPlay: true,\r\n            inverse: true,\r\n            playInterval: 5000,\r\n            left: null,\r\n            right: 5,\r\n            top: 20,\r\n            bottom: 20,\r\n            width: 46,\r\n            height: null,\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                },\r\n                emphasis: {\r\n                    textStyle: {\r\n                        color: '#fff'\r\n                    }\r\n                }\r\n            },\r\n            symbol: 'none',\r\n            lineStyle: {\r\n                color: '#555'\r\n            },\r\n            checkpointStyle: {\r\n                color: '#bbb',\r\n                borderColor: '#777',\r\n                borderWidth: 1\r\n            },\r\n            controlStyle: {\r\n                showNextBtn: false,\r\n                showPrevBtn: false,\r\n                normal: {\r\n                    color: '#666',\r\n                    borderColor: '#666'\r\n                },\r\n                emphasis: {\r\n                    color: '#aaa',\r\n                    borderColor: '#aaa'\r\n                }\r\n            },\r\n            data: data.map(function(ele) {\r\n                return ele.time\r\n            })\r\n        },\r\n        backgroundColor: '#404a59',\r\n        title: {\r\n            text: '互动营销中心全球用户',\r\n            subtext: '单位:人',\r\n            left: 'center',\r\n            top: 'top',\r\n            textStyle: {\r\n                fontSize: 25,\r\n                color: 'rgba(255,255,255, 0.9)'\r\n            }\r\n        },\r\n        tooltip: {\r\n            formatter: function(params) {\r\n                if ('value' in params.data) {\r\n                    return params.data.value[2] + ': ' + params.data.value[0];\r\n                }\r\n            }\r\n        },\r\n        grid: {\r\n            left: '12%',\r\n            right: '45%',\r\n            top: '70%',\r\n            bottom: 20\r\n        },\r\n        xAxis: {},\r\n        yAxis: {},\r\n        series: [{\r\n            id: 'map',\r\n            type: 'map',\r\n            mapType: 'world',\r\n            top: '10%',\r\n            bottom: '25%',\r\n            left: 10,\r\n            itemStyle: {\r\n                normal: {\r\n                    areaColor: '#323c48',\r\n                    borderColor: '#404a59'\r\n                },\r\n                emphasis: {\r\n                    label: {\r\n                        show: true\r\n                    },\r\n                    areaColor: 'rgba(255,255,255, 0.5)'\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'bar',\r\n            type: 'bar',\r\n            tooltip: {\r\n                show: false\r\n            },\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'right',\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            data: []\r\n        }, {\r\n            id: 'pie',\r\n            type: 'pie',\r\n            radius: ['8%', '20%'],\r\n            center: ['75%', '85%'],\r\n            roseType: 'radius',\r\n            tooltip: {\r\n                formatter: '{b} {d}%'\r\n            },\r\n            data: [],\r\n            label: {\r\n                normal: {\r\n                    textStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: '#ddd'\r\n                    }\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    borderColor: 'rgba(0,0,0,0.3)',\r\n                    borderSize: 1\r\n                }\r\n            }\r\n        }]\r\n    },\r\n    options: []\r\n}\r\n\r\nfor (var i = 0; i < data.length; i++) {\r\n    //计算其余国家GDP\r\n    var restPercent = 100;\r\n    var restValue = 0;\r\n    data[i].data.forEach(function(ele) {\r\n        restPercent = restPercent - ele.value[1];\r\n    });\r\n    restValue = data[i].data[0].value[0] * (restPercent / data[i].data[0].value[1]);\r\n    console.log(restPercent);\r\n    console.log(restValue);\r\n    option.options.push({\r\n        visualMap: [{\r\n            dimension: 0,\r\n            left: 10,\r\n            itemWidth: 12,\r\n            min: data[i].data[9].value[0],\r\n            max: data[i].data[0].value[0],\r\n            text: ['High', 'Low'],\r\n            textStyle: {\r\n                color: '#ddd'\r\n            },\r\n            inRange: {\r\n                color: ['lightskyblue', 'yellow', 'orangered', 'red']\r\n            }\r\n        }],\r\n        xAxis: {\r\n            type: 'value',\r\n            boundaryGap: [0, 0.1],\r\n            axisLabel: {\r\n                show: false,\r\n            }\r\n        },\r\n        yAxis: {\r\n            type: 'category',\r\n            axisLabel: {\r\n                textStyle: {\r\n                    color: '#ddd'\r\n                }\r\n            },\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[2]\r\n            }).reverse()\r\n        },\r\n        series: [{\r\n            id: 'map',\r\n            data: data[i].data\r\n        }, {\r\n            id: 'bar',\r\n            data: data[i].data.map(function(ele) {\r\n                return ele.value[0]\r\n            }).sort(function(a, b) {\r\n                return a > b\r\n            })\r\n        }, {\r\n            id: 'pie',\r\n            data: data[i].data.map(function(ele) {\r\n                return {\r\n                    name: ele.value[2],\r\n                    value: ele.value\r\n                }\r\n            }).concat({\r\n                name: '其他国家',\r\n                value: restValue\r\n            }),\r\n        }]\r\n    })\r\n}","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-3993925410","theme":"","layout":"","viewCount":10872,"userName":"c***0","commentCount":3,"starCount":48,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHzpPc7bY.png?v=1580861201941","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","series-map","series-pie","timeline","title","tooltip","visualMap"],"customTags":[],"updaterUserName":"c***0"}}