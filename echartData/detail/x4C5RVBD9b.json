{"status":0,"data":{"cid":"x4C5RVBD9b","authorUid":"bd-2133619855","authorUserName":"小***乖","title":"图表里面加入线绘制表格","description":"图表里面加入线绘制表格 用在小程序中","latestVersion":9,"alwaysLatest":1,"createTime":"2020-03-23T07:26:12.000Z","lastUpdateTime":"2020-03-23T07:26:12.000Z","auth":2,"uid":"bd-2133619855","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.8.0","versionCreateTime":"2020-08-27T05:17:16.000Z","code":"// let chart = null;\n\n// 必须固定echarts高度,以及计算出来相应宽度\n\nvar jisuanmax = 1000; //那些分界线\nvar lineList = getTableLine(3);\noption = {\n    title: [{\n        text: ' \\n日期\\n日变异率\\n时间',\n        top: -25,\n        left: 0,\n        textStyle: {\n            lineHeight: 20,\n            fontSize: 10,\n            fontWeight: 'normal',\n            formatter: function(value) {\n                return '{table|' + value + '}';\n            },\n            rich: {\n                table: {\n                    align: 'center'\n                }\n            }\n        }\n    }],\n\n    //整个图表的上下左右边距\n    grid: {\n        // width:300,\n        left: 65, //图的x,y轴象限内有效区域距离，也就是y轴刻度区域的宽 65\n        right: 1,\n        // top:0,\n        bottom: 1 //1\n    },\n\n    xAxis: [{\n            type: 'category',\n            z: 1,\n            data: ['早', '晚', '早', '晚', '早', '晚', '早', '晚', '早', '晚', '早', '晚', '早', '晚'],\n            position: 'top',\n            offset: 0,\n            splitArea: {\n                show: false\n            },\n            axisTick: {\n                show: false\n            },\n            splitLine: {\n                show: false,\n            },\n            axisTick: {\n                length: 179, //早晚中间的分界线 必须是图表显示区域高度\n                lineStyle: {\n                    width: 0.3,\n                }\n            },\n            axisLabel: {\n                interval: 0,\n                textStyle: {\n                    fontSize: 10,\n                },\n                margin: 5, //刻度标签与轴线之间的距离。\n            },\n             axisLine: {\n                show: false,\n                lineStyle: {\n                    // color: '#ddd', // 颜色\n                    // width: 0.5 // 粗细\n                }\n            }\n           \n\n        },\n        {\n           \ttype: 'category',\n    \t\tz:1,\n    \t\tdata: ['10', '20', '10', '20', '10', '20', '10'],\n    \t\toffset: 20,\n    \t\tposition: 'top',\n    \t\tsplitArea: {\n    \t\t\tshow: false\n    \t\t},\n    \t\taxisTick: {\n                show: true,\n                length: -30, //可以多设置反正超过了就隐藏了 上面表格部分内容里面左右的线 因为是从下面网上划线 所以要很高\n                lineStyle: {\n                    width: 0.3,\n                }\n            },\n    \t\taxisLabel: {\n    \t\t\tinterval: 0,\n    \t\t\tformatter: '{value}%',\n    \t\t\ttextStyle: {\n    \t\t\t\tfontSize: 10,\n    \t\t\t\tcolor: function (value, index) {\n    \t\t\t\t\treturn value > 10 ? 'red' : 'green';\n    \t\t\t\t}\n    \t\t\t},\n    \t\t\tmargin: 5,//刻度标签与轴线之间的距离。\n    \t\t},\n            splitLine: {\n                show: false,\n            },\n           axisLine: {\n                show: false,\n                lineStyle: {\n                    // color: '#ddd', // 颜色\n                    // width: 0.5 // 粗细\n                }\n            }\n\n        },\n        {\n            type: 'category',\n            z: 1,\n            data: ['12/07', '12/08', '12/09', '12/10', '12/11', '12/12', '12/13'],\n            position: 'top',\n            offset: 40,\n            splitArea: {\n                show: false\n            },\n            splitLine: {\n                show: false,\n            },\n            axisLabel: {\n                interval: 0,\n                textStyle: {\n                    fontSize: 10,\n                },\n                margin: 5, //刻度标签与轴线之间的距离。\n            },\n            //刻度轴是否显示,以及设置长度 \n            axisTick: {\n                show: true,\n                length: -300, //可以多设置反正超过了就隐藏了 上面表格部分内容里面左右的线 因为是从下面网上划线 所以要很高\n                lineStyle: {\n                    width: 0.3,\n                }\n            },\n             axisLine: {\n                show: false,\n                lineStyle: {\n                    // color: '#ddd', // 颜色\n                    // width: 0.5 // 粗细\n                }\n            }\n\n        }\n\n    ],\n    yAxis: [{\n        // 设置最大最小值为了在数据较少的时候也显示分层，max后面加的数根据实际业务情况估计\n            min: '0',\n            max: function(e){\n    \t\t\treturn e.max + 10;\n    \t\t},\n            axisLabel: {\n                showMinLabel: false,\n                showMaxLabel: false,\n                textStyle: {\n                    fontSize: 10,\n                },\n            },\n            type: 'value',\n            z: 3,\n            //图里的横线样式\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    color: ['black'],\n                    width: 0.5,\n                    // type: 'solid'\n                }\n            },\n          \n            axisTick: {\n                show: false\n            },\n           \n        },\n        {\n            name: '峰值流速(PEF)L/min',\n            position: 'left',\n            nameLocation: 'center',\n            nameGap: 45, //与轴线间距\n            nameTextStyle: { //文字样式\n                fontSize: '12'\n            },\n            axisLine: {\n                lineStyle: {\n                    color: '#606266'\n                }\n            },\n        },\n    ],\n    series: [{\n            name: '',\n            type: 'line',\n            z: 1,\n            stack: '',\n            // symbol: 'circle',\n            symbolSize: 2,\n            itemStyle: {\n                normal: {\n                    color: '#0092f6',\n                    lineStyle: {\n                        color: \"#0092f6\",\n                        width: 1\n                    },\n                }\n            },\n            xAxisIndex: 0,\n            data: [1],\n        },\n        //这个区域单独拿出来是为了设置其它的折线zlevel\n        //颜色区域划分\n        {\n            type: 'line',\n            markArea: {\n                silent: true,\n                z: -10,\n                data: [\n                    [{\n                        // name: '绿区',\n                        yAxis: 0,\n                        itemStyle: {\n                            color: '#FAE3E0',\n                            opacity: 1\n                        },\n                    }, {\n                        yAxis: 100 //\tname: '绿区'-黄区分割线 需要后台传过来,\n                    }],\n                    [{\n                        // name: '黄区',\n                        yAxis: 100,\n                        itemStyle: {\n                            color: '#FFEECB',\n                            opacity: 1\n                        },\n                    }, {\n                        yAxis: 200, //\tname: 黄区 红区 分割线 需要后台传过来,\n                    }],\n                    [{\n                        // name: '红区',\n                        // yAxis: 200,\n                        yAxis: 200,\n                        itemStyle: {\n                            color: '#C1EFDA',\n                            opacity: 1\n                        },\n                    }, {\n                        yAxis: 10000, //这个需要计算出来 红色最上面分割线 可以设置很大的\n                    }],\n                ]\n            }\n        }\n    ],\n    graphic: lineList\n};\n\nfunction getTableLine(num) {\n    var list = [];\n    var top = 0;\n    var height = 20;\n    for (var i = 0; i < num; i++) {\n        list.push({\n            type: 'line',\n            top: 40 - i * height,\n            right: 1,\n            // left:'100%',\n            style: {\n                fill: '#FFFFFF',\n                lineWidth: 0.5,\n            },\n            shape: {\n                x1: 0,\n                y1: 0,\n                x2: 500, //数据多的时候长度是计算出来的 可以设置无限大\n                percent: 1,\n                y2: 0\n            }\n        });\n    };\n    //标题左侧侧的竖线\n    list.push({\n        type: 'line',\n        style: {\n            fill: '#FFFFFF',\n            lineWidth: 1,\n        },\n        shape: {\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 221,\n        }\n    });\n\n    //标题右侧的竖线\n    list.push({\n        type: 'line',\n        style: {\n            fill: '#FFFFFF',\n            lineWidth: 0.5,\n        },\n        shape: {\n            x1: 30,\n            y1: 60,\n            x2: 30,\n            y2: 221,\n            // percent:1\n        }\n    });\n\n    //日变异率下的横线\n    list.push({\n        type: 'line',\n        style: {\n            fill: '#FFFFFF',\n            lineWidth: 0.5,\n        },\n        shape: {\n            x1: 0,\n            y1: 60.5,\n            x2: 90,\n            y2: 60.5,\n        }\n    });\n\n    // 标题下面的横线\n    list.push({\n        type: 'line',\n        style: {\n            fill: '#FFFFFF',\n            lineWidth: 0.5,\n        },\n        shape: {\n            x1: 0,\n            y1: 219.5,\n            x2: 100,\n            y2: 219.5,\n        }\n    });\n\n    return list;\n}","html":"","externalScripts":"","updaterUID":"bd-2133619855","theme":"","layout":"","viewCount":964,"userName":"小***乖","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4C5RVBD9b.png?v=1584948373162","isCustomThumbnail":1,"builtinTags":["category-work","graphic","grid","markArea","series-line","title"],"customTags":[],"updaterUserName":"小***乖"}}