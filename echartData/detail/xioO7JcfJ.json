{"status":0,"data":{"cid":"xioO7JcfJ","authorUid":"bd-4043698537","authorUserName":"彩***5","title":"直角坐标系热力图","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2019-12-17T06:35:39.000Z","lastUpdateTime":"2019-12-17T06:35:39.000Z","auth":2,"uid":"bd-4043698537","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-17T06:35:39.000Z","code":"var axisdata = [];\r\nfor (var i = -5; i < 5; i++) {\r\n    axisdata.push(i)\r\n}\r\n\r\nfunction makeHeatData() {\r\n    let maxDegree = 360\r\n    let points = []\r\n    let radius = 5\r\n    let buildPoints = function(radius) {\r\n        let degree = maxDegree / (radius * 8)\r\n        for (let i = 1; i < maxDegree; i += degree) {\r\n            points.push(\r\n                [\r\n                    Math.sin(i) * radius,\r\n                    Math.cos(i) * radius,\r\n                    i\r\n                ]\r\n            )\r\n        }\r\n    }\r\n    for (let i = 1; i <= 5; i++) {\r\n        buildPoints(i)\r\n    }\r\n    return points;\r\n}\r\nvar data = makeHeatData();\r\noption = {\r\n    tooltip: {\r\n        show: true\r\n    },\r\n    geo: [{\r\n        map: 'world',\r\n        zoom: 0,\r\n        roam: true,\r\n        show: false,\r\n        id: 'geo1',\r\n        itemStyle: {\r\n            areaColor: 'rgb(0,0,0,0)'\r\n        },\r\n        height: '100%'\r\n    }],\r\n    grid: {\r\n        show: true,\r\n        height: '62%',\r\n        width: '50%',\r\n        top: '20%',\r\n        left: 'center',\r\n        borderColor: 'rgb(0,0,0,0)'\r\n    },\r\n    animation: false,\r\n    xAxis: {\r\n        type: 'value',\r\n        data: axisdata\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        data: axisdata\r\n    },\r\n    series: [{\r\n        id: 'test',\r\n        name: \"fs\",\r\n        type: 'heatmap',\r\n        coordinateSystem: 'cartesian2d',\r\n        data: data,\r\n        gridIndex: 0,\r\n        itemStyle: {\r\n            show: true,\r\n            color: 'rgb(0,0,0,0)'\r\n        }\r\n    }, ]\r\n\r\n};\r\n\r\nmyChart.setOption(option);\r\n\r\nfunction convertToPx(dataitem) {\r\n    var newxy = myChart.convertToPixel({\r\n        seriesId: 'test'\r\n    }, dataitem);\r\n    return newxy\r\n}\r\n\r\nfunction convertToGeo(dataitem) {\r\n    var pointobj = myChart.convertFromPixel({\r\n        geoId: 'geo1'\r\n    }, convertToPx(dataitem));\r\n    var point = [pointobj[0], pointobj[1]];\r\n    return point;\r\n}\r\n\r\nfunction convertData(data, x, y) {\r\n    var convertedData = [];\r\n    x = Math.ceil(x);\r\n    y = Math.ceil(y);\r\n    for (var i = 0; i < data.length; i++) {\r\n        if (data[i][0] >= x && data[i][0] <= y) {\r\n            var geoCoord = convertToGeo([data[i][0], data[i][1]]);\r\n            geoCoord.push(data[i][2]); //\r\n            convertedData.push(geoCoord);\r\n        }\r\n    }\r\n    return convertedData;\r\n}\r\nvar cusdata = convertData(data, -6, data.length);\r\nsetTimeout(function() {\r\n    myChart.setOption({\r\n        series: [{\r\n            name: 'testheatmap',\r\n            type: 'heatmap',\r\n            id: 'testheatmap',\r\n            coordinateSystem: 'geo',\r\n            seriesIndex: 1,\r\n            geoIndex: 0,\r\n            data: cusdata,\r\n            blurSize: 20,\r\n            pointSize: 25\r\n        }, ],\r\n        visualMap: {\r\n            show: true,\r\n            top: 'bottom',\r\n            seriesIndex: 1,\r\n            calculable: true,\r\n            min: 0,\r\n            max: 250,\r\n            inRange: {\r\n                color: ['blue', 'green', 'yellow', 'red']\r\n            }\r\n        }\r\n    });\r\n}, 500);","html":"","externalScripts":"/dep/echarts/map/js/world.js","updaterUID":"bd-4043698537","theme":"","layout":"","viewCount":1137,"userName":"彩***5","commentCount":1,"starCount":4,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xioO7JcfJ.png?v=1576564539259","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-heatmap","tooltip","visualMap"],"customTags":[],"updaterUserName":"彩***5"}}