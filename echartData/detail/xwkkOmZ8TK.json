{"status":0,"data":{"cid":"xwkkOmZ8TK","authorUid":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","authorUserName":"宛***明","title":"像仪表盘的圆饼图","description":"","latestVersion":18,"alwaysLatest":1,"createTime":"2020-08-25T08:00:17.000Z","lastUpdateTime":"2020-08-25T08:00:17.000Z","auth":2,"uid":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":18,"parentVersion":17,"echartsVersion":"4.8.0","versionCreateTime":"2020-12-09T07:36:06.000Z","code":"let echartData = {\r\n    outer: [\r\n        {\r\n            value: 6,\r\n            name: '在线'\r\n        },\r\n        {\r\n            value: 1,\r\n            name: '离线'\r\n        },\r\n        {\r\n            value: 3,\r\n            name: '闲置'\r\n        },\r\n         {\r\n            value: 4,\r\n            name: '未知'\r\n        },\r\n        {\r\n            value: 4.9 // 这个需要计算总值的35%\r\n            // itemStyle: placeHolderStyle,\r\n        },\r\n    ]\r\n}\r\n\r\nlet valueObj = {\r\n    '在线': 6,\r\n    '离线': 1,\r\n    '闲置': 3,\r\n    '未知': 4\r\n}\r\n\r\n\r\n// 获取图例数据\r\nvar arrName = getArrayValue(echartData.outer , \"name\");\r\n\r\nfunction getArrayValue(array, key) {\r\n    key = key || \"value\";\r\n    var res = [];\r\n    if (array) {\r\n        array.forEach(function(t) {\r\n            res.push(t[key]);\r\n        });\r\n    }\r\n    return res;\r\n}\r\n\r\nfunction fontSize(res){ // 用来计算font-szie\r\n\r\n  let docEl = document.documentElement,\r\n\r\n    clientWidth = window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;\r\n\r\n  if (!clientWidth) return;\r\n\r\n  let fontSize = 2.5 * (clientWidth / 1920);\r\n\r\n  return res*fontSize;\r\n\r\n}\r\n\r\n\r\noption = {\r\n    backgroundColor: \"#ffffff\",\r\n     title: {\r\n         text: 14,\r\n         subtext: 'Total',\r\n         textStyle: {\r\n             color: '#2F396C',\r\n             fontSize: fontSize(32),\r\n         },\r\n         subtextStyle: {\r\n             fontSize: fontSize(25),\r\n             color: '#8494A7',\r\n         },\r\n        top: '48.5%',\r\n        left: \"49%\",\r\n        textAlign:'center',\r\n        textVerticalAlign: 'bottom'\r\n     },\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: function(params) {\r\n            if (params.name === '') return ''\r\n            return params.seriesName + '<br/>'\r\n            + params.name + ': ' +  params.value\r\n            + ' (' + (params.percent * 1.35).toFixed(2) + '%)'\r\n            // 乘以1.35是因为有35%用于留白，其实总数没有这么多\r\n        }\r\n        // formatter: \"{a} <br/>{b}: {c} ({d}%)\"\r\n    },\r\n    color: [new echarts.graphic.LinearGradient(1, 1, 0, 0, [{\r\n                offset: 0,\r\n                color: '#3ADA8A'\r\n            }, {\r\n                offset: 1,\r\n                color: '#26C5FE'\r\n            }])\r\n        , '#FF5B5C', '#FFA666', '#CCCCCC', 'rgba(0,0,0,0)'],\r\n    legend: { // 右侧注释\r\n        show: true,\r\n        top: \"center\",\r\n        left: '80%',\r\n        data: arrName,\r\n        itemWidth: 20,\r\n        itemHeight: 20,\r\n        padding: [0, 5],\r\n        itemGap: 25,\r\n        textStyle: {\r\n            color: '#b0b9cb'\r\n        },\r\n        formatter: function(name) {\r\n            return name + '    ' + valueObj[name]\r\n            // return \"{title|\" + name + \"}\\n{value|\" + (objData[name].value) + \"人}\"\r\n        },\r\n    },\r\n    series: [\r\n        {\r\n            name: '外环',\r\n            type: 'pie',\r\n            zlevel: 2,\r\n            radius: ['47%', '51%'],\r\n            center: [\"50%\", \"50%\"],\r\n            startAngle: 225,\r\n            data: echartData.outer,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: { // 此配置\r\n                normal: {\r\n                    borderWidth: 2,\r\n                    borderColor: '#fff',\r\n                }\r\n            },\r\n        },\r\n        { //中环半灰半白环\r\n            name: '中环半灰半白环',\r\n            type: 'pie',\r\n            zlevel: 2,\r\n            silent: true,\r\n            radius: ['30%', '47%'],\r\n            center: [\"50%\", \"50%\"],\r\n            hoverAnimation: false,\r\n            color: ['#F5F4F9', '#ffffff'],\r\n            startAngle: 225,\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle:{ // 画环形的边\r\n                show:false,\r\n                borderColor:'#F5F4F9',\r\n                borderWidth:2,\r\n            },\r\n            data: [100, 35]\r\n        },\r\n        { //中环内阴影环\r\n            name: '中环内阴影环',\r\n            type: 'pie',\r\n            zlevel: 1,\r\n            silent: true,\r\n            radius: ['30%', '31%'],\r\n            center: [\"50%\", \"50%\"],\r\n            hoverAnimation: false,\r\n            color: \"#ffffff\",\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: { // 此配置\r\n                // 设置扇形的阴影\r\n               normal: {\r\n                    // 设置扇形的阴影\r\n                    \r\n                    shadowBlur: 3,\r\n                    shadowColor: 'rgba(0,0,0,0.5)', \r\n                    shadowOffsetX: 0,\r\n                    shadowOffsetY: 3\r\n\r\n                }\r\n            },\r\n            data: [100]\r\n        },\r\n        { //内环用来带阴影的环\r\n            name: '内环阴影环',\r\n            type: 'pie',\r\n            zlevel: 1,\r\n            silent: true,\r\n            radius: ['24%', '25%'],\r\n            center: [\"50%\", \"50%\"],\r\n            hoverAnimation: false,\r\n            color: \"rgba(0,0,0,0)\",\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: { // 此配置\r\n                // 设置扇形的阴影\r\n               normal: {\r\n                    // 设置扇形的阴影\r\n                    \r\n                    shadowBlur: 3,\r\n                    shadowColor: 'rgba(0,0,0,0.5)', \r\n                    shadowOffsetX: 0,\r\n                    shadowOffsetY: 3\r\n\r\n                }\r\n            },\r\n            data: [100]\r\n        },\r\n        { // 用来遮挡内边阴影的白环\r\n            name: '内环阴遮挡',\r\n            type: 'pie',\r\n            zlevel: 1,\r\n            silent: true,\r\n            radius: ['20%', '24%'],\r\n            center: [\"50%\", \"50%\"],\r\n            hoverAnimation: false,\r\n            color: \"#ffffff\",\r\n            label: {\r\n                normal: {\r\n                    show: false\r\n                },\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    show: false\r\n                }\r\n            },\r\n            itemStyle: { // 此配置\r\n                color: \"#ffffff\" // 环设置成透明白色\r\n                // 设置扇形的阴影\r\n            },\r\n            data: [100]\r\n        },\r\n        // { // 内环装饰环\r\n        //     name: '内环阴遮挡',\r\n        //     type: 'pie',\r\n        //     zlevel: 2,\r\n        //     silent: true,\r\n        //     radius: ['21%', '22%'],\r\n        //     center: [\"40%\", \"50%\"],\r\n        //     hoverAnimation: false,\r\n        //     color: \"#F5F4F9\",\r\n        //     label: {\r\n        //         normal: {\r\n        //             show: false\r\n        //         },\r\n        //     },\r\n        //     labelLine: {\r\n        //         normal: {\r\n        //             show: false\r\n        //         }\r\n        //     },\r\n        //     data: [100]\r\n        // }\r\n    ]\r\n};","html":"","externalScripts":"","updaterUID":"obd-oCgtcCDoM0e8GoRh4L_yJRuMELFNd3J","theme":"","layout":"","viewCount":506,"userName":"宛***明","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xwkkOmZ8TK.png?v=1607499367053","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","title","tooltip"],"customTags":["pei"],"updaterUserName":"宛***明"}}