{"status":0,"data":{"cid":"xqK7p9_TVw","authorUid":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","authorUserName":"安***听","title":"普通渐变柱状图","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2021-03-31T02:52:21.000Z","lastUpdateTime":"2021-12-03T07:16:44.000Z","auth":2,"uid":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.9.0","versionCreateTime":"2021-12-03T07:16:44.000Z","code":"let barData = {\n    xaxis: [\"1月\",\"2月\",\"3月\",\"4月\",\"5月\",\"6月\",\"7月\",\"8月\"],\n    series: [{\n        name: \"金额\",\n        data: [90, 19,68, 98, 87, 20, 150, 62]\n    }],\n    legend: [\"金额\"],\n    unit: \"个\",\n    namePadding: [0, 10, 50, 0],\n    yName: \"数\",\n    legendShow: true,\n    legendX: \"right\",\n    xAxisTickHidden: false,\n    xLabelMargin: 25,\n    colorArr: [\n      {\n        start: \"#1B7AFF\",\n        end: \"#51D7FF\",\n      },\n      {\n        start: \"#FF6A18 \",\n        end: \"#FFBA93\",\n      },\n    ],\n    splitNumber: 3,\n    dataZoom: {\n      type: \"slider\",\n      show: false,\n      realtime: true,\n      startValue: 0,\n      endValue: 5,\n      filterMode: \"none\",\n    },\n    len: 5,\n    grid: {\n      left: \"122px\",\n      top: \"156px\",\n      right: \"5px\",\n      bottom: \"65px\",\n      containLabel: false,\n    },\n}\nlet normalColor = \"#ccc\";\n  let list = [];\n  let seriesData = barData.series.map((item, index) => {\n    list = [...list, ...item.data];\n    return {\n      name: item.name,\n      type: \"bar\", \n      barWidth: \"30px\",\n      itemStyle: {\n        normal: {\n          color: {\n            type: \"linear\",\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [\n              {\n                offset: 0,\n                color: barData.colorArr[index].start,\n              },\n              {\n                offset: 1,\n                color: barData.colorArr[index].end,\n              },\n            ],\n            globalCoord: false,\n          },\n        },\n      },\n      barGap: \"0px\",\n      data: item.data,\n    };\n  });\n  option = {\n    backgroundColor: '#0A2E5D',\n    legend: {\n      show: barData.legendShow,\n      x: barData.legendX,\n      y: \"top\",\n      icon: \"rect\",\n      selectedMode: false,\n      padding: [20, 0, 0, 0],\n      itemGap: 32,\n      itemWidth: 26,\n      itemHeight: 18,\n      textStyle: {\n        height: 30,\n        rich: {\n          a: {\n            color: normalColor,\n            fontSize: 36,\n            fontFamily: \"PingFangSC-Regular\",\n          },\n        },\n      },\n      formatter: (name) => {\n        return \"{a|\" + name + \" \" + \"}\";\n      },\n      data: barData.legend,\n    },\n\n    dataZoom: barData.dataZoom ? barData.dataZoom : [],\n    grid: barData.grid,\n    tooltip: {\n      textStyle: {\n        fontSize: 48,\n      },\n      trigger: \"axis\",\n      formatter: function (params) {\n        let str = \"\";\n        for (let i = 0; i < params.length; i++) {\n          if (\n            (!!params[i].value || params[i].value === 0) &&\n            params[i].seriesName !== \"\"\n          ) {\n            let unit = barData.unit;\n            str += params[i].seriesName + \": \" + params[i].value + unit + \"<br/>\";\n          } else if (params[i].seriesName !== \"\") {\n            str += params[i].seriesName + \": \" + \"无数据\" + \"<br/>\";\n          }\n        }\n        return str;\n      },\n    },\n    xAxis: [\n      {\n        type: \"category\",\n        data: barData.xaxis,\n        axisPointer: {\n          type: \"shadow\",\n        },\n        axisLabel: {\n          interval: 0,\n          margin: barData.xLabelMargin,\n          textStyle: {\n            fontFamily: \"PingFangSC-Regular\",\n            color: normalColor,\n            fontSize: 42,\n          },\n          formatter: function (value) {\n            var ret = \"\"; //拼接加\\n返回的类目项\n            var maxLength = 9; //每项显示文字个数\n            var valLength = value.length; //X轴类目项的文字个数\n            var rowN = Math.ceil(valLength / maxLength); //类目项需要换行的行数\n            if (rowN > 1) {\n              //如果类目项的文字大于5,\n              for (var i = 0; i < rowN; i++) {\n                var temp = \"\"; //每次截取的字符串\n                var start = i * maxLength; //开始截取的位置\n                var end = start + maxLength; //结束截取的位置\n                //这里也可以加一个是否是最后一行的判断，但是不加也没有影响，那就不加吧\n                temp = value.substring(start, end) + \"\\n\";\n                ret += temp; //凭借最终的字符串\n              }\n              return ret;\n            } else {\n              return value;\n            }\n          },\n        },\n\n        // axisLabel: {\n        //   interval: 0,\n        //   margin: barData.xLabelMargin,\n        //   textStyle: {\n        //     fontFamily: \"PingFangSC-Regular\",\n        //     color: normalColor,\n        //     fontSize: 42,\n        //   },\n        // },\n        axisLine: {\n          show: false,\n        },\n        axisTick: {\n          show: true,\n          length: 5,\n          alignWithLabel: true,\n          lineStyle: {\n            width: 2,\n            color: \"#CEF8FF\",\n          },\n        },\n        splitLine: {\n          show: false,\n        },\n      },\n    ],\n    yAxis: [\n      {\n        type: \"value\",\n        name: barData.yName,\n        splitNumber: barData.splitNumber,\n        nameTextStyle: {\n          fontFamily: \"PingFangSC-Regular\",\n          color: normalColor,\n          fontSize: 42,\n          align: \"right\",\n          padding: barData.namePadding,\n        },\n        axisLabel: {\n          formatter: \"{value}\",\n          align: \"right\",\n          textStyle: {\n            fontFamily: \"PingFangSC-Regular\",\n            color: normalColor,\n            fontSize: 42,\n          },\n        },\n        axisLine: {\n          show: false,\n        },\n        axisTick: {\n          show: true,\n          length: 5,\n          lineStyle: {\n            width: 2,\n            color: \"#CEF8FF\",\n          },\n        },\n        splitLine: {\n          show: false,\n        },\n      },\n    ],\n    series: seriesData,\n  };\n myChart.setOption(option);\nif (barData.dataZoom && !barData.noScroll) {\n    let startNumber = 0;\n    let start = new Date();\n    let duration = 2000;\n    let dataLen = barData.xaxis.length;\n    let animation = () => {\n      let time = new Date();\n      let timePassed = time - start;\n      if (timePassed >= duration) {\n        start = new Date();\n        if (startNumber === dataLen - barData.len) {\n          startNumber = 0;\n        }\n        myChart.dispatchAction({\n          type: \"dataZoom\",\n          startValue: startNumber,\n          endValue: startNumber + barData.len,\n        });\n        startNumber++;\n      }\n      this.rafId = requestAnimationFrame(animation);\n    };\n    animation();\n }","html":"","externalScripts":"","updaterUID":"obd-oMZ897aaM_c6bLXIWmPsGtDThCLj12j","theme":"","layout":"","viewCount":41,"userName":"安***听","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xqK7p9_TVw.png?v=1638515804452","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-bar","tooltip"],"customTags":[],"updaterUserName":"安***听"}}