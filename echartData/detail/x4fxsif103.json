{"status":0,"data":{"cid":"x4fxsif103","authorUid":"bd-1839720448","authorUserName":"哆***嗦","title":"多颜色切换动态圆角柱状图","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-04-13T09:15:30.000Z","lastUpdateTime":"2020-04-13T09:15:30.000Z","auth":2,"uid":"bd-1839720448","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.7.0","versionCreateTime":"2020-04-14T06:09:46.000Z","code":"// 颜色\r\nvar colorList = ['#73DDFF', '#73ACFF', '#FDD56A', '#FDB36A', '#FD866A', '#9E87FF', '#00FFFF','#CD5C5C','#F08080']\r\n\r\nfunction randomData() {\r\n    value = (Math.random() * 10+50).toFixed(1);\r\n    return value;\r\n    \r\n}\r\n// 时间设置\r\nfunction checkTime(i) {\r\n    if (i < 10) {\r\n        i = \"0\" + i;\r\n    }\r\n    return i;\r\n}\r\n\r\nfunction timeSet() {\r\n    var newTime = new Date();\r\n    var m = newTime.getMinutes();\r\n    var s = newTime.getSeconds();\r\n    m = checkTime(m);\r\n    s = checkTime(s);\r\n    return [m, s].join(':');\r\n}\r\n\r\nvar data = [];\r\nvar timeData = [];\r\n\r\nfor (var i = 0; i < 9; i++) {\r\n    timeData.unshift(timeSet());\r\n    data.unshift(randomData());\r\n} \r\n// 指定图表的配置项和数据\r\nvar option = {\r\n    tooltip: {\r\n        show: false\r\n    },\r\n    xAxis: {\r\n        type: 'category',\r\n        boundaryGap: false,\r\n        // boundaryGap: 100,\r\n        min: -1,\r\n        max: 9,\r\n        axisLine: {\r\n            show:false,\r\n            lineStyle: {\r\n                color: '#4bbbf8',\r\n                shadowColor: 'rgba(75, 211, 255, 0.5)',\r\n                shadowBlur: 5\r\n            }\r\n        },\r\n        axisTick: {\r\n            show:false,\r\n            interval: (index) => {\r\n                if (index === -1 || index === 9) {\r\n                    return false;\r\n                } else {\r\n                    return true;\r\n                }\r\n            }\r\n        },\r\n        axisLabel: {\r\n            \r\n            color: '#fff',\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        data: timeData,\r\n\r\n    },\r\n    yAxis: [{\r\n        max: 60,\r\n        min: 48,\r\n        show:false,\r\n        axisLine: {\r\n            show:false,\r\n            lineStyle: {\r\n                color: '#4bbbf8',\r\n                shadowColor: 'rgba(75, 211, 255, 0.5)',\r\n                shadowBlur: 5\r\n            }\r\n        },\r\n        axisLabel: {\r\n            color: '#fff',\r\n            fontSize: 12\r\n        },\r\n        splitLine: {\r\n            show:false,\r\n            lineStyle: {\r\n                color: 'rgba(75, 211, 255, 0.2)',\r\n                type: 'dashed'\r\n            }\r\n        }\r\n    }],\r\n    series: [{\r\n        name: '数量',\r\n        type: 'bar',\r\n        barCategoryGap: '10%',\r\n        // symbol: 'path://d=\"M150 0 L75 200 L225 200 Z\"',\r\n        label: {\r\n            show: true,\r\n            position: 'top',\r\n            color: '#1798ff',\r\n            fontSize: 14\r\n        },\r\n        itemStyle: {\r\n            barBorderRadius: [30, 30, 0, 0],\r\n            color: function(params){return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color:  colorList[params.dataIndex]// 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: colorList[params.dataIndex]+'00' // 100% 处的颜色\r\n                }], false)}\r\n        },\r\n        data: data\r\n    }],\r\n    // backgroundColor: \"#190c12\",\r\n};\r\n\r\nmyChart.setOption(option);\r\nvar key = 0;\r\nsetInterval(function() {\r\n\r\n    timeData.shift();\r\n    timeData.push(timeSet());\r\n\r\n    data.shift();\r\n    data.push(randomData());\r\n\r\n    // 颜色控制\r\n    if(key>8){key=0}\r\n    key++;\r\n\r\n    myChart.setOption({\r\n        xAxis: {\r\n            data: timeData\r\n        },\r\n        series: [{\r\n            itemStyle: {\r\n                normal: {\r\n                color: function(params){return new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                    offset: 0,\r\n                    color:  colorList[(params.dataIndex+key)%9]// 0% 处的颜色\r\n                }, {\r\n                    offset: 1,\r\n                    color: colorList[(params.dataIndex+key)%9]+'00' // 100% 处的颜色\r\n                }], false)}\r\n            }\r\n                // normal: {\r\n                //     color: function(params) {\r\n                //         console.log(params)\r\n                //     return colorList[(params.dataIndex+key)%9]\r\n                //     }\r\n                // }\r\n            },\r\n            data: data\r\n        }]\r\n    });\r\n}, 1000);","html":"","externalScripts":"","updaterUID":"bd-1839720448","theme":"","layout":"","viewCount":2449,"userName":"哆***嗦","commentCount":0,"starCount":13,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x4fxsif103.png?v=1586844587053","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar","tooltip"],"customTags":["动态","柱状图"],"updaterUserName":"哆***嗦"}}