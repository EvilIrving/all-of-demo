{"status":0,"data":{"cid":"xBnTKjJviZ","authorUid":"obd-ol0ppFjT8njU0Z10cQZkRTeT-WhFh0T","authorUserName":"m***i","title":"嵌套联动饼图","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-05-02T02:52:23.000Z","lastUpdateTime":"2020-05-02T02:52:23.000Z","auth":2,"uid":"obd-ol0ppFjT8njU0Z10cQZkRTeT-WhFh0T","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.7.0","versionCreateTime":"2020-05-02T02:53:08.000Z","code":"//  荷叶数据\r\nvar dis = ['****1', '****2', '**3', '****4'];\r\nvar disdata =[186, 90, 755, 0.38];\r\nvar color = ['#FFA881', '#469AF0', '#8D82F3', '#83A6FE', '#1EBABC',\r\n'#82E3A2', '#F5BE5C','#74FFFB', '#FFA881', '#469AF0', '#8D82F3',\r\n'#83A6FE', '#1EBABC', '#82E3A2', '#F5BE5C','#70AD47','#6BAA41',\r\n'#17b6d3', '#0090ba', '#0084e9', '#0841bc','#5e62ff', '#a48bff', '#5ebbef'];\r\nvar color1 = ['#9DC3E6','#4271C4','#EC7422','#C6E3B4'];\r\n// 环形种类\r\nvar pa = [['******有限公司', \r\n'*******有限公司'],\r\n['*******有限公司***分公司', \r\n'********服务有限公司**分公司', \r\n'*******有限公司**分公司',\r\n'*******有限公司**分公司', \r\n'*******有限公司*分公司',\r\n'*******有限公司',\r\n'*******有限公司**分公司',\r\n'*******有限公司',\r\n'*******有限公司**分公司',\r\n'*******有限公司',\r\n'*******有限公司**分公司',\r\n'*******有限公司**分公司',\r\n'*******有限公司',\r\n'*******有限公司**分公司',\r\n'*******有限公司',\r\n'*******有限公司',\r\n'*******有限公司',\r\n'*******有限公司****分公司'],\r\n['***'],\r\n['***', '*琳', '*阳', '*雪', '*炜']];\r\n//  环形图数据\r\nvar data = [\r\n    [106, 0.04],\r\n    [0.54,0.02,0.01,0.05,0.25,0.16,\r\n    30.4,0.98,1.8,3.2,0.11,0.01,-5,0.04,\r\n    0.09,56.1,1.56,0.01],\r\n    [214],\r\n    [214, 15, 164, 34, 62]\r\n]\r\n// dat荷叶数据的组装\r\nvar dat = [];\r\nfor (var i = 0; i < dis.length; i++) {\r\n    var da = {};\r\n    da.value = disdata[i];\r\n    da.id = i;\r\n    da.name = dis[i];\r\n    da.selected = false;\r\n    da.itemStyle = {\r\n        color: color1[i],\r\n        borderColor: '#fff',\r\n    }\r\n    da.emphasis = {\r\n        itemStyle: {\r\n            borderColor: '#fff',\r\n        }\r\n    }\r\n    dat.push(da);\r\n}\r\ndat[0]['selected'] = false\r\n//  ser环形数据的组装\r\nvar ser = [];\r\nvar sers;\r\nfor (var i = 0; i < dis.length; i++) {\r\n    sers = {};\r\n    sers.value = data[0][i]\r\n    sers.name = pa[0][i]\r\n    sers.itemStyle = {\r\n        color: color[i]\r\n    }\r\n    ser.push(sers);\r\n};\r\nvar option = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n    },\r\n    legend: {\r\n        show: true,\r\n        orient: 'vertical',\r\n        top: '10%',\r\n        left: '10%',\r\n        data: dat,\r\n        textStyle: {\r\n          color: '#000'\r\n        }\r\n      },\r\n    series: [{\r\n            type: 'pie',\r\n            selectedMode: 'single',\r\n            center: ['56%', '50%'],\r\n            radius: [0, '30%'],\r\n            label: {\r\n                normal: {\r\n                    position: 'inner'\r\n                }\r\n            },\r\n            itemStyle: {\r\n            normal: {\r\n              // 设置扇形的阴影\r\n              shadowBlur: 10,\r\n              shadowColor: '#666'\r\n\r\n               }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: '#000'\r\n                    }\r\n                }\r\n            },\r\n            data: dat\r\n        },\r\n        {\r\n            type: 'pie',\r\n            center: ['56%', '50%'],\r\n            radius: ['40%', '55%'],\r\n            data: ser,\r\n            label: {\r\n                color: '#000',\r\n                formatter: function(params) {\r\n                    return params.name\r\n                }\r\n            },\r\n            labelLine: {\r\n                normal: {\r\n                    lineStyle: {\r\n                        color: '#000'\r\n                    }\r\n                }\r\n            },\r\n\r\n        }\r\n    ]\r\n};\r\nmyChart.setOption(option);\r\n//  点击荷叶事件\r\nmyChart.on('click', function(params) {\r\n    for (var j = 0; j < dis.length; j++) {\r\n        dat[j].selected = false;\r\n    }\r\n    params.data.selected = true;\r\n    var id = params.data.id\r\n    var ser = [];\r\n    var sers;\r\n    /*k是循环颜色的变量*/\r\n    k = 0;\r\n    for (var i = 0; i < pa[params.data.id].length; i++) {\r\n        sers = {};\r\n        sers.value = data[id][i]\r\n        sers.name = pa[params.data.id][i]\r\n        sers.itemStyle = {\r\n            color: color[i]\r\n        }\r\n        ser.push(sers);\r\n    }\r\n    option.series[1].data = ser;\r\n    myChart.setOption(option)\r\n});","html":"","externalScripts":"","updaterUID":"obd-ol0ppFjT8njU0Z10cQZkRTeT-WhFh0T","theme":"","layout":"","viewCount":266,"userName":"m***i","commentCount":0,"starCount":3,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xBnTKjJviZ.png?v=1588387988209","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"m***i"}}