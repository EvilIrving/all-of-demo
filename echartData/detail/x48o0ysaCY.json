{"status":0,"data":{"cid":"x48o0ysaCY","authorUid":"bd-1006967428","authorUserName":"w***7","title":"地图tooltip轮播","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-07-03T06:23:15.000Z","lastUpdateTime":"2020-07-03T06:23:15.000Z","auth":2,"uid":"bd-1006967428","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.8.0","versionCreateTime":"2020-07-03T06:23:15.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1592366734603-Z-iQwIHJk.json\";\nvar center = {\n    \"南京市\":[118.767413,32.041544],\n    \"无锡市\":[120.301663,31.574729],\n    \"徐州市\":[117.184811,34.261792],\n    \"常州市\":[119.946973,31.772752],\n    \"苏州市\":[120.619585,31.299379],\n    \"南通市\":[120.864608,32.016212],\n    \"连云港市\":[119.178821,34.600018],\n    \"淮安市\":[119.021265,33.597506],\n    \"盐城市\":[120.139998,33.377631],\n    \"扬州市\":[119.421003,32.393159],\n    \"镇江市\":[119.452753,32.204402],\n    \"泰州市\":[119.915176,32.484882],\n    \"宿迁市\":[118.275162,33.963008]}\nvar option = null;\n$.get(uploadedDataURL, function(json) {\n    echarts.registerMap('js', json);\n    option = {\n        visualMap: {\n            show: false,\n            max: 100,\n            seriesIndex: [3],\n            inRange: {\n                color: ['#A5DCF4', '#006edd']\n            }\n        },\n        geo: [{\n            map: 'js',\n            roam: false, //是否允许缩放\n            zoom: 1.1, //默认显示级别\n            scaleLimit: {\n                min: 0,\n                max: 3\n            }, //缩放级别\n            itemStyle: {\n                normal: {\n                    areaColor: '#013C62',\n                    shadowColor: '#013C62',\n                    shadowBlur: 20,\n                    shadowOffsetX: -5,\n                    shadowOffsetY: 15,\n                }\n            },\n            tooltip: {\n                show: false\n            }\n        }],\n        series: [{\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                z: 5,\n                data: [],\n                symbolSize: 14,\n                label: {\n                    normal: {\n                        show: true,\n                        formatter: function(params) {\n                            return '{fline|地点：'+ params.data.city +'}\\n{tline|'+ (params.data.info || '发生xx集件') +'}';\n                        },\n                        position: 'top',\n                        backgroundColor: 'rgba(254,174,33,.8)',\n                        padding: [0, 0],\n                        borderRadius: 3,\n                        lineHeight: 32,\n                        color: '#f7fafb',\n                        rich: {\n                            fline: {\n                                padding: [0, 10, 10, 10],\n                                color: '#ffffff'\n                            },\n                            tline: {\n                                padding: [10, 10, 0, 10],\n                                color: '#ffffff'\n                            }\n                        }\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    color: '#feae21',\n                }\n            },\n            {\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                z: 5,\n                data: [],\n                symbolSize: 14,\n                label: {\n                    normal: {\n                        show: true,\n                        formatter: function(params) {\n                            return '{fline|地点：'+ params.data.city +'}\\n{tline|'+ (params.data.info || '发生xx集件') +'}';\n                        },\n                        position: 'top',\n                        backgroundColor: 'rgba(233,63,66,.9)',\n                        padding: [0, 0],\n                        borderRadius: 3,\n                        lineHeight: 32,\n                        color: '#ffffff',\n                        rich: {\n                            fline: {\n                                padding: [0, 10, 10, 10],\n                                color: '#ffffff'\n                            },\n                            tline: {\n                                padding: [10, 10, 0, 10],\n                                color: '#ffffff'\n                            }\n                        }\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    color: '#e93f42',\n                }\n            },\n            {\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                z: 5,\n                data: [],\n                symbolSize: 14,\n                label: {\n                    normal: {\n                        show: true,\n                        formatter: function(params) {\n                            return '{fline|地点：'+ params.data.city +'}\\n{tline|'+ (params.data.info || '发生xx集件') +'}';\n                        },\n                        position: 'top',\n                        backgroundColor: 'rgba(8,186,236,.9)',\n                        padding: [0, 0],\n                        borderRadius: 3,\n                        lineHeight: 32,\n                        color: '#ffffff',\n                        rich: {\n                            fline: {\n                                padding: [0, 10, 10, 10],\n                                color: '#ffffff'\n                            },\n                            tline: {\n                                padding: [10, 10, 0, 10],\n                                color: '#ffffff'\n                            }\n                        }\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    color: '#08baec',\n                }\n            },\n            //地图\n            {\n                type: 'map',\n                mapType: 'js',\n                geoIndex: -1,\n                zoom: 1.1, //默认显示级别\n                label: {\n                    show: true,\n                    color: '#ffffff',\n                    emphasis: {\n                        color: 'white',\n                        show: false\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        borderColor: '#2980b9',\n                        borderWidth: 1,\n                        areaColor: '#12235c'\n                    },\n                    emphasis: {\n                        areaColor: '#FA8C16',\n                        borderWidth: 0,\n                        color: 'green'\n                    }\n                },\n                data: Object.keys(center).map(name => {return {\n                    name: name,\n                    value: Math.random()*100\n                }})\n            }\n        ]\n    };\n    myChart.setOption(option);\n});\nvar timer = setInterval(() => {\n    //数据情况重绘，清除formatter移动效果，也可根据自身需求是否需要，删除这两行代码\n    /*option.series[seriesjson[runidx].createType-1].data = [];\n    myChart.setOption(option, true);*/\n    for(var i=0; i<3; i++){\n        option.series[i].data = [];\n    }\n    var cityIndex = Math.floor(Math.random() * 13);\n    var runidx = Math.floor(Math.random() * 3);\n    var coordCity = Object.keys(center)[cityIndex];\n    var coord = center[coordCity];\n    option.series[runidx].data = [{\n        city: coordCity,\n        value: coord\n    }];\n    // console.log(option.series[runidx].data)\n    // option.series[4].data = option.series[4].data.sort(function(a,b){\n    //     return b.value-a.value;\n    // });\n    myChart.setOption(option, true);\n}, Math.floor(Math.random() * 10000) + 3000);","html":"","externalScripts":"https://d3js.org/d3.v4.min.js","updaterUID":"bd-1006967428","theme":"","layout":"","viewCount":31858,"userName":"w***7","commentCount":4,"starCount":84,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x48o0ysaCY.png?v=1593757395253","isCustomThumbnail":0,"builtinTags":["category-work","geo","series-effectScatter","series-map","visualMap"],"customTags":[],"updaterUserName":"w***7"}}