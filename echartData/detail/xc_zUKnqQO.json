{"status":0,"data":{"cid":"xc_zUKnqQO","authorUid":"bd-3342206826","authorUserName":"小***琪","title":"柱形图排名","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2020-03-26T07:37:04.000Z","lastUpdateTime":"2020-03-26T07:37:04.000Z","auth":2,"uid":"bd-3342206826","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.7.0","versionCreateTime":"2020-03-26T07:37:39.000Z","code":"const hexToRgba = (hex, opacity) => {\n    let rgbaColor = \"\";\n    let reg = /^#[\\da-f]{6}$/i;\n    if (reg.test(hex)) {\n        rgbaColor = `rgba(${parseInt(\"0x\" + hex.slice(1, 3))},${parseInt(\n      \"0x\" + hex.slice(3, 5)\n    )},${parseInt(\"0x\" + hex.slice(5, 7))},${opacity})`;\n    }\n    return rgbaColor;\n};\n\n// 数据整理\nlet xData = ['类别1', '类别2', '类别3', '类别4', '类别5', '类别6', '类别7', '类别8'];\nlet yData = [4757, 3254, 2454, 2011, 1654, 1211, 1211, 254];\nlet max = Math.max(...yData);\nlet labelColor = ['#FD5360', '#FF962B', '#FFAA00']\nlet emptyData = yData.map((v, i) => {\n    let color = i > 2 ? '#1890FF' : labelColor[i];\n    let item = {\n        value: max,\n        label: {\n            formatter: '{a|' + v + '}',\n            position: 'right',\n            distance: 20,\n            rich: {\n                a: {\n                    color: color,\n                    borderColor: color,\n                    borderWidth: 1,\n                    borderType: 'dashed',\n                    padding: [0, 0, 2, 0],\n                    width: 60,\n                    height: 18,\n                    align: 'center',\n                    verticalAlign: 'middle',\n                    backgroundColor: hexToRgba(color, 0.05)\n                }\n            }\n\n        }\n    }\n    return item\n})\nlet xDataFormat = xData.map((v, i) => {\n    let color = i > 2 ? '#333333' : labelColor[i];\n    let item = {\n        value: v,\n        textStyle: {\n            rich: {\n                a: {\n                    color: color,\n                    width: 20,\n                    height: 20,\n                    align: 'center',\n                    verticalAlign: 'middle',\n                    backgroundColor: '#fff',\n                    borderRadius: 10,\n                    borderColor: hexToRgba(color, 0.2),\n                    borderWidth: 1,\n                    shadowColor: hexToRgba(color, 0.1),\n                    shadowBlur: 5\n                },\n                b: {\n                    padding: [0, 5]\n                },\n                value: {\n                    color: '#666666'\n                }\n            }\n        }\n    }\n    return item\n})\nxData.reverse();\nxDataFormat.reverse();\nyData.reverse();\nemptyData.reverse();\n\n\noption = {\n    backgroundColor: '#fff',\n    grid: {\n        top: \"5%\",\n        left: \"1%\",\n        right: \"15%\",\n        bottom: \"3%\",\n        containLabel: true\n    },\n    xAxis: [{\n        type: \"value\",\n        splitLine: {\n            show: false\n        },\n        max: function(value) {\n            return value.max\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#D9D9D9'\n            }\n        },\n        axisLabel: {\n            color: '#666'\n        }\n    }],\n    yAxis: [{\n        type: \"category\",\n        name: \"\",\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#D9D9D9'\n            }\n        },\n        axisLabel: {\n            formatter: function(value) {\n                return '{a|' + value.substr(value.length - 1) + '}{b|}{value|' + value + '}'\n            }\n        },\n        data: xDataFormat\n    }, {\n        type: \"category\",\n        name: \"\",\n        axisTick: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        },\n        axisLabel: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        data: xData\n    }],\n    series: [{\n            type: 'bar',\n            barWidth: 10,\n            yAxisIndex: 1,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [0, 6, 6, 0],\n                    color: 'rgba(225,225,225,0.4)'\n                }\n            },\n            label: {\n                show: true,\n                position: 'right',\n                formatter: function(a) {\n                    console.log(a)\n                }\n            },\n            data: emptyData\n        },\n        {\n            type: 'bar',\n            barWidth: 10,\n            zlevel: 1,\n            itemStyle: {\n                normal: {\n                    barBorderRadius: [0, 6, 6, 0],\n                    color: new echarts.graphic.LinearGradient(0, 0, 1, 1, [{\n                        offset: 0,\n                        color: '#3D9FFF'\n                    }, {\n                        offset: 1,\n                        color: '#41D7F3'\n                    }], false)\n                }\n            },\n            data: yData\n        }\n    ]\n};","html":"","externalScripts":"","updaterUID":"bd-3342206826","theme":"","layout":"","viewCount":5742,"userName":"小***琪","commentCount":0,"starCount":31,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xc_zUKnqQO.png?v=1585208260087","isCustomThumbnail":0,"builtinTags":["category-work","grid","series-bar"],"customTags":[],"updaterUserName":"小***琪"}}