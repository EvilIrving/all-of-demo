{"status":0,"data":{"cid":"xrJqwYvUnx","authorUid":"bd-1762150643","authorUserName":"踢***帅","title":"hdfs资源使用情况","description":"hdfs资源使用情况\n柱状堆叠图+折线图","latestVersion":8,"alwaysLatest":1,"createTime":"2017-03-27T10:28:50.000Z","lastUpdateTime":"2017-03-27T10:28:50.000Z","auth":2,"uid":"bd-1762150643","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":8,"parentVersion":7,"echartsVersion":"3.5.1","versionCreateTime":"2017-03-28T01:37:41.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1490602888744-Bkb5iBU3g.png\";\r\n\r\n\r\nvar hdfs_stack_bar_data = {\r\n    \"namelist\": [\"3G4G固网日志\", \"上网轨迹\", \"数据源\", \"标签\", \"大数据实验室\", \"BML\", \"storm\", \"NOC智能网管\", \"无线CDR话单\", \"其他 \"],\r\n    \"dataArr_bar\": {\r\n        \"3G4G固网日志\": [883.97, 896.18, 906.39, 922.20, 929.44, 941.16, 951.90],\r\n        \"上网轨迹\": [53.54, 53.65, 53.70, 53.77, 53.84, 53.90, 53.97],\r\n        \"数据源\": [698.59, 696.31, 696.40, 696.58, 699.57, 702.37, 701.41],\r\n        \"标签\": [535.76, 536.07, 536.96, 538.39, 539.12, 539.96, 539.17],\r\n        \"大数据实验室\": [10.46, 10.46, 10.46, 10.46, 10.46, 10.46, 10.46],\r\n        \"BML\": [204.81, 204.41, 204.46, 204.87, 204.68, 204.77, 203.29],\r\n        \"storm\": [0.04, 0.04, 0.04, 0.04, 0.04, 0.04, 0.04],\r\n        \"NOC智能网管\": [95.09, 96.51, 97.62, 99.46, 101.27, 102.01, 102.58],\r\n        \"无线CDR话单\": [4.04, 4.04, 4.04, 4.04, 4.04, 4.04, 4.06],\r\n        \"其他\": [301.53, 307.28, 308.99, 311.60, 316.25, 317.57, 319.98]\r\n    },\r\n    \"dataArr_line\": {\r\n        \"3G4G固网日志\": [1.15, 1.38, 1.13, 1.74, 0.78, 1.26, 1.14],\r\n        \"上网轨迹\": [0.1, 0.20, 0.10, 0.12, 0.12, 0.12, 0.12],\r\n        \"数据源\": [0.01, -0.320, 0.01, 0.02, 0.42, 0.40, -0.13],\r\n        \"标签\": [0.05, 0.05, 0.16, 0.26, 0.13, 0.15, -0.14],\r\n        \"大数据实验室\": [0, 0, 0, 0, 0, 0, 0],\r\n        \"BML\": [0.06, -0.19, 0.02, 0.19, -0.09, 0.04, -0.72],\r\n        \"storm\": [0, 0, 0, 0, 0, 0, 0],\r\n        \"NOC智能网管\": [0.62, 1.49, 1.14, 1.88, 1.81, 0.72, 0.55],\r\n        \"无线CDR话单\": [0, 0, 0, 0, 0, 0, 0],\r\n        \"其他\": [0.00, 0.64, 0.85, 0.78, 1.93, 0.72, 1.19]\r\n    }\r\n};\r\nvar x_line = [\"2017-03-10\", \"2017-03-11\", \"2017-03-12\", \"2017-03-13\", \"2017-03-14\", \"2017-03-15\", \"2017-03-16\"];\r\nvar colorConsArr_hdfs = [\"#ffca67\", \"#ff60a2\", \"#bf64ff\", \"#6c65fb\", \"#93dffc\", \"#fb915f\", \"#4fc277\", \"#3e94fe\", \"#ff9cc5\", \"#c46100\", \"#9de369\"];\r\nvar option = {\r\n    animation: false,\r\n    backgroundColor: 'rgba(7,14,28,1)', //设置背景色\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n        },\r\n        backgroundColor: 'rgba(7,14,28,0.9)',\r\n        // position: function(point, params, dom) {\r\n        //     // 固定在顶部\r\n        //     return [point[0], '10%'];\r\n        // },\r\n        formatter:function(value,index){\r\n            var tooltip='';\r\n            var contentsDiv=\"\";\r\n            var barSum=0,lineSum=0;\r\n            for(var i=0;i<value.length;i++){\r\n            \tif(i%2===0){\r\n            \t\tvar barValue,lineValue;\r\n            \t\tvalue[i].hasOwnProperty(\"value\")?barValue=value[i].value:barValue=\"暂无数据\";\r\n            \t\tvalue[i+1].hasOwnProperty(\"value\")?lineValue=value[i+1].value:lineValue=\"暂无数据\";\r\n            \t    barValue.toString().indexOf(\"暂无数据\")<0?barSum+=~~barValue:barSum+=0;\r\n            \t\tlineValue.toString().indexOf(\"暂无数据\")<0?lineSum+=~~lineValue:lineSum+=0;\r\n            \t\tcontentsDiv+=\"<div style='width:270px;height:13px;padding:5px 10px 6px 10px;font-size:14px;color:\"+value[i].color+\"'>\"+\"<span style='display:inline-block;margin-bottom:5px;width:12px;height:12px;border-radius:6px;background:\"+value[i].color+\"'>\"+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:95px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+value[i].seriesName+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:45px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+barValue+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:85px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+\"增长率\"+lineValue+\"</span>\"+\"</div>\";\r\n            \t}\r\n            }\r\n        \tcontentsDiv+=\"<div style='width:270px;height:13px;padding:5px 10px 6px 10px;font-size:14px;color:#6c65fb'>\"+\"<span style='display:inline-block;margin-bottom:5px;width:12px;height:12px;border-radius:6px;background:url(/asset/get/s/data-1490602888744-Bkb5iBU3g.png) no-repeat center center'>\"+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:95px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+\"增长率\"+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:45px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+barSum+\"</span>\"+\"<span style='display:inline-block;padding:0 5px 0 5px;width:85px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+\"增长率\"+lineSum+\"</span>\"+\"</div>\";\r\n            tooltip=\"<div style='width:290px;height:100%;border-radius:8px;padding 10px 5px 10px 5px;margin-bottom:15px;'>\"+\"<span style='display:block;padding:16px 10px 0 10px;font-size:14px;font-weight:700;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;'>\"+value[0].axisValue+\"资源使用情况\"+\"</span>\"+contentsDiv+\"<span style='display:block'>\"+\"</div>\";\r\n            return tooltip;\r\n            \r\n        }\r\n    },\r\n    grid: {\r\n        left: '3%',\r\n        right: '1%',\r\n        bottom: '3%',\r\n        top: \"17%\",\r\n        containLabel: true,\r\n        borderColor: '#1d203b'\r\n    },\r\n    legend: {\r\n        itemGap: 14,\r\n        right: '16%',\r\n        top: '2%',\r\n        //padding:[40,10,0,10],\r\n        data: [] //ToDo\r\n    },\r\n    xAxis: [{\r\n        type: 'category',\r\n        boundaryGap: true,\r\n        data: x_line,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        //坐标轴刻度标签\r\n        axisLabel: {\r\n            textStyle: {\r\n                color: \"#454e72\"\r\n            },\r\n            formatter: function(value, index) {\r\n                var xName = value.substring(value.indexOf(\"-\") + 1);\r\n                return xName.replace(/-/g, \".\");\r\n            },\r\n            margin: 20\r\n        },\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: \"#1d203b\"\r\n            }\r\n        },\r\n\r\n    }],\r\n    yAxis: [{\r\n        name: '单位（T）',\r\n        nameGap:20,\r\n        nameTextStyle:{\r\n            color:'#454e72',\r\n            fontSize: 12,\r\n            },\r\n        type: 'value',\r\n        nameGap: 15,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        scale: true,\r\n        axisLabel: {\r\n            // formatter: function(value, idx) {\r\n            //     if (idx === 0) {\r\n            //         return value + \"T\";\r\n            //     } else {\r\n            //         return value;\r\n            //     }\r\n            // },\r\n            textStyle: {\r\n                color: '#454e72'\r\n            },\r\n            margin: 20\r\n        },\r\n        boundaryGap: [0.2, 0.2],\r\n        splitLine: {\r\n            lineStyle: {\r\n                color: [\"#1d203b\"]\r\n            }\r\n        }\r\n    }, {\r\n        name: '单位（%）',\r\n        nameGap:20,\r\n        nameTextStyle:{\r\n            color:'#454e72',\r\n            fontSize: 12,\r\n            },\r\n        type: 'value',\r\n        nameGap: 15,\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        scale: true,\r\n        axisLabel: {\r\n            // formatter: function(value, idx) {\r\n            //     if (idx === 0) {\r\n            //         return value + \"%\";\r\n            //     } else {\r\n            //         return value;\r\n            //     }\r\n            // },\r\n            textStyle: {\r\n                color: '#454e72'\r\n            },\r\n            margin: 20\r\n        },\r\n        splitLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: [\"#1d203b\"]\r\n            }\r\n        },\r\n        boundaryGap: [0.2, 0.2]\r\n    }],\r\n    series: []\r\n};\r\nfor (var i = 0; i < hdfs_stack_bar_data[\"namelist\"].length + 1; i++) {\r\n    var namelist = hdfs_stack_bar_data[\"namelist\"];\r\n    var series = [];\r\n    if (i < hdfs_stack_bar_data[\"namelist\"].length) {\r\n        option.series.push({\r\n            name: namelist[i],\r\n            type: 'bar',\r\n            stack: '广告',\r\n            barWidth: \"50%\",\r\n            data: hdfs_stack_bar_data['dataArr_bar'][namelist[i]],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: colorConsArr_hdfs[i]\r\n                }\r\n            }\r\n        });\r\n        option.series.push({\r\n            name: namelist[i],\r\n            type: 'line',\r\n            yAxisIndex: 1,\r\n            data: hdfs_stack_bar_data['dataArr_line'][namelist[i]],\r\n            symbol: 'none',\r\n            smooth: true,\r\n            lineStyle: {\r\n                normal: {\r\n                    barBorderRadius: 0,\r\n                    width: 2.5, //连线粗细\r\n                    color: colorConsArr_hdfs[i] //连线颜色\r\n                }\r\n            },\r\n        });\r\n        option.legend.data.push({\r\n            name: namelist[i],\r\n            icon: \"circle\",\r\n            textStyle: {\r\n                color: []\r\n            }\r\n        });\r\n    } else {\r\n        option.series.push({\r\n            name: \"增长率\",\r\n            type: 'bar',\r\n            stack: '广告',\r\n            barWidth: \"52%\",\r\n            data: [],\r\n        });\r\n        option.series.push({\r\n            name: \"增长率\",\r\n            type: 'line',\r\n            yAxisIndex: 1,\r\n            data: [],\r\n            symbol: 'none',\r\n        });\r\n        option.legend.data.push({\r\n            name: \"增长率\",\r\n            icon:'image:///asset/get/s/data-1490602888744-Bkb5iBU3g.png',\r\n            selectedMode:false,\r\n            textStyle: {\r\n                color: '#6c65fb',\r\n                fontSize:14,\r\n                \r\n            }\r\n        });\r\n    }\r\n\r\n};\r\n\r\nmyChart.setOption(option);","html":"","externalScripts":"","updaterUID":"bd-1762150643","theme":"","layout":"","viewCount":4236,"userName":"踢***帅","commentCount":2,"starCount":8,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrJqwYvUnx.png?v=1490665061826","isCustomThumbnail":0,"builtinTags":["axisPointer","category-work","grid","legend","series-bar","series-line","tooltip"],"customTags":["bar","line","tooltip"],"updaterUserName":"踢***帅"}}