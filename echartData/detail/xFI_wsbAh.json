{"status":0,"data":{"cid":"xFI_wsbAh","authorUid":"bd-1627449234","authorUserName":"l***w","title":"疫情输入型传播","description":"","latestVersion":5,"alwaysLatest":1,"createTime":"2020-02-27T03:08:15.000Z","lastUpdateTime":"2020-02-27T03:08:15.000Z","auth":2,"uid":"bd-1627449234","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":5,"parentVersion":4,"echartsVersion":"4.4.0","versionCreateTime":"2020-02-27T13:50:20.000Z","code":"var allData = {\r\n    \"citys\": [\r\n        {\"name\": \"女子监狱\"},{\"name\": \"女子监狱文本\"},\r\n        {\"name\": \"十里丰监狱\"},{\"name\": \"十里丰监狱文本\"},\r\n        {\"name\": \"任城监狱\"},{\"name\": \"任城监狱文本\"},\r\n        {\"name\": \"沙洋汉津监狱\"},{\"name\": \"沙洋汉津监狱文本\"},\r\n        {\"name\": \"焦作\"},{\"name\":\"焦作文本\"},\r\n        {\"name\": \"商丘\"},{\"name\":\"商丘文本\"}\r\n    ],\r\n    \"henanLines\":[\r\n        {\"name\":\"焦作\",\"value\":\"目前，韩国政府已将疫情预警上调至最高级别的“严重”，并实施关于集体活动、利用公共设施的指南修订案，建议民众暂停聚集在室内或是在人群密集的户外举行活动，也尽量避免聚餐、旅游等私人聚会和活动。\",\"coords\": [[113.24, 35.22],[116.25, 38.08]]}, \r\n        {\"name\":\"商丘\",\"value\":\"目前，韩国政府已将疫情预警上调至最高级别的“严重”，并实施关于集体活动、利用公共设施的指南修订案，建议民众暂停聚集在室内或是在人群密集的户外举行活动，也尽量避免聚餐、旅游等私人聚会和活动。人群密集的户外举行活动，也尽量避免聚餐、旅游等私人聚会和活动。\",\"coords\": [[115.66, 34.42],[128.66, 34.42]]}, \r\n        ],\r\n    \"otherLines\": [\r\n        {\"name\":\"女子监狱\",\"value\":\"女子监狱文本\",\"fromName\": \"女子监狱\",\"toName\": \"女子监狱文本\",\"coords\": [[114.25, 30.08],[124.59, 30.08]]}, \r\n        {\"name\":\"十里丰监狱\",\"value\":\"十里丰监狱\\n文本\",\"fromName\": \"十里丰监狱\",\"toName\": \"十里丰监狱文本\",\"coords\": [[119.06, 29.09],[128.59,29.09]]}, \r\n        {\"name\":\"任城监狱\",\"value\":\"任城监狱文本\",\"fromName\": \"任城监狱\",\"toName\": \"任城监狱文本\",\"coords\": [[116.59, 35.55],[121.59, 35.55]]}, \r\n        {\"name\":\"沙洋汉津监狱\",\"value\":\"沙洋汉津监狱文本\",\"fromName\": \"沙洋汉津监狱\",\"toName\": \"沙洋汉津监狱文本\",\"coords\": [[112.59, 30.71],[121.59, 30.71]]}, \r\n        ]\r\n};\r\n\r\n\r\nvar geoCoordMap = {\r\n    \"女子监狱\": [114.25, 30.08],\r\n    \"沙洋汉津监狱\": [112.59, 30.71],\r\n    \"商丘\": [115.66, 34.42],\r\n    \"焦作\": [113.24, 35.22],\r\n    \"任城监狱\": [116.59, 35.55],\r\n    \"十里丰监狱\": [119.06, 29.09],\r\n};\r\n\r\nvar data = [{\r\n        name: \"女子监狱\",\r\n        value: 200\r\n    },\r\n    {\r\n        name: \"沙洋汉津监狱\",\r\n        value: 200\r\n    },\r\n    {\r\n        name: \"商丘\",\r\n        value: 200\r\n    },\r\n    {\r\n        name: \"焦作\",\r\n        value: 200\r\n    },\r\n    {\r\n        name: \"任城监狱\",\r\n        value: 200\r\n    },\r\n    {\r\n        name: \"十里丰监狱\",\r\n        value: 200\r\n    }\r\n];\r\n\r\nvar convertData = function(data) {\r\n    var res = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        var geoCoord = geoCoordMap[data[i].name];\r\n        if (geoCoord) {\r\n            res.push({\r\n                name: data[i].name,\r\n                value: geoCoord.concat(data[i].value)\r\n            });\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nvar convertedData = [\r\n    convertData(data),\r\n    convertData(data.sort(function(a, b) {\r\n        return b.value - a.value;\r\n    }).slice(0, 6))\r\n];\r\n\r\n\r\noption = {\r\n    backgroundColor: '#404a59',\r\n    animation: true,\r\n    animationDuration: 1000,\r\n    animationEasing: 'cubicInOut',\r\n    animationDurationUpdate: 1000,\r\n    animationEasingUpdate: 'cubicInOut',\r\n    title: [{\r\n            text: '疫情输入型传播',\r\n            //subtext: 'data from PM25.in',\r\n            //sublink: 'http://www.pm25.in',\r\n            top: 20,\r\n            left: 'center',\r\n            fontSize: 20,\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        {\r\n            id: 'statistic',\r\n            right: 120,\r\n            top: 40,\r\n            width: 100,\r\n            textStyle: {\r\n                color: '#fff',\r\n                fontSize: 16\r\n            }\r\n        }\r\n    ],\r\n    /*toolbox: {                           //工具板块\r\n        iconStyle: {\r\n            normal: {\r\n                borderColor: '#fff'\r\n            },\r\n            emphasis: {\r\n                borderColor: '#b1e4ff'\r\n            }\r\n        }\r\n    },\r\n    brush: {\r\n        outOfBrush: {\r\n            color: '#abc'\r\n        },\r\n        brushStyle: {\r\n            borderWidth: 2,\r\n            color: 'rgba(0,0,0,0.2)',\r\n            borderColor: 'rgba(0,0,0,0.5)',\r\n        },\r\n        seriesIndex: [0, 1],\r\n        throttleType: 'debounce',\r\n        throttleDelay: 300,\r\n        geoIndex: 0\r\n    },*/\r\n    geo: {\r\n        map: 'china',\r\n        id: 11,\r\n        z: 1,\r\n        left: '10',\r\n        right: '35%',\r\n        center: [117.98561551896913, 31.205000490896193],\r\n        zoom: 2.5,\r\n        label: {\r\n            emphasis: {\r\n                show: false\r\n            }\r\n        },\r\n        roam: true, //是否开启鼠标缩放和平移漫游\r\n        itemStyle: {\r\n            normal: {\r\n                areaColor: '#323c48',\r\n                borderColor: '#111'\r\n            },\r\n            emphasis: {\r\n                areaColor: '#2a333d'\r\n            }\r\n        }\r\n    },\r\n\r\n  /* graphic: {    //水印\r\n        id: 30,\r\n        elements: [{\r\n            type: 'text',\r\n             $action: 'merge' ,\r\n             position:[330, 410],\r\n             z: 1,\r\n             zlevel: 1,\r\n             draggable: false,\r\n             //silent: false,      //是否不响应鼠标以及触摸事件\r\n             //progressive: true,   //是否渐进式渲染。当图形元素过多时才使用。\r\n             style:{\r\n                 x:0,\r\n                 y:0,\r\n                 text: '测试是是大幅度发',\r\n                 fontSize: 16,\r\n                 fill: '#00ffff',\r\n             }\r\n        }]\r\n    },   */\r\n\r\n    tooltip: {\r\n        trigger: 'item'\r\n    },\r\n    grid: {\r\n        right: 40,\r\n        top: 100,\r\n        bottom: 40,\r\n        width: '30%'\r\n    },\r\n    xAxis: {\r\n        type: 'value',\r\n        scale: true,\r\n        position: 'top',\r\n        boundaryGap: false,\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            margin: 2,\r\n            textStyle: {\r\n                color: '#aaa'\r\n            }\r\n        },\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        //name: 'TOP 20',\r\n        nameGap: 16,\r\n        axisLine: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisTick: {\r\n            show: false,\r\n            lineStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            interval: 0,\r\n            textStyle: {\r\n                color: '#ddd'\r\n            }\r\n        },\r\n        data: []\r\n    },\r\n    series: [\r\n\r\n        {\r\n            name: '位置',\r\n            type: 'effectScatter',\r\n            coordinateSystem: 'geo',\r\n            data: convertedData[1],\r\n            symbolSize: function(val) {\r\n                return Math.max(val[2] / 10, 8);\r\n            },\r\n            showEffectOn: 'render',     //配置何时显示特效 'render' 绘制完成后显示特效, 'emphasis' 高亮（hover）的时候显示特效。\r\n            rippleEffect: {\r\n                //color: \"#00ffff\",   //颜色，涟漪的颜色，默认为散点的颜色。\r\n                brushType: 'stroke'   //波纹的绘制方式，可选 'stroke' 和 'fill'。\r\n            },\r\n            hoverAnimation: true,\r\n            label: {\r\n                normal: {\r\n                    fontSize: 14,\r\n                    formatter: '{b}',\r\n                    position: 'bottom',\r\n                    show: true,\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: '#f4e925',\r\n                    shadowBlur: 10,\r\n                    shadowColor: '#333'\r\n                }\r\n            },\r\n            zlevel: 1\r\n        },\r\n        {\r\n            name: 'otherlines',\r\n            type: 'lines',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 1,\r\n            large: false,\r\n            effect: {\r\n                show: true,\r\n                constantSpeed: 30,\r\n                symbol: 'arrow', //ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\r\n                symbolSize: 6,\r\n                trailLength: 0,\r\n            },\r\n\t\t\tlabel:{\r\n\t\t\t\tshow:true,\r\n\t\t\t\tcolor:'yellow',\r\n\t\t\t\tfontSize:16,\r\n\t\t\t\tformatter:'{c}',\r\n\t\t\t\t/*rich:{\r\n\t\t\t\t    a:{\r\n\t\t\t\t        color:'yellow',\r\n\t\t\t\t        fontSize:14,\r\n\t\t\t\t        lineHeight:18,\r\n\t\t\t\t        align:'left',\r\n\t\t\t\t    },\r\n\t\t\t\t}*/\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n            lineStyle: {\r\n                normal: {\r\n                    //color: '#f4e925',\r\n                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                            offset: 0, color: '#58B3CC'\r\n                        }, {\r\n                            offset: 1, color: '#f4e925'\r\n                        }], false),\r\n                    width: 2,\r\n                    opacity: 1,\r\n                    curveness: 0 //0.2 曲线   0 直线\r\n                }\r\n            },\r\n            data: allData.otherLines\r\n        },\r\n        {\r\n            name: 'henanLines',\r\n            type: 'lines',\r\n            coordinateSystem: 'geo',\r\n            zlevel: 1,\r\n            polyline:false,   //是否是多段线\r\n            large: true,\r\n            effect: {\r\n                show: true,\r\n                constantSpeed: 30,\r\n                symbol: 'arrow', //ECharts 提供的标记类型包括 'circle', 'rect', 'roundRect', 'triangle', 'diamond', 'pin', 'arrow'\r\n                symbolSize: 6,\r\n                trailLength: 0,\r\n            },\r\n\t\t\tlabel:{\r\n\t\t\t\tshow:true,\r\n\t\t\t\t//formatter:'{c}',\r\n\t\t\t\t/*width:400,\r\n\t\t\t\theight:150,*/\r\n\t\t\t\tborderColor:'#00ffff',\r\n\t\t\t\tborderWidth:0,\r\n\t\t\t\t//fontSize:16,\r\n\t\t\t\t//formatter:'{a|{c}}',\r\n\t\t\t\t//offset:[300,400],  //不起作用\r\n\t\t\t\tformatter: function (params) {\r\n                            var newParamsName = \"\";\r\n                            var paramsNameNumber = params.value.length;\r\n                            var provideNumber = 30;  //一行显示几个字\r\n                            var rowNumber = Math.ceil(paramsNameNumber / provideNumber);\r\n                            if (paramsNameNumber > provideNumber) {\r\n                                for (var p = 0; p < rowNumber; p++) {\r\n                                    var tempStr = \"\";\r\n                                    var start = p * provideNumber;\r\n                                    var end = start + provideNumber;\r\n                                    if (p == rowNumber - 1) {\r\n                                        tempStr = params.value.substring(start, paramsNameNumber);\r\n                                    } else {\r\n                                        tempStr = params.value.substring(start, end) + \"\\n\";\r\n                                    }\r\n                                    newParamsName += tempStr;\r\n                                }\r\n\r\n                            } else {\r\n                                newParamsName = params;\r\n                            }\r\n                            return '{a|'+newParamsName+'}'\r\n                            //console.log(newParamsName)\r\n                },\r\n\t\t\t\trich:{\r\n\t\t\t\t    a:{\r\n\t\t\t\t        color:'#00ffff',\r\n\t\t\t\t        fontSize:16,\r\n\t\t\t\t        lineHeight:20,\r\n\t\t\t\t        align:'left',\r\n\t\t\t\t    },\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n            lineStyle: {\r\n                normal: {\r\n                    color: '#00ffff',\r\n                    /*color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\r\n                            offset: 0, color: '#58B3CC'\r\n                        }, {\r\n                            offset: 1, color: '#f4e925'\r\n                        }], false),*/\r\n                    width: 2,\r\n                    opacity: 1,\r\n                    curveness: 0 //0.2 曲线   0 直线\r\n                }\r\n            },\r\n            data: allData.henanLines\r\n        },\r\n    ]\r\n};","html":"","externalScripts":"/dep/echarts/map/js/china.js","updaterUID":"bd-1627449234","theme":"","layout":"","viewCount":4136,"userName":"l***w","commentCount":0,"starCount":22,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xFI_wsbAh.png?v=1582811421077","isCustomThumbnail":0,"builtinTags":["category-work","geo","grid","series-effectScatter","series-lines","title","tooltip"],"customTags":[],"updaterUserName":"l***w"}}