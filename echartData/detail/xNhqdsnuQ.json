{"status":0,"data":{"cid":"xNhqdsnuQ","authorUid":"bd-1896067372","authorUserName":"a***6","title":"温度，风向","description":"","latestVersion":1,"alwaysLatest":1,"createTime":"2020-01-22T02:56:39.000Z","lastUpdateTime":"2020-01-22T02:56:39.000Z","auth":2,"uid":"bd-1896067372","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":1,"parentVersion":-1,"echartsVersion":"4.4.0","versionCreateTime":"2020-01-22T02:56:39.000Z","code":"var xAxisData = ['09-01', '09-02', '09-03', '09-04', '09-05', '09-06', '09-07', '09-08', '09-09', '09-10'];\nvar seriesData = [0.5, 0.2, 0.1, 0.4, 0.5, 1, 0.5, 0.2, 0.1, 0.4, 0.5, 1];\nvar arrowArr = ['W', 'WSW', 'SW', 'SSW', 'S', 'SSE', 'SE', 'ESE', 'E', 'E'];\nvar preditDate = '09-05';\nvar beforeEnsure = '09-04';\nvar afterEnsure = '09-07';\n\n//总长度\nvar num = xAxisData.length - 1;\nvar index = 0;\nvar actualPercent = '';\nvar preditPercent = '';\n\n\nvar arrowDataArr = [];\nxAxisData.forEach(function(item, i) {\n    var arr = [];\n    arr.push(xAxisData[i]);\n    arr.push(seriesData[i]);\n    arr.push(arrowArr[i]);\n    arrowDataArr.push(arr);\n\n})\n\n\n\n\n//箭头处理函数\nvar directionMap = {};\necharts.util.each(\n    ['W', 'WSW', 'SW', 'SSW', 'S', 'SSE', 'SE', 'ESE', 'E', 'ENE', 'NE', 'NNE', 'N', 'NNW', 'NW', 'WNW'],\n    function(name, index) {\n        directionMap[name] = Math.PI / 8 * index;\n    }\n);\n\nvar dims = {\n    time: 0,\n    windSpeed: 1,\n    R: 2,\n    waveHeight: 3,\n    weatherIcon: 2,\n    minTemp: 3,\n    maxTemp: 4\n};\nvar arrowSize = 18;\nvar weatherIconSize = 45;\n\nfunction renderArrow(param, api) {\n    var point = api.coord([\n        api.value(dims.time),\n        api.value(dims.windSpeed)\n    ]);\n\n    return {\n        type: 'path',\n        shape: {\n            pathData: 'M31 16l-15-15v9h-26v12h26v9z',\n            x: -arrowSize / 2,\n            y: -arrowSize / 2,\n            width: arrowSize,\n            height: arrowSize\n        },\n        rotation: directionMap[api.value(dims.R)],\n        position: point,\n        style: api.style({\n            stroke: '#555',\n            lineWidth: 1\n        })\n    };\n}\n\n\n\noption = {\n    color: ['#259e72', '#178fcd'],\n    tooltip: {\n        trigger: 'axis',\n        formatter: function(params) {\n            return [\n                params[1].value[dims.time] + '<br/>' +\n                '风速：' + params[1].value[dims.windSpeed],\n                '风向：' + params[1].value[dims.R],\n            ].join('<br>');\n        }\n    },\n    xAxis: [{\n            boundaryGap: false,\n            data: xAxisData\n    }],\n    \"grid\": [{\n            \"left\": \"5%\",\n            \"right\": \"5%\",\n\n            \"show\": false\n        }\n    ],\n    yAxis: [{\n        name: ''\n    }],\n    \"visualMap\": [{\n        \"show\": false,\n        \"dimension\": 0,\n        \"seriesIndex\": 0,\n        \"pieces\": [{\n            \"lte\": index,\n            \"color\": \"#259e72\"\n        }, {\n            \"gt\": index,\n            \"lte\": seriesData.length + 1,\n            \"color\": \"#51d9a7\"\n        }]\n    }],\n    \"visualMap\": [{\n        \"show\": false,\n        \"dimension\": 0,\n        \"seriesIndex\": 0,\n        \"pieces\": [{\n            \"lte\": index,\n            \"color\": \"#259e72\"\n        }, {\n            \"gt\": index,\n            \"lte\": seriesData.length + 1,\n            \"color\": \"#51d9a7\"\n        }]\n    }],\n    series: [{\n        name: '风速',\n        type: 'line',\n        smooth: true,\n        \"xAxisIndex\": \"0\",\n        data: seriesData,\n        markLine: {\n            label: {\n                color: '#666',\n                position: 'middle',\n                textStyle: {\n                    padding: -50\n                }\n            },\n            lineStyle: {\n                color: '#666'\n            }\n        }\n    }, {\n        name: '风向',\n        \"type\": \"custom\",\n        renderItem: renderArrow,\n        \"encode\": {\n            \"x\": 0,\n            \"y\": 1\n        },\n        \"data\": arrowDataArr,\n        \"z\": 10\n    }, {\n        name: '平行于y轴的趋势线',\n        type: 'line',\n        color: ['black'],\n        markLine: {\n            data: [\n                [{\n                    symbol: \"line\",\n                    coord: [preditDate, 0]\n                }, {\n                    symbol: \"line\",\n                    coord: [preditDate, 1]\n                }]\n            ]\n        }\n    }]\n};\n\nsetTimeout(function() {\n    var chart = document.getElementById('chart-panel');\n    var myChart = echarts.init(chart);\n    myChart.dispatchAction({\n        type: 'showTip',\n        // 系列的 index，在 tooltip 的 trigger 为 axis 的时候可选。\n        seriesIndex: 1,\n        // 数据的 index，如果不指定也可以通过 name 属性根据名称指定数据\n        dataIndex: 3\n        // 可选，数据名称，在有 dataIndex 的时候忽略\n        //name?: string\n    });\n}, 10);","html":"","externalScripts":"","updaterUID":"bd-1896067372","theme":"","layout":"","viewCount":298,"userName":"a***6","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xNhqdsnuQ.png?v=1579661799185","isCustomThumbnail":0,"builtinTags":["category-work","grid","markLine","series-custom","series-line","tooltip","visualMap"],"customTags":[],"updaterUserName":"a***6"}}