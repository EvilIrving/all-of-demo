{"status":0,"data":{"cid":"x3xz4I0sf2","authorUid":"bd-365218436","authorUserName":"G***G","title":"普通饼图","description":"","latestVersion":9,"alwaysLatest":0,"createTime":"2021-05-27T01:49:52.000Z","lastUpdateTime":"2021-10-22T02:38:15.000Z","auth":2,"uid":"bd-365218436","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":9,"parentVersion":8,"echartsVersion":"4.9.0","versionCreateTime":"2021-10-22T02:38:15.000Z","code":"\n\n\n//hex颜色转rgb颜色\nfunction HexToRgb(str) {\n    var r = /^\\#?[0-9A-F]{6}$/;\n    //test方法检查在字符串中是否存在一个模式，如果存在则返回true，否则返回false\n    if (!r.test(str)) return console.log('输入错误的hex');\n    //replace替换查找的到的字符串\n    str = str.replace('#', '');\n    //match得到查询数组\n    var hxs = str.match(/../g);\n    //alert('bf:'+hxs)\n    for (var i = 0; i < 3; i++) hxs[i] = parseInt(hxs[i], 16);\n    //alert(parseInt(80, 16))\n    //console.log(hxs);\n    return hxs;\n}\n//GRB颜色转Hex颜色\nfunction RgbToHex(a, b, c) {\n    var r = /^\\d{1,3}$/;\n    if (!r.test(a) || !r.test(b) || !r.test(c)) return console.log('输入错误的rgb颜色值');\n    var hexs = [a.toString(16), b.toString(16), c.toString(16)];\n    for (var i = 0; i < 3; i++) if (hexs[i].length == 1) hexs[i] = '0' + hexs[i];\n    return '#' + hexs.join('');\n}\n\n//得到hex颜色值为color的加深颜色值，level为加深的程度，限0-1之间\nfunction getDarkColor(color, level) {\n    var r = /^\\#?[0-9A-F]{6}$/;\n    if (!r.test(color)) return console.log('输入错误的hex颜色值');\n    var rgbc = HexToRgb(color);\n    //floor 向下取整\n    for (var i = 0; i < 3; i++) rgbc[i] = Math.floor(rgbc[i] * (1 - level));\n    return RgbToHex(rgbc[0], rgbc[1], rgbc[2]);\n}\n//得到hex颜色值为color的减淡颜色值，level为加深的程度，限0-1之间\nfunction getLightColor(color, level) {\n    var r = /^\\#?[0-9A-F]{6}$/;\n    if (!r.test(color)) return console.log('输入错误的hex颜色值');\n    var rgbc = HexToRgb(color);\n    for (var i = 0; i < 3; i++) rgbc[i] = Math.floor((255 - rgbc[i]) * level + rgbc[i]);\n    return RgbToHex(rgbc[0], rgbc[1], rgbc[2]);\n}\n\nlet echartData = [\n    {\n        name: 'A类',\n        value: '3720',\n    },\n    {\n        name: 'B类',\n        value: '2920',\n    },\n    {\n        name: 'C类',\n        value: '2200',\n    },\n    {\n        name: 'D类',\n        value: '1420',\n    },\n    {\n        name: 'E类',\n        value: '1420',\n    },\n    {\n        name: 'F类',\n        value: '1420',\n    },\n    {\n        name: 'G类',\n        value: '1420',\n    },\n    {\n        name: 'H类',\n        value: '1420',\n    },\n];\n        let pieCenter = ['30%', \"50%\"]\nlet shadowData = echartData.map((item) => {\n    return {\n        name: '',\n        value: item.value,\n    };\n});\nvar nameArray = echartData.map((item) => {\n    return item.name;\n});\nlet color  = [\"#3FB1E3\",\"#6BE6C1\",\"#626C91\",\"#93B7E3\",\"#C4EBAD\",\"#96DEE8\",\"#EDAFDA\",\"#FE8463\"]\nlet darkColor = echartData.map((item,i)=>{\n    return getDarkColor(color[i],0.4)\n})\noption = {\n    backgroundColor: '#031845',\n    tooltip: {\n        trigger: 'item',\n        backgroundColor: 'rgba(20,50,125,.6)',\n    },\n    legend: [\n        {\n            icon: `path://M881.387 297.813c38.08 65.387 57.28 136.747 57.28 214.187s-19.094 148.8-57.28 214.187c-38.187 65.28-89.92 117.12-155.2 155.2S589.44 938.667 512 938.667s-148.8-19.094-214.187-57.28c-65.28-38.08-117.013-89.814-155.306-155.307C104.427 660.8 85.333 589.44 85.333 512c0-77.333 19.094-148.693 57.28-214.187 38.08-65.28 89.814-117.013 155.307-155.306C363.2 104.533 434.56 85.333 512 85.333c77.333 0 148.693 19.094 214.187 57.28 65.28 38.187 117.013 89.92 155.2 155.2z m-217.707-47.36C617.387 223.467 566.827 209.92 512 209.92s-105.387 13.547-151.68 40.533-82.987 63.68-109.973 109.974c-26.987 46.293-40.534 96.853-40.534 151.68s13.547 105.386 40.534 151.68c26.986 46.293 63.68 82.986 109.973 109.973 46.293 26.987 96.853 40.533 151.68 40.533s105.387-13.546 151.68-40.533c46.293-26.987 82.987-63.68 109.973-109.973 26.987-46.294 40.534-96.854 40.534-151.68s-13.547-105.387-40.534-151.68c-27.093-46.294-63.786-82.987-109.973-109.974z`,\n            orient: 'vertical',\n            data: nameArray.slice(4, 8),\n            left: '80%',\n            top: 'center',\n            itemWidth: 15,\n            align: 'left',\n            textStyle: {\n                color: '#fff',\n            },\n            itemGap: 20,\n        },\n        {\n            icon: `path://M881.387 297.813c38.08 65.387 57.28 136.747 57.28 214.187s-19.094 148.8-57.28 214.187c-38.187 65.28-89.92 117.12-155.2 155.2S589.44 938.667 512 938.667s-148.8-19.094-214.187-57.28c-65.28-38.08-117.013-89.814-155.306-155.307C104.427 660.8 85.333 589.44 85.333 512c0-77.333 19.094-148.693 57.28-214.187 38.08-65.28 89.814-117.013 155.307-155.306C363.2 104.533 434.56 85.333 512 85.333c77.333 0 148.693 19.094 214.187 57.28 65.28 38.187 117.013 89.92 155.2 155.2z m-217.707-47.36C617.387 223.467 566.827 209.92 512 209.92s-105.387 13.547-151.68 40.533-82.987 63.68-109.973 109.974c-26.987 46.293-40.534 96.853-40.534 151.68s13.547 105.386 40.534 151.68c26.986 46.293 63.68 82.986 109.973 109.973 46.293 26.987 96.853 40.533 151.68 40.533s105.387-13.546 151.68-40.533c46.293-26.987 82.987-63.68 109.973-109.973 26.987-46.294 40.534-96.854 40.534-151.68s-13.547-105.387-40.534-151.68c-27.093-46.294-63.786-82.987-109.973-109.974z`,\n            orient: 'vertical',\n            data: nameArray.slice(0, 4),\n            left: '70%',\n            top: 'center',\n            itemWidth: 15,\n            align: 'left',\n            textStyle: {\n                color: '#fff',\n            },\n            itemGap: 20,\n        },\n    ],\n    series: [\n        {\n            name: '阴影',\n            type: 'pie',\n            hoverAnimation: false,\n            legendHoverLink: false,\n            radius: ['38%', '45%'],\n            center: pieCenter,\n            \n            color: darkColor,\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            labelLine: {\n                normal: {\n                    show: false,\n                },\n            },\n            emphasis: {\n                scale: false,\n            },\n            tooltip: {\n                show: false,\n            },\n\n            data: shadowData,\n        },\n        {\n            name: '实际',\n            type: 'pie',\n            radius: ['43%', '55%'],\n            center: pieCenter,\n            color: color,\n            labelLine: {\n                normal: {\n                    show: false,\n                },\n            },\n            label: {\n                normal: {\n                    show: false,\n                },\n            },\n            data: echartData,\n        },\n    ],\n};\n\nmyChart.on('legendselectchanged', (obj)=>{\n    console.log(obj)\n})\n\nlet len = 0\nsetInterval(()=>{\n    \n    if(len === echartData.length){\n        len = 0\n    }\n    myChart.dispatchAction({\n        type: 'downplay',\n        seriesIndex: 1,\n    })\n    myChart.dispatchAction({\n        type: 'highlight',\n        seriesIndex: 1,\n        dataIndex: len,\n    })\n    myChart.dispatchAction({\n        type: 'showTip',\n        seriesIndex: 1,\n        dataIndex: len,\n    })\n    len ++\n}, 1000)\n\n","html":"","externalScripts":"","updaterUID":"bd-365218436","theme":"","layout":"","viewCount":0,"userName":"G***G","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/x3xz4I0sf2.png?v=1634870295678","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-pie","tooltip"],"customTags":[],"updaterUserName":"G***G"}}