{"status":0,"data":{"cid":"xVhlakUlDv","authorUid":"bd-2469886102","authorUserName":"芊***8","title":"部门关系","description":"","latestVersion":2,"alwaysLatest":1,"createTime":"2019-02-19T03:17:45.000Z","lastUpdateTime":"2019-02-19T03:17:45.000Z","auth":1,"uid":"bd-2469886102","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":2,"parentVersion":1,"echartsVersion":"4.2.1","versionCreateTime":"2019-03-15T08:13:13.000Z","code":"var data = {\r\n    \"antity\": [{\r\n            \"name\": \"B省站1\",\r\n            \"des\": \"B省站1\",\r\n            \"category\": 2,\r\n        },\r\n        {\r\n            \"name\": \"B省站2\",\r\n            \"des\": \"B省站2\",\r\n            \"category\": 2,\r\n        }, {\r\n            \"name\": \"A省站2\",\r\n            \"des\": \"A省站2\",\r\n            \"category\": 2,\r\n        }, {\r\n            \"name\": \"A省站1\",\r\n            \"des\": \"A省站1\",\r\n            \"category\": 2,\r\n        }, {\r\n            \"name\": \"部平台\",\r\n            \"des\": \"部平台\",\r\n            \"category\": 2,\r\n        }, {\r\n            \"name\": \"B省中心\",\r\n            \"des\": \"B省中心\",\r\n            \"category\": 2,\r\n        }\r\n    ],\r\n    \"relation\": [{\r\n        \"source\": \"B省站1\",\r\n        \"target\": \"B省中心\",\r\n        \"label\": {\r\n            \"fontSize\": 12,\r\n        },\r\n        \"name\": \"站省同步\",\r\n        \"des\": \"B省站1-->B省中心：站省同步\"\r\n    }, {\r\n        \"source\": \"B省站2\",\r\n        \"target\": \"B省中心\",\r\n        \"label\": {\r\n            \"fontSize\": 12,\r\n        },\r\n        \"name\": \"站省同步\",\r\n        \"des\": \"B省站2-->B省中心：站省同步\"\r\n    }, {\r\n        \"source\": \"A省站2\",\r\n        \"target\": \"部平台\",\r\n        \"label\": {\r\n            \"fontSize\": 12,\r\n        },\r\n        \"name\": \"站部同步\",\r\n        \"des\": \"A省站2-->部平台：站部同步\"\r\n    }, {\r\n        \"source\": \"A省站1\",\r\n        \"target\": \"部平台\",\r\n        \"label\": {\r\n            \"fontSize\": 12,\r\n        },\r\n        \"name\": \"站部同步\",\r\n        \"des\": \"A省站1-->部平台：站部同步\"\r\n    }, {\r\n        \"source\": \"部平台\",\r\n        \"target\": \"B省中心\",\r\n        \"label\": {\r\n            \"fontSize\": 12,\r\n        },\r\n        \"name\": \"省部同步\",\r\n        \"des\": \"部平台2-->B省中心：省部同步\"\r\n    }]\r\n};\r\n\r\n\r\nvar versionArr = {\r\n    \"m9003\": \"0\",\r\n    \"as9003\": \"0\",\r\n    \"bs9003\": \"0\",\r\n    \"m9002\": \"0\",\r\n    \"cp9002\": \"0\",\r\n    \"cs19002\": \"0\",\r\n    \"cs29002\": \"0\"\r\n};\r\n\r\n\r\n\r\nfunction monitorRelease() {\r\n\r\n\r\n    $.ajax({\r\n        type: \"post\",\r\n        url: \"http://localhost:8080/cn-cpc-manage-business-api/actions/allotOrder/getReleaseVer\",\r\n        data: \"test=1\",\r\n        async: false,\r\n        success: function(res) {\r\n\r\n            var result = res.data;\r\n            if (result.m9003 == \"update\") {\r\n                data.antity[2].category = 1;\r\n                data.antity[3].category = 1;\r\n                data.antity[4].category = 0;\r\n            }\r\n            \r\n             if (result.m9003 == \"done\") {\r\n                 data.antity[4].category = 2;\r\n                 \r\n                if (result.as9003 == \"update\") {\r\n                  data.antity[2].category = 0;\r\n               }\r\n               \r\n                if (result.as9003 == \"done\") {\r\n                  data.antity[2].category = 2;\r\n               }\r\n               \r\n               if (result.bs9003 == \"update\") {\r\n                  data.antity[3].category = 0;\r\n               }\r\n               \r\n                if (result.bs9003 == \"done\") {\r\n                  data.antity[3].category = 2;\r\n               }\r\n            }\r\n            \r\n            \r\n            \r\n             if (result.m9002 == \"update\") {\r\n               \r\n                data.antity[0].category = 1;\r\n                data.antity[1].category = 1;\r\n                data.antity[5].category = 1;\r\n                data.antity[4].category = 0;\r\n               \r\n            }\r\n            \r\n            \r\n             if (result.m9002 == \"done\") {\r\n                data.antity[4].category = 2;\r\n                \r\n               \r\n             if (result.cp9002 == \"update\") {\r\n                data.antity[5].category = 0;\r\n                data.antity[0].category = 1;\r\n                data.antity[1].category = 1;\r\n             }\r\n             \r\n               if (result.cp9002 == \"done\") {\r\n                   \r\n                data.antity[5].category = 2;\r\n                \r\n                if (result.cs19002 == \"update\") {\r\n                \r\n                     data.antity[0].category = 0;\r\n                }\r\n                \r\n                if (result.cs19002 == \"done\") {\r\n                \r\n                data.antity[0].category = 2;\r\n                }\r\n                \r\n                 if (result.cs29002 == \"update\") {\r\n                \r\n                     data.antity[1].category = 0;\r\n                }\r\n                \r\n                if (result.cs29002 == \"done\") {\r\n                \r\n                     data.antity[1].category = 2;\r\n                }\r\n                   \r\n                   \r\n               }\r\n            }\r\n \r\n            \r\n\r\n        }\r\n    });\r\n}\r\n\r\nwindow.setInterval(monitorRelease, 4000);\r\n\r\noption = {\r\n    color: ['red', 'blue', 'green'],\r\n    tooltip: {\r\n        formatter(x) {\r\n            return x.data.des;\r\n        }\r\n    },\r\n    legend: {\r\n        x: 'left',\r\n        icon: 'circle',\r\n        data: ['发布中', '等待发布', '发布完成']\r\n    },\r\n    series: [{\r\n        type: 'graph',\r\n        // layout: 'force',\r\n        layout: 'circular',\r\n        symbolSize: [150, 60],\r\n        symbol: 'rect',\r\n        roam: true,\r\n        focusNodeAdjacency: true,\r\n        categories: [{\r\n            name: '发布中'\r\n        }, {\r\n            name: '等待发布'\r\n        }, {\r\n            name: '发布完成'\r\n        }],\r\n        edgeSymbol: ['', 'arrow'],\r\n        // edgeSymbolSize: [80, 10],\r\n        edgeLabel: {\r\n            normal: {\r\n                textStyle: {\r\n                    fontSize: 50\r\n                },\r\n                show: true,\r\n                formatter(x) {\r\n                    return x.data.name;\r\n                }\r\n            }\r\n        },\r\n        force: {\r\n            repulsion: 2000,\r\n            edgeLength: 120\r\n        },\r\n        // draggable: true,\r\n        lineStyle: {\r\n            normal: {\r\n                width: 1,\r\n                color: '#333',\r\n                textStyle: {\r\n                    fontSize: 50\r\n                }\r\n            }\r\n        },\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                width: 100,\r\n                height: 40,\r\n                textStyle: {\r\n                    fontSize: 35\r\n                },\r\n                //color:'#25cfb6',\r\n                formatter: function(val) {\r\n                    return echarts.format.truncateText(val.name, 100, 'Microsoft Yahei', '…');\r\n                }\r\n            }\r\n        },\r\n        data: data.antity,\r\n        links: data.relation\r\n    }]\r\n}","html":"","externalScripts":"","updaterUID":"bd-1394274129","theme":"","layout":"","viewCount":827,"userName":"芊***8","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xVhlakUlDv.png?v=1552637594136","isCustomThumbnail":0,"builtinTags":["category-work","legend","series-graph","tooltip"],"customTags":[],"updaterUserName":"zbb1991123"}}