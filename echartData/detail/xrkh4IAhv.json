{"status":0,"data":{"cid":"xrkh4IAhv","authorUid":"bd-17468694","authorUserName":"家***曼","title":"3","description":"33","latestVersion":4,"alwaysLatest":1,"createTime":"2019-12-21T05:08:11.000Z","lastUpdateTime":"2019-12-21T05:08:11.000Z","auth":2,"uid":"bd-17468694","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":4,"parentVersion":3,"echartsVersion":"4.4.0","versionCreateTime":"2019-12-21T06:57:12.000Z","code":"var uploadedDataURL = \"/asset/get/s/data-1576908029500-ZPtATW1R.json\";\n\nmyChart.showLoading();\nvar data = [];\n$.getJSON(uploadedDataURL, function(geoJson) {\n    echarts.registerMap('广东', geoJson);\n    data = geoJson.features.map((item) => {\n        return {\n            value: (Math.random() * 1000).toFixed(2),\n            name: item.properties.name\n        }\n    });\n    for(var i=0;i<data.length;i++){\n        if(data[i].name=='济宁市'){\n            data[i].itemStyle={\n                color: '#5cd2c3',\n                opacity: 0.3,\n                borderWidth: 0.4,\n                borderColor: '#5cd2c3'\n            };\n        }else{\n            var co = color16();\n            data[i].itemStyle={\n                areaColor:co\n            };\n        }\n    }\n    myChart.hideLoading();\n    option = {\n        tooltip: {\n            backgroundColor: 'rgba(0,0,0,0)',\n            trigger: 'item',\n        },\n        legend: {\n            show: false,\n        },\n        visualMap: { //颜色的设置  dataRange\n                show: false,\n                x: 'left',\n                y: 'center',\n                seriesIndex: [1],\n                min: 70,\n                max: 90,\n                text: ['高', '低'], // 文本，默认为数值文本\n                textStyle: {\n                    color: '#fff'\n                },\n                inRange: {\n                    color: ['#5cd2c3','#419bd3','#7a95d2','#5dcbdc','#838dcd','#5de9b1','#5dc6df','#5db8ea','#2bbc90','#5dc4e3']\n\n                }\n            },\n        series: [{\n            tooltip: {\n                trigger: 'item',\n                formatter: function(item) {\n                    var tipHtml = '';\n                    tipHtml = '<div style=\"background:#fff;border-radius:10px;padding-top:10px;box-shadow:0 0 10px #666\">' +\n                        '<div style=\"color:#fff;height:20px;border-radius:6px;font-size:12px;line-height:20px;background-color:#5861a2;text-align:center;margin:0 2px;\">' + item.data.name + '</div>' +\n                        '<div style=\"text-align:center;color:#494949;padding:8px 6px\">' +\n                        '<span style=\"font-size:18px;font-weight:bold;\">' + item.data.value + ' ' + '</span>' +\n                        '</div>' + '</div>';\n                    return tipHtml;\n                }\n            },\n            type: 'map3D', // 系列类型\n            name: 'map3D', // 系列名称\n            map: '广东', // 自定义扩展图表类型\n            // 环境贴图，支持純颜色值，渐变色，全景贴图的 url。默认为 'auto'，在配置有 light.ambientCubemap.texture 的时候会使用该纹理作为环境贴图。否则则不显示环境贴图。\n            environment: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ // 配置为垂直渐变的背景\n                offset: 0, color: '#00aaff' // 天空颜色\n                }, {\n                    offset: 0.7, color: '#998866' // 地面颜色\n                }, {\n                offset: 1, color: '#998866' // 地面颜色\n            }], false),\n            aspectScale: 1,\n            label: { // 标签的相关设置\n                show: true, // (地图上的城市名称)是否显示标签 [ default: false ]\n                //distance: 50, // 标签距离图形的距离，在三维的散点图中这个距离是屏幕空间的像素值，其它图中这个距离是相对的三维距离\n                //formatter:, // 标签内容格式器\n                textStyle: { // 标签的字体样式\n                    color: '#fff', // 地图初始化区域字体颜色\n                    fontSize: 10, // 字体大小\n                    opacity: 1, // 字体透明度\n                    backgroundColor: 'rgba(0,23,11,0)' // 字体背景色\n                },\n            },\n            zoom: 0.65, //缩放\n            showLegendSymbol: false,\n            /*\n            label: {\n                show: true,\n                color: '#fff',\n                fontSize: 10\n            },*/\n            itemStyle: {\n                areaColor: '#0E95F1',\n                borderColor: '#e9e9e9',\n                borderWidth: 1,\n                shadowColor: '#0E95F1',\n                shadowBlur: 18,\n            },\n            emphasis: {\n                label: {\n                    show: true,\n                    color: '#fff',\n                    fontSize: 8\n                },\n                itemStyle: {\n                    areaColor: '#FFD181',\n                    borderColor: '#fff',\n                    borderWidth: 1\n                }\n            },\n            layoutCenter: ['50%', '50%'],\n            layoutSize: '160%',\n            markPoint: {\n                symbol: 'none'\n            },\n            data: data,\n        }],\n    };\n    \n    myChart.setOption(option);\n    showTips('广州市');\n});\n// 默认鼠标移出canvas后显示广州的tooltip信息\nmyChart.on(\"globalout\", () => {\n    setTimeout(() => {\n        showTips('广州市')\n    }, 5000)\n})\n\nfunction showTips(name) {\n    data.forEach((item, i) => {\n        if (item.name.includes(name)) {\n            myChart.dispatchAction({\n                type: 'showTip',\n                seriesIndex: 0,\n                dataIndex: i\n            });\n            myChart.dispatchAction({\n                type: 'mapSelect',\n                seriesIndex: 0,\n                dataIndex: i\n            });\n        }\n    })\n};\n\nfunction color16(){//十六进制颜色随机\n\tvar r = Math.floor(Math.random()*256);\n\tvar g = Math.floor(Math.random()*256);\n\tvar b = Math.floor(Math.random()*256);\n\tvar color = '#'+r.toString(16)+g.toString(16)+b.toString(16);\n\treturn color;\n}","html":"","externalScripts":"/dep/echarts/map/js/china.js,https://echarts.baidu.com/resource/echarts-gl-latest/dist/echarts-gl.min.js,/dep/echarts/latest/extension/bmap.min.js","updaterUID":"bd-17468694","theme":"","layout":"","viewCount":20,"userName":"家***曼","commentCount":0,"starCount":0,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xrkh4IAhv.png?v=1576911432315","isCustomThumbnail":0,"builtinTags":["category-work","legend","markPoint","series-map3D","tooltip","visualMap"],"customTags":[],"updaterUserName":"家***曼"}}