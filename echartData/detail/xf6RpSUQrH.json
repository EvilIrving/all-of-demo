{"status":0,"data":{"cid":"xf6RpSUQrH","authorUid":"obd-oDmQB5k4z4IKLErElDK2wSPA2Ls2z1J","authorUserName":"丝***y","title":"bar","description":"","latestVersion":3,"alwaysLatest":1,"createTime":"2020-10-28T06:22:05.000Z","lastUpdateTime":"2020-10-28T06:22:05.000Z","auth":1,"uid":"obd-oDmQB5k4z4IKLErElDK2wSPA2Ls2z1J","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":3,"parentVersion":2,"echartsVersion":"4.8.0","versionCreateTime":"2020-10-28T06:29:57.000Z","code":"networkCenterLevel = [{\n        \"count\": 25,\n        \"label\": \"中央\",\n        \"value\": \"1\"\n    },\n    {\n        \"count\": 12,\n        \"label\": \"省\",\n        \"value\": \"2\"\n    },\n    {\n        \"count\": 8,\n        \"label\": \"地区\",\n        \"value\": \"3\"\n    },\n    {\n        \"count\": 3,\n        \"label\": \"县\",\n        \"value\": \"4\"\n    },\n    {\n        \"count\": 2,\n        \"label\": \"乡镇\",\n        \"value\": \"5\"\n    },\n    {\n        \"count\": 2,\n        \"label\": \"村\",\n        \"value\": \"6\"\n    }\n]\nconst getmydmc = []\nconst getmyd = []\nnetworkCenterLevel.forEach((item) => {\n    getmydmc.push(item.label)\n    getmyd.push(item.count)\n})\n\n// 计算最大值\nfunction calMax(arr) {\n    let max = 0\n    arr.forEach((el) => {\n        el.forEach((el1) => {\n            if (!(el1 === undefined || el1 === '')) {\n                if (max < el1) {\n                    max = el1\n                }\n            }\n        })\n    })\n    const maxint = Math.ceil(max / 9.5)\n    // 不让最高的值超过最上面的刻度\n    const maxval = maxint * 10\n    // 让显示的刻度是整数\n    return maxval\n}\n\nmax = Math.ceil(calMax([getmyd]) / 10) * 10\n\noption = {\n    tooltip: { // 提示框组件\n        trigger: 'axis',\n        backgroundColor: '#fff',\n        axisPointer: {\n            type: 'shadow',\n            show: true,\n            status: 'shadow',\n            z: -1,\n            shadowStyle: {\n                color: '#DAE7FF',\n            },\n            label: { // 文字的颜色\n                textStyle: {\n                    color: '#2A70F1',\n                },\n            },\n        },\n        position: function(point, params, dom, rect, size) {\n            return [point[0] - 60, point[1] - 80]\n        },\n        padding: 0,\n        enterable: true,\n        formatter: function(params) {\n            const name = params[0].name\n            const acceptNum = params[0].value // 总数\n            const res = ' <div class=\\'tooltips\\' id=\\'tooltips\\' style=\\'position: relative;\\n' +\n                '        display: inline-block;\\n' +\n                '        background: #FFFFFF;\\n' +\n                '        box-shadow: 0 -3px 10px 0 rgba(206,211,212,0.45), 2px 10px 13px 0 rgba(0,0,0,0.04);\\n' +\n                '        padding: 0.1rem 0.2rem;\\n' +\n                '        border-radius: 0.04rem;\\'>' +\n                '<div class=\\'\\' style=\\'opacity: 0.7;\\n' +\n                '        font-family: PingFangSC-Medium;\\n' +\n                '        font-size: 0.14rem;\\n' +\n                '        color: #222222;\\n' +\n                '        padding: 0 0 0.05rem 0;\\'>' + name + '</div>' +\n                '<div class=\\'\\' style=\\'color: #2A70F1;\\n' +\n                '        font-family: PingFangSC-Medium;\\n' +\n                '        font-size: 0.13rem;\\'>' + '总数' + '：' + acceptNum + '</div>' +\n\n                '<div class=\\'\\' style=\\'width: 0;\\n' +\n                '        height: 0;\\n' +\n                '        border-left: 7px solid transparent;\\n' +\n                '        border-right: 7px solid transparent;\\n' +\n                '        border-top: 7px solid #ffffff;\\n' +\n                '        position: absolute;\\n' +\n                '        left: 42%;\\n' +\n                '        bottom: -11%;\\'></div>' +\n                '</div>'\n            return res\n        },\n        textStyle: {\n            color: '#222',\n            fontStyle: 'normal',\n            fontFamily: '微软雅黑',\n            fontSize: 13,\n        },\n    },\n    grid: {\n        left: 10,\n        right: 10,\n        bottom: 0,\n        top: 60,\n        containLabel: true,\n    },\n    xAxis: [{\n        type: 'category',\n        inverse: true,\n        axisLabel: { // 坐标轴刻度标签的相关设置。\n            // interval: 1, // 设置为 1，表示『隔一个标签显示一个标签』\n            rotate: 30,\n            textStyle: {\n                color: '#AAAAAA',\n                fontStyle: 'normal',\n                fontFamily: '微软雅黑',\n                fontSize: 12,\n            },\n        },\n        axisTick: { // 坐标轴刻度相关设置。\n            show: false,\n        },\n        axisLine: { // 坐标轴轴线相关设置\n            lineStyle: {\n                color: '#03286E',\n                opacity: 0.3,\n            },\n        },\n        splitLine: { // 坐标轴在 grid 区域中的分隔线。\n            show: false,\n        },\n        data: getmydmc,\n    }],\n    yAxis: [{\n        type: 'value',\n        name: '（个）',\n        nameTextStyle: { // 单位字体样式设置\n            color: 'rgba(34,34,34,0.5)',\n            fontSize: 14,\n            padding: [3, 0, 5, -29],\n        },\n        axisLabel: {\n            margin: 5,\n            color: 'rgba(34,34,34,0.5)',\n            textStyle: {\n                fontSize: '13',\n            },\n        },\n        min: 0,\n        max: max, // 计算最大值\n        interval: max / 5, //  平均分为5份\n        splitNumber: 5,\n        splitLine: {\n            show: true,\n            lineStyle: {\n                color: '#e1e8ec',\n            },\n        },\n        axisLine: {\n            show: false,\n        },\n        axisTick: {\n            show: false,\n        },\n    }],\n    dataZoom: [{\n            type: 'inside',\n            show: true,\n        },\n        {\n            show: true,\n            height: 5,\n            xAxisIndex: [0],\n            bottom: 15,\n            right: 10,\n            left: 20,\n            startValue: 0,\n            endValue: 8,\n            handleSize: '100%',\n            handleStyle: {\n                color: 'transparent',\n            },\n            backgroundColor: 'transparent',\n            fillerColor: 'transparent',\n            dataBackground: {\n                lineStyle: {\n                    color: 'transparent',\n                },\n                areaStyle: {\n                    color: 'transparent',\n                },\n            },\n            borderColor: 'transparent',\n        }\n    ],\n    series: [{\n        name: '值',\n        type: 'bar',\n        zlevel: 1,\n        xAxisIndex: 0,\n        itemStyle: {\n            normal: {\n                barBorderRadius: 5,\n                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                    offset: 1,\n                    color: '#5273DE',\n                }, {\n                    offset: 0,\n                    color: 'rgba(90, 115, 244, 0.71)',\n                }], false),\n            },\n        },\n        barWidth: 10,\n        data: getmyd,\n    }],\n};","html":"","externalScripts":"","updaterUID":"obd-oDmQB5k4z4IKLErElDK2wSPA2Ls2z1J","theme":"","layout":"","viewCount":57,"userName":"丝***y","commentCount":0,"starCount":1,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xf6RpSUQrH.png?v=1603866125265","isCustomThumbnail":1,"builtinTags":["category-work","dataZoom","grid","series-bar","tooltip"],"customTags":[],"updaterUserName":"丝***y"}}