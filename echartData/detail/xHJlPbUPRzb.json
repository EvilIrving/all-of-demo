{"status":0,"data":{"cid":"xHJlPbUPRzb","authorUid":"bd-1142874199","authorUserName":"smartcone","title":"工资收入、五险一金、个人所得税走势图","description":"工资收入、五险一金、个人所得税走势图(北京2016基础)","latestVersion":18,"alwaysLatest":1,"createTime":"2017-06-14T07:30:06.000Z","lastUpdateTime":"2017-06-14T07:30:06.000Z","auth":2,"uid":"bd-1142874199","publishedVersion":0,"forkFrom":"-","isSpam":0,"version":18,"parentVersion":17,"echartsVersion":"3.8.0","versionCreateTime":"2018-08-31T13:03:50.000Z","code":"\r\n//-----------------------------dn：可进行参数设置------------------------------\r\nvar bFixedIn = false;           // 固定社保基数标志：false不固定，true固定\r\nvar bFixedHouse = false;        // 固定公积金基数标志：false不固定，true固定\r\n\r\nvar fFixedInBase = 13768;       // 固定的社保基数\r\nvar fFixedHouseBase = 12000;     // 固定的公积金基数\r\n\r\n// var fExemptionPoint = 3500;     // 免税起点  \r\nvar fExemptionPoint = 5000;     // 2018新政免税起点  \r\n\r\n// 五险一金个人比例  \r\nvar fRateInEnd = 0.08;          // 养老 8%  \r\nvar fRateInMed = 0.02;          // 医疗 2%  \r\nvar fRateInUnEmp = 0.002;       // 失业 0.2%  \r\nvar fRateInInjuery = 0;         // 工伤  \r\nvar fRateInMate = 0;            // 生育  \r\nvar fRateInHouse = 0.12;        // 公积金  \r\n  \r\n// 北京2016年上、下限\r\n  \r\n// var fInEndMin = 2834;           // 养老保险下限  \r\n// var fInEndMax = 21258;          // 养老保险上限  \r\n  \r\n// var fInMedMin = 4252;           // 医疗保险下限  \r\n// var fInMedMax = fInEndMax;      // 医疗保险上限  \r\n\r\n// var fInHouseMin = 412.8 / 2;    // 公积金下限  \r\n// var fInHouseMax = 5101.92 / 2;  // 公积金上限  \r\n\r\n// 北京2017年上、下限\r\n\r\nvar fInEndMin = 3387;           // 养老保险下限  \r\nvar fInEndMax = 25401;          // 养老保险上限  \r\n\r\nvar fInMedMin = 5080;           // 医疗保险下限  \r\nvar fInMedMax = fInEndMax;      // 医疗保险上限  \r\n\r\nvar fInHouseMin = 2120*0.24 / 2;    // 公积金下限  \r\nvar fInHouseMax = 6096 / 2;  // 公积金上限  \r\n\r\n//-----------------------------up：可进行参数设置------------------------------\r\n      \r\n// 计算人个交五险一金  \r\nfunction funcCalc5In(fIncome) {  \r\n    var fSum = 0;  \r\n      \r\n    // 养老  \r\n    var fInEndTmp = fIncome < fInEndMin ? fInEndMin  \r\n                    : (fIncome > fInEndMax ? fInEndMax : fIncome);  \r\n    fSum += fInEndTmp * fRateInEnd;  \r\n      \r\n    // 医疗  \r\n    var fInMedTmp = fIncome < fInMedMin ? fInMedMin  \r\n                    : (fIncome > fInMedMax ? fInMedMax : fIncome);  \r\n    fSum += fInMedTmp * fRateInMed;  \r\n      \r\n    // 失业  \r\n    var fInUnEmpTmp = fIncome < fInEndMin ? fInEndMin  \r\n                    : (fIncome > fInEndMax ? fInEndMax : fIncome);  \r\n    fSum += fInUnEmpTmp * fRateInUnEmp;  \r\n      \r\n    // 工伤  \r\n    var fInInjueryTmp = fIncome < fInMedMin ? fInMedMin  \r\n                    : (fIncome > fInMedMax ? fInMedMax : fIncome);  \r\n    fSum += fInInjueryTmp * fRateInInjuery;  \r\n      \r\n    // 生育  \r\n    var fInMateTmp = fIncome < fInMedMin ? fInMedMin  \r\n                    : (fIncome > fInMedMax ? fInMedMax : fIncome);  \r\n    fSum += fInMateTmp * fRateInMate;  \r\n          \r\n    return fSum;  \r\n}  \r\n\r\n// 计算公积金\r\nfunction funcCalcHouse(fIncome) {\r\n    // 公积金  \r\n    var fInHouseTmp = fIncome * fRateInHouse;  \r\n    fInHouseTmp = fInHouseTmp < fInHouseMin ? fInHouseMin   \r\n                    : (fInHouseTmp > fInHouseMax ? fInHouseMax : fInHouseTmp);  \r\n          \r\n    return fInHouseTmp;  \r\n}\r\n  \r\n// // 计算税  \r\n// function funcCalcTax(fIncome, f5In, fExemptionPoint) {  \r\n//     var iRet = 0;  \r\n//     var strRank = '';\r\n      \r\n//     var fVal = fIncome - f5In - fExemptionPoint;  \r\n//     if (fVal <= 0) {  \r\n//         iRet = 0;  \r\n//         strRank = '不用交税';\r\n//     }   \r\n//     else if (fVal <= 1500){  \r\n//         iRet = fVal * 0.03;  \r\n//         strRank = '(0, 1500]';\r\n//     }   \r\n//     else if (fVal <= 4500) {  \r\n//         iRet = fVal * 0.1 - 105;  \r\n//         strRank = '(1500, 4500]';\r\n//     }  \r\n//     else if (fVal <= 9000) {  \r\n//         iRet = fVal * 0.2 - 555;  \r\n//         strRank = '(4500, 9000]';\r\n//     }  \r\n//     else if (fVal <= 35000) {  \r\n//         iRet = fVal * 0.25 - 1005;  \r\n//         strRank = '(9000, 35000]';\r\n//     }  \r\n//     else if (fVal <= 55000) {  \r\n//         iRet = fVal * 0.3 - 2755;  \r\n//         strRank = '(35000, 55000]';\r\n//     }  \r\n//     else if (fVal <= 80000) {  \r\n//         iRet = fVal * 0.35 - 5505;  \r\n//         strRank = '(55000, 80000]';\r\n//     }  \r\n//     else {  \r\n//         iRet = fVal * 0.45 - 13505;  \r\n//         strRank = '土豪';\r\n//     }  \r\n//     var objTmp = {};\r\n//     objTmp.val = iRet;\r\n//     objTmp.rank = strRank;\r\n//     return objTmp;  \r\n// }  \r\n\r\n// 计算税  2018.10\r\nfunction funcCalcTax(fIncome, f5In, fExemptionPoint) {  \r\n    var iRet = 0;  \r\n    var strRank = '';\r\n      \r\n    var fVal = fIncome - f5In - fExemptionPoint;  \r\n    if (fVal <= 0) {  \r\n        iRet = 0;  \r\n        strRank = '不用交税';\r\n    }   \r\n    else if (fVal <= 3000){  \r\n        iRet = fVal * 0.03;  \r\n        strRank = '(0, 3000]';\r\n    }   \r\n    else if (fVal <= 12000) {  \r\n        iRet = fVal * 0.1 - 210;  \r\n        strRank = '(3000, 12000]';\r\n    }  \r\n    else if (fVal <= 25000) {  \r\n        iRet = fVal * 0.2 - 1410;  \r\n        strRank = '(12000, 25000]';\r\n    }  \r\n    else if (fVal <= 35000) {  \r\n        iRet = fVal * 0.25 - 2660;  \r\n        strRank = '(25000, 35000]';\r\n    }  \r\n    else if (fVal <= 55000) {  \r\n        iRet = fVal * 0.3 - 4410;  \r\n        strRank = '(35000, 55000]';\r\n    }  \r\n    else if (fVal <= 80000) {  \r\n        iRet = fVal * 0.35 - 7160;  \r\n        strRank = '(55000, 80000]';\r\n    }  \r\n    else {  \r\n        iRet = fVal * 0.45 - 15160;  \r\n        strRank = '土豪';\r\n    }  \r\n    var objTmp = {};\r\n    objTmp.val = iRet;\r\n    objTmp.rank = strRank;\r\n    return objTmp;  \r\n}  \r\n  \r\nvar aryIncomeX = [];  \r\nvar aryIncomeYTax = [];  \r\nvar aryIncomeY = [];  \r\nvar aryIncomeYRankDesc = [];\r\nvar aryIncomeY5In = [];  \r\nvar aryIncomeYHouse = [];  \r\nvar fIncomeLeft = 5000;  \r\nvar fIncomeRight = 100000;  \r\nfor (var i = fIncomeLeft; i <= fIncomeRight; i += 100) {  \r\n    if (i > 50000) {\r\n        i += 900;\r\n    }\r\n    aryIncomeX.push(i);  \r\n    var f5In = funcCalc5In(bFixedIn ? fFixedInBase : i); //.toFixed(2);  \r\n    var fHousePerson = funcCalcHouse(bFixedHouse ? fFixedHouseBase : i); //.toFixed(2);\r\n    var f5In_House = f5In + fHousePerson;\r\n    var objVal_Rank = funcCalcTax(i, f5In_House, fExemptionPoint);\r\n    var fTax = Math.ceil(objVal_Rank.val);  \r\n    \r\n    aryIncomeYTax.push(fTax);  \r\n    aryIncomeY.push(i - fTax - f5In_House);  \r\n    aryIncomeY5In.push(f5In);  \r\n    aryIncomeYHouse.push(fHousePerson);\r\n    aryIncomeYRankDesc.push(objVal_Rank.rank);\r\n}  \r\n  \r\noption = {  \r\n    title: {  \r\n        text: '北京个税(社保2017基): 起征点: ' + fExemptionPoint  \r\n    },  \r\n    tooltip: {  \r\n        trigger: 'axis',  \r\n        formatter: function(params) {  \r\n            var iIndex = params[0].dataIndex;  \r\n            var aryHtml = [];  \r\n              \r\n            // 收入  \r\n            aryHtml.push('收入：' + aryIncomeX[iIndex] + '<br />');  \r\n              \r\n            // 五险  \r\n            aryHtml.push('五险：' + aryIncomeY5In[iIndex].toFixed(2) + '<br />');  \r\n            \r\n            // 公积金  \r\n            aryHtml.push('公积金：' + aryIncomeYHouse[iIndex].toFixed(2) + '<br />');  \r\n            \r\n            // 五险+公积金  \r\n            aryHtml.push('五险+公积金：' + (aryIncomeY5In[iIndex] + aryIncomeYHouse[iIndex]).toFixed(2) + '<br />');  \r\n              \r\n            // 个税  \r\n            aryHtml.push('个税：' + aryIncomeYTax[iIndex].toFixed(2) + '<br />');  \r\n            \r\n            // 个税等级  \r\n            aryHtml.push('个税等级：' + aryIncomeYRankDesc[iIndex] + '<br />');  \r\n            \r\n            // 五险+公积金+个税\r\n            aryHtml.push('五险+公积金+个税：' + (aryIncomeY5In[iIndex] + aryIncomeYHouse[iIndex] + aryIncomeYTax[iIndex]).toFixed(2) + '<br />');  \r\n            \r\n            // 税后收入  \r\n            aryHtml.push('税后收入：' + aryIncomeY[iIndex].toFixed(2) + '<br />');  \r\n            \r\n            // +公积金税后收入\r\n            aryHtml.push('+公积金税后收入：' + (aryIncomeY[iIndex] + aryIncomeYHouse[iIndex] * 2).toFixed(2) + '<br />');  \r\n              \r\n            // 年收入  \r\n            aryHtml.push('年收入：' + (aryIncomeX[iIndex] * 12).toFixed(2) + '<br />');  \r\n\r\n            // 税后年收入  \r\n            aryHtml.push('税后年收入：' + (aryIncomeY[iIndex] * 12).toFixed(2) + '<br />');  \r\n            \r\n            // +公积金税后年收入  \r\n            aryHtml.push('+公积金税后年收入：' + ((aryIncomeY[iIndex] + aryIncomeYHouse[iIndex] * 2) * 12).toFixed(2) + '<br />');  \r\n              \r\n            // 年缴税  \r\n            aryHtml.push('年缴税：' + (aryIncomeYTax[iIndex] * 12).toFixed(2) + '<br />');  \r\n              \r\n            return aryHtml.join('');  \r\n        }  \r\n    },  \r\n    xAxis: {  \r\n        data: aryIncomeX  \r\n    },  \r\n    yAxis: [  \r\n        {  \r\n            type: 'value',  \r\n            scale: true,  \r\n            name: 'tax',  \r\n            //max: 20000,  \r\n            min: 0  \r\n        },  \r\n        {  \r\n            type: 'value',  \r\n            scale: true,  \r\n            name: 'income',  \r\n            max: fIncomeRight,  \r\n            min: 0,  \r\n            splitLine: {  \r\n                show: false  \r\n            }  \r\n        }  \r\n    ],  \r\n    legend: {  \r\n        right: 20,  \r\n        data: ['tax', 'income']    \r\n    },  \r\n    dataZoom: [{  \r\n        start: 0,  \r\n        end: 100  \r\n    }, {  \r\n        type: 'inside'  \r\n    }],  \r\n      \r\n    series: [{  \r\n            name: 'tax',  \r\n            type: 'line',  \r\n            yAxisIndex: 0,  \r\n            data: aryIncomeYTax\r\n        }\r\n        ,   \r\n        {  \r\n        name: 'income',  \r\n        type: 'line',  \r\n        yAxisIndex: 1,  \r\n        data: aryIncomeY  \r\n        }  \r\n    ]  \r\n};  ","html":"","externalScripts":"","updaterUID":"bd-1142874199","theme":"","layout":"","viewCount":781,"userName":"smartcone","commentCount":0,"starCount":2,"isStared":0,"thumbnailURL":"https://www.makeapie.com/ecg-storage/ec_gallery_thumbnail/xHJlPbUPRzb.png?v=1535720630814","isCustomThumbnail":0,"builtinTags":["category-work","dataZoom","grid","legend","series-line","title","tooltip"],"customTags":["个人所得税","五险一金","工资收入"],"updaterUserName":"smartcone"}}