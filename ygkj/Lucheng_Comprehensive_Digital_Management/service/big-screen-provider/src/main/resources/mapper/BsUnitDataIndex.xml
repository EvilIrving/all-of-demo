<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ygkj.big.screen.mapper.BsUnitDataIndexMapper">

    <resultMap id="BaseResultMap" type="com.ygkj.big.screen.model.BsUnitDataIndex">
        <result column="data_id" property="dataId"/>
        <result column="group_id" property="groupId"/>
        <result column="case_id" property="caseId"/>
        <result column="unit_id" property="unitId"/>
        <result column="unit_name" property="unitName"/>
        <result column="time_index" property="timeIndex"/>
        <result column="data_api" property="dataApi"/>
        <result column="data_param" property="dataParam"/>
        <result column="data_type" property="dataType"/>
        <result column="time_stamp" property="timeStamp"/>
    </resultMap>

    <sql id="Base_Column_List">
        data_id,
        group_id,
        case_id,
        unit_id,
        unit_name,
        time_index,
        data_api,
        data_param,
        data_type,
        time_stamp
    </sql>

    <insert id="insert" parameterType="com.ygkj.big.screen.model.BsUnitDataIndex">
        INSERT INTO lc_meta_db.bs_unit_data_index
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test='null != dataId'>
                data_id,
            </if>
            <if test='null != groupId'>
                group_id,
            </if>
            <if test='null != caseId'>
                case_id,
            </if>
            <if test='null != unitId'>
                unit_id,
            </if>
            <if test='null != unitName'>
                unit_name,
            </if>
            <if test='null != timeIndex'>
                time_index,
            </if>
            <if test='null != dataApi'>
                data_api,
            </if>
            <if test='null != dataParam'>
                data_param,
            </if>
            <if test='null != dataType'>
                data_type,
            </if>
            <if test='null != timeStamp'>
                time_stamp
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test='null != dataId'>
                #{dataId},
            </if>
            <if test='null != groupId'>
                #{groupId},
            </if>
            <if test='null != caseId'>
                #{caseId},
            </if>
            <if test='null != unitId'>
                #{unitId},
            </if>
            <if test='null != unitName'>
                #{unitName},
            </if>
            <if test='null != timeIndex'>
                #{timeIndex},
            </if>
            <if test='null != dataApi'>
                #{dataApi},
            </if>
            <if test='null != dataParam'>
                #{dataParam},
            </if>
            <if test='null != dataType'>
                #{dataType},
            </if>
            <if test='null != timeStamp'>
                #{timeStamp}
            </if>
        </trim>
    </insert>

    <delete id="delete">
        DELETE FROM bs_unit_data_index
        WHERE data_id = #{dataId}
    </delete>

    <update id="update" parameterType="com.ygkj.big.screen.model.BsUnitDataIndex">
        UPDATE bs_unit_data_index
        <set>
            <if test='null != groupId'>group_id = #{groupId},</if>
            <if test='null != caseId'>case_id = #{caseId},</if>
            <if test='null != unitId'>unit_id = #{unitId},</if>
            <if test='null != unitName'>unit_name = #{unitName},</if>
            <if test='null != timeIndex'>time_index = #{timeIndex},</if>
            <if test='null != dataApi'>data_api = #{dataApi},</if>
            <if test='null != dataParam'>data_param = #{dataParam},</if>
            <if test='null != dataType'>data_type = #{dataType},</if>
            <if test='null != timeStamp'>time_stamp = #{timeStamp}</if>
        </set>
        WHERE data_id = #{dataId}
    </update>


    <select id="load" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM bs_unit_data_index
        WHERE data_id = #{dataId}
    </select>

    <select id="pageList" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM bs_unit_data_index
        LIMIT #{offset}, #{pageSize}
    </select>

    <select id="pageListCount" resultType="java.lang.Integer">
        SELECT count(1)
        FROM bs_unit_data_index
    </select>

    <select id="selectIdByCondition" resultType="java.lang.String">
        SELECT
        <include refid="Base_Column_List"/>
        FROM bs_unit_data_index
        <where>
            <if test='null != groupId'>and group_id = #{groupId}</if>
            <if test='null != caseId'>and case_id = #{caseId}</if>
            <if test='null != unitId'>and unit_id = #{unitId}</if>
            <if test='null != unitName'>and unit_name = #{unitName}</if>
            <if test='null != timeIndex'>and time_index = #{timeIndex}</if>
            <if test='null != dataApi'>and data_api = #{dataApi}</if>
            <if test='null != dataParam'>and data_param = #{dataParam}</if>
            <if test='null != dataType'>and data_type = #{dataType}</if>
            <if test='null != timeStamp'>and time_stamp = #{timeStamp}</if>
        </where>
        limit 1
    </select>


    <select id="selectByCondition" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM bs_unit_data_index
        <where>
            <if test='null != groupId'>and find_in_set(group_id,#{groupId})</if>
            <if test='null != caseId'>and case_id = #{caseId}</if>
            <if test='null != unitId'>and unit_id = #{unitId}</if>
            <if test='null != unitName'>and unit_name = #{unitName}</if>
            <if test='null != timeIndex'>and time_index = #{timeIndex}</if>
            <if test='null != dataApi'>and data_api = #{dataApi}</if>
            <if test='null != dataParam'>and data_param = #{dataParam}</if>
            <if test='null != dataType'>and data_type = #{dataType}</if>
            <if test='null != timeStamp'>and time_stamp = #{timeStamp}</if>
        </where>
    </select>

    <select id="selectByUniqueIndex" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM lc_meta_db.bs_unit_data_index
        <where>
            <choose>
                <when test="caseId!=null and caseId!=''">
                    and case_id = #{caseId}
                </when>
                <otherwise>
                    and case_id is null
                </otherwise>
            </choose>
            <if test="null != unitName and caseId!=''">
                and unit_name = #{unitName}
            </if>
            <choose>
                <when test="dataApi!=null and dataApi!=''">
                    and data_api = #{dataApi}
                </when>
                <otherwise>
                    and data_api is null
                </otherwise>
            </choose>
            <choose>
                <when test="dataParam!=null and dataParam!=''">
                    and data_param = #{dataParam}
                </when>
                <otherwise>
                    and data_param is null
                </otherwise>
            </choose>
            <if test='null != dataType'>
                and data_type = #{dataType}
            </if>
            <if test='null != timeStamp'>
                and time_stamp = #{timeStamp}
            </if>
        </where>
        limit 1
    </select>

</mapper>