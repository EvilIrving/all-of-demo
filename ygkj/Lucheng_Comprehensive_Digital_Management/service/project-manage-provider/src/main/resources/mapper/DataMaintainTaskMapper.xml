<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ygkj.water.project.mapper.DataMaintainTaskMapper">


    <select id="pageQuery" resultType="com.ygkj.project.model.DataMaintainTask">
        select * from data_maintain_task where  status in (0,1)
         <if test="obj.status != null and obj.status != ''">
             and status = #{obj.status}
         </if>

        <if test="isAdmin == null or isAdmin == ''.toString()">
            and (unit_director_phone = #{phone} or data_maintain_phone = #{phone} or FIND_IN_SET(
            #{phone},third_party_unit) > 0 )
        </if>

        <if test="obj.startTime != null">
            and send_time > #{obj.startTime}
        </if>
        <if test="obj.endTime != null">
            and send_time <![CDATA[ <= ]]> #{obj.endTime}
        </if>
        order by send_time desc
    </select>
</mapper>